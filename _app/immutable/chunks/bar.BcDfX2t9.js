import"./transform.Bxaw71Wc.js";import{j as vt,a as Pi,P as zi,t as kt,u as Yi,v as $,w,x as wt,y as Li,z as gt,A as Ri,B as Ai,C as Gi,D as Oi,E as ji,F as Fi,G as Di,H as Zi,I as qi,J as Ki,K as q,L as Vi,M as Wi,N as z,O as Hi,Q as Tt,R as Ji,S as zt,T as Qi,U as Ui,V as R,W as $i,e as A,X as M,Y as tn,Z as nn,_ as en,$ as sn,a0 as on,a1 as rn,a2 as hn,a3 as Yt,a4 as Lt,a5 as nt,a6 as _n,a7 as et,a8 as st,a9 as K,aa as an,ab as G,ac as cn,ad as ot,ae as ln,af as un,ag as it,ah as fn,ai as pn,aj as Rt,ak as yn,al as dn,am as xn,an as bn,ao as O,ap as mn,aq as vn,ar as kn,as as St}from"./index.iNGoBIib.js";function rt(t,i){let n=0;for(let e of t)e!=null&&(e=+e)>=e&&++n;return n}function wn(t){return Math.max(1,Math.ceil(Math.log(rt(t))/Math.LN2)+1)}function gn(t,i,n){const e=rt(t),o=vt(t,.75)-vt(t,.25);return e&&o?Math.ceil((n-i)/(2*o*Math.pow(e,-1/3))):1}function At(t,i,n){const e=rt(t),o=Pi(t);return e&&o?Math.ceil((n-i)*Math.cbrt(e)/(3.49*o)):1}function d(t){return function(){return t}}function Gt(t){let i=3;return t.digits=function(n){if(!arguments.length)return i;if(n==null)i=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);i=e}return t},()=>new zi(i)}function Ot(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function jt(t){this._context=t}jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i);break}}};function Y(t){return new jt(t)}function Ft(t){return t[0]}function Dt(t){return t[1]}function Tn(t,i){var n=d(!0),e=null,o=Y,s=null,r=Gt(h);t=typeof t=="function"?t:t===void 0?Ft:d(t),i=typeof i=="function"?i:i===void 0?Dt:d(i);function h(_){var c,u=(_=Ot(_)).length,a,l=!1,f;for(e==null&&(s=o(f=r())),c=0;c<=u;++c)!(c<u&&n(a=_[c],c,_))===l&&((l=!l)?s.lineStart():s.lineEnd()),l&&s.point(+t(a,c,_),+i(a,c,_));if(f)return s=null,f+""||null}return h.x=function(_){return arguments.length?(t=typeof _=="function"?_:d(+_),h):t},h.y=function(_){return arguments.length?(i=typeof _=="function"?_:d(+_),h):i},h.defined=function(_){return arguments.length?(n=typeof _=="function"?_:d(!!_),h):n},h.curve=function(_){return arguments.length?(o=_,e!=null&&(s=o(e)),h):o},h.context=function(_){return arguments.length?(_==null?e=s=null:s=o(e=_),h):e},h}function Sn(t,i,n){var e=null,o=d(!0),s=null,r=Y,h=null,_=Gt(c);t=typeof t=="function"?t:t===void 0?Ft:d(+t),i=typeof i=="function"?i:d(i===void 0?0:+i),n=typeof n=="function"?n:n===void 0?Dt:d(+n);function c(a){var l,f,p,x=(a=Ot(a)).length,b,y=!1,T,S=new Array(x),N=new Array(x);for(s==null&&(h=r(T=_())),l=0;l<=x;++l){if(!(l<x&&o(b=a[l],l,a))===y)if(y=!y)f=l,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),p=l-1;p>=f;--p)h.point(S[p],N[p]);h.lineEnd(),h.areaEnd()}y&&(S[l]=+t(b,l,a),N[l]=+i(b,l,a),h.point(e?+e(b,l,a):S[l],n?+n(b,l,a):N[l]))}if(T)return h=null,T+""||null}function u(){return Tn().defined(o).curve(r).context(s)}return c.x=function(a){return arguments.length?(t=typeof a=="function"?a:d(+a),e=null,c):t},c.x0=function(a){return arguments.length?(t=typeof a=="function"?a:d(+a),c):t},c.x1=function(a){return arguments.length?(e=a==null?null:typeof a=="function"?a:d(+a),c):e},c.y=function(a){return arguments.length?(i=typeof a=="function"?a:d(+a),n=null,c):i},c.y0=function(a){return arguments.length?(i=typeof a=="function"?a:d(+a),c):i},c.y1=function(a){return arguments.length?(n=a==null?null:typeof a=="function"?a:d(+a),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(i)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(e).y(i)},c.defined=function(a){return arguments.length?(o=typeof a=="function"?a:d(!!a),c):o},c.curve=function(a){return arguments.length?(r=a,s!=null&&(h=r(s)),c):r},c.context=function(a){return arguments.length?(a==null?s=h=null:h=r(s=a),c):s},c}class Zt{constructor(i,n){this._context=i,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(i,n){switch(i=+i,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(i,n):this._context.moveTo(i,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+i)/2,this._y0,this._x0,n,i,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,i,this._y0,i,n);break}}this._x0=i,this._y0=n}}function Nn(t){return new Zt(t,!0)}function Cn(t){return new Zt(t,!1)}function g(){}function j(t,i,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+i)/6,(t._y0+4*t._y1+n)/6)}function V(t){this._context=t}V.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:j(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:j(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function En(t){return new V(t)}function qt(t){this._context=t}qt.prototype={areaStart:g,areaEnd:g,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x2=t,this._y2=i;break;case 1:this._point=2,this._x3=t,this._y3=i;break;case 2:this._point=3,this._x4=t,this._y4=i,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+i)/6);break;default:j(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function Mn(t){return new qt(t)}function Kt(t){this._context=t}Kt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,e=(this._y0+4*this._y1+i)/6;this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 3:this._point=4;default:j(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function Bn(t){return new Kt(t)}function Vt(t,i){this._basis=new V(t),this._beta=i}Vt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,i=this._y,n=t.length-1;if(n>0)for(var e=t[0],o=i[0],s=t[n]-e,r=i[n]-o,h=-1,_;++h<=n;)_=h/n,this._basis.point(this._beta*t[h]+(1-this._beta)*(e+_*s),this._beta*i[h]+(1-this._beta)*(o+_*r));this._x=this._y=null,this._basis.lineEnd()},point:function(t,i){this._x.push(+t),this._y.push(+i)}};const In=function t(i){function n(e){return i===1?new V(e):new Vt(e,i)}return n.beta=function(e){return t(+e)},n}(.85);function F(t,i,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-i),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ht(t,i){this._context=t,this._k=(1-i)/6}ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:F(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2,this._x1=t,this._y1=i;break;case 2:this._point=3;default:F(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Xn=function t(i){function n(e){return new ht(e,i)}return n.tension=function(e){return t(+e)},n}(0);function _t(t,i){this._context=t,this._k=(1-i)/6}_t.prototype={areaStart:g,areaEnd:g,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:F(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Pn=function t(i){function n(e){return new _t(e,i)}return n.tension=function(e){return t(+e)},n}(0);function at(t,i){this._context=t,this._k=(1-i)/6}at.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:F(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const zn=function t(i){function n(e){return new at(e,i)}return n.tension=function(e){return t(+e)},n}(0);function ct(t,i,n){var e=t._x1,o=t._y1,s=t._x2,r=t._y2;if(t._l01_a>kt){var h=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,_=3*t._l01_a*(t._l01_a+t._l12_a);e=(e*h-t._x0*t._l12_2a+t._x2*t._l01_2a)/_,o=(o*h-t._y0*t._l12_2a+t._y2*t._l01_2a)/_}if(t._l23_a>kt){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-i*t._l12_2a)/u,r=(r*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(e,o,s,r,t._x2,t._y2)}function Wt(t,i){this._context=t,this._alpha=i}Wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,e=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3;default:ct(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Yn=function t(i){function n(e){return i?new Wt(e,i):new ht(e,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ht(t,i){this._context=t,this._alpha=i}Ht.prototype={areaStart:g,areaEnd:g,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,e=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:ct(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Ln=function t(i){function n(e){return i?new Ht(e,i):new _t(e,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Jt(t,i){this._context=t,this._alpha=i}Jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,e=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ct(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Rn=function t(i){function n(e){return i?new Jt(e,i):new at(e,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Qt(t){this._context=t}Qt.prototype={areaStart:g,areaEnd:g,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,i){t=+t,i=+i,this._point?this._context.lineTo(t,i):(this._point=1,this._context.moveTo(t,i))}};function An(t){return new Qt(t)}function Nt(t){return t<0?-1:1}function Ct(t,i,n){var e=t._x1-t._x0,o=i-t._x1,s=(t._y1-t._y0)/(e||o<0&&-0),r=(n-t._y1)/(o||e<0&&-0),h=(s*o+r*e)/(e+o);return(Nt(s)+Nt(r))*Math.min(Math.abs(s),Math.abs(r),.5*Math.abs(h))||0}function Et(t,i){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-i)/2:i}function tt(t,i,n){var e=t._x0,o=t._y0,s=t._x1,r=t._y1,h=(s-e)/3;t._context.bezierCurveTo(e+h,o+h*i,s-h,r-h*n,s,r)}function D(t){this._context=t}D.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tt(this,this._t0,Et(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){var n=NaN;if(t=+t,i=+i,!(t===this._x1&&i===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,tt(this,Et(this,n=Ct(this,t,i)),n);break;default:tt(this,this._t0,n=Ct(this,t,i));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i,this._t0=n}}};function Ut(t){this._context=new $t(t)}(Ut.prototype=Object.create(D.prototype)).point=function(t,i){D.prototype.point.call(this,i,t)};function $t(t){this._context=t}$t.prototype={moveTo:function(t,i){this._context.moveTo(i,t)},closePath:function(){this._context.closePath()},lineTo:function(t,i){this._context.lineTo(i,t)},bezierCurveTo:function(t,i,n,e,o,s){this._context.bezierCurveTo(i,t,e,n,s,o)}};function Gn(t){return new D(t)}function On(t){return new Ut(t)}function ti(t){this._context=t}ti.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,i=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],i[0]):this._context.moveTo(t[0],i[0]),n===2)this._context.lineTo(t[1],i[1]);else for(var e=Mt(t),o=Mt(i),s=0,r=1;r<n;++s,++r)this._context.bezierCurveTo(e[0][s],o[0][s],e[1][s],o[1][s],t[r],i[r]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,i){this._x.push(+t),this._y.push(+i)}};function Mt(t){var i,n=t.length-1,e,o=new Array(n),s=new Array(n),r=new Array(n);for(o[0]=0,s[0]=2,r[0]=t[0]+2*t[1],i=1;i<n-1;++i)o[i]=1,s[i]=4,r[i]=4*t[i]+2*t[i+1];for(o[n-1]=2,s[n-1]=7,r[n-1]=8*t[n-1]+t[n],i=1;i<n;++i)e=o[i]/s[i-1],s[i]-=e,r[i]-=e*r[i-1];for(o[n-1]=r[n-1]/s[n-1],i=n-2;i>=0;--i)o[i]=(r[i]-o[i+1])/s[i];for(s[n-1]=(t[n]+o[n-1])/2,i=0;i<n-1;++i)s[i]=2*t[i+1]-o[i+1];return[o,s]}function jn(t){return new ti(t)}function W(t,i){this._context=t,this._t=i}W.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,i),this._context.lineTo(t,i);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,i)}break}}this._x=t,this._y=i}};function Fn(t){return new W(t,.5)}function Dn(t){return new W(t,0)}function Zn(t){return new W(t,1)}const qn=new Map([["basis",En],["basis-closed",Mn],["basis-open",Bn],["bundle",In],["bump-x",Nn],["bump-y",Cn],["cardinal",Xn],["cardinal-closed",Pn],["cardinal-open",zn],["catmull-rom",Yn],["catmull-rom-closed",Ln],["catmull-rom-open",Rn],["linear",Y],["linear-closed",An],["monotone-x",Gn],["monotone-y",On],["natural",jn],["step",Fn],["step-after",Zn],["step-before",Dn]]);function ii(t=Y,i){if(typeof t=="function")return t;const n=qn.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(i!==void 0){if("beta"in n)return n.beta(i);if("tension"in n)return n.tension(i);if("alpha"in n)return n.alpha(i)}return n}function Kn(t=Z,i){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?Z:ii(t,i)}function Z(t){return Y(t)}function Vn(t={y:"count"},i={}){[t,i]=Qn(t,i);const{x:n,y:e}=i;return Jn(Un(n,i,q),null,null,e,t,Yi(i))}function Wn(t,i,n={}){if(n?.interval==null)return n;const{reduce:e=hn}=n,o={filter:null};return n[i]!=null&&(o[i]=e),n[`${i}1`]!=null&&(o[`${i}1`]=e),n[`${i}2`]!=null&&(o[`${i}2`]=e),t(o,n)}function Hn(t={}){return Wn(Vn,"y",Vi(t,"x"))}function Jn(t,i,n,e,{data:o=Ri,filter:s=Ai,sort:r,reverse:h,..._}={},c={}){t=Bt(t),i=Bt(i),_=te(_,c),o=si(o,q),r=r==null?void 0:ni("sort",r,c),s=s==null?void 0:ei("filter",s,c),e!=null&&$(_,"y","y1","y2")&&(e=null);const[u,a]=w(t),[l,f]=w(t),[p,x]=w(i),[b,y]=w(i),[T,S]=e!=null?[e,"y"]:[],[N,hi]=w(T),{x:_i,y:ai,z:H,fill:ut,stroke:ft,x1:ci,x2:li,y1:ui,y2:fi,domain:ve,cumulative:ke,thresholds:we,interval:ge,...pi}=c,[yi,di]=w(H),[pt]=wt(ut),[yt]=wt(ft),[xi,bi]=w(pt),[mi,vi]=w(yt);return{..."z"in c&&{z:yi||H},..."fill"in c&&{fill:xi||ut},..."stroke"in c&&{stroke:mi||ft},...Li(pi,(m,J,ki)=>{const Q=Wi(z(m,T),ki?.[S]),B=z(m,H),I=z(m,pt),X=z(m,yt),P=Hi(_,{z:B,fill:I,stroke:X}),U=[],dt=[],wi=Q&&hi([]),gi=B&&di([]),Ti=I&&bi([]),Si=X&&vi([]),xt=t&&a([]),Ni=t&&f([]),bt=i&&x([]),Ci=i&&y([]),Ei=ee(t,i,m);let Mi=0;for(const C of _)C.initialize(m);r&&r.initialize(m),s&&s.initialize(m);for(const C of J){const mt=[];for(const E of _)E.scope("facet",C);r&&r.scope("facet",C),s&&s.scope("facet",C);for(const[E,Bi]of Tt(C,P))for(const[Ii,L]of Tt(Bi,Q))for(const[v,k]of Ei(L))if(P&&(k.z=E),!(s&&!s.reduce(v,k))){mt.push(Mi++),dt.push(o.reduceIndex(v,m,k)),Q&&wi.push(Ii),B&&gi.push(P===B?E:B[(v.length>0?v:L)[0]]),I&&Ti.push(P===I?E:I[(v.length>0?v:L)[0]]),X&&Si.push(P===X?E:X[(v.length>0?v:L)[0]]),xt&&(xt.push(k.x1),Ni.push(k.x2)),bt&&(bt.push(k.y1),Ci.push(k.y2));for(const Xi of _)Xi.reduce(v,k);r&&r.reduce(v,k)}U.push(mt)}return Ji(U,r,h),{data:dt,facets:U}}),...!$(_,"x")&&(u?{x1:u,x2:l,x:gt(u,l)}:{x:_i,x1:ci,x2:li}),...!$(_,"y")&&(p?{y1:p,y2:b,y:gt(p,b)}:{y:ai,y1:ui,y2:fi}),...N&&{[S]:N},...Object.fromEntries(_.map(({name:m,output:J})=>[m,J]))}}function Qn({cumulative:t,domain:i,thresholds:n,interval:e,...o},s){return[o,{cumulative:t,domain:i,thresholds:n,interval:e,...s}]}function Un(t,{cumulative:i,domain:n,thresholds:e,interval:o},s){return t={...Gi(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=i),t.thresholds===void 0&&(t.thresholds=e),t.interval===void 0&&(t.interval=o),t.value===void 0&&(t.value=s),t.thresholds=$n(t.thresholds,t.interval),t}function Bt(t){if(t==null)return;const{value:i,cumulative:n,domain:e=A,thresholds:o}=t,s=r=>{let h=z(r,i),_;if(zt(h)||ne(o)){h=Qi(h,Ui,Float64Array);let[u,a]=typeof e=="function"?e(h):e,l=typeof o=="function"&&!R(o)?o(h,u,a):o;typeof l=="number"&&(l=$i(u,a,l)),R(l)&&(e===A&&(u=l.floor(u),a=l.offset(l.floor(a))),l=l.range(u,l.offset(a))),_=l}else{h=M(h);let[u,a]=typeof e=="function"?e(h):e,l=typeof o=="function"&&!R(o)?o(h,u,a):o;if(typeof l=="number")if(e===A){let f=tn(u,a,l);if(isFinite(f))if(f>0){let p=Math.round(u/f),x=Math.round(a/f);p*f<=u||--p,x*f>a||++x;let b=x-p+1;l=new Float64Array(b);for(let y=0;y<b;++y)l[y]=(p+y)*f}else if(f<0){f=-f;let p=Math.round(u*f),x=Math.round(a*f);p/f<=u||--p,x/f>a||++x;let b=x-p+1;l=new Float64Array(b);for(let y=0;y<b;++y)l[y]=(p+y)/f}else l=[u];else l=[u]}else l=nn(u,a,l);else R(l)&&(e===A&&(u=l.floor(u),a=l.offset(l.floor(a))),l=l.range(u,l.offset(a)));_=l}const c=[];if(_.length===1)c.push([_[0],_[0]]);else for(let u=1;u<_.length;++u)c.push([_[u-1],_[u]]);return c.bin=(n<0?oe:n>0?se:lt)(c,_,h),c};return s.label=Oi(i),s}function $n(t,i,n=It){if(t===void 0)return i===void 0?n:ji(i);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return gn;case"scott":return At;case"sturges":return wn;case"auto":return It}return Fi(t)}return t}function te(t,i){return Di(t,i,ni)}function ni(t,i,n){return Zi(t,i,n,ei)}function ei(t,i,n){return qi(t,i,n,si)}function si(t,i){return Ki(t,i,ie)}function ie(t){switch(`${t}`.toLowerCase()){case"x":return re;case"x1":return _e;case"x2":return ae;case"y":return he;case"y1":return ce;case"y2":return le;case"z":return en}throw new Error(`invalid bin reduce: ${t}`)}function It(t,i,n){return Math.min(200,At(t,i,n))}function ne(t){return sn(t)||on(t)&&zt(t)}function ee(t,i,n){const e=t?.(n),o=i?.(n);return e&&o?function*(s){const r=e.bin(s);for(const[h,[_,c]]of e.entries()){const u=o.bin(r[h]);for(const[a,[l,f]]of o.entries())yield[u[a],{data:n,x1:_,y1:l,x2:c,y2:f}]}}:e?function*(s){const r=e.bin(s);for(const[h,[_,c]]of e.entries())yield[r[h],{data:n,x1:_,x2:c}]}:function*(s){const r=o.bin(s);for(const[h,[_,c]]of o.entries())yield[r[h],{data:n,y1:_,y2:c}]}}function lt(t,i,n){return i=M(i),e=>{const o=t.map(()=>[]);for(const s of e)o[rn(i,n[s])-1]?.push(s);return o}}function se(t,i,n){const e=lt(t,i,n);return o=>{const s=e(o);for(let r=1,h=s.length;r<h;++r){const _=s[r-1],c=s[r];for(const u of _)c.push(u)}return s}}function oe(t,i,n){const e=lt(t,i,n);return o=>{const s=e(o);for(let r=s.length-2;r>=0;--r){const h=s[r+1],_=s[r];for(const c of h)_.push(c)}return s}}function oi(t,i){const n=(+t+ +i)/2;return t instanceof Date?new Date(n):n}const re={reduceIndex(t,i,{x1:n,x2:e}){return oi(n,e)}},he={reduceIndex(t,i,{y1:n,y2:e}){return oi(n,e)}},_e={reduceIndex(t,i,{x1:n}){return n}},ae={reduceIndex(t,i,{x2:n}){return n}},ce={reduceIndex(t,i,{y1:n}){return n}},le={reduceIndex(t,i,{y2:n}){return n}},ue={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class fe extends nt{constructor(i,n={}){const{x1:e,y1:o,x2:s,y2:r,z:h,curve:_,tension:c}=n;super(i,{x1:{value:e,scale:"x"},y1:{value:o,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:r,scale:"y",optional:!0},z:{value:_n(n),optional:!0}},n,ue),this.z=h,this.curve=ii(_,c)}filter(i){return i}render(i,n,e,o,s){const{x1:r,y1:h,x2:_=r,y2:c=h}=e;return et("svg:g",s).call(st,this,o,s).call(K,this,n,0,0).call(u=>u.selectAll().data(an(i,[r,h,_,c],this,e)).enter().append("path").call(G,this).call(cn,this,e).attr("d",Sn().curve(this.curve).defined(a=>a>=0).x0(a=>r[a]).y0(a=>h[a]).x1(a=>_[a]).y1(a=>c[a]))).node()}}function Ne(t,i){const{x:n=ot,...e}=Hn(i);return new fe(t,Yt(Lt({...e,x1:n,x2:void 0})))}const pe={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class ye extends nt{constructor(i,n={}){const{x1:e,y1:o,x2:s,y2:r,curve:h,tension:_}=n;super(i,{x1:{value:e,scale:"x"},y1:{value:o,scale:"y"},x2:{value:s,scale:"x",optional:!0},y2:{value:r,scale:"y",optional:!0}},n,pe),this.curve=Kn(h,_),ln(this,n)}project(i,n,e){this.curve!==Z&&super.project(i,n,e)}render(i,n,e,o,s){const{x1:r,y1:h,x2:_=r,y2:c=h}=e,{curve:u}=this;return et("svg:g",s).call(st,this,o,s).call(K,this,n).call(a=>a.selectAll().data(i).enter().append("path").call(G,this).attr("d",u===Z&&s.projection?de(s.projection,r,h,_,c):l=>{const f=un(),p=u(f);return p.lineStart(),p.point(r[l],h[l]),p.point(_[l],c[l]),p.lineEnd(),f}).call(it,this,e).call(fn,this,e,s)).node()}}function de(t,i,n,e,o){const s=pn(t);return i=M(i),n=M(n),e=M(e),o=M(o),r=>s({type:"LineString",coordinates:[[i[r],n[r]],[e[r],o[r]]]})}function Ce(t,{x:i,x1:n,x2:e,y:o,y1:s,y2:r,...h}={}){return[n,e]=Xt(i,n,e),[s,r]=Xt(o,s,r),new ye(t,{...h,x1:n,x2:e,y1:s,y2:r})}function Xt(t,i,n){if(t===void 0){if(i===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[i]}else{if(i===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,i]}return[i,n]}const xe={ariaLabel:"bar"};class ri extends nt{constructor(i,n,e={},o=xe){super(i,n,e,o),mn(this,e),vn(this,e)}render(i,n,e,o,s){const{rx:r,ry:h,rx1y1:_,rx1y2:c,rx2y1:u,rx2y2:a}=this,l=this._x(n,e,o),f=this._y(n,e,o),p=this._width(n,e,o),x=this._height(n,e,o);return et("svg:g",s).call(st,this,o,s).call(this._transform,this,n).call(b=>b.selectAll().data(i).enter().call(_||c||u||a?y=>y.append("path").call(G,this).call(kn,l,f,Pt(l,p),Pt(f,x),this).call(it,this,e):y=>y.append("rect").call(G,this).attr("x",l).attr("width",p).attr("y",f).attr("height",x).call(St,"rx",r).call(St,"ry",h).call(it,this,e))).node()}_x(i,{x:n},{marginLeft:e}){const{insetLeft:o}=this;return n?s=>n[s]+o:e+o}_y(i,{y:n},{marginTop:e}){const{insetTop:o}=this;return n?s=>n[s]+o:e+o}_width({x:i},{x:n},{marginRight:e,marginLeft:o,width:s}){const{insetLeft:r,insetRight:h}=this,_=n&&i?i.bandwidth():s-e-o;return Math.max(0,_-r-h)}_height({y:i},{y:n},{marginTop:e,marginBottom:o,height:s}){const{insetTop:r,insetBottom:h}=this,_=n&&i?i.bandwidth():s-e-o;return Math.max(0,_-r-h)}}function Pt(t,i){return typeof t=="function"&&typeof i=="function"?n=>t(n)+i(n):typeof t=="function"?n=>t(n)+i:typeof i=="function"?n=>t+i(n):t+i}class be extends ri{constructor(i,n={},e){const{x1:o,x2:s,y:r}=n;super(i,{x1:{value:o,scale:"x"},x2:{value:s,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n,e)}_transform(i,n,{x:e}){i.call(K,n,{x:e},0,0)}_x({x:i},{x1:n,x2:e},{marginLeft:o}){const{insetLeft:s}=this;return O(i)?o+s:r=>Math.min(n[r],e[r])+s}_width({x:i},{x1:n,x2:e},{marginRight:o,marginLeft:s,width:r}){const{insetLeft:h,insetRight:_}=this;return O(i)?r-o-s-h-_:c=>Math.max(0,Math.abs(e[c]-n[c])-h-_)}}class me extends ri{constructor(i,n={},e){const{x:o,y1:s,y2:r}=n;super(i,{y1:{value:s,scale:"y"},y2:{value:r,scale:"y"},x:{value:o,scale:"x",type:"band",optional:!0}},n,e)}_transform(i,n,{y:e}){i.call(K,n,{y:e},0,0)}_y({y:i},{y1:n,y2:e},{marginTop:o}){const{insetTop:s}=this;return O(i)?o+s:r=>Math.min(n[r],e[r])+s}_height({y:i},{y1:n,y2:e},{marginTop:o,marginBottom:s,height:r}){const{insetTop:h,insetBottom:_}=this;return O(i)?r-o-s-h-_:c=>Math.max(0,Math.abs(e[c]-n[c])-h-_)}}function Ee(t,i={}){return Rt(i)||(i={...i,y:ot,x2:q}),new be(t,yn(dn(xn(i))))}function Me(t,i={}){return Rt(i)||(i={...i,x:ot,y2:q}),new me(t,Yt(bn(Lt(i))))}export{Vn as a,Me as b,Ne as c,Ee as d,Ce as l};
