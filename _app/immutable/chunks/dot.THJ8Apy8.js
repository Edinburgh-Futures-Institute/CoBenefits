import"./transform.BNP73y-7.js";import{M as g,m as I,p as D,a as P,c as F,b as R,d as T,e as j,f as z,g as C,h as L,i as N,s as W,j as S,k as M,l as X,n as Y}from"./index.H5MpKv3B.js";const q={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function B(s){return s.sort===void 0&&s.reverse===void 0?W({channel:"-r"},s):s}class E extends g{constructor(r,a={}){const{x:o,y:f,r:b,rotate:k,symbol:A=S,frameAnchor:n}=a,[c,e]=M(k,0),[m,i]=I(A),[h,v]=M(b,m==null?3:4.5);super(r,{x:{value:o,scale:"x",optional:!0},y:{value:f,scale:"y",optional:!0},r:{value:h,scale:"r",filter:D,optional:!0},rotate:{value:c,optional:!0},symbol:{value:m,scale:"auto",optional:!0}},B(a),q),this.r=v,this.rotate=e,this.symbol=i,this.frameAnchor=P(n);const{channels:y}=this,{symbol:u}=y;if(u){const{fill:p,stroke:d}=y;u.hint={fill:p?p.value===u.value?"color":"currentColor":this.fill??"currentColor",stroke:d?d.value===u.value?"color":"currentColor":this.stroke??"none"}}}render(r,a,o,f,b){const{x:k,y:A}=a,{x:n,y:c,r:e,rotate:m,symbol:i}=o,{r:h,rotate:v,symbol:y}=this,[u,p]=X(this,f),d=y===S,x=e?void 0:h*h*Math.PI;return Y(h)&&(r=[]),F("svg:g",b).call(R,this,f,b).call(T,this,{x:n&&k,y:c&&A}).call($=>$.selectAll().data(r).enter().append(d?"circle":"path").call(j,this).call(d?w=>{w.attr("cx",n?t=>n[t]:u).attr("cy",c?t=>c[t]:p).attr("r",e?t=>e[t]:h)}:w=>{w.attr("transform",z`translate(${n?t=>n[t]:u},${c?t=>c[t]:p})${m?t=>` rotate(${m[t]})`:v?` rotate(${v})`:""}`).attr("d",e&&i?t=>{const l=C();return i[t].draw(l,e[t]*e[t]*Math.PI),l}:e?t=>{const l=C();return y.draw(l,e[t]*e[t]*Math.PI),l}:i?t=>{const l=C();return i[t].draw(l,x),l}:(()=>{const t=C();return y.draw(t,x),t})())}).call(L,this,o)).node()}}function J(s,{x:r,y:a,...o}={}){return o.frameAnchor===void 0&&([r,a]=N(r,a)),new E(s,{...o,x:r,y:a})}export{J as d};
