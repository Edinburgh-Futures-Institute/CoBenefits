import"./transform.Cz5Y6iUM.js";import{x as pt,l as Ii,am as Yi,an as xt,ao as zi,ap as J,aq as k,ar as yt,a2 as Pi,as as dt,at as Ai,au as Ri,av as Li,aw as Gi,ax as Oi,ay as Fi,az as ji,aA as Di,aB as Zi,aC as qi,X as j,aD as Ki,aE as Vi,a3 as Y,aF as Wi,aG as bt,aH as Ji,aI as Mt,aJ as Hi,aK as Qi,aL as A,aM as Ui,C as R,h as Bt,F as $i,J as tn,aN as nn,aO as en,aP as sn,aQ as on,aR as hn,aS as Xt,aT as It,M as Yt,Y as rn,c as zt,a as Pt,b as U,Z as _n,d as Q,_ as an,W as $,aU as At,aV as cn,aW as ln,aX as un,aY as fn,aZ as L,a_ as pn,a$ as xn,b0 as yn,e as mt,b1 as vt}from"./index.MfBzCR6x.js";function tt(t,i){let n=0;if(i===void 0)for(let e of t)e!=null&&(e=+e)>=e&&++n;else{let e=-1;for(let s of t)(s=i(s,++e,t))!=null&&(s=+s)>=s&&++n}return n}function dn(t){return Math.max(1,Math.ceil(Math.log(tt(t))/Math.LN2)+1)}function bn(t,i,n){const e=tt(t),s=pt(t,.75)-pt(t,.25);return e&&s?Math.ceil((n-i)/(2*s*Math.pow(e,-1/3))):1}function Rt(t,i,n){const e=tt(t),s=Ii(t);return e&&s?Math.ceil((n-i)*Math.cbrt(e)/(3.49*s)):1}function y(t){return function(){return t}}function Lt(t){let i=3;return t.digits=function(n){if(!arguments.length)return i;if(n==null)i=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);i=e}return t},()=>new Yi(i)}function Gt(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ot(t){this._context=t}Ot.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i);break}}};function z(t){return new Ot(t)}function Ft(t){return t[0]}function jt(t){return t[1]}function mn(t,i){var n=y(!0),e=null,s=z,o=null,h=Lt(r);t=typeof t=="function"?t:t===void 0?Ft:y(t),i=typeof i=="function"?i:i===void 0?jt:y(i);function r(_){var c,u=(_=Gt(_)).length,a,l=!1,f;for(e==null&&(o=s(f=h())),c=0;c<=u;++c)!(c<u&&n(a=_[c],c,_))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+t(a,c,_),+i(a,c,_));if(f)return o=null,f+""||null}return r.x=function(_){return arguments.length?(t=typeof _=="function"?_:y(+_),r):t},r.y=function(_){return arguments.length?(i=typeof _=="function"?_:y(+_),r):i},r.defined=function(_){return arguments.length?(n=typeof _=="function"?_:y(!!_),r):n},r.curve=function(_){return arguments.length?(s=_,e!=null&&(o=s(e)),r):s},r.context=function(_){return arguments.length?(_==null?e=o=null:o=s(e=_),r):e},r}function vn(t,i,n){var e=null,s=y(!0),o=null,h=z,r=null,_=Lt(c);t=typeof t=="function"?t:t===void 0?Ft:y(+t),i=typeof i=="function"?i:y(i===void 0?0:+i),n=typeof n=="function"?n:n===void 0?jt:y(+n);function c(a){var l,f,p,d=(a=Gt(a)).length,b,x=!1,T,S=new Array(d),N=new Array(d);for(o==null&&(r=h(T=_())),l=0;l<=d;++l){if(!(l<d&&s(b=a[l],l,a))===x)if(x=!x)f=l,r.areaStart(),r.lineStart();else{for(r.lineEnd(),r.lineStart(),p=l-1;p>=f;--p)r.point(S[p],N[p]);r.lineEnd(),r.areaEnd()}x&&(S[l]=+t(b,l,a),N[l]=+i(b,l,a),r.point(e?+e(b,l,a):S[l],n?+n(b,l,a):N[l]))}if(T)return r=null,T+""||null}function u(){return mn().defined(s).curve(h).context(o)}return c.x=function(a){return arguments.length?(t=typeof a=="function"?a:y(+a),e=null,c):t},c.x0=function(a){return arguments.length?(t=typeof a=="function"?a:y(+a),c):t},c.x1=function(a){return arguments.length?(e=a==null?null:typeof a=="function"?a:y(+a),c):e},c.y=function(a){return arguments.length?(i=typeof a=="function"?a:y(+a),n=null,c):i},c.y0=function(a){return arguments.length?(i=typeof a=="function"?a:y(+a),c):i},c.y1=function(a){return arguments.length?(n=a==null?null:typeof a=="function"?a:y(+a),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(i)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(e).y(i)},c.defined=function(a){return arguments.length?(s=typeof a=="function"?a:y(!!a),c):s},c.curve=function(a){return arguments.length?(h=a,o!=null&&(r=h(o)),c):h},c.context=function(a){return arguments.length?(a==null?o=r=null:r=h(o=a),c):o},c}class Dt{constructor(i,n){this._context=i,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(i,n){switch(i=+i,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(i,n):this._context.moveTo(i,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+i)/2,this._y0,this._x0,n,i,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,i,this._y0,i,n);break}}this._x0=i,this._y0=n}}function wn(t){return new Dt(t,!0)}function kn(t){return new Dt(t,!1)}function g(){}function G(t,i,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+i)/6,(t._y0+4*t._y1+n)/6)}function D(t){this._context=t}D.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:G(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:G(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function gn(t){return new D(t)}function Zt(t){this._context=t}Zt.prototype={areaStart:g,areaEnd:g,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x2=t,this._y2=i;break;case 1:this._point=2,this._x3=t,this._y3=i;break;case 2:this._point=3,this._x4=t,this._y4=i,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+i)/6);break;default:G(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function Tn(t){return new Zt(t)}function qt(t){this._context=t}qt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,e=(this._y0+4*this._y1+i)/6;this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 3:this._point=4;default:G(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function Sn(t){return new qt(t)}function Kt(t,i){this._basis=new D(t),this._beta=i}Kt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,i=this._y,n=t.length-1;if(n>0)for(var e=t[0],s=i[0],o=t[n]-e,h=i[n]-s,r=-1,_;++r<=n;)_=r/n,this._basis.point(this._beta*t[r]+(1-this._beta)*(e+_*o),this._beta*i[r]+(1-this._beta)*(s+_*h));this._x=this._y=null,this._basis.lineEnd()},point:function(t,i){this._x.push(+t),this._y.push(+i)}};const Nn=function t(i){function n(e){return i===1?new D(e):new Kt(e,i)}return n.beta=function(e){return t(+e)},n}(.85);function O(t,i,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-i),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function it(t,i){this._context=t,this._k=(1-i)/6}it.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:O(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2,this._x1=t,this._y1=i;break;case 2:this._point=3;default:O(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Cn=function t(i){function n(e){return new it(e,i)}return n.tension=function(e){return t(+e)},n}(0);function nt(t,i){this._context=t,this._k=(1-i)/6}nt.prototype={areaStart:g,areaEnd:g,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:O(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const En=function t(i){function n(e){return new nt(e,i)}return n.tension=function(e){return t(+e)},n}(0);function et(t,i){this._context=t,this._k=(1-i)/6}et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:O(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Mn=function t(i){function n(e){return new et(e,i)}return n.tension=function(e){return t(+e)},n}(0);function st(t,i,n){var e=t._x1,s=t._y1,o=t._x2,h=t._y2;if(t._l01_a>xt){var r=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,_=3*t._l01_a*(t._l01_a+t._l12_a);e=(e*r-t._x0*t._l12_2a+t._x2*t._l01_2a)/_,s=(s*r-t._y0*t._l12_2a+t._y2*t._l01_2a)/_}if(t._l23_a>xt){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-i*t._l12_2a)/u,h=(h*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(e,s,o,h,t._x2,t._y2)}function Vt(t,i){this._context=t,this._alpha=i}Vt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,e=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3;default:st(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Bn=function t(i){function n(e){return i?new Vt(e,i):new it(e,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Wt(t,i){this._context=t,this._alpha=i}Wt.prototype={areaStart:g,areaEnd:g,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,e=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:st(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const Xn=function t(i){function n(e){return i?new Wt(e,i):new nt(e,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Jt(t,i){this._context=t,this._alpha=i}Jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,e=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:st(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const In=function t(i){function n(e){return i?new Jt(e,i):new et(e,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ht(t){this._context=t}Ht.prototype={areaStart:g,areaEnd:g,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,i){t=+t,i=+i,this._point?this._context.lineTo(t,i):(this._point=1,this._context.moveTo(t,i))}};function Yn(t){return new Ht(t)}function wt(t){return t<0?-1:1}function kt(t,i,n){var e=t._x1-t._x0,s=i-t._x1,o=(t._y1-t._y0)/(e||s<0&&-0),h=(n-t._y1)/(s||e<0&&-0),r=(o*s+h*e)/(e+s);return(wt(o)+wt(h))*Math.min(Math.abs(o),Math.abs(h),.5*Math.abs(r))||0}function gt(t,i){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-i)/2:i}function H(t,i,n){var e=t._x0,s=t._y0,o=t._x1,h=t._y1,r=(o-e)/3;t._context.bezierCurveTo(e+r,s+r*i,o-r,h-r*n,o,h)}function F(t){this._context=t}F.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:H(this,this._t0,gt(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){var n=NaN;if(t=+t,i=+i,!(t===this._x1&&i===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,H(this,gt(this,n=kt(this,t,i)),n);break;default:H(this,this._t0,n=kt(this,t,i));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i,this._t0=n}}};function Qt(t){this._context=new Ut(t)}(Qt.prototype=Object.create(F.prototype)).point=function(t,i){F.prototype.point.call(this,i,t)};function Ut(t){this._context=t}Ut.prototype={moveTo:function(t,i){this._context.moveTo(i,t)},closePath:function(){this._context.closePath()},lineTo:function(t,i){this._context.lineTo(i,t)},bezierCurveTo:function(t,i,n,e,s,o){this._context.bezierCurveTo(i,t,e,n,o,s)}};function zn(t){return new F(t)}function Pn(t){return new Qt(t)}function $t(t){this._context=t}$t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,i=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],i[0]):this._context.moveTo(t[0],i[0]),n===2)this._context.lineTo(t[1],i[1]);else for(var e=Tt(t),s=Tt(i),o=0,h=1;h<n;++o,++h)this._context.bezierCurveTo(e[0][o],s[0][o],e[1][o],s[1][o],t[h],i[h]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,i){this._x.push(+t),this._y.push(+i)}};function Tt(t){var i,n=t.length-1,e,s=new Array(n),o=new Array(n),h=new Array(n);for(s[0]=0,o[0]=2,h[0]=t[0]+2*t[1],i=1;i<n-1;++i)s[i]=1,o[i]=4,h[i]=4*t[i]+2*t[i+1];for(s[n-1]=2,o[n-1]=7,h[n-1]=8*t[n-1]+t[n],i=1;i<n;++i)e=s[i]/o[i-1],o[i]-=e,h[i]-=e*h[i-1];for(s[n-1]=h[n-1]/o[n-1],i=n-2;i>=0;--i)s[i]=(h[i]-s[i+1])/o[i];for(o[n-1]=(t[n]+s[n-1])/2,i=0;i<n-1;++i)o[i]=2*t[i+1]-s[i+1];return[s,o]}function An(t){return new $t(t)}function Z(t,i){this._context=t,this._t=i}Z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,i),this._context.lineTo(t,i);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,i)}break}}this._x=t,this._y=i}};function Rn(t){return new Z(t,.5)}function Ln(t){return new Z(t,0)}function Gn(t){return new Z(t,1)}const On=new Map([["basis",gn],["basis-closed",Tn],["basis-open",Sn],["bundle",Nn],["bump-x",wn],["bump-y",kn],["cardinal",Cn],["cardinal-closed",En],["cardinal-open",Mn],["catmull-rom",Bn],["catmull-rom-closed",Xn],["catmull-rom-open",In],["linear",z],["linear-closed",Yn],["monotone-x",zn],["monotone-y",Pn],["natural",An],["step",Rn],["step-after",Gn],["step-before",Ln]]);function ti(t=z,i){if(typeof t=="function")return t;const n=On.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(i!==void 0){if("beta"in n)return n.beta(i);if("tension"in n)return n.tension(i);if("alpha"in n)return n.alpha(i)}return n}function de(t=St,i){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?St:ti(t,i)}function St(t){return z(t)}function Fn(t={y:"count"},i={}){[t,i]=qn(t,i);const{x:n,y:e}=i;return Zn(Kn(n,i,j),null,null,e,t,zi(i))}function jn(t,i,n={}){if(n?.interval==null)return n;const{reduce:e=hn}=n,s={filter:null};return n[i]!=null&&(s[i]=e),n[`${i}1`]!=null&&(s[`${i}1`]=e),n[`${i}2`]!=null&&(s[`${i}2`]=e),t(s,n)}function Dn(t={}){return jn(Fn,"y",Ki(t,"x"))}function Zn(t,i,n,e,{data:s=Ai,filter:o=Ri,sort:h,reverse:r,..._}={},c={}){t=Nt(t),i=Nt(i),_=Wn(_,c),s=ei(s,j),h=h==null?void 0:ii("sort",h,c),o=o==null?void 0:ni("filter",o,c),e!=null&&J(_,"y","y1","y2")&&(e=null);const[u,a]=k(t),[l,f]=k(t),[p,d]=k(i),[b,x]=k(i),[T,S]=e!=null?[e,"y"]:[],[N,hi]=k(T),{x:ri,y:_i,z:q,fill:ht,stroke:rt,x1:ai,x2:ci,y1:li,y2:ui,domain:le,cumulative:ue,thresholds:fe,interval:pe,...fi}=c,[pi,xi]=k(q),[_t]=yt(ht),[at]=yt(rt),[yi,di]=k(_t),[bi,mi]=k(at);return{..."z"in c&&{z:pi||q},..."fill"in c&&{fill:yi||ht},..."stroke"in c&&{stroke:bi||rt},...Pi(fi,(m,K,vi)=>{const V=Vi(Y(m,T),vi?.[S]),M=Y(m,q),B=Y(m,_t),X=Y(m,at),I=Wi(_,{z:M,fill:B,stroke:X}),W=[],ct=[],wi=V&&hi([]),ki=M&&xi([]),gi=B&&di([]),Ti=X&&mi([]),lt=t&&a([]),Si=t&&f([]),ut=i&&d([]),Ni=i&&x([]),Ci=Qn(t,i,m);let Ei=0;for(const C of _)C.initialize(m);h&&h.initialize(m),o&&o.initialize(m);for(const C of K){const ft=[];for(const E of _)E.scope("facet",C);h&&h.scope("facet",C),o&&o.scope("facet",C);for(const[E,Mi]of bt(C,I))for(const[Bi,P]of bt(Mi,V))for(const[v,w]of Ci(P))if(I&&(w.z=E),!(o&&!o.reduce(v,w))){ft.push(Ei++),ct.push(s.reduceIndex(v,m,w)),V&&wi.push(Bi),M&&ki.push(I===M?E:M[(v.length>0?v:P)[0]]),B&&gi.push(I===B?E:B[(v.length>0?v:P)[0]]),X&&Ti.push(I===X?E:X[(v.length>0?v:P)[0]]),lt&&(lt.push(w.x1),Si.push(w.x2)),ut&&(ut.push(w.y1),Ni.push(w.y2));for(const Xi of _)Xi.reduce(v,w);h&&h.reduce(v,w)}W.push(ft)}return Ji(W,h,r),{data:ct,facets:W}}),...!J(_,"x")&&(u?{x1:u,x2:l,x:dt(u,l)}:{x:ri,x1:ai,x2:ci}),...!J(_,"y")&&(p?{y1:p,y2:b,y:dt(p,b)}:{y:_i,y1:li,y2:ui}),...N&&{[S]:N},...Object.fromEntries(_.map(({name:m,output:K})=>[m,K]))}}function qn({cumulative:t,domain:i,thresholds:n,interval:e,...s},o){return[s,{cumulative:t,domain:i,thresholds:n,interval:e,...o}]}function Kn(t,{cumulative:i,domain:n,thresholds:e,interval:s},o){return t={...Li(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=i),t.thresholds===void 0&&(t.thresholds=e),t.interval===void 0&&(t.interval=s),t.value===void 0&&(t.value=o),t.thresholds=Vn(t.thresholds,t.interval),t}function Nt(t){if(t==null)return;const{value:i,cumulative:n,domain:e=R,thresholds:s}=t,o=h=>{let r=Y(h,i),_;if(Mt(r)||Hn(s)){r=Hi(r,Qi,Float64Array);let[u,a]=typeof e=="function"?e(r):e,l=typeof s=="function"&&!A(s)?s(r,u,a):s;typeof l=="number"&&(l=Ui(u,a,l)),A(l)&&(e===R&&(u=l.floor(u),a=l.offset(l.floor(a))),l=l.range(u,l.offset(a))),_=l}else{r=Bt(r);let[u,a]=typeof e=="function"?e(r):e,l=typeof s=="function"&&!A(s)?s(r,u,a):s;if(typeof l=="number")if(e===R){let f=$i(u,a,l);if(isFinite(f))if(f>0){let p=Math.round(u/f),d=Math.round(a/f);p*f<=u||--p,d*f>a||++d;let b=d-p+1;l=new Float64Array(b);for(let x=0;x<b;++x)l[x]=(p+x)*f}else if(f<0){f=-f;let p=Math.round(u*f),d=Math.round(a*f);p/f<=u||--p,d/f>a||++d;let b=d-p+1;l=new Float64Array(b);for(let x=0;x<b;++x)l[x]=(p+x)/f}else l=[u];else l=[u]}else l=tn(u,a,l);else A(l)&&(e===R&&(u=l.floor(u),a=l.offset(l.floor(a))),l=l.range(u,l.offset(a)));_=l}const c=[];if(_.length===1)c.push([_[0],_[0]]);else for(let u=1;u<_.length;++u)c.push([_[u-1],_[u]]);return c.bin=(n<0?$n:n>0?Un:ot)(c,_,r),c};return o.label=Gi(i),o}function Vn(t,i,n=Ct){if(t===void 0)return i===void 0?n:Oi(i);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return bn;case"scott":return Rt;case"sturges":return dn;case"auto":return Ct}return Fi(t)}return t}function Wn(t,i){return ji(t,i,ii)}function ii(t,i,n){return Di(t,i,n,ni)}function ni(t,i,n){return Zi(t,i,n,ei)}function ei(t,i){return qi(t,i,Jn)}function Jn(t){switch(`${t}`.toLowerCase()){case"x":return te;case"x1":return ne;case"x2":return ee;case"y":return ie;case"y1":return se;case"y2":return oe;case"z":return nn}throw new Error(`invalid bin reduce: ${t}`)}function Ct(t,i,n){return Math.min(200,Rt(t,i,n))}function Hn(t){return en(t)||sn(t)&&Mt(t)}function Qn(t,i,n){const e=t?.(n),s=i?.(n);return e&&s?function*(o){const h=e.bin(o);for(const[r,[_,c]]of e.entries()){const u=s.bin(h[r]);for(const[a,[l,f]]of s.entries())yield[u[a],{data:n,x1:_,y1:l,x2:c,y2:f}]}}:e?function*(o){const h=e.bin(o);for(const[r,[_,c]]of e.entries())yield[h[r],{data:n,x1:_,x2:c}]}:function*(o){const h=s.bin(o);for(const[r,[_,c]]of s.entries())yield[h[r],{data:n,y1:_,y2:c}]}}function ot(t,i,n){return i=Bt(i),e=>{const s=t.map(()=>[]);for(const o of e)s[on(i,n[o])-1]?.push(o);return s}}function Un(t,i,n){const e=ot(t,i,n);return s=>{const o=e(s);for(let h=1,r=o.length;h<r;++h){const _=o[h-1],c=o[h];for(const u of _)c.push(u)}return o}}function $n(t,i,n){const e=ot(t,i,n);return s=>{const o=e(s);for(let h=o.length-2;h>=0;--h){const r=o[h+1],_=o[h];for(const c of r)_.push(c)}return o}}function si(t,i){const n=(+t+ +i)/2;return t instanceof Date?new Date(n):n}const te={reduceIndex(t,i,{x1:n,x2:e}){return si(n,e)}},ie={reduceIndex(t,i,{y1:n,y2:e}){return si(n,e)}},ne={reduceIndex(t,i,{x1:n}){return n}},ee={reduceIndex(t,i,{x2:n}){return n}},se={reduceIndex(t,i,{y1:n}){return n}},oe={reduceIndex(t,i,{y2:n}){return n}},he={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class re extends Yt{constructor(i,n={}){const{x1:e,y1:s,x2:o,y2:h,z:r,curve:_,tension:c}=n;super(i,{x1:{value:e,scale:"x"},y1:{value:s,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:h,scale:"y",optional:!0},z:{value:rn(n),optional:!0}},n,he),this.z=r,this.curve=ti(_,c)}filter(i){return i}render(i,n,e,s,o){const{x1:h,y1:r,x2:_=h,y2:c=r}=e;return zt("svg:g",o).call(Pt,this,s,o).call(U,this,n,0,0).call(u=>u.selectAll().data(_n(i,[h,r,_,c],this,e)).enter().append("path").call(Q,this).call(an,this,e).attr("d",vn().curve(this.curve).defined(a=>a>=0).x0(a=>h[a]).y0(a=>r[a]).x1(a=>_[a]).y1(a=>c[a]))).node()}}function be(t,i){const{x:n=$,...e}=Dn(i);return new re(t,Xt(It({...e,x1:n,x2:void 0})))}const _e={ariaLabel:"bar"};class oi extends Yt{constructor(i,n,e={},s=_e){super(i,n,e,s),pn(this,e),xn(this,e)}render(i,n,e,s,o){const{rx:h,ry:r,rx1y1:_,rx1y2:c,rx2y1:u,rx2y2:a}=this,l=this._x(n,e,s),f=this._y(n,e,s),p=this._width(n,e,s),d=this._height(n,e,s);return zt("svg:g",o).call(Pt,this,s,o).call(this._transform,this,n).call(b=>b.selectAll().data(i).enter().call(_||c||u||a?x=>x.append("path").call(Q,this).call(yn,l,f,Et(l,p),Et(f,d),this).call(mt,this,e):x=>x.append("rect").call(Q,this).attr("x",l).attr("width",p).attr("y",f).attr("height",d).call(vt,"rx",h).call(vt,"ry",r).call(mt,this,e))).node()}_x(i,{x:n},{marginLeft:e}){const{insetLeft:s}=this;return n?o=>n[o]+s:e+s}_y(i,{y:n},{marginTop:e}){const{insetTop:s}=this;return n?o=>n[o]+s:e+s}_width({x:i},{x:n},{marginRight:e,marginLeft:s,width:o}){const{insetLeft:h,insetRight:r}=this,_=n&&i?i.bandwidth():o-e-s;return Math.max(0,_-h-r)}_height({y:i},{y:n},{marginTop:e,marginBottom:s,height:o}){const{insetTop:h,insetBottom:r}=this,_=n&&i?i.bandwidth():o-e-s;return Math.max(0,_-h-r)}}function Et(t,i){return typeof t=="function"&&typeof i=="function"?n=>t(n)+i(n):typeof t=="function"?n=>t(n)+i:typeof i=="function"?n=>t+i(n):t+i}class ae extends oi{constructor(i,n={},e){const{x1:s,x2:o,y:h}=n;super(i,{x1:{value:s,scale:"x"},x2:{value:o,scale:"x"},y:{value:h,scale:"y",type:"band",optional:!0}},n,e)}_transform(i,n,{x:e}){i.call(U,n,{x:e},0,0)}_x({x:i},{x1:n,x2:e},{marginLeft:s}){const{insetLeft:o}=this;return L(i)?s+o:h=>Math.min(n[h],e[h])+o}_width({x:i},{x1:n,x2:e},{marginRight:s,marginLeft:o,width:h}){const{insetLeft:r,insetRight:_}=this;return L(i)?h-s-o-r-_:c=>Math.max(0,Math.abs(e[c]-n[c])-r-_)}}class ce extends oi{constructor(i,n={},e){const{x:s,y1:o,y2:h}=n;super(i,{y1:{value:o,scale:"y"},y2:{value:h,scale:"y"},x:{value:s,scale:"x",type:"band",optional:!0}},n,e)}_transform(i,n,{y:e}){i.call(U,n,{y:e},0,0)}_y({y:i},{y1:n,y2:e},{marginTop:s}){const{insetTop:o}=this;return L(i)?s+o:h=>Math.min(n[h],e[h])+o}_height({y:i},{y1:n,y2:e},{marginTop:s,marginBottom:o,height:h}){const{insetTop:r,insetBottom:_}=this;return L(i)?h-s-o-r-_:c=>Math.max(0,Math.abs(e[c]-n[c])-r-_)}}function me(t,i={}){return At(i)||(i={...i,y:$,x2:j}),new ae(t,cn(ln(un(i))))}function ve(t,i={}){return At(i)||(i={...i,x:$,y2:j}),new ce(t,Xt(fn(It(i))))}export{oi as A,be as a,me as b,St as c,Fn as d,ve as e,Dn as f,tt as g,vn as h,de as m,mn as s,dn as t};
