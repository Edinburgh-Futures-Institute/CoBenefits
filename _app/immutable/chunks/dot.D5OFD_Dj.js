import"./transform.BNP73y-7.js";import{M as D,u as I,v as g,w as P,l as z,n as F,d as R,o as T,x as q,y as C,q as B,z as E,A as L,B as S,C as M,D as N,E as W}from"./index.DsTuvus7.js";const X={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function Y(o){return o.sort===void 0&&o.reverse===void 0?L({channel:"-r"},o):o}class j extends D{constructor(e,a={}){const{x:s,y:f,r:b,rotate:A,symbol:k=S,frameAnchor:n}=a,[c,r]=M(A,0),[m,i]=I(k),[h,v]=M(b,m==null?3:4.5);super(e,{x:{value:s,scale:"x",optional:!0},y:{value:f,scale:"y",optional:!0},r:{value:h,scale:"r",filter:g,optional:!0},rotate:{value:c,optional:!0},symbol:{value:m,scale:"auto",optional:!0}},Y(a),X),this.r=v,this.rotate=r,this.symbol=i,this.frameAnchor=P(n);const{channels:y}=this,{symbol:u}=y;if(u){const{fill:p,stroke:d}=y;u.hint={fill:p?p.value===u.value?"color":"currentColor":this.fill??"currentColor",stroke:d?d.value===u.value?"color":"currentColor":this.stroke??"none"}}}render(e,a,s,f,b){const{x:A,y:k}=a,{x:n,y:c,r,rotate:m,symbol:i}=s,{r:h,rotate:v,symbol:y}=this,[u,p]=N(this,f),d=y===S,x=r?void 0:h*h*Math.PI;return W(h)&&(e=[]),z("svg:g",b).call(F,this,f,b).call(R,this,{x:n&&A,y:c&&k}).call($=>$.selectAll().data(e).enter().append(d?"circle":"path").call(T,this).call(d?w=>{w.attr("cx",n?t=>n[t]:u).attr("cy",c?t=>c[t]:p).attr("r",r?t=>r[t]:h)}:w=>{w.attr("transform",q`translate(${n?t=>n[t]:u},${c?t=>c[t]:p})${m?t=>` rotate(${m[t]})`:v?` rotate(${v})`:""}`).attr("d",r&&i?t=>{const l=C();return i[t].draw(l,r[t]*r[t]*Math.PI),l}:r?t=>{const l=C();return y.draw(l,r[t]*r[t]*Math.PI),l}:i?t=>{const l=C();return i[t].draw(l,x),l}:(()=>{const t=C();return y.draw(t,x),t})())}).call(B,this,s)).node()}}function J(o,{x:e,y:a,...s}={}){return s.frameAnchor===void 0&&([e,a]=E(e,a)),new j(o,{...s,x:e,y:a})}export{J as d};
