import"./F40_IDQw.js";import{a6 as at,K as mi,at as vi,au as ct,av as ki,aw as wi,ax as Ti,ay as V,az as w,aA as lt,aB as ut,W as gi,aC as Ni,aD as Si,aE as Ei,ah as A,aF as Ci,aG as Bi,aH as Mi,aI as Ii,aJ as Xi,aK as zi,aL as Pi,Z as z,aM as wt,aN as Yi,aO as Ai,aP as G,aQ as Gi,G as Tt,ai as Ri,aj as Oi,aR as Fi,aS as Li,aT as ji,o as gt,aU as Di,aV as Zi,aW as ft,aX as Ki,aY as qi,q as pt,w as Vi,y as Wi,M as Hi,T as Ji,d as Qi,e as Ui,f as $i,ak as tn,g as nn,al as en}from"./s0pE0-UL.js";function H(t,i){let n=0;if(i===void 0)for(let e of t)e!=null&&(e=+e)>=e&&++n;else{let e=-1;for(let s of t)(s=i(s,++e,t))!=null&&(s=+s)>=s&&++n}return n}function sn(t){return Math.max(1,Math.ceil(Math.log(H(t))/Math.LN2)+1)}function on(t,i,n){const e=H(t),s=at(t,.75)-at(t,.25);return e&&s?Math.ceil((n-i)/(2*s*Math.pow(e,-1/3))):1}function Nt(t,i,n){const e=H(t),s=mi(t);return e&&s?Math.ceil((n-i)*Math.cbrt(e)/(3.49*s)):1}function x(t){return function(){return t}}function St(t){let i=3;return t.digits=function(n){if(!arguments.length)return i;if(n==null)i=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);i=e}return t},()=>new vi(i)}function Et(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ct(t){this._context=t}Ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i);break}}};function P(t){return new Ct(t)}function Bt(t){return t[0]}function Mt(t){return t[1]}function _n(t,i){var n=x(!0),e=null,s=P,o=null,r=St(h);t=typeof t=="function"?t:t===void 0?Bt:x(t),i=typeof i=="function"?i:i===void 0?Mt:x(i);function h(a){var c,u=(a=Et(a)).length,_,l=!1,f;for(e==null&&(o=s(f=r())),c=0;c<=u;++c)!(c<u&&n(_=a[c],c,a))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+t(_,c,a),+i(_,c,a));if(f)return o=null,f+""||null}return h.x=function(a){return arguments.length?(t=typeof a=="function"?a:x(+a),h):t},h.y=function(a){return arguments.length?(i=typeof a=="function"?a:x(+a),h):i},h.defined=function(a){return arguments.length?(n=typeof a=="function"?a:x(!!a),h):n},h.curve=function(a){return arguments.length?(s=a,e!=null&&(o=s(e)),h):s},h.context=function(a){return arguments.length?(a==null?e=o=null:o=s(e=a),h):e},h}function hn(t,i,n){var e=null,s=x(!0),o=null,r=P,h=null,a=St(c);t=typeof t=="function"?t:t===void 0?Bt:x(+t),i=typeof i=="function"?i:x(i===void 0?0:+i),n=typeof n=="function"?n:n===void 0?Mt:x(+n);function c(_){var l,f,p,d=(_=Et(_)).length,b,y=!1,g,N=new Array(d),S=new Array(d);for(o==null&&(h=r(g=a())),l=0;l<=d;++l){if(!(l<d&&s(b=_[l],l,_))===y)if(y=!y)f=l,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),p=l-1;p>=f;--p)h.point(N[p],S[p]);h.lineEnd(),h.areaEnd()}y&&(N[l]=+t(b,l,_),S[l]=+i(b,l,_),h.point(e?+e(b,l,_):N[l],n?+n(b,l,_):S[l]))}if(g)return h=null,g+""||null}function u(){return _n().defined(s).curve(r).context(o)}return c.x=function(_){return arguments.length?(t=typeof _=="function"?_:x(+_),e=null,c):t},c.x0=function(_){return arguments.length?(t=typeof _=="function"?_:x(+_),c):t},c.x1=function(_){return arguments.length?(e=_==null?null:typeof _=="function"?_:x(+_),c):e},c.y=function(_){return arguments.length?(i=typeof _=="function"?_:x(+_),n=null,c):i},c.y0=function(_){return arguments.length?(i=typeof _=="function"?_:x(+_),c):i},c.y1=function(_){return arguments.length?(n=_==null?null:typeof _=="function"?_:x(+_),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(i)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(e).y(i)},c.defined=function(_){return arguments.length?(s=typeof _=="function"?_:x(!!_),c):s},c.curve=function(_){return arguments.length?(r=_,o!=null&&(h=r(o)),c):r},c.context=function(_){return arguments.length?(_==null?o=h=null:h=r(o=_),c):o},c}class It{constructor(i,n){this._context=i,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(i,n){switch(i=+i,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(i,n):this._context.moveTo(i,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+i)/2,this._y0,this._x0,n,i,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,i,this._y0,i,n);break}}this._x0=i,this._y0=n}}function rn(t){return new It(t,!0)}function an(t){return new It(t,!1)}function T(){}function R(t,i,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+i)/6,(t._y0+4*t._y1+n)/6)}function L(t){this._context=t}L.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:R(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:R(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function cn(t){return new L(t)}function Xt(t){this._context=t}Xt.prototype={areaStart:T,areaEnd:T,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x2=t,this._y2=i;break;case 1:this._point=2,this._x3=t,this._y3=i;break;case 2:this._point=3,this._x4=t,this._y4=i,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+i)/6);break;default:R(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function ln(t){return new Xt(t)}function zt(t){this._context=t}zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,e=(this._y0+4*this._y1+i)/6;this._line?this._context.lineTo(n,e):this._context.moveTo(n,e);break;case 3:this._point=4;default:R(this,t,i);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}};function un(t){return new zt(t)}function Pt(t,i){this._basis=new L(t),this._beta=i}Pt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,i=this._y,n=t.length-1;if(n>0)for(var e=t[0],s=i[0],o=t[n]-e,r=i[n]-s,h=-1,a;++h<=n;)a=h/n,this._basis.point(this._beta*t[h]+(1-this._beta)*(e+a*o),this._beta*i[h]+(1-this._beta)*(s+a*r));this._x=this._y=null,this._basis.lineEnd()},point:function(t,i){this._x.push(+t),this._y.push(+i)}};const fn=function t(i){function n(e){return i===1?new L(e):new Pt(e,i)}return n.beta=function(e){return t(+e)},n}(.85);function O(t,i,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-i),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function J(t,i){this._context=t,this._k=(1-i)/6}J.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:O(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2,this._x1=t,this._y1=i;break;case 2:this._point=3;default:O(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const pn=function t(i){function n(e){return new J(e,i)}return n.tension=function(e){return t(+e)},n}(0);function Q(t,i){this._context=t,this._k=(1-i)/6}Q.prototype={areaStart:T,areaEnd:T,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:O(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const xn=function t(i){function n(e){return new Q(e,i)}return n.tension=function(e){return t(+e)},n}(0);function U(t,i){this._context=t,this._k=(1-i)/6}U.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:O(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const yn=function t(i){function n(e){return new U(e,i)}return n.tension=function(e){return t(+e)},n}(0);function $(t,i,n){var e=t._x1,s=t._y1,o=t._x2,r=t._y2;if(t._l01_a>ct){var h=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,a=3*t._l01_a*(t._l01_a+t._l12_a);e=(e*h-t._x0*t._l12_2a+t._x2*t._l01_2a)/a,s=(s*h-t._y0*t._l12_2a+t._y2*t._l01_2a)/a}if(t._l23_a>ct){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-i*t._l12_2a)/u,r=(r*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(e,s,o,r,t._x2,t._y2)}function Yt(t,i){this._context=t,this._alpha=i}Yt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,e=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3;default:$(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const dn=function t(i){function n(e){return i?new Yt(e,i):new J(e,0)}return n.alpha=function(e){return t(+e)},n}(.5);function At(t,i){this._context=t,this._alpha=i}At.prototype={areaStart:T,areaEnd:T,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,e=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=i;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3,this._x5=t,this._y5=i;break;default:$(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const bn=function t(i){function n(e){return i?new At(e,i):new Q(e,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Gt(t,i){this._context=t,this._alpha=i}Gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){if(t=+t,i=+i,this._point){var n=this._x2-t,e=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+e*e,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const mn=function t(i){function n(e){return i?new Gt(e,i):new U(e,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Rt(t){this._context=t}Rt.prototype={areaStart:T,areaEnd:T,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,i){t=+t,i=+i,this._point?this._context.lineTo(t,i):(this._point=1,this._context.moveTo(t,i))}};function vn(t){return new Rt(t)}function xt(t){return t<0?-1:1}function yt(t,i,n){var e=t._x1-t._x0,s=i-t._x1,o=(t._y1-t._y0)/(e||s<0&&-0),r=(n-t._y1)/(s||e<0&&-0),h=(o*s+r*e)/(e+s);return(xt(o)+xt(r))*Math.min(Math.abs(o),Math.abs(r),.5*Math.abs(h))||0}function dt(t,i){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-i)/2:i}function W(t,i,n){var e=t._x0,s=t._y0,o=t._x1,r=t._y1,h=(o-e)/3;t._context.bezierCurveTo(e+h,s+h*i,o-h,r-h*n,o,r)}function F(t){this._context=t}F.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:W(this,this._t0,dt(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){var n=NaN;if(t=+t,i=+i,!(t===this._x1&&i===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,W(this,dt(this,n=yt(this,t,i)),n);break;default:W(this,this._t0,n=yt(this,t,i));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i,this._t0=n}}};function Ot(t){this._context=new Ft(t)}(Ot.prototype=Object.create(F.prototype)).point=function(t,i){F.prototype.point.call(this,i,t)};function Ft(t){this._context=t}Ft.prototype={moveTo:function(t,i){this._context.moveTo(i,t)},closePath:function(){this._context.closePath()},lineTo:function(t,i){this._context.lineTo(i,t)},bezierCurveTo:function(t,i,n,e,s,o){this._context.bezierCurveTo(i,t,e,n,o,s)}};function kn(t){return new F(t)}function wn(t){return new Ot(t)}function Lt(t){this._context=t}Lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,i=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],i[0]):this._context.moveTo(t[0],i[0]),n===2)this._context.lineTo(t[1],i[1]);else for(var e=bt(t),s=bt(i),o=0,r=1;r<n;++o,++r)this._context.bezierCurveTo(e[0][o],s[0][o],e[1][o],s[1][o],t[r],i[r]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,i){this._x.push(+t),this._y.push(+i)}};function bt(t){var i,n=t.length-1,e,s=new Array(n),o=new Array(n),r=new Array(n);for(s[0]=0,o[0]=2,r[0]=t[0]+2*t[1],i=1;i<n-1;++i)s[i]=1,o[i]=4,r[i]=4*t[i]+2*t[i+1];for(s[n-1]=2,o[n-1]=7,r[n-1]=8*t[n-1]+t[n],i=1;i<n;++i)e=s[i]/o[i-1],o[i]-=e,r[i]-=e*r[i-1];for(s[n-1]=r[n-1]/o[n-1],i=n-2;i>=0;--i)s[i]=(r[i]-s[i+1])/o[i];for(o[n-1]=(t[n]+s[n-1])/2,i=0;i<n-1;++i)o[i]=2*t[i+1]-s[i+1];return[s,o]}function Tn(t){return new Lt(t)}function j(t,i){this._context=t,this._t=i}j.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,i),this._context.lineTo(t,i);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,i)}break}}this._x=t,this._y=i}};function gn(t){return new j(t,.5)}function Nn(t){return new j(t,0)}function Sn(t){return new j(t,1)}const En=new Map([["basis",cn],["basis-closed",ln],["basis-open",un],["bundle",fn],["bump-x",rn],["bump-y",an],["cardinal",pn],["cardinal-closed",xn],["cardinal-open",yn],["catmull-rom",dn],["catmull-rom-closed",bn],["catmull-rom-open",mn],["linear",P],["linear-closed",vn],["monotone-x",kn],["monotone-y",wn],["natural",Tn],["step",gn],["step-after",Sn],["step-before",Nn]]);function jt(t=P,i){if(typeof t=="function")return t;const n=En.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(i!==void 0){if("beta"in n)return n.beta(i);if("tension"in n)return n.tension(i);if("alpha"in n)return n.alpha(i)}return n}function ie(t=mt,i){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?mt:jt(t,i)}function mt(t){return P(t)}function Cn(t={y:"count"},i={}){[t,i]=Xn(t,i);const{x:n,y:e}=i;return In(zn(n,i,gt),null,null,e,t,ki(i))}function Bn(t,i,n={}){if(n?.interval==null)return n;const{reduce:e=Ei}=n,s={filter:null};return n[i]!=null&&(s[i]=e),n[`${i}1`]!=null&&(s[`${i}1`]=e),n[`${i}2`]!=null&&(s[`${i}2`]=e),t(s,n)}function Mn(t={}){return Bn(Cn,"y",wi(t,"x"))}function In(t,i,n,e,{data:s=Ni,filter:o=Ti,sort:r,reverse:h,...a}={},c={}){t=vt(t),i=vt(i),a=Yn(a,c),s=Kt(s,gt),r=r==null?void 0:Dt("sort",r,c),o=o==null?void 0:Zt("filter",o,c),e!=null&&V(a,"y","y1","y2")&&(e=null);const[u,_]=w(t),[l,f]=w(t),[p,d]=w(i),[b,y]=w(i),[g,N]=e!=null?[e,"y"]:[],[S,Vt]=w(g),{x:Wt,y:Ht,z:D,fill:it,stroke:nt,x1:Jt,x2:Qt,y1:Ut,y2:$t,domain:Hn,cumulative:Jn,thresholds:Qn,interval:Un,...ti}=c,[ii,ni]=w(D),[et]=lt(it),[st]=lt(nt),[ei,si]=w(et),[oi,_i]=w(st);return{..."z"in c&&{z:ii||D},..."fill"in c&&{fill:ei||it},..."stroke"in c&&{stroke:oi||nt},...gi(ti,(m,Z,hi)=>{const K=Di(z(m,g),hi?.[N]),B=z(m,D),M=z(m,et),I=z(m,st),X=Zi(a,{z:B,fill:M,stroke:I}),q=[],ot=[],ri=K&&Vt([]),ai=B&&ni([]),ci=M&&si([]),li=I&&_i([]),_t=t&&_([]),ui=t&&f([]),ht=i&&d([]),fi=i&&y([]),pi=Rn(t,i,m);let xi=0;for(const E of a)E.initialize(m);r&&r.initialize(m),o&&o.initialize(m);for(const E of Z){const rt=[];for(const C of a)C.scope("facet",E);r&&r.scope("facet",E),o&&o.scope("facet",E);for(const[C,yi]of ft(E,X))for(const[di,Y]of ft(yi,K))for(const[v,k]of pi(Y))if(X&&(k.z=C),!(o&&!o.reduce(v,k))){rt.push(xi++),ot.push(s.reduceIndex(v,m,k)),K&&ri.push(di),B&&ai.push(X===B?C:B[(v.length>0?v:Y)[0]]),M&&ci.push(X===M?C:M[(v.length>0?v:Y)[0]]),I&&li.push(X===I?C:I[(v.length>0?v:Y)[0]]),_t&&(_t.push(k.x1),ui.push(k.x2)),ht&&(ht.push(k.y1),fi.push(k.y2));for(const bi of a)bi.reduce(v,k);r&&r.reduce(v,k)}q.push(rt)}return Ki(q,r,h),{data:ot,facets:q}}),...!V(a,"x")&&(u?{x1:u,x2:l,x:ut(u,l)}:{x:Wt,x1:Jt,x2:Qt}),...!V(a,"y")&&(p?{y1:p,y2:b,y:ut(p,b)}:{y:Ht,y1:Ut,y2:$t}),...S&&{[N]:S},...Object.fromEntries(a.map(({name:m,output:Z})=>[m,Z]))}}function Xn({cumulative:t,domain:i,thresholds:n,interval:e,...s},o){return[s,{cumulative:t,domain:i,thresholds:n,interval:e,...o}]}function zn(t,{cumulative:i,domain:n,thresholds:e,interval:s},o){return t={...Si(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=i),t.thresholds===void 0&&(t.thresholds=e),t.interval===void 0&&(t.interval=s),t.value===void 0&&(t.value=o),t.thresholds=Pn(t.thresholds,t.interval),t}function vt(t){if(t==null)return;const{value:i,cumulative:n,domain:e=A,thresholds:s}=t,o=r=>{let h=z(r,i),a;if(wt(h)||Gn(s)){h=Yi(h,Ai,Float64Array);let[u,_]=typeof e=="function"?e(h):e,l=typeof s=="function"&&!G(s)?s(h,u,_):s;typeof l=="number"&&(l=Gi(u,_,l)),G(l)&&(e===A&&(u=l.floor(u),_=l.offset(l.floor(_))),l=l.range(u,l.offset(_))),a=l}else{h=Tt(h);let[u,_]=typeof e=="function"?e(h):e,l=typeof s=="function"&&!G(s)?s(h,u,_):s;if(typeof l=="number")if(e===A){let f=Ri(u,_,l);if(isFinite(f))if(f>0){let p=Math.round(u/f),d=Math.round(_/f);p*f<=u||--p,d*f>_||++d;let b=d-p+1;l=new Float64Array(b);for(let y=0;y<b;++y)l[y]=(p+y)*f}else if(f<0){f=-f;let p=Math.round(u*f),d=Math.round(_*f);p/f<=u||--p,d/f>_||++d;let b=d-p+1;l=new Float64Array(b);for(let y=0;y<b;++y)l[y]=(p+y)/f}else l=[u];else l=[u]}else l=Oi(u,_,l);else G(l)&&(e===A&&(u=l.floor(u),_=l.offset(l.floor(_))),l=l.range(u,l.offset(_)));a=l}const c=[];if(a.length===1)c.push([a[0],a[0]]);else for(let u=1;u<a.length;++u)c.push([a[u-1],a[u]]);return c.bin=(n<0?Fn:n>0?On:tt)(c,a,h),c};return o.label=Ci(i),o}function Pn(t,i,n=kt){if(t===void 0)return i===void 0?n:zi(i);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return on;case"scott":return Nt;case"sturges":return sn;case"auto":return kt}return Pi(t)}return t}function Yn(t,i){return Bi(t,i,Dt)}function Dt(t,i,n){return Ii(t,i,n,Zt)}function Zt(t,i,n){return Xi(t,i,n,Kt)}function Kt(t,i){return Mi(t,i,An)}function An(t){switch(`${t}`.toLowerCase()){case"x":return Ln;case"x1":return Dn;case"x2":return Zn;case"y":return jn;case"y1":return Kn;case"y2":return qn;case"z":return qi}throw new Error(`invalid bin reduce: ${t}`)}function kt(t,i,n){return Math.min(200,Nt(t,i,n))}function Gn(t){return Fi(t)||Li(t)&&wt(t)}function Rn(t,i,n){const e=t?.(n),s=i?.(n);return e&&s?function*(o){const r=e.bin(o);for(const[h,[a,c]]of e.entries()){const u=s.bin(r[h]);for(const[_,[l,f]]of s.entries())yield[u[_],{data:n,x1:a,y1:l,x2:c,y2:f}]}}:e?function*(o){const r=e.bin(o);for(const[h,[a,c]]of e.entries())yield[r[h],{data:n,x1:a,x2:c}]}:function*(o){const r=s.bin(o);for(const[h,[a,c]]of s.entries())yield[r[h],{data:n,y1:a,y2:c}]}}function tt(t,i,n){return i=Tt(i),e=>{const s=t.map(()=>[]);for(const o of e)s[ji(i,n[o])-1]?.push(o);return s}}function On(t,i,n){const e=tt(t,i,n);return s=>{const o=e(s);for(let r=1,h=o.length;r<h;++r){const a=o[r-1],c=o[r];for(const u of a)c.push(u)}return o}}function Fn(t,i,n){const e=tt(t,i,n);return s=>{const o=e(s);for(let r=o.length-2;r>=0;--r){const h=o[r+1],a=o[r];for(const c of h)a.push(c)}return o}}function qt(t,i){const n=(+t+ +i)/2;return t instanceof Date?new Date(n):n}const Ln={reduceIndex(t,i,{x1:n,x2:e}){return qt(n,e)}},jn={reduceIndex(t,i,{y1:n,y2:e}){return qt(n,e)}},Dn={reduceIndex(t,i,{x1:n}){return n}},Zn={reduceIndex(t,i,{x2:n}){return n}},Kn={reduceIndex(t,i,{y1:n}){return n}},qn={reduceIndex(t,i,{y2:n}){return n}},Vn={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Wn extends Hi{constructor(i,n={}){const{x1:e,y1:s,x2:o,y2:r,z:h,curve:a,tension:c}=n;super(i,{x1:{value:e,scale:"x"},y1:{value:s,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:r,scale:"y",optional:!0},z:{value:Ji(n),optional:!0}},n,Vn),this.z=h,this.curve=jt(a,c)}filter(i){return i}render(i,n,e,s,o){const{x1:r,y1:h,x2:a=r,y2:c=h}=e;return Qi("svg:g",o).call(Ui,this,s,o).call($i,this,n,0,0).call(u=>u.selectAll().data(tn(i,[r,h,a,c],this,e)).enter().append("path").call(nn,this).call(en,this,e).attr("d",hn().curve(this.curve).defined(_=>_>=0).x0(_=>r[_]).y0(_=>h[_]).x1(_=>a[_]).y1(_=>c[_]))).node()}}function ne(t,i){const{x:n=pt,...e}=Mn(i);return new Wn(t,Vi(Wi({...e,x1:n,x2:void 0},n===pt?"y2":"y")))}export{ne as a,Cn as b,mt as c,H as d,Mn as e,ie as m,_n as s,sn as t};
