function m(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function j(e,n){return fetch(e,n).then(m)}function b(e){return e}function d(e){if(e==null)return b;var n,u,a=e.scale[0],c=e.scale[1],o=e.translate[0],p=e.translate[1];return function(l,g){g||(n=u=0);var s=2,t=l.length,r=new Array(t);for(r[0]=(n+=l[0])*a+o,r[1]=(u+=l[1])*c+p;s<t;)r[s]=l[s],++s;return r}}function v(e,n){for(var u,a=e.length,c=a-n;c<--a;)u=e[c],e[c++]=e[a],e[a]=u}function w(e,n){return typeof n=="string"&&(n=e.objects[n]),n.type==="GeometryCollection"?{type:"FeatureCollection",features:n.geometries.map(function(u){return h(e,u)})}:h(e,n)}function h(e,n){var u=n.id,a=n.bbox,c=n.properties==null?{}:n.properties,o=x(e,n);return u==null&&a==null?{type:"Feature",properties:c,geometry:o}:a==null?{type:"Feature",id:u,properties:c,geometry:o}:{type:"Feature",id:u,bbox:a,properties:c,geometry:o}}function x(e,n){var u=d(e.transform),a=e.arcs;function c(t,r){r.length&&r.pop();for(var i=a[t<0?~t:t],f=0,y=i.length;f<y;++f)r.push(u(i[f],f));t<0&&v(r,y)}function o(t){return u(t)}function p(t){for(var r=[],i=0,f=t.length;i<f;++i)c(t[i],r);return r.length<2&&r.push(r[0]),r}function l(t){for(var r=p(t);r.length<4;)r.push(r[0]);return r}function g(t){return t.map(l)}function s(t){var r=t.type,i;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(s)};case"Point":i=o(t.coordinates);break;case"MultiPoint":i=t.coordinates.map(o);break;case"LineString":i=p(t.arcs);break;case"MultiLineString":i=t.arcs.map(p);break;case"Polygon":i=g(t.arcs);break;case"MultiPolygon":i=t.arcs.map(g);break;default:return null}return{type:r,coordinates:i}}return s(n)}export{w as f,j};
