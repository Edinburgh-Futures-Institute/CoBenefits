import{s as Hl,a as b,e as o,t as A,g as w,c as r,b as h,p as X,d as S,f,q as n,B as ee,i as _e,h as e,j as Ze,w as wl,r as Pl,Y as Fl,n as Tl,H as Nl,E as Bl,y as Ol,A as lt}from"../chunks/scheduler.C9ZL8GxQ.js";import{S as Rl,i as Ul,c as Yl,b as Wl,m as jl,t as ql,a as Gl,d as Xl}from"../chunks/index.vifww4_P.js";import{N as Kl,e as ft}from"../chunks/NavigationBar.CS9cTd7m.js";import"../chunks/transform.BNP73y-7.js";import{Q as Zl,R as Yt,S as Jl,t as El,T as Ql,O as Dl,U as $l,V as ea,W as ta,J as Wt,L as la,X as jt,Y as qt,N as kl,Z as xl}from"../chunks/index.DsTuvus7.js";import{b as aa}from"../chunks/paths.Dm83wpKd.js";import{M as sa}from"../chunks/mapUK.U9TI1ubZ.js";import{f as ia,h as na,i as oa,j as ra,k as ca,e as vt,l as ut,m as Vl}from"../chunks/globals.D4HlNnwg.js";import{g as Gt,i as da,j as fa,k as ua}from"../chunks/duckdb.C0SQSBhA.js";import{p as Xt}from"../chunks/per_capita.COcMrZFY.js";import{n as va}from"../chunks/nice.CBLIHRhv.js";import{t as ha,b as pa}from"../chunks/bin.B6e-y8I2.js";import{d as Kt}from"../chunks/dot.D5OFD_Dj.js";var ma=Array.prototype,ga=ma.slice;function Zt(t){return()=>t}function _a(){var t=Zl,a=Yt,l=ha;function s(d){Array.isArray(d)||(d=Array.from(d));var i,E=d.length,u,y,z=new Array(E);for(i=0;i<E;++i)z[i]=t(d[i],i,d);var p=a(z),D=p[0],m=p[1],k=l(z,D,m);if(!Array.isArray(k)){const g=m,L=+k;if(a===Yt&&([D,m]=va(D,m,L)),k=Jl(D,m,L),k[0]<=D&&(y=El(D,m,L)),k[k.length-1]>=m)if(g>=m&&a===Yt){const V=El(D,m,L);isFinite(V)&&(V>0?m=(Math.floor(m/V)+1)*V:V<0&&(m=(Math.ceil(m*-V)+1)/-V))}else k.pop()}for(var _=k.length,I=0,P=_;k[I]<=D;)++I;for(;k[P-1]>m;)--P;(I||P<_)&&(k=k.slice(I,P),_=P-I);var M=new Array(_+1),H;for(i=0;i<=_;++i)H=M[i]=[],H.x0=i>0?k[i-1]:D,H.x1=i<_?k[i]:m;if(isFinite(y)){if(y>0)for(i=0;i<E;++i)(u=z[i])!=null&&D<=u&&u<=m&&M[Math.min(_,Math.floor((u-D)/y))].push(d[i]);else if(y<0){for(i=0;i<E;++i)if((u=z[i])!=null&&D<=u&&u<=m){const g=Math.floor((D-u)*y);M[Math.min(_,g+(k[g]<=u))].push(d[i])}}}else for(i=0;i<E;++i)(u=z[i])!=null&&D<=u&&u<=m&&M[Ql(k,u,0,_)].push(d[i]);return M}return s.value=function(d){return arguments.length?(t=typeof d=="function"?d:Zt(d),s):t},s.domain=function(d){return arguments.length?(a=typeof d=="function"?d:Zt([d[0],d[1]]),s):a},s.thresholds=function(d){return arguments.length?(l=typeof d=="function"?d:Zt(Array.isArray(d)?ga.call(d):d),s):l},s}function yl(t,a,l){const s=t.slice();return s[42]=a[l],s[43]=a,s[44]=l,s}function Al(t,a,l){const s=t.slice();return s[42]=a[l],s}function Sl(t){let a,l,s,d,i;return{c(){a=o("div"),l=o("div"),s=o("span"),d=A(t[13]),i=A(" >>"),this.h()},l(E){a=r(E,"DIV",{class:!0});var u=h(a);l=r(u,"DIV",{class:!0});var y=h(l);s=r(y,"SPAN",{class:!0});var z=h(s);d=S(z,t[13]),i=S(z," >>"),z.forEach(f),y.forEach(f),u.forEach(f),this.h()},h(){n(s,"class","mini-header-text"),n(l,"class","mini-header-content"),n(a,"class","mini-header")},m(E,u){_e(E,a,u),e(a,l),e(l,s),e(s,d),e(s,i)},p:Tl,d(E){E&&f(a)}}}function Ll(t){let a,l,s=t[9].legend(t[17]).outerHTML+"";return{c(){a=o("div"),l=new Nl(!1),this.h()},l(d){a=r(d,"DIV",{id:!0});var i=h(a);l=Bl(i,!1),i.forEach(f),this.h()},h(){l.a=null,n(a,"id","legend")},m(d,i){_e(d,a,i),l.m(s,a)},p(d,i){i[0]&512&&s!==(s=d[9].legend(d[17]).outerHTML+"")&&l.p(s)},d(d){d&&f(a)}}}function Il(t){let a,l,s,d,i=t[42].def+"",E,u,y,z,p,D,m,k="here",_,I,P=t[42].id.toLowerCase()+"",M,H,g;return{c(){a=o("div"),l=o("div"),s=o("div"),d=b(),E=A(i),u=b(),y=o("br"),z=b(),p=o("div"),D=A("Click "),m=o("a"),m.textContent=k,_=A(` for the \r
                                `),I=o("span"),M=A(P),H=b(),g=A("report page."),this.h()},l(L){a=r(L,"DIV",{class:!0});var V=h(a);l=r(V,"DIV",{class:!0});var T=h(l);s=r(T,"DIV",{style:!0}),h(s).forEach(f),d=w(T),E=S(T,i),u=w(T),y=r(T,"BR",{}),z=w(T),p=r(T,"DIV",{class:!0});var N=h(p);D=S(N,"Click "),m=r(N,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0,"data-svelte-h":!0}),X(m)!=="svelte-gjrxnt"&&(m.textContent=k),_=S(N,` for the \r
                                `),I=r(N,"SPAN",{style:!0});var F=h(I);M=S(F,P),H=w(F),F.forEach(f),g=S(N,"report page."),N.forEach(f),T.forEach(f),V.forEach(f),this.h()},h(){ee(s,"height","0.8em"),n(m,"class","link"),n(m,"href",aa+"/cobenefit?cobenefit="+t[42].id),n(m,"target","_blank"),n(m,"rel","noopener noreferrer"),ee(m,"color",vt(t[42].id)),ee(I,"color",vt(t[42].id)),n(p,"class","link-box svelte-1w6xccz"),n(l,"class","legend-description svelte-1w6xccz"),n(a,"class","legend-description-box svelte-1w6xccz")},m(L,V){_e(L,a,V),e(a,l),e(l,s),e(l,d),e(l,E),e(l,u),e(l,y),e(l,z),e(l,p),e(p,D),e(p,m),e(p,_),e(p,I),e(I,M),e(I,H),e(p,g)},d(L){L&&f(a)}}}function zl(t){let a,l,s,d,i,E=t[42].label+"",u,y,z,p,D=t[12].has(t[42].id)?"▲":"▼",m,k,_=t[12].has(t[42].id),I,P,M;function H(){return t[24](t[42])}let g=_&&Il(t);return{c(){a=o("div"),l=o("div"),s=o("span"),d=b(),i=o("span"),u=A(E),z=b(),p=o("span"),m=A(D),k=b(),g&&g.c(),I=b(),this.h()},l(L){a=r(L,"DIV",{class:!0});var V=h(a);l=r(V,"DIV",{class:!0,style:!0});var T=h(l);s=r(T,"SPAN",{class:!0,style:!0}),h(s).forEach(f),d=w(T),i=r(T,"SPAN",{class:!0});var N=h(i);u=S(N,E),N.forEach(f),z=w(T),p=r(T,"SPAN",{class:!0});var F=h(p);m=S(F,D),F.forEach(f),T.forEach(f),k=w(V),g&&g.l(V),I=w(V),V.forEach(f),this.h()},h(){n(s,"class","legend-color svelte-1w6xccz"),ee(s,"background-color",vt(t[42].id)),n(i,"class",y="legend-text "+(t[12].has(t[42].id)?"expanded":"")+" svelte-1w6xccz"),n(p,"class","toggle-icon svelte-1w6xccz"),n(l,"class","legend-header svelte-1w6xccz"),ee(l,"cursor","pointer"),n(a,"class","legend-item svelte-1w6xccz")},m(L,V){_e(L,a,V),e(a,l),e(l,s),e(l,d),e(l,i),e(i,u),e(l,z),e(l,p),e(p,m),e(a,k),g&&g.m(a,null),e(a,I),P||(M=Ol(l,"click",H),P=!0)},p(L,V){t=L,V[0]&4096&&y!==(y="legend-text "+(t[12].has(t[42].id)?"expanded":"")+" svelte-1w6xccz")&&n(i,"class",y),V[0]&4096&&D!==(D=t[12].has(t[42].id)?"▲":"▼")&&Ze(m,D),V[0]&4096&&(_=t[12].has(t[42].id)),_?g||(g=Il(t),g.c(),g.m(a,I)):g&&(g.d(1),g=null)},d(L){L&&f(a),g&&g.d(),P=!1,M()}}}function Cl(t){let a=console.log("Missing key in plotSmallMult:",t[42].id)+"",l;return{c(){l=A(a)},l(s){l=S(s,a)},m(s,d){_e(s,l,d)},p:Tl,d(s){s&&f(l)}}}function Ml(t){let a,l,s=t[42].label+"",d,i,E,u,y=t[42],z,p=t[0][t[42].id]===void 0&&Cl(t);const D=()=>t[25](u,y),m=()=>t[25](null,y);return{c(){a=o("div"),l=o("h3"),d=A(s),i=b(),p&&p.c(),E=b(),u=o("div"),z=b(),this.h()},l(k){a=r(k,"DIV",{class:!0});var _=h(a);l=r(_,"H3",{class:!0});var I=h(l);d=S(I,s),I.forEach(f),i=w(_),p&&p.l(_),E=w(_),u=r(_,"DIV",{class:!0}),h(u).forEach(f),z=w(_),_.forEach(f),this.h()},h(){n(l,"class","component-chart-title svelte-1w6xccz"),n(u,"class","plot svelte-1w6xccz"),n(a,"class","plot-container svelte-1w6xccz")},m(k,_){_e(k,a,_),e(a,l),e(l,d),e(a,i),p&&p.m(a,null),e(a,E),e(a,u),D(),e(a,z)},p(k,_){t=k,t[0][t[42].id]===void 0?p?p.p(t,_):(p=Cl(t),p.c(),p.m(a,E)):p&&(p.d(1),p=null),y!==t[42]&&(m(),y=t[42],D())},d(k){k&&f(a),p&&p.d(),m()}}}function ba(t){let a,l,s,d,i,E,u,y="SEF Report",z,p,D,m,k,_,I,P,M,H,g,L,V,T,N,F=Ke(t[5],t[16])+"",ne,oe,be,Je,re,ae,Qe,ce,we=Ke(t[4],t[16])+"",$,Fe,K,$e,Ee,De=Ke(t[6],t[16])+"",Ne,et,c,q,U,ke,de,Jt='<div class="radio-set svelte-1w6xccz">Select which level of data you&#39;d like to view:<br/> <input type="radio" name="compare" value="LSOA" checked=""/> <label class="nation-label svelte-1w6xccz" for="html">Data Zone (LSOA)</label><br/> <input type="radio" name="compare" value="LAD"/> <label class="nation-label svelte-1w6xccz" for="html">Local Authority (LAD)</label><br/></div>',ht,Be,fe,xe,Qt='<p class="section-subtitle svelte-1w6xccz">Overview</p>',pt,se,Z,Ve,mt,gt,_t,ye,$t="Each point in the chart below represents a UK data zone (LSOA).",bt,Ae,el=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Xt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each AREA.</span></div>`,wt,Oe,Et,j,Re,Dt,kt,Se,tl="Scroll for zooming in and out.",xt,Le,ll=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Xt}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,Vt,at,Ie,yt,ue,ze,al='<p class="section-subtitle svelte-1w6xccz">By Co-benefits</p>',At,te,B,ve,St,he,sl=t[13].toLowerCase()+"",Lt,It,zt,Ce,il="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",Ct,Mt,Tt,pe,nl='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',Ht,Me,ol=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Xt}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,Pt,G,Ue,rl="Co-benefits:",Ft,Nt,tt,Bt,Ot,Te,me,ie;a=new Kl({});let Y=t[11]&&Sl(t),W=t[9]&&Ll(t),Ye=ft(ut),O=[];for(let v=0;v<Ye.length;v+=1)O[v]=zl(Al(t,Ye,v));let We=ft(ut),R=[];for(let v=0;v<We.length;v+=1)R[v]=Ml(yl(t,We,v));return{c(){Yl(a.$$.fragment),l=b(),s=o("div"),d=o("div"),i=o("div"),E=o("div"),u=o("p"),u.textContent=y,z=b(),p=o("div"),D=o("h1"),m=A(t[15]),k=b(),_=o("p"),I=A(t[14]),P=b(),M=o("div"),H=o("div"),g=b(),L=o("div"),V=o("p"),T=A("Max value: "),N=o("strong"),ne=A(F),oe=A(`\r
                    (`),be=A(t[7]),Je=A(")"),re=b(),ae=o("p"),Qe=A("Average value: "),ce=o("strong"),$=A(we),Fe=b(),K=o("p"),$e=A("Min value: "),Ee=o("strong"),Ne=A(De),et=A(`\r
                    (`),c=A(t[8]),q=A(")"),U=b(),Y&&Y.c(),ke=b(),de=o("div"),de.innerHTML=Jt,ht=b(),Be=o("div"),fe=o("div"),xe=o("div"),xe.innerHTML=Qt,pt=b(),se=o("div"),Z=o("div"),Ve=o("h3"),mt=A(t[13]),gt=A(" against per capita co-benefit values (£, thousand)"),_t=b(),ye=o("p"),ye.textContent=$t,bt=b(),Ae=o("div"),Ae.innerHTML=el,wt=b(),Oe=o("div"),Et=b(),j=o("div"),Re=o("h3"),Dt=A(t[13]),kt=b(),Se=o("p"),Se.textContent=tl,xt=b(),Le=o("div"),Le.innerHTML=ll,Vt=b(),W&&W.c(),at=b(),Ie=o("div"),yt=b(),ue=o("div"),ze=o("div"),ze.innerHTML=al,At=b(),te=o("div"),B=o("div"),ve=o("h3"),St=A("Plotting "),he=o("span"),Lt=A(sl),It=A(" against the gain/loss (£, thousand) per capita for each co-benefit"),zt=b(),Ce=o("p"),Ce.textContent=il,Ct=b(),Mt=o("br"),Tt=b(),pe=o("div"),pe.innerHTML=nl,Ht=b(),Me=o("div"),Me.innerHTML=ol,Pt=b(),G=o("div"),Ue=o("strong"),Ue.textContent=rl,Ft=o("br"),Nt=A(`Expand for detailed explanation\r
                    `),tt=o("div"),Bt=b();for(let v=0;v<O.length;v+=1)O[v].c();Ot=b(),Te=o("div"),me=o("div");for(let v=0;v<R.length;v+=1)R[v].c();this.h()},l(v){Wl(a.$$.fragment,v),l=w(v),s=r(v,"DIV",{class:!0});var C=h(s);d=r(C,"DIV",{class:!0});var x=h(d);i=r(x,"DIV",{class:!0});var J=h(i);E=r(J,"DIV",{class:!0});var st=h(E);u=r(st,"P",{class:!0,"data-svelte-h":!0}),X(u)!=="svelte-3h7aqf"&&(u.textContent=y),z=w(st),p=r(st,"DIV",{class:!0});var it=h(p);D=r(it,"H1",{class:!0});var cl=h(D);m=S(cl,t[15]),cl.forEach(f),k=w(it),_=r(it,"P",{class:!0});var dl=h(_);I=S(dl,t[14]),dl.forEach(f),it.forEach(f),st.forEach(f),P=w(J),M=r(J,"DIV",{class:!0});var fl=h(M);H=r(fl,"DIV",{class:!0}),h(H).forEach(f),fl.forEach(f),g=w(J),L=r(J,"DIV",{class:!0});var je=h(L);V=r(je,"P",{class:!0});var qe=h(V);T=S(qe,"Max value: "),N=r(qe,"STRONG",{});var ul=h(N);ne=S(ul,F),ul.forEach(f),oe=S(qe,`\r
                    (`),be=S(qe,t[7]),Je=S(qe,")"),qe.forEach(f),re=w(je),ae=r(je,"P",{class:!0});var Rt=h(ae);Qe=S(Rt,"Average value: "),ce=r(Rt,"STRONG",{style:!0});var vl=h(ce);$=S(vl,we),vl.forEach(f),Rt.forEach(f),Fe=w(je),K=r(je,"P",{class:!0});var Ge=h(K);$e=S(Ge,"Min value: "),Ee=r(Ge,"STRONG",{});var hl=h(Ee);Ne=S(hl,De),hl.forEach(f),et=S(Ge,`\r
                    (`),c=S(Ge,t[8]),q=S(Ge,")"),Ge.forEach(f),je.forEach(f),J.forEach(f),x.forEach(f),U=w(C),Y&&Y.l(C),ke=w(C),de=r(C,"DIV",{class:!0,"data-svelte-h":!0}),X(de)!=="svelte-1paauel"&&(de.innerHTML=Jt),ht=w(C),Be=r(C,"DIV",{class:!0});var pl=h(Be);fe=r(pl,"DIV",{id:!0});var nt=h(fe);xe=r(nt,"DIV",{class:!0,"data-svelte-h":!0}),X(xe)!=="svelte-ll1i43"&&(xe.innerHTML=Qt),pt=w(nt),se=r(nt,"DIV",{id:!0,class:!0});var ot=h(se);Z=r(ot,"DIV",{class:!0});var ge=h(Z);Ve=r(ge,"H3",{class:!0});var Ut=h(Ve);mt=S(Ut,t[13]),gt=S(Ut," against per capita co-benefit values (£, thousand)"),Ut.forEach(f),_t=w(ge),ye=r(ge,"P",{class:!0,"data-svelte-h":!0}),X(ye)!=="svelte-1ozkrs5"&&(ye.textContent=$t),bt=w(ge),Ae=r(ge,"DIV",{class:!0,"data-svelte-h":!0}),X(Ae)!=="svelte-xpsz06"&&(Ae.innerHTML=el),wt=w(ge),Oe=r(ge,"DIV",{class:!0}),h(Oe).forEach(f),ge.forEach(f),Et=w(ot),j=r(ot,"DIV",{class:!0});var le=h(j);Re=r(le,"H3",{class:!0});var ml=h(Re);Dt=S(ml,t[13]),ml.forEach(f),kt=w(le),Se=r(le,"P",{class:!0,"data-svelte-h":!0}),X(Se)!=="svelte-1ask2se"&&(Se.textContent=tl),xt=w(le),Le=r(le,"DIV",{class:!0,"data-svelte-h":!0}),X(Le)!=="svelte-1dxsuae"&&(Le.innerHTML=ll),Vt=w(le),W&&W.l(le),at=w(le),Ie=r(le,"DIV",{id:!0,class:!0}),h(Ie).forEach(f),le.forEach(f),ot.forEach(f),nt.forEach(f),pl.forEach(f),yt=w(C),ue=r(C,"DIV",{id:!0});var rt=h(ue);ze=r(rt,"DIV",{class:!0,"data-svelte-h":!0}),X(ze)!=="svelte-1av3fse"&&(ze.innerHTML=al),At=w(rt),te=r(rt,"DIV",{id:!0,class:!0,style:!0});var ct=h(te);B=r(ct,"DIV",{id:!0,class:!0});var Q=h(B);ve=r(Q,"H3",{class:!0});var dt=h(ve);St=S(dt,"Plotting "),he=r(dt,"SPAN",{style:!0});var gl=h(he);Lt=S(gl,sl),gl.forEach(f),It=S(dt," against the gain/loss (£, thousand) per capita for each co-benefit"),dt.forEach(f),zt=w(Q),Ce=r(Q,"P",{class:!0,"data-svelte-h":!0}),X(Ce)!=="svelte-1h97e3k"&&(Ce.textContent=il),Ct=w(Q),Mt=r(Q,"BR",{}),Tt=w(Q),pe=r(Q,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),X(pe)!=="svelte-11g4vkg"&&(pe.innerHTML=nl),Ht=w(Q),Me=r(Q,"DIV",{class:!0,"data-svelte-h":!0}),X(Me)!=="svelte-1ps2onq"&&(Me.innerHTML=ol),Pt=w(Q),G=r(Q,"DIV",{id:!0,class:!0});var He=h(G);Ue=r(He,"STRONG",{"data-svelte-h":!0}),X(Ue)!=="svelte-1qu96kx"&&(Ue.textContent=rl),Ft=r(He,"BR",{}),Nt=S(He,`Expand for detailed explanation\r
                    `),tt=r(He,"DIV",{style:!0}),h(tt).forEach(f),Bt=w(He);for(let Pe=0;Pe<O.length;Pe+=1)O[Pe].l(He);He.forEach(f),Q.forEach(f),Ot=w(ct),Te=r(ct,"DIV",{id:!0,class:!0});var _l=h(Te);me=r(_l,"DIV",{id:!0,class:!0});var bl=h(me);for(let Pe=0;Pe<R.length;Pe+=1)R[Pe].l(bl);bl.forEach(f),_l.forEach(f),ct.forEach(f),rt.forEach(f),C.forEach(f),this.h()},h(){n(u,"class","page-subtitle svelte-1w6xccz"),n(D,"class","page-title svelte-1w6xccz"),n(_,"class","definition"),n(p,"class","title-container"),n(E,"class","header-text svelte-1w6xccz"),n(H,"class","plot svelte-1w6xccz"),n(M,"class","header-vis svelte-1w6xccz"),n(V,"class","definition-stat svelte-1w6xccz"),ee(ce,"color","#BD210E"),n(ae,"class","definition-stat svelte-1w6xccz"),n(K,"class","definition-stat svelte-1w6xccz"),n(L,"class","header-stats svelte-1w6xccz"),n(i,"class","header-content svelte-1w6xccz"),n(d,"class","section header svelte-1w6xccz"),n(de,"class","section"),n(xe,"class","section-header"),n(Ve,"class","component-title"),n(ye,"class","description"),n(Ae,"class","aggregation-icon-container"),n(Oe,"class","plot-dot svelte-1w6xccz"),n(Z,"class","component column"),n(Re,"class","component-title"),n(Se,"class","description"),n(Le,"class","aggregation-icon-container2 svelte-1w6xccz"),n(Ie,"id","map"),n(Ie,"class","svelte-1w6xccz"),n(j,"class","component column"),n(se,"id","vis-block"),n(se,"class","svelte-1w6xccz"),n(fe,"id","overview"),n(Be,"class","section"),n(ze,"class","section-header"),ee(he,"background-color","#555"),ee(he,"padding","0 1px"),ee(he,"color","#f9f9f9"),n(ve,"class","component-title"),n(Ce,"class","explanation"),n(pe,"id","se-disclaimer"),n(pe,"class","disclaimer-box svelte-1w6xccz"),n(Me,"class","aggregation-icon-container2 svelte-1w6xccz"),ee(tt,"height","0.8em"),n(G,"id","main-legend"),n(G,"class","legend-box svelte-1w6xccz"),n(B,"id","se-title"),n(B,"class","svelte-1w6xccz"),n(me,"id","multiple-plots"),n(me,"class","svelte-1w6xccz"),n(Te,"id","multiple-comp"),n(Te,"class","svelte-1w6xccz"),n(te,"id","se-block"),n(te,"class","component svelte-1w6xccz"),ee(te,"margin-left","1rem"),n(ue,"id","compare"),n(s,"class","page-container")},m(v,C){jl(a,v,C),_e(v,l,C),_e(v,s,C),e(s,d),e(d,i),e(i,E),e(E,u),e(E,z),e(E,p),e(p,D),e(D,m),e(p,k),e(p,_),e(_,I),e(i,P),e(i,M),e(M,H),t[21](H),e(i,g),e(i,L),e(L,V),e(V,T),e(V,N),e(N,ne),e(V,oe),e(V,be),e(V,Je),e(L,re),e(L,ae),e(ae,Qe),e(ae,ce),e(ce,$),e(L,Fe),e(L,K),e(K,$e),e(K,Ee),e(Ee,Ne),e(K,et),e(K,c),e(K,q),e(s,U),Y&&Y.m(s,null),e(s,ke),e(s,de),e(s,ht),e(s,Be),e(Be,fe),e(fe,xe),e(fe,pt),e(fe,se),e(se,Z),e(Z,Ve),e(Ve,mt),e(Ve,gt),e(Z,_t),e(Z,ye),e(Z,bt),e(Z,Ae),e(Z,wt),e(Z,Oe),t[22](Oe),e(se,Et),e(se,j),e(j,Re),e(Re,Dt),e(j,kt),e(j,Se),e(j,xt),e(j,Le),e(j,Vt),W&&W.m(j,null),e(j,at),e(j,Ie),t[23](Ie),e(s,yt),e(s,ue),e(ue,ze),e(ue,At),e(ue,te),e(te,B),e(B,ve),e(ve,St),e(ve,he),e(he,Lt),e(ve,It),e(B,zt),e(B,Ce),e(B,Ct),e(B,Mt),e(B,Tt),e(B,pe),e(B,Ht),e(B,Me),e(B,Pt),e(B,G),e(G,Ue),e(G,Ft),e(G,Nt),e(G,tt),e(G,Bt);for(let x=0;x<O.length;x+=1)O[x]&&O[x].m(G,null);e(te,Ot),e(te,Te),e(Te,me);for(let x=0;x<R.length;x+=1)R[x]&&R[x].m(me,null);t[26](s),ie=!0},p(v,C){if((!ie||C[0]&32)&&F!==(F=Ke(v[5],v[16])+"")&&Ze(ne,F),(!ie||C[0]&128)&&Ze(be,v[7]),(!ie||C[0]&16)&&we!==(we=Ke(v[4],v[16])+"")&&Ze($,we),(!ie||C[0]&64)&&De!==(De=Ke(v[6],v[16])+"")&&Ze(Ne,De),(!ie||C[0]&256)&&Ze(c,v[8]),v[11]?Y?Y.p(v,C):(Y=Sl(v),Y.c(),Y.m(s,ke)):Y&&(Y.d(1),Y=null),v[9]?W?W.p(v,C):(W=Ll(v),W.c(),W.m(j,at)):W&&(W.d(1),W=null),C[0]&266240){Ye=ft(ut);let x;for(x=0;x<Ye.length;x+=1){const J=Al(v,Ye,x);O[x]?O[x].p(J,C):(O[x]=zl(J),O[x].c(),O[x].m(G,null))}for(;x<O.length;x+=1)O[x].d(1);O.length=Ye.length}if(C[0]&1){We=ft(ut);let x;for(x=0;x<We.length;x+=1){const J=yl(v,We,x);R[x]?R[x].p(J,C):(R[x]=Ml(J),R[x].c(),R[x].m(me,null))}for(;x<R.length;x+=1)R[x].d(1);R.length=We.length}},i(v){ie||(ql(a.$$.fragment,v),ie=!0)},o(v){Gl(a.$$.fragment,v),ie=!1},d(v){v&&(f(l),f(s)),Xl(a,v),t[21](null),Y&&Y.d(),t[22](null),W&&W.d(),t[23](null),wl(O,v),wl(R,v),t[26](null)}}}let Xe=400;function Ke(t,a){return a==="£"?`${a}${t}`:`${t} ${a}`}function wa(t,a,l){let s,d,i,E={},u,y,z,p=!1,D,m,k,_,I,P,M,{data:H}=a;const g=H.SEF;console.log("SEF ",g);const L=ia.find(c=>c.id===g)?.label??g,V=na.find(c=>c.id===g)?.def??g,T=oa.find(c=>c.id===g)?.description??g,N=ra.find(c=>c.id===g)?.short_units??g,F=ca.find(c=>c.id===g)?.units??g;let ne,oe,be=!1;const Je=["overview","compare"];function re(){const c=window.scrollY;l(11,be=c>250);for(const q of Je){const U=document.getElementById(q);if(!U)continue;const ke=U.getBoundingClientRect();if(ke.top<=150&&ke.bottom>=150)break}}Pl(()=>(window.addEventListener("scroll",re),re(),()=>window.removeEventListener("scroll",re))),Fl(()=>{window.removeEventListener("scroll",re)});async function ae(){u=await Gt(da(g)),console.log("totals",u),y=await Gt(fa(g)),console.log("by cobens",y),z=await Gt(ua()),console.log("per_capita_data",z),l(4,D=(Dl(u,c=>c.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),console.log("Average Value: ",D),I=$l(u,c=>c.val),l(7,_=I!==-1?u[I].Lookup_Value:"N/A"),l(5,m=(u[I]?.val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),M=ea(u,c=>c.val),l(8,P=M!==-1?u[M].Lookup_Value:"N/A"),l(6,k=(u[M]?.val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),Vl.forEach(c=>{y[c]=+y[c]}),l(20,p=!0)}ae().then(()=>{l(9,ne=new sa(u,"LSOA",oe,"val",!1,"Lookup_Value",!1)),ne.initMap()});function Qe(){const c=Dl(u,U=>U.val)??0,q=ta(_a().thresholds(20).value(U=>U.val)(u),U=>U.length);d?.append(Wt({height:Xe/1.9,width:Xe*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${F}`},y:{label:"No. of datazones/LADs",labelArrow:!1},style:{fontSize:"16px"},marks:[la(u,pa({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),jt([c],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:c,label:"Average"}},tip:{format:{average:U=>`${U.toFixed(2)}`,x:!1}}}),Kt(u,{x:{value:c,thresholds:20},y:q+.1*q,r:5,fill:"#BD210E"}),qt({label:`${F}`,labelArrow:!1,labelAnchor:"center"})]}))}function ce(){i?.append(Wt({height:Xe*1.5,width:Xe*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[kl([0],{stroke:"#333",strokeWidth:1.25}),jt([0],{stroke:"#333",strokeWidth:.75}),Kt(u,{x:"val",y:c=>c.total_per_capita*1e3,fill:c=>c.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${F}`},value:{value:c=>c.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),xl({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),qt({label:`${F}`,labelArrow:!1,labelAnchor:"center"})]}))}function we(){Vl.forEach(c=>{let q;q=Wt({height:Xe,width:Xe,marginLeft:60,marginTop:10,marginRight:10,marginBottom:60,x:{label:null},y:{label:null},style:{fontSize:"12px"},marks:[kl([0],{stroke:"#333",strokeWidth:1.25}),jt([0],{stroke:"#333",strokeWidth:.75}),Kt(y.filter(U=>U.co_benefit_type==c),{x:"val",y:"total",fill:vt(c),fillOpacity:.5,r:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),xl({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),qt({label:`${F}`,labelArrow:!1,labelAnchor:"center"})]}),E[c]?.append(q)})}let $=new Set;function Fe(c){$.has(c)?$.delete(c):$.add(c),l(12,$=new Set($))}function K(c){lt[c?"unshift":"push"](()=>{d=c,l(2,d)})}function $e(c){lt[c?"unshift":"push"](()=>{i=c,l(3,i)})}function Ee(c){lt[c?"unshift":"push"](()=>{oe=c,l(10,oe)})}const De=c=>Fe(c.id);function Ne(c,q){lt[c?"unshift":"push"](()=>{E[q.id]=c,l(0,E)})}function et(c){lt[c?"unshift":"push"](()=>{s=c,l(1,s)})}return t.$$set=c=>{"data"in c&&l(19,H=c.data)},t.$$.update=()=>{t.$$.dirty[0]&1048577&&(Object.values(E).forEach(c=>{c.firstChild?.remove()}),p&&(Qe(),ce(),we()))},[E,s,d,i,D,m,k,_,P,ne,oe,be,$,L,V,T,N,F,Fe,H,p,K,$e,Ee,De,Ne,et]}class Ta extends Rl{constructor(a){super(),Ul(this,a,wa,ba,Hl,{data:19},null,[-1,-1])}}export{Ta as component};
