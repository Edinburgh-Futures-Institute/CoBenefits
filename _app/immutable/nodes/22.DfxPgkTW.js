import{s as xl,a as k,e as f,t as D,g as E,c as d,b as m,p as te,d as L,f as o,q as u,v as be,i as V,h as i,w as Hl,j as Ae,x as pl,y as Ul,z as zl,n as He,H as Gl,A as Wl,r as jl,B as Le}from"../chunks/scheduler.DTj-kjPl.js";import{S as Yl,i as ql,c as vl,b as _l,m as ml,t as gl,a as bl,d as yl}from"../chunks/index.D23NfW6z.js";import{N as Jl,e as St}from"../chunks/NavigationBar.Bycr0UAM.js";import"../chunks/transform.BNP73y-7.js";import{aM as Kl,aF as qt,aG as Xl,t as kl,aK as Ql,T as El,aN as Dl,aO as Zl,aP as $l,S as Ll,G as Ge,P as ea,K as ot,J as ct,R as ta,H as wt,Q as Vt}from"../chunks/index.CSEVsNHn.js";import{f as Jt}from"../chunks/module.jBGXnV9S.js";import{b as la}from"../chunks/paths.DqCXHabd.js";import{M as aa}from"../chunks/mapUK.BvjllxiB.js";import{m as sa,n as ia,o as na,p as ra,q as oa,s as ca,k as Al,h as ft,g as ua,d as Fe,t as It,i as fa,u as Kt,r as da,e as ha}from"../chunks/globals.Cv11FYXW.js";import{g as ut,o as pa,n as va,w as _a,x as ma,f as ga}from"../chunks/duckdb.1GKQlJzr.js";import{p as Tt}from"../chunks/per_capita.COcMrZFY.js";import{F as ba}from"../chunks/Footer.CaODzsWn.js";import{n as ya}from"../chunks/nice.C6WxDDVq.js";import{t as ka,b as Ea}from"../chunks/bin.BNallWL9.js";import{b as Da}from"../chunks/bar.DXpEzRU1.js";import{d as Xt}from"../chunks/dot.D-I1a9jp.js";import{b as La}from"../chunks/box.DCucTqfN.js";var Aa=Array.prototype,Sa=Aa.slice;function Qt(l){return()=>l}function Sl(){var l=Kl,t=qt,e=ka;function a(n){Array.isArray(n)||(n=Array.from(n));var s,c=n.length,v,p,_=new Array(c);for(s=0;s<c;++s)_[s]=l(n[s],s,n);var A=t(_),y=A[0],b=A[1],w=e(_,y,b);if(!Array.isArray(w)){const g=b,I=+w;if(t===qt&&([y,b]=ya(y,b,I)),w=Xl(y,b,I),w[0]<=y&&(p=kl(y,b,I)),w[w.length-1]>=b)if(g>=b&&t===qt){const C=kl(y,b,I);isFinite(C)&&(C>0?b=(Math.floor(b/C)+1)*C:C<0&&(b=(Math.ceil(b*-C)+1)/-C))}else w.pop()}for(var H=w.length,P=0,R=H;w[P]<=y;)++P;for(;w[R-1]>b;)--R;(P||R<H)&&(w=w.slice(P,R),H=R-P);var N=new Array(H+1),F;for(s=0;s<=H;++s)F=N[s]=[],F.x0=s>0?w[s-1]:y,F.x1=s<H?w[s]:b;if(isFinite(p)){if(p>0)for(s=0;s<c;++s)(v=_[s])!=null&&y<=v&&v<=b&&N[Math.min(H,Math.floor((v-y)/p))].push(n[s]);else if(p<0){for(s=0;s<c;++s)if((v=_[s])!=null&&y<=v&&v<=b){const g=Math.floor((y-v)*p);N[Math.min(H,g+(w[g]<=v))].push(n[s])}}}else for(s=0;s<c;++s)(v=_[s])!=null&&y<=v&&v<=b&&N[Ql(w,v,0,H)].push(n[s]);return N}return a.value=function(n){return arguments.length?(l=typeof n=="function"?n:Qt(n),a):l},a.domain=function(n){return arguments.length?(t=typeof n=="function"?n:Qt([n[0],n[1]]),a):t},a.thresholds=function(n){return arguments.length?(e=typeof n=="function"?n:Qt(Array.isArray(n)?Sa.call(n):n),a):e},a}const wa=""+new URL("../assets/negative.BhphYhmj.png",import.meta.url).href;function wl(l,t,e){const a=l.slice();return a[68]=t[e],a[69]=t,a[70]=e,a}function Vl(l,t,e){const a=l.slice();return a[68]=t[e],a}function Va(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(e,a){V(e,t,a),l[38](t)},p:He,d(e){e&&o(t),l[38](null)}}}function Ia(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(e,a){V(e,t,a),l[37](t)},p:He,d(e){e&&o(t),l[37](null)}}}function Ta(l){let t,e,a=Se(l[12],l[24])+"",n,s,c,v;return{c(){t=D("Max value: "),e=f("strong"),n=D(a),s=D("("),c=D(l[14]),v=D(")")},l(p){t=L(p,"Max value: "),e=d(p,"STRONG",{});var _=m(e);n=L(_,a),_.forEach(o),s=L(p,"("),c=L(p,l[14]),v=L(p,")")},m(p,_){V(p,t,_),V(p,e,_),i(e,n),V(p,s,_),V(p,c,_),V(p,v,_)},p(p,_){_[0]&4096&&a!==(a=Se(p[12],p[24])+"")&&Ae(n,a),_[0]&16384&&Ae(c,p[14])},d(p){p&&(o(t),o(e),o(s),o(c),o(v))}}}function Ma(l){let t;return{c(){t=D("-")},l(e){t=L(e,"-")},m(e,a){V(e,t,a)},p:He,d(e){e&&o(t)}}}function Ca(l){let t,e,a=Se(l[10],l[24])+"",n;return{c(){t=D("Average value: "),e=f("strong"),n=D(a),this.h()},l(s){t=L(s,"Average value: "),e=d(s,"STRONG",{style:!0});var c=m(e);n=L(c,a),c.forEach(o),this.h()},h(){be(e,"color","#BD210E")},m(s,c){V(s,t,c),V(s,e,c),i(e,n)},p(s,c){c[0]&1024&&a!==(a=Se(s[10],s[24])+"")&&Ae(n,a)},d(s){s&&(o(t),o(e))}}}function Fa(l){let t,e,a=Se(l[11],l[24])+"",n;return{c(){t=D("Most common category: "),e=f("strong"),n=D(a),this.h()},l(s){t=L(s,"Most common category: "),e=d(s,"STRONG",{style:!0});var c=m(e);n=L(c,a),c.forEach(o),this.h()},h(){be(e,"color","#BD210E")},m(s,c){V(s,t,c),V(s,e,c),i(e,n)},p(s,c){c[0]&2048&&a!==(a=Se(s[11],s[24])+"")&&Ae(n,a)},d(s){s&&(o(t),o(e))}}}function Ha(l){let t,e,a=Se(l[13],l[24])+"",n,s,c,v;return{c(){t=D("Min value: "),e=f("strong"),n=D(a),s=D("("),c=D(l[15]),v=D(")")},l(p){t=L(p,"Min value: "),e=d(p,"STRONG",{});var _=m(e);n=L(_,a),_.forEach(o),s=L(p,"("),c=L(p,l[15]),v=L(p,")")},m(p,_){V(p,t,_),V(p,e,_),i(e,n),V(p,s,_),V(p,c,_),V(p,v,_)},p(p,_){_[0]&8192&&a!==(a=Se(p[13],p[24])+"")&&Ae(n,a),_[0]&32768&&Ae(c,p[15])},d(p){p&&(o(t),o(e),o(s),o(c),o(v))}}}function Pa(l){let t;return{c(){t=D("-")},l(e){t=L(e,"-")},m(e,a){V(e,t,a)},p:He,d(e){e&&o(t)}}}function Il(l){let t,e,a,n,s;return{c(){t=f("div"),e=f("div"),a=f("span"),n=D(l[21]),s=D(" >>"),this.h()},l(c){t=d(c,"DIV",{class:!0});var v=m(t);e=d(v,"DIV",{class:!0});var p=m(e);a=d(p,"SPAN",{class:!0});var _=m(a);n=L(_,l[21]),s=L(_," >>"),_.forEach(o),p.forEach(o),v.forEach(o),this.h()},h(){u(a,"class","mini-header-text"),u(e,"class","mini-header-content"),u(t,"class","mini-header")},m(c,v){V(c,t,v),i(t,e),i(e,a),i(a,n),i(a,s)},p:He,d(c){c&&o(t)}}}function Na(l){let t;return{c(){t=D("LSOA.")},l(e){t=L(e,"LSOA.")},m(e,a){V(e,t,a)},d(e){e&&o(t)}}}function Oa(l){let t;return{c(){t=D("LAD.")},l(e){t=L(e,"LAD.")},m(e,a){V(e,t,a)},d(e){e&&o(t)}}}function Ba(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(e,a){V(e,t,a),l[40](t)},p:He,d(e){e&&o(t),l[40](null)}}}function Ra(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(e,a){V(e,t,a),l[39](t)},p:He,d(e){e&&o(t),l[39](null)}}}function Tl(l){let t,e,a=l[16].legend(l[25]).outerHTML+"";return{c(){t=f("div"),e=new Gl(!1),this.h()},l(n){t=d(n,"DIV",{id:!0});var s=m(t);e=Wl(s,!1),s.forEach(o),this.h()},h(){e.a=null,u(t,"id","legend")},m(n,s){V(n,t,s),e.m(a,t)},p(n,s){s[0]&65536&&a!==(a=n[16].legend(n[25]).outerHTML+"")&&e.p(a)},d(n){n&&o(t)}}}function Ml(l){let t,e,a,n,s=l[68].def+"",c,v,p,_,A,y,b,w="here",H,P,R=l[68].id.toLowerCase()+"",N,F,g;return{c(){t=f("div"),e=f("div"),a=f("div"),n=k(),c=D(s),v=k(),p=f("br"),_=k(),A=f("div"),y=D("Click "),b=f("a"),b.textContent=w,H=D(` for the 
                                `),P=f("span"),N=D(R),F=k(),g=D("report page."),this.h()},l(I){t=d(I,"DIV",{class:!0});var C=m(t);e=d(C,"DIV",{class:!0});var B=m(e);a=d(B,"DIV",{style:!0}),m(a).forEach(o),n=E(B),c=L(B,s),v=E(B),p=d(B,"BR",{}),_=E(B),A=d(B,"DIV",{class:!0});var Y=m(A);y=L(Y,"Click "),b=d(Y,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0,"data-svelte-h":!0}),te(b)!=="svelte-gjrxnt"&&(b.textContent=w),H=L(Y,` for the 
                                `),P=d(Y,"SPAN",{style:!0});var U=m(P);N=L(U,R),F=E(U),U.forEach(o),g=L(Y,"report page."),Y.forEach(o),B.forEach(o),C.forEach(o),this.h()},h(){be(a,"height","0.8em"),u(b,"class","link"),u(b,"href",la+"/cobenefit?cobenefit="+l[68].id),u(b,"target","_blank"),u(b,"rel","noopener noreferrer"),be(b,"color",ft(l[68].id)),be(P,"color",ft(l[68].id)),u(A,"class","link-box svelte-10c07ly"),u(e,"class","legend-description svelte-10c07ly"),u(t,"class","legend-description-box svelte-10c07ly")},m(I,C){V(I,t,C),i(t,e),i(e,a),i(e,n),i(e,c),i(e,v),i(e,p),i(e,_),i(e,A),i(A,y),i(A,b),i(A,H),i(A,P),i(P,N),i(P,F),i(A,g)},d(I){I&&o(t)}}}function Cl(l){let t,e,a,n,s,c=l[68].label+"",v,p,_,A,y=l[19].has(l[68].id)?"▲":"▼",b,w,H=l[19].has(l[68].id),P,R,N;function F(){return l[42](l[68])}let g=H&&Ml(l);return{c(){t=f("div"),e=f("div"),a=f("span"),n=k(),s=f("span"),v=D(c),_=k(),A=f("span"),b=D(y),w=k(),g&&g.c(),P=k(),this.h()},l(I){t=d(I,"DIV",{class:!0});var C=m(t);e=d(C,"DIV",{class:!0,style:!0});var B=m(e);a=d(B,"SPAN",{class:!0,style:!0}),m(a).forEach(o),n=E(B),s=d(B,"SPAN",{class:!0});var Y=m(s);v=L(Y,c),Y.forEach(o),_=E(B),A=d(B,"SPAN",{class:!0});var U=m(A);b=L(U,y),U.forEach(o),B.forEach(o),w=E(C),g&&g.l(C),P=E(C),C.forEach(o),this.h()},h(){u(a,"class","legend-color svelte-10c07ly"),be(a,"background-color",ft(l[68].id)),u(s,"class",p="legend-text "+(l[19].has(l[68].id)?"expanded":"")+" svelte-10c07ly"),u(A,"class","toggle-icon svelte-10c07ly"),u(e,"class","legend-header svelte-10c07ly"),be(e,"cursor","pointer"),u(t,"class","legend-item svelte-10c07ly")},m(I,C){V(I,t,C),i(t,e),i(e,a),i(e,n),i(e,s),i(s,v),i(e,_),i(e,A),i(A,b),i(t,w),g&&g.m(t,null),i(t,P),R||(N=Hl(e,"click",F),R=!0)},p(I,C){l=I,C[0]&524288&&p!==(p="legend-text "+(l[19].has(l[68].id)?"expanded":"")+" svelte-10c07ly")&&u(s,"class",p),C[0]&524288&&y!==(y=l[19].has(l[68].id)?"▲":"▼")&&Ae(b,y),C[0]&524288&&(H=l[19].has(l[68].id)),H?g||(g=Ml(l),g.c(),g.m(t,P)):g&&(g.d(1),g=null)},d(I){I&&o(t),g&&g.d(),R=!1,N()}}}function xa(l){let t,e=`<img class="sm-icon svelte-10c07ly" src="${Tt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each area.</span>`;return{c(){t=f("div"),t.innerHTML=e,this.h()},l(a){t=d(a,"DIV",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-1lqh0bd"&&(t.innerHTML=e),this.h()},h(){u(t,"class","tooltip-wrapper")},m(a,n){V(a,t,n)},d(a){a&&o(t)}}}function Ua(l){let t,e=`<img class="sm-icon svelte-10c07ly" src="${Tt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each area.</span>`,a,n,s=`<img class="sm-icon svelte-10c07ly" src="${wa}" alt="icon"/> <span class="tooltip-text-neg svelte-10c07ly">This chart includes negative values.</span>`;return{c(){t=f("div"),t.innerHTML=e,a=k(),n=f("div"),n.innerHTML=s,this.h()},l(c){t=d(c,"DIV",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-1tqucbd"&&(t.innerHTML=e),a=E(c),n=d(c,"DIV",{class:!0,"data-svelte-h":!0}),te(n)!=="svelte-10ijo5a"&&(n.innerHTML=s),this.h()},h(){u(t,"class","tooltip-wrapper"),u(n,"class","tooltip-wrapper")},m(c,v){V(c,t,v),V(c,a,v),V(c,n,v)},d(c){c&&(o(t),o(a),o(n))}}}function za(l){let t,e=l[68];const a=()=>l[44](t,e),n=()=>l[44](null,e);return{c(){t=f("div"),this.h()},l(s){t=d(s,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(s,c){V(s,t,c),a()},p(s,c){l=s,e!==l[68]&&(n(),e=l[68],a())},d(s){s&&o(t),n()}}}function Ga(l){let t,e=l[68];const a=()=>l[43](t,e),n=()=>l[43](null,e);return{c(){t=f("div"),this.h()},l(s){t=d(s,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(s,c){V(s,t,c),a()},p(s,c){l=s,e!==l[68]&&(n(),e=l[68],a())},d(s){s&&o(t),n()}}}function Fl(l){let t,e,a,n,s,c,v=l[68].label+"",p,_,A,y;function b(F,g){return F[68].id=="Hassle costs"||F[68].id=="Road repairs"||F[68].id=="Road safety"||F[68].id=="Congestion"||F[68].id=="Excess heat"?Ua:xa}let H=b(l)(l);function P(F,g){return Fe.includes(F[20])?Ga:za}let N=P(l)(l);return{c(){t=f("div"),e=f("div"),a=f("img"),s=k(),c=f("h3"),p=D(v),_=k(),H.c(),A=k(),N.c(),y=k(),this.h()},l(F){t=d(F,"DIV",{class:!0});var g=m(t);e=d(g,"DIV",{class:!0});var I=m(e);a=d(I,"IMG",{class:!0,src:!0,alt:!0}),s=E(I),c=d(I,"H3",{class:!0});var C=m(c);p=L(C,v),C.forEach(o),_=E(I),H.l(I),I.forEach(o),A=E(g),N.l(g),y=E(g),g.forEach(o),this.h()},h(){u(a,"class","sm-cb-icon svelte-10c07ly"),jl(a.src,n=ua(l[68].id))||u(a,"src",n),u(a,"alt",l[68].label+" icon"),u(c,"class","chart-component-title"),u(e,"class","component-chart-title-container svelte-10c07ly"),u(t,"class","plot-container svelte-10c07ly")},m(F,g){V(F,t,g),i(t,e),i(e,a),i(e,s),i(e,c),i(c,p),i(e,_),H.m(e,null),i(t,A),N.m(t,null),i(t,y)},p(F,g){N.p(F,g)},d(F){F&&o(t),H.d(),N.d()}}}function Wa(l){let t,e,a,n,s,c,v,p="Socio-Economic Factor Report",_,A,y,b,w,H,P,R,N,F,g,I,C,B,Y,U,Pe,Z,ie=l[3]?"Switch to LAD level data":"Switch to LSOA level data",de,we,x,X,re,he,dt='<p class="section-subtitle svelte-10c07ly">Overview</p>',We,z,q,le,Ne,Oe,je,$,Ye,ne,oe,ht=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Tt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each area.</span></div>`,qe,Je,G,pe,Ke,Xe,Qe,ve,pt="Scroll for zooming in and out.",Ze,_e,vt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Tt}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each area.</span></div>`,$e,Be,me,r,T,O,et='<p class="section-subtitle svelte-10c07ly">By Co-benefits</p>',_t,ce,Q,ye,Mt,Zt=l[21].toLowerCase()+"",Ct,Ft,Ht,Ve,$t="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",Pt,Nt,Ot,ee,Re,el="Co-benefits:",Bt,Rt,tt,xt,Ut,ke,tl='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',zt,Ie,Ee,mt,Te,lt,Gt,ll;t=new Jl({});function Pl(h,M){return Fe.includes(h[20])?Ia:Va}let at=Pl(l)(l);function Nl(h,M){return Fe.includes(h[20])?Ma:Ta}let st=Nl(l)(l);function Ol(h,M){return Fe.includes(h[20])?Fa:Ca}let it=Ol(l)(l);function Bl(h,M){return Fe.includes(h[20])?Pa:Ha}let nt=Bl(l)(l),J=l[18]&&Il(l);function al(h,M){return h[4]==h[2]?Oa:Na}let gt=al(l),ge=gt(l);function Rl(h,M){return Fe.includes(h[20])?Ra:Ba}let rt=Rl(l)(l),K=l[16]&&Tl(l),xe=St(It),W=[];for(let h=0;h<xe.length;h+=1)W[h]=Cl(Vl(l,xe,h));let Ue=St(It),j=[];for(let h=0;h<Ue.length;h+=1)j[h]=Fl(wl(l,Ue,h));return Te=new ba({}),{c(){vl(t.$$.fragment),e=k(),a=f("div"),n=f("div"),s=f("div"),c=f("div"),v=f("p"),v.textContent=p,_=k(),A=f("div"),y=f("h1"),b=D(l[23]),w=k(),H=f("p"),P=D(l[22]),R=k(),N=f("div"),at.c(),F=k(),g=f("div"),I=f("p"),st.c(),C=k(),B=f("p"),it.c(),Y=k(),U=f("p"),nt.c(),Pe=k(),Z=f("button"),de=D(ie),we=k(),J&&J.c(),x=k(),X=f("div"),re=f("div"),he=f("div"),he.innerHTML=dt,We=k(),z=f("div"),q=f("div"),le=f("h3"),Ne=D(l[21]),Oe=D(" against per capita co-benefit values (£, thousand)"),je=k(),$=f("p"),Ye=D(`Each point in the chart below represents a UK 
                        `),ge.c(),ne=k(),oe=f("div"),oe.innerHTML=ht,qe=k(),rt.c(),Je=k(),G=f("div"),pe=f("h3"),Ke=D(l[21]),Xe=D(" at LSOA level"),Qe=k(),ve=f("p"),ve.textContent=pt,Ze=k(),_e=f("div"),_e.innerHTML=vt,$e=k(),K&&K.c(),Be=k(),me=f("div"),r=k(),T=f("div"),O=f("div"),O.innerHTML=et,_t=k(),ce=f("div"),Q=f("div"),ye=f("h3"),Mt=D(`Plotting 
                    
                    `),Ct=D(Zt),Ft=D(`
                
                against the gain/loss (£, thousand) per capita for each co-benefit`),Ht=k(),Ve=f("p"),Ve.textContent=$t,Pt=k(),Nt=f("br"),Ot=k(),ee=f("div"),Re=f("strong"),Re.textContent=el,Bt=f("br"),Rt=D(`Expand for detailed explanation
                    `),tt=f("div"),xt=k();for(let h=0;h<W.length;h+=1)W[h].c();Ut=k(),ke=f("div"),ke.innerHTML=tl,zt=k(),Ie=f("div"),Ee=f("div");for(let h=0;h<j.length;h+=1)j[h].c();mt=k(),vl(Te.$$.fragment),this.h()},l(h){_l(t.$$.fragment,h),e=E(h),a=d(h,"DIV",{class:!0});var M=m(a);n=d(M,"DIV",{class:!0});var S=m(n);s=d(S,"DIV",{class:!0});var ae=m(s);c=d(ae,"DIV",{class:!0});var bt=m(c);v=d(bt,"P",{class:!0,"data-svelte-h":!0}),te(v)!=="svelte-16ymxs7"&&(v.textContent=p),_=E(bt),A=d(bt,"DIV",{class:!0});var yt=m(A);y=d(yt,"H1",{class:!0});var sl=m(y);b=L(sl,l[23]),sl.forEach(o),w=E(yt),H=d(yt,"P",{class:!0});var il=m(H);P=L(il,l[22]),il.forEach(o),yt.forEach(o),bt.forEach(o),R=E(ae),N=d(ae,"DIV",{class:!0});var nl=m(N);at.l(nl),nl.forEach(o),F=E(ae),g=d(ae,"DIV",{class:!0});var ze=m(g);I=d(ze,"P",{class:!0});var rl=m(I);st.l(rl),rl.forEach(o),C=E(ze),B=d(ze,"P",{class:!0});var ol=m(B);it.l(ol),ol.forEach(o),Y=E(ze),U=d(ze,"P",{class:!0});var cl=m(U);nt.l(cl),cl.forEach(o),ze.forEach(o),ae.forEach(o),S.forEach(o),Pe=E(M),Z=d(M,"BUTTON",{});var ul=m(Z);de=L(ul,ie),ul.forEach(o),we=E(M),J&&J.l(M),x=E(M),X=d(M,"DIV",{class:!0});var fl=m(X);re=d(fl,"DIV",{id:!0});var kt=m(re);he=d(kt,"DIV",{class:!0,"data-svelte-h":!0}),te(he)!=="svelte-ll1i43"&&(he.innerHTML=dt),We=E(kt),z=d(kt,"DIV",{id:!0,class:!0});var Et=m(z);q=d(Et,"DIV",{class:!0});var De=m(q);le=d(De,"H3",{class:!0});var Wt=m(le);Ne=L(Wt,l[21]),Oe=L(Wt," against per capita co-benefit values (£, thousand)"),Wt.forEach(o),je=E(De),$=d(De,"P",{class:!0});var jt=m($);Ye=L(jt,`Each point in the chart below represents a UK 
                        `),ge.l(jt),jt.forEach(o),ne=E(De),oe=d(De,"DIV",{class:!0,"data-svelte-h":!0}),te(oe)!=="svelte-tg5ofw"&&(oe.innerHTML=ht),qe=E(De),rt.l(De),De.forEach(o),Je=E(Et),G=d(Et,"DIV",{class:!0});var ue=m(G);pe=d(ue,"H3",{class:!0});var Yt=m(pe);Ke=L(Yt,l[21]),Xe=L(Yt," at LSOA level"),Yt.forEach(o),Qe=E(ue),ve=d(ue,"P",{class:!0,"data-svelte-h":!0}),te(ve)!=="svelte-1ask2se"&&(ve.textContent=pt),Ze=E(ue),_e=d(ue,"DIV",{class:!0,"data-svelte-h":!0}),te(_e)!=="svelte-7b2hds"&&(_e.innerHTML=vt),$e=E(ue),K&&K.l(ue),Be=E(ue),me=d(ue,"DIV",{id:!0,class:!0}),m(me).forEach(o),ue.forEach(o),Et.forEach(o),kt.forEach(o),fl.forEach(o),r=E(M),T=d(M,"DIV",{id:!0});var Dt=m(T);O=d(Dt,"DIV",{class:!0,"data-svelte-h":!0}),te(O)!=="svelte-1av3fse"&&(O.innerHTML=et),_t=E(Dt),ce=d(Dt,"DIV",{id:!0,class:!0,style:!0});var Lt=m(ce);Q=d(Lt,"DIV",{id:!0,class:!0});var fe=m(Q);ye=d(fe,"H3",{class:!0});var At=m(ye);Mt=L(At,`Plotting 
                    
                    `),Ct=L(At,Zt),Ft=L(At,`
                
                against the gain/loss (£, thousand) per capita for each co-benefit`),At.forEach(o),Ht=E(fe),Ve=d(fe,"P",{class:!0,"data-svelte-h":!0}),te(Ve)!=="svelte-1h97e3k"&&(Ve.textContent=$t),Pt=E(fe),Nt=d(fe,"BR",{}),Ot=E(fe),ee=d(fe,"DIV",{id:!0,class:!0});var Me=m(ee);Re=d(Me,"STRONG",{"data-svelte-h":!0}),te(Re)!=="svelte-1qu96kx"&&(Re.textContent=el),Bt=d(Me,"BR",{}),Rt=L(Me,`Expand for detailed explanation
                    `),tt=d(Me,"DIV",{style:!0}),m(tt).forEach(o),xt=E(Me);for(let Ce=0;Ce<W.length;Ce+=1)W[Ce].l(Me);Me.forEach(o),Ut=E(fe),ke=d(fe,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),te(ke)!=="svelte-11g4vkg"&&(ke.innerHTML=tl),fe.forEach(o),zt=E(Lt),Ie=d(Lt,"DIV",{id:!0,class:!0});var dl=m(Ie);Ee=d(dl,"DIV",{id:!0,class:!0});var hl=m(Ee);for(let Ce=0;Ce<j.length;Ce+=1)j[Ce].l(hl);hl.forEach(o),dl.forEach(o),Lt.forEach(o),Dt.forEach(o),M.forEach(o),mt=E(h),_l(Te.$$.fragment,h),this.h()},h(){u(v,"class","page-subtitle svelte-10c07ly"),u(y,"class","page-title svelte-10c07ly"),u(H,"class","definition"),u(A,"class","title-container"),u(c,"class","header-text svelte-10c07ly"),u(N,"class","header-vis svelte-10c07ly"),u(I,"class","definition-stat svelte-10c07ly"),u(B,"class","definition-stat svelte-10c07ly"),u(U,"class","definition-stat svelte-10c07ly"),u(g,"class","header-stats svelte-10c07ly"),u(s,"class","header-content svelte-10c07ly"),u(n,"class","section header svelte-10c07ly"),u(he,"class","section-header"),u(le,"class","component-title"),u($,"class","description"),u(oe,"class","aggregation-icon-container2 svelte-10c07ly"),u(q,"class","component column"),u(pe,"class","component-title"),u(ve,"class","description"),u(_e,"class","aggregation-icon-container2 svelte-10c07ly"),u(me,"id","map"),u(me,"class","svelte-10c07ly"),u(G,"class","component column"),u(z,"id","vis-block"),u(z,"class","svelte-10c07ly"),u(re,"id","overview"),u(X,"class","section"),u(O,"class","section-header"),u(ye,"class","component-title"),u(Ve,"class","explanation"),be(tt,"height","0.8em"),u(ee,"id","main-legend"),u(ee,"class","legend-box svelte-10c07ly"),u(ke,"id","se-disclaimer"),u(ke,"class","disclaimer-box svelte-10c07ly"),u(Q,"id","se-title"),u(Q,"class","svelte-10c07ly"),u(Ee,"id","multiple-plots"),u(Ee,"class","svelte-10c07ly"),u(Ie,"id","multiple-comp"),u(Ie,"class","svelte-10c07ly"),u(ce,"id","se-block"),u(ce,"class","component svelte-10c07ly"),be(ce,"margin-left","1rem"),u(T,"id","compare"),u(a,"class","page-container")},m(h,M){ml(t,h,M),V(h,e,M),V(h,a,M),i(a,n),i(n,s),i(s,c),i(c,v),i(c,_),i(c,A),i(A,y),i(y,b),i(A,w),i(A,H),i(H,P),i(s,R),i(s,N),at.m(N,null),i(s,F),i(s,g),i(g,I),st.m(I,null),i(g,C),i(g,B),it.m(B,null),i(g,Y),i(g,U),nt.m(U,null),i(a,Pe),i(a,Z),i(Z,de),i(a,we),J&&J.m(a,null),i(a,x),i(a,X),i(X,re),i(re,he),i(re,We),i(re,z),i(z,q),i(q,le),i(le,Ne),i(le,Oe),i(q,je),i(q,$),i($,Ye),ge.m($,null),i(q,ne),i(q,oe),i(q,qe),rt.m(q,null),i(z,Je),i(z,G),i(G,pe),i(pe,Ke),i(pe,Xe),i(G,Qe),i(G,ve),i(G,Ze),i(G,_e),i(G,$e),K&&K.m(G,null),i(G,Be),i(G,me),l[41](me),i(a,r),i(a,T),i(T,O),i(T,_t),i(T,ce),i(ce,Q),i(Q,ye),i(ye,Mt),i(ye,Ct),i(ye,Ft),i(Q,Ht),i(Q,Ve),i(Q,Pt),i(Q,Nt),i(Q,Ot),i(Q,ee),i(ee,Re),i(ee,Bt),i(ee,Rt),i(ee,tt),i(ee,xt);for(let S=0;S<W.length;S+=1)W[S]&&W[S].m(ee,null);i(Q,Ut),i(Q,ke),i(ce,zt),i(ce,Ie),i(Ie,Ee);for(let S=0;S<j.length;S+=1)j[S]&&j[S].m(Ee,null);l[45](a),V(h,mt,M),ml(Te,h,M),lt=!0,Gt||(ll=Hl(Z,"click",l[27]),Gt=!0)},p(h,M){if(at.p(h,M),st.p(h,M),it.p(h,M),nt.p(h,M),(!lt||M[0]&8)&&ie!==(ie=h[3]?"Switch to LAD level data":"Switch to LSOA level data")&&Ae(de,ie),h[18]?J?J.p(h,M):(J=Il(h),J.c(),J.m(a,x)):J&&(J.d(1),J=null),gt!==(gt=al(h))&&(ge.d(1),ge=gt(h),ge&&(ge.c(),ge.m($,null))),rt.p(h,M),h[16]?K?K.p(h,M):(K=Tl(h),K.c(),K.m(G,Be)):K&&(K.d(1),K=null),M[0]&67633152){xe=St(It);let S;for(S=0;S<xe.length;S+=1){const ae=Vl(h,xe,S);W[S]?W[S].p(ae,M):(W[S]=Cl(ae),W[S].c(),W[S].m(ee,null))}for(;S<W.length;S+=1)W[S].d(1);W.length=xe.length}if(M[0]&1048579){Ue=St(It);let S;for(S=0;S<Ue.length;S+=1){const ae=wl(h,Ue,S);j[S]?j[S].p(ae,M):(j[S]=Fl(ae),j[S].c(),j[S].m(Ee,null))}for(;S<j.length;S+=1)j[S].d(1);j.length=Ue.length}},i(h){lt||(gl(t.$$.fragment,h),gl(Te.$$.fragment,h),lt=!0)},o(h){bl(t.$$.fragment,h),bl(Te.$$.fragment,h),lt=!1},d(h){h&&(o(e),o(a),o(mt)),yl(t,h),at.d(),st.d(),it.d(),nt.d(),J&&J.d(),ge.d(),rt.d(),K&&K.d(),l[41](null),pl(W,h),pl(j,h),l[45](null),yl(Te,h),Gt=!1,ll()}}}let se=400;function Se(l,t){return t==="£"?`${t}${l}`:`${l} ${t}`}function ja(l,t,e){let a,n,s,c,v,p,_,A={},y={},b,w,H,P,R=!1,N,F=!1,g,I,C,B,Y,U,Pe,Z,ie,de,{data:we}=t;const x=we.SEF,X=sa.find(r=>r.id===x)?.id??x,re=ia.find(r=>r.id===x)?.label??x,he=na.find(r=>r.id===x)?.def??x,dt=ra.find(r=>r.id===x)?.description??x,We=oa.find(r=>r.id===x)?.short_units??x,z=ca.find(r=>r.id===x)?.units??x;let q,le,Ne=!1,Oe="";const je=["overview","compare"];function $(){const r=window.scrollY;e(18,Ne=r>250);for(const T of je){const O=document.getElementById(T);if(!O)continue;const et=O.getBoundingClientRect();if(et.top<=150&&et.bottom>=150){Oe!==T&&Jt.capture("section entered (sef)",{section_name:T}),Oe=T;break}}}Ul(()=>(fa(s),window.addEventListener("scroll",$),$(),()=>window.removeEventListener("scroll",$))),zl(()=>{window.removeEventListener("scroll",$)});async function Ye(){e(29,b=await ut(pa(x))),console.log("totals",b),e(2,P=await ut(va(x))),console.log("LAD data 1 ",P),e(30,w=await ut(_a(x))),console.log("by cobens",w),e(31,N=await ut(ma(x))),console.log("LADsef",N),H=await ut(ga()),console.log("per_capita_data",H),Kt.forEach(r=>{e(30,w[r]=+w[r],w)}),e(32,F=!0),da(s)}Ye().then(()=>{e(16,q=new aa(b,"LSOA",le,"val",!1,"Lookup_Value",!1)),q.initMap()});let ne=new Set;function oe(r){ne.has(r)?ne.delete(r):ne.add(r),e(19,ne=new Set(ne))}function ht(){e(3,R=!R)}function qe(){const r=El(b,T=>T.val)??0;Ll(Sl().thresholds(20).value(T=>T.val)(b),T=>T.length),e(6,c.innerHTML="",c),c?.append(Ge({height:se/1.9,width:se*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${z}`},y:{label:a===P?"No. of LADs":"No. of LSOAs",labelArrow:!1,domain:a===P?[0,100]:[0,1e4]},style:{fontSize:"16px"},marks:[ea(a,Ea({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),ot([r],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:r,label:"Average"}},tip:{format:{average:T=>`${T.toFixed(2)}`,x:!1}}}),ct({label:`${z}`,labelArrow:!1,labelAnchor:"center"})]}))}function Je(){Dl(a,O=>O.val),Ll(Sl().thresholds(20).value(O=>O.val)(a),O=>O.length);const r=Al[X],T=r?Object.keys(r).map(Number):a.filter(O=>O.SEFMAME==X).map(O=>O.SE);e(8,p.innerHTML="",p),p?.append(Ge({height:se/1.9,width:se*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:X==="Typology"?80:50,x:{domain:T,label:ha(X),tickFormat:O=>r?.[O]??O,tickRotate:X==="Typology"?-10:0},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[Da(a,ta({y:"count"},{x:"val",fill:"black",opacity:.5,tooltip:!0}))]}))}function G(){e(7,v.innerHTML="",v),v?.append(Ge({height:se*1.5,width:se*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[wt([0],{stroke:"#333",strokeWidth:1.25}),ot([0],{stroke:"#333",strokeWidth:.75}),Xt(a,{x:"val",y:r=>r.total_per_capita*1e3,fill:r=>r.total_per_capita<0?"#BD210E":"#242424",r:a===P?4:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${z}`},value:{value:r=>r.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),Vt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),ct({label:`${z}`,labelArrow:!1,labelAnchor:"center"})]}))}function pe(){e(9,_.innerHTML="",_),_?.append(Ge({height:se*1.5,width:se*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[wt([0],{stroke:"#333",strokeWidth:1.25}),ot([0],{stroke:"#333",strokeWidth:.75}),La(a,{x:"val",y:r=>r.total_per_capita*1e3,fill:r=>r.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${z}`},value:{value:r=>r.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),Vt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),ct({label:`${z}`,labelArrow:!1,labelAnchor:"center"})]}))}function Ke(){Kt.forEach(r=>{let T;T=Ge({height:se,width:se,marginLeft:r==="Excess heat"?80:60,marginTop:40,marginRight:10,marginBottom:50,x:{label:null},y:{label:null},style:{fontSize:"14px"},marks:[wt([0],{stroke:"#333",strokeWidth:1.25}),ot([0],{stroke:"#333",strokeWidth:.75}),Xt(n.filter(O=>O.co_benefit_type==r),{x:"val",y:"total",fill:ft(r),fillOpacity:.5,r:n===N?3.5:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),Vt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"top"}),ct({label:`${z}`,labelArrow:!1,labelAnchor:"center"})]}),A[r]?.append(T)})}function Xe(){Kt.forEach(r=>{let T;T=Ge({height:se,width:se,marginLeft:60,marginTop:40,marginRight:10,marginBottom:50,x:{label:null},y:{label:null},style:{fontSize:"14px"},marks:[wt([0],{stroke:"#333",strokeWidth:1.25}),ot([0],{stroke:"#333",strokeWidth:.75}),Xt(n.filter(O=>O.co_benefit_type==r),{x:"val",y:"total",fill:ft(r),fillOpacity:.5,r:n===N?3.5:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),Vt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"top"}),ct({label:`${z}`,labelArrow:!1,labelAnchor:"center"})]}),y[r]?.append(T)})}function Qe(r){Le[r?"unshift":"push"](()=>{p=r,e(8,p)})}function ve(r){Le[r?"unshift":"push"](()=>{c=r,e(6,c)})}function pt(r){Le[r?"unshift":"push"](()=>{_=r,e(9,_)})}function Ze(r){Le[r?"unshift":"push"](()=>{v=r,e(7,v)})}function _e(r){Le[r?"unshift":"push"](()=>{le=r,e(17,le)})}const vt=r=>{const T=ne.has(r.id);oe(r.id),T?Jt.capture("cobenefit closed",{cobenefit:r.label}):Jt.capture("cobenefit opened",{cobenefit:r.label})};function $e(r,T){Le[r?"unshift":"push"](()=>{y[T.id]=r,e(1,y)})}function Be(r,T){Le[r?"unshift":"push"](()=>{A[T.id]=r,e(0,A)})}function me(r){Le[r?"unshift":"push"](()=>{s=r,e(5,s)})}return l.$$set=r=>{"data"in r&&e(28,we=r.data)},l.$$.update=()=>{l.$$.dirty[0]&536870924&&e(4,a=R?b:P),l.$$.dirty[0]&1073741832|l.$$.dirty[1]&1&&(n=R?w:N),l.$$.dirty[0]&16&&e(10,g=a?(El(a,r=>r.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&16&&e(35,ie=a?Dl(a,r=>r.val):null),l.$$.dirty[1]&48&&e(11,I=ie!=null&&de?de[ie]??ie:"N/A"),l.$$.dirty[0]&16&&e(33,U=a?Zl(a,r=>r.val):-1),l.$$.dirty[0]&16|l.$$.dirty[1]&4&&e(14,Y=U!==-1&&a?a[U].Lookup_Value?.trim():"N/A"),l.$$.dirty[0]&16|l.$$.dirty[1]&4&&e(12,C=U!==-1&&a?(a[U].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&16&&e(34,Z=a?$l(a,r=>r.val):-1),l.$$.dirty[0]&16|l.$$.dirty[1]&8&&e(15,Pe=Z!==-1&&a?a[Z].Lookup_Value:"N/A"),l.$$.dirty[0]&16|l.$$.dirty[1]&8&&e(13,B=Z!==-1&&a?(a[Z].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&19|l.$$.dirty[1]&2&&(Object.values(A).forEach(r=>{r.firstChild?.remove()}),Object.values(y).forEach(r=>{r.firstChild?.remove()}),F&&a&&(Fe.includes(X)?(Je(),Xe(),pe()):(G(),Ke(),qe())))},e(36,de=Al[X]),[A,y,P,R,a,s,c,v,p,_,g,I,C,B,Y,Pe,q,le,Ne,ne,X,re,he,dt,We,z,oe,ht,we,b,w,N,F,U,Z,ie,de,Qe,ve,pt,Ze,_e,vt,$e,Be,me]}class ps extends Yl{constructor(t){super(),ql(this,t,ja,Wa,xl,{data:28},null,[-1,-1,-1])}}export{ps as component};
