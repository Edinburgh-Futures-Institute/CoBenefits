import{S as Bs,i as Os,s as Hs,d as u,v as ts,C as Fs,o as es,p as ls,x as n,w as as,b as F,c as e,F as Us,H as Oe,I as Yt,y as ss,h as m,e as r,f as p,z as x,g as S,A as ns,k as b,j as i,t as k,B as rs,N as zs,a as He,K as Rs,L as qs,G as he}from"../chunks/vqp9XDtz.js";import{N as Ws,e as is}from"../chunks/81iL96uD.js";import"../chunks/IHki7fMi.js";import"../chunks/C4dxaJ6L.js";import{ad as Ks,ae as Gs,af as Ys,P as js,ag as Xs,ah as Zs,_ as os,ai as Js,a6 as ks,aj as cs,f as Qs,ak as $s,M as tn,B as en,d as ln,e as an,g as sn,i as nn,C as rn,al as on,z as As,am as cn,x as Is,u as Ls,l as fn,q as Pe,y as dl,an as fs,w as un,ao as dn,v as us,G as vn,ac as ds}from"../chunks/YUiIis-E.js";import{b as hn}from"../chunks/5PUMWepz.js";import{p as pn}from"../chunks/BOd594CG.js";import{M as mn}from"../chunks/CAn6ybig.js";import{k as Ae,C as vs,D as bn,a as Be,l as hs,r as gn,e as _n,g as yn,S as ps,T as En,b as wn,c as Cn,f as Dn,d as ua,M as Sn,h as kn}from"../chunks/DQM_3w2p.js";import{g as Se,t as An,u as In,q as Ln,r as xn,v as Tn,s as Vn}from"../chunks/1cJRTIz9.js";import{t as da,p as Nn}from"../chunks/Cu08Svdw.js";import{p as va}from"../chunks/COcMrZFY.js";import{F as Mn}from"../chunks/CE76q_-h.js";import{c as ha,d as Pn,f as Bn,g as On,m as Hn,q as xs,s as ms}from"../chunks/BpfN2sLL.js";import{c as Fn,b as Un}from"../chunks/DKRPidJS.js";import{d as ma}from"../chunks/CHXPkKWX.js";function Ts(s,t=ha){if(typeof s[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let l=Array.from(s);const a=new Float64Array(l.length);t.length!==2&&(l=l.map(t),t=ha);const o=(y,E)=>t(l[y],l[E]);let c,f;return s=Uint32Array.from(l,(y,E)=>E),s.sort(t===ha?(y,E)=>Pn(l[y],l[E]):Bn(o)),s.forEach((y,E)=>{const w=o(y,c===void 0?y:c);w>=0?((c===void 0||w>0)&&(c=y,f=E),a[y]=f):a[y]=NaN}),a}function zn(s={},t={}){const l=Ks(t),a=Object.entries(s).map(([o,c])=>{const f=Gs(o,t);if(f==null)throw new Error(`missing channel: ${o}`);const[y,E]=Ys(f);return{key:o,input:f,output:y,setOutput:E,map:Rn(c)}});return{...js(t,(o,c)=>{const f=os(o,l),y=a.map(({input:w})=>os(o,w)),E=a.map(({setOutput:w})=>w(new Array(o.length)));for(const w of c)for(const g of f?Js(w,A=>f[A]).values():[w])a.forEach(({map:A},C)=>A.mapIndex(g,y[C],E[C]));return{data:o,facets:c}}),...Object.fromEntries(a.map(({key:o,output:c})=>[o,c]))}}function Rn(s){if(s==null)throw new Error("missing map");if(typeof s.mapIndex=="function")return s;if(typeof s.map=="function"&&Xs(s))return qn(s);if(typeof s=="function")return pa(Zs(s));switch(`${s}`.toLowerCase()){case"cumsum":return Kn;case"rank":return pa((t,l)=>Ts(t,a=>l[a]));case"quantile":return pa((t,l)=>Wn(t,a=>l[a]))}throw new Error(`invalid map: ${s}`)}function qn(s){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:s.map.bind(s)}}function Wn(s,t){const l=Fn(s,t)-1;return Ts(s,t).map(a=>a/l)}function pa(s){return{mapIndex(t,l,a){const o=s(t,l);if(o.length!==t.length)throw new Error("map function returned a mismatched length");for(let c=0,f=t.length;c<f;++c)a[t[c]]=o[c]}}}const Kn={mapIndex(s,t,l){let a=0;for(const o of s)l[o]=a+=t[o]}},Gn={ariaLabel:"tick",fill:null,stroke:"currentColor"};class Yn extends tn{constructor(t,l,a){super(t,l,a,Gn),en(this,a)}render(t,l,a,o,c){return ln("svg:g",c).call(an,this,o,c).call(this._transform,this,l).call(f=>f.selectAll().data(t).enter().append("line").call(sn,this).attr("x1",this._x1(l,a,o)).attr("x2",this._x2(l,a,o)).attr("y1",this._y1(l,a,o)).attr("y2",this._y2(l,a,o)).call(nn,this,a).call(rn,this,a,c)).node()}}class jn extends Yn{constructor(t,l={}){const{x:a,y:o,inset:c=0,insetRight:f=c,insetLeft:y=c}=l;super(t,{y:{value:o,scale:"y"},x:{value:a,scale:"x",type:"band",optional:!0}},l),this.insetRight=cs(f),this.insetLeft=cs(y)}_transform(t,l,{y:a}){t.call(Qs,l,{y:a},0,$s)}_x1({x:t},{x:l},{marginLeft:a}){const{insetLeft:o}=this;return l&&t?c=>l[c]+o:a+o}_x2({x:t},{x:l},{width:a,marginRight:o}){const{insetRight:c}=this;return l&&t?f=>l[f]+t.bandwidth()-c:a-o-c}_y1(t,{y:l}){return a=>l[a]}_y2(t,{y:l}){return a=>l[a]}}function Xn(s,{y:t=ks,...l}={}){return new jn(s,{...l,y:t})}function Zn(s,{y:t=ks,x:l=null,r:a,fill:o="#ccc",fillOpacity:c,stroke:f="currentColor",strokeOpacity:y,strokeWidth:E=2,sort:w,...g}={}){const A=l!=null?As:cn;return on(Ls(s,A({y1:Vs,y2:Ns},{x:l,y:t,stroke:f,strokeOpacity:y,...g})),Is(s,A({y1:"p25",y2:"p75"},{x:l,y:t,fill:o,fillOpacity:c,...g})),Xn(s,A({y:"p50"},{x:l,y:t,stroke:f,strokeOpacity:y,strokeWidth:E,sort:w,...g})),ma(s,zn({y:Jn},{x:l,y:t,z:l,r:a,stroke:f,strokeOpacity:y,...g})))}function Jn(s){const t=Vs(s),l=Ns(s);return s.map(a=>a<t||a>l?a:NaN)}function Vs(s){const t=Ms(s)*2.5-Ps(s)*1.5;return On(s,l=>l>=t?l:NaN)}function Ns(s){const t=Ps(s)*2.5-Ms(s)*1.5;return Hn(s,l=>l<=t?l:NaN)}function Ms(s){return xs(s,.25)}function Ps(s){return xs(s,.75)}function bs(s,t,l){const a=s.slice();return a[47]=t[l],a[48]=t,a[49]=l,a}function gs(s){let t,l,a=s[4].toLocaleString()+"",o;return{c(){t=i("span"),l=k("£"),o=k(a),this.h()},l(c){t=r(c,"SPAN",{class:!0});var f=p(t);l=S(f,"£"),o=S(f,a),f.forEach(u),this.h()},h(){n(t,"class","waffle-big svelte-b9v0tr")},m(c,f){F(c,t,f),e(t,l),e(t,o)},p(c,f){f[0]&16&&a!==(a=c[4].toLocaleString()+"")&&He(o,a)},d(c){c&&u(t)}}}function Qn(s){let t,l="National costs";return{c(){t=i("div"),t.textContent=l,this.h()},l(a){t=r(a,"DIV",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-o12owz"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function $n(s){let t,l="National benefits";return{c(){t=i("div"),t.textContent=l,this.h()},l(a){t=r(a,"DIV",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-10ytukz"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function _s(s){let t,l,a=s[6].toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",o;return{c(){t=i("span"),l=k("£"),o=k(a),this.h()},l(c){t=r(c,"SPAN",{class:!0});var f=p(t);l=S(f,"£"),o=S(f,a),f.forEach(u),this.h()},h(){n(t,"class","waffle-big svelte-b9v0tr")},m(c,f){F(c,t,f),e(t,l),e(t,o)},p(c,f){f[0]&64&&a!==(a=c[6].toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&He(o,a)},d(c){c&&u(t)}}}function tr(s){let t,l="Per capita costs";return{c(){t=i("div"),t.textContent=l,this.h()},l(a){t=r(a,"DIV",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-6pmcl0"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function er(s){let t,l="Per capita benefits";return{c(){t=i("div"),t.textContent=l,this.h()},l(a){t=r(a,"DIV",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-g1rvwk"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function ys(s){let t,l,a=(s[4]/s[5]*100).toFixed(2)+"",o,c,f,y="%";return{c(){t=i("div"),l=i("span"),o=k(a),c=b(),f=i("span"),f.textContent=y,this.h()},l(E){t=r(E,"DIV",{class:!0});var w=p(t);l=r(w,"SPAN",{class:!0});var g=p(l);o=S(g,a),g.forEach(u),c=m(w),f=r(w,"SPAN",{class:!0,"data-svelte-h":!0}),x(f)!=="svelte-jxggz7"&&(f.textContent=y),w.forEach(u),this.h()},h(){n(l,"class","waffle-big svelte-b9v0tr"),n(f,"class","small svelte-b9v0tr"),n(t,"class","waffle-value svelte-b9v0tr")},m(E,w){F(E,t,w),e(t,l),e(l,o),e(t,c),e(t,f)},p(E,w){w[0]&48&&a!==(a=(E[4]/E[5]*100).toFixed(2)+"")&&He(o,a)},d(E){E&&u(t)}}}function Es(s){let t,l,a,o,c,f,y,E,w,g=Ss(s[10])+"",A,C=s[4]&&ws(s);return{c(){t=i("div"),l=i("div"),a=i("img"),c=b(),f=i("span"),y=k(s[15]),E=b(),C&&C.c(),w=k(`
                    >> `),A=k(g),this.h()},l(P){t=r(P,"DIV",{class:!0});var N=p(t);l=r(N,"DIV",{class:!0});var M=p(l);a=r(M,"IMG",{src:!0,alt:!0,class:!0}),c=m(M),f=r(M,"SPAN",{class:!0});var V=p(f);y=S(V,s[15]),E=m(V),C&&C.l(V),w=S(V,`
                    >> `),A=S(V,g),V.forEach(u),M.forEach(u),N.forEach(u),this.h()},h(){Oe(a.src,o=s[17])||n(a,"src",o),n(a,"alt","Icon"),n(a,"class","mini-heading-icon"),n(f,"class","mini-header-text"),n(l,"class","mini-header-content"),n(t,"class","mini-header")},m(P,N){F(P,t,N),e(t,l),e(l,a),e(l,c),e(l,f),e(f,y),e(f,E),C&&C.m(f,null),e(f,w),e(f,A)},p(P,N){P[4]?C?C.p(P,N):(C=ws(P),C.c(),C.m(f,w)):C&&(C.d(1),C=null),N[0]&1024&&g!==(g=Ss(P[10])+"")&&He(A,g)},d(P){P&&u(t),C&&C.d()}}}function ws(s){let t,l,a,o;return{c(){t=i("span"),l=k("(UK total: £"),a=k(s[4]),o=k(" billion)"),this.h()},l(c){t=r(c,"SPAN",{class:!0});var f=p(t);l=S(f,"(UK total: £"),a=S(f,s[4]),o=S(f," billion)"),f.forEach(u),this.h()},h(){n(t,"class","mini-header-value")},m(c,f){F(c,t,f),e(t,l),e(t,a),e(t,o)},p(c,f){f[0]&16&&He(a,c[4])},d(c){c&&u(t)}}}function lr(s){let t,l=`Each bar shows the predicted total costs in billion pounds for each
                            five-year periods for all of UK.`;return{c(){t=i("p"),t.textContent=l,this.h()},l(a){t=r(a,"P",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-1v08yjw"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function ar(s){let t,l=`Each bar shows the predicted total benefits in billion pounds for each
                            five-year periods for all of UK.`;return{c(){t=i("p"),t.textContent=l,this.h()},l(a){t=r(a,"P",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-3v1xr6"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function sr(s){let t,l=`The x-axis represents the value of costs, while the y-axis shows the
                            number of data zones falling within each benefit range.`;return{c(){t=i("p"),t.textContent=l,this.h()},l(a){t=r(a,"P",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-92e6ig"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function nr(s){let t,l=`The x-axis represents the predicted value of benefits, measured in
                            billion pounds, while the y-axis shows the number of data zones falling within each benefit
                            range.`;return{c(){t=i("p"),t.textContent=l,this.h()},l(a){t=r(a,"P",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-flkfm5"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function Cs(s){let t,l,a=s[7].legend().outerHTML+"";return{c(){t=i("div"),l=new qs(!1),this.h()},l(o){t=r(o,"DIV",{id:!0});var c=p(t);l=Rs(c,!1),c.forEach(u),this.h()},h(){l.a=null,n(t,"id","legend")},m(o,c){F(o,t,c),l.m(a,t)},p(o,c){c[0]&128&&a!==(a=o[7].legend().outerHTML+"")&&l.p(a)},d(o){o&&u(t)}}}function Ds(s){let t,l,a=s[47].label+"",o,c,f,y=s[47].def+"",E,w,g,A=s[47],C;const P=()=>s[28](g,A),N=()=>s[28](null,A);return{c(){t=i("div"),l=i("h3"),o=k(a),c=b(),f=i("p"),E=k(y),w=b(),g=i("div"),C=b(),this.h()},l(M){t=r(M,"DIV",{class:!0});var V=p(t);l=r(V,"H3",{class:!0});var rt=p(l);o=S(rt,a),rt.forEach(u),c=m(V),f=r(V,"P",{class:!0});var ot=p(f);E=S(ot,y),ot.forEach(u),w=m(V),g=r(V,"DIV",{class:!0}),p(g).forEach(u),C=m(V),V.forEach(u),this.h()},h(){n(l,"class","component-chart-title svelte-b9v0tr"),n(f,"class","component-chart-caption svelte-b9v0tr"),n(g,"class","plot"),n(t,"class","plot-container svelte-b9v0tr")},m(M,V){F(M,t,V),e(t,l),e(l,o),e(t,c),e(t,f),e(f,E),e(t,w),e(t,g),P(),e(t,C)},p(M,V){s=M,A!==s[47]&&(N(),A=s[47],P())},d(M){M&&u(t),N()}}}function rr(s){let t,l,a,o,c,f,y,E="Co-Benefit Report",w,g,A,C,P,N,M,V,rt,ot,At,pe,ct,me,jt,U,It,lt,at,dt,G,Xt,Ie,z,st,bt,Fe="billion",Le,xe,ft,vt,gt,Ue,Te,_t,Ve,Ne,h,v,I,R,q,it,_,W="Contribution to national benefits",Zt,ut,D="Share of total benefits",tt,Lt,be,ge,vl,ze,xt,Tt,Jt,ba='<p class="section-subtitle">Overview</p>',hl,yt,T,Vt,pl,Qt,ga=s[15].toLowerCase()+"",ml,bl,gl,Re,$t,_a=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${da}" alt="icon"/> <span class="tooltip-text">This chart uses total values. i.e. shows the total benefit/cost for all of the UK.</span></div>`,_l,_e,yl,El,wl,Et,Cl,te,ya=s[15].toLowerCase()+"",Dl,Sl,ee,Ea=`data zones
                                <span class="tooltip-txt">Data zones are standard statitical geographies in UK that  comprise between 400 and 1200 households.</span>`,kl,qe,le,wa=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${da}" alt="icon"/> <span class="tooltip-text">This chart uses total values. i.e. shows the total benefit/cost for all of the UK.</span></div>`,Al,Nt,Ca="",Il,Ll,xl,Q,Mt,Tl,ae,Da=s[15].toLowerCase()+"",Vl,Nl,Ml,se,Sa=`Each local authority is coloured by the predicted per capita benefits/cost,
                        showing regional variation in how benefits/cost are distributed. Scroll for zooming in and
                        out.`,Pl,ne,ka=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${va}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,Bl,We,wt,Aa="",Ol,Pt,re,Ia='<p class="section-subtitle">Socio-economic factors</p>',Hl,ht,nt,Bt,Fl,ie,La=s[15]?.toLowerCase()+"",Ul,zl,Rl,oe,xa=`Each chart shows how benefits or costs are distributed across UK local
                        authorities in correlation with a specific household social-economic factor.`,ql,$,ce,Ta=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${va}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,Wl,fe,Va="Legend:",Kl,Gl,Yl,ye,Na="The scatter points are coloured by nation. Click the buttons below to filter.",jl,H,Xl,Zl,Ot,Jl,Ql,Ht,$l,ta,Ft,ea,la,Ut,aa,sa,na,ra,zt,Ma="Reset",ia,Rt,Pa=`<p style="margin: 0 0 0.5rem 0;"><strong>Discrete scales:</strong> The first set of
                            socio-economic factors are using categorical values where the x-axis is non-linear.</p> <p style="margin: 0 0 0.5rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots
                            represent modelled associations and should not be interpreted as direct causal
                            relationships.</p> <p style="margin: 0 0 0.5rem 0;"><strong>Aggregated data:</strong> Each socio-economic factor
                            for a given local authority is aggregated from the data zones within its boundary.</p>`,oa,ue,qt,Ke,de,Wt,ca,Ba;t=new Ws({});let Y=s[4]&&gs(s);function Oa(d,L){return d[4]>0?$n:Qn}let Ge=Oa(s),Ct=Ge(s),j=s[4]&&_s(s);function Ha(d,L){return d[4]>0?er:tr}let Ye=Ha(s),Dt=Ye(s),X=s[4]&&ys(s),Z=s[9]&&Es(s);function Fa(d,L){return d[4]>0?ar:lr}let je=Fa(s),St=je(s);function Ua(d,L){return d[4]>0?nr:sr}let Xe=Ua(s),kt=Xe(s),J=s[7]&&Cs(s),Ee=is(ps),K=[];for(let d=0;d<Ee.length;d+=1)K[d]=Ds(bs(s,Ee,d));return de=new Mn({}),{c(){ns(t.$$.fragment),l=b(),a=i("div"),o=i("div"),c=i("div"),f=i("div"),y=i("p"),y.textContent=E,w=b(),g=i("div"),A=i("h1"),C=i("img"),N=b(),M=i("div"),V=b(),rt=k(s[15]),ot=b(),At=i("div"),pe=b(),ct=i("p"),me=k(s[16]),jt=b(),U=i("div"),It=i("div"),lt=i("div"),at=i("div"),dt=i("div"),G=i("img"),Ie=b(),z=i("div"),Y&&Y.c(),st=b(),bt=i("span"),bt.textContent=Fe,Le=b(),Ct.c(),xe=b(),ft=i("div"),vt=i("div"),gt=i("img"),Te=b(),_t=i("div"),j&&j.c(),Ve=b(),Dt.c(),Ne=b(),h=i("div"),v=i("div"),I=i("img"),q=b(),X&&X.c(),it=b(),_=i("div"),_.textContent=W,Zt=b(),ut=i("h3"),ut.textContent=D,tt=b(),Lt=i("div"),be=b(),ge=i("div"),vl=b(),Z&&Z.c(),ze=b(),xt=i("div"),Tt=i("div"),Jt=i("div"),Jt.innerHTML=ba,hl=b(),yt=i("div"),T=i("div"),Vt=i("h3"),pl=k("Total "),Qt=i("span"),ml=k(ga),bl=k(" over time 2025-2050"),gl=b(),St.c(),Re=b(),$t=i("div"),$t.innerHTML=_a,_l=b(),_e=i("div"),yl=b(),El=i("br"),wl=b(),Et=i("h3"),Cl=k("Distribution of "),te=i("span"),Dl=k(ya),Sl=k(` across UK
                        

                        `),ee=i("span"),ee.innerHTML=Ea,kl=b(),kt.c(),qe=b(),le=i("div"),le.innerHTML=wa,Al=b(),Nt=i("div"),Nt.innerHTML=Ca,Il=b(),Ll=i("br"),xl=b(),Q=i("div"),Mt=i("h3"),Tl=k("Per Capita "),ae=i("span"),Vl=k(Da),Nl=k(" by UK local authorities"),Ml=b(),se=i("p"),se.textContent=Sa,Pl=b(),ne=i("div"),ne.innerHTML=ka,Bl=b(),J&&J.c(),We=b(),wt=i("div"),wt.innerHTML=Aa,Ol=b(),Pt=i("div"),re=i("div"),re.innerHTML=Ia,Hl=b(),ht=i("div"),nt=i("div"),Bt=i("h3"),Fl=k("How "),ie=i("span"),Ul=k(La),zl=k(` vary by household social-economic
                        factors`),Rl=b(),oe=i("p"),oe.textContent=xa,ql=b(),$=i("div"),ce=i("div"),ce.innerHTML=Ta,Wl=b(),fe=i("strong"),fe.textContent=Va,Kl=b(),Gl=i("br"),Yl=b(),ye=i("span"),ye.textContent=Na,jl=b(),H=i("div"),Xl=i("br"),Zl=b(),Ot=i("button"),Jl=k("Scotland"),Ql=b(),Ht=i("button"),$l=k("Northern Ireland"),ta=b(),Ft=i("button"),ea=k("England"),la=b(),Ut=i("button"),aa=k("Wales"),sa=b(),na=i("br"),ra=b(),zt=i("button"),zt.textContent=Ma,ia=b(),Rt=i("div"),Rt.innerHTML=Pa,oa=b(),ue=i("div"),qt=i("div");for(let d=0;d<K.length;d+=1)K[d].c();Ke=b(),ns(de.$$.fragment),this.h()},l(d){ss(t.$$.fragment,d),l=m(d),a=r(d,"DIV",{class:!0});var L=p(a);o=r(L,"DIV",{class:!0});var B=p(o);c=r(B,"DIV",{class:!0});var ve=p(c);f=r(ve,"DIV",{class:!0});var Ze=p(f);y=r(Ze,"P",{class:!0,"data-svelte-h":!0}),x(y)!=="svelte-1flv0v9"&&(y.textContent=E),w=m(Ze),g=r(Ze,"DIV",{class:!0});var we=p(g);A=r(we,"H1",{class:!0});var Ce=p(A);C=r(Ce,"IMG",{src:!0,alt:!0,class:!0}),N=m(Ce),M=r(Ce,"DIV",{style:!0}),p(M).forEach(u),V=m(Ce),rt=S(Ce,s[15]),Ce.forEach(u),ot=m(we),At=r(we,"DIV",{style:!0}),p(At).forEach(u),pe=m(we),ct=r(we,"P",{class:!0});var za=p(ct);me=S(za,s[16]),za.forEach(u),we.forEach(u),Ze.forEach(u),jt=m(ve),U=r(ve,"DIV",{class:!0});var Kt=p(U);It=r(Kt,"DIV",{class:!0});var Ra=p(It);lt=r(Ra,"DIV",{class:!0});var De=p(lt);at=r(De,"DIV",{class:!0});var Je=p(at);dt=r(Je,"DIV",{class:!0});var Qe=p(dt);G=r(Qe,"IMG",{class:!0,src:!0,alt:!0}),Ie=m(Qe),z=r(Qe,"DIV",{class:!0});var $e=p(z);Y&&Y.l($e),st=m($e),bt=r($e,"SPAN",{class:!0,"data-svelte-h":!0}),x(bt)!=="svelte-tlhydp"&&(bt.textContent=Fe),$e.forEach(u),Qe.forEach(u),Le=m(Je),Ct.l(Je),Je.forEach(u),xe=m(De),ft=r(De,"DIV",{class:!0});var tl=p(ft);vt=r(tl,"DIV",{class:!0});var el=p(vt);gt=r(el,"IMG",{class:!0,src:!0,alt:!0}),Te=m(el),_t=r(el,"DIV",{class:!0});var qa=p(_t);j&&j.l(qa),qa.forEach(u),el.forEach(u),Ve=m(tl),Dt.l(tl),tl.forEach(u),Ne=m(De),h=r(De,"DIV",{class:!0});var ll=p(h);v=r(ll,"DIV",{class:!0});var al=p(v);I=r(al,"IMG",{class:!0,src:!0,alt:!0}),q=m(al),X&&X.l(al),al.forEach(u),it=m(ll),_=r(ll,"DIV",{class:!0,"data-svelte-h":!0}),x(_)!=="svelte-1v3rfza"&&(_.textContent=W),ll.forEach(u),De.forEach(u),Ra.forEach(u),Zt=m(Kt),ut=r(Kt,"H3",{class:!0,"data-svelte-h":!0}),x(ut)!=="svelte-1vkchgj"&&(ut.textContent=D),tt=m(Kt),Lt=r(Kt,"DIV",{class:!0}),p(Lt).forEach(u),be=m(Kt),ge=r(Kt,"DIV",{class:!0}),p(ge).forEach(u),Kt.forEach(u),ve.forEach(u),B.forEach(u),vl=m(L),Z&&Z.l(L),ze=m(L),xt=r(L,"DIV",{class:!0});var sl=p(xt);Tt=r(sl,"DIV",{id:!0});var nl=p(Tt);Jt=r(nl,"DIV",{class:!0,"data-svelte-h":!0}),x(Jt)!=="svelte-ll1i43"&&(Jt.innerHTML=ba),hl=m(nl),yt=r(nl,"DIV",{id:!0,class:!0});var rl=p(yt);T=r(rl,"DIV",{class:!0});var O=p(T);Vt=r(O,"H3",{class:!0});var il=p(Vt);pl=S(il,"Total "),Qt=r(il,"SPAN",{style:!0});var Wa=p(Qt);ml=S(Wa,ga),Wa.forEach(u),bl=S(il," over time 2025-2050"),il.forEach(u),gl=m(O),St.l(O),Re=m(O),$t=r(O,"DIV",{class:!0,"data-svelte-h":!0}),x($t)!=="svelte-1yzemw8"&&($t.innerHTML=_a),_l=m(O),_e=r(O,"DIV",{class:!0}),p(_e).forEach(u),yl=m(O),El=r(O,"BR",{}),wl=m(O),Et=r(O,"H3",{class:!0});var Me=p(Et);Cl=S(Me,"Distribution of "),te=r(Me,"SPAN",{style:!0});var Ka=p(te);Dl=S(Ka,ya),Ka.forEach(u),Sl=S(Me,` across UK
                        

                        `),ee=r(Me,"SPAN",{class:!0,"data-svelte-h":!0}),x(ee)!=="svelte-7glovi"&&(ee.innerHTML=Ea),Me.forEach(u),kl=m(O),kt.l(O),qe=m(O),le=r(O,"DIV",{class:!0,"data-svelte-h":!0}),x(le)!=="svelte-1yzemw8"&&(le.innerHTML=wa),Al=m(O),Nt=r(O,"DIV",{class:!0,"data-svelte-h":!0}),x(Nt)!=="svelte-17463th"&&(Nt.innerHTML=Ca),Il=m(O),Ll=r(O,"BR",{}),O.forEach(u),xl=m(rl),Q=r(rl,"DIV",{class:!0});var pt=p(Q);Mt=r(pt,"H3",{class:!0});var ol=p(Mt);Tl=S(ol,"Per Capita "),ae=r(ol,"SPAN",{style:!0});var Ga=p(ae);Vl=S(Ga,Da),Ga.forEach(u),Nl=S(ol," by UK local authorities"),ol.forEach(u),Ml=m(pt),se=r(pt,"P",{class:!0,"data-svelte-h":!0}),x(se)!=="svelte-32j67s"&&(se.textContent=Sa),Pl=m(pt),ne=r(pt,"DIV",{class:!0,"data-svelte-h":!0}),x(ne)!=="svelte-1pbiq4x"&&(ne.innerHTML=ka),Bl=m(pt),J&&J.l(pt),We=m(pt),wt=r(pt,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),x(wt)!=="svelte-1bex1ev"&&(wt.innerHTML=Aa),pt.forEach(u),rl.forEach(u),nl.forEach(u),Ol=m(sl),Pt=r(sl,"DIV",{id:!0});var cl=p(Pt);re=r(cl,"DIV",{class:!0,"data-svelte-h":!0}),x(re)!=="svelte-1l51yw7"&&(re.innerHTML=Ia),Hl=m(cl),ht=r(cl,"DIV",{id:!0,class:!0,style:!0});var fl=p(ht);nt=r(fl,"DIV",{id:!0,class:!0});var Gt=p(nt);Bt=r(Gt,"H3",{class:!0});var ul=p(Bt);Fl=S(ul,"How "),ie=r(ul,"SPAN",{style:!0});var Ya=p(ie);Ul=S(Ya,La),Ya.forEach(u),zl=S(ul,` vary by household social-economic
                        factors`),ul.forEach(u),Rl=m(Gt),oe=r(Gt,"P",{class:!0,"data-svelte-h":!0}),x(oe)!=="svelte-r5sqj1"&&(oe.textContent=xa),ql=m(Gt),$=r(Gt,"DIV",{id:!0,class:!0});var mt=p($);ce=r(mt,"DIV",{class:!0,"data-svelte-h":!0}),x(ce)!=="svelte-131efpe"&&(ce.innerHTML=Ta),Wl=m(mt),fe=r(mt,"STRONG",{style:!0,"data-svelte-h":!0}),x(fe)!=="svelte-1s0qlts"&&(fe.textContent=Va),Kl=m(mt),Gl=r(mt,"BR",{}),Yl=m(mt),ye=r(mt,"SPAN",{"data-svelte-h":!0}),x(ye)!=="svelte-av8zq9"&&(ye.textContent=Na),jl=m(mt),H=r(mt,"DIV",{class:!0});var et=p(H);Xl=r(et,"BR",{}),Zl=m(et),Ot=r(et,"BUTTON",{class:!0,"data-nation":!0,style:!0});var ja=p(Ot);Jl=S(ja,"Scotland"),ja.forEach(u),Ql=m(et),Ht=r(et,"BUTTON",{class:!0,"data-nation":!0,style:!0});var Xa=p(Ht);$l=S(Xa,"Northern Ireland"),Xa.forEach(u),ta=m(et),Ft=r(et,"BUTTON",{class:!0,"data-nation":!0,style:!0});var Za=p(Ft);ea=S(Za,"England"),Za.forEach(u),la=m(et),Ut=r(et,"BUTTON",{class:!0,"data-nation":!0,style:!0});var Ja=p(Ut);aa=S(Ja,"Wales"),Ja.forEach(u),sa=m(et),na=r(et,"BR",{}),ra=m(et),zt=r(et,"BUTTON",{class:!0,"data-svelte-h":!0}),x(zt)!=="svelte-2t5u5r"&&(zt.textContent=Ma),et.forEach(u),mt.forEach(u),ia=m(Gt),Rt=r(Gt,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),x(Rt)!=="svelte-p1d3q2"&&(Rt.innerHTML=Pa),Gt.forEach(u),oa=m(fl),ue=r(fl,"DIV",{id:!0,class:!0});var Qa=p(ue);qt=r(Qa,"DIV",{id:!0,class:!0});var $a=p(qt);for(let fa=0;fa<K.length;fa+=1)K[fa].l($a);$a.forEach(u),Qa.forEach(u),fl.forEach(u),cl.forEach(u),sl.forEach(u),L.forEach(u),Ke=m(d),ss(de.$$.fragment,d),this.h()},h(){n(y,"class","page-subtitle svelte-b9v0tr"),Oe(C.src,P=s[17])||n(C,"src",P),n(C,"alt","Icon"),n(C,"class","heading-icon svelte-b9v0tr"),Yt(M,"margin-top","10px"),n(A,"class","page-title svelte-b9v0tr"),Yt(At,"margin-top","14px"),n(ct,"class","definition svelte-b9v0tr"),n(g,"class","title-container"),n(f,"class","header-text svelte-b9v0tr"),n(G,"class","aggregation-icon-small svelte-b9v0tr"),Oe(G.src,Xt=da)||n(G,"src",Xt),n(G,"alt","icon"),n(bt,"class","small svelte-b9v0tr"),n(z,"class","waffle-value svelte-b9v0tr"),n(dt,"class","waffle-value-container svelte-b9v0tr"),n(at,"class","waffle-stat svelte-b9v0tr"),n(gt,"class","aggregation-icon-small svelte-b9v0tr"),Oe(gt.src,Ue=va)||n(gt,"src",Ue),n(gt,"alt","icon"),n(_t,"class","waffle-value svelte-b9v0tr"),n(vt,"class","waffle-value-container svelte-b9v0tr"),n(ft,"class","waffle-stat svelte-b9v0tr"),n(I,"class","aggregation-icon-small svelte-b9v0tr"),Oe(I.src,R=Nn)||n(I,"src",R),n(I,"alt","icon"),n(v,"class","waffle-value-container svelte-b9v0tr"),n(_,"class","waffle-caption svelte-b9v0tr"),n(h,"class","waffle-stat svelte-b9v0tr"),n(lt,"class","waffle-stats svelte-b9v0tr"),n(It,"class","waffle-label svelte-b9v0tr"),n(ut,"class","component-title"),n(Lt,"class","waffle-el"),n(ge,"class","waffle-bg svelte-b9v0tr"),n(U,"class","header-waffle-wrapper svelte-b9v0tr"),n(c,"class","header-content svelte-b9v0tr"),n(o,"class","section header svelte-b9v0tr"),n(Jt,"class","section-header"),n(Qt,"style",s[13]),n(Vt,"class","component-title"),n($t,"class","aggregation-icon-container"),n(_e,"class","plot-bar svelte-b9v0tr"),n(te,"style",s[13]),n(ee,"class","tooltip-term"),n(Et,"class","component-title"),n(le,"class","aggregation-icon-container"),n(Nt,"class","plot-bar svelte-b9v0tr"),n(T,"class","component singlevis"),n(ae,"style",s[13]),n(Mt,"class","component-title"),n(se,"class","description svelte-b9v0tr"),n(ne,"class","aggregation-icon-container2 svelte-b9v0tr"),n(wt,"id","map"),n(wt,"class","svelte-b9v0tr"),n(Q,"class","component column"),n(yt,"id","vis-block"),n(yt,"class","svelte-b9v0tr"),n(Tt,"id","overview"),n(re,"class","section-header"),n(ie,"style",s[13]),n(Bt,"class","component-title"),n(oe,"class","explanation"),n(ce,"class","aggregation-icon-container2 svelte-b9v0tr"),Yt(fe,"margin-bottom","0.8rem"),n(Ot,"class","nation-button svelte-b9v0tr"),n(Ot,"data-nation","S"),Yt(Ot,"background-color",Ae(s[14])[0]),n(Ht,"class","nation-button svelte-b9v0tr"),n(Ht,"data-nation","N"),Yt(Ht,"background-color",Ae(s[14])[1]),n(Ft,"class","nation-button svelte-b9v0tr"),n(Ft,"data-nation","E"),Yt(Ft,"background-color",Ae(s[14])[2]),n(Ut,"class","nation-button svelte-b9v0tr"),n(Ut,"data-nation","W"),Yt(Ut,"background-color",Ae(s[14])[3]),n(zt,"class","reset-button svelte-b9v0tr"),n(H,"class","legend-buttons svelte-b9v0tr"),n($,"id","se-legend"),n($,"class","legend-box svelte-b9v0tr"),n(Rt,"id","se-disclaimer"),n(Rt,"class","disclaimer-box svelte-b9v0tr"),n(nt,"id","se-title"),n(nt,"class","svelte-b9v0tr"),n(qt,"id","multiple-plots"),n(qt,"class","svelte-b9v0tr"),n(ue,"id","multiple-comp"),n(ue,"class","svelte-b9v0tr"),n(ht,"id","se-block"),n(ht,"class","component svelte-b9v0tr"),Yt(ht,"margin-left","1rem"),n(Pt,"id","compare"),n(xt,"class","section"),n(a,"class","page-container")},m(d,L){as(t,d,L),F(d,l,L),F(d,a,L),e(a,o),e(o,c),e(c,f),e(f,y),e(f,w),e(f,g),e(g,A),e(A,C),e(A,N),e(A,M),e(A,V),e(A,rt),e(g,ot),e(g,At),e(g,pe),e(g,ct),e(ct,me),e(c,jt),e(c,U),e(U,It),e(It,lt),e(lt,at),e(at,dt),e(dt,G),e(dt,Ie),e(dt,z),Y&&Y.m(z,null),e(z,st),e(z,bt),e(at,Le),Ct.m(at,null),e(lt,xe),e(lt,ft),e(ft,vt),e(vt,gt),e(vt,Te),e(vt,_t),j&&j.m(_t,null),e(ft,Ve),Dt.m(ft,null),e(lt,Ne),e(lt,h),e(h,v),e(v,I),e(v,q),X&&X.m(v,null),e(h,it),e(h,_),e(U,Zt),e(U,ut),e(U,tt),e(U,Lt),s[23](Lt),e(U,be),e(U,ge),s[24](ge),e(a,vl),Z&&Z.m(a,null),e(a,ze),e(a,xt),e(xt,Tt),e(Tt,Jt),e(Tt,hl),e(Tt,yt),e(yt,T),e(T,Vt),e(Vt,pl),e(Vt,Qt),e(Qt,ml),e(Vt,bl),e(T,gl),St.m(T,null),e(T,Re),e(T,$t),e(T,_l),e(T,_e),s[25](_e),e(T,yl),e(T,El),e(T,wl),e(T,Et),e(Et,Cl),e(Et,te),e(te,Dl),e(Et,Sl),e(Et,ee),e(T,kl),kt.m(T,null),e(T,qe),e(T,le),e(T,Al),e(T,Nt),s[26](Nt),e(T,Il),e(T,Ll),e(yt,xl),e(yt,Q),e(Q,Mt),e(Mt,Tl),e(Mt,ae),e(ae,Vl),e(Mt,Nl),e(Q,Ml),e(Q,se),e(Q,Pl),e(Q,ne),e(Q,Bl),J&&J.m(Q,null),e(Q,We),e(Q,wt),s[27](wt),e(xt,Ol),e(xt,Pt),e(Pt,re),e(Pt,Hl),e(Pt,ht),e(ht,nt),e(nt,Bt),e(Bt,Fl),e(Bt,ie),e(ie,Ul),e(Bt,zl),e(nt,Rl),e(nt,oe),e(nt,ql),e(nt,$),e($,ce),e($,Wl),e($,fe),e($,Kl),e($,Gl),e($,Yl),e($,ye),e($,jl),e($,H),e(H,Xl),e(H,Zl),e(H,Ot),e(Ot,Jl),e(H,Ql),e(H,Ht),e(Ht,$l),e(H,ta),e(H,Ft),e(Ft,ea),e(H,la),e(H,Ut),e(Ut,aa),e(H,sa),e(H,na),e(H,ra),e(H,zt),e(nt,ia),e(nt,Rt),e(ht,oa),e(ht,ue),e(ue,qt);for(let B=0;B<K.length;B+=1)K[B]&&K[B].m(qt,null);s[29](a),F(d,Ke,L),as(de,d,L),Wt=!0,ca||(Ba=Us(zt,"click",s[18]),ca=!0)},p(d,L){if(d[4]?Y?Y.p(d,L):(Y=gs(d),Y.c(),Y.m(z,st)):Y&&(Y.d(1),Y=null),Ge!==(Ge=Oa(d))&&(Ct.d(1),Ct=Ge(d),Ct&&(Ct.c(),Ct.m(at,null))),d[4]?j?j.p(d,L):(j=_s(d),j.c(),j.m(_t,null)):j&&(j.d(1),j=null),Ye!==(Ye=Ha(d))&&(Dt.d(1),Dt=Ye(d),Dt&&(Dt.c(),Dt.m(ft,null))),d[4]?X?X.p(d,L):(X=ys(d),X.c(),X.m(v,null)):X&&(X.d(1),X=null),d[9]?Z?Z.p(d,L):(Z=Es(d),Z.c(),Z.m(a,ze)):Z&&(Z.d(1),Z=null),(!Wt||L[0]&8192)&&n(Qt,"style",d[13]),je!==(je=Fa(d))&&(St.d(1),St=je(d),St&&(St.c(),St.m(T,Re))),(!Wt||L[0]&8192)&&n(te,"style",d[13]),Xe!==(Xe=Ua(d))&&(kt.d(1),kt=Xe(d),kt&&(kt.c(),kt.m(T,qe))),(!Wt||L[0]&8192)&&n(ae,"style",d[13]),d[7]?J?J.p(d,L):(J=Cs(d),J.c(),J.m(Q,We)):J&&(J.d(1),J=null),(!Wt||L[0]&8192)&&n(ie,"style",d[13]),L[0]&2){Ee=is(ps);let B;for(B=0;B<Ee.length;B+=1){const ve=bs(d,Ee,B);K[B]?K[B].p(ve,L):(K[B]=Ds(ve),K[B].c(),K[B].m(qt,null))}for(;B<K.length;B+=1)K[B].d(1);K.length=Ee.length}},i(d){Wt||(ls(t.$$.fragment,d),ls(de.$$.fragment,d),Wt=!0)},o(d){es(t.$$.fragment,d),es(de.$$.fragment,d),Wt=!1},d(d){d&&(u(l),u(a),u(Ke)),ts(t,d),Y&&Y.d(),Ct.d(),j&&j.d(),Dt.d(),X&&X.d(),s[23](null),s[24](null),Z&&Z.d(),St.d(),s[25](null),kt.d(),s[26](null),J&&J.d(),s[27](null),Fs(K,d),s[29](null),ts(de,d),ca=!1,Ba()}}}let ke=400;function Ss(s){return{overview:"Overview",compare:"Compare by socio-economic factor"}[s]||""}function ir(s,t,l){let a,o,c,f,y,E={},{data:w}=t;const g=w.coBenefit,A=vs.find(h=>h.id===g)?.label??g,C=bn.find(h=>h.id===g)?.def??g;let P,N,M,V,rt,ot,At,pe,ct=!1,me,jt,U;Ie().then(()=>{let h=JSON.parse(JSON.stringify(Be(g)));h.shift(),h=h.reverse(),l(7,jt=new mn(N,"LAD",U,"total",!0,"LAD",!1,h)),jt.initMap()});let It=yn(g),lt=!1,at="";const dt=["overview","compare"];let G=null;function Xt(){const h=window.scrollY;l(9,lt=h>250);for(const v of dt){const I=document.getElementById(v);if(!I)continue;const R=I.getBoundingClientRect();if(R.top<=150&&R.bottom>=150){at!==v&&pn.capture("section entered (coben)",{section_name:v}),l(10,at=v);break}}}rs(()=>(window.addEventListener("scroll",Xt),Xt(),()=>window.removeEventListener("scroll",Xt))),zs(()=>{window.removeEventListener("scroll",Xt)});async function Ie(){P=await Se(An(g)),M=await Se(In(g)),rt=await Se(Ln()),rt=rt.sort((v,I)=>I.total-v.total),ot=await Se(xn()),ot=ot.sort((v,I)=>I.total_value-v.total_value);const h=ot.find(v=>v.co_benefit_type===g);l(6,me=h?h.value_per_capita:null),N=await Se(Tn(g)),console.log("data",N),At=await Se(Vn()),l(5,pe=At[0].total_value),hs.forEach(v=>{M[v]=+M[v]}),l(4,V=fn(P,v=>v.total/1e3).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),l(20,ct=!0),gn(c)}let z,st;function bt(h,v){if(!z)return;const I=20,R=15,q=Math.floor(200/I),it=R*q,_=rt.reduce((D,tt)=>D+tt.total,0),W=[];for(const D of rt){const tt=Math.round(Math.abs(D.total)/_*it),Lt=D.total<0;for(let be=0;be<tt;be++)W.push({type:D.co_benefit_type,negative:Lt})}for(;W.length<it;)W.push({type:"empty"});W.sort((D,tt)=>D.type==="empty"?1:tt.type==="empty"?-1:D.negative&&!tt.negative?1:!D.negative&&tt.negative?-1:0);const Zt=W.map((D,tt)=>({x:tt%R,y:Math.floor(tt/R),...D})),ut=Pe({width:I*R,height:I*q,margin:0,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:vs.map(D=>D.id),range:kn,unknown:"#eee",legend:!1},marks:[ds(Zt.filter(D=>!D.negative),{x:D=>D.x*I,y:D=>D.y*I,fill:"type",fillOpacity:D=>v&&D.type!==v?.15:1}),ds(Zt.filter(D=>D.negative),{x:D=>D.x*I,y:D=>D.y*I,stroke:"type",strokeOpacity:D=>v&&D.type!==v?.15:1,strokeWidth:1,fill:"none"})]});st&&(l(12,st.style.width=`${I*R}px`,st),l(12,st.style.height=`${h-100}px`,st)),l(11,z.innerHTML="",z),z.append(ut)}function Fe(){f?.append(Pe({height:ke/1.5,...Sn,marginLeft:90,marginTop:40,marginRight:40,y:{label:"Number of Datazones",grid:!0},x:{label:"Total co-benefit value (£, billion)",labelArrow:"none",labelAnchor:"center"},style:{fontSize:"15px"},marks:[vn(N,Un({y:"count"},{x:h=>h.total*1e3,fill:Be(g)[0],tip:!0,fillOpacity:.5,stroke:Be(g)[0],strokeWidth:2})),us({anchor:"left",label:"Number of datazones",labelArrow:"none",labelAnchor:"center"}),dl([0],{stroke:"#333",strokeWidth:.75})]}))}function Le(){let h=P.flatMap(v=>En.map(I=>({time:I,value:v[I],total:v.total,scenario:v.scenario})));y?.append(Pe({height:ke/1.5,marginLeft:80,marginRight:40,marginBottom:60,marginTop:40,style:{fontSize:"15px"},x:{type:"band",tickFormat:v=>v.replace(/^Y/,"").replace("_","-"),label:"Year Intervals"},y:{grid:!0,label:"Total (£, billion)"},marks:[Is(h,As({y:"sum"},{x:"time",y:v=>v.value/1e3,fill:Be(g)[0],tip:{format:{y:v=>`${v.toFixed(2)}`,x:!1}},fillOpacity:.8,insetLeft:15,insetRight:15})),us({anchor:"left",grid:!0,label:"Total co-benefit value (£, billion)",labelArrow:"none",labelAnchor:"center"}),dl([0],{stroke:"#333",strokeWidth:.75})]}))}function xe(){const h=v=>v.LAD.startsWith("S")?"S":v.LAD.startsWith("N")?"N":v.LAD.startsWith("E")?"E":"W";hs.forEach((v,I)=>{let R;if(wn.includes(v)){const q=Cn[v],it=q?Object.keys(q).map(Number):N.filter(_=>_.SEFMAME==v).map(_=>_.SE);R=Pe({style:{fontSize:"14px",textAnchor:"middle",fill:"#333"},height:ke/1.4,width:ke*1.2,marginLeft:70,marginBottom:v==="Typology"?80:60,marginRight:20,marginTop:30,x:{domain:it,label:ua(v),tickFormat:_=>q?.[_]??_,tickRotate:v==="Typology"?-20:0},y:{label:"£, thousand",labelArrow:"none"},color:{legend:!0},marks:[Zn(N.filter(_=>_.SEFMAME==v),{x:"SE",y:_=>_.total*1e3,r:1.8,fillOpacity:.7,fill:Dn(g)}),dl([0],{stroke:"#333",strokeWidth:.75})]})}else{let q=N.filter(_=>_.SEFMAME===v&&(G===null||h(_)==G)),it=q.reduce(function(_,W){return _.SE<W.SE?_:W});R=Pe({style:{fontSize:"14px",textAnchor:"middle",fill:"#333"},height:ke/1.4,width:ke*1.2,marginLeft:70,marginBottom:60,marginRight:20,marginTop:30,x:{label:ua(v),labelArrow:!1,labelAnchor:"center"},y:{label:"£, thousand",labelArrow:!1},color:{legend:!0},marks:[I==6?fs(["Each dot represents a Local Authority District (LAD)."],{x:["Under_35","Over_65","Unemployment"].includes(v)?it.SE*100:it.SE,y:it.total*1e3,textPadding:6,opacity:.5,lineWidth:12}):[],ma(q,{x:_=>["Under_35","Over_65","Unemployment"].includes(v)?_.SE*100:_.SE,y:_=>_.total*1e3,fill:_=>{const W=["S","N","E","W"].indexOf(h(_));return Ae(g)[W]},r:2,fillOpacity:.1,channels:{LAD:"LAD"}}),ma(q,{x:_=>["Under_35","Over_65","Unemployment"].includes(v)?_.SE*100:_.SE,y:_=>_.total*1e3,fill:_=>{const W=["S","N","E","W"].indexOf(h(_));return Ae(g)[W]},r:3.5,fillOpacity:1}),un({label:ua(v),labelArrow:!1,labelAnchor:"center"}),dl([0],{stroke:"#333",strokeWidth:.75}),Ls([0],{stroke:"#333",strokeWidth:.75}),fs(q,dn({x:_=>["Under_35","Over_65","Unemployment"].includes(v)?_.SE*100:_.SE,y:_=>_.total*1e3,title:_=>[`LAD: ${_.LAD}`,"Click to navigate to page."].join(`
`)}))]}),console.log(ms(R).select('g[aria-label="dot"]').selectAll("circle")),ms(R).selectAll('g[aria-label="dot"]').selectAll("circle").style("cursor","pointer").on("click",(_,W,Zt)=>{let ut=q[W].LAD;window.open(`${hn}/location?location=${ut}`,"_blank").focus()})}E[v]?.append(R)})}function ft(){l(21,G=null)}rs(()=>{_n(c),document.querySelectorAll(".nation-button").forEach(h=>{h.addEventListener("click",()=>{const v=h.getAttribute("data-nation");G===v?(l(21,G=null),h.classList.remove("active")):(l(21,G=v),document.querySelectorAll(".nation-button").forEach(I=>I.classList.remove("active")),h.classList.add("active"))})})});function vt(h){he[h?"unshift":"push"](()=>{z=h,l(11,z)})}function gt(h){he[h?"unshift":"push"](()=>{st=h,l(12,st)})}function Ue(h){he[h?"unshift":"push"](()=>{y=h,l(0,y)})}function Te(h){he[h?"unshift":"push"](()=>{f=h,l(3,f)})}function _t(h){he[h?"unshift":"push"](()=>{U=h,l(8,U)})}function Ve(h,v){he[h?"unshift":"push"](()=>{E[v.id]=h,l(1,E)})}function Ne(h){he[h?"unshift":"push"](()=>{c=h,l(2,c)})}return s.$$set=h=>{"data"in h&&l(19,w=h.data)},s.$$.update=()=>{s.$$.dirty[0]&1048577&&ct&&(y?.firstChild?.remove(),Fe(),Le(),bt(300,g)),s.$$.dirty[0]&3145730&&ct&&G!==void 0&&(Object.values(E).forEach(h=>{h.firstChild?.remove()}),xe()),s.$$.dirty[0]&4194304&&l(13,o=`color: ${a}; font-weight: bold; font-size: 22px;`)},l(22,a=Be(g)[0]),[y,E,c,f,V,pe,me,jt,U,lt,at,z,st,o,g,A,C,It,ft,w,ct,G,a,vt,gt,Ue,Te,_t,Ve,Ne]}class Dr extends Bs{constructor(t){super(),Os(this,t,ir,rr,Hs,{data:19},null,[-1,-1])}}export{Dr as component};
