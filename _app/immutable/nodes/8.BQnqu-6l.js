import{s as Tn,n as Ze,o as In,e as ft}from"../chunks/scheduler.tir__IPy.js";import{S as Vn,i as Sn,e as C,s as V,b as lt,c as _,d as N,m as O,h as S,f as ct,g as z,n as M,j as Rt,k as v,q as Bn,o as Nn}from"../chunks/index.bU9Y8Vjw.js";import{e as Ke}from"../chunks/each.-gASlQSi.js";import{n as Hn}from"../chunks/transform.Cz5Y6iUM.js";import{F as Pn,G as xe,H as Fn,I as Rn,C as le,J as yn,K as Te,b as qt,L as Se,M as Qt,N as On,O as jn,P as qn,c as Jt,a as $t,d as jt,Q as Un,p as ie,e as Be,R as Wn,S as Ge,T as Qe,U as bn,V as Yn,W as wn,X as ue,Y as fe,m as Cn,Z as Xn,_ as Ie,$ as Zn,g as _n,h as ce,a0 as Kn,a1 as Gn,a2 as Qn,a3 as Je,a4 as Jn,a5 as $n,a6 as Mn,a7 as $e,a8 as tr,f as er,a9 as nr,aa as rr,ab as kn,ac as sr,ad as or,w as xn,ae as En,af as ar,ag as An,k as Gt,l as ir,n as lr,ah as cr,ai as ur,i as ot,aj as bt,ak as fr,al as hr,j as tn,s as wt,q as en}from"../chunks/index.MfBzCR6x.js";import{M as dr,g as pr}from"../chunks/map.j8cXR5w6.js";import{S as Ve,a as nn,M as at,b as vr,T as Ee,V as mr,A as Ht,c as gr,C as yr,d as rn}from"../chunks/globals.CkVBXOP0.js";import{t as br,A as wr,f as Dn,m as Cr,c as sn,s as _r,g as Mr,h as kr,e as Kt,a as Ae,d as on,b as an}from"../chunks/bar.C_xG2hnN.js";const xr=Er(Ar);function Er(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:o,width:s,height:l}=e;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((l=Math.floor(l!==void 0?l:o.length/s))>=0))throw new RangeError("invalid height");if(!s||!l||!n&&!r)return e;const c=n&&t(n),u=r&&t(r),i=o.slice();return c&&u?(Pt(c,i,o,s,l),Pt(c,o,i,s,l),Pt(c,i,o,s,l),Ft(u,o,i,s,l),Ft(u,i,o,s,l),Ft(u,o,i,s,l)):c?(Pt(c,o,i,s,l),Pt(c,i,o,s,l),Pt(c,o,i,s,l)):u&&(Ft(u,o,i,s,l),Ft(u,i,o,s,l),Ft(u,o,i,s,l)),e}}function Pt(t,e,n,r,o){for(let s=0,l=r*o;s<l;)t(e,n,s,s+=r,1)}function Ft(t,e,n,r,o){for(let s=0,l=r*o;s<r;++s)t(e,n,s,s+l,r)}function Ar(t){const e=Math.floor(t);if(e===t)return Dr(t);const n=t-e,r=2*t+1;return(o,s,l,c,u)=>{if(!((c-=u)>=l))return;let i=e*s[l];const a=u*e,p=a+u;for(let h=l,f=l+a;h<f;h+=u)i+=s[Math.min(c,h)];for(let h=l,f=c;h<=f;h+=u)i+=s[Math.min(c,h+a)],o[h]=(i+n*(s[Math.max(l,h-p)]+s[Math.min(c,h+p)]))/r,i-=s[Math.max(l,h-a)]}}function Dr(t){const e=2*t+1;return(n,r,o,s,l)=>{if(!((s-=l)>=o))return;let c=t*r[o];const u=l*t;for(let i=o,a=o+u;i<a;i+=l)c+=r[Math.min(s,i)];for(let i=o,a=s;i<=a;i+=l)c+=r[Math.min(s,i+u)],n[i]=c/e,c-=r[Math.max(o,i-u)]}}function Lr(t,e,n){let r;for(;;){const o=Pn(t,e,n);if(o===r||o===0||!isFinite(o))return[t,e];o>0?(t=Math.floor(t/o)*o,e=Math.ceil(e/o)*o):o<0&&(t=Math.ceil(t*o)/o,e=Math.floor(e*o)/o),r=o}}function Ln(t,e=xe){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=xe);const o=(c,u)=>e(n[c],n[u]);let s,l;return t=Uint32Array.from(n,(c,u)=>u),t.sort(e===xe?(c,u)=>Fn(n[c],n[u]):Rn(o)),t.forEach((c,u)=>{const i=o(c,s===void 0?c:s);i>=0?((s===void 0||i>0)&&(s=c,l=u),r[c]=l):r[c]=NaN}),r}var zr=Array.prototype,zn=zr.slice;function Tr(t,e){return t-e}function Ir(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}const Ct=t=>()=>t;function Vr(t,e){for(var n=-1,r=e.length,o;++n<r;)if(o=Sr(t,e[n]))return o;return 0}function Sr(t,e){for(var n=e[0],r=e[1],o=-1,s=0,l=t.length,c=l-1;s<l;c=s++){var u=t[s],i=u[0],a=u[1],p=t[c],h=p[0],f=p[1];if(Br(u,p,e))return 0;a>r!=f>r&&n<(h-i)*(r-a)/(f-a)+i&&(o=-o)}return o}function Br(t,e,n){var r;return Nr(t,e,n)&&Hr(t[r=+(t[0]===e[0])],n[r],e[r])}function Nr(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function Hr(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function Pr(){}var ht=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function ln(){var t=1,e=1,n=br,r=u;function o(i){var a=n(i);if(Array.isArray(a))a=a.slice().sort(Tr);else{const p=le(i,Fr);for(a=yn(...Lr(p[0],p[1],a),a);a[a.length-1]>=p[1];)a.pop();for(;a[1]<p[0];)a.shift()}return a.map(p=>s(i,p))}function s(i,a){const p=a==null?NaN:+a;if(isNaN(p))throw new Error(`invalid value: ${a}`);var h=[],f=[];return l(i,p,function(y){r(y,i,p),Ir(y)>0?h.push([y]):f.push(y)}),f.forEach(function(y){for(var w=0,E=h.length,b;w<E;++w)if(Vr((b=h[w])[0],y)!==-1){b.push(y);return}}),{type:"MultiPolygon",value:a,coordinates:h}}function l(i,a,p){var h=new Array,f=new Array,y,w,E,b,d,x;for(y=w=-1,b=Dt(i[0],a),ht[b<<1].forEach(D);++y<t-1;)E=b,b=Dt(i[y+1],a),ht[E|b<<1].forEach(D);for(ht[b<<0].forEach(D);++w<e-1;){for(y=-1,b=Dt(i[w*t+t],a),d=Dt(i[w*t],a),ht[b<<1|d<<2].forEach(D);++y<t-1;)E=b,b=Dt(i[w*t+t+y+1],a),x=d,d=Dt(i[w*t+y+1],a),ht[E|b<<1|d<<2|x<<3].forEach(D);ht[b|d<<3].forEach(D)}for(y=-1,d=i[w*t]>=a,ht[d<<2].forEach(D);++y<t-1;)x=d,d=Dt(i[w*t+y+1],a),ht[d<<2|x<<3].forEach(D);ht[d<<3].forEach(D);function D(L){var g=[L[0][0]+y,L[0][1]+w],A=[L[1][0]+y,L[1][1]+w],P=c(g),B=c(A),k,I;(k=f[P])?(I=h[B])?(delete f[k.end],delete h[I.start],k===I?(k.ring.push(A),p(k.ring)):h[k.start]=f[I.end]={start:k.start,end:I.end,ring:k.ring.concat(I.ring)}):(delete f[k.end],k.ring.push(A),f[k.end=B]=k):(k=h[B])?(I=f[P])?(delete h[k.start],delete f[I.end],k===I?(k.ring.push(A),p(k.ring)):h[I.start]=f[k.end]={start:I.start,end:k.end,ring:I.ring.concat(k.ring)}):(delete h[k.start],k.ring.unshift(g),h[k.start=P]=k):h[P]=f[B]={start:P,end:B,ring:[g,A]}}}function c(i){return i[0]*2+i[1]*(t+1)*4}function u(i,a,p){i.forEach(function(h){var f=h[0],y=h[1],w=f|0,E=y|0,b=De(a[E*t+w]);f>0&&f<t&&w===f&&(h[0]=cn(f,De(a[E*t+w-1]),b,p)),y>0&&y<e&&E===y&&(h[1]=cn(y,De(a[(E-1)*t+w]),b,p))})}return o.contour=s,o.size=function(i){if(!arguments.length)return[t,e];var a=Math.floor(i[0]),p=Math.floor(i[1]);if(!(a>=0&&p>=0))throw new Error("invalid size");return t=a,e=p,o},o.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Array.isArray(i)?Ct(zn.call(i)):Ct(i),o):n},o.smooth=function(i){return arguments.length?(r=i?u:Pr,o):r===u},o}function Fr(t){return isFinite(t)?t:NaN}function Dt(t,e){return t==null?!1:+t>=e}function De(t){return t==null||isNaN(t=+t)?-1/0:t}function cn(t,e,n,r){const o=r-e,s=n-e,l=isFinite(o)||isFinite(s)?o/s:Math.sign(o)/Math.sign(s);return isNaN(l)?t:t+l-.5}function Rr(t){return t[0]}function Or(t){return t[1]}function jr(){return 1}function qr(){var t=Rr,e=Or,n=jr,r=960,o=500,s=20,l=2,c=s*3,u=r+c*2>>l,i=o+c*2>>l,a=Ct(20);function p(d){var x=new Float32Array(u*i),D=Math.pow(2,-l),L=-1;for(const T of d){var g=(t(T,++L,d)+c)*D,A=(e(T,L,d)+c)*D,P=+n(T,L,d);if(P&&g>=0&&g<u&&A>=0&&A<i){var B=Math.floor(g),k=Math.floor(A),I=g-B-.5,j=A-k-.5;x[B+k*u]+=(1-I)*(1-j)*P,x[B+1+k*u]+=I*(1-j)*P,x[B+1+(k+1)*u]+=I*j*P,x[B+(k+1)*u]+=(1-I)*j*P}}return xr({data:x,width:u,height:i},s*D),x}function h(d){var x=p(d),D=a(x),L=Math.pow(2,2*l);return Array.isArray(D)||(D=yn(Number.MIN_VALUE,Te(x)/L,D)),ln().size([u,i]).thresholds(D.map(g=>g*L))(x).map((g,A)=>(g.value=+D[A],f(g)))}h.contours=function(d){var x=p(d),D=ln().size([u,i]),L=Math.pow(2,2*l),g=A=>{A=+A;var P=f(D.contour(x,A*L));return P.value=A,P};return Object.defineProperty(g,"max",{get:()=>Te(x)/L}),g};function f(d){return d.coordinates.forEach(y),d}function y(d){d.forEach(w)}function w(d){d.forEach(E)}function E(d){d[0]=d[0]*Math.pow(2,l)-c,d[1]=d[1]*Math.pow(2,l)-c}function b(){return c=s*3,u=r+c*2>>l,i=o+c*2>>l,h}return h.x=function(d){return arguments.length?(t=typeof d=="function"?d:Ct(+d),h):t},h.y=function(d){return arguments.length?(e=typeof d=="function"?d:Ct(+d),h):e},h.weight=function(d){return arguments.length?(n=typeof d=="function"?d:Ct(+d),h):n},h.size=function(d){if(!arguments.length)return[r,o];var x=+d[0],D=+d[1];if(!(x>=0&&D>=0))throw new Error("invalid size");return r=x,o=D,b()},h.cellSize=function(d){if(!arguments.length)return 1<<l;if(!((d=+d)>=1))throw new Error("invalid cell size");return l=Math.floor(Math.log(d)/Math.LN2),b()},h.thresholds=function(d){return arguments.length?(a=typeof d=="function"?d:Array.isArray(d)?Ct(zn.call(d)):Ct(d),h):a},h.bandwidth=function(d){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((d=+d)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*d*d+1)-1)/2,b()},h}const Ur={ariaLabel:"cell"};class Wr extends wr{constructor(e,{x:n,y:r,...o}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},o,Ur)}_transform(e,n){e.call(qt,n,{},0,0)}}function un(t,{x:e,y:n,...r}={}){return[e,n]=Se(e,n),new Wr(t,{...r,x:e,y:n})}const Yr={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function Xr(t){return t.sort===void 0&&t.reverse===void 0?Wn({channel:"-r"},t):t}class Zr extends Qt{constructor(e,n={}){const{x:r,y:o,r:s,rotate:l,symbol:c=Ge,frameAnchor:u}=n,[i,a]=Qe(l,0),[p,h]=On(c),[f,y]=Qe(s,p==null?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:o,scale:"y",optional:!0},r:{value:f,scale:"r",filter:jn,optional:!0},rotate:{value:i,optional:!0},symbol:{value:p,scale:"auto",optional:!0}},Xr(n),Yr),this.r=y,this.rotate=a,this.symbol=h,this.frameAnchor=qn(u);const{channels:w}=this,{symbol:E}=w;if(E){const{fill:b,stroke:d}=w;E.hint={fill:b?b.value===E.value?"color":"currentColor":this.fill??"currentColor",stroke:d?d.value===E.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,r,o,s){const{x:l,y:c}=n,{x:u,y:i,r:a,rotate:p,symbol:h}=r,{r:f,rotate:y,symbol:w}=this,[E,b]=bn(this,o),d=w===Ge,x=a?void 0:f*f*Math.PI;return Yn(f)&&(e=[]),Jt("svg:g",s).call($t,this,o,s).call(qt,this,{x:u&&l,y:i&&c}).call(D=>D.selectAll().data(e).enter().append(d?"circle":"path").call(jt,this).call(d?L=>{L.attr("cx",u?g=>u[g]:E).attr("cy",i?g=>i[g]:b).attr("r",a?g=>a[g]:f)}:L=>{L.attr("transform",Un`translate(${u?g=>u[g]:E},${i?g=>i[g]:b})${p?g=>` rotate(${p[g]})`:y?` rotate(${y})`:""}`).attr("d",a&&h?g=>{const A=ie();return h[g].draw(A,a[g]*a[g]*Math.PI),A}:a?g=>{const A=ie();return w.draw(A,a[g]*a[g]*Math.PI),A}:h?g=>{const A=ie();return h[g].draw(A,x),A}:(()=>{const g=ie();return w.draw(g,x),g})())}).call(Be,this,r)).node()}}function Kr(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Se(e,n)),new Zr(t,{...r,x:e,y:n})}const Gr={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Qr extends Qt{constructor(e,n={}){const{x:r,y:o,z:s,curve:l,tension:c}=n;super(e,{x:{value:r,scale:"x"},y:{value:o,scale:"y"},z:{value:fe(n),optional:!0}},n,Gr),this.z=s,this.curve=Cr(l,c),Cn(this,n)}filter(e){return e}project(e,n,r){this.curve!==sn&&super.project(e,n,r)}render(e,n,r,o,s){const{x:l,y:c}=r,{curve:u}=this;return Jt("svg:g",s).call($t,this,o,s).call(qt,this,n).call(i=>i.selectAll().data(Xn(e,[l,c],this,r)).enter().append("path").call(jt,this).call(Ie,this,r).call(Zn,this,r,s).attr("d",u===sn&&s.projection?Jr(s.projection,l,c):_r().curve(u).defined(a=>a>=0).x(a=>l[a]).y(a=>c[a]))).node()}}function Jr(t,e,n){const r=_n(t);return e=ce(e),n=ce(n),o=>{let s=[];const l=[s];for(const c of o)c===-1?(s=[],l.push(s)):s.push([e[c],n[c]]);return r({type:"MultiLineString",coordinates:l})}}function $r(t,{x:e=wn,y:n=ue,...r}={}){return new Qr(t,Dn({...r,x:e,y:n}))}function ts(t,e={}){let{y:n,y1:r,y2:o}=e;n===void 0&&r===void 0&&o===void 0&&(e={...e,y:n=ue});const s={};return n!=null&&(s.y=t),r!=null&&(s.y1=t),o!=null&&(s.y2=t),es(s,e)}function es(t={},e={}){const n=fe(e),r=Object.entries(t).map(([o,s])=>{const l=Kn(o,e);if(l==null)throw new Error(`missing channel: ${o}`);const[c,u]=Gn(l);return{key:o,input:l,output:c,setOutput:u,map:ns(s)}});return{...Qn(e,(o,s)=>{const l=Je(o,n),c=r.map(({input:i})=>Je(o,i)),u=r.map(({setOutput:i})=>i(new Array(o.length)));for(const i of s)for(const a of l?Jn(i,p=>l[p]).values():[i])r.forEach(({map:p},h)=>p.mapIndex(a,c[h],u[h]));return{data:o,facets:s}}),...Object.fromEntries(r.map(({key:o,output:s})=>[o,s]))}}function ns(t){if(t==null)throw new Error("missing map");if(typeof t.mapIndex=="function")return t;if(typeof t.map=="function"&&$n(t))return rs(t);if(typeof t=="function")return Le(Mn(t));switch(`${t}`.toLowerCase()){case"cumsum":return os;case"rank":return Le((e,n)=>Ln(e,r=>n[r]));case"quantile":return Le((e,n)=>ss(e,r=>n[r]))}throw new Error(`invalid map: ${t}`)}function rs(t){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:t.map.bind(t)}}function ss(t,e){const n=Mr(t,e)-1;return Ln(t,e).map(r=>r/n)}function Le(t){return{mapIndex(e,n,r){const o=t(e,n);if(o.length!==e.length)throw new Error("map function returned a mismatched length");for(let s=0,l=e.length;s<l;++s)r[e[s]]=o[s]}}}const os={mapIndex(t,e,n){let r=0;for(const o of t)n[o]=r+=e[o]}},as={ariaLabel:"tick",fill:null,stroke:"currentColor"};class is extends Qt{constructor(e,n,r){super(e,n,r,as),Cn(this,r)}render(e,n,r,o,s){return Jt("svg:g",s).call($t,this,o,s).call(this._transform,this,n).call(l=>l.selectAll().data(e).enter().append("line").call(jt,this).attr("x1",this._x1(n,r,o)).attr("x2",this._x2(n,r,o)).attr("y1",this._y1(n,r,o)).attr("y2",this._y2(n,r,o)).call(Be,this,r).call(er,this,r,s)).node()}}class ls extends is{constructor(e,n={}){const{x:r,y:o,inset:s=0,insetTop:l=s,insetBottom:c=s}=n;super(e,{x:{value:r,scale:"x"},y:{value:o,scale:"y",type:"band",optional:!0}},n),this.insetTop=$e(l),this.insetBottom=$e(c)}_transform(e,n,{x:r}){e.call(qt,n,{x:r},tr,0)}_x1(e,{x:n}){return r=>n[r]}_x2(e,{x:n}){return r=>n[r]}_y1({y:e},{y:n},{marginTop:r}){const{insetTop:o}=this;return n&&e?s=>n[s]+o:r+o}_y2({y:e},{y:n},{height:r,marginBottom:o}){const{insetBottom:s}=this;return n&&e?l=>n[l]+e.bandwidth()-s:r-o-s}}function ze(t,{x:e=ue,...n}={}){return new ls(t,{...n,x:e})}const cs={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class us extends Qt{constructor(e,{x:n,y:r,z:o,weight:s,fill:l,stroke:c,...u}={}){const i=fn(l)&&(l="currentColor",!0),a=fn(c)&&(c="currentColor",!0);super(e,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:fe({z:o,fill:l,stroke:c}),optional:!0},weight:{value:s,optional:!0}},ds({...u,fill:l,stroke:c},i,a),cs),i&&(this.fill=void 0),a&&(this.stroke=void 0),this.z=o}filter(e){return e}render(e,n,r,o,s){const{contours:l}=r,c=_n();return Jt("svg:g",s).call($t,this,o,s).call(qt,this,{}).call(u=>u.selectAll().data(e).enter().append("path").call(jt,this).call(Be,this,r).attr("d",i=>c(l[i]))).node()}}function fs(t,{x:e,y:n,...r}={}){return[e,n]=Se(e,n),new us(t,{...r,x:e,y:n})}const hs=new Set(["x","y","z","weight"]);function ds(t,e,n){let{bandwidth:o,thresholds:s}=t;return o=o===void 0?20:+o,s=s===void 0?20:typeof s?.[Symbol.iterator]=="function"?ce(s):+s,nr(t,function(l,c,u,i,a,p){const h=u.weight?ce(u.weight.value):null,f=u.z?.value,{z:y}=this,[w,E]=bn(this,a),{width:b,height:d}=a,{x,y:D}=rr(u,i,p),L=Object.fromEntries(Object.entries(u).filter(([T])=>!hs.has(T)).map(([T,W])=>[T,{...W,value:[]}])),g=e&&[],A=n&&[],P=qr().x(x?T=>x[T]:w).y(D?T=>D[T]:E).weight(h?T=>h[T]:1).size([b,d]).bandwidth(o),B=[];for(const T of c){const W=[];B.push(W);for(const F of f?kn(T,f,y):[T]){const Y=P.contours(F);W.push([F,Y])}}let k=s;if(!(k instanceof sr)){let T=0;for(const W of B)for(const[,F]of W){const Y=F.max;Y>T&&(T=Y)}k=Float64Array.from({length:s-1},(W,F)=>T*100*(F+1)/s)}const I=[],j=[];for(const T of B){const W=[];I.push(W);for(const[F,Y]of T)for(const et of k){W.push(j.length),j.push(Y(et/100)),g&&g.push(et),A&&A.push(et);for(const q in L)L[q].value.push(u[q].value[F[0]])}}return g&&g.push(0),A&&A.push(0),{data:l,facets:I,channels:{...L,...g&&{fill:{value:g,scale:"color"}},...A&&{stroke:{value:A,scale:"color"}},contours:{value:j}}}})}function fn(t){return/^density$/i.test(t)}function ps(t,e,n){var r=1e-8,o=e-1,s=n-1,l=0,c,u,i,a,p,h,f,y,w,E,b;if(t<=0)return 0;if(t>=1)return 1;for(e>=1&&n>=1?(i=t<.5?t:1-t,a=Math.sqrt(-2*Math.log(i)),f=(2.30753+a*.27061)/(1+a*(.99229+a*.04481))-a,t<.5&&(f=-f),y=(f*f-3)/6,w=2/(1/(2*e-1)+1/(2*n-1)),E=f*Math.sqrt(y+w)/w-(1/(2*n-1)-1/(2*e-1))*(y+5/6-2/(3*w)),f=e/(e+n*Math.exp(2*E))):(c=Math.log(e/(e+n)),u=Math.log(n/(e+n)),a=Math.exp(e*c)/e,p=Math.exp(n*u)/n,E=a+p,t<a/E?f=Math.pow(e*E*t,1/e):f=1-Math.pow(n*E*(1-t),1/n)),b=-Ot(e)-Ot(n)+Ot(e+n);l<10;l++){if(f===0||f===1)return f;if(h=vs(f,e,n)-t,a=Math.exp(o*Math.log(f)+s*Math.log(1-f)+b),p=h/a,f-=a=p/(1-.5*Math.min(1,p*(o/f-s/(1-f)))),f<=0&&(f=.5*(f+a)),f>=1&&(f=.5*(f+a+1)),Math.abs(a)<r*f&&l>0)break}return f}function vs(t,e,n){var r=t===0||t===1?0:Math.exp(Ot(e+n)-Ot(e)-Ot(n)+e*Math.log(t)+n*Math.log(1-t));return t<0||t>1?!1:t<(e+1)/(e+n+2)?r*hn(t,e,n)/e:1-r*hn(1-t,n,e)/n}function hn(t,e,n){var r=1e-30,o=1,s=e+n,l=e+1,c=e-1,u=1,i=1-s*t/l,a,p,h,f;for(Math.abs(i)<r&&(i=r),i=1/i,f=i;o<=100&&(a=2*o,p=o*(n-o)*t/((c+a)*(e+a)),i=1+p*i,Math.abs(i)<r&&(i=r),u=1+p/u,Math.abs(u)<r&&(u=r),i=1/i,f*=i*u,p=-(e+o)*(s+o)*t/((e+a)*(l+a)),i=1+p*i,Math.abs(i)<r&&(i=r),u=1+p/u,Math.abs(u)<r&&(u=r),i=1/i,h=i*u,f*=h,!(Math.abs(h-1)<3e-7));o++);return f}function Ot(t){var e=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,o,s,l;for(l=(s=o=t)+5.5,l-=(o+.5)*Math.log(l);e<6;e++)r+=n[e]/++s;return Math.log(2.506628274631*r/o)-l}function ms(t,e){var n=ps(2*Math.min(t,1-t),.5*e,.5);return n=Math.sqrt(e*(1-n)/n),t>.5?n:-n}const gs={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ys extends Qt{constructor(e,n={}){const{x:r,y:o,z:s,ci:l=.95,precision:c=4}=n;if(super(e,{x:{value:r,scale:"x"},y:{value:o,scale:"y"},z:{value:fe(n),optional:!0}},n,gs),this.z=s,this.ci=+l,this.precision=+c,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${l}`);if(!(this.precision>0))throw new Error(`invalid precision: ${c}`)}render(e,n,r,o,s){const{x:l,y:c,z:u}=r,{ci:i}=this;return Jt("svg:g",s).call($t,this,o,s).call(qt,this,n).call(a=>a.selectAll().data(u?kn(e,u,this.z):[e]).enter().call(p=>p.append("path").attr("fill","none").call(jt,this).call(Ie,this,{...r,fill:null,fillOpacity:null}).attr("d",h=>this._renderLine(h,l,c)).call(i&&!ar(this.fill)?h=>h.select(bs).attr("stroke","none").call(jt,this).call(Ie,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",f=>this._renderBand(f,l,c)):()=>{}))).node()}}function bs(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(Hn.svg,"path"),this)}class ws extends ys{constructor(e,n){super(e,n)}_renderBand(e,n,r){const{ci:o,precision:s}=this,[l,c]=le(e,a=>n[a]),u=dn(e,n,r),i=_s(e,n,r,(1-o)/2,u);return kr().x(a=>a).y0(a=>i(a,-1)).y1(a=>i(a,1))(xn(l,c-s/2,s).concat(c))}_renderLine(e,n,r){const[o,s]=le(e,c=>n[c]),l=dn(e,n,r);return`M${o},${l(o)}L${s},${l(s)}`}}function Cs(t,{x:e=wn,y:n=ue,stroke:r,fill:o=or(r)?"currentColor":r,...s}={}){return new ws(t,Dn({...s,x:e,y:n,fill:o,stroke:r}))}function dn(t,e,n){let r=0,o=0,s=0,l=0;for(const a of t){const p=e[a],h=n[a];r+=p,o+=h,s+=p*h,l+=p*p}const c=t.length,u=(c*s-r*o)/(c*l-r*r),i=(o-u*r)/c;return a=>u*a+i}function _s(t,e,n,r,o){const s=En(t,a=>e[a])/t.length;let l=0,c=0;for(const a of t)l+=(e[a]-s)**2,c+=(n[a]-o(e[a]))**2;const u=Math.sqrt(c/(t.length-2)),i=ms(r,t.length-2);return(a,p)=>{const h=o(a),f=u*Math.sqrt(1/t.length+(a-s)**2/l);return h+p*i*f}}function pn(t,e){return arguments.length===1&&({basis:t,...e}=t),ts(Ms(t),e)}function Ms(t){if(t===void 0)return vn;if(typeof t=="function")return he(Mn(t));if(/^p\d{2}$/i.test(t))return Ut(ur(t));switch(`${t}`.toLowerCase()){case"deviation":return Es;case"first":return vn;case"last":return xs;case"max":return As;case"mean":return Ds;case"median":return Ls;case"min":return zs;case"sum":return Ts;case"extent":return ks}throw new Error(`invalid basis: ${t}`)}function he(t){return{mapIndex(e,n,r){const o=+t(e,n);for(const s of e)r[s]=n[s]===null?NaN:n[s]/o}}}function Ut(t){return he((e,n)=>t(e,r=>n[r]))}const ks={mapIndex(t,e,n){const[r,o]=le(t,l=>e[l]),s=o-r;for(const l of t)n[l]=e[l]===null?NaN:(e[l]-r)/s}},vn=he((t,e)=>{for(let n=0;n<t.length;++n){const r=e[t[n]];if(An(r))return r}}),xs=he((t,e)=>{for(let n=t.length-1;n>=0;--n){const r=e[t[n]];if(An(r))return r}}),Es={mapIndex(t,e,n){const r=Gt(t,s=>e[s]),o=ir(t,s=>e[s]);for(const s of t)n[s]=e[s]===null?NaN:o?(e[s]-r)/o:0}},As=Ut(Te),Ds=Ut(Gt),Ls=Ut(lr),zs=Ut(cr),Ts=Ut(En);function mn(t,e,n){const r=t.slice();return r[42]=e[n],r[43]=e,r[44]=n,r}function Is(t){let e,n,r="Data Zones Distribution (vs. UK average)",o,s,l="Histogram shows the number of data zones distributed across different household social economic factors.",c,u,i="",a=t[42],p,h,f,y,w,E,b,d,x,D="Density plot refers to UK distribution while the scattered points refer to data zones in the local authority.",L,g,A="",P,B,k,I="";const j=()=>t[19](u,a),T=()=>t[19](null,a),W=()=>t[20](g,a),F=()=>t[20](null,a),Y=()=>t[21](k,a),et=()=>t[21](null,a);return{c(){e=C("div"),n=C("h3"),n.textContent=r,o=V(),s=C("p"),s.textContent=l,c=V(),u=C("div"),u.innerHTML=i,p=V(),h=C("div"),f=C("div"),y=C("h3"),w=lt("Co-benefits Recieved by Data Zones across "),E=lt(t[42]),b=lt(" Values"),d=V(),x=C("p"),x.textContent=D,L=V(),g=C("div"),g.innerHTML=A,P=V(),B=C("div"),k=C("div"),k.innerHTML=I,this.h()},l(q){e=_(q,"DIV",{class:!0});var Z=N(e);n=_(Z,"H3",{class:!0,"data-svelte-h":!0}),O(n)!=="svelte-1d86f13"&&(n.textContent=r),o=S(Z),s=_(Z,"P",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-vl6og1"&&(s.textContent=l),c=S(Z),u=_(Z,"DIV",{class:!0,"data-svelte-h":!0}),O(u)!=="svelte-4mdt4"&&(u.innerHTML=i),Z.forEach(z),p=S(q),h=_(q,"DIV",{class:!0});var rt=N(h);f=_(rt,"DIV",{});var m=N(f);y=_(m,"H3",{class:!0});var H=N(y);w=ct(H,"Co-benefits Recieved by Data Zones across "),E=ct(H,t[42]),b=ct(H," Values"),H.forEach(z),d=S(m),x=_(m,"P",{class:!0,"data-svelte-h":!0}),O(x)!=="svelte-mjnso4"&&(x.textContent=D),L=S(m),g=_(m,"DIV",{class:!0,"data-svelte-h":!0}),O(g)!=="svelte-1kzougf"&&(g.innerHTML=A),m.forEach(z),P=S(rt),B=_(rt,"DIV",{});var nt=N(B);k=_(nt,"DIV",{class:!0,"data-svelte-h":!0}),O(k)!=="svelte-rk8pjt"&&(k.innerHTML=I),nt.forEach(z),rt.forEach(z),this.h()},h(){M(n,"class","component-title"),M(s,"class","description short"),M(u,"class","plot"),M(e,"class","component"),M(y,"class","component-title"),M(x,"class","description short"),M(g,"class","plot"),M(k,"class","plot"),M(h,"class","component")},m(q,Z){Rt(q,e,Z),v(e,n),v(e,o),v(e,s),v(e,c),v(e,u),j(),Rt(q,p,Z),Rt(q,h,Z),v(h,f),v(f,y),v(y,w),v(y,E),v(y,b),v(f,d),v(f,x),v(f,L),v(f,g),W(),v(h,P),v(h,B),v(B,k),Y()},p(q,Z){t=q,a!==t[42]&&(T(),a=t[42],j()),a!==t[42]&&(F(),a=t[42],W()),a!==t[42]&&(et(),a=t[42],Y())},d(q){q&&(z(e),z(p),z(h)),T(),F(),et()}}}function Vs(t){let e,n,r="",o=t[42];const s=()=>t[18](n,o),l=()=>t[18](null,o);return{c(){e=C("div"),n=C("div"),n.innerHTML=r,this.h()},l(c){e=_(c,"DIV",{class:!0});var u=N(e);n=_(u,"DIV",{class:!0,"data-svelte-h":!0}),O(n)!=="svelte-1shkadq"&&(n.innerHTML=r),u.forEach(z),this.h()},h(){M(n,"class","plot"),M(e,"class","component")},m(c,u){Rt(c,e,u),v(e,n),s()},p(c,u){t=c,o!==t[42]&&(l(),o=t[42],s())},d(c){c&&z(e),l()}}}function gn(t){let e,n,r,o,s,l;function c(a,p){return a[7]?Vs:Is}let u=c(t),i=u(t);return{c(){e=C("div"),n=C("h2"),r=lt(t[42]),o=V(),s=C("div"),i.c(),l=V(),this.h()},l(a){e=_(a,"DIV",{});var p=N(e);n=_(p,"H2",{});var h=N(n);r=ct(h,t[42]),h.forEach(z),o=S(p),s=_(p,"DIV",{class:!0});var f=N(s);i.l(f),f.forEach(z),l=S(p),p.forEach(z),this.h()},h(){M(s,"class","row")},m(a,p){Rt(a,e,p),v(e,n),v(n,r),v(e,o),v(e,s),i.m(s,null),v(e,l)},p(a,p){u===(u=c(a))&&i?i.p(a,p):(i.d(1),i=u(a),i&&(i.c(),i.m(s,null)))},d(a){a&&z(e),i.d()}}}function Ss(t){let e,n,r,o="Data Report",s,l,c=t[10][t[9]]+"",u,i,a,p="Explore how this local authority will benefit from achieving Net Zero and general factors of their households.",h,f,y,w='<p class="section-subtitle">Overview</p> <h2 class="section-title">How much co-benefit values would this area recieve?</h2> <p class="description">We calculate and model 11 types of co-benefits across five different pathyways suggested by Climate Change Committee in the Sixth Carbon Budget from 2025-2050 on the level of data zones across UK.</p>',E,b,d,x,D="11 Types of Co-Benefits Values (vs. UK Average)",L,g,A,P=t[10][t[9]]+"",B,k,I,j,T="",W,F,Y,et=t[10][t[9]]+"",q,Z,rt,m,H="Scroll for zooming in and out.",nt,tt,Q="",Wt,U,K,Yt='<p class="section-subtitle">Temporal Trends</p> <h2 class="section-title">How co-benefits change over time?</h2> <p class="description">Detailed breakdown of temporal trends for total co-benefits, types of co-benefits, and five pathways.</p>',Xt,ut,dt,te="Total Co-benefits Distribution from 2025-2050 (vs. UK Average)",de,zt,pt,Ne="",pe,vt,_t,He="11 Types of Co-benefits Distribution Following Balance Pathway from 2025-2050",ve,Tt,It,mt,Pe="",me,gt,J,Mt,Fe="Households",ge,kt,Re="Social Economic Factors of Households",ye,xt,Oe="We describe the distribution of household economic factors aggregated on the data zone level and the different level of co-benefits recieved by those data zones.",be,Et,we,At,je="Aggregate Plots",Ce,yt,_e,qe,Vt=Ke(Ve),G=[];for(let X=0;X<Vt.length;X+=1)G[X]=gn(mn(t,Vt,X));return{c(){e=C("div"),n=C("div"),r=C("p"),r.textContent=o,s=V(),l=C("h1"),u=lt(c),i=V(),a=C("p"),a.textContent=p,h=V(),f=C("div"),y=C("div"),y.innerHTML=w,E=V(),b=C("div"),d=C("div"),x=C("h3"),x.textContent=D,L=V(),g=C("p"),A=lt("Co-benefits values in "),B=lt(P),k=lt(" verus average value across all local authorities in UK."),I=V(),j=C("div"),j.innerHTML=T,W=V(),F=C("div"),Y=C("h3"),q=lt(et),Z=lt(" on UK Map"),rt=V(),m=C("p"),m.textContent=H,nt=V(),tt=C("div"),tt.innerHTML=Q,Wt=V(),U=C("div"),K=C("div"),K.innerHTML=Yt,Xt=V(),ut=C("div"),dt=C("h3"),dt.textContent=te,de=V(),zt=C("div"),pt=C("div"),pt.innerHTML=Ne,pe=V(),vt=C("div"),_t=C("h3"),_t.textContent=He,ve=V(),Tt=C("div"),It=C("div"),mt=C("div"),mt.innerHTML=Pe,me=V(),gt=C("div"),J=C("div"),Mt=C("p"),Mt.textContent=Fe,ge=V(),kt=C("h2"),kt.textContent=Re,ye=V(),xt=C("p"),xt.textContent=Oe,be=V(),Et=C("input"),we=V(),At=C("label"),At.textContent=je,Ce=V(),yt=C("div");for(let X=0;X<G.length;X+=1)G[X].c();this.h()},l(X){e=_(X,"DIV",{class:!0});var $=N(e);n=_($,"DIV",{class:!0});var R=N(n);r=_(R,"P",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-1gxb8h1"&&(r.textContent=o),s=S(R),l=_(R,"H1",{class:!0});var Zt=N(l);u=ct(Zt,c),Zt.forEach(z),i=S(R),a=_(R,"P",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-5qj0r2"&&(a.textContent=p),R.forEach(z),h=S($),f=_($,"DIV",{class:!0});var ee=N(f);y=_(ee,"DIV",{class:!0,"data-svelte-h":!0}),O(y)!=="svelte-42ok6n"&&(y.innerHTML=w),E=S(ee),b=_(ee,"DIV",{id:!0,class:!0});var ne=N(b);d=_(ne,"DIV",{class:!0});var St=N(d);x=_(St,"H3",{class:!0,"data-svelte-h":!0}),O(x)!=="svelte-1o9zf4n"&&(x.textContent=D),L=S(St),g=_(St,"P",{class:!0});var re=N(g);A=ct(re,"Co-benefits values in "),B=ct(re,P),k=ct(re," verus average value across all local authorities in UK."),re.forEach(z),I=S(St),j=_(St,"DIV",{class:!0,"data-svelte-h":!0}),O(j)!=="svelte-1qxob4b"&&(j.innerHTML=T),St.forEach(z),W=S(ne),F=_(ne,"DIV",{class:!0});var Bt=N(F);Y=_(Bt,"H3",{class:!0});var Me=N(Y);q=ct(Me,et),Z=ct(Me," on UK Map"),Me.forEach(z),rt=S(Bt),m=_(Bt,"P",{class:!0,"data-svelte-h":!0}),O(m)!=="svelte-1ask2se"&&(m.textContent=H),nt=S(Bt),tt=_(Bt,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),O(tt)!=="svelte-1nhow06"&&(tt.innerHTML=Q),Bt.forEach(z),ne.forEach(z),ee.forEach(z),Wt=S($),U=_($,"DIV",{class:!0});var Nt=N(U);K=_(Nt,"DIV",{class:!0,"data-svelte-h":!0}),O(K)!=="svelte-1ttf9zc"&&(K.innerHTML=Yt),Xt=S(Nt),ut=_(Nt,"DIV",{class:!0});var se=N(ut);dt=_(se,"H3",{class:!0,"data-svelte-h":!0}),O(dt)!=="svelte-td9req"&&(dt.textContent=te),de=S(se),zt=_(se,"DIV",{class:!0});var Ue=N(zt);pt=_(Ue,"DIV",{class:!0,"data-svelte-h":!0}),O(pt)!=="svelte-ghq0r3"&&(pt.innerHTML=Ne),Ue.forEach(z),se.forEach(z),pe=S(Nt),vt=_(Nt,"DIV",{class:!0});var oe=N(vt);_t=_(oe,"H3",{class:!0,"data-svelte-h":!0}),O(_t)!=="svelte-i61rsm"&&(_t.textContent=He),ve=S(oe),Tt=_(oe,"DIV",{class:!0});var We=N(Tt);It=_(We,"DIV",{class:!0});var Ye=N(It);mt=_(Ye,"DIV",{class:!0,"data-svelte-h":!0}),O(mt)!=="svelte-m4szn7"&&(mt.innerHTML=Pe),Ye.forEach(z),We.forEach(z),oe.forEach(z),Nt.forEach(z),me=S($),gt=_($,"DIV",{class:!0});var ae=N(gt);J=_(ae,"DIV",{class:!0});var st=N(J);Mt=_(st,"P",{class:!0,"data-svelte-h":!0}),O(Mt)!=="svelte-ceroz1"&&(Mt.textContent=Fe),ge=S(st),kt=_(st,"H2",{class:!0,"data-svelte-h":!0}),O(kt)!=="svelte-so6kne"&&(kt.textContent=Re),ye=S(st),xt=_(st,"P",{class:!0,"data-svelte-h":!0}),O(xt)!=="svelte-ep3r6m"&&(xt.textContent=Oe),be=S(st),Et=_(st,"INPUT",{type:!0}),we=S(st),At=_(st,"LABEL",{for:!0,"data-svelte-h":!0}),O(At)!=="svelte-1kwkdzm"&&(At.textContent=je),st.forEach(z),Ce=S(ae),yt=_(ae,"DIV",{id:!0,class:!0});var Xe=N(yt);for(let ke=0;ke<G.length;ke+=1)G[ke].l(Xe);Xe.forEach(z),ae.forEach(z),$.forEach(z),this.h()},h(){M(r,"class","page-subtitle"),M(l,"class","page-title"),M(a,"class","description"),M(n,"class","section header"),M(y,"class","section-header"),M(x,"class","component-title"),M(g,"class","description"),M(j,"class","plot"),M(d,"class","component column"),M(Y,"class","component-title"),M(m,"class","description"),M(tt,"id","map"),M(tt,"class","svelte-wd9p4b"),M(F,"class","component column"),M(b,"id","vis-block"),M(b,"class","svelte-wd9p4b"),M(f,"class","section"),M(K,"class","section-header"),M(dt,"class","component-title"),M(pt,"class","plot"),M(zt,"class","row"),M(ut,"class","component singlevis"),M(_t,"class","component-title"),M(mt,"class","plot"),M(It,"class","row"),M(Tt,"class","row"),M(vt,"class","component singlevis"),M(U,"class","section"),M(Mt,"class","section-subtitle"),M(kt,"class","section-title"),M(xt,"class","description"),M(Et,"type","checkbox"),M(At,"for","checkbox"),M(J,"class","section-header"),M(yt,"id","multiple-comp"),M(yt,"class","svelte-wd9p4b"),M(gt,"class","section"),M(e,"class","page-container")},m(X,$){Rt(X,e,$),v(e,n),v(n,r),v(n,s),v(n,l),v(l,u),v(n,i),v(n,a),v(e,h),v(e,f),v(f,y),v(f,E),v(f,b),v(b,d),v(d,x),v(d,L),v(d,g),v(g,A),v(g,B),v(g,k),v(d,I),v(d,j),t[13](j),v(b,W),v(b,F),v(F,Y),v(Y,q),v(Y,Z),v(F,rt),v(F,m),v(F,nt),v(F,tt),t[14](tt),v(e,Wt),v(e,U),v(U,K),v(U,Xt),v(U,ut),v(ut,dt),v(ut,de),v(ut,zt),v(zt,pt),t[15](pt),v(U,pe),v(U,vt),v(vt,_t),v(vt,ve),v(vt,Tt),v(Tt,It),v(It,mt),t[16](mt),v(e,me),v(e,gt),v(gt,J),v(J,Mt),v(J,ge),v(J,kt),v(J,ye),v(J,xt),v(J,be),v(J,Et),Et.checked=t[7],v(J,we),v(J,At),v(gt,Ce),v(gt,yt);for(let R=0;R<G.length;R+=1)G[R]&&G[R].m(yt,null);t[22](e),_e||(qe=Bn(Et,"change",t[17]),_e=!0)},p(X,$){if($[0]&128&&(Et.checked=X[7]),$[0]&184){Vt=Ke(Ve);let R;for(R=0;R<Vt.length;R+=1){const Zt=mn(X,Vt,R);G[R]?G[R].p(Zt,$):(G[R]=gn(Zt),G[R].c(),G[R].m(yt,null))}for(;R<G.length;R+=1)G[R].d(1);G.length=Vt.length}},i:Ze,o:Ze,d(X){X&&z(e),t[13](null),t[14](null),t[15](null),t[16](null),Nn(G,X),t[22](null),_e=!1,qe()}}}let it=400;function Lt(t){const e=t.querySelector("figure");e&&e.remove();const n=t.querySelector("svg");n&&n.remove()}function Bs(t,e,n){let r,o,s,l,c={},u={},i={},a={},p="barchart",h=!1,{data:f}=e;const y=f.LAD,w=f.oneLADData,E=f.oneLADAllCBs,b=f.totalCBAllZones;f.totalCBAllZones;const d=f.allCBAllLAD;f.totalCBAllLAD;const x=f.allCBAllLADSUM,D=f.LADToName;let L,g;In(()=>{L=new dr(y,"LAD",g,"val",!0),L.initMap()});function A(){o?.append(ot({height:it,width:811,MARGINS:at,x:{type:"band"},marks:[Kt(x,bt({y:"mean"},{y:"val",x:"co_benefit_type",dx:rn,fill:Ht,tip:!0})),Kt(E,bt({y:"sum"},{y:"total",x:"co_benefit_type",tip:!0}))]}))}function P(){Ve.forEach(m=>{let H;h?(nn.includes(m)?H=ot({height:it/3,width:500*2,...at,style:{fontSize:"18px"},color:{legend:!0,scheme:"greys"},x:{domain:xn(0,6),ticks:new Set(w.map(Q=>Q[m]))},marks:[un(w,bt({fill:"count"},{x:m,stroke:"black"})),un([Math.floor(Gt(b.map(Q=>Q[m])))],{x:Q=>Q,stroke:"red",fill:null,strokeWidth:2})]}):H=ot({height:it/3,width:500*2,...at,style:{fontSize:"18px"},color:{legend:!0},marks:[ze(w,{x:m,tip:!0}),ze([Gt(w.map(Q=>Q[m]))],{stroke:"blue",strokeWidth:2}),ze([Gt(b.map(Q=>Q[m]))],{stroke:"red",strokeWidth:2})]}),c[m]?.append(H)):(nn.includes(m)?H=ot({height:it/2,width:500,...at,marginLeft:100,x:{grid:!0,label:m,tickFormat:Q=>Math.floor(Q)},style:{fontSize:"18px"},color:{legend:!0},marks:[Kt(b,pn(bt({y:"count"},{x:m,dx:20,fill:Ht}))),Kt(w,pn(bt({y:"count"},{x:m})))]}):H=ot({height:it/2,...at,style:{fontSize:"18px"},marks:[Ae(w,on({y:"proportion"},{x:m,tip:!0,fill:Ht,stroke:Ht,fillOpacity:.2,strokeWidth:3})),Ae(b,on({y:"proportion"},{x:m,tip:!0,fill:"black",stroke:"black",fillOpacity:.2,strokeWidth:3}))]}),u[m]?.append(void 0),c[m]?.append(H));let tt=ot({height:it/2,...at,style:{fontSize:"18px"},color:{range:["rgb(227, 248, 255)","lightblue"]},marks:[fs(pr(b,3e4),{x:m,y:"total",fill:"density",thresholds:10}),Kr(w,{x:m,y:"total",fill:"black",r:2}),Cs(w,{x:m,y:"total"}),fr(),hr({anchor:"bottom"})]});i[m]?.append(tt)})}function B(){for(let m of vr){let H=ot({height:it,width:410,...at,marginRight:0,marginLeft:100,marks:[an(d,tn({x:"mean"},{x:"val",y:"co_benefit_type",dy:-rn/2,fill:Ht,tip:!0})),an(E,tn({x:"mean"},{x:"total",y:"co_benefit_type",tip:!0}))]});a[m]?.append(H)}}function k(){let m=w.flatMap(U=>Ee.map(K=>({time:K,value:U[K],scenario:U.scenario,zone:"local"}))),H=b.flatMap(U=>Ee.map(K=>({time:K,value:U[K],scenario:U.scenario,zone:"UK"}))),nt=m.concat(H);console.log(nt[20]);let tt=ot({height:it,width:800,...at,paddingLeft:200,marginRight:0,x:{tickSize:0,label:null,ticks:[]},color:{range:[mr,Ht]},marks:[Kt(nt,bt({y:"mean"},{x:"zone",y:"value",fx:"time",tip:!0,fill:"zone"}))]});s?.append(tt),wt(s).select("g[aria-label='bar']").selectAll("g").each(function(U,K){const Yt=wt(this).selectAll("rect").nodes()[0],Xt=wt(Yt).attr("transform")||"";wt(Yt).attr("transform",`${Xt} translate(-20, 0)`),wt(this).selectAll("rect").nodes()[0].getAttribute("height"),wt(this).selectAll("rect").nodes()[1].getAttribute("height"),wt(this).selectAll("rect").each(function(dt,te){te==0&&wt(this).raise()})}),ot({height:it,width:800,...at,paddingLeft:200,marginRight:0,color:{legend:!0},marks:[$r(nt,bt({y:"mean"},{x:"time",y:"value",tip:!0,stroke:"scenario"}))]});let Q=E.flatMap(U=>Ee.map(K=>({time:K,value:U[K],cobenefit:U.co_benefit_type}))),Wt=ot({height:it,width:1e3,...at,paddingLeft:200,marginRight:0,insetLeft:10,insetRight:10,insetBottom:30,style:{fontSize:"10px"},y:{tickFormat:".2f",label:"Value (£)"},x:{label:"Year"},color:{legend:!0,range:gr,domain:yr},marks:[Ae(Q,bt({y:"mean"},{x:"time",y:"value",tip:!0,fill:"cobenefit"})),en([0],{strokeWidth:8,stroke:"white",opacity:1,strokeLinecap:"round"}),en([0],{strokeWidth:2,stroke:"#333333",opacity:1,strokeLinecap:"round"})]});l?.append(Wt)}function I(m){ft[m?"unshift":"push"](()=>{o=m,n(0,o)})}function j(m){ft[m?"unshift":"push"](()=>{g=m,n(8,g)})}function T(m){ft[m?"unshift":"push"](()=>{s=m,n(1,s)})}function W(m){ft[m?"unshift":"push"](()=>{l=m,n(2,l)})}function F(){h=this.checked,n(7,h)}function Y(m,H){ft[m?"unshift":"push"](()=>{c[H]=m,n(3,c)})}function et(m,H){ft[m?"unshift":"push"](()=>{c[H]=m,n(3,c)})}function q(m,H){ft[m?"unshift":"push"](()=>{u[H]=m,n(4,u)})}function Z(m,H){ft[m?"unshift":"push"](()=>{i[H]=m,n(5,i)})}function rt(m){ft[m?"unshift":"push"](()=>{r=m,n(6,r)})}return t.$$set=m=>{"data"in m&&n(11,f=m.data)},t.$$.update=()=>{t.$$.dirty[0]&4103&&(o&&Lt(o),s&&Lt(s),l&&Lt(l),A(),k()),t.$$.dirty[0]&56&&(Object.values(c).forEach(m=>{m&&Lt(m)}),Object.values(u).forEach(m=>{m&&Lt(m)}),Object.values(i).forEach(m=>{m&&Lt(m)}),P())},Object.values(a).forEach(m=>{m&&Lt(m)}),B(),[o,s,l,c,u,i,r,h,g,y,D,f,p,I,j,T,W,F,Y,et,q,Z,rt]}class Us extends Vn{constructor(e){super(),Sn(this,e,Bs,Ss,Tn,{data:11},null,[-1,-1])}}export{Us as component};
