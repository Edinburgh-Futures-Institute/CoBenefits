import{s as wt,e as r,a as L,t as oe,c,b as v,g as q,d as ie,f,q as i,i as J,h as n,K as rl,x as je,n as ct,y as dl,L as Xl,v as Lt,j as be,p as x,w as Ae,A as qt,B as Me,H as Jl,G as Tl,D as Ql,T as $l,a0 as Al,a1 as ea,r as ta,F as la,z as pt}from"../chunks/scheduler.BVm0POKv.js";import{S as zt,i as xt,c as bt,b as Ct,m as Dt,t as Pe,a as We,e as Bl,d as Et,g as Hl}from"../chunks/index.C_bTuQvQ.js";import{e as Ge,N as aa,s as sa}from"../chunks/NavigationBar.Bkz2vWZu.js";import{b as de}from"../chunks/paths.cXIroZZX.js";import"../chunks/entry.71bQPymq.js";import{q as Gt,u as na,r as cl,l as oa,ad as Sl,z as ia}from"../chunks/index.DrA8R0kw.js";import{g as fl,C as ul,e as ra,f as ca,r as fa,j as ua,h as da}from"../chunks/globals.B18zH91B.js";import{p as ha,t as va}from"../chunks/percentage.Cu08Svdw.js";import{p as ma}from"../chunks/per_capita.COcMrZFY.js";import{g as jt,q as _a,r as ga,s as pa,p as ba}from"../chunks/duckdb.DwjL38lg.js";import"../chunks/transform.Db-NgJu-.js";import{F as Ca}from"../chunks/Footer.4QomPlPn.js";import{c as il}from"../chunks/dsv.XhNTmijJ.js";function Il(a,e,t){const l=a.slice();return l[10]=e[t],l}function Pl(a){let e,t=Ge(a[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Ml(Il(a,t,s));return{c(){e=r("ul");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=c(s,"UL",{class:!0});var o=v(e);for(let u=0;u<l.length;u+=1)l[u].l(o);o.forEach(f),this.h()},h(){i(e,"class","suggestions svelte-1kj8esc")},m(s,o){J(s,e,o);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null)},p(s,o){if(o&12){t=Ge(s[2]);let u;for(u=0;u<t.length;u+=1){const d=Il(s,t,u);l[u]?l[u].p(d,o):(l[u]=Ml(d),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=t.length}},d(s){s&&f(e),Lt(l,s)}}}function Ml(a){let e,t=a[10][1]+"",l,s,o;function u(){return a[8](a[10])}return{c(){e=r("li"),l=oe(t),this.h()},l(d){e=c(d,"LI",{class:!0});var m=v(e);l=ie(m,t),m.forEach(f),this.h()},h(){i(e,"class","svelte-1kj8esc")},m(d,m){J(d,e,m),n(e,l),s||(o=je(e,"click",u),s=!0)},p(d,m){a=d,m&4&&t!==(t=a[10][1]+"")&&be(l,t)},d(d){d&&f(e),s=!1,o()}}}function Da(a){let e,t,l,s,o,u,d,m,p,g,h=a[2].length&&Pl(a);return{c(){e=r("div"),t=r("div"),l=r("input"),s=L(),o=r("button"),u=oe("See Report"),m=L(),h&&h.c(),this.h()},l(w){e=c(w,"DIV",{class:!0});var b=v(e);t=c(b,"DIV",{class:!0});var C=v(t);l=c(C,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,class:!0}),s=q(C),o=c(C,"BUTTON",{type:!0,class:!0});var S=v(o);u=ie(S,"See Report"),S.forEach(f),C.forEach(f),m=q(b),h&&h.l(b),b.forEach(f),this.h()},h(){i(l,"type","text"),i(l,"placeholder","Type local authority name to search..."),i(l,"autocomplete","off"),i(l,"class","svelte-1kj8esc"),i(o,"type","button"),i(o,"class","search-btn svelte-1kj8esc"),o.disabled=d=!a[1],i(t,"class","input-group svelte-1kj8esc"),i(e,"class","autocomplete svelte-1kj8esc")},m(w,b){J(w,e,b),n(e,t),n(t,l),rl(l,a[0]),n(t,s),n(t,o),n(o,u),n(e,m),h&&h.m(e,null),p||(g=[je(l,"input",a[7]),je(o,"click",a[4])],p=!0)},p(w,[b]){b&1&&l.value!==w[0]&&rl(l,w[0]),b&2&&d!==(d=!w[1])&&(o.disabled=d),w[2].length?h?h.p(w,b):(h=Pl(w),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:ct,o:ct,d(w){w&&f(e),h&&h.d(),p=!1,dl(g)}}}function Ea(a,e,t){let l,s;const o=Xl();let{items:u}=e,d="",m=null;function p([b,C]){t(0,d=C),t(1,m=b),o("select",b),console.log(`Selected code: ${b}`,`Name: ${C}`)}function g(){m&&o("search",m)}function h(){d=this.value,t(0,d)}const w=b=>p(b);return a.$$set=b=>{"items"in b&&t(5,u=b.items)},a.$$.update=()=>{a.$$.dirty&32&&t(6,l=Object.entries(u)),a.$$.dirty&65&&t(2,s=d?l.filter(([b,C])=>C.toLowerCase().includes(d.toLowerCase())).slice(0,10):[])},[d,m,s,p,g,u,l,h,w]}class La extends zt{constructor(e){super(),xt(this,e,Ea,Da,wt,{items:5})}}function Nl(a,e,t){const l=a.slice();return l[11]=e[t],l}function Fl(a){let e,t=(a[6]==="total"?a[8](a[11].total_value,a[1],a[2],a[11].co_benefit_type,a[5]):a[8](a[11].value_per_capita,a[3],a[4],a[11].co_benefit_type,a[5]))+"",l;return{c(){e=new Jl(!1),l=Tl(),this.h()},l(s){e=Ql(s,!1),l=Tl(),this.h()},h(){e.a=l},m(s,o){e.m(t,s,o),J(s,l,o)},p(s,o){o&127&&t!==(t=(s[6]==="total"?s[8](s[11].total_value,s[1],s[2],s[11].co_benefit_type,s[5]):s[8](s[11].value_per_capita,s[3],s[4],s[11].co_benefit_type,s[5]))+"")&&e.p(t)},d(s){s&&(f(l),e.d())}}}function qa(a){let e,t=a[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=r("span"),l=oe(t)},l(s){e=c(s,"SPAN",{});var o=v(e);l=ie(o,t),o.forEach(f)},m(s,o){J(s,e,o),n(e,l)},p(s,o){o&1&&t!==(t=s[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&be(l,t)},d(s){s&&f(e)}}}function wa(a){let e,t=a[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=r("span"),l=oe(t)},l(s){e=c(s,"SPAN",{});var o=v(e);l=ie(o,t),o.forEach(f)},m(s,o){J(s,e,o),n(e,l)},p(s,o){o&1&&t!==(t=s[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&be(l,t)},d(s){s&&f(e)}}}function Ol(a){let e,t,l,s,o,u,d,m=a[7](a[11].co_benefit_type)+"",p,g,h,w,b,C=a[6],S,B,y,E=Fl(a);function _(P,I){return P[6]==="total"?wa:qa}let M=_(a),N=M(a);return{c(){e=r("tr"),t=r("td"),l=r("div"),s=r("img"),u=L(),d=r("a"),p=oe(m),h=L(),w=r("td"),b=r("div"),E.c(),S=L(),B=r("td"),N.c(),y=L(),this.h()},l(P){e=c(P,"TR",{});var I=v(e);t=c(I,"TD",{});var W=v(t);l=c(W,"DIV",{class:!0});var ne=v(l);s=c(ne,"IMG",{src:!0,alt:!0,class:!0}),u=q(ne),d=c(ne,"A",{href:!0,target:!0});var X=v(d);p=ie(X,m),X.forEach(f),ne.forEach(f),W.forEach(f),h=q(I),w=c(I,"TD",{});var j=v(w);b=c(j,"DIV",{class:!0});var V=v(b);E.l(V),V.forEach(f),j.forEach(f),S=q(I),B=c(I,"TD",{});var R=v(B);N.l(R),R.forEach(f),y=q(I),I.forEach(f),this.h()},h(){Me(s.src,o=fl(a[11].co_benefit_type))||i(s,"src",o),i(s,"alt","Icon"),i(s,"class","in-table-icon"),i(d,"href",g=de+"/cobenefit?cobenefit="+a[11].co_benefit_type),i(d,"target","_blank"),i(l,"class","coben-content"),i(b,"class","bar-cell")},m(P,I){J(P,e,I),n(e,t),n(t,l),n(l,s),n(l,u),n(l,d),n(d,p),n(e,h),n(e,w),n(w,b),E.m(b,null),n(e,S),n(e,B),N.m(B,null),n(e,y)},p(P,I){I&1&&!Me(s.src,o=fl(P[11].co_benefit_type))&&i(s,"src",o),I&1&&m!==(m=P[7](P[11].co_benefit_type)+"")&&be(p,m),I&1&&g!==(g=de+"/cobenefit?cobenefit="+P[11].co_benefit_type)&&i(d,"href",g),I&64&&wt(C,C=P[6])?(E.d(1),E=Fl(P),E.c(),E.m(b,null)):E.p(P,I),M===(M=_(P))&&N?N.p(P,I):(N.d(1),N=M(P),N&&(N.c(),N.m(B,null)))},d(P){P&&f(e),E.d(P),N.d()}}}function Va(a){let e,t,l,s="Total",o,u,d="Per Capita",m,p,g,h,w,b="Name",C,S,B=a[6]==="total"?"Total":"Per Capita",y,E,_,M=a[6]==="total"?"£, billion":"£",N,P,I,W,ne,X=Ge(a[0]),j=[];for(let V=0;V<X.length;V+=1)j[V]=Ol(Nl(a,X,V));return{c(){e=r("div"),t=r("div"),l=r("button"),l.textContent=s,o=L(),u=r("button"),u.textContent=d,m=L(),p=r("table"),g=r("thead"),h=r("tr"),w=r("th"),w.textContent=b,C=L(),S=r("th"),y=oe(B),E=L(),_=r("th"),N=oe(M),P=L(),I=r("tbody");for(let V=0;V<j.length;V+=1)j[V].c();this.h()},l(V){e=c(V,"DIV",{class:!0});var R=v(e);t=c(R,"DIV",{class:!0});var O=v(t);l=c(O,"BUTTON",{"data-svelte-h":!0}),x(l)!=="svelte-15mf98g"&&(l.textContent=s),o=q(O),u=c(O,"BUTTON",{"data-svelte-h":!0}),x(u)!=="svelte-1ts3a4f"&&(u.textContent=d),O.forEach(f),R.forEach(f),m=q(V),p=c(V,"TABLE",{class:!0});var Q=v(p);g=c(Q,"THEAD",{});var F=v(g);h=c(F,"TR",{});var Z=v(h);w=c(Z,"TH",{"data-svelte-h":!0}),x(w)!=="svelte-13ju7y1"&&(w.textContent=b),C=q(Z),S=c(Z,"TH",{style:!0});var U=v(S);y=ie(U,B),U.forEach(f),E=q(Z),_=c(Z,"TH",{style:!0});var A=v(_);N=ie(A,M),A.forEach(f),Z.forEach(f),F.forEach(f),P=q(Q),I=c(Q,"TBODY",{});var G=v(I);for(let k=0;k<j.length;k+=1)j[k].l(G);G.forEach(f),Q.forEach(f),this.h()},h(){Ae(l,"selected",a[6]==="total"),Ae(u,"selected",a[6]==="per_capita"),i(t,"class","button-group"),i(e,"class","controls"),qt(S,"width","180px"),qt(_,"width","80px"),i(p,"class","data-table")},m(V,R){J(V,e,R),n(e,t),n(t,l),n(t,o),n(t,u),J(V,m,R),J(V,p,R),n(p,g),n(g,h),n(h,w),n(h,C),n(h,S),n(S,y),n(h,E),n(h,_),n(_,N),n(p,P),n(p,I);for(let O=0;O<j.length;O+=1)j[O]&&j[O].m(I,null);W||(ne=[je(l,"click",a[9]),je(u,"click",a[10])],W=!0)},p(V,[R]){if(R&64&&Ae(l,"selected",V[6]==="total"),R&64&&Ae(u,"selected",V[6]==="per_capita"),R&64&&B!==(B=V[6]==="total"?"Total":"Per Capita")&&be(y,B),R&64&&M!==(M=V[6]==="total"?"£, billion":"£")&&be(N,M),R&511){X=Ge(V[0]);let O;for(O=0;O<X.length;O+=1){const Q=Nl(V,X,O);j[O]?j[O].p(Q,R):(j[O]=Ol(Q),j[O].c(),j[O].m(I,null))}for(;O<j.length;O+=1)j[O].d(1);j.length=X.length}},i:ct,o:ct,d(V){V&&(f(e),f(m),f(p)),Lt(j,V),W=!1,dl(ne)}}}function ka(a,e,t){let{aggregationPerCapitaPerBenefit:l}=e,{minCoBenefValue:s}=e,{maxCoBenefValue:o}=e,{minHHCoBenefValue:u}=e,{maxHHCoBenefValue:d}=e,{COBENEFS_SCALE:m}=e;function p(C){return ul.find(S=>S.id===C)?.label??C}let g="total";function h(C,S,B,y,E){const _=E(y);return Gt({width:100,height:20,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,x:{domain:[S,B],axis:null},marks:[na([0],{stroke:"#3C3C3C"}),cl([C],{x:N=>N,y:0,fill:_})]}).outerHTML}const w=()=>t(6,g="total"),b=()=>t(6,g="per_capita");return a.$$set=C=>{"aggregationPerCapitaPerBenefit"in C&&t(0,l=C.aggregationPerCapitaPerBenefit),"minCoBenefValue"in C&&t(1,s=C.minCoBenefValue),"maxCoBenefValue"in C&&t(2,o=C.maxCoBenefValue),"minHHCoBenefValue"in C&&t(3,u=C.minHHCoBenefValue),"maxHHCoBenefValue"in C&&t(4,d=C.maxHHCoBenefValue),"COBENEFS_SCALE"in C&&t(5,m=C.COBENEFS_SCALE)},[l,s,o,u,d,m,g,p,h,w,b]}class ya extends zt{constructor(e){super(),xt(this,e,ka,Va,wt,{aggregationPerCapitaPerBenefit:0,minCoBenefValue:1,maxCoBenefValue:2,minHHCoBenefValue:3,maxHHCoBenefValue:4,COBENEFS_SCALE:5})}}function Rl(a,e,t){const l=a.slice();return l[16]=e[t],l}function Ul(a,e,t){const l=a.slice();return l[19]=e[t],l}function jl(a){let e,t=a[19].label+"",l;return{c(){e=r("option"),l=oe(t),this.h()},l(s){e=c(s,"OPTION",{});var o=v(e);l=ie(o,t),o.forEach(f),this.h()},h(){e.__value=a[19].value,rl(e,e.__value)},m(s,o){J(s,e,o),n(e,l)},p:ct,d(s){s&&f(e)}}}function Ta(a){let e,t=a[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=r("span"),l=oe(t)},l(s){e=c(s,"SPAN",{});var o=v(e);l=ie(o,t),o.forEach(f)},m(s,o){J(s,e,o),n(e,l)},p(s,o){o&2&&t!==(t=s[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&be(l,t)},d(s){s&&f(e)}}}function Aa(a){let e,t=a[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=r("span"),l=oe(t)},l(s){e=c(s,"SPAN",{});var o=v(e);l=ie(o,t),o.forEach(f)},m(s,o){J(s,e,o),n(e,l)},p(s,o){o&2&&t!==(t=s[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&be(l,t)},d(s){s&&f(e)}}}function Gl(a){let e,t,l,s=(a[5][a[16].LAD]??a[16].LAD)+"",o,u,d,m,p,g,h=(a[2]==="total"?a[9](a[16].total_value,a[3]):a[10](a[16].value_per_capita,a[4]))+"",w,b,C;function S(E,_){return E[2]==="total"?Aa:Ta}let B=S(a),y=B(a);return{c(){e=r("tr"),t=r("td"),l=r("a"),o=oe(s),d=L(),m=r("td"),p=r("div"),g=new Jl(!1),w=L(),b=r("td"),y.c(),C=L(),this.h()},l(E){e=c(E,"TR",{});var _=v(e);t=c(_,"TD",{});var M=v(t);l=c(M,"A",{href:!0,target:!0});var N=v(l);o=ie(N,s),N.forEach(f),M.forEach(f),d=q(_),m=c(_,"TD",{});var P=v(m);p=c(P,"DIV",{class:!0});var I=v(p);g=Ql(I,!1),I.forEach(f),P.forEach(f),w=q(_),b=c(_,"TD",{});var W=v(b);y.l(W),W.forEach(f),C=q(_),_.forEach(f),this.h()},h(){i(l,"href",u=de+"/location?location="+a[16].LAD),i(l,"target","_blank"),g.a=null,i(p,"class","bar-cell")},m(E,_){J(E,e,_),n(e,t),n(t,l),n(l,o),n(e,d),n(e,m),n(m,p),g.m(h,p),n(e,w),n(e,b),y.m(b,null),n(e,C)},p(E,_){_&34&&s!==(s=(E[5][E[16].LAD]??E[16].LAD)+"")&&be(o,s),_&2&&u!==(u=de+"/location?location="+E[16].LAD)&&i(l,"href",u),_&30&&h!==(h=(E[2]==="total"?E[9](E[16].total_value,E[3]):E[10](E[16].value_per_capita,E[4]))+"")&&g.p(h),B===(B=S(E))&&y?y.p(E,_):(y.d(1),y=B(E),y&&(y.c(),y.m(b,null)))},d(E){E&&f(e),y.d()}}}function Ba(a){let e,t,l="Nation:",s,o,u,d,m,p="Total",g,h,w="Per Capita",b,C,S,B,y,E='Name <span style="font-weight:300; color: #545454">(Top 12 in display)</span>',_,M,N=a[2]==="total"?"Total":"Per Capita",P,I,W,ne=a[2]==="total"?"£, billion":"£",X,j,V,R,O,Q=Ge(a[7]),F=[];for(let A=0;A<Q.length;A+=1)F[A]=jl(Ul(a,Q,A));let Z=Ge(a[1]),U=[];for(let A=0;A<Z.length;A+=1)U[A]=Gl(Rl(a,Z,A));return{c(){e=r("div"),t=r("label"),t.textContent=l,s=L(),o=r("select");for(let A=0;A<F.length;A+=1)F[A].c();u=L(),d=r("div"),m=r("button"),m.textContent=p,g=L(),h=r("button"),h.textContent=w,b=L(),C=r("table"),S=r("thead"),B=r("tr"),y=r("th"),y.innerHTML=E,_=L(),M=r("th"),P=oe(N),I=L(),W=r("th"),X=oe(ne),j=L(),V=r("tbody");for(let A=0;A<U.length;A+=1)U[A].c();this.h()},l(A){e=c(A,"DIV",{class:!0});var G=v(e);t=c(G,"LABEL",{"data-svelte-h":!0}),x(t)!=="svelte-1ecnfnj"&&(t.textContent=l),s=q(G),o=c(G,"SELECT",{});var k=v(o);for(let Le=0;Le<F.length;Le+=1)F[Le].l(k);k.forEach(f),u=q(G),d=c(G,"DIV",{class:!0});var $=v(d);m=c($,"BUTTON",{"data-svelte-h":!0}),x(m)!=="svelte-2dev6e"&&(m.textContent=p),g=q($),h=c($,"BUTTON",{"data-svelte-h":!0}),x(h)!=="svelte-1q4fgxf"&&(h.textContent=w),$.forEach(f),G.forEach(f),b=q(A),C=c(A,"TABLE",{class:!0});var Ce=v(C);S=c(Ce,"THEAD",{});var Ne=v(S);B=c(Ne,"TR",{});var Ve=v(B);y=c(Ve,"TH",{"data-svelte-h":!0}),x(y)!=="svelte-1homman"&&(y.innerHTML=E),_=q(Ve),M=c(Ve,"TH",{style:!0});var Ye=v(M);P=ie(Ye,N),Ye.forEach(f),I=q(Ve),W=c(Ve,"TH",{style:!0});var Fe=v(W);X=ie(Fe,ne),Fe.forEach(f),Ve.forEach(f),Ne.forEach(f),j=q(Ce),V=c(Ce,"TBODY",{});var ke=v(V);for(let Le=0;Le<U.length;Le+=1)U[Le].l(ke);ke.forEach(f),Ce.forEach(f),this.h()},h(){a[0]===void 0&&$l(()=>a[13].call(o)),Ae(m,"selected",a[2]==="total"),Ae(h,"selected",a[2]==="per_capita"),i(d,"class","button-group"),i(e,"class","controls"),qt(M,"width","120px"),qt(W,"width","80px"),i(C,"class","data-table")},m(A,G){J(A,e,G),n(e,t),n(e,s),n(e,o);for(let k=0;k<F.length;k+=1)F[k]&&F[k].m(o,null);Al(o,a[0],!0),n(e,u),n(e,d),n(d,m),n(d,g),n(d,h),J(A,b,G),J(A,C,G),n(C,S),n(S,B),n(B,y),n(B,_),n(B,M),n(M,P),n(B,I),n(B,W),n(W,X),n(C,j),n(C,V);for(let k=0;k<U.length;k+=1)U[k]&&U[k].m(V,null);R||(O=[je(o,"change",a[13]),je(o,"change",a[8]),je(m,"click",a[14]),je(h,"click",a[15])],R=!0)},p(A,[G]){if(G&128){Q=Ge(A[7]);let k;for(k=0;k<Q.length;k+=1){const $=Ul(A,Q,k);F[k]?F[k].p($,G):(F[k]=jl($),F[k].c(),F[k].m(o,null))}for(;k<F.length;k+=1)F[k].d(1);F.length=Q.length}if(G&129&&Al(o,A[0]),G&4&&Ae(m,"selected",A[2]==="total"),G&4&&Ae(h,"selected",A[2]==="per_capita"),G&4&&N!==(N=A[2]==="total"?"Total":"Per Capita")&&be(P,N),G&4&&ne!==(ne=A[2]==="total"?"£, billion":"£")&&be(X,ne),G&1598){Z=Ge(A[1]);let k;for(k=0;k<Z.length;k+=1){const $=Rl(A,Z,k);U[k]?U[k].p($,G):(U[k]=Gl($),U[k].c(),U[k].m(V,null))}for(;k<U.length;k+=1)U[k].d(1);U.length=Z.length}},i:ct,o:ct,d(A){A&&(f(e),f(b),f(C)),Lt(F,A),Lt(U,A),R=!1,dl(O)}}}function Ha(a,e,t){const l=Xl();let{ladData:s=[]}=e,{region:o}=e,{sortBy:u}=e,{maxLADValue:d}=e,{maxHHLADValue:m}=e,{LADToName:p={}}=e,{viewMode:g="total"}=e,{selectedRegion:h="All"}=e;const w=[{label:"All",value:"All"},{label:"England",value:"England"},{label:"Wales",value:"Wales"},{label:"Scotland",value:"Scotland"},{label:"Northern Ireland",value:"NI"}];function b(_){l("filterChange",{region:_.target.value,sortBy:u})}function C(_,M){return Gt({width:80,height:20,margin:0,x:{domain:[0,M],axis:null},marks:[cl([_],{x:P=>P,y:0,fill:"#ccc"})]}).outerHTML}function S(_,M){return Gt({width:80,height:20,margin:0,x:{domain:[0,M],axis:null},marks:[cl([_],{x:P=>P,y:0,fill:"#ccc"})]}).outerHTML}function B(){o=ea(this),t(0,o),t(7,w)}const y=()=>l("filterChange",{region:o,sortBy:"total"}),E=()=>l("filterChange",{region:o,sortBy:"per_capita"});return a.$$set=_=>{"ladData"in _&&t(1,s=_.ladData),"region"in _&&t(0,o=_.region),"sortBy"in _&&t(2,u=_.sortBy),"maxLADValue"in _&&t(3,d=_.maxLADValue),"maxHHLADValue"in _&&t(4,m=_.maxHHLADValue),"LADToName"in _&&t(5,p=_.LADToName),"viewMode"in _&&t(11,g=_.viewMode),"selectedRegion"in _&&t(12,h=_.selectedRegion)},[o,s,u,d,m,p,l,w,b,C,S,g,h,B,y,E]}class Sa extends zt{constructor(e){super(),xt(this,e,Ha,Ba,wt,{ladData:1,region:0,sortBy:2,maxLADValue:3,maxHHLADValue:4,LADToName:5,viewMode:11,selectedRegion:12})}}function zl(a,e,t){const l=a.slice();return l[51]=e[t],l[53]=t,l}function xl(a){let e,t,l,s,o,u,d;return{c(){e=r("div"),t=r("img"),o=L(),u=r("img"),this.h()},l(m){e=c(m,"DIV",{class:!0});var p=v(e);t=c(p,"IMG",{class:!0,src:!0,alt:!0}),o=q(p),u=c(p,"IMG",{class:!0,src:!0,alt:!0}),p.forEach(f),this.h()},h(){i(t,"class","slide-image"),Me(t.src,l=a[51].image)||i(t,"src",l),i(t,"alt",s=a[51].label),i(u,"class","slide-map svelte-1t9qd00"),Me(u.src,d=a[51].mapImage)||i(u,"src",d),i(u,"alt","Map overlay"),i(e,"class","hero-slide svelte-1t9qd00"),Ae(e,"active",a[53]===a[24]),Ae(e,"previous",a[53]===a[25])},m(m,p){J(m,e,p),n(e,t),n(e,o),n(e,u)},p(m,p){p[0]&2097152&&!Me(t.src,l=m[51].image)&&i(t,"src",l),p[0]&2097152&&s!==(s=m[51].label)&&i(t,"alt",s),p[0]&2097152&&!Me(u.src,d=m[51].mapImage)&&i(u,"src",d),p[0]&16777216&&Ae(e,"active",m[53]===m[24]),p[0]&33554432&&Ae(e,"previous",m[53]===m[25])},d(m){m&&f(e)}}}function Wl(a){let e,t,l;return{c(){e=r("div"),t=r("img"),this.h()},l(s){e=c(s,"DIV",{class:!0});var o=v(e);t=c(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(f),this.h()},h(){Me(t.src,l=a[20])||i(t,"src",l),i(t,"alt","Icon"),i(t,"class","svelte-1t9qd00"),i(e,"class","waffle-icon svelte-1t9qd00")},m(s,o){J(s,e,o),n(e,t)},p(s,o){o[0]&1048576&&!Me(t.src,l=s[20])&&i(t,"src",l)},d(s){s&&f(e)}}}function Ia(a){let e,t="National costs";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-o12owz"&&(e.textContent=t),this.h()},h(){i(e,"class","waffle-caption svelte-1t9qd00")},m(l,s){J(l,e,s)},d(l){l&&f(e)}}}function Pa(a){let e,t="National benefits";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-10ytukz"&&(e.textContent=t),this.h()},h(){i(e,"class","waffle-caption svelte-1t9qd00")},m(l,s){J(l,e,s)},d(l){l&&f(e)}}}function Ma(a){let e,t="Per capita costs";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-6pmcl0"&&(e.textContent=t),this.h()},h(){i(e,"class","waffle-caption svelte-1t9qd00")},m(l,s){J(l,e,s)},d(l){l&&f(e)}}}function Na(a){let e,t="Per capita benefits";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-g1rvwk"&&(e.textContent=t),this.h()},h(){i(e,"class","waffle-caption svelte-1t9qd00")},m(l,s){J(l,e,s)},d(l){l&&f(e)}}}function Yl(a){let e,t,l,s,o,u,d,m,p,g,h="%",w,b,C="Contribution";return{c(){e=r("div"),t=r("div"),l=r("img"),o=L(),u=r("div"),d=r("span"),m=oe(a[19]),p=L(),g=r("span"),g.textContent=h,w=L(),b=r("div"),b.textContent=C,this.h()},l(S){e=c(S,"DIV",{class:!0});var B=v(e);t=c(B,"DIV",{class:!0});var y=v(t);l=c(y,"IMG",{class:!0,src:!0,alt:!0}),o=q(y),u=c(y,"DIV",{class:!0});var E=v(u);d=c(E,"SPAN",{class:!0});var _=v(d);m=ie(_,a[19]),_.forEach(f),p=q(E),g=c(E,"SPAN",{class:!0,"data-svelte-h":!0}),x(g)!=="svelte-jxggz7"&&(g.textContent=h),E.forEach(f),y.forEach(f),w=q(B),b=c(B,"DIV",{class:!0,"data-svelte-h":!0}),x(b)!=="svelte-1ahdmih"&&(b.textContent=C),B.forEach(f),this.h()},h(){i(l,"class","aggregation-icon-small svelte-1t9qd00"),Me(l.src,s=ha)||i(l,"src",s),i(l,"alt","icon"),i(d,"class","waffle-big svelte-1t9qd00"),i(g,"class","small svelte-1t9qd00"),i(u,"class","waffle-value svelte-1t9qd00"),i(t,"class","waffle-value-container svelte-1t9qd00"),i(b,"class","waffle-caption svelte-1t9qd00"),i(e,"class","waffle-stat svelte-1t9qd00")},m(S,B){J(S,e,B),n(e,t),n(t,l),n(t,o),n(t,u),n(u,d),n(d,m),n(u,p),n(u,g),n(e,w),n(e,b)},p(S,B){B[0]&524288&&be(m,S[19])},d(S){S&&f(e)}}}function Zl(a){let e,t;return e=new Sa({props:{ladData:a[8],region:a[9],sortBy:a[10],maxLADValue:a[11],maxHHLADValue:a[12],LADToName:a[0]}}),e.$on("filterChange",a[27]),{c(){bt(e.$$.fragment)},l(l){Ct(e.$$.fragment,l)},m(l,s){Dt(e,l,s),t=!0},p(l,s){const o={};s[0]&256&&(o.ladData=l[8]),s[0]&512&&(o.region=l[9]),s[0]&1024&&(o.sortBy=l[10]),s[0]&2048&&(o.maxLADValue=l[11]),s[0]&4096&&(o.maxHHLADValue=l[12]),s[0]&1&&(o.LADToName=l[0]),e.$set(o)},i(l){t||(Pe(e.$$.fragment,l),t=!0)},o(l){We(e.$$.fragment,l),t=!1},d(l){Et(e,l)}}}function Kl(a){let e,t;return e=new ya({props:{aggregationPerCapitaPerBenefit:a[2],minCoBenefValue:a[4],maxCoBenefValue:a[3],minHHCoBenefValue:a[5],maxHHCoBenefValue:a[6],COBENEFS_SCALE:ra}}),{c(){bt(e.$$.fragment)},l(l){Ct(e.$$.fragment,l)},m(l,s){Dt(e,l,s),t=!0},p(l,s){const o={};s[0]&4&&(o.aggregationPerCapitaPerBenefit=l[2]),s[0]&16&&(o.minCoBenefValue=l[4]),s[0]&8&&(o.maxCoBenefValue=l[3]),s[0]&32&&(o.minHHCoBenefValue=l[5]),s[0]&64&&(o.maxHHCoBenefValue=l[6]),e.$set(o)},i(l){t||(Pe(e.$$.fragment,l),t=!0)},o(l){We(e.$$.fragment,l),t=!1},d(l){Et(e,l)}}}function Fa(a){let e,t,l,s,o,u,d,m=`<img src="${de}/atlas-logos/logo-colored-waffle-png.png" alt="Logo" height="0px"/> <h1 class="hero-title svelte-1t9qd00">The Co-Benefits of Reaching <br/> Net Zero in the UK</h1> <p class="hero-description svelte-1t9qd00">Climate actions lower greenhouse gas (GHG) emissions but the gains for society reach further. The
                    CO-BENS project models 11 additional benefits based on actions recommended by the Climate Change
                    Committee (CCC) in its Seventh Carbon Budget (2025) across 45,000 communities and regions within the
                    UK.<br/></p> <p class="hero-description svelte-1t9qd00">Explore how, when and for whom benefits emerge to further understand connections between a wide
                    range of
                    social, economic and environmental priorities, and drive more effective decision-making.</p> <p class="hero-description svelte-1t9qd00">To understand more about the analysis or if you would like bespoke co-benefit modelling please get
                    in
                    touch by emailing <a href="mailto:cobens@ed.ac.uk">cobens@ed.ac.uk</a></p>`,p,g,h,w,b,C,S,B,y,E,_,M,N,P,I,W,ne,X,j,V,R="billion",O,Q,F,Z,U,A,G,k,$,Ce,Ne,Ve,Ye,Fe,ke,Le,Oe,Vt="Co-benefits",_t,Ze,gt,D,K,re,te="Negative impacts",qe,ee,z,he,Re="Explore the Atlas",le,ye,De,ve,ft="Find My Place",tt,we,me,Be,H,ce,He,Ue="Browse Report Pages",ut,Ee,Ke,hl=`<div class="explore-page svelte-1t9qd00"><img src="${de}/pages-teasers/coben.png" alt="Open Co-Benefits Dropdown"/> <h3 class="svelte-1t9qd00">11 Co-Benefits Pages</h3> <p class="svelte-1t9qd00">A Co-benefit page shows the spatial and temporal distribution of a given co-benefit, and
                                its relationship with socio-economic factors.</p></div>`,Wt,Xe,vl=`<div class="explore-page svelte-1t9qd00"><img class="page-teaser-img svelte-1t9qd00" src="${de}/pages-teasers/location.png"/> <h3 class="svelte-1t9qd00">382 Local Area Pages</h3> <p class="svelte-1t9qd00">A Local Area page shows the different co-benefits in this area, temporal distributions,
                                and their relationships with local socio-economic distributions.</p></div>`,Yt,Je,ml=`<div class="explore-page svelte-1t9qd00"><img class="page-teaser-img svelte-1t9qd00" src="${de}/pages-teasers/sef.png"/> <h3 class="svelte-1t9qd00">17 Socio-Economic Factors Pages</h3> <p class="svelte-1t9qd00">A Socio-Economic Factor Page shows the spatial distribution of a given factor and it&#39;s
                                relationships with the different co-benefits.</p></div>`,Zt,Qe,_l=`<div class="explore-page svelte-1t9qd00"><img class="page-teaser-img svelte-1t9qd00" src="${de}/pages-teasers/map.png"/> <h3 class="svelte-1t9qd00">Interactive Map</h3> <p class="svelte-1t9qd00">The interactive map enables exploring the spatial distributions of both the co-benefits
                                and the socio-economic factors at the datazones and local area levels.</p></div>`,Kt,lt,gl=`<h1>Read Stories and Analyses</h1> <hr class="story-teaser-hr svelte-1t9qd00"/> <div class="explore-pages story-pages svelte-1t9qd00"><a href="/stories/story.pdf" target="_blank" rel="noopener noreferrer" class="svelte-1t9qd00"><div class="story svelte-1t9qd00"><img class="story-teaser-img svelte-1t9qd00" src="${de}/stories/Derry_picture_new.png"/> <h3 class="svelte-1t9qd00">Accelerating climate financing in Derry City and Strabane District Council</h3> <hr class="story-teaser-hr svelte-1t9qd00"/></div></a></div> <div class="explore-pages story-pages svelte-1t9qd00"><div class="story svelte-1t9qd00"><br/> <h3 class="svelte-1t9qd00">More to come...</h3> <p>In the meantime, if you have your own ideas for collaboration on stories related to
                            co-benefits please get in touch using the
                            <a href="https://docs.google.com/forms/d/1w-8Lt9bESZ56PdklTIT38plec7dPgDbJtORkatoXFVY/viewform?edit_requested=true" class="svelte-1t9qd00">feedback
                                form.</a></p></div></div>`,Xt,$e,Se,at,pl="Explore by Local Authority",Jt,st,bl="Click to see local authority data report.",Qt,$t,Ie,nt,Cl="Explore by Co-Benefit",el,ot,Dl="Click to see each co-benefit data report.",tl,ll,it,rt,al,El;t=new aa({});let dt=Ge(a[21]),fe=[];for(let T=0;T<dt.length;T+=1)fe[T]=xl(zl(a,dt,T));let _e=a[20]&&Wl(a);function Ll(T,Y){return T[17]>0?Pa:Ia}let kt=Ll(a),ze=kt(a);function ql(T,Y){return T[18]>0?Na:Ma}let yt=ql(a),xe=yt(a),ge=a[23]!==null&&Yl(a);me=new La({props:{items:a[0]}}),me.$on("search",a[34]);let ae=!a[7]&&Zl(a),se=!a[7]&&Kl(a);return it=new Ca({}),{c(){e=r("div"),bt(t.$$.fragment),l=L(),s=r("section");for(let T=0;T<fe.length;T+=1)fe[T].c();o=L(),u=r("div"),d=r("div"),d.innerHTML=m,p=L(),g=r("div"),h=r("div"),w=r("div"),_e&&_e.c(),b=L(),C=r("div"),S=oe(a[16]),B=L(),y=r("div"),E=r("div"),_=r("div"),M=r("img"),P=L(),I=r("div"),W=r("span"),ne=oe("£"),X=oe(a[17]),j=L(),V=r("span"),V.textContent=R,O=L(),ze.c(),Q=L(),F=r("div"),Z=r("div"),U=r("img"),G=L(),k=r("div"),$=r("span"),Ce=oe("£"),Ne=oe(a[18]),Ve=L(),xe.c(),Ye=L(),ge&&ge.c(),Fe=L(),ke=r("div"),Le=L(),Oe=r("span"),Oe.textContent=Vt,_t=L(),Ze=r("div"),gt=L(),D=r("div"),K=L(),re=r("span"),re.textContent=te,qe=L(),ee=r("section"),z=r("div"),he=r("h1"),he.textContent=Re,le=L(),ye=r("div"),De=r("div"),ve=r("h1"),ve.textContent=ft,tt=L(),we=r("div"),bt(me.$$.fragment),Be=L(),H=r("div"),ce=r("div"),He=r("h2"),He.textContent=Ue,ut=L(),Ee=r("div"),Ke=r("div"),Ke.innerHTML=hl,Wt=L(),Xe=r("a"),Xe.innerHTML=vl,Yt=L(),Je=r("a"),Je.innerHTML=ml,Zt=L(),Qe=r("a"),Qe.innerHTML=_l,Kt=L(),lt=r("div"),lt.innerHTML=gl,Xt=L(),$e=r("section"),Se=r("div"),at=r("h2"),at.textContent=pl,Jt=L(),st=r("p"),st.textContent=bl,Qt=L(),ae&&ae.c(),$t=L(),Ie=r("div"),nt=r("h2"),nt.textContent=Cl,el=L(),ot=r("p"),ot.textContent=Dl,tl=L(),se&&se.c(),ll=L(),bt(it.$$.fragment),this.h()},l(T){e=c(T,"DIV",{});var Y=v(e);Ct(t.$$.fragment,Y),l=q(Y),s=c(Y,"SECTION",{class:!0});var Te=v(s);for(let ol=0;ol<fe.length;ol+=1)fe[ol].l(Te);o=q(Te),u=c(Te,"DIV",{class:!0});var ue=v(u);d=c(ue,"DIV",{class:!0,"data-svelte-h":!0}),x(d)!=="svelte-8289tn"&&(d.innerHTML=m),p=q(ue),g=c(ue,"DIV",{class:!0});var pe=v(g);h=c(pe,"DIV",{class:!0});var Tt=v(h);w=c(Tt,"DIV",{class:!0});var At=v(w);_e&&_e.l(At),b=q(At),C=c(At,"DIV",{class:!0});var wl=v(C);S=ie(wl,a[16]),wl.forEach(f),At.forEach(f),B=q(Tt),y=c(Tt,"DIV",{class:!0});var ht=v(y);E=c(ht,"DIV",{class:!0});var Bt=v(E);_=c(Bt,"DIV",{class:!0});var Ht=v(_);M=c(Ht,"IMG",{class:!0,src:!0,alt:!0}),P=q(Ht),I=c(Ht,"DIV",{class:!0});var St=v(I);W=c(St,"SPAN",{class:!0});var sl=v(W);ne=ie(sl,"£"),X=ie(sl,a[17]),sl.forEach(f),j=q(St),V=c(St,"SPAN",{class:!0,"data-svelte-h":!0}),x(V)!=="svelte-tlhydp"&&(V.textContent=R),St.forEach(f),Ht.forEach(f),O=q(Bt),ze.l(Bt),Bt.forEach(f),Q=q(ht),F=c(ht,"DIV",{class:!0});var It=v(F);Z=c(It,"DIV",{class:!0});var Pt=v(Z);U=c(Pt,"IMG",{class:!0,src:!0,alt:!0}),G=q(Pt),k=c(Pt,"DIV",{class:!0});var Vl=v(k);$=c(Vl,"SPAN",{class:!0});var nl=v($);Ce=ie(nl,"£"),Ne=ie(nl,a[18]),nl.forEach(f),Vl.forEach(f),Pt.forEach(f),Ve=q(It),xe.l(It),It.forEach(f),Ye=q(ht),ge&&ge.l(ht),ht.forEach(f),Tt.forEach(f),Fe=q(pe),ke=c(pe,"DIV",{class:!0}),v(ke).forEach(f),Le=q(pe),Oe=c(pe,"SPAN",{id:!0,class:!0,"data-svelte-h":!0}),x(Oe)!=="svelte-17e5mfb"&&(Oe.textContent=Vt),_t=q(pe),Ze=c(pe,"DIV",{class:!0}),v(Ze).forEach(f),gt=q(pe),D=c(pe,"DIV",{id:!0,class:!0}),v(D).forEach(f),K=q(pe),re=c(pe,"SPAN",{id:!0,class:!0,"data-svelte-h":!0}),x(re)!=="svelte-t2ovnm"&&(re.textContent=te),pe.forEach(f),ue.forEach(f),Te.forEach(f),qe=q(Y),ee=c(Y,"SECTION",{id:!0,class:!0});var Mt=v(ee);z=c(Mt,"DIV",{class:!0});var Nt=v(z);he=c(Nt,"H1",{id:!0,class:!0,"data-svelte-h":!0}),x(he)!=="svelte-157b9z3"&&(he.textContent=Re),le=q(Nt),ye=c(Nt,"DIV",{class:!0});var kl=v(ye);De=c(kl,"DIV",{class:!0});var Ft=v(De);ve=c(Ft,"H1",{class:!0,"data-svelte-h":!0}),x(ve)!=="svelte-2t7dxi"&&(ve.textContent=ft),tt=q(Ft),we=c(Ft,"DIV",{class:!0});var yl=v(we);Ct(me.$$.fragment,yl),yl.forEach(f),Ft.forEach(f),kl.forEach(f),Nt.forEach(f),Be=q(Mt),H=c(Mt,"DIV",{id:!0,class:!0});var Ot=v(H);ce=c(Ot,"DIV",{class:!0});var Rt=v(ce);He=c(Rt,"H2",{"data-svelte-h":!0}),x(He)!=="svelte-1ig97qq"&&(He.textContent=Ue),ut=q(Rt),Ee=c(Rt,"DIV",{class:!0});var et=v(Ee);Ke=c(et,"DIV",{style:!0,"data-svelte-h":!0}),x(Ke)!=="svelte-lq89xs"&&(Ke.innerHTML=hl),Wt=q(et),Xe=c(et,"A",{href:!0,class:!0,"data-svelte-h":!0}),x(Xe)!=="svelte-13xts9j"&&(Xe.innerHTML=vl),Yt=q(et),Je=c(et,"A",{href:!0,class:!0,"data-svelte-h":!0}),x(Je)!=="svelte-1j5qio4"&&(Je.innerHTML=ml),Zt=q(et),Qe=c(et,"A",{href:!0,class:!0,"data-svelte-h":!0}),x(Qe)!=="svelte-dihjqi"&&(Qe.innerHTML=_l),et.forEach(f),Rt.forEach(f),Kt=q(Ot),lt=c(Ot,"DIV",{class:!0,"data-svelte-h":!0}),x(lt)!=="svelte-m08525"&&(lt.innerHTML=gl),Ot.forEach(f),Mt.forEach(f),Xt=q(Y),$e=c(Y,"SECTION",{class:!0});var Ut=v($e);Se=c(Ut,"DIV",{class:!0});var vt=v(Se);at=c(vt,"H2",{class:!0,"data-svelte-h":!0}),x(at)!=="svelte-pgup4c"&&(at.textContent=pl),Jt=q(vt),st=c(vt,"P",{class:!0,"data-svelte-h":!0}),x(st)!=="svelte-owmq24"&&(st.textContent=bl),Qt=q(vt),ae&&ae.l(vt),vt.forEach(f),$t=q(Ut),Ie=c(Ut,"DIV",{class:!0});var mt=v(Ie);nt=c(mt,"H2",{class:!0,"data-svelte-h":!0}),x(nt)!=="svelte-9nk5va"&&(nt.textContent=Cl),el=q(mt),ot=c(mt,"P",{class:!0,"data-svelte-h":!0}),x(ot)!=="svelte-4140on"&&(ot.textContent=Dl),tl=q(mt),se&&se.l(mt),mt.forEach(f),Ut.forEach(f),ll=q(Y),Ct(it.$$.fragment,Y),Y.forEach(f),this.h()},h(){i(d,"class","hero-text svelte-1t9qd00"),i(C,"class","waffle-title svelte-1t9qd00"),i(w,"class","waffle-header svelte-1t9qd00"),i(M,"class","aggregation-icon-small svelte-1t9qd00"),Me(M.src,N=va)||i(M,"src",N),i(M,"alt","icon"),i(W,"class","waffle-big svelte-1t9qd00"),i(V,"class","small svelte-1t9qd00"),i(I,"class","waffle-value svelte-1t9qd00"),i(_,"class","waffle-value-container svelte-1t9qd00"),i(E,"class","waffle-stat svelte-1t9qd00"),i(U,"class","aggregation-icon-small svelte-1t9qd00"),Me(U.src,A=ma)||i(U,"src",A),i(U,"alt","icon"),i($,"class","waffle-big svelte-1t9qd00"),i(k,"class","waffle-value svelte-1t9qd00"),i(Z,"class","waffle-value-container svelte-1t9qd00"),i(F,"class","waffle-stat svelte-1t9qd00"),i(y,"class","waffle-stats svelte-1t9qd00"),i(h,"class","waffle-label svelte-1t9qd00"),i(ke,"class","waffle-bg svelte-1t9qd00"),i(Oe,"id","waffleTopLabel"),i(Oe,"class","waffle-text svelte-1t9qd00"),i(Ze,"class","waffle"),i(D,"id","waffleLabels"),i(D,"class","waffle-chart-labels svelte-1t9qd00"),i(re,"id","waffleBottomLabel"),i(re,"class","waffle-text svelte-1t9qd00"),i(g,"class","waffle-overlay svelte-1t9qd00"),i(u,"class","hero-content svelte-1t9qd00"),i(s,"class","hero-container svelte-1t9qd00"),i(he,"id","explore-title"),i(he,"class","svelte-1t9qd00"),i(ve,"class","search-label svelte-1t9qd00"),i(we,"class","search-container svelte-1t9qd00"),i(De,"class","search-label-and-input svelte-1t9qd00"),i(ye,"class","explore-block search-section svelte-1t9qd00"),i(z,"class","explore-header svelte-1t9qd00"),qt(Ke,"cursor","pointer"),i(Xe,"href",de+"/lad"),i(Xe,"class","svelte-1t9qd00"),i(Je,"href",de+"/sefs"),i(Je,"class","svelte-1t9qd00"),i(Qe,"href",de+"/map"),i(Qe,"class","svelte-1t9qd00"),i(Ee,"class","explore-pages svelte-1t9qd00"),i(ce,"class","explore-block svelte-1t9qd00"),i(lt,"class","explore-block story-section svelte-1t9qd00"),i(H,"id","explore-section-main"),i(H,"class","svelte-1t9qd00"),i(ee,"id","explore-section"),i(ee,"class","svelte-1t9qd00"),i(at,"class","svelte-1t9qd00"),i(st,"class","svelte-1t9qd00"),i(Se,"class","side-box svelte-1t9qd00"),i(nt,"class","svelte-1t9qd00"),i(ot,"class","svelte-1t9qd00"),i(Ie,"class","side-box svelte-1t9qd00"),i($e,"class","side-by-side-section svelte-1t9qd00")},m(T,Y){J(T,e,Y),Dt(t,e,null),n(e,l),n(e,s);for(let Te=0;Te<fe.length;Te+=1)fe[Te]&&fe[Te].m(s,null);n(s,o),n(s,u),n(u,d),n(u,p),n(u,g),n(g,h),n(h,w),_e&&_e.m(w,null),n(w,b),n(w,C),n(C,S),n(h,B),n(h,y),n(y,E),n(E,_),n(_,M),n(_,P),n(_,I),n(I,W),n(W,ne),n(W,X),n(I,j),n(I,V),n(E,O),ze.m(E,null),n(y,Q),n(y,F),n(F,Z),n(Z,U),n(Z,G),n(Z,k),n(k,$),n($,Ce),n($,Ne),n(F,Ve),xe.m(F,null),n(y,Ye),ge&&ge.m(y,null),a[30](h),n(g,Fe),n(g,ke),a[31](ke),n(g,Le),n(g,Oe),n(g,_t),n(g,Ze),a[32](Ze),n(g,gt),n(g,D),n(g,K),n(g,re),a[33](s),n(e,qe),n(e,ee),n(ee,z),n(z,he),n(z,le),n(z,ye),n(ye,De),n(De,ve),n(De,tt),n(De,we),Dt(me,we,null),n(ee,Be),n(ee,H),n(H,ce),n(ce,He),n(ce,ut),n(ce,Ee),n(Ee,Ke),n(Ee,Wt),n(Ee,Xe),n(Ee,Yt),n(Ee,Je),n(Ee,Zt),n(Ee,Qe),n(H,Kt),n(H,lt),n(e,Xt),n(e,$e),n($e,Se),n(Se,at),n(Se,Jt),n(Se,st),n(Se,Qt),ae&&ae.m(Se,null),n($e,$t),n($e,Ie),n(Ie,nt),n(Ie,el),n(Ie,ot),n(Ie,tl),se&&se.m(Ie,null),n(e,ll),Dt(it,e,null),a[35](e),rt=!0,al||(El=je(Ke,"click",a[26]),al=!0)},p(T,Y){if(Y[0]&52428800){dt=Ge(T[21]);let ue;for(ue=0;ue<dt.length;ue+=1){const pe=zl(T,dt,ue);fe[ue]?fe[ue].p(pe,Y):(fe[ue]=xl(pe),fe[ue].c(),fe[ue].m(s,o))}for(;ue<fe.length;ue+=1)fe[ue].d(1);fe.length=dt.length}T[20]?_e?_e.p(T,Y):(_e=Wl(T),_e.c(),_e.m(w,b)):_e&&(_e.d(1),_e=null),(!rt||Y[0]&65536)&&be(S,T[16]),(!rt||Y[0]&131072)&&be(X,T[17]),kt!==(kt=Ll(T))&&(ze.d(1),ze=kt(T),ze&&(ze.c(),ze.m(E,null))),(!rt||Y[0]&262144)&&be(Ne,T[18]),yt!==(yt=ql(T))&&(xe.d(1),xe=yt(T),xe&&(xe.c(),xe.m(F,null))),T[23]!==null?ge?ge.p(T,Y):(ge=Yl(T),ge.c(),ge.m(y,null)):ge&&(ge.d(1),ge=null);const Te={};Y[0]&1&&(Te.items=T[0]),me.$set(Te),T[7]?ae&&(Hl(),We(ae,1,1,()=>{ae=null}),Bl()):ae?(ae.p(T,Y),Y[0]&128&&Pe(ae,1)):(ae=Zl(T),ae.c(),Pe(ae,1),ae.m(Se,null)),T[7]?se&&(Hl(),We(se,1,1,()=>{se=null}),Bl()):se?(se.p(T,Y),Y[0]&128&&Pe(se,1)):(se=Kl(T),se.c(),Pe(se,1),se.m(Ie,null))},i(T){rt||(Pe(t.$$.fragment,T),Pe(me.$$.fragment,T),Pe(ae),Pe(se),Pe(it.$$.fragment,T),rt=!0)},o(T){We(t.$$.fragment,T),We(me.$$.fragment,T),We(ae),We(se),We(it.$$.fragment,T),rt=!1},d(T){T&&f(e),Et(t),Lt(fe,T),_e&&_e.d(),ze.d(),xe.d(),ge&&ge.d(),a[30](null),a[31](null),a[32](null),a[33](null),Et(me),ae&&ae.d(),se&&se.d(),Et(it),a[35](null),al=!1,El()}}}function Oa(a,e,t){function l(){sa.set(!0)}const s=`${de}/LAD/Eng_Wales_LSOA_LADs.csv`,o=`${de}/LAD/NI_DZ_LAD.csv`,u=`${de}/LAD/Scotland_DZ_LA.csv`;let d={},{data:m}=e,p,g,h,w,b,C,S,B,y=!0;async function E(){g=await jt(_a()),t(2,h=await jt(ga())),await jt(pa()),g=[...g].sort((D,K)=>K.total-D.total),t(2,h=[...h].sort((D,K)=>K.total_value-D.total_value)),w=oa(h,D=>D.value_per_capita),t(3,b=Math.max(...h.map(D=>D.total_value))),t(4,C=Math.min(...h.map(D=>D.total_value))),t(5,S=Math.min(...h.map(D=>D.value_per_capita))),t(6,B=Math.max(...h.map(D=>D.value_per_capita))),await il(s).then(D=>{for(let K of D)t(0,d[K.LAD22CD]=K.LAD22NM,d)}),await il(o).then(D=>{for(let K of D)t(0,d[K.LGD2014_code]=K.LGD2014_name,d)}),await il(u).then(D=>{for(let K of D)t(0,d[K.LA_Code]=K.LA_Name,d)}),t(7,y=!1)}let _=[],M="All",N="total",P=0,I=0;async function W(){const D=ba({region:M,sortBy:N}),K=await jt(D);t(8,_=K),t(11,P=Math.max(...K.map(re=>re.total_value))),t(12,I=Math.max(...K.map(re=>re.value_per_capita)))}function ne(D){t(9,M=D.detail.region),t(10,N=D.detail.sortBy),W()}let X,j=[],V=null,R,O,Q,F,Z="",U,A=null,G=[],k,$=null,Ce=0,Ne=0,Ve;function Ye(D){const K=X.filter(z=>z.type!=="empty").map(z=>z.type),re=Array.from(new Set(K)),te=g.reduce((z,he)=>z+he.total,0),qe=[{type:null,label:"Total Co-Benefits",icon:null,totalValue:te.toFixed(2),perCapitaValue:w.toFixed(2),percentValue:"100%"},...re.map(z=>{const Re=ul.find(Be=>Be.id===z)?.label??z;let le=fl(z);const ye=g.find(Be=>Be.co_benefit_type===z),De=h.find(Be=>Be.co_benefit_type===z),ve=ye?.total??0,ft=De?.value_per_capita??0,tt=ve.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),we=ft.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),me=te>0?(ve/te*100).toFixed(2):0;return{type:z,label:Re,icon:le,totalValue:tt,perCapitaValue:we,percentValue:me}})];setInterval(()=>{t(25,Ne=Ce),t(24,Ce=(Ce+1)%qe.length);const{type:z,label:he,icon:Re,totalValue:le,perCapitaValue:ye,percentValue:De}=qe[Ce];t(23,$=z),t(16,Q=he),t(17,F=le),t(18,Z=ye),t(19,U=De),t(20,A=Re),Fe(D,z)},6e3);const ee=qe[0];t(23,$=ee.type),t(16,Q=ee.label),t(17,F=ee.totalValue),t(18,Z=ee.perCapitaValue),t(19,U=ee.percentValue),Fe(D,ee.type)}function Fe(D,K){if(!V)return;t(13,V.innerHTML="",V);const re=1,te=12,qe=[],ee=[];for(const H of g){const ce=Math.round(Math.abs(H.total)/re),He=Array.from({length:ce},()=>({type:H.co_benefit_type,negative:H.total<0}));H.total<0?ee.push(...He):qe.push(...He)}const z=Math.ceil(qe.length/te),he=Math.ceil(ee.length/te),Re=z+he,le=Math.floor(D/Re),ye=qe.map((H,ce)=>({x:ce%te,y:Math.floor(ce/te),...H})),De=ee.map((H,ce)=>({x:ce%te,y:z+Math.floor(ce/te),...H}));X=[...ye,...De];const ve=50,ft=Math.floor(z*te/ve)*ve,tt=-Math.floor(he*te/ve)*ve,we=document.getElementById("waffleLabels");if(we){we.innerHTML="";for(let H=ft;H>=tt;H-=ve){const He=(z*te-H)/te,Ue=document.createElement("div");Ue.textContent=`${H>0?"+":""}${H}bn`,Ue.style.position="absolute",Ue.style.left="0";const ut=Math.max(8,Math.floor(le*.6)),Ee=He*le+le/2-ut/2-15;Ue.style.top=`${Ee}px`,Ue.style.fontSize=`${ut}px`,Ue.style.lineHeight="1",we.appendChild(Ue)}we.style.height=`${le*Re}px`}j=Array.from(new Set(X.map(H=>H.type).filter(H=>H!=="empty"))),t(21,G=ua(j));const me=K??null,Be=Gt({width:le*te*1.1,height:le*Re-30,margin:0,marginRight:35,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:ul.map(H=>H.id),range:da,unknown:"#eee",legend:!1},marks:[Sl(X.filter(H=>!H.negative),{x:H=>H.x*le,y:H=>H.y*le,fill:"type",fillOpacity:H=>me&&H.type!==me?.15:1}),ia([z*le-10],{stroke:"grey",strokeWidth:1.2}),Sl(X.filter(H=>H.negative),{x:H=>H.x*le,y:H=>H.y*le,stroke:"type",strokeOpacity:H=>me&&H.type!==me?.15:1,strokeWidth:1,fill:"none"})]});R&&(t(14,R.style.width=`${le*te+30}px`,R),t(14,R.style.height=`${D}px`,R)),t(13,V.innerHTML="",V),V.append(Be)}function ke(D){window.open(`${de}/location?location=${D}`,"_blank")}ta(()=>{ca(p),E().then(()=>{W();const D=k.getBoundingClientRect().height,K=document.getElementById("waffleTopLabel"),re=document.getElementById("waffleBottomLabel"),te=K?.offsetHeight??0,qe=re?.offsetHeight??0,ee=D-te-qe;Fe(ee),Ye(D),fa(p)})}),la(()=>{clearInterval(Ve)});function Le(D){pt[D?"unshift":"push"](()=>{O=D,t(15,O)})}function Oe(D){pt[D?"unshift":"push"](()=>{R=D,t(14,R)})}function Vt(D){pt[D?"unshift":"push"](()=>{V=D,t(13,V)})}function _t(D){pt[D?"unshift":"push"](()=>{k=D,t(22,k)})}const Ze=D=>ke(D.detail);function gt(D){pt[D?"unshift":"push"](()=>{p=D,t(1,p)})}return a.$$set=D=>{"data"in D&&t(29,m=D.data)},a.$$.update=()=>{a.$$.dirty[0]&536870912},[d,p,h,b,C,S,B,y,_,M,N,P,I,V,R,O,Q,F,Z,U,A,G,k,$,Ce,Ne,l,ne,ke,m,Le,Oe,Vt,_t,Ze,gt]}class $a extends zt{constructor(e){super(),xt(this,e,Oa,Fa,wt,{data:29},null,[-1,-1])}}export{$a as component};
