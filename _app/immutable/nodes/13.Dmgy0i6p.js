import{s as Oa,d as M,w as qa,x as ja,a as wt,i as st,b as o,z as gt,C as ca,q as p,g as A,c as m,e as T,p as j,f as H,j as k,h as y,t as R,v as Ua,A as De}from"../chunks/CrcYK4S3.js";import{S as Ya,i as Wa,d as Ga,t as Za,a as Xa,m as Ka,c as Ja,b as Qa}from"../chunks/CjO9S5jK.js";import{N as $a,e as ua}from"../chunks/Do5jNKI5.js";import{n as es}from"../chunks/DRyxMU8n.js";import{ar as ts,am as Vt,as as Ta,a5 as Sn,g as Ht,G as Ba,i as Na,a as Sa,M as Pn,H as Fn,S as ns,l as Hn,n as Rn,at as as,o as Pt,au as In,av as ss,U as Ft,aw as rs,q as ls,a8 as os,B as is,a9 as cs,ax as Ia,ay as us,az as fs,ah as Va,aA as ds,ab as Pa,N as hs,a4 as ps,aB as vs,X as Mt,aC as Fa,Y as gs,aD as ms,V as ue,a2 as _e,ad as Ce,aE as ys,_ as bs,ac as _s,aF as Cs,W as fa}from"../chunks/BzrjCcuE.js";import{M as Es,a as ws}from"../chunks/nhEwVK6m.js";import{g as Ms,h as As,S as Vn,C as da,r as ks,A as at,M as Ee,i as Ds,b as Ls,T as zn,V as xs,d as zs,e as ha,f as pa,j as Ts}from"../chunks/DOL0YUTJ.js";import{g as we,q as va,r as Bs,s as ga,d as Ns,t as ma,u as Ss,v as Is}from"../chunks/C9wjSN5c.js";import{A as Vs,a as et,b as ya}from"../chunks/BiB0mgj8.js";import{t as Ps,e as Ha,m as Fs,a as ba,s as Hs,f as Rs,b as Tn,d as _a}from"../chunks/IzWRIZAE.js";import{a as Os,b as Bn,d as qs}from"../chunks/BZk_VCiK.js";const js=Us(Ys);function Us(e){return function(t,n,a=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((a=+a)>=0))throw new RangeError("invalid ry");let{data:s,width:r,height:l}=t;if(!((r=Math.floor(r))>=0))throw new RangeError("invalid width");if(!((l=Math.floor(l!==void 0?l:s.length/r))>=0))throw new RangeError("invalid height");if(!r||!l||!n&&!a)return t;const f=n&&e(n),d=a&&e(a),i=s.slice();return f&&d?(mt(f,i,s,r,l),mt(f,s,i,r,l),mt(f,i,s,r,l),yt(d,s,i,r,l),yt(d,i,s,r,l),yt(d,s,i,r,l)):f?(mt(f,s,i,r,l),mt(f,i,s,r,l),mt(f,s,i,r,l)):d&&(yt(d,s,i,r,l),yt(d,i,s,r,l),yt(d,s,i,r,l)),t}}function mt(e,t,n,a,s){for(let r=0,l=a*s;r<l;)e(t,n,r,r+=a,1)}function yt(e,t,n,a,s){for(let r=0,l=a*s;r<a;++r)e(t,n,r,r+l,a)}function Ys(e){const t=Math.floor(e);if(t===e)return Ws(e);const n=e-t,a=2*e+1;return(s,r,l,f,d)=>{if(!((f-=d)>=l))return;let i=t*r[l];const c=d*t,v=c+d;for(let u=l,b=l+c;u<b;u+=d)i+=r[Math.min(f,u)];for(let u=l,b=f;u<=b;u+=d)i+=r[Math.min(f,u+c)],s[u]=(i+n*(r[Math.max(l,u-v)]+r[Math.min(f,u+v)]))/a,i-=r[Math.max(l,u-c)]}}function Ws(e){const t=2*e+1;return(n,a,s,r,l)=>{if(!((r-=l)>=s))return;let f=e*a[s];const d=l*e;for(let i=s,c=s+d;i<c;i+=l)f+=a[Math.min(r,i)];for(let i=s,c=r;i<=c;i+=l)f+=a[Math.min(r,i+d)],n[i]=f/t,f-=a[Math.max(s,i-d)]}}function Gs(e,t,n){let a;for(;;){const s=ts(e,t,n);if(s===a||s===0||!isFinite(s))return[e,t];s>0?(e=Math.floor(e/s)*s,t=Math.ceil(t/s)*s):s<0&&(e=Math.ceil(e*s)/s,t=Math.floor(t*s)/s),a=s}}var Zs=Array.prototype,Ra=Zs.slice;function Xs(e,t){return e-t}function Ks(e){for(var t=0,n=e.length,a=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)a+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return a}const Ye=e=>()=>e;function Js(e,t){for(var n=-1,a=t.length,s;++n<a;)if(s=Qs(e,t[n]))return s;return 0}function Qs(e,t){for(var n=t[0],a=t[1],s=-1,r=0,l=e.length,f=l-1;r<l;f=r++){var d=e[r],i=d[0],c=d[1],v=e[f],u=v[0],b=v[1];if($s(d,v,t))return 0;c>a!=b>a&&n<(u-i)*(a-c)/(b-c)+i&&(s=-s)}return s}function $s(e,t,n){var a;return er(e,t,n)&&tr(e[a=+(e[0]===t[0])],n[a],t[a])}function er(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function tr(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function nr(){}var Le=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Ca(){var e=1,t=1,n=Ps,a=d;function s(i){var c=n(i);if(Array.isArray(c))c=c.slice().sort(Xs);else{const v=Vt(i,ar);for(c=Ta(...Gs(v[0],v[1],c),c);c[c.length-1]>=v[1];)c.pop();for(;c[1]<v[0];)c.shift()}return c.map(v=>r(i,v))}function r(i,c){const v=c==null?NaN:+c;if(isNaN(v))throw new Error(`invalid value: ${c}`);var u=[],b=[];return l(i,v,function(C){a(C,i,v),Ks(C)>0?u.push([C]):b.push(C)}),b.forEach(function(C){for(var L=0,x=u.length,_;L<x;++L)if(Js((_=u[L])[0],C)!==-1){_.push(C);return}}),{type:"MultiPolygon",value:c,coordinates:u}}function l(i,c,v){var u=new Array,b=new Array,C,L,x,_,g,D;for(C=L=-1,_=tt(i[0],c),Le[_<<1].forEach(E);++C<e-1;)x=_,_=tt(i[C+1],c),Le[x|_<<1].forEach(E);for(Le[_<<0].forEach(E);++L<t-1;){for(C=-1,_=tt(i[L*e+e],c),g=tt(i[L*e],c),Le[_<<1|g<<2].forEach(E);++C<e-1;)x=_,_=tt(i[L*e+e+C+1],c),D=g,g=tt(i[L*e+C+1],c),Le[x|_<<1|g<<2|D<<3].forEach(E);Le[_|g<<3].forEach(E)}for(C=-1,g=i[L*e]>=c,Le[g<<2].forEach(E);++C<e-1;)D=g,g=tt(i[L*e+C+1],c),Le[g<<2|D<<3].forEach(E);Le[g<<3].forEach(E);function E(N){var z=[N[0][0]+C,N[0][1]+L],V=[N[1][0]+C,N[1][1]+L],O=f(z),S=f(V),w,I;(w=b[O])?(I=u[S])?(delete b[w.end],delete u[I.start],w===I?(w.ring.push(V),v(w.ring)):u[w.start]=b[I.end]={start:w.start,end:I.end,ring:w.ring.concat(I.ring)}):(delete b[w.end],w.ring.push(V),b[w.end=S]=w):(w=u[S])?(I=b[O])?(delete u[w.start],delete b[I.end],w===I?(w.ring.push(V),v(w.ring)):u[I.start]=b[w.end]={start:I.start,end:w.end,ring:I.ring.concat(w.ring)}):(delete u[w.start],w.ring.unshift(z),u[w.start=O]=w):u[O]=b[S]={start:O,end:S,ring:[z,V]}}}function f(i){return i[0]*2+i[1]*(e+1)*4}function d(i,c,v){i.forEach(function(u){var b=u[0],C=u[1],L=b|0,x=C|0,_=Nn(c[x*e+L]);b>0&&b<e&&L===b&&(u[0]=Ea(b,Nn(c[x*e+L-1]),_,v)),C>0&&C<t&&x===C&&(u[1]=Ea(C,Nn(c[(x-1)*e+L]),_,v))})}return s.contour=r,s.size=function(i){if(!arguments.length)return[e,t];var c=Math.floor(i[0]),v=Math.floor(i[1]);if(!(c>=0&&v>=0))throw new Error("invalid size");return e=c,t=v,s},s.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Array.isArray(i)?Ye(Ra.call(i)):Ye(i),s):n},s.smooth=function(i){return arguments.length?(a=i?d:nr,s):a===d},s}function ar(e){return isFinite(e)?e:NaN}function tt(e,t){return e==null?!1:+e>=t}function Nn(e){return e==null||isNaN(e=+e)?-1/0:e}function Ea(e,t,n,a){const s=a-t,r=n-t,l=isFinite(s)||isFinite(r)?s/r:Math.sign(s)/Math.sign(r);return isNaN(l)?e:e+l-.5}function sr(e){return e[0]}function rr(e){return e[1]}function lr(){return 1}function or(){var e=sr,t=rr,n=lr,a=960,s=500,r=20,l=2,f=r*3,d=a+f*2>>l,i=s+f*2>>l,c=Ye(20);function v(g){var D=new Float32Array(d*i),E=Math.pow(2,-l),N=-1;for(const B of g){var z=(e(B,++N,g)+f)*E,V=(t(B,N,g)+f)*E,O=+n(B,N,g);if(O&&z>=0&&z<d&&V>=0&&V<i){var S=Math.floor(z),w=Math.floor(V),I=z-S-.5,X=V-w-.5;D[S+w*d]+=(1-I)*(1-X)*O,D[S+1+w*d]+=I*(1-X)*O,D[S+1+(w+1)*d]+=I*X*O,D[S+(w+1)*d]+=(1-I)*X*O}}return js({data:D,width:d,height:i},r*E),D}function u(g){var D=v(g),E=c(D),N=Math.pow(2,2*l);return Array.isArray(E)||(E=Ta(Number.MIN_VALUE,Sn(D)/N,E)),Ca().size([d,i]).thresholds(E.map(z=>z*N))(D).map((z,V)=>(z.value=+E[V],b(z)))}u.contours=function(g){var D=v(g),E=Ca().size([d,i]),N=Math.pow(2,2*l),z=V=>{V=+V;var O=b(E.contour(D,V*N));return O.value=V,O};return Object.defineProperty(z,"max",{get:()=>Sn(D)/N}),z};function b(g){return g.coordinates.forEach(C),g}function C(g){g.forEach(L)}function L(g){g.forEach(x)}function x(g){g[0]=g[0]*Math.pow(2,l)-f,g[1]=g[1]*Math.pow(2,l)-f}function _(){return f=r*3,d=a+f*2>>l,i=s+f*2>>l,u}return u.x=function(g){return arguments.length?(e=typeof g=="function"?g:Ye(+g),u):e},u.y=function(g){return arguments.length?(t=typeof g=="function"?g:Ye(+g),u):t},u.weight=function(g){return arguments.length?(n=typeof g=="function"?g:Ye(+g),u):n},u.size=function(g){if(!arguments.length)return[a,s];var D=+g[0],E=+g[1];if(!(D>=0&&E>=0))throw new Error("invalid size");return a=D,s=E,_()},u.cellSize=function(g){if(!arguments.length)return 1<<l;if(!((g=+g)>=1))throw new Error("invalid cell size");return l=Math.floor(Math.log(g)/Math.LN2),_()},u.thresholds=function(g){return arguments.length?(c=typeof g=="function"?g:Array.isArray(g)?Ye(Ra.call(g)):Ye(g),u):c},u.bandwidth=function(g){if(!arguments.length)return Math.sqrt(r*(r+1));if(!((g=+g)>=0))throw new Error("invalid bandwidth");return r=(Math.sqrt(4*g*g+1)-1)/2,_()},u}const ir={ariaLabel:"cell"};class cr extends Vs{constructor(t,{x:n,y:a,...s}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:a,scale:"y",type:"band",optional:!0}},s,ir)}_transform(t,n){t.call(Ht,n,{},0,0)}}function wa(e,{x:t,y:n,...a}={}){return[t,n]=Ba(t,n),new cr(e,{...a,x:t,y:n})}const ur={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class fr extends Pn{constructor(t,n={}){const{x:a,y:s,z:r,curve:l,tension:f}=n;super(t,{x:{value:a,scale:"x"},y:{value:s,scale:"y"},z:{value:Fn(n),optional:!0}},n,ur),this.z=r,this.curve=Fs(l,f),ns(this,n)}filter(t){return t}project(t,n,a){this.curve!==ba&&super.project(t,n,a)}render(t,n,a,s,r){const{x:l,y:f}=a,{curve:d}=this;return Hn("svg:g",r).call(Rn,this,s,r).call(Ht,this,n).call(i=>i.selectAll().data(as(t,[l,f],this,a)).enter().append("path").call(Pt,this).call(In,this,a).call(ss,this,a,r).attr("d",d===ba&&r.projection?dr(r.path(),l,f):Hs().curve(d).defined(c=>c>=0).x(c=>l[c]).y(c=>f[c]))).node()}}function dr(e,t,n){return t=Ft(t),n=Ft(n),a=>{let s=[];const r=[s];for(const l of a)l===-1?(s=[],r.push(s)):s.push([t[l],n[l]]);return e({type:"MultiLineString",coordinates:r})}}function hr(e,{x:t=Sa,y:n=Na,...a}={}){return new fr(e,Ha({...a,x:t,y:n}))}const pr={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class vr extends Pn{constructor(t,{x:n,y:a,z:s,weight:r,fill:l,stroke:f,...d}={}){const i=Ma(l)&&(l="currentColor",!0),c=Ma(f)&&(f="currentColor",!0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:a,scale:"y",optional:!0},z:{value:Fn({z:s,fill:l,stroke:f}),optional:!0},weight:{value:r,optional:!0}},yr({...d,fill:l,stroke:f},i,c),pr),i&&(this.fill=void 0),c&&(this.stroke=void 0),this.z=s}filter(t){return t}render(t,n,a,s,r){const{contours:l}=a,f=rs();return Hn("svg:g",r).call(Rn,this,s,r).call(Ht,this,{}).call(d=>d.selectAll().data(t).enter().append("path").call(Pt,this).call(ls,this,a).attr("d",i=>f(l[i]))).node()}}function gr(e,{x:t,y:n,...a}={}){return[t,n]=Ba(t,n),new vr(e,{...a,x:t,y:n})}const mr=new Set(["x","y","z","weight"]);function yr(e,t,n){let{bandwidth:s,thresholds:r}=e;return s=s===void 0?20:+s,r=r===void 0?20:typeof r?.[Symbol.iterator]=="function"?Ft(r):+r,os(e,function(l,f,d,i,c,v){const u=d.weight?Ft(d.weight.value):null,b=d.z?.value,{z:C}=this,[L,x]=is(this,c),{width:_,height:g}=c,{x:D,y:E}=cs(d,i,v),N=Object.fromEntries(Object.entries(d).filter(([B])=>!mr.has(B)).map(([B,K])=>[B,{...K,value:[]}])),z=t&&[],V=n&&[],O=or().x(D?B=>D[B]:L).y(E?B=>E[B]:x).weight(u?B=>u[B]:1).size([_,g]).bandwidth(s),S=[];for(const B of f){const K=[];S.push(K);for(const G of b?Ia(B,b,C):[B]){const ne=O.contours(G);K.push([G,ne])}}let w=r;if(!(w instanceof us)){let B=0;for(const K of S)for(const[,G]of K){const ne=G.max;ne>B&&(B=ne)}w=Float64Array.from({length:r-1},(K,G)=>B*100*(G+1)/r)}const I=[],X=[];for(const B of S){const K=[];I.push(K);for(const[G,ne]of B)for(const $ of w){K.push(X.length),X.push(ne($/100)),z&&z.push($),V&&V.push($);for(const de in N)N[de].value.push(d[de].value[G[0]])}}return z&&z.push(0),V&&V.push(0),{data:l,facets:I,channels:{...N,...z&&{fill:{value:z,scale:"color"}},...V&&{stroke:{value:V,scale:"color"}},contours:{value:X}}}})}function Ma(e){return/^density$/i.test(e)}function br(e,t,n){var a=1e-8,s=t-1,r=n-1,l=0,f,d,i,c,v,u,b,C;if(e<=0)return 0;if(e>=1)return 1;for(f=Math.log(t/(t+n)),d=Math.log(n/(t+n)),i=Math.exp(t*f)/t,c=Math.exp(n*d)/n,b=i+c,e<i/b?u=Math.pow(t*b*e,1/t):u=1-Math.pow(n*b*(1-e),1/n),C=-bt(t)-bt(n)+bt(t+n);l<10;l++){if(u===0||u===1)return u;if(v=_r(u,t,n)-e,i=Math.exp(s*Math.log(u)+r*Math.log(1-u)+C),c=v/i,u-=i=c/(1-.5*Math.min(1,c*(s/u-r/(1-u)))),u<=0&&(u=.5*(u+i)),u>=1&&(u=.5*(u+i+1)),Math.abs(i)<a*u&&l>0)break}return u}function _r(e,t,n){var a=e===0||e===1?0:Math.exp(bt(t+n)-bt(t)-bt(n)+t*Math.log(e)+n*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+n+2)?a*Aa(e,t,n)/t:1-a*Aa(1-e,n,t)/n}function Aa(e,t,n){var a=1e-30,s=1,r=t+n,l=t+1,f=t-1,d=1,i=1-r*e/l,c,v,u,b;for(Math.abs(i)<a&&(i=a),i=1/i,b=i;s<=100&&(c=2*s,v=s*(n-s)*e/((f+c)*(t+c)),i=1+v*i,Math.abs(i)<a&&(i=a),d=1+v/d,Math.abs(d)<a&&(d=a),i=1/i,b*=i*d,v=-(t+s)*(r+s)*e/((t+c)*(l+c)),i=1+v*i,Math.abs(i)<a&&(i=a),d=1+v/d,Math.abs(d)<a&&(d=a),i=1/i,u=i*d,b*=u,!(Math.abs(u-1)<3e-7));s++);return b}function bt(e){var t=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],a=1.000000000190015,s,r,l;for(l=(r=s=e)+5.5,l-=(s+.5)*Math.log(l);t<6;t++)a+=n[t]/++r;return Math.log(2.506628274631*a/s)-l}function Cr(e,t){var n=br(2*Math.min(e,1-e),.5*t,.5);return n=Math.sqrt(t*(1-n)/n),e>.5?n:-n}const Er={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class wr extends Pn{constructor(t,n={}){const{x:a,y:s,z:r,ci:l=.95,precision:f=4}=n;if(super(t,{x:{value:a,scale:"x"},y:{value:s,scale:"y"},z:{value:Fn(n),optional:!0}},n,Er),this.z=r,this.ci=+l,this.precision=+f,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${l}`);if(!(this.precision>0))throw new Error(`invalid precision: ${f}`)}render(t,n,a,s,r){const{x:l,y:f,z:d}=a,{ci:i}=this;return Hn("svg:g",r).call(Rn,this,s,r).call(Ht,this,n).call(c=>c.selectAll().data(d?Ia(t,d,this.z):[t]).enter().call(v=>v.append("path").attr("fill","none").call(Pt,this).call(In,this,{...a,fill:null,fillOpacity:null}).attr("d",u=>this._renderLine(u,l,f)).call(i&&!ds(this.fill)?u=>u.select(Mr).attr("stroke","none").call(Pt,this).call(In,this,{...a,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",b=>this._renderBand(b,l,f)):()=>{}))).node()}}function Mr(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(es.svg,"path"),this)}class Ar extends wr{constructor(t,n){super(t,n)}_renderBand(t,n,a){const{ci:s,precision:r}=this,[l,f]=Vt(t,c=>n[c]),d=ka(t,n,a),i=Dr(t,n,a,(1-s)/2,d);return Rs().x(c=>c).y0(c=>i(c,-1)).y1(c=>i(c,1))(Va(l,f-r/2,r).concat(f))}_renderLine(t,n,a){const[s,r]=Vt(t,f=>n[f]),l=ka(t,n,a);return`M${s},${l(s)}L${r},${l(r)}`}}function kr(e,{x:t=Sa,y:n=Na,stroke:a,fill:s=fs(a)?"currentColor":a,...r}={}){return new Ar(e,Ha({...r,x:t,y:n,fill:s,stroke:a}))}function ka(e,t,n){let a=0,s=0,r=0,l=0;for(const c of e){const v=t[c],u=n[c];a+=v,s+=u,r+=v*u,l+=v*v}const f=e.length,d=(f*r-a*s)/(f*l-a*a),i=(s-d*a)/f;return c=>d*c+i}function Dr(e,t,n,a,s){const r=Pa(e,c=>t[c])/e.length;let l=0,f=0;for(const c of e)l+=(t[c]-r)**2,f+=(n[c]-s(t[c]))**2;const d=Math.sqrt(f/(e.length-2)),i=Cr(a,e.length-2);return(c,v)=>{const u=s(c),b=d*Math.sqrt(1/e.length+(c-r)**2/l);return u+v*i*b}}function Da(e,t){return arguments.length===1&&({basis:e,...t}=e),Os(Lr(e),t)}function Lr(e){if(e===void 0)return La;if(typeof e=="function")return Rt(hs(e));if(/^p\d{2}$/i.test(e))return _t(ms(e));switch(`${e}`.toLowerCase()){case"deviation":return Tr;case"first":return La;case"last":return zr;case"max":return Br;case"mean":return Nr;case"median":return Sr;case"min":return Ir;case"sum":return Vr;case"extent":return xr}throw new Error(`invalid basis: ${e}`)}function Rt(e){return{mapIndex(t,n,a){const s=+e(t,n);for(const r of t)a[r]=n[r]===null?NaN:n[r]/s}}}function _t(e){return Rt((t,n)=>e(t,a=>n[a]))}const xr={mapIndex(e,t,n){const[a,s]=Vt(e,l=>t[l]),r=s-a;for(const l of e)n[l]=t[l]===null?NaN:(t[l]-a)/r}},La=Rt((e,t)=>{for(let n=0;n<e.length;++n){const a=t[e[n]];if(Fa(a))return a}}),zr=Rt((e,t)=>{for(let n=e.length-1;n>=0;--n){const a=t[e[n]];if(Fa(a))return a}}),Tr={mapIndex(e,t,n){const a=Mt(e,r=>t[r]),s=gs(e,r=>t[r]);for(const r of e)n[r]=t[r]===null?NaN:s?(t[r]-a)/s:0}},Br=_t(Sn),Nr=_t(Mt),Sr=_t(vs),Ir=_t(ps),Vr=_t(Pa);function xa(e,t,n){const a=e.slice();return a[46]=t[n],a[47]=t,a[48]=n,a}function Pr(e){let t,n,a,s,r,l,f,d,i=`Histogram shows the number of data zones distributed across
                                    different household social economic factors.`,c,v,u="",b=e[46],C,L,x,_,g,D,E,N,z,V=`Density plot refers to UK distribution while the
                                        scattered points refer to data zones in the local authority.`,O,S,w="",I,X,B,K="";const G=()=>e[25](v,b),ne=()=>e[25](null,b),$=()=>e[26](S,b),de=()=>e[26](null,b),xe=()=>e[27](B,b),ze=()=>e[27](null,b);return{c(){t=y("div"),n=y("h3"),a=R("Data Zones Distribution (vs. "),s=y("span"),r=R(e[8]),l=R(" average)"),f=k(),d=y("p"),d.textContent=i,c=k(),v=y("div"),v.innerHTML=u,C=k(),L=y("div"),x=y("div"),_=y("h3"),g=R("Co-benefits Recieved by Data Zones across "),D=R(e[46]),E=R(`
                                        Values`),N=k(),z=y("p"),z.textContent=V,O=k(),S=y("div"),S.innerHTML=w,I=k(),X=y("div"),B=y("div"),B.innerHTML=K,this.h()},l(Z){t=m(Z,"DIV",{class:!0});var J=T(t);n=m(J,"H3",{class:!0});var ae=T(n);a=H(ae,"Data Zones Distribution (vs. "),s=m(ae,"SPAN",{class:!0});var We=T(s);r=H(We,e[8]),We.forEach(M),l=H(ae," average)"),ae.forEach(M),f=A(J),d=m(J,"P",{class:!0,"data-svelte-h":!0}),j(d)!=="svelte-xcsopb"&&(d.textContent=i),c=A(J),v=m(J,"DIV",{class:!0,"data-svelte-h":!0}),j(v)!=="svelte-1gvlz6w"&&(v.innerHTML=u),J.forEach(M),C=A(Z),L=m(Z,"DIV",{class:!0});var he=T(L);x=m(he,"DIV",{});var te=T(x);_=m(te,"H3",{class:!0});var h=T(_);g=H(h,"Co-benefits Recieved by Data Zones across "),D=H(h,e[46]),E=H(h,`
                                        Values`),h.forEach(M),N=A(te),z=m(te,"P",{class:!0,"data-svelte-h":!0}),j(z)!=="svelte-18bgpzu"&&(z.textContent=V),O=A(te),S=m(te,"DIV",{class:!0,"data-svelte-h":!0}),j(S)!=="svelte-aesnqn"&&(S.innerHTML=w),te.forEach(M),I=A(he),X=m(he,"DIV",{});var P=T(X);B=m(P,"DIV",{class:!0,"data-svelte-h":!0}),j(B)!=="svelte-xsgztl"&&(B.innerHTML=K),P.forEach(M),he.forEach(M),this.h()},h(){p(s,"class","nation-label svelte-12gg53n"),p(n,"class","component-title"),p(d,"class","description short"),p(v,"class","plot"),p(t,"class","component"),p(_,"class","component-title"),p(z,"class","description short"),p(S,"class","plot"),p(B,"class","plot"),p(L,"class","component")},m(Z,J){st(Z,t,J),o(t,n),o(n,a),o(n,s),o(s,r),o(n,l),o(t,f),o(t,d),o(t,c),o(t,v),G(),st(Z,C,J),st(Z,L,J),o(L,x),o(x,_),o(_,g),o(_,D),o(_,E),o(x,N),o(x,z),o(x,O),o(x,S),$(),o(L,I),o(L,X),o(X,B),xe()},p(Z,J){e=Z,J[0]&256&&wt(r,e[8]),b!==e[46]&&(ne(),b=e[46],G()),b!==e[46]&&(de(),b=e[46],$()),b!==e[46]&&(ze(),b=e[46],xe())},d(Z){Z&&(M(t),M(C),M(L)),ne(),de(),ze()}}}function Fr(e){let t,n,a="",s=e[46];const r=()=>e[24](n,s),l=()=>e[24](null,s);return{c(){t=y("div"),n=y("div"),n.innerHTML=a,this.h()},l(f){t=m(f,"DIV",{class:!0});var d=T(t);n=m(d,"DIV",{class:!0,"data-svelte-h":!0}),j(n)!=="svelte-1shkadq"&&(n.innerHTML=a),d.forEach(M),this.h()},h(){p(n,"class","plot"),p(t,"class","component")},m(f,d){st(f,t,d),o(t,n),r()},p(f,d){e=f,s!==e[46]&&(l(),s=e[46],r())},d(f){f&&M(t),l()}}}function za(e){let t,n,a=e[46].replaceAll("_"," ")+"",s,r,l,f;function d(v,u){return v[7]?Fr:Pr}let i=d(e),c=i(e);return{c(){t=y("div"),n=y("h2"),s=R(a),r=k(),l=y("div"),c.c(),f=k(),this.h()},l(v){t=m(v,"DIV",{});var u=T(t);n=m(u,"H2",{});var b=T(n);s=H(b,a),b.forEach(M),r=A(u),l=m(u,"DIV",{class:!0});var C=T(l);c.l(C),C.forEach(M),f=A(u),u.forEach(M),this.h()},h(){p(l,"class","row")},m(v,u){st(v,t,u),o(t,n),o(n,s),o(t,r),o(t,l),c.m(l,null),o(t,f)},p(v,u){i===(i=d(v))&&c?c.p(v,u):(c.d(1),c=i(v),c&&(c.c(),c.m(l,null)))},d(v){v&&M(t),c.d()}}}function Hr(e){let t,n,a,s,r,l,f,d="Data Report",i,c,v=e[11][e[10]]+"",u,b,C,L=`Explore how this local authority will benefit from achieving Net Zero and general factors
            of their households.`,x,_,g,D,E,N,z="UK",V,O,S,w,I,X="England",B,K,G,ne,$,de="Wales",xe,ze,Z,J,ae,We="Scotland",he,te,h,P,Te="Northern Ireland",pe,Y,Me,Q=`<p class="section-subtitle">Overview</p> <h2 class="section-title">How much co-benefit values would this area recieve?</h2> <p class="description">We calculate and model 11 types of co-benefits across five different pathyways
                suggested by Climate Change Committee in the Sixth Carbon Budget from 2025-2050 on the level of data
                zones across UK.</p>`,re,oe,ie,Be,Ot,rt,At,qt,jt,Ae,Ut,On=e[11][e[10]]+"",Yt,Wt,lt,kt,Gt,Ne,qn="",Zt,ve,Ge,jn=e[11][e[10]]+"",Xt,Kt,Jt,Ze,Un="Scroll for zooming in and out.",Qt,ke,Yn="",$t,ge,Xe,Wn='<p class="section-subtitle">Temporal Trends</p> <h2 class="section-title">How co-benefits change over time?</h2> <p class="description">Detailed breakdown of temporal trends for total average co-benefits and types of co-benefits.</p>',en,ce,Se,tn,ot,Dt,nn,an,me,sn,Gn=e[11][e[10]]+"",rn,ln,it,Lt,on,cn,un,fn,ct,Ie,Zn="",dn,ye,le,Ve,hn,Xn=e[11][e[10]]+"",pn,vn,gn,mn,yn,Pe,Kn=`<strong style="margin-bottom: 0.5rem;">Legend:</strong> <br/> <span>The stacked area plot is coloured by co-benefit:</span> <br/><br/> <ul class="legend-list svelte-12gg53n"><li class="svelte-12gg53n"><span class="legend-color svelte-12gg53n" style="background-color: #D3A029"></span> <img src="$${Ms("Diet change")}" alt="Icon" class="legend-icon svelte-12gg53n"/> Diet change</li> <li class="svelte-12gg53n"><span class="legend-color svelte-12gg53n" style="background-color: #48773E"></span>
                        Physical activity</li> <li class="svelte-12gg53n"><span class="legend-color svelte-12gg53n" style="background-color: #183668"></span>
                        Dampness</li> <li class="svelte-12gg53n"><span class="legend-color svelte-12gg53n" style="background-color: #00AED9"></span>
                        Excess cold</li> <li class="svelte-12gg53n"><span class="legend-color svelte-12gg53n" style="background-color: #E11484"></span>
                        Noise</li> <li class="svelte-12gg53n"><span class="legend-color svelte-12gg53n" style="background-color: #71C35D"></span>
                        Air quality</li> <li class="svelte-12gg53n"><span class="legend-color svelte-12gg53n" style="background-color: #8F1838"></span>
                        Congestion</li> <li class="svelte-12gg53n"><span class="legend-color svelte-12gg53n" style="background-color: #EF402B"></span>
                        Excess heat</li> <li class="svelte-12gg53n"><span class="legend-color svelte-12gg53n" style="background-color: #F36D25"></span>
                        Road safety</li> <li class="svelte-12gg53n"><span class="legend-color svelte-12gg53n" style="background-color: #F99D26"></span>
                        Road repairs</li> <li class="svelte-12gg53n"><span class="legend-color svelte-12gg53n" style="background-color: #C31F33"></span>
                        Hassle costs</li></ul>`,bn,Fe,Jn='<p style="margin: 0 0 0.5rem 0;"><strong>Some areas too small:</strong> Due to the nature of the co-benefits some values are very small in comparison to larger values so therefore are not visable on this plot.</p>',_n,ut,Cn,He,se,Ke,Qn="Households",En,Je,$n="Social Economic Factors of Households",wn,Qe,ea=`We describe the distribution of household economic factors aggregated on the data
                zone level and the different level of co-benefits recieved by those data zones.`,Mn,$e,An,Re,ta="Aggregate Plots",kn,Oe,qe,Dn,na;t=new $a({});let ft=ua(Vn),ee=[];for(let F=0;F<ft.length;F+=1)ee[F]=za(xa(e,ft,F));return{c(){Qa(t.$$.fragment),n=k(),a=y("div"),s=y("div"),r=k(),l=y("div"),f=y("p"),f.textContent=d,i=k(),c=y("h1"),u=R(v),b=k(),C=y("p"),C.textContent=L,x=k(),_=y("div"),g=R(`Compare the Local District Area with average of:
            `),D=y("input"),E=k(),N=y("label"),N.textContent=z,V=y("br"),O=k(),S=y("input"),w=k(),I=y("label"),I.textContent=X,B=y("br"),K=k(),G=y("input"),ne=k(),$=y("label"),$.textContent=de,xe=y("br"),ze=k(),Z=y("input"),J=k(),ae=y("label"),ae.textContent=We,he=k(),te=y("input"),h=k(),P=y("label"),P.textContent=Te,pe=k(),Y=y("div"),Me=y("div"),Me.innerHTML=Q,re=k(),oe=y("div"),ie=y("div"),Be=y("h3"),Ot=R("11 Types of Co-Benefits Values (vs. "),rt=y("span"),At=R(e[8]),qt=R(" Average)"),jt=k(),Ae=y("p"),Ut=R("Co-benefits values in "),Yt=R(On),Wt=R(` verus average value across all local
                    authorities in `),lt=y("span"),kt=R(e[8]),Gt=k(),Ne=y("div"),Ne.innerHTML=qn,Zt=k(),ve=y("div"),Ge=y("h3"),Xt=R(jn),Kt=R(" on UK Map"),Jt=k(),Ze=y("p"),Ze.textContent=Un,Qt=k(),ke=y("div"),ke.innerHTML=Yn,$t=k(),ge=y("div"),Xe=y("div"),Xe.innerHTML=Wn,en=k(),ce=y("div"),Se=y("h3"),tn=R("Total Co-benefits Distribution from 2025-2050 (vs. "),ot=y("span"),Dt=R(e[8]),nn=R(" Average)"),an=k(),me=y("p"),sn=R("Aggregated values from 2025-2049 in "),rn=R(Gn),ln=R(" compared to average value of benefits recieved across all local authorities in "),it=y("span"),Lt=R(e[8]),on=R("."),cn=k(),un=y("br"),fn=k(),ct=y("div"),Ie=y("div"),Ie.innerHTML=Zn,dn=k(),ye=y("div"),le=y("div"),Ve=y("h3"),hn=R("Average co-benefit gain/loss for the area of "),pn=R(Xn),vn=R(" (by 5 year intervals)"),gn=k(),mn=y("br"),yn=k(),Pe=y("div"),Pe.innerHTML=Kn,bn=k(),Fe=y("div"),Fe.innerHTML=Jn,_n=k(),ut=y("div"),Cn=k(),He=y("div"),se=y("div"),Ke=y("p"),Ke.textContent=Qn,En=k(),Je=y("h2"),Je.textContent=$n,wn=k(),Qe=y("p"),Qe.textContent=ea,Mn=k(),$e=y("input"),An=k(),Re=y("label"),Re.textContent=ta,kn=k(),Oe=y("div");for(let F=0;F<ee.length;F+=1)ee[F].c();this.h()},l(F){Ja(t.$$.fragment,F),n=A(F),a=m(F,"DIV",{class:!0});var W=T(a);s=m(W,"DIV",{style:!0}),T(s).forEach(M),r=A(W),l=m(W,"DIV",{class:!0});var q=T(l);f=m(q,"P",{class:!0,"data-svelte-h":!0}),j(f)!=="svelte-1gxb8h1"&&(f.textContent=d),i=A(q),c=m(q,"H1",{class:!0});var Ct=T(c);u=H(Ct,v),Ct.forEach(M),b=A(q),C=m(q,"P",{class:!0,"data-svelte-h":!0}),j(C)!=="svelte-g7xah4"&&(C.textContent=L),x=A(q),_=m(q,"DIV",{class:!0});var U=T(_);g=H(U,`Compare the Local District Area with average of:
            `),D=m(U,"INPUT",{type:!0,name:!0}),E=A(U),N=m(U,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),j(N)!=="svelte-1yhxhao"&&(N.textContent=z),V=m(U,"BR",{}),O=A(U),S=m(U,"INPUT",{type:!0,name:!0}),w=A(U),I=m(U,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),j(I)!=="svelte-11zyrfp"&&(I.textContent=X),B=m(U,"BR",{}),K=A(U),G=m(U,"INPUT",{type:!0,name:!0}),ne=A(U),$=m(U,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),j($)!=="svelte-18hrmu4"&&($.textContent=de),xe=m(U,"BR",{}),ze=A(U),Z=m(U,"INPUT",{type:!0,name:!0}),J=A(U),ae=m(U,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),j(ae)!=="svelte-16xf1ji"&&(ae.textContent=We),he=A(U),te=m(U,"INPUT",{type:!0,name:!0}),h=A(U),P=m(U,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),j(P)!=="svelte-g19yfx"&&(P.textContent=Te),U.forEach(M),q.forEach(M),pe=A(W),Y=m(W,"DIV",{class:!0});var xt=T(Y);Me=m(xt,"DIV",{class:!0,"data-svelte-h":!0}),j(Me)!=="svelte-ppwlk3"&&(Me.innerHTML=Q),re=A(xt),oe=m(xt,"DIV",{id:!0,class:!0});var zt=T(oe);ie=m(zt,"DIV",{class:!0});var dt=T(ie);Be=m(dt,"H3",{class:!0});var Tt=T(Be);Ot=H(Tt,"11 Types of Co-Benefits Values (vs. "),rt=m(Tt,"SPAN",{class:!0});var aa=T(rt);At=H(aa,e[8]),aa.forEach(M),qt=H(Tt," Average)"),Tt.forEach(M),jt=A(dt),Ae=m(dt,"P",{class:!0});var Et=T(Ae);Ut=H(Et,"Co-benefits values in "),Yt=H(Et,On),Wt=H(Et,` verus average value across all local
                    authorities in `),lt=m(Et,"SPAN",{class:!0});var sa=T(lt);kt=H(sa,e[8]),sa.forEach(M),Et.forEach(M),Gt=A(dt),Ne=m(dt,"DIV",{class:!0,"data-svelte-h":!0}),j(Ne)!=="svelte-1gmwtaj"&&(Ne.innerHTML=qn),dt.forEach(M),Zt=A(zt),ve=m(zt,"DIV",{class:!0});var ht=T(ve);Ge=m(ht,"H3",{class:!0});var Ln=T(Ge);Xt=H(Ln,jn),Kt=H(Ln," on UK Map"),Ln.forEach(M),Jt=A(ht),Ze=m(ht,"P",{class:!0,"data-svelte-h":!0}),j(Ze)!=="svelte-1ask2se"&&(Ze.textContent=Un),Qt=A(ht),ke=m(ht,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),j(ke)!=="svelte-13ehpmu"&&(ke.innerHTML=Yn),ht.forEach(M),zt.forEach(M),xt.forEach(M),$t=A(W),ge=m(W,"DIV",{class:!0});var pt=T(ge);Xe=m(pt,"DIV",{class:!0,"data-svelte-h":!0}),j(Xe)!=="svelte-1d07eqe"&&(Xe.innerHTML=Wn),en=A(pt),ce=m(pt,"DIV",{class:!0});var je=T(ce);Se=m(je,"H3",{class:!0});var Bt=T(Se);tn=H(Bt,"Total Co-benefits Distribution from 2025-2050 (vs. "),ot=m(Bt,"SPAN",{class:!0});var ra=T(ot);Dt=H(ra,e[8]),ra.forEach(M),nn=H(Bt," Average)"),Bt.forEach(M),an=A(je),me=m(je,"P",{class:!0});var vt=T(me);sn=H(vt,"Aggregated values from 2025-2049 in "),rn=H(vt,Gn),ln=H(vt," compared to average value of benefits recieved across all local authorities in "),it=m(vt,"SPAN",{class:!0});var la=T(it);Lt=H(la,e[8]),la.forEach(M),on=H(vt,"."),vt.forEach(M),cn=A(je),un=m(je,"BR",{}),fn=A(je),ct=m(je,"DIV",{class:!0});var oa=T(ct);Ie=m(oa,"DIV",{class:!0,"data-svelte-h":!0}),j(Ie)!=="svelte-vuq0y7"&&(Ie.innerHTML=Zn),oa.forEach(M),je.forEach(M),dn=A(pt),ye=m(pt,"DIV",{id:!0,class:!0,style:!0});var Nt=T(ye);le=m(Nt,"DIV",{id:!0,class:!0});var Ue=T(le);Ve=m(Ue,"H3",{class:!0});var St=T(Ve);hn=H(St,"Average co-benefit gain/loss for the area of "),pn=H(St,Xn),vn=H(St," (by 5 year intervals)"),St.forEach(M),gn=A(Ue),mn=m(Ue,"BR",{}),yn=A(Ue),Pe=m(Ue,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),j(Pe)!=="svelte-1qdblfs"&&(Pe.innerHTML=Kn),bn=A(Ue),Fe=m(Ue,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),j(Fe)!=="svelte-1wvqh4q"&&(Fe.innerHTML=Jn),Ue.forEach(M),_n=A(Nt),ut=m(Nt,"DIV",{class:!0}),T(ut).forEach(M),Nt.forEach(M),pt.forEach(M),Cn=A(W),He=m(W,"DIV",{class:!0});var It=T(He);se=m(It,"DIV",{class:!0});var be=T(se);Ke=m(be,"P",{class:!0,"data-svelte-h":!0}),j(Ke)!=="svelte-ceroz1"&&(Ke.textContent=Qn),En=A(be),Je=m(be,"H2",{class:!0,"data-svelte-h":!0}),j(Je)!=="svelte-so6kne"&&(Je.textContent=$n),wn=A(be),Qe=m(be,"P",{class:!0,"data-svelte-h":!0}),j(Qe)!=="svelte-1u75598"&&(Qe.textContent=ea),Mn=A(be),$e=m(be,"INPUT",{type:!0}),An=A(be),Re=m(be,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),j(Re)!=="svelte-1kwkdzm"&&(Re.textContent=ta),be.forEach(M),kn=A(It),Oe=m(It,"DIV",{id:!0,class:!0});var ia=T(Oe);for(let xn=0;xn<ee.length;xn+=1)ee[xn].l(ia);ia.forEach(M),It.forEach(M),W.forEach(M),this.h()},h(){ca(s,"--color",at),p(f,"class","page-subtitle"),p(c,"class","page-title"),p(C,"class","description"),p(D,"type","radio"),p(D,"name","compare"),D.value="UK",D.checked=!0,p(N,"class","nation-label svelte-12gg53n"),p(N,"for","html"),p(S,"type","radio"),p(S,"name","compare"),S.value="England",p(I,"class","nation-label svelte-12gg53n"),p(I,"for","html"),p(G,"type","radio"),p(G,"name","compare"),G.value="Wales",p($,"class","nation-label svelte-12gg53n"),p($,"for","html"),p(Z,"type","radio"),p(Z,"name","compare"),Z.value="Scotland",p(ae,"class","nation-label svelte-12gg53n"),p(ae,"for","javascript"),p(te,"type","radio"),p(te,"name","compare"),te.value="NI",p(P,"class","nation-label svelte-12gg53n"),p(P,"for","javascript"),p(_,"class","radio-set"),p(l,"class","section header"),p(Me,"class","section-header"),p(rt,"class","nation-label svelte-12gg53n"),p(Be,"class","component-title"),p(lt,"class","nation-label svelte-12gg53n"),p(Ae,"class","description"),p(Ne,"class","plot"),p(ie,"class","component column"),p(Ge,"class","component-title"),p(Ze,"class","description"),p(ke,"id","map"),p(ke,"class","svelte-12gg53n"),p(ve,"class","component column"),p(oe,"id","vis-block"),p(oe,"class","svelte-12gg53n"),p(Y,"class","section"),p(Xe,"class","section-header"),p(ot,"class","nation-label svelte-12gg53n"),p(Se,"class","component-title"),p(it,"class","nation-label svelte-12gg53n"),p(me,"class","description"),p(Ie,"class","plot"),p(ct,"class","row"),p(ce,"class","component singlevis"),p(Ve,"class","component-title"),p(Pe,"id","main-legend"),p(Pe,"class","legend-box svelte-12gg53n"),p(Fe,"id","main-disclaimer"),p(Fe,"class","disclaimer-box svelte-12gg53n"),p(le,"id","main-title"),p(le,"class","svelte-12gg53n"),p(ut,"class","plot"),p(ye,"id","main-block"),p(ye,"class","component svelte-12gg53n"),ca(ye,"margin-left","0.5rem"),p(ge,"class","section"),p(Ke,"class","section-subtitle"),p(Je,"class","section-title"),p(Qe,"class","description"),p($e,"type","checkbox"),p(Re,"for","checkbox"),p(Re,"class","svelte-12gg53n"),p(se,"class","section-header"),p(Oe,"id","multiple-comp"),p(Oe,"class","svelte-12gg53n"),p(He,"class","section"),p(a,"class","page-container")},m(F,W){Ka(t,F,W),st(F,n,W),st(F,a,W),o(a,s),o(a,r),o(a,l),o(l,f),o(l,i),o(l,c),o(c,u),o(l,b),o(l,C),o(l,x),o(l,_),o(_,g),o(_,D),o(_,E),o(_,N),o(_,V),o(_,O),o(_,S),o(_,w),o(_,I),o(_,B),o(_,K),o(_,G),o(_,ne),o(_,$),o(_,xe),o(_,ze),o(_,Z),o(_,J),o(_,ae),o(_,he),o(_,te),o(_,h),o(_,P),o(a,pe),o(a,Y),o(Y,Me),o(Y,re),o(Y,oe),o(oe,ie),o(ie,Be),o(Be,Ot),o(Be,rt),o(rt,At),o(Be,qt),o(ie,jt),o(ie,Ae),o(Ae,Ut),o(Ae,Yt),o(Ae,Wt),o(Ae,lt),o(lt,kt),o(ie,Gt),o(ie,Ne),e[19](Ne),o(oe,Zt),o(oe,ve),o(ve,Ge),o(Ge,Xt),o(Ge,Kt),o(ve,Jt),o(ve,Ze),o(ve,Qt),o(ve,ke),e[20](ke),o(a,$t),o(a,ge),o(ge,Xe),o(ge,en),o(ge,ce),o(ce,Se),o(Se,tn),o(Se,ot),o(ot,Dt),o(Se,nn),o(ce,an),o(ce,me),o(me,sn),o(me,rn),o(me,ln),o(me,it),o(it,Lt),o(me,on),o(ce,cn),o(ce,un),o(ce,fn),o(ce,ct),o(ct,Ie),e[21](Ie),o(ge,dn),o(ge,ye),o(ye,le),o(le,Ve),o(Ve,hn),o(Ve,pn),o(Ve,vn),o(le,gn),o(le,mn),o(le,yn),o(le,Pe),o(le,bn),o(le,Fe),o(ye,_n),o(ye,ut),e[22](ut),o(a,Cn),o(a,He),o(He,se),o(se,Ke),o(se,En),o(se,Je),o(se,wn),o(se,Qe),o(se,Mn),o(se,$e),$e.checked=e[7],o(se,An),o(se,Re),o(He,kn),o(He,Oe);for(let q=0;q<ee.length;q+=1)ee[q]&&ee[q].m(Oe,null);e[28](a),qe=!0,Dn||(na=[gt(D,"change",e[12]),gt(S,"change",e[12]),gt(G,"change",e[12]),gt(Z,"change",e[12]),gt(te,"change",e[12]),gt($e,"change",e[23])],Dn=!0)},p(F,W){if((!qe||W[0]&256)&&wt(At,F[8]),(!qe||W[0]&256)&&wt(kt,F[8]),(!qe||W[0]&256)&&wt(Dt,F[8]),(!qe||W[0]&256)&&wt(Lt,F[8]),W[0]&128&&($e.checked=F[7]),W[0]&440){ft=ua(Vn);let q;for(q=0;q<ft.length;q+=1){const Ct=xa(F,ft,q);ee[q]?ee[q].p(Ct,W):(ee[q]=za(Ct),ee[q].c(),ee[q].m(Oe,null))}for(;q<ee.length;q+=1)ee[q].d(1);ee.length=ft.length}},i(F){qe||(Xa(t.$$.fragment,F),qe=!0)},o(F){Za(t.$$.fragment,F),qe=!1},d(F){F&&(M(n),M(a)),Ga(t,F),e[19](null),e[20](null),e[21](null),e[22](null),qa(ee,F),e[28](null),Dn=!1,ja(na)}}}let fe=400;function nt(e){const t=e.querySelector("figure");t&&t.remove();const n=e.querySelector("svg");n&&n.remove()}function Rr(e,t,n){let a,s,r,l,f={},d={},i={},c={},v="barchart",u=!1,{data:b}=t;const C=b.LAD;let L="UK",x,_,g,D,E,N,z=!1;async function V(){n(15,x=await we(va())),await we(Bs()),n(16,_=await we(ga([]))),g=await we(Ns(da.map(h=>h.id))),n(17,D=await we(ma())),E=await we(Ss(C)),N=await we(Is(C)),n(18,z=!0),ks(a)}V();const O=b.LADToName;let S,w;Ua(()=>{As(a),S=new Es(C,"LAD",w,"val",!0),S.initMap()});function I(){{let h=ue({height:fe/1.4,...Ee,x:{type:"band"},style:{fontSize:"18px"},marks:[et(_,_e({y:"mean"},{y:"val",x:"scenario",fill:"lightblue",opacity:.7,dx:20})),et(E,_e({y:"sum"},{y:"total",x:"scenario",tip:!0}))]});setTimeout(()=>{const P=Ce(h).selectAll("g[aria-label='bar']"),Te=Ce(P.nodes()[0]),pe=Ce(P.nodes()[1]);console.log(2323232323,Te.node()),pe.selectAll("rect").each(function(){console.log(2,this)}),pe.remove()},1e3)}}function X(){console.log(99,D),s?.append(ue({height:fe,width:811,MARGINS:Ee,x:{type:"band"},marks:[et(D,_e({y:"mean"},{y:"val",x:"co_benefit_type",dx:Ds,fill:at,sort:{x:"y",reverse:!0},tip:!0})),et(N,_e({y:"sum"},{y:"total",x:"co_benefit_type",fill:h=>Ls(h.co_benefit_type),tip:!0}))]}))}function B(){Vn.forEach(h=>{let P;u?(ha.includes(h)?P=ue({height:fe/3,width:500*2,...Ee,style:{fontSize:"18px"},color:{legend:!0,scheme:"greys"},x:{domain:Va(0,6),ticks:new Set(E.map(Y=>Y[h]))},marks:[wa(E,_e({fill:"count"},{x:h,stroke:"black"})),wa([Math.floor(Mt(x.map(Y=>Y[h])))],{x:Y=>Y,stroke:"red",fill:null,strokeWidth:2})]}):P=ue({height:fe/3,width:500*2,...Ee,style:{fontSize:"18px"},color:{legend:!0},marks:[Bn(E,{x:h,tip:!0}),Bn([Mt(E.map(Y=>Y[h]))],{stroke:"blue",strokeWidth:2}),Bn([Mt(x.map(Y=>Y[h]))],{stroke:"red",strokeWidth:2})]}),f[h]?.append(P)):(ha.includes(h)?P=ue({height:fe/2,width:500,...Ee,marginLeft:100,x:{grid:!0,label:h,tickFormat:Y=>Math.floor(Y)},style:{fontSize:"18px"},color:{legend:!0},marks:[et(x,Da(_e({y:"count"},{x:h,dx:20,fill:at}))),et(E,Da(_e({y:"count"},{x:h})))]}):P=ue({height:fe/2,...Ee,x:{label:pa(h)},style:{fontSize:"18px"},marks:[Tn(E,_a({y:"proportion"},{x:h,tip:!0,fill:at,stroke:at,fillOpacity:.2,strokeWidth:3})),Tn(x,_a({y:"proportion"},{x:h,tip:!0,fill:"black",stroke:"black",fillOpacity:.2,strokeWidth:3}))]}),d[h]?.append(void 0),f[h]?.append(P));let pe=ue({height:fe/2,...Ee,x:{label:pa(h)},style:{fontSize:"18px"},color:{range:["rgb(227, 248, 255)","lightblue"]},marks:[gr(ws(x,3e4),{x:h,y:"total",fill:"density",thresholds:10}),qs(E,{x:h,y:"total",fill:"black",r:2}),kr(E,{x:h,y:"total"}),_s(),Cs({anchor:"bottom"})]});i[h]?.append(pe)})}function K(){for(let h of Ts){let P=ue({height:fe,width:410,...Ee,marginRight:0,marginLeft:100,marks:[ya(g,fa({x:"mean"},{x:"val",y:"co_benefit_type",dy:-10,fill:at,tip:!0})),ya(N,fa({x:"mean"},{x:"total",y:"co_benefit_type",tip:!0}))]});c[h]?.append(P)}}function G(){let h=E.flatMap(Q=>zn.map(re=>({time:re,value:Q[re],scenario:Q.scenario,zone:"local"}))),P=x.flatMap(Q=>zn.map(re=>({time:re,value:Q[re],scenario:Q.scenario,zone:"UK"}))),Te=h.concat(P),pe=ue({height:fe,width:800,...Ee,marginRight:0,marginLeft:60,marginTop:40,marginBottom:70,style:{fontSize:"18px"},y:{label:"£",grid:!0},x:{tickSize:0,label:null,ticks:[],padding:0},color:{range:[xs,at]},marks:[et(Te,_e({y:"mean"},{x:"zone",y:"value",fx:"time",tip:!0,fill:"zone"})),ys({anchor:"bottom",tickFormat:Q=>Q.replace(/^Y/,"").replace("_","-"),offset:5,label:"Years"})]});r?.append(pe),Ce(r).select("g[aria-label='bar']").selectAll("g").each(function(Q,re){const oe=Ce(this).selectAll("rect").nodes()[0],ie=Ce(oe).attr("transform")||"";Ce(oe).attr("transform",`${ie} translate(-20, 0)`),Ce(this).selectAll("rect").nodes()[0].getAttribute("height"),Ce(this).selectAll("rect").nodes()[1].getAttribute("height"),Ce(this).selectAll("rect")}),ue({height:fe,width:800,...Ee,paddingLeft:200,marginRight:0,color:{legend:!0},marks:[hr(Te,_e({y:"mean"},{x:"time",y:"value",tip:!0,stroke:"scenario"}))]});let Y=N.flatMap(Q=>zn.map(re=>({time:re,value:Q[re],cobenefit:Q.co_benefit_type})));console.log("debug",Y);let Me=ue({height:fe*3,width:2500,marginRight:0,marginTop:40,marginLeft:80,marginBottom:80,insetTop:30,style:{fontSize:"30px"},y:{tickFormat:".2f",label:"£",ticks:10},x:{label:"Years",tickFormat:Q=>Q.replace(/^Y/,"").split("_")[1]},color:{legend:!1,range:zs,domain:da.map(Q=>Q.id)},marks:[Tn(Y,_e({y:"mean"},{x:"time",y:"value",tip:!0,fill:"cobenefit",curve:"basis",order:["Road safety","Congestion","Air quality","Noise","Excess cold","Excess heat","Dampness","Road repairs","Physical activity","Diet change","Hassle costs"]})),bs([0],{strokeWidth:2,stroke:"#333333",opacity:.5,strokeLinecap:"round"})]});l?.append(Me)}async function ne(h){n(8,L=h.currentTarget.value),n(17,D=await we(ma("total",L))),n(16,_=await we(ga([],L))),n(15,x=await we(va(L)))}function $(h){De[h?"unshift":"push"](()=>{s=h,n(0,s)})}function de(h){De[h?"unshift":"push"](()=>{w=h,n(9,w)})}function xe(h){De[h?"unshift":"push"](()=>{r=h,n(1,r)})}function ze(h){De[h?"unshift":"push"](()=>{l=h,n(2,l)})}function Z(){u=this.checked,n(7,u)}function J(h,P){De[h?"unshift":"push"](()=>{f[P]=h,n(3,f)})}function ae(h,P){De[h?"unshift":"push"](()=>{f[P]=h,n(3,f)})}function We(h,P){De[h?"unshift":"push"](()=>{d[P]=h,n(4,d)})}function he(h,P){De[h?"unshift":"push"](()=>{i[P]=h,n(5,i)})}function te(h){De[h?"unshift":"push"](()=>{a=h,n(6,a)})}return e.$$set=h=>{"data"in h&&n(13,b=h.data)},e.$$.update=()=>{e.$$.dirty[0]&507911&&(s&&nt(s),r&&nt(r),l&&nt(l),z&&D&&_&&x&&(console.log("render"),I(),X(),G())),e.$$.dirty[0]&262200&&(Object.values(f).forEach(h=>{h&&nt(h)}),Object.values(d).forEach(h=>{h&&nt(h)}),Object.values(i).forEach(h=>{h&&nt(h)}),z&&B()),e.$$.dirty[0]&262144&&(Object.values(c).forEach(h=>{h&&nt(h)}),z&&K())},[s,r,l,f,d,i,a,u,L,w,C,O,ne,b,v,x,_,D,z,$,de,xe,ze,Z,J,ae,We,he,te]}class Qr extends Ya{constructor(t){super(),Wa(this,t,Rr,Hr,Oa,{data:13},null,[-1,-1])}}export{Qr as component};
