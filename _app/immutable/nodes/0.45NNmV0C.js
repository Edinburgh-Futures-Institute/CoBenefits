import{b as N}from"../chunks/paths.BelhjveB.js";import"../chunks/transform.Cz5Y6iUM.js";import{j as U,f as H}from"../chunks/feature.5WxnA5ph.js";import{k as I,g,l as M,m as Z,n as F,o as z,p as G}from"../chunks/duckdb.CLqChu-O.js";import{s as V,l as W,u as k,m as Y,o as q}from"../chunks/scheduler.NCp-wYW6.js";import{S as J,i as K,t as Q,a as X}from"../chunks/index.C55kfEDL.js";var y={},S={},E=34,D=10,w=13;function R(t){return new Function("d","return {"+t.map(function(o,e){return JSON.stringify(o)+": d["+e+'] || ""'}).join(",")+"}")}function x(t,o){var e=R(t);return function(r,a){return o(e(r),a,t)}}function O(t){var o=Object.create(null),e=[];return t.forEach(function(r){for(var a in r)a in o||e.push(o[a]=a)}),e}function c(t,o){var e=t+"",r=e.length;return r<o?new Array(o-r+1).join(0)+e:e}function tt(t){return t<0?"-"+c(-t,6):t>9999?"+"+c(t,6):c(t,4)}function et(t){var o=t.getUTCHours(),e=t.getUTCMinutes(),r=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":tt(t.getUTCFullYear())+"-"+c(t.getUTCMonth()+1,2)+"-"+c(t.getUTCDate(),2)+(a?"T"+c(o,2)+":"+c(e,2)+":"+c(r,2)+"."+c(a,3)+"Z":r?"T"+c(o,2)+":"+c(e,2)+":"+c(r,2)+"Z":e||o?"T"+c(o,2)+":"+c(e,2)+"Z":"")}function nt(t){var o=new RegExp('["'+t+`
\r]`),e=t.charCodeAt(0);function r(n,u){var _,f,i=a(n,function(A,m){if(_)return _(A,m-1);f=A,_=u?x(A,u):R(A)});return i.columns=f||[],i}function a(n,u){var _=[],f=n.length,i=0,A=0,m,P=f<=0,d=!1;n.charCodeAt(f-1)===D&&--f,n.charCodeAt(f-1)===w&&--f;function b(){if(P)return S;if(d)return d=!1,y;var v,C=i,h;if(n.charCodeAt(C)===E){for(;i++<f&&n.charCodeAt(i)!==E||n.charCodeAt(++i)===E;);return(v=i)>=f?P=!0:(h=n.charCodeAt(i++))===D?d=!0:h===w&&(d=!0,n.charCodeAt(i)===D&&++i),n.slice(C+1,v-1).replace(/""/g,'"')}for(;i<f;){if((h=n.charCodeAt(v=i++))===D)d=!0;else if(h===w)d=!0,n.charCodeAt(i)===D&&++i;else if(h!==e)continue;return n.slice(C,v)}return P=!0,n.slice(C,f)}for(;(m=b())!==S;){for(var L=[];m!==y&&m!==S;)L.push(m),m=b();u&&(L=u(L,A++))==null||_.push(L)}return _}function p(n,u){return n.map(function(_){return u.map(function(f){return l(_[f])}).join(t)})}function $(n,u){return u==null&&(u=O(n)),[u.map(l).join(t)].concat(p(n,u)).join(`
`)}function T(n,u){return u==null&&(u=O(n)),p(n,u).join(`
`)}function j(n){return n.map(s).join(`
`)}function s(n){return n.map(l).join(t)}function l(n){return n==null?"":n instanceof Date?et(n):o.test(n+="")?'"'+n.replace(/"/g,'""')+'"':n}return{parse:r,parseRows:a,format:$,formatBody:T,formatRows:j,formatRow:s,formatValue:l}}var ot=nt(","),rt=ot.parse;function at(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function st(t,o){return fetch(t,o).then(at)}function ut(t){return function(o,e,r){return arguments.length===2&&typeof e=="function"&&(r=e,e=void 0),st(o,e).then(function(a){return t(a,r)})}}var B=ut(rt);const it="maps/Lower_layer_Super_Output_Areas_2021_EW_BGC_V3_-6823567593069184824.json",ft=`${N}/LAD/Eng_Wales_LSOA_LADs.csv`,ct=`${N}/LAD/NI_DZ_LAD.csv`,lt=`${N}/LAD/Scotland_DZ_LA.csv`;async function pt(){await I();const t=await U(it,s=>s),o=H(t,t.objects["Lower_layer_Super_Output_Areas_2021_EW_BGC_V3_-6823567593069184824"]);let e={};await B(ft).then(s=>{for(let l of s)e[l.LAD22CD]=l.LAD22NM}),await B(ct).then(s=>{for(let l of s)e[l.LGD2014_code]=l.LGD2014_name}),await B(lt).then(s=>{for(let l of s)e[l.LA_Code]=l.LA_Name});let r=await g(M());const p=(await g(Z(10))).map(s=>({LAD:s.LAD,name:e[s.LAD]||s.LAD,total:s.total_value}));await g(F());const T=(await g(z(10))).map(s=>({LAD:s.LAD,name:e[s.LAD]||s.LAD,per:s.value_per_household,total:s.total_value}));let j=await g(G());return console.log("end root"),{datazones:o,LADToName:e,aggregationPerBenefit:r,topLADsData:p,topSelectedLADsPerHouseholdData:T,aggregationPerHouseholdPerBenefit:j}}const _t=!1,mt=!0,Tt=Object.freeze(Object.defineProperty({__proto__:null,load:pt,prerender:mt,ssr:_t},Symbol.toStringTag,{value:"Module"}));function At(t){let o;const e=t[1].default,r=W(e,t,t[0],null);return{c(){r&&r.c()},l(a){r&&r.l(a)},m(a,p){r&&r.m(a,p),o=!0},p(a,[p]){r&&r.p&&(!o||p&1)&&k(r,e,a,a[0],o?q(e,a[0],p,null):Y(a[0]),null)},i(a){o||(Q(r,a),o=!0)},o(a){X(r,a),o=!1},d(a){r&&r.d(a)}}}function dt(t,o,e){let{$$slots:r={},$$scope:a}=o;return t.$$set=p=>{"$$scope"in p&&e(0,a=p.$$scope)},[a,r]}class jt extends J{constructor(o){super(),K(this,o,dt,At,V,{})}}export{jt as component,Tt as universal};
