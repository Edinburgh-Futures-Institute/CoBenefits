import{s as Bl,a as D,e as f,t as y,g as L,c as d,b as m,p as te,d as k,f as o,q as u,B as be,i as V,h as i,y as Cl,j as Ae,w as pl,r as Rl,G as xl,n as He,H as Ul,E as Wl,C as Gl,A as Le}from"../chunks/scheduler.DxTP-Qzi.js";import{S as zl,i as jl,c as vl,b as _l,m as ml,t as gl,a as bl,d as yl}from"../chunks/index.CDFQmUj4.js";import{N as ql,e as Vt}from"../chunks/NavigationBar.DwRB8Fk_.js";import"../chunks/transform.BNP73y-7.js";import{aM as Yl,ao as Kt,ap as Kl,t as kl,at as Jl,H as El,aN as Xl,aO as Ql,aP as Zl,G as $l,I as Ge,W as ea,J as ze,L as ct,O as ut,N as Dl,aQ as ta,K as ft}from"../chunks/index.DRj_ZHTF.js";import{f as Jt}from"../chunks/module.BDHLYmQ2.js";import{b as la}from"../chunks/paths.CFvcU-jh.js";import{M as aa}from"../chunks/mapUK.CDP5nB_A.js";import{m as sa,n as ia,o as ra,p as na,q as oa,s as ca,a as Ll,e as ht,g as ua,S as Fe,t as It,h as fa,u as Xt,r as da,d as ha}from"../chunks/globals.CPw9uYOx.js";import{g as dt,i as pa,h as va,w as _a,x as ma,r as ga}from"../chunks/duckdb.CuY4Pjtu.js";import{p as Mt}from"../chunks/per_capita.COcMrZFY.js";import{F as ba}from"../chunks/Footer.CIaV8sxW.js";import{n as ya}from"../chunks/nice.BkzgUbph.js";import{t as ka,b as Ea}from"../chunks/bin.Bl2kikCE.js";import{a as Da}from"../chunks/bar.2xGs5Shd.js";import{d as Tt}from"../chunks/dot.LN3TJCxy.js";var La=Array.prototype,Aa=La.slice;function Qt(l){return()=>l}function Sa(){var l=Yl,t=Kt,e=ka;function a(r){Array.isArray(r)||(r=Array.from(r));var s,c=r.length,_,h,v=new Array(c);for(s=0;s<c;++s)v[s]=l(r[s],s,r);var A=t(v),E=A[0],b=A[1],w=e(v,E,b);if(!Array.isArray(w)){const g=b,I=+w;if(t===Kt&&([E,b]=ya(E,b,I)),w=Kl(E,b,I),w[0]<=E&&(h=kl(E,b,I)),w[w.length-1]>=b)if(g>=b&&t===Kt){const H=kl(E,b,I);isFinite(H)&&(H>0?b=(Math.floor(b/H)+1)*H:H<0&&(b=(Math.ceil(b*-H)+1)/-H))}else w.pop()}for(var P=w.length,C=0,R=P;w[C]<=E;)++C;for(;w[R-1]>b;)--R;(C||R<P)&&(w=w.slice(C,R),P=R-C);var F=new Array(P+1),N;for(s=0;s<=P;++s)N=F[s]=[],N.x0=s>0?w[s-1]:E,N.x1=s<P?w[s]:b;if(isFinite(h)){if(h>0)for(s=0;s<c;++s)(_=v[s])!=null&&E<=_&&_<=b&&F[Math.min(P,Math.floor((_-E)/h))].push(r[s]);else if(h<0){for(s=0;s<c;++s)if((_=v[s])!=null&&E<=_&&_<=b){const g=Math.floor((E-_)*h);F[Math.min(P,g+(w[g]<=_))].push(r[s])}}}else for(s=0;s<c;++s)(_=v[s])!=null&&E<=_&&_<=b&&F[Jl(w,_,0,P)].push(r[s]);return F}return a.value=function(r){return arguments.length?(l=typeof r=="function"?r:Qt(r),a):l},a.domain=function(r){return arguments.length?(t=typeof r=="function"?r:Qt([r[0],r[1]]),a):t},a.thresholds=function(r){return arguments.length?(e=typeof r=="function"?r:Qt(Array.isArray(r)?Aa.call(r):r),a):e},a}const wa=""+new URL("../assets/negative.BhphYhmj.png",import.meta.url).href;function Al(l,t,e){const a=l.slice();return a[68]=t[e],a[69]=t,a[70]=e,a}function Sl(l,t,e){const a=l.slice();return a[68]=t[e],a}function Va(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(e,a){V(e,t,a),l[38](t)},p:He,d(e){e&&o(t),l[38](null)}}}function Ia(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(e,a){V(e,t,a),l[37](t)},p:He,d(e){e&&o(t),l[37](null)}}}function Ta(l){let t,e,a=Se(l[12],l[24])+"",r,s,c,_;return{c(){t=y("Max value: "),e=f("strong"),r=y(a),s=y("("),c=y(l[14]),_=y(")")},l(h){t=k(h,"Max value: "),e=d(h,"STRONG",{});var v=m(e);r=k(v,a),v.forEach(o),s=k(h,"("),c=k(h,l[14]),_=k(h,")")},m(h,v){V(h,t,v),V(h,e,v),i(e,r),V(h,s,v),V(h,c,v),V(h,_,v)},p(h,v){v[0]&4096&&a!==(a=Se(h[12],h[24])+"")&&Ae(r,a),v[0]&16384&&Ae(c,h[14])},d(h){h&&(o(t),o(e),o(s),o(c),o(_))}}}function Ma(l){let t,e,a,r,s=l[25].toLowerCase()+"",c,_;return{c(){t=f("h3"),e=y("Distribution of "),a=y(l[21]),r=y(" by "),c=y(s),_=y(" across the UK"),this.h()},l(h){t=d(h,"H3",{class:!0});var v=m(t);e=k(v,"Distribution of "),a=k(v,l[21]),r=k(v," by "),c=k(v,s),_=k(v," across the UK"),v.forEach(o),this.h()},h(){u(t,"class","component-title")},m(h,v){V(h,t,v),i(t,e),i(t,a),i(t,r),i(t,c),i(t,_)},p:He,d(h){h&&o(t)}}}function Ca(l){let t,e,a=Se(l[10],l[24])+"",r;return{c(){t=y("Average value: "),e=f("strong"),r=y(a),this.h()},l(s){t=k(s,"Average value: "),e=d(s,"STRONG",{style:!0});var c=m(e);r=k(c,a),c.forEach(o),this.h()},h(){be(e,"color","#BD210E")},m(s,c){V(s,t,c),V(s,e,c),i(e,r)},p(s,c){c[0]&1024&&a!==(a=Se(s[10],s[24])+"")&&Ae(r,a)},d(s){s&&(o(t),o(e))}}}function Fa(l){let t;return{c(){t=y(" ")},l(e){t=k(e," ")},m(e,a){V(e,t,a)},p:He,d(e){e&&o(t)}}}function Ha(l){let t,e,a=Se(l[13],l[24])+"",r,s,c,_;return{c(){t=y("Min value: "),e=f("strong"),r=y(a),s=y("("),c=y(l[15]),_=y(")")},l(h){t=k(h,"Min value: "),e=d(h,"STRONG",{});var v=m(e);r=k(v,a),v.forEach(o),s=k(h,"("),c=k(h,l[15]),_=k(h,")")},m(h,v){V(h,t,v),V(h,e,v),i(e,r),V(h,s,v),V(h,c,v),V(h,_,v)},p(h,v){v[0]&8192&&a!==(a=Se(h[13],h[24])+"")&&Ae(r,a),v[0]&32768&&Ae(c,h[15])},d(h){h&&(o(t),o(e),o(s),o(c),o(_))}}}function Na(l){let t,e,a=Se(l[11],l[24])+"",r;return{c(){t=y("Most common category: "),e=f("strong"),r=y(a),this.h()},l(s){t=k(s,"Most common category: "),e=d(s,"STRONG",{style:!0});var c=m(e);r=k(c,a),c.forEach(o),this.h()},h(){be(e,"color","#BD210E")},m(s,c){V(s,t,c),V(s,e,c),i(e,r)},p(s,c){c[0]&2048&&a!==(a=Se(s[11],s[24])+"")&&Ae(r,a)},d(s){s&&(o(t),o(e))}}}function wl(l){let t,e,a,r,s;return{c(){t=f("div"),e=f("div"),a=f("span"),r=y(l[21]),s=y(" >>"),this.h()},l(c){t=d(c,"DIV",{class:!0});var _=m(t);e=d(_,"DIV",{class:!0});var h=m(e);a=d(h,"SPAN",{class:!0});var v=m(a);r=k(v,l[21]),s=k(v," >>"),v.forEach(o),h.forEach(o),_.forEach(o),this.h()},h(){u(a,"class","mini-header-text"),u(e,"class","mini-header-content"),u(t,"class","mini-header")},m(c,_){V(c,t,_),i(t,e),i(e,a),i(a,r),i(a,s)},p:He,d(c){c&&o(t)}}}function Pa(l){let t;return{c(){t=y("LSOA.")},l(e){t=k(e,"LSOA.")},m(e,a){V(e,t,a)},d(e){e&&o(t)}}}function Oa(l){let t;return{c(){t=y("LAD.")},l(e){t=k(e,"LAD.")},m(e,a){V(e,t,a)},d(e){e&&o(t)}}}function Ba(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(e,a){V(e,t,a),l[40](t)},p:He,d(e){e&&o(t),l[40](null)}}}function Ra(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(e,a){V(e,t,a),l[39](t)},p:He,d(e){e&&o(t),l[39](null)}}}function Vl(l){let t,e,a=l[16].legend(l[25]).outerHTML+"";return{c(){t=f("div"),e=new Ul(!1),this.h()},l(r){t=d(r,"DIV",{id:!0});var s=m(t);e=Wl(s,!1),s.forEach(o),this.h()},h(){e.a=null,u(t,"id","legend")},m(r,s){V(r,t,s),e.m(a,t)},p(r,s){s[0]&65536&&a!==(a=r[16].legend(r[25]).outerHTML+"")&&e.p(a)},d(r){r&&o(t)}}}function Il(l){let t,e,a,r,s=l[68].def+"",c,_,h,v,A,E,b,w="here",P,C,R=l[68].id.toLowerCase()+"",F,N,g;return{c(){t=f("div"),e=f("div"),a=f("div"),r=D(),c=y(s),_=D(),h=f("br"),v=D(),A=f("div"),E=y("Click "),b=f("a"),b.textContent=w,P=y(` for the \r
                                `),C=f("span"),F=y(R),N=D(),g=y("report page."),this.h()},l(I){t=d(I,"DIV",{class:!0});var H=m(t);e=d(H,"DIV",{class:!0});var B=m(e);a=d(B,"DIV",{style:!0}),m(a).forEach(o),r=L(B),c=k(B,s),_=L(B),h=d(B,"BR",{}),v=L(B),A=d(B,"DIV",{class:!0});var q=m(A);E=k(q,"Click "),b=d(q,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0,"data-svelte-h":!0}),te(b)!=="svelte-gjrxnt"&&(b.textContent=w),P=k(q,` for the \r
                                `),C=d(q,"SPAN",{style:!0});var U=m(C);F=k(U,R),N=L(U),U.forEach(o),g=k(q,"report page."),q.forEach(o),B.forEach(o),H.forEach(o),this.h()},h(){be(a,"height","0.8em"),u(b,"class","link"),u(b,"href",la+"/cobenefit?cobenefit="+l[68].id),u(b,"target","_blank"),u(b,"rel","noopener noreferrer"),be(b,"color",ht(l[68].id)),be(C,"color",ht(l[68].id)),u(A,"class","link-box svelte-10c07ly"),u(e,"class","legend-description svelte-10c07ly"),u(t,"class","legend-description-box svelte-10c07ly")},m(I,H){V(I,t,H),i(t,e),i(e,a),i(e,r),i(e,c),i(e,_),i(e,h),i(e,v),i(e,A),i(A,E),i(A,b),i(A,P),i(A,C),i(C,F),i(C,N),i(A,g)},d(I){I&&o(t)}}}function Tl(l){let t,e,a,r,s,c=l[68].label+"",_,h,v,A,E=l[19].has(l[68].id)?"▲":"▼",b,w,P=l[19].has(l[68].id),C,R,F;function N(){return l[42](l[68])}let g=P&&Il(l);return{c(){t=f("div"),e=f("div"),a=f("span"),r=D(),s=f("span"),_=y(c),v=D(),A=f("span"),b=y(E),w=D(),g&&g.c(),C=D(),this.h()},l(I){t=d(I,"DIV",{class:!0});var H=m(t);e=d(H,"DIV",{class:!0,style:!0});var B=m(e);a=d(B,"SPAN",{class:!0,style:!0}),m(a).forEach(o),r=L(B),s=d(B,"SPAN",{class:!0});var q=m(s);_=k(q,c),q.forEach(o),v=L(B),A=d(B,"SPAN",{class:!0});var U=m(A);b=k(U,E),U.forEach(o),B.forEach(o),w=L(H),g&&g.l(H),C=L(H),H.forEach(o),this.h()},h(){u(a,"class","legend-color svelte-10c07ly"),be(a,"background-color",ht(l[68].id)),u(s,"class",h="legend-text "+(l[19].has(l[68].id)?"expanded":"")+" svelte-10c07ly"),u(A,"class","toggle-icon svelte-10c07ly"),u(e,"class","legend-header svelte-10c07ly"),be(e,"cursor","pointer"),u(t,"class","legend-item svelte-10c07ly")},m(I,H){V(I,t,H),i(t,e),i(e,a),i(e,r),i(e,s),i(s,_),i(e,v),i(e,A),i(A,b),i(t,w),g&&g.m(t,null),i(t,C),R||(F=Cl(e,"click",N),R=!0)},p(I,H){l=I,H[0]&524288&&h!==(h="legend-text "+(l[19].has(l[68].id)?"expanded":"")+" svelte-10c07ly")&&u(s,"class",h),H[0]&524288&&E!==(E=l[19].has(l[68].id)?"▲":"▼")&&Ae(b,E),H[0]&524288&&(P=l[19].has(l[68].id)),P?g||(g=Il(l),g.c(),g.m(t,C)):g&&(g.d(1),g=null)},d(I){I&&o(t),g&&g.d(),R=!1,F()}}}function xa(l){let t,e=`<img class="sm-icon svelte-10c07ly" src="${Mt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each area.</span>`;return{c(){t=f("div"),t.innerHTML=e,this.h()},l(a){t=d(a,"DIV",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-1lqh0bd"&&(t.innerHTML=e),this.h()},h(){u(t,"class","tooltip-wrapper")},m(a,r){V(a,t,r)},d(a){a&&o(t)}}}function Ua(l){let t,e=`<img class="sm-icon svelte-10c07ly" src="${Mt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each area.</span>`,a,r,s=`<img class="sm-icon svelte-10c07ly" src="${wa}" alt="icon"/> <span class="tooltip-text-neg svelte-10c07ly">This chart includes negative values.</span>`;return{c(){t=f("div"),t.innerHTML=e,a=D(),r=f("div"),r.innerHTML=s,this.h()},l(c){t=d(c,"DIV",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-1tqucbd"&&(t.innerHTML=e),a=L(c),r=d(c,"DIV",{class:!0,"data-svelte-h":!0}),te(r)!=="svelte-10ijo5a"&&(r.innerHTML=s),this.h()},h(){u(t,"class","tooltip-wrapper"),u(r,"class","tooltip-wrapper")},m(c,_){V(c,t,_),V(c,a,_),V(c,r,_)},d(c){c&&(o(t),o(a),o(r))}}}function Wa(l){let t,e=l[68];const a=()=>l[44](t,e),r=()=>l[44](null,e);return{c(){t=f("div"),this.h()},l(s){t=d(s,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(s,c){V(s,t,c),a()},p(s,c){l=s,e!==l[68]&&(r(),e=l[68],a())},d(s){s&&o(t),r()}}}function Ga(l){let t,e=l[68];const a=()=>l[43](t,e),r=()=>l[43](null,e);return{c(){t=f("div"),this.h()},l(s){t=d(s,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(s,c){V(s,t,c),a()},p(s,c){l=s,e!==l[68]&&(r(),e=l[68],a())},d(s){s&&o(t),r()}}}function Ml(l){let t,e,a,r,s,c,_=l[68].label+"",h,v,A,E;function b(N,g){return N[68].id=="Hassle costs"||N[68].id=="Road repairs"||N[68].id=="Road safety"||N[68].id=="Congestion"||N[68].id=="Excess heat"?Ua:xa}let P=b(l)(l);function C(N,g){return Fe.includes(N[20])?Ga:Wa}let F=C(l)(l);return{c(){t=f("div"),e=f("div"),a=f("img"),s=D(),c=f("h3"),h=y(_),v=D(),P.c(),A=D(),F.c(),E=D(),this.h()},l(N){t=d(N,"DIV",{class:!0});var g=m(t);e=d(g,"DIV",{class:!0});var I=m(e);a=d(I,"IMG",{class:!0,src:!0,alt:!0}),s=L(I),c=d(I,"H3",{class:!0});var H=m(c);h=k(H,_),H.forEach(o),v=L(I),P.l(I),I.forEach(o),A=L(g),F.l(g),E=L(g),g.forEach(o),this.h()},h(){u(a,"class","sm-cb-icon svelte-10c07ly"),Gl(a.src,r=ua(l[68].id))||u(a,"src",r),u(a,"alt",l[68].label+" icon"),u(c,"class","chart-component-title"),u(e,"class","component-chart-title-container svelte-10c07ly"),u(t,"class","plot-container svelte-10c07ly")},m(N,g){V(N,t,g),i(t,e),i(e,a),i(e,s),i(e,c),i(c,h),i(e,v),P.m(e,null),i(t,A),F.m(t,null),i(t,E)},p(N,g){F.p(N,g)},d(N){N&&o(t),P.d(),F.d()}}}function za(l){let t,e,a,r,s,c,_,h="Socio-Economic Factor Report",v,A,E,b,w,P,C,R,F,N,g,I,H,B,q,U,Ne,Z,ie=l[3]?"Switch to LAD level data":"Switch to LSOA level data",de,we,x,X,ne,he,pt='<p class="section-subtitle svelte-10c07ly">Overview</p>',je,W,Y,le,Pe,Oe,qe,$,Ye,re,oe,vt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Mt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each area.</span></div>`,Ke,Je,G,pe,Xe,Qe,Ze,ve,_t="Scroll for zooming in and out.",$e,_e,mt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Mt}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each area.</span></div>`,et,Be,me,n,T,O,tt='<p class="section-subtitle svelte-10c07ly">By Co-benefits</p>',gt,ce,Q,ye,Ct,Zt=l[21].toLowerCase()+"",Ft,Ht,Nt,Ve,$t="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",Pt,Ot,Bt,ee,Re,el="Co-benefits:",Rt,xt,lt,Ut,Wt,ke,tl='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',Gt,Ie,Ee,bt,Te,at,zt,ll;t=new ql({});function Fl(p,M){return Fe.includes(p[20])?Ia:Va}let st=Fl(l)(l);function Hl(p,M){return Fe.includes(p[20])?Ma:Ta}let it=Hl(l)(l);function Nl(p,M){return Fe.includes(p[20])?Fa:Ca}let rt=Nl(l)(l);function Pl(p,M){return Fe.includes(p[20])?Na:Ha}let nt=Pl(l)(l),K=l[18]&&wl(l);function al(p,M){return p[4]==p[2]?Oa:Pa}let yt=al(l),ge=yt(l);function Ol(p,M){return Fe.includes(p[20])?Ra:Ba}let ot=Ol(l)(l),J=l[16]&&Vl(l),xe=Vt(It),z=[];for(let p=0;p<xe.length;p+=1)z[p]=Tl(Sl(l,xe,p));let Ue=Vt(It),j=[];for(let p=0;p<Ue.length;p+=1)j[p]=Ml(Al(l,Ue,p));return Te=new ba({}),{c(){vl(t.$$.fragment),e=D(),a=f("div"),r=f("div"),s=f("div"),c=f("div"),_=f("p"),_.textContent=h,v=D(),A=f("div"),E=f("h1"),b=y(l[23]),w=D(),P=f("p"),C=y(l[22]),R=D(),F=f("div"),st.c(),N=D(),g=f("div"),I=f("p"),it.c(),H=D(),B=f("p"),rt.c(),q=D(),U=f("p"),nt.c(),Ne=D(),Z=f("button"),de=y(ie),we=D(),K&&K.c(),x=D(),X=f("div"),ne=f("div"),he=f("div"),he.innerHTML=pt,je=D(),W=f("div"),Y=f("div"),le=f("h3"),Pe=y(l[21]),Oe=y(" against per capita co-benefit values (£, thousand)"),qe=D(),$=f("p"),Ye=y(`Each point in the chart below represents a UK \r
                        `),ge.c(),re=D(),oe=f("div"),oe.innerHTML=vt,Ke=D(),ot.c(),Je=D(),G=f("div"),pe=f("h3"),Xe=y(l[21]),Qe=y(" at LSOA level"),Ze=D(),ve=f("p"),ve.textContent=_t,$e=D(),_e=f("div"),_e.innerHTML=mt,et=D(),J&&J.c(),Be=D(),me=f("div"),n=D(),T=f("div"),O=f("div"),O.innerHTML=tt,gt=D(),ce=f("div"),Q=f("div"),ye=f("h3"),Ct=y(`Plotting \r
                    \r
                    `),Ft=y(Zt),Ht=y(`\r
                \r
                against the gain/loss (£, thousand) per capita for each co-benefit`),Nt=D(),Ve=f("p"),Ve.textContent=$t,Pt=D(),Ot=f("br"),Bt=D(),ee=f("div"),Re=f("strong"),Re.textContent=el,Rt=f("br"),xt=y(`Expand for detailed explanation\r
                    `),lt=f("div"),Ut=D();for(let p=0;p<z.length;p+=1)z[p].c();Wt=D(),ke=f("div"),ke.innerHTML=tl,Gt=D(),Ie=f("div"),Ee=f("div");for(let p=0;p<j.length;p+=1)j[p].c();bt=D(),vl(Te.$$.fragment),this.h()},l(p){_l(t.$$.fragment,p),e=L(p),a=d(p,"DIV",{class:!0});var M=m(a);r=d(M,"DIV",{class:!0});var S=m(r);s=d(S,"DIV",{class:!0});var ae=m(s);c=d(ae,"DIV",{class:!0});var kt=m(c);_=d(kt,"P",{class:!0,"data-svelte-h":!0}),te(_)!=="svelte-16ymxs7"&&(_.textContent=h),v=L(kt),A=d(kt,"DIV",{class:!0});var Et=m(A);E=d(Et,"H1",{class:!0});var sl=m(E);b=k(sl,l[23]),sl.forEach(o),w=L(Et),P=d(Et,"P",{class:!0});var il=m(P);C=k(il,l[22]),il.forEach(o),Et.forEach(o),kt.forEach(o),R=L(ae),F=d(ae,"DIV",{class:!0});var rl=m(F);st.l(rl),rl.forEach(o),N=L(ae),g=d(ae,"DIV",{class:!0});var We=m(g);I=d(We,"P",{class:!0});var nl=m(I);it.l(nl),nl.forEach(o),H=L(We),B=d(We,"P",{class:!0});var ol=m(B);rt.l(ol),ol.forEach(o),q=L(We),U=d(We,"P",{class:!0});var cl=m(U);nt.l(cl),cl.forEach(o),We.forEach(o),ae.forEach(o),S.forEach(o),Ne=L(M),Z=d(M,"BUTTON",{});var ul=m(Z);de=k(ul,ie),ul.forEach(o),we=L(M),K&&K.l(M),x=L(M),X=d(M,"DIV",{class:!0});var fl=m(X);ne=d(fl,"DIV",{id:!0});var Dt=m(ne);he=d(Dt,"DIV",{class:!0,"data-svelte-h":!0}),te(he)!=="svelte-ll1i43"&&(he.innerHTML=pt),je=L(Dt),W=d(Dt,"DIV",{id:!0,class:!0});var Lt=m(W);Y=d(Lt,"DIV",{class:!0});var De=m(Y);le=d(De,"H3",{class:!0});var jt=m(le);Pe=k(jt,l[21]),Oe=k(jt," against per capita co-benefit values (£, thousand)"),jt.forEach(o),qe=L(De),$=d(De,"P",{class:!0});var qt=m($);Ye=k(qt,`Each point in the chart below represents a UK \r
                        `),ge.l(qt),qt.forEach(o),re=L(De),oe=d(De,"DIV",{class:!0,"data-svelte-h":!0}),te(oe)!=="svelte-tg5ofw"&&(oe.innerHTML=vt),Ke=L(De),ot.l(De),De.forEach(o),Je=L(Lt),G=d(Lt,"DIV",{class:!0});var ue=m(G);pe=d(ue,"H3",{class:!0});var Yt=m(pe);Xe=k(Yt,l[21]),Qe=k(Yt," at LSOA level"),Yt.forEach(o),Ze=L(ue),ve=d(ue,"P",{class:!0,"data-svelte-h":!0}),te(ve)!=="svelte-1ask2se"&&(ve.textContent=_t),$e=L(ue),_e=d(ue,"DIV",{class:!0,"data-svelte-h":!0}),te(_e)!=="svelte-7b2hds"&&(_e.innerHTML=mt),et=L(ue),J&&J.l(ue),Be=L(ue),me=d(ue,"DIV",{id:!0,class:!0}),m(me).forEach(o),ue.forEach(o),Lt.forEach(o),Dt.forEach(o),fl.forEach(o),n=L(M),T=d(M,"DIV",{id:!0});var At=m(T);O=d(At,"DIV",{class:!0,"data-svelte-h":!0}),te(O)!=="svelte-1av3fse"&&(O.innerHTML=tt),gt=L(At),ce=d(At,"DIV",{id:!0,class:!0,style:!0});var St=m(ce);Q=d(St,"DIV",{id:!0,class:!0});var fe=m(Q);ye=d(fe,"H3",{class:!0});var wt=m(ye);Ct=k(wt,`Plotting \r
                    \r
                    `),Ft=k(wt,Zt),Ht=k(wt,`\r
                \r
                against the gain/loss (£, thousand) per capita for each co-benefit`),wt.forEach(o),Nt=L(fe),Ve=d(fe,"P",{class:!0,"data-svelte-h":!0}),te(Ve)!=="svelte-1h97e3k"&&(Ve.textContent=$t),Pt=L(fe),Ot=d(fe,"BR",{}),Bt=L(fe),ee=d(fe,"DIV",{id:!0,class:!0});var Me=m(ee);Re=d(Me,"STRONG",{"data-svelte-h":!0}),te(Re)!=="svelte-1qu96kx"&&(Re.textContent=el),Rt=d(Me,"BR",{}),xt=k(Me,`Expand for detailed explanation\r
                    `),lt=d(Me,"DIV",{style:!0}),m(lt).forEach(o),Ut=L(Me);for(let Ce=0;Ce<z.length;Ce+=1)z[Ce].l(Me);Me.forEach(o),Wt=L(fe),ke=d(fe,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),te(ke)!=="svelte-11g4vkg"&&(ke.innerHTML=tl),fe.forEach(o),Gt=L(St),Ie=d(St,"DIV",{id:!0,class:!0});var dl=m(Ie);Ee=d(dl,"DIV",{id:!0,class:!0});var hl=m(Ee);for(let Ce=0;Ce<j.length;Ce+=1)j[Ce].l(hl);hl.forEach(o),dl.forEach(o),St.forEach(o),At.forEach(o),M.forEach(o),bt=L(p),_l(Te.$$.fragment,p),this.h()},h(){u(_,"class","page-subtitle svelte-10c07ly"),u(E,"class","page-title svelte-10c07ly"),u(P,"class","definition"),u(A,"class","title-container"),u(c,"class","header-text svelte-10c07ly"),u(F,"class","header-vis svelte-10c07ly"),u(I,"class","definition-stat svelte-10c07ly"),u(B,"class","definition-stat svelte-10c07ly"),u(U,"class","definition-stat svelte-10c07ly"),u(g,"class","header-stats svelte-10c07ly"),u(s,"class","header-content svelte-10c07ly"),u(r,"class","section header svelte-10c07ly"),u(he,"class","section-header"),u(le,"class","component-title"),u($,"class","description"),u(oe,"class","aggregation-icon-container2 svelte-10c07ly"),u(Y,"class","component column"),u(pe,"class","component-title"),u(ve,"class","description"),u(_e,"class","aggregation-icon-container2 svelte-10c07ly"),u(me,"id","map"),u(me,"class","svelte-10c07ly"),u(G,"class","component column"),u(W,"id","vis-block"),u(W,"class","svelte-10c07ly"),u(ne,"id","overview"),u(X,"class","section"),u(O,"class","section-header"),u(ye,"class","component-title"),u(Ve,"class","explanation"),be(lt,"height","0.8em"),u(ee,"id","main-legend"),u(ee,"class","legend-box svelte-10c07ly"),u(ke,"id","se-disclaimer"),u(ke,"class","disclaimer-box svelte-10c07ly"),u(Q,"id","se-title"),u(Q,"class","svelte-10c07ly"),u(Ee,"id","multiple-plots"),u(Ee,"class","svelte-10c07ly"),u(Ie,"id","multiple-comp"),u(Ie,"class","svelte-10c07ly"),u(ce,"id","se-block"),u(ce,"class","component svelte-10c07ly"),be(ce,"margin-left","1rem"),u(T,"id","compare"),u(a,"class","page-container")},m(p,M){ml(t,p,M),V(p,e,M),V(p,a,M),i(a,r),i(r,s),i(s,c),i(c,_),i(c,v),i(c,A),i(A,E),i(E,b),i(A,w),i(A,P),i(P,C),i(s,R),i(s,F),st.m(F,null),i(s,N),i(s,g),i(g,I),it.m(I,null),i(g,H),i(g,B),rt.m(B,null),i(g,q),i(g,U),nt.m(U,null),i(a,Ne),i(a,Z),i(Z,de),i(a,we),K&&K.m(a,null),i(a,x),i(a,X),i(X,ne),i(ne,he),i(ne,je),i(ne,W),i(W,Y),i(Y,le),i(le,Pe),i(le,Oe),i(Y,qe),i(Y,$),i($,Ye),ge.m($,null),i(Y,re),i(Y,oe),i(Y,Ke),ot.m(Y,null),i(W,Je),i(W,G),i(G,pe),i(pe,Xe),i(pe,Qe),i(G,Ze),i(G,ve),i(G,$e),i(G,_e),i(G,et),J&&J.m(G,null),i(G,Be),i(G,me),l[41](me),i(a,n),i(a,T),i(T,O),i(T,gt),i(T,ce),i(ce,Q),i(Q,ye),i(ye,Ct),i(ye,Ft),i(ye,Ht),i(Q,Nt),i(Q,Ve),i(Q,Pt),i(Q,Ot),i(Q,Bt),i(Q,ee),i(ee,Re),i(ee,Rt),i(ee,xt),i(ee,lt),i(ee,Ut);for(let S=0;S<z.length;S+=1)z[S]&&z[S].m(ee,null);i(Q,Wt),i(Q,ke),i(ce,Gt),i(ce,Ie),i(Ie,Ee);for(let S=0;S<j.length;S+=1)j[S]&&j[S].m(Ee,null);l[45](a),V(p,bt,M),ml(Te,p,M),at=!0,zt||(ll=Cl(Z,"click",l[27]),zt=!0)},p(p,M){if(st.p(p,M),it.p(p,M),rt.p(p,M),nt.p(p,M),(!at||M[0]&8)&&ie!==(ie=p[3]?"Switch to LAD level data":"Switch to LSOA level data")&&Ae(de,ie),p[18]?K?K.p(p,M):(K=wl(p),K.c(),K.m(a,x)):K&&(K.d(1),K=null),yt!==(yt=al(p))&&(ge.d(1),ge=yt(p),ge&&(ge.c(),ge.m($,null))),ot.p(p,M),p[16]?J?J.p(p,M):(J=Vl(p),J.c(),J.m(G,Be)):J&&(J.d(1),J=null),M[0]&67633152){xe=Vt(It);let S;for(S=0;S<xe.length;S+=1){const ae=Sl(p,xe,S);z[S]?z[S].p(ae,M):(z[S]=Tl(ae),z[S].c(),z[S].m(ee,null))}for(;S<z.length;S+=1)z[S].d(1);z.length=xe.length}if(M[0]&1048579){Ue=Vt(It);let S;for(S=0;S<Ue.length;S+=1){const ae=Al(p,Ue,S);j[S]?j[S].p(ae,M):(j[S]=Ml(ae),j[S].c(),j[S].m(Ee,null))}for(;S<j.length;S+=1)j[S].d(1);j.length=Ue.length}},i(p){at||(gl(t.$$.fragment,p),gl(Te.$$.fragment,p),at=!0)},o(p){bl(t.$$.fragment,p),bl(Te.$$.fragment,p),at=!1},d(p){p&&(o(e),o(a),o(bt)),yl(t,p),st.d(),it.d(),rt.d(),nt.d(),K&&K.d(),ge.d(),ot.d(),J&&J.d(),l[41](null),pl(z,p),pl(j,p),l[45](null),yl(Te,p),zt=!1,ll()}}}let se=400;function Se(l,t){return t==="£"?`${t}${l}`:`${l} ${t}`}function ja(l,t,e){let a,r,s,c,_,h,v,A={},E={},b,w,P,C,R=!1,F,N=!1,g,I,H,B,q,U,Ne,Z,ie,de,{data:we}=t;const x=we.SEF,X=sa.find(n=>n.id===x)?.id??x,ne=ia.find(n=>n.id===x)?.label??x,he=ra.find(n=>n.id===x)?.def??x,pt=na.find(n=>n.id===x)?.description??x,je=oa.find(n=>n.id===x)?.short_units??x,W=ca.find(n=>n.id===x)?.units??x;let Y,le,Pe=!1,Oe="";const qe=["overview","compare"];function $(){const n=window.scrollY;e(18,Pe=n>250);for(const T of qe){const O=document.getElementById(T);if(!O)continue;const tt=O.getBoundingClientRect();if(tt.top<=150&&tt.bottom>=150){Oe!==T&&Jt.capture("section entered (sef)",{section_name:T}),Oe=T;break}}}Rl(()=>(fa(s),window.addEventListener("scroll",$),$(),()=>window.removeEventListener("scroll",$))),xl(()=>{window.removeEventListener("scroll",$)});async function Ye(){e(29,b=await dt(pa(x))),console.log("totals",b),e(2,C=await dt(va(x))),console.log("LAD data 1 ",C),e(30,w=await dt(_a(x))),console.log("by cobens",w),e(31,F=await dt(ma(x))),console.log("LADsef",F),P=await dt(ga()),console.log("per_capita_data",P),Xt.forEach(n=>{e(30,w[n]=+w[n],w)}),e(32,N=!0),da(s)}Ye().then(()=>{e(16,Y=new aa(b,"LSOA",le,"val",!1,"Lookup_Value",!1)),Y.initMap()});let re=new Set;function oe(n){re.has(n)?re.delete(n):re.add(n),e(19,re=new Set(re))}function vt(){e(3,R=!R)}function Ke(){const n=El(b,T=>T.val)??0;$l(Sa().thresholds(20).value(T=>T.val)(b),T=>T.length),e(6,c.innerHTML="",c),c?.append(Ge({height:se/1.9,width:se*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${W}`},y:{label:a===C?"No. of LADs":"No. of LSOAs",labelArrow:!1,domain:a===C?[0,100]:[0,1e4]},style:{fontSize:"16px"},marks:[ea(a,Ea({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),ze([n],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:n,label:"Average"}},tip:{format:{average:T=>`${T.toFixed(2)}`,x:!1}}}),ct({label:`${W}`,labelArrow:!1,labelAnchor:"center"})]}))}function Je(){const n=Ll[X],T=n?Object.keys(n).map(Number):a.filter(O=>O.SEFMAME==X).map(O=>O.SE);e(8,h.innerHTML="",h),h?.append(Ge({height:se/1.9,width:se*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:X==="Typology"?80:50,x:{domain:T,label:ha(X),tickFormat:O=>n?.[O]??O,tickRotate:X==="Typology"?-10:0,padding:.5},style:{fontSize:"16px"},marks:[ut([0],{stroke:"#333",strokeWidth:.75}),ze([0],{stroke:"#333",strokeWidth:.75}),Da(a,Dl({y:"count"},{x:"val",fill:"black",opacity:.5,tooltip:!0,title:O=>`Count: ${O.count}`})),ta(a,Dl({y:"count",text:"count"},{x:"val",text:O=>O.count,dy:-15,fill:"#333",fontWeight:500})),ft({label:a===C?"No. of LADs":"No. of LSOAs",labelArrow:!1})]}))}function G(){e(7,_.innerHTML="",_),_?.append(Ge({height:se*1.5,width:se*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[ut([0],{stroke:"#333",strokeWidth:.75}),ze([0],{stroke:"#333",strokeWidth:.75}),Tt(a,{x:"val",y:n=>n.total_per_capita*1e3,fill:n=>n.total_per_capita<0?"#BD210E":"#242424",r:a===C?4:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${W}`},value:{value:n=>n.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),ft({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),ct({label:`${W}`,labelArrow:!1,labelAnchor:"center"})]}))}function pe(){e(9,v.innerHTML="",v),v?.append(Ge({height:se*1.5,width:se*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[ut([0],{stroke:"#333",strokeWidth:1.25}),ze([0],{stroke:"#333",strokeWidth:.75}),Tt(a,{x:r===F?n=>n.val+(Math.random()-.5)*.05:n=>n.val+(Math.random()-.5)*.1,y:n=>n.total_per_capita*1e3,fill:n=>n.total_per_capita<0?"#BD210E":"#242424",r:a===C?4:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${W}`},value:{value:n=>n.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),ft({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),ct({label:`${W}`,labelArrow:!1,labelAnchor:"center"})]}))}function Xe(){Xt.forEach(n=>{let T;T=Ge({height:se,width:se,marginLeft:n==="Excess heat"?80:60,marginTop:40,marginRight:10,marginBottom:50,x:{label:null},y:{label:null},style:{fontSize:"14px"},marks:[ut([0],{stroke:"#333",strokeWidth:1.25}),ze([0],{stroke:"#333",strokeWidth:.75}),Tt(r.filter(O=>O.co_benefit_type==n),{x:"val",y:"total",fill:ht(n),fillOpacity:.5,r:r===F?3.5:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),ft({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"top"}),ct({label:`${W}`,labelArrow:!1,labelAnchor:"center"})]}),A[n]?.append(T)})}function Qe(){Xt.forEach(n=>{let T;T=Ge({height:se,width:se,marginLeft:60,marginTop:40,marginRight:10,marginBottom:50,x:{label:null},y:{label:null},style:{fontSize:"14px"},marks:[ut([0],{stroke:"#333",strokeWidth:1.25}),ze([0],{stroke:"#333",strokeWidth:.75}),Tt(r.filter(O=>O.co_benefit_type==n),{x:r===F?O=>O.val+(Math.random()-.5)*.1:O=>O.val+(Math.random()-.5)*.2,y:"total",fill:ht(n),fillOpacity:.5,r:r===F?3.5:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),ft({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"top"}),ct({label:`${W}`,labelArrow:!1,labelAnchor:"center"})]}),E[n]?.append(T)})}function Ze(n){Le[n?"unshift":"push"](()=>{h=n,e(8,h)})}function ve(n){Le[n?"unshift":"push"](()=>{c=n,e(6,c)})}function _t(n){Le[n?"unshift":"push"](()=>{v=n,e(9,v)})}function $e(n){Le[n?"unshift":"push"](()=>{_=n,e(7,_)})}function _e(n){Le[n?"unshift":"push"](()=>{le=n,e(17,le)})}const mt=n=>{const T=re.has(n.id);oe(n.id),T?Jt.capture("cobenefit closed",{cobenefit:n.label}):Jt.capture("cobenefit opened",{cobenefit:n.label})};function et(n,T){Le[n?"unshift":"push"](()=>{E[T.id]=n,e(1,E)})}function Be(n,T){Le[n?"unshift":"push"](()=>{A[T.id]=n,e(0,A)})}function me(n){Le[n?"unshift":"push"](()=>{s=n,e(5,s)})}return l.$$set=n=>{"data"in n&&e(28,we=n.data)},l.$$.update=()=>{l.$$.dirty[0]&536870924&&e(4,a=R?b:C),l.$$.dirty[0]&1073741832|l.$$.dirty[1]&1&&(r=R?w:F),l.$$.dirty[0]&16&&e(10,g=a?(El(a,n=>n.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&16&&e(35,ie=a?Xl(a,n=>n.val):null),l.$$.dirty[1]&48&&e(11,I=ie!=null&&de?de[ie]??ie:"N/A"),l.$$.dirty[0]&16&&e(33,U=a?Ql(a,n=>n.val):-1),l.$$.dirty[0]&16|l.$$.dirty[1]&4&&e(14,q=U!==-1&&a?a[U].Lookup_Value?.trim():"N/A"),l.$$.dirty[0]&16|l.$$.dirty[1]&4&&e(12,H=U!==-1&&a?(a[U].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&16&&e(34,Z=a?Zl(a,n=>n.val):-1),l.$$.dirty[0]&16|l.$$.dirty[1]&8&&e(15,Ne=Z!==-1&&a?a[Z].Lookup_Value:"N/A"),l.$$.dirty[0]&16|l.$$.dirty[1]&8&&e(13,B=Z!==-1&&a?(a[Z].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&19|l.$$.dirty[1]&2&&(Object.values(A).forEach(n=>{n.firstChild?.remove()}),Object.values(E).forEach(n=>{n.firstChild?.remove()}),N&&a&&(Fe.includes(X)?(Je(),Qe(),pe()):(G(),Xe(),Ke())))},e(36,de=Ll[X]),[A,E,C,R,a,s,c,_,h,v,g,I,H,B,q,Ne,Y,le,Pe,re,X,ne,he,pt,je,W,oe,vt,we,b,w,F,N,U,Z,ie,de,Ze,ve,_t,$e,_e,mt,et,Be,me]}class hs extends zl{constructor(t){super(),jl(this,t,ja,za,Bl,{data:28},null,[-1,-1,-1])}}export{hs as component};
