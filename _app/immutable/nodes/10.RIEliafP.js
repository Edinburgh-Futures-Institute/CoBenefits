import{s as Le,f as Me,o as Be,e as bt}from"../chunks/lM1_q0kn.js";import{S as Ve,i as Pe,d,m as ke,r as Fe,k as Ne,l as Oe,u as l,n as we,a as At,b as t,o as He,g as y,c as r,e as u,p as rt,f as T,q as qe,j as C,h as i,t as I,s as ze,v as Re}from"../chunks/DTv_bg8f.js";import{N as Ye,e as he}from"../chunks/Cu8BW6Yp.js";import"../chunks/DRyxMU8n.js";import{w as je,x as Ee,y as We,u as Ge,i as Xe,z as Ke,A as Ue,B as ye,C as Ze,t as St,D as pe,E as ve}from"../chunks/B2I3FSX7.js";import{M as xe}from"../chunks/BTD-SRCu.js";import{S as Tt,d as R,c as Je,T as Qe,e as $e,M as me}from"../chunks/B75u2SNK.js";import{g as Jt,h as tl,i as el,j as ll}from"../chunks/Dlvw5TNA.js";import{d as Ce,m as al,t as sl}from"../chunks/DJUkKEvy.js";import{a as De}from"../chunks/BTXI4x7B.js";import{a as nl,b as rl}from"../chunks/CojESsDr.js";function il(e,{y:a=Xe,x:s=null,r:c,fill:v="#ccc",fillOpacity:_,stroke:p="currentColor",strokeOpacity:h,strokeWidth:g=2,sort:V,...b}={}){const o=s!=null?Ee:We;return je(Ge(e,o({y1:Se,y2:Ae},{x:s,y:a,stroke:p,strokeOpacity:h,...b})),De(e,o({y1:"p25",y2:"p75"},{x:s,y:a,fill:v,fillOpacity:_,...b})),sl(e,o({y:"p50"},{x:s,y:a,stroke:p,strokeOpacity:h,strokeWidth:g,sort:V,...b})),Ce(e,al({y:ol},{x:s,y:a,z:s,r:c,stroke:p,strokeOpacity:h,...b})))}function ol(e){const a=Se(e),s=Ae(e);return e.map(c=>c<a||c>s?c:NaN)}function Se(e){const a=Te(e)*2.5-Ie(e)*1.5;return Ke(e,s=>s>=a?s:NaN)}function Ae(e){const a=Ie(e)*2.5-Te(e)*1.5;return Ue(e,s=>s<=a?s:NaN)}function Te(e){return ye(e,.25)}function Ie(e){return ye(e,.75)}function _e(e,a,s){const c=e.slice();return c[28]=a[s],c[29]=a,c[30]=s,c}function ge(e){let a,s,c=e[4].toLocaleString()+"",v,_;return{c(){a=i("p"),s=I("Total Cost Benefit: £"),v=I(c),_=I(" million"),this.h()},l(p){a=r(p,"P",{class:!0});var h=u(a);s=T(h,"Total Cost Benefit: £"),v=T(h,c),_=T(h," million"),h.forEach(d),this.h()},h(){l(a,"class","total-value svelte-vh70br")},m(p,h){At(p,a,h),t(a,s),t(a,v),t(a,_)},p(p,h){h&16&&c!==(c=p[4].toLocaleString()+"")&&ze(v,c)},d(p){p&&d(a)}}}function be(e){let a,s,c=e[28].replaceAll("_"," ")+"",v,_,p,h=e[28],g;const V=()=>e[16](p,h),b=()=>e[16](null,h);return{c(){a=i("div"),s=i("h3"),v=I(c),_=C(),p=i("div"),g=C(),this.h()},l(o){a=r(o,"DIV",{class:!0});var L=u(a);s=r(L,"H3",{class:!0,style:!0});var k=u(s);v=T(k,c),k.forEach(d),_=y(L),p=r(L,"DIV",{class:!0}),u(p).forEach(d),g=y(L),L.forEach(d),this.h()},h(){l(s,"class","component-title"),Re(s,"text-align","center"),l(p,"class","plot"),l(a,"class","plot-container")},m(o,L){At(o,a,L),t(a,s),t(s,v),t(a,_),t(a,p),V(),t(a,g)},p(o,L){e=o,h!==e[28]&&(b(),h=e[28],V())},d(o){o&&d(a),b()}}}function cl(e){let a,s,c,v,_,p="Co-Benefit Report",h,g,V,b,o,L,k,X,it,F,pt,N,K,H,vt,mt,_t,q,O,D,Y,j,gt,n,B,E,Qt="The total? cost benefit per capita for each 5 year interval.",It,ot,U,$t="",Lt,Z,Mt,Q,Bt,Vt,Pt,$,te="The total cost benefit per capita for each LSOA.",kt,ct,x,ee="",Ft,z,tt,et,Nt,Ot,wt,lt,le="Scroll for zooming in and out.",Ht,W,ae="",qt,w,at,st,zt,Rt,Yt,jt,Wt,J,G;a=new Ye({});let M=e[4]&&ge(e),ft=he(Tt),S=[];for(let f=0;f<ft.length;f+=1)S[f]=be(_e(e,ft,f));return{c(){qe(a.$$.fragment),s=C(),c=i("div"),v=i("div"),_=i("p"),_.textContent=p,h=C(),g=i("div"),V=i("div"),b=i("h1"),o=i("img"),k=C(),X=I(e[7]),it=C(),F=i("div"),M&&M.c(),pt=C(),N=i("p"),K=I("Total cost benefit regarding "),H=i("span"),vt=I(e[7]),mt=I(":"),_t=C(),q=i("div"),O=i("div"),D=i("div"),Y=i("h3"),j=i("span"),gt=I(e[7]),n=I(" Total Cost Benefit Over Time"),B=C(),E=i("p"),E.textContent=Qt,It=C(),ot=i("div"),U=i("div"),U.innerHTML=$t,Lt=C(),Z=i("h3"),Mt=I("Distribution of "),Q=i("span"),Bt=I(e[7]),Vt=I(` Total Cost
                    Benefit by LSOA`),Pt=C(),$=i("p"),$.textContent=te,kt=C(),ct=i("div"),x=i("div"),x.innerHTML=ee,Ft=C(),z=i("div"),tt=i("h3"),et=i("span"),Nt=I(e[7]),Ot=I(" on UK Map"),wt=C(),lt=i("p"),lt.textContent=le,Ht=C(),W=i("div"),W.innerHTML=ae,qt=C(),w=i("div"),at=i("h3"),st=i("span"),zt=I(e[7]),Rt=I(` Cost Benefit by Socio-Economic
                Factors`),Yt=C(),jt=i("br"),Wt=C(),J=i("div");for(let f=0;f<S.length;f+=1)S[f].c();this.h()},l(f){He(a.$$.fragment,f),s=y(f),c=r(f,"DIV",{class:!0});var A=u(c);v=r(A,"DIV",{class:!0});var m=u(v);_=r(m,"P",{class:!0,"data-svelte-h":!0}),rt(_)!=="svelte-1flv0v9"&&(_.textContent=p),h=y(m),g=r(m,"DIV",{class:!0});var nt=u(g);V=r(nt,"DIV",{class:!0});var se=u(V);b=r(se,"H1",{class:!0});var Et=u(b);o=r(Et,"IMG",{src:!0,alt:!0,class:!0}),k=y(Et),X=T(Et,e[7]),Et.forEach(d),se.forEach(d),it=y(nt),F=r(nt,"DIV",{class:!0});var ne=u(F);M&&M.l(ne),ne.forEach(d),nt.forEach(d),pt=y(m),N=r(m,"P",{class:!0});var Gt=u(N);K=T(Gt,"Total cost benefit regarding "),H=r(Gt,"SPAN",{style:!0});var Xt=u(H);vt=T(Xt,e[7]),mt=T(Xt,":"),Xt.forEach(d),Gt.forEach(d),m.forEach(d),_t=y(A),q=r(A,"DIV",{class:!0});var yt=u(q);O=r(yt,"DIV",{id:!0,class:!0});var Ct=u(O);D=r(Ct,"DIV",{class:!0});var P=u(D);Y=r(P,"H3",{class:!0});var Kt=u(Y);j=r(Kt,"SPAN",{style:!0});var re=u(j);gt=T(re,e[7]),re.forEach(d),n=T(Kt," Total Cost Benefit Over Time"),Kt.forEach(d),B=y(P),E=r(P,"P",{class:!0,"data-svelte-h":!0}),rt(E)!=="svelte-p4didb"&&(E.textContent=Qt),It=y(P),ot=r(P,"DIV",{class:!0});var ie=u(ot);U=r(ie,"DIV",{class:!0,"data-svelte-h":!0}),rt(U)!=="svelte-l1ce0t"&&(U.innerHTML=$t),ie.forEach(d),Lt=y(P),Z=r(P,"H3",{class:!0});var Dt=u(Z);Mt=T(Dt,"Distribution of "),Q=r(Dt,"SPAN",{style:!0});var oe=u(Q);Bt=T(oe,e[7]),oe.forEach(d),Vt=T(Dt,` Total Cost
                    Benefit by LSOA`),Dt.forEach(d),Pt=y(P),$=r(P,"P",{class:!0,"data-svelte-h":!0}),rt($)!=="svelte-ae39jc"&&($.textContent=te),kt=y(P),ct=r(P,"DIV",{class:!0});var ce=u(ct);x=r(ce,"DIV",{class:!0,"data-svelte-h":!0}),rt(x)!=="svelte-4vto3d"&&(x.innerHTML=ee),ce.forEach(d),P.forEach(d),Ft=y(Ct),z=r(Ct,"DIV",{class:!0});var dt=u(z);tt=r(dt,"H3",{class:!0});var Ut=u(tt);et=r(Ut,"SPAN",{style:!0});var fe=u(et);Nt=T(fe,e[7]),fe.forEach(d),Ot=T(Ut," on UK Map"),Ut.forEach(d),wt=y(dt),lt=r(dt,"P",{class:!0,"data-svelte-h":!0}),rt(lt)!=="svelte-1ask2se"&&(lt.textContent=le),Ht=y(dt),W=r(dt,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),rt(W)!=="svelte-ipahrb"&&(W.innerHTML=ae),dt.forEach(d),Ct.forEach(d),qt=y(yt),w=r(yt,"DIV",{id:!0,class:!0});var ut=u(w);at=r(ut,"H3",{class:!0});var Zt=u(at);st=r(Zt,"SPAN",{style:!0});var de=u(st);zt=T(de,e[7]),de.forEach(d),Rt=T(Zt,` Cost Benefit by Socio-Economic
                Factors`),Zt.forEach(d),Yt=y(ut),jt=r(ut,"BR",{}),Wt=y(ut),J=r(ut,"DIV",{id:!0,class:!0});var ue=u(J);for(let xt=0;xt<S.length;xt+=1)S[xt].l(ue);ue.forEach(d),ut.forEach(d),yt.forEach(d),A.forEach(d),this.h()},h(){l(_,"class","page-subtitle"),Me(o.src,L=e[8])||l(o,"src",L),l(o,"alt","Icon"),l(o,"class","heading-icon svelte-vh70br"),l(b,"class","page-title"),l(V,"class","title-container svelte-vh70br"),l(F,"class","total-value-container svelte-vh70br"),l(g,"class","header-container svelte-vh70br"),l(H,"style",e[6]),l(N,"class","description"),l(v,"class","section header"),l(j,"style",e[6]),l(Y,"class","component-title"),l(E,"class","description"),l(U,"class","plot"),l(ot,"class","component row"),l(Q,"style",e[6]),l(Z,"class","component-title"),l($,"class","description"),l(x,"class","plot"),l(ct,"class","component row"),l(D,"class","component singlevis"),l(et,"style",e[6]),l(tt,"class","component-title"),l(lt,"class","description"),l(W,"id","map"),l(W,"class","svelte-vh70br"),l(z,"class","component column"),l(O,"id","vis-block"),l(O,"class","svelte-vh70br"),l(st,"style",e[6]),l(at,"class","component-title"),l(J,"id","multiple-plots"),l(J,"class","svelte-vh70br"),l(w,"id","multiple-comp"),l(w,"class","component svelte-vh70br"),l(q,"class","section"),l(c,"class","page-container")},m(f,A){we(a,f,A),At(f,s,A),At(f,c,A),t(c,v),t(v,_),t(v,h),t(v,g),t(g,V),t(V,b),t(b,o),t(b,k),t(b,X),t(g,it),t(g,F),M&&M.m(F,null),t(v,pt),t(v,N),t(N,K),t(N,H),t(H,vt),t(H,mt),t(c,_t),t(c,q),t(q,O),t(O,D),t(D,Y),t(Y,j),t(j,gt),t(Y,n),t(D,B),t(D,E),t(D,It),t(D,ot),t(ot,U),e[13](U),t(D,Lt),t(D,Z),t(Z,Mt),t(Z,Q),t(Q,Bt),t(Z,Vt),t(D,Pt),t(D,$),t(D,kt),t(D,ct),t(ct,x),e[14](x),t(O,Ft),t(O,z),t(z,tt),t(tt,et),t(et,Nt),t(tt,Ot),t(z,wt),t(z,lt),t(z,Ht),t(z,W),e[15](W),t(q,qt),t(q,w),t(w,at),t(at,st),t(st,zt),t(at,Rt),t(w,Yt),t(w,jt),t(w,Wt),t(w,J);for(let m=0;m<S.length;m+=1)S[m]&&S[m].m(J,null);e[17](c),G=!0},p(f,[A]){if(f[4]?M?M.p(f,A):(M=ge(f),M.c(),M.m(F,null)):M&&(M.d(1),M=null),(!G||A&64)&&l(H,"style",f[6]),(!G||A&64)&&l(j,"style",f[6]),(!G||A&64)&&l(Q,"style",f[6]),(!G||A&64)&&l(et,"style",f[6]),(!G||A&64)&&l(st,"style",f[6]),A&2){ft=he(Tt);let m;for(m=0;m<ft.length;m+=1){const nt=_e(f,ft,m);S[m]?S[m].p(nt,A):(S[m]=be(nt),S[m].c(),S[m].m(J,null))}for(;m<S.length;m+=1)S[m].d(1);S.length=ft.length}},i(f){G||(Oe(a.$$.fragment,f),G=!0)},o(f){Ne(a.$$.fragment,f),G=!1},d(f){f&&(d(s),d(c)),ke(a,f),M&&M.d(),e[13](null),e[14](null),e[15](null),Fe(S,f),e[17](null)}}}let ht=400;function fl(e,a,s){let c,v,_,p,h,g={},V="barchart",{data:b}=a;const o=b.coBenefit;let L,k,X,it,F=!1;vt();let pt=Je(o),N,K,H;Be(()=>{N=new xe(k,"LAD",K,"total"),N.initMap();let n=N.legend();H.append(n)});async function vt(){L=await Jt(tl(o)),X=await Jt(el(o)),k=await Jt(ll(o)),console.log(22,k),Tt.forEach(n=>{X[n]=+X[n]}),s(4,it=Math.round(Ze(L,n=>n.total))),s(11,F=!0)}function mt(){p?.append(St({height:ht/1.2,...me,marginLeft:60,marginRight:60,y:{label:"Datazones Frequency"},x:{label:"Cost Per Capita (£)"},style:{fontSize:"18px"},marks:[nl(L,rl({y:"count"},{x:"total",fill:R(o)[0],tip:!0,fillOpacity:.5,stroke:R(o)[0],strokeWidth:3}))]}))}function _t(){let n=L.flatMap(B=>Qe.map(E=>({time:E,value:B[E],total:B.total,scenario:B.scenario})));h?.append(St({height:ht/1.2,...me,style:{fontSize:"18px"},x:{type:"band",tickFormat:B=>B.replace(/^Y/,"").replace("_","-"),label:"Year Intervals"},y:{label:"Cost Benefit £/Capita",grid:!0},marks:[De(n,Ee({y:"sum"},{x:"time",y:"value",fill:R(o)[0],tip:!0,fillOpacity:.8,insetLeft:15,insetRight:15}))]}))}function q(){Tt.forEach(n=>{let B;$e.includes(n)?B=St({style:{fontSize:"16px",textAnchor:"middle",fill:"#333"},height:ht/1.4,width:ht/1.5,marginLeft:60,marginBottom:60,marginRight:10,marginTop:10,x:{grid:!0,label:null,type:"band",tickFormat:E=>Math.floor(E)},color:{legend:!0},marks:[il(X.filter(E=>E.SEFMAME==n),{x:"SE",y:"total",stroke:R(o)[0],fill:R(o)[4],r:1,strokeOpacity:.5,fillOpacity:.3}),pe({anchor:"left",grid:!0,label:"£/capita",labelArrow:"none",labelAnchor:"center"}),ve([0])]}):B=St({style:{fontSize:"16px",textAnchor:"middle",fill:"#333"},height:ht/1.4,width:ht/1.5,marginLeft:60,marginBottom:60,marginRight:10,marginTop:10,x:{grid:!0,label:null},color:{legend:!0},marks:[Ce(k.filter(E=>E.SEFMAME==n),{x:"SE",y:"total",fill:E=>E.LAD.startsWith("S")?R(o)[1]:E.LAD.startsWith("N")?R(o)[2]:E.LAD.startsWith("E")?R(o)[3]:R(o)[4],r:2,fillOpacity:1}),pe({anchor:"left",grid:!0,label:"£/capita",labelArrow:"none",labelAnchor:"center"}),ve([0])]}),g[n]?.append(B)})}function O(n){bt[n?"unshift":"push"](()=>{h=n,s(0,h)})}function D(n){bt[n?"unshift":"push"](()=>{p=n,s(3,p)})}function Y(n){bt[n?"unshift":"push"](()=>{K=n,s(5,K)})}function j(n,B){bt[n?"unshift":"push"](()=>{g[B]=n,s(1,g)})}function gt(n){bt[n?"unshift":"push"](()=>{_=n,s(2,_)})}return e.$$set=n=>{"data"in n&&s(9,b=n.data)},e.$$.update=()=>{e.$$.dirty&3075&&(h?.firstChild?.remove(),Object.values(g).forEach(n=>{n.firstChild?.remove()}),F&&(mt(),_t(),q())),e.$$.dirty&4096&&s(6,v=`color: ${c}; font-weight: bold; font-size: 22px;`)},s(12,c=R(o)[0]),[h,g,_,p,it,K,v,o,pt,b,V,F,c,O,D,Y,j,gt]}class Cl extends Ve{constructor(a){super(),Pe(this,a,fl,cl,Le,{data:9})}}export{Cl as component};
