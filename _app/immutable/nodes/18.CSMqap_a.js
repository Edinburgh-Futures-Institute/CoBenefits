import{s as He,a as A,e as u,g as k,c as f,b as F,p as O,f as g,q as t,D as ue,i as ee,h as a,w as Q,E as we,y as Ge,B as fe,x as Me,t as Ve,d as Pe,n as Re,v as je,r as Ue}from"../chunks/scheduler.Uo5vrMzy.js";import{S as ze,i as Ke,c as ye,b as Le,m as Se,t as Te,a as Ae,d as ke}from"../chunks/index.CfagcI6h.js";import{N as Ye,e as de}from"../chunks/NavigationBar.Bf-rsqDf.js";import{i as Je,o as Ze}from"../chunks/transform.BNP73y-7.js";import"../chunks/index.JoTaYIke.js";import{b as Qe}from"../chunks/paths.DNmbYTBa.js";import{f as be}from"../chunks/module.jBGXnV9S.js";import{M as We}from"../chunks/mapUK.D8Bvkx6U.js";import{g as re,k as qe,l as De,m as Xe,n as $e,o as et}from"../chunks/duckdb.XhwmiYL_.js";import{a as pe,d as Ce,h as xe,b as tt,c as Ee,e as lt,g as Oe}from"../chunks/globals.cqAsX5Dr.js";import{F as at}from"../chunks/Footer.B2c14KTX.js";function Be(i,e,l){const s=i.slice();return s[32]=e[l],s}function Ie(i,e,l){const s=i.slice();return s[29]=e[l],s}function nt(i){let e,l,s="Social Economic Factor",h,b,S=de(Ee),o=[];for(let d=0;d<S.length;d+=1)o[d]=Fe(Be(i,S,d));return{c(){e=u("div"),l=u("h2"),l.textContent=s,h=A(),b=u("div");for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=f(d,"DIV",{class:!0});var c=F(e);l=f(c,"H2",{"data-svelte-h":!0}),O(l)!=="svelte-1ld89ev"&&(l.textContent=s),h=k(c),b=f(c,"DIV",{id:!0,class:!0});var n=F(b);for(let p=0;p<o.length;p+=1)o[p].l(n);n.forEach(g),c.forEach(g),this.h()},h(){t(b,"id","time"),t(b,"class","svelte-1t23qr4"),t(e,"class","tabcontent svelte-1t23qr4")},m(d,c){ee(d,e,c),a(e,l),a(e,h),a(e,b);for(let n=0;n<o.length;n+=1)o[n]&&o[n].m(b,null)},p(d,c){if(c[0]&514){S=de(Ee);let n;for(n=0;n<S.length;n+=1){const p=Be(d,S,n);o[n]?o[n].p(p,c):(o[n]=Fe(p),o[n].c(),o[n].m(b,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=S.length}},d(d){d&&g(e),Me(o,d)}}}function st(i){let e,l,s,h="Co-Benefits",b,S,o,d,c="Time",n,p,x,q,N,C="Total",y,_,T,w,H="2025-2029",te,J,B,W,le="2030-2034",V,P,j,U,r="2035-2039",E,I,z,G,ne="2040-2044",se,$,R,K,oe="2045-2049",ie,ce,Z=de(pe.concat({id:"total",label:"Total"})),m=[];for(let v=0;v<Z.length;v+=1)m[v]=Ne(Ie(i,Z,v));return{c(){e=u("div"),l=u("div"),s=u("h2"),s.textContent=h,b=A();for(let v=0;v<m.length;v+=1)m[v].c();S=A(),o=u("div"),d=u("h2"),d.textContent=c,n=A(),p=u("div"),x=u("label"),q=u("input"),N=u("span"),N.textContent=C,y=A(),_=u("label"),T=u("input"),w=u("span"),w.textContent=H,te=A(),J=u("label"),B=u("input"),W=u("span"),W.textContent=le,V=A(),P=u("label"),j=u("input"),U=u("span"),U.textContent=r,E=A(),I=u("label"),z=u("input"),G=u("span"),G.textContent=ne,se=A(),$=u("label"),R=u("input"),K=u("span"),K.textContent=oe,this.h()},l(v){e=f(v,"DIV",{class:!0});var D=F(e);l=f(D,"DIV",{class:!0});var L=F(l);s=f(L,"H2",{"data-svelte-h":!0}),O(s)!=="svelte-uglilz"&&(s.textContent=h),b=k(L);for(let ge=0;ge<m.length;ge+=1)m[ge].l(L);L.forEach(g),S=k(D),o=f(D,"DIV",{class:!0});var Y=F(o);d=f(Y,"H2",{"data-svelte-h":!0}),O(d)!=="svelte-hletp"&&(d.textContent=c),n=k(Y),p=f(Y,"DIV",{id:!0,class:!0});var M=F(p);x=f(M,"LABEL",{class:!0});var ae=F(x);q=f(ae,"INPUT",{type:!0,name:!0,class:!0}),N=f(ae,"SPAN",{class:!0,"data-svelte-h":!0}),O(N)!=="svelte-2fqrek"&&(N.textContent=C),ae.forEach(g),y=k(M),_=f(M,"LABEL",{class:!0});var X=F(_);T=f(X,"INPUT",{type:!0,name:!0,class:!0}),w=f(X,"SPAN",{class:!0,"data-svelte-h":!0}),O(w)!=="svelte-177152l"&&(w.textContent=H),X.forEach(g),te=k(M),J=f(M,"LABEL",{class:!0});var ve=F(J);B=f(ve,"INPUT",{type:!0,name:!0,class:!0}),W=f(ve,"SPAN",{class:!0,"data-svelte-h":!0}),O(W)!=="svelte-sne3j9"&&(W.textContent=le),ve.forEach(g),V=k(M),P=f(M,"LABEL",{class:!0});var he=F(P);j=f(he,"INPUT",{type:!0,name:!0,class:!0}),U=f(he,"SPAN",{class:!0,"data-svelte-h":!0}),O(U)!=="svelte-13ifhof"&&(U.textContent=r),he.forEach(g),E=k(M),I=f(M,"LABEL",{class:!0});var me=F(I);z=f(me,"INPUT",{type:!0,name:!0,class:!0}),G=f(me,"SPAN",{class:!0,"data-svelte-h":!0}),O(G)!=="svelte-1pug1mv"&&(G.textContent=ne),me.forEach(g),se=k(M),$=f(M,"LABEL",{class:!0});var _e=F($);R=f(_e,"INPUT",{type:!0,name:!0,class:!0}),K=f(_e,"SPAN",{class:!0,"data-svelte-h":!0}),O(K)!=="svelte-3f05xd"&&(K.textContent=oe),_e.forEach(g),M.forEach(g),Y.forEach(g),D.forEach(g),this.h()},h(){t(l,"class","component"),t(q,"type","radio"),t(q,"name","toggle"),q.value="total",q.checked=!0,t(q,"class","svelte-1t23qr4"),t(N,"class","svelte-1t23qr4"),t(x,"class","time-radio svelte-1t23qr4"),t(T,"type","radio"),t(T,"name","toggle"),T.value="Y2025_2029",t(T,"class","svelte-1t23qr4"),t(w,"class","svelte-1t23qr4"),t(_,"class","time-radio svelte-1t23qr4"),t(B,"type","radio"),t(B,"name","toggle"),B.value="Y2030_2034",t(B,"class","svelte-1t23qr4"),t(W,"class","svelte-1t23qr4"),t(J,"class","time-radio svelte-1t23qr4"),t(j,"type","radio"),t(j,"name","toggle"),j.value="Y2035_2039",t(j,"class","svelte-1t23qr4"),t(U,"class","svelte-1t23qr4"),t(P,"class","time-radio svelte-1t23qr4"),t(z,"type","radio"),t(z,"name","toggle"),z.value="Y2040_2044",t(z,"class","svelte-1t23qr4"),t(G,"class","svelte-1t23qr4"),t(I,"class","time-radio svelte-1t23qr4"),t(R,"type","radio"),t(R,"name","toggle"),R.value="Y2045_2049",t(R,"class","svelte-1t23qr4"),t(K,"class","svelte-1t23qr4"),t($,"class","time-radio svelte-1t23qr4"),t(p,"id","time"),t(p,"class","svelte-1t23qr4"),t(o,"class","component"),t(e,"class","tabcontent svelte-1t23qr4")},m(v,D){ee(v,e,D),a(e,l),a(l,s),a(l,b);for(let L=0;L<m.length;L+=1)m[L]&&m[L].m(l,null);a(e,S),a(e,o),a(o,d),a(o,n),a(o,p),a(p,x),a(x,q),a(x,N),a(p,y),a(p,_),a(_,T),a(_,w),a(p,te),a(p,J),a(J,B),a(J,W),a(p,V),a(p,P),a(P,j),a(P,U),a(p,E),a(p,I),a(I,z),a(I,G),a(p,se),a(p,$),a($,R),a($,K),ie||(ce=[Q(q,"change",i[7]),Q(T,"change",i[7]),Q(B,"change",i[7]),Q(j,"change",i[7]),Q(z,"change",i[7]),Q(R,"change",i[7])],ie=!0)},p(v,D){if(D[0]&64){Z=de(pe.concat({id:"total",label:"Total"}));let L;for(L=0;L<Z.length;L+=1){const Y=Ie(v,Z,L);m[L]?m[L].p(Y,D):(m[L]=Ne(Y),m[L].c(),m[L].m(l,null))}for(;L<m.length;L+=1)m[L].d(1);m.length=Z.length}},d(v){v&&g(e),Me(m,v),ie=!1,we(ce)}}}function Fe(i){let e,l,s,h,b=i[32].label+"",S,o,d,c;return{c(){e=u("input"),s=A(),h=u("label"),S=Ve(b),o=u("br"),this.h()},l(n){e=f(n,"INPUT",{type:!0,id:!0,name:!0,class:!0}),s=k(n),h=f(n,"LABEL",{for:!0});var p=F(h);S=Pe(p,b),p.forEach(g),o=f(n,"BR",{}),this.h()},h(){t(e,"type","radio"),t(e,"id","html"),t(e,"name","fav_language"),e.value=i[32].id,e.checked=l=i[32].id==i[1],t(e,"class","svelte-1t23qr4"),t(h,"for","html")},m(n,p){ee(n,e,p),ee(n,s,p),ee(n,h,p),a(h,S),ee(n,o,p),d||(c=Q(e,"change",i[9]),d=!0)},p(n,p){p[0]&2&&l!==(l=n[32].id==n[1])&&(e.checked=l)},d(n){n&&(g(e),g(s),g(h),g(o)),d=!1,c()}}}function rt(i){let e,l;return{c(){e=u("img"),this.h()},l(s){e=f(s,"IMG",{style:!0,class:!0,src:!0}),this.h()},h(){je(e,"opacity","0"),t(e,"class","icon svelte-1t23qr4"),Ue(e.src,l=Oe("Air quality"))||t(e,"src",l)},m(s,h){ee(s,e,h)},d(s){s&&g(e)}}}function ot(i){let e,l;return{c(){e=u("img"),this.h()},l(s){e=f(s,"IMG",{alt:!0,class:!0,src:!0}),this.h()},h(){t(e,"alt","cobenefit icon"),t(e,"class","icon svelte-1t23qr4"),Ue(e.src,l=Oe(i[29].id))||t(e,"src",l)},m(s,h){ee(s,e,h)},d(s){s&&g(e)}}}function Ne(i){let e,l,s,h,b,S=i[29].label+"",o,d,c,n,p,x;function q(y,_){return y[29].id!="total"?ot:rt}let C=q(i)(i);return{c(){e=u("div"),C.c(),l=A(),s=u("input"),h=A(),b=u("a"),o=Ve(S),d=A(),c=u("br"),n=A(),this.h()},l(y){e=f(y,"DIV",{class:!0});var _=F(e);C.l(_),l=k(_),s=f(_,"INPUT",{type:!0,name:!0}),h=k(_),b=f(_,"A",{class:!0,href:!0});var T=F(b);o=Pe(T,S),T.forEach(g),d=k(_),c=f(_,"BR",{}),n=k(_),_.forEach(g),this.h()},h(){t(s,"type","radio"),t(s,"name","cobenef"),s.value=i[29].id,s.checked=!0,t(b,"class","link"),t(b,"href",Qe+"/cobenefit?cobenefit="+i[29].id),t(e,"class","checkbox-div svelte-1t23qr4")},m(y,_){ee(y,e,_),C.m(e,null),a(e,l),a(e,s),a(e,h),a(e,b),a(b,o),a(e,d),a(e,c),a(e,n),p||(x=Q(s,"change",i[6]),p=!0)},p:Re,d(y){y&&g(e),C.d(),p=!1,x()}}}function it(i){let e,l,s,h,b=`<h2>Map</h2> <p>This interactive map allows to explore both the co-benefit values (per capita) and the socio-economic factors
            at the local
            authorities and datazones levels.</p> <p><strong>Co-Benefits:</strong> The total co-benefit per capita is initially shown. The values go from white
            (low) to black (high), and negative values are shown in red. Individual co-benefit can be selected with the
            radio buttons on the right.</p> <p><strong>Socio-Economic Factors:</strong> The average values are shown for numerical factors while the mode is
            shown for categorical factors. Values go from white for low values to black for high values (when values can
            be ordered).</p>`,S,o,d,c,n="",p,x,q="",N,C,y="Export",_,T,w,H,te="CoBenefits",J,B,W=`Socio-Economic
                    Factors`,le,V,P,j,U,r="Local Authorities",E,I,z,G,ne="Data Zones",se,$,R,K,oe,ie;e=new Ye({});function ce(v,D){if(v[0]=="Cobenefit")return st;if(v[0]=="SEF")return nt}let Z=ce(i),m=Z&&Z(i);return R=new at({}),{c(){ye(e.$$.fragment),l=A(),s=u("div"),h=u("div"),h.innerHTML=b,S=A(),o=u("div"),d=u("div"),c=u("div"),c.innerHTML=n,p=A(),x=u("div"),x.innerHTML=q,N=A(),C=u("button"),C.textContent=y,_=A(),T=u("div"),w=u("div"),H=u("button"),H.textContent=te,J=A(),B=u("button"),B.textContent=W,le=A(),V=u("div"),P=u("input"),j=A(),U=u("label"),U.textContent=r,E=A(),I=u("input"),z=A(),G=u("label"),G.textContent=ne,se=A(),m&&m.c(),$=A(),ye(R.$$.fragment),this.h()},l(v){Le(e.$$.fragment,v),l=k(v),s=f(v,"DIV",{class:!0});var D=F(s);h=f(D,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),O(h)!=="svelte-5el79v"&&(h.innerHTML=b),S=k(D),o=f(D,"DIV",{id:!0,class:!0});var L=F(o);d=f(L,"DIV",{class:!0,id:!0});var Y=F(d);c=f(Y,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),O(c)!=="svelte-1ej9vmv"&&(c.innerHTML=n),p=k(Y),x=f(Y,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),O(x)!=="svelte-1j653gg"&&(x.innerHTML=q),N=k(Y),C=f(Y,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),O(C)!=="svelte-zgluur"&&(C.textContent=y),Y.forEach(g),_=k(L),T=f(L,"DIV",{class:!0,id:!0});var M=F(T);w=f(M,"DIV",{class:!0});var ae=F(w);H=f(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),O(H)!=="svelte-14nmzoo"&&(H.textContent=te),J=k(ae),B=f(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),O(B)!=="svelte-xxvynj"&&(B.textContent=W),ae.forEach(g),le=k(M),V=f(M,"DIV",{class:!0});var X=F(V);P=f(X,"INPUT",{type:!0,name:!0}),j=k(X),U=f(X,"LABEL",{for:!0,"data-svelte-h":!0}),O(U)!=="svelte-p8irzv"&&(U.textContent=r),E=k(X),I=f(X,"INPUT",{type:!0,name:!0}),z=k(X),G=f(X,"LABEL",{for:!0,"data-svelte-h":!0}),O(G)!=="svelte-1ytveqc"&&(G.textContent=ne),X.forEach(g),se=k(M),m&&m.l(M),M.forEach(g),L.forEach(g),$=k(D),Le(R.$$.fragment,D),D.forEach(g),this.h()},h(){t(h,"class","component"),t(h,"id","heaser"),t(c,"id","map"),t(c,"class","svelte-1t23qr4"),t(x,"id","map-legend"),t(x,"class","svelte-1t23qr4"),t(C,"id","export-button"),t(C,"class","svelte-1t23qr4"),t(d,"class","component column svelte-1t23qr4"),t(d,"id","mapComp"),t(H,"class","tablinks svelte-1t23qr4"),H.value="Cobenefit",ue(H,"active",i[0]=="Cobenefit"),t(B,"class","tablinks svelte-1t23qr4"),B.value="SEF",ue(B,"active",i[0]=="SEF"),t(w,"class","tab svelte-1t23qr4"),t(P,"type","radio"),t(P,"name","granularity"),P.value="LAD",P.checked=!0,t(U,"for","LAD"),t(I,"type","radio"),t(I,"name","granularity"),I.value="LSOA",t(G,"for","LSOA"),t(V,"class","component"),t(T,"class","component column svelte-1t23qr4"),t(T,"id","control-panel"),t(o,"id","map-row"),t(o,"class","row svelte-1t23qr4"),t(s,"class","page-container svelte-1t23qr4")},m(v,D){Se(e,v,D),ee(v,l,D),ee(v,s,D),a(s,h),a(s,S),a(s,o),a(o,d),a(d,c),i[19](c),a(d,p),a(d,x),i[20](x),a(d,N),a(d,C),i[21](C),a(o,_),a(o,T),a(T,w),a(w,H),a(w,J),a(w,B),a(T,le),a(T,V),a(V,P),a(V,j),a(V,U),a(V,E),a(V,I),a(V,z),a(V,G),a(T,se),m&&m.m(T,null),a(s,$),Se(R,s,null),i[22](s),K=!0,oe||(ie=[Q(C,"click",ct),Q(H,"click",i[8]),Q(B,"click",i[8]),Q(P,"change",i[10]),Q(I,"change",i[10])],oe=!0)},p(v,D){(!K||D[0]&1)&&ue(H,"active",v[0]=="Cobenefit"),(!K||D[0]&1)&&ue(B,"active",v[0]=="SEF"),Z===(Z=ce(v))&&m?m.p(v,D):(m&&m.d(1),m=Z&&Z(v),m&&(m.c(),m.m(T,null)))},i(v){K||(Te(e.$$.fragment,v),Te(R.$$.fragment,v),K=!0)},o(v){Ae(e.$$.fragment,v),Ae(R.$$.fragment,v),K=!1},d(v){v&&(g(l),g(s)),ke(e,v),i[19](null),i[20](null),i[21](null),m&&m.d(),ke(R),i[22](null),oe=!1,we(ie)}}}function ct(){const e=document.getElementsByClassName("maplibregl-canvas")[0].toDataURL("image/png");var l=document.createElement("a");l.download="map.png",l.href=e,l.dataset.downloadurl=["image/png",l.download,l.href].join(":"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function ut(i,e,l){let{data:s}=e,h,b,S,o,d,c,n="Cobenefit",p=!1,x="BNZ",q=pe.map(r=>r.id),N="total",C="LAD",y="EPC",_;function T(){if(c.makeColorScale(!1),n=="SEF"&&Ce.includes(y)){const r=Je("white","black");let E=Object.values(xe[y]);const I=E.map((G,ne)=>r(ne/(E.length-1)));let z=Ze().domain(E).range(I);c.setColorScale(z)}S=c.legend(w()),l(4,o.innerHTML="",o),o.append(S)}function w(){if(n=="SEF")return`${Ee.filter(r=>r.id==y)[0].label} (${lt(y)})`;if(n=="Cobenefit")return"Cobenefits (£ per capita)"}Ge(async()=>{let r;C=="LAD"?r=await re(qe(Array.from(q),"UK",N)):C=="LSOA"&&(r=await re(De(Array.from(q),x,N))),r.forEach(E=>{E.value_per_capita=E.value_per_capita*1e6}),l(12,c=new We(r,C,b,"value_per_capita",!0,"Lookup_Value",!0)),c.initMap(),c.setTooltipCb(le),S=c.legend(w()),o.append(S)});const H=r=>{const E=r.currentTarget.value;E=="total"?l(15,q=pe.map(I=>I.id)):l(15,q=[E]),be.capture("clicked specific CoBenefit",{CoBenefit:r.currentTarget.value})},te=r=>{const E=r.currentTarget.value;l(16,N=E)};function J(r,E){l(0,n=r.currentTarget.value)}const B=r=>{l(1,y=r.currentTarget.value),be.capture("clicked specific SEF",{SEF:r.currentTarget.value})},W=r=>{c.removeLayers(),c.removeSources(),l(17,C=r.currentTarget.value),l(12,c.granularity=C,c),C=="LSOA"?l(12,c.border=!1,c):l(12,c.border=!0,c),l(13,p=!0),be.capture("clicked granularity",{granularity:r.currentTarget.value})},le=r=>{if(n=="SEF")return Ce.includes(y)?`Mode value is ${xe[y][r]}`:`Mean value is ${r.toFixed(2)}`;if(n=="Cobenefit")return`£${r.toFixed(2)} per capita.`};function V(r){fe[r?"unshift":"push"](()=>{b=r,l(3,b)})}function P(r){fe[r?"unshift":"push"](()=>{o=r,l(4,o)})}function j(r){fe[r?"unshift":"push"](()=>{d=r,l(5,d)})}function U(r){fe[r?"unshift":"push"](()=>{h=r,l(2,h)})}return i.$$set=r=>{"data"in r&&l(11,s=r.data)},i.$$.update=()=>{if(i.$$.dirty[0]&520195&&c?.loaded){if(n=="Cobenefit"){if(l(12,c.dataKey="value_per_capita",c),C=="LAD")l(18,_=re(qe(Array.from(q),"UK",N)));else if(C=="LSOA"){let r;q.length==11?r=[]:r=q,l(18,_=re(De(r,x,N)))}}else l(0,n="SEF")&&(l(12,c.dataKey="val",c),C=="LAD"?Ce.includes(y)?l(18,_=re(Xe(y))):l(18,_=re($e(y))):C=="LSOA"&&l(18,_=re(et(y))));_.then(r=>{n=="Cobenefit"&&r.forEach(I=>{I.value_per_capita=I.value_per_capita*1e6});let E;n=="Cobenefit"?q.length==1?(E=JSON.parse(JSON.stringify(tt(q[0]))),E.shift(),E=E.reverse()):E=["red","white","black"]:E=["white","black"],c.update(r,n,p,E),T(),l(13,p=!1)})}},[n,y,h,b,o,d,H,te,J,B,W,s,c,p,x,q,N,C,_,V,P,j,U]}class yt extends ze{constructor(e){super(),Ke(this,e,ut,it,He,{data:11},null,[-1,-1])}}export{yt as component};
