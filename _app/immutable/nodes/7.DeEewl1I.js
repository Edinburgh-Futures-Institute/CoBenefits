import{s as Tt,d as It,n as yt,r as qt,o as Ft,e as $}from"../chunks/scheduler.tir__IPy.js";import{S as Ht,i as Vt,e as s,b as G,s as C,c as o,d as k,f as W,g as y,h as S,m as B,n as d,j as Lt,k as e,p as At,q as Et,o as Bt}from"../chunks/index.bU9Y8Vjw.js";import{e as Ct}from"../chunks/each.-gASlQSi.js";import"../chunks/transform.Bxaw71Wc.js";import{p as tt,g as St,m as zt,d as kt}from"../chunks/index.BB3F7tZ8.js";import{M as Pt}from"../chunks/map.Di09rdZe.js";import{S as ht,a as wt}from"../chunks/globals.xEjTdJsR.js";import{b as Rt,a as ct,c as jt}from"../chunks/bar.DRnp5WFh.js";import{l as Ot,a as xt}from"../chunks/link.DfqFGt-1.js";function Mt(a,n,i){const c=a.slice();return c[19]=n[i],c[20]=n,c[21]=i,c}function Dt(a){let n,i="",c=a[19];const v=()=>a[12](n,c),_=()=>a[12](null,c);return{c(){n=s("div"),n.innerHTML=i,this.h()},l(h){n=o(h,"DIV",{class:!0,"data-svelte-h":!0}),B(n)!=="svelte-18okkjt"&&(n.innerHTML=i),this.h()},h(){d(n,"class","plot")},m(h,f){Lt(h,n,f),v()},p(h,f){a=h,c!==a[19]&&(_(),c=a[19],v())},d(h){h&&y(n),_()}}}function Yt(a){let n,i,c,v,_,h,f,x,M,b,l,D,F,j,O,z,Y,L,J="Barchart",N,U,t,T,p,ut="Distribution",et,H,mt="",ft,at,V,P,pt="Map",nt,I,vt="",it,q,w,gt="Socio Economic Factors",lt,A,rt,_t,R=Ct(ht),u=[];for(let m=0;m<R.length;m+=1)u[m]=Dt(Mt(a,R,m));return{c(){n=s("div"),i=s("div"),c=s("h1"),v=G(a[5]),_=C(),h=s("p"),f=G(a[5]),x=G(" is ..."),M=C(),b=s("div"),l=s("div"),D=s("h3"),F=G(a[5]),j=G(" datazone distribution"),O=C(),z=s("input"),Y=C(),L=s("label"),L.textContent=J,N=s("br"),U=C(),t=s("input"),T=C(),p=s("label"),p.textContent=ut,et=C(),H=s("div"),H.innerHTML=mt,at=C(),V=s("div"),P=s("h3"),P.textContent=pt,nt=C(),I=s("div"),I.innerHTML=vt,it=C(),q=s("div"),w=s("h3"),w.textContent=gt,lt=C(),A=s("div");for(let m=0;m<u.length;m+=1)u[m].c();this.h()},l(m){n=o(m,"DIV",{class:!0});var E=k(n);i=o(E,"DIV",{class:!0});var r=k(i);c=o(r,"H1",{});var X=k(c);v=W(X,a[5]),X.forEach(y),_=S(r),h=o(r,"P",{});var st=k(h);f=W(st,a[5]),x=W(st," is ..."),st.forEach(y),r.forEach(y),M=S(E),b=o(E,"DIV",{id:!0,class:!0});var K=k(b);l=o(K,"DIV",{class:!0});var g=k(l);D=o(g,"H3",{});var ot=k(D);F=W(ot,a[5]),j=W(ot," datazone distribution"),ot.forEach(y),O=S(g),z=o(g,"INPUT",{type:!0,name:!0}),Y=S(g),L=o(g,"LABEL",{for:!0,"data-svelte-h":!0}),B(L)!=="svelte-1hwbt9c"&&(L.textContent=J),N=o(g,"BR",{}),U=S(g),t=o(g,"INPUT",{type:!0,name:!0}),T=S(g),p=o(g,"LABEL",{for:!0,"data-svelte-h":!0}),B(p)!=="svelte-27dm33"&&(p.textContent=ut),et=S(g),H=o(g,"DIV",{class:!0,"data-svelte-h":!0}),B(H)!=="svelte-111cum5"&&(H.innerHTML=mt),g.forEach(y),at=S(K),V=o(K,"DIV",{class:!0});var Q=k(V);P=o(Q,"H3",{"data-svelte-h":!0}),B(P)!=="svelte-vcuthw"&&(P.textContent=pt),nt=S(Q),I=o(Q,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),B(I)!=="svelte-1ej9vmv"&&(I.innerHTML=vt),Q.forEach(y),K.forEach(y),it=S(E),q=o(E,"DIV",{id:!0,class:!0});var Z=k(q);w=o(Z,"H3",{"data-svelte-h":!0}),B(w)!=="svelte-zqlelw"&&(w.textContent=gt),lt=S(Z),A=o(Z,"DIV",{id:!0,class:!0});var bt=k(A);for(let dt=0;dt<u.length;dt+=1)u[dt].l(bt);bt.forEach(y),Z.forEach(y),E.forEach(y),this.h()},h(){d(i,"class","component"),d(z,"type","radio"),d(z,"name","visType"),z.value="barchart",z.checked=!0,d(L,"for","html"),d(t,"type","radio"),d(t,"name","visType"),t.value="distribution",d(p,"for","javascript"),d(H,"class","plot"),d(l,"class","component column"),It(()=>a[10].call(l)),d(I,"id","map"),d(I,"class","svelte-1qzzqci"),d(V,"class","component column"),d(b,"id","vis-block"),d(b,"class","svelte-1qzzqci"),d(A,"id","multiple-plots"),d(A,"class","svelte-1qzzqci"),d(q,"id","multiple-comp"),d(q,"class","component svelte-1qzzqci"),d(n,"class","page-container")},m(m,E){Lt(m,n,E),e(n,i),e(i,c),e(c,v),e(i,_),e(i,h),e(h,f),e(h,x),e(n,M),e(n,b),e(b,l),e(l,D),e(D,F),e(D,j),e(l,O),e(l,z),e(l,Y),e(l,L),e(l,N),e(l,U),e(l,t),e(l,T),e(l,p),e(l,et),e(l,H),a[9](H),ft=At(l,a[10].bind(l)),e(b,at),e(b,V),e(V,P),e(V,nt),e(V,I),a[11](I),e(n,it),e(n,q),e(q,w),e(q,lt),e(q,A);for(let r=0;r<u.length;r+=1)u[r]&&u[r].m(A,null);a[13](n),rt||(_t=[Et(z,"change",a[6]),Et(t,"change",a[6])],rt=!0)},p(m,[E]){if(E&2){R=Ct(ht);let r;for(r=0;r<R.length;r+=1){const X=Mt(m,R,r);u[r]?u[r].p(X,E):(u[r]=Dt(X),u[r].c(),u[r].m(A,null))}for(;r<u.length;r+=1)u[r].d(1);u.length=R.length}},i:yt,o:yt,d(m){m&&y(n),a[9](null),ft(),a[11](null),Bt(u,m),a[13](null),rt=!1,qt(_t)}}}function Nt(a,n,i){let c,v,_={},h="barchart",f,{data:x}=n;const M=x.data,b=x.SEFData,l=x.coBenefit;let D,F;Ft(()=>{D=new Pt(M,"LSOA",F,"total"),D.initMap()});function j(){h=="barchart"?v?.append(tt({height:f/1.4,marginLeft:60,marginRight:60,marginBottom:60,y:{type:"band"},style:{fontSize:"18px"},marks:[Rt(M,St({x:"mean"},{x:"total",y:"scenario"})),Ot(M,St({x1:t=>zt(t)-kt(t),x2:t=>zt(t)+kt(t)},{x:"total",y:"scenario",stroke:"gray",strokeWidth:3}))]})):h=="distribution"&&v?.append(tt({height:f/1.4,marginLeft:60,marginRight:60,y:{label:"Datazones Frequency"},style:{fontSize:"18px"},facet:{data:M,y:"scenario"},marks:[xt(M,ct({y:"count"},{x:"total",tip:!0}))]}))}function O(){ht.forEach(t=>{let T;wt.includes(t)?T=tt({height:f/2,width:330,marginLeft:80,marginBottom:60,marginRight:30,marginTop:60,y:{grid:!0,label:"mean value (£)"},x:{grid:!0,label:t,type:"band",tickFormat:p=>Math.floor(p)},style:{fontSize:"18px"},color:{legend:!0},marks:[jt(b.filter(p=>p.SEFMAME==t),ct({y:"mean"},{x:p=>Math.floor(p.SE).toString(),y:"total"}))]}):T=tt({height:f/2,width:330,marginLeft:80,marginBottom:60,marginRight:30,marginTop:60,y:{grid:!0,label:"mean value (£)"},x:{grid:!0,label:t},style:{fontSize:"18px"},color:{legend:!0},marks:[xt(b.filter(p=>p.SEFMAME==t),ct({y:"mean"},{x:"SE",y:"total"}))]}),_[t]?.append(T)})}function z(t){i(8,h=t.currentTarget.value)}function Y(t){$[t?"unshift":"push"](()=>{v=t,i(0,v)})}function L(){f=this.clientHeight,i(2,f)}function J(t){$[t?"unshift":"push"](()=>{F=t,i(4,F)})}function N(t,T){$[t?"unshift":"push"](()=>{_[T]=t,i(1,_)})}function U(t){$[t?"unshift":"push"](()=>{c=t,i(3,c)})}return a.$$set=t=>{"data"in t&&i(7,x=t.data)},a.$$.update=()=>{a.$$.dirty&263&&(v?.firstChild?.remove(),Object.values(_).forEach(t=>{t.firstChild?.remove()}),f&&(j(),O()))},[v,_,f,c,F,l,z,x,h,Y,L,J,N,U]}class te extends Ht{constructor(n){super(),Vt(this,n,Nt,Yt,Tt,{data:7})}}export{te as component};
