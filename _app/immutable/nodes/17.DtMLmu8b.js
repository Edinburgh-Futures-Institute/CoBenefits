import{s as Oe,a as T,e as u,g as q,c as f,b as N,p as O,f as g,q as t,D as ue,i as ee,h as a,w as Q,E as we,y as He,B as fe,x as Fe,t as Me,d as Ve,n as Ge,v as Re,r as Pe}from"../chunks/scheduler.CM2kgFFE.js";import{S as je,i as ze,c as Ee,b as ye,m as Le,t as Se,a as Ae,d as Te}from"../chunks/index.BdkIKoLm.js";import{N as Ke,e as de}from"../chunks/NavigationBar.DNSgr204.js";import{i as Ye,o as Je}from"../chunks/transform.BNP73y-7.js";import"../chunks/index.gHFfw6XA.js";import{b as Ze}from"../chunks/paths.B5miYNVp.js";import{M as Qe}from"../chunks/mapUK.CWoTGAgQ.js";import{g as re,k as qe,l as ke,m as We,n as Xe,o as $e}from"../chunks/duckdb.BmdwG0Ee.js";import{a as he,d as be,h as De,b as et,c as Ce,e as tt,g as Ue}from"../chunks/globals.Bx6Z0i4A.js";import{F as lt}from"../chunks/Footer.DfO87FEo.js";function xe(o,e,l){const s=o.slice();return s[32]=e[l],s}function Be(o,e,l){const s=o.slice();return s[29]=e[l],s}function at(o){let e,l,s="Social Economic Factor",p,b,S=de(Ce),r=[];for(let d=0;d<S.length;d+=1)r[d]=Ie(xe(o,S,d));return{c(){e=u("div"),l=u("h2"),l.textContent=s,p=T(),b=u("div");for(let d=0;d<r.length;d+=1)r[d].c();this.h()},l(d){e=f(d,"DIV",{class:!0});var i=N(e);l=f(i,"H2",{"data-svelte-h":!0}),O(l)!=="svelte-1ld89ev"&&(l.textContent=s),p=q(i),b=f(i,"DIV",{id:!0,class:!0});var n=N(b);for(let h=0;h<r.length;h+=1)r[h].l(n);n.forEach(g),i.forEach(g),this.h()},h(){t(b,"id","time"),t(b,"class","svelte-1t23qr4"),t(e,"class","tabcontent svelte-1t23qr4")},m(d,i){ee(d,e,i),a(e,l),a(e,p),a(e,b);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(b,null)},p(d,i){if(i[0]&514){S=de(Ce);let n;for(n=0;n<S.length;n+=1){const h=xe(d,S,n);r[n]?r[n].p(h,i):(r[n]=Ie(h),r[n].c(),r[n].m(b,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=S.length}},d(d){d&&g(e),Fe(r,d)}}}function nt(o){let e,l,s,p="Co-Benefits",b,S,r,d,i="Time",n,h,x,k,w,C="Total",y,_,A,F,H="2025-2029",te,J,B,W,le="2030-2034",V,P,j,U,c="2035-2039",E,I,z,G,ne="2040-2044",se,$,R,K,oe="2045-2049",ie,ce,Z=de(he.concat({id:"total",label:"Total"})),m=[];for(let v=0;v<Z.length;v+=1)m[v]=Ne(Be(o,Z,v));return{c(){e=u("div"),l=u("div"),s=u("h2"),s.textContent=p,b=T();for(let v=0;v<m.length;v+=1)m[v].c();S=T(),r=u("div"),d=u("h2"),d.textContent=i,n=T(),h=u("div"),x=u("label"),k=u("input"),w=u("span"),w.textContent=C,y=T(),_=u("label"),A=u("input"),F=u("span"),F.textContent=H,te=T(),J=u("label"),B=u("input"),W=u("span"),W.textContent=le,V=T(),P=u("label"),j=u("input"),U=u("span"),U.textContent=c,E=T(),I=u("label"),z=u("input"),G=u("span"),G.textContent=ne,se=T(),$=u("label"),R=u("input"),K=u("span"),K.textContent=oe,this.h()},l(v){e=f(v,"DIV",{class:!0});var D=N(e);l=f(D,"DIV",{class:!0});var L=N(l);s=f(L,"H2",{"data-svelte-h":!0}),O(s)!=="svelte-uglilz"&&(s.textContent=p),b=q(L);for(let ge=0;ge<m.length;ge+=1)m[ge].l(L);L.forEach(g),S=q(D),r=f(D,"DIV",{class:!0});var Y=N(r);d=f(Y,"H2",{"data-svelte-h":!0}),O(d)!=="svelte-hletp"&&(d.textContent=i),n=q(Y),h=f(Y,"DIV",{id:!0,class:!0});var M=N(h);x=f(M,"LABEL",{class:!0});var ae=N(x);k=f(ae,"INPUT",{type:!0,name:!0,class:!0}),w=f(ae,"SPAN",{class:!0,"data-svelte-h":!0}),O(w)!=="svelte-2fqrek"&&(w.textContent=C),ae.forEach(g),y=q(M),_=f(M,"LABEL",{class:!0});var X=N(_);A=f(X,"INPUT",{type:!0,name:!0,class:!0}),F=f(X,"SPAN",{class:!0,"data-svelte-h":!0}),O(F)!=="svelte-177152l"&&(F.textContent=H),X.forEach(g),te=q(M),J=f(M,"LABEL",{class:!0});var ve=N(J);B=f(ve,"INPUT",{type:!0,name:!0,class:!0}),W=f(ve,"SPAN",{class:!0,"data-svelte-h":!0}),O(W)!=="svelte-sne3j9"&&(W.textContent=le),ve.forEach(g),V=q(M),P=f(M,"LABEL",{class:!0});var pe=N(P);j=f(pe,"INPUT",{type:!0,name:!0,class:!0}),U=f(pe,"SPAN",{class:!0,"data-svelte-h":!0}),O(U)!=="svelte-13ifhof"&&(U.textContent=c),pe.forEach(g),E=q(M),I=f(M,"LABEL",{class:!0});var me=N(I);z=f(me,"INPUT",{type:!0,name:!0,class:!0}),G=f(me,"SPAN",{class:!0,"data-svelte-h":!0}),O(G)!=="svelte-1pug1mv"&&(G.textContent=ne),me.forEach(g),se=q(M),$=f(M,"LABEL",{class:!0});var _e=N($);R=f(_e,"INPUT",{type:!0,name:!0,class:!0}),K=f(_e,"SPAN",{class:!0,"data-svelte-h":!0}),O(K)!=="svelte-3f05xd"&&(K.textContent=oe),_e.forEach(g),M.forEach(g),Y.forEach(g),D.forEach(g),this.h()},h(){t(l,"class","component"),t(k,"type","radio"),t(k,"name","toggle"),k.value="total",k.checked=!0,t(k,"class","svelte-1t23qr4"),t(w,"class","svelte-1t23qr4"),t(x,"class","time-radio svelte-1t23qr4"),t(A,"type","radio"),t(A,"name","toggle"),A.value="Y2025_2029",t(A,"class","svelte-1t23qr4"),t(F,"class","svelte-1t23qr4"),t(_,"class","time-radio svelte-1t23qr4"),t(B,"type","radio"),t(B,"name","toggle"),B.value="Y2030_2034",t(B,"class","svelte-1t23qr4"),t(W,"class","svelte-1t23qr4"),t(J,"class","time-radio svelte-1t23qr4"),t(j,"type","radio"),t(j,"name","toggle"),j.value="Y2035_2039",t(j,"class","svelte-1t23qr4"),t(U,"class","svelte-1t23qr4"),t(P,"class","time-radio svelte-1t23qr4"),t(z,"type","radio"),t(z,"name","toggle"),z.value="Y2040_2044",t(z,"class","svelte-1t23qr4"),t(G,"class","svelte-1t23qr4"),t(I,"class","time-radio svelte-1t23qr4"),t(R,"type","radio"),t(R,"name","toggle"),R.value="Y2045_2049",t(R,"class","svelte-1t23qr4"),t(K,"class","svelte-1t23qr4"),t($,"class","time-radio svelte-1t23qr4"),t(h,"id","time"),t(h,"class","svelte-1t23qr4"),t(r,"class","component"),t(e,"class","tabcontent svelte-1t23qr4")},m(v,D){ee(v,e,D),a(e,l),a(l,s),a(l,b);for(let L=0;L<m.length;L+=1)m[L]&&m[L].m(l,null);a(e,S),a(e,r),a(r,d),a(r,n),a(r,h),a(h,x),a(x,k),a(x,w),a(h,y),a(h,_),a(_,A),a(_,F),a(h,te),a(h,J),a(J,B),a(J,W),a(h,V),a(h,P),a(P,j),a(P,U),a(h,E),a(h,I),a(I,z),a(I,G),a(h,se),a(h,$),a($,R),a($,K),ie||(ce=[Q(k,"change",o[7]),Q(A,"change",o[7]),Q(B,"change",o[7]),Q(j,"change",o[7]),Q(z,"change",o[7]),Q(R,"change",o[7])],ie=!0)},p(v,D){if(D[0]&64){Z=de(he.concat({id:"total",label:"Total"}));let L;for(L=0;L<Z.length;L+=1){const Y=Be(v,Z,L);m[L]?m[L].p(Y,D):(m[L]=Ne(Y),m[L].c(),m[L].m(l,null))}for(;L<m.length;L+=1)m[L].d(1);m.length=Z.length}},d(v){v&&g(e),Fe(m,v),ie=!1,we(ce)}}}function Ie(o){let e,l,s,p,b=o[32].label+"",S,r,d,i;return{c(){e=u("input"),s=T(),p=u("label"),S=Me(b),r=u("br"),this.h()},l(n){e=f(n,"INPUT",{type:!0,id:!0,name:!0,class:!0}),s=q(n),p=f(n,"LABEL",{for:!0});var h=N(p);S=Ve(h,b),h.forEach(g),r=f(n,"BR",{}),this.h()},h(){t(e,"type","radio"),t(e,"id","html"),t(e,"name","fav_language"),e.value=o[32].id,e.checked=l=o[32].id==o[1],t(e,"class","svelte-1t23qr4"),t(p,"for","html")},m(n,h){ee(n,e,h),ee(n,s,h),ee(n,p,h),a(p,S),ee(n,r,h),d||(i=Q(e,"change",o[9]),d=!0)},p(n,h){h[0]&2&&l!==(l=n[32].id==n[1])&&(e.checked=l)},d(n){n&&(g(e),g(s),g(p),g(r)),d=!1,i()}}}function st(o){let e,l;return{c(){e=u("img"),this.h()},l(s){e=f(s,"IMG",{style:!0,class:!0,src:!0}),this.h()},h(){Re(e,"opacity","0"),t(e,"class","icon svelte-1t23qr4"),Pe(e.src,l=Ue("Air quality"))||t(e,"src",l)},m(s,p){ee(s,e,p)},d(s){s&&g(e)}}}function rt(o){let e,l;return{c(){e=u("img"),this.h()},l(s){e=f(s,"IMG",{alt:!0,class:!0,src:!0}),this.h()},h(){t(e,"alt","cobenefit icon"),t(e,"class","icon svelte-1t23qr4"),Pe(e.src,l=Ue(o[29].id))||t(e,"src",l)},m(s,p){ee(s,e,p)},d(s){s&&g(e)}}}function Ne(o){let e,l,s,p,b,S=o[29].label+"",r,d,i,n,h,x;function k(y,_){return y[29].id!="total"?rt:st}let C=k(o)(o);return{c(){e=u("div"),C.c(),l=T(),s=u("input"),p=T(),b=u("a"),r=Me(S),d=T(),i=u("br"),n=T(),this.h()},l(y){e=f(y,"DIV",{class:!0});var _=N(e);C.l(_),l=q(_),s=f(_,"INPUT",{type:!0,name:!0}),p=q(_),b=f(_,"A",{class:!0,href:!0});var A=N(b);r=Ve(A,S),A.forEach(g),d=q(_),i=f(_,"BR",{}),n=q(_),_.forEach(g),this.h()},h(){t(s,"type","radio"),t(s,"name","cobenef"),s.value=o[29].id,s.checked=!0,t(b,"class","link"),t(b,"href",Ze+"/cobenefit?cobenefit="+o[29].id),t(e,"class","checkbox-div svelte-1t23qr4")},m(y,_){ee(y,e,_),C.m(e,null),a(e,l),a(e,s),a(e,p),a(e,b),a(b,r),a(e,d),a(e,i),a(e,n),h||(x=Q(s,"change",o[6]),h=!0)},p:Ge,d(y){y&&g(e),C.d(),h=!1,x()}}}function ot(o){let e,l,s,p,b=`<h2>Map</h2> <p>This interactive map allows to explore both the co-benefit values (per capita) and the socio-economic factors
            at the local
            authorities and datazones levels.</p> <p><strong>Co-Benefits:</strong> The total co-benefit per capita is initially shown. The values go from white
            (low) to black (high), and negative values are shown in red. Individual co-benefit can be selected with the
            radio buttons on the right.</p> <p><strong>Socio-Economic Factors:</strong> The average values are shown for numerical factors while the mode is
            shown for categorical factors. Values go from white for low values to black for high values (when values can
            be ordered).</p>`,S,r,d,i,n="",h,x,k="",w,C,y="Export",_,A,F,H,te="CoBenefits",J,B,W=`Socio-Economic
                    Factors`,le,V,P,j,U,c="Local Authorities",E,I,z,G,ne="Data Zones",se,$,R,K,oe,ie;e=new Ke({});function ce(v,D){if(v[0]=="Cobenefit")return nt;if(v[0]=="SEF")return at}let Z=ce(o),m=Z&&Z(o);return R=new lt({}),{c(){Ee(e.$$.fragment),l=T(),s=u("div"),p=u("div"),p.innerHTML=b,S=T(),r=u("div"),d=u("div"),i=u("div"),i.innerHTML=n,h=T(),x=u("div"),x.innerHTML=k,w=T(),C=u("button"),C.textContent=y,_=T(),A=u("div"),F=u("div"),H=u("button"),H.textContent=te,J=T(),B=u("button"),B.textContent=W,le=T(),V=u("div"),P=u("input"),j=T(),U=u("label"),U.textContent=c,E=T(),I=u("input"),z=T(),G=u("label"),G.textContent=ne,se=T(),m&&m.c(),$=T(),Ee(R.$$.fragment),this.h()},l(v){ye(e.$$.fragment,v),l=q(v),s=f(v,"DIV",{class:!0});var D=N(s);p=f(D,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),O(p)!=="svelte-5el79v"&&(p.innerHTML=b),S=q(D),r=f(D,"DIV",{id:!0,class:!0});var L=N(r);d=f(L,"DIV",{class:!0,id:!0});var Y=N(d);i=f(Y,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),O(i)!=="svelte-1ej9vmv"&&(i.innerHTML=n),h=q(Y),x=f(Y,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),O(x)!=="svelte-1j653gg"&&(x.innerHTML=k),w=q(Y),C=f(Y,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),O(C)!=="svelte-zgluur"&&(C.textContent=y),Y.forEach(g),_=q(L),A=f(L,"DIV",{class:!0,id:!0});var M=N(A);F=f(M,"DIV",{class:!0});var ae=N(F);H=f(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),O(H)!=="svelte-14nmzoo"&&(H.textContent=te),J=q(ae),B=f(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),O(B)!=="svelte-xxvynj"&&(B.textContent=W),ae.forEach(g),le=q(M),V=f(M,"DIV",{class:!0});var X=N(V);P=f(X,"INPUT",{type:!0,name:!0}),j=q(X),U=f(X,"LABEL",{for:!0,"data-svelte-h":!0}),O(U)!=="svelte-p8irzv"&&(U.textContent=c),E=q(X),I=f(X,"INPUT",{type:!0,name:!0}),z=q(X),G=f(X,"LABEL",{for:!0,"data-svelte-h":!0}),O(G)!=="svelte-1ytveqc"&&(G.textContent=ne),X.forEach(g),se=q(M),m&&m.l(M),M.forEach(g),L.forEach(g),$=q(D),ye(R.$$.fragment,D),D.forEach(g),this.h()},h(){t(p,"class","component"),t(p,"id","heaser"),t(i,"id","map"),t(i,"class","svelte-1t23qr4"),t(x,"id","map-legend"),t(x,"class","svelte-1t23qr4"),t(C,"id","export-button"),t(C,"class","svelte-1t23qr4"),t(d,"class","component column svelte-1t23qr4"),t(d,"id","mapComp"),t(H,"class","tablinks svelte-1t23qr4"),H.value="Cobenefit",ue(H,"active",o[0]=="Cobenefit"),t(B,"class","tablinks svelte-1t23qr4"),B.value="SEF",ue(B,"active",o[0]=="SEF"),t(F,"class","tab svelte-1t23qr4"),t(P,"type","radio"),t(P,"name","granularity"),P.value="LAD",P.checked=!0,t(U,"for","LAD"),t(I,"type","radio"),t(I,"name","granularity"),I.value="LSOA",t(G,"for","LSOA"),t(V,"class","component"),t(A,"class","component column svelte-1t23qr4"),t(A,"id","control-panel"),t(r,"id","map-row"),t(r,"class","row svelte-1t23qr4"),t(s,"class","page-container svelte-1t23qr4")},m(v,D){Le(e,v,D),ee(v,l,D),ee(v,s,D),a(s,p),a(s,S),a(s,r),a(r,d),a(d,i),o[19](i),a(d,h),a(d,x),o[20](x),a(d,w),a(d,C),o[21](C),a(r,_),a(r,A),a(A,F),a(F,H),a(F,J),a(F,B),a(A,le),a(A,V),a(V,P),a(V,j),a(V,U),a(V,E),a(V,I),a(V,z),a(V,G),a(A,se),m&&m.m(A,null),a(s,$),Le(R,s,null),o[22](s),K=!0,oe||(ie=[Q(C,"click",it),Q(H,"click",o[8]),Q(B,"click",o[8]),Q(P,"change",o[10]),Q(I,"change",o[10])],oe=!0)},p(v,D){(!K||D[0]&1)&&ue(H,"active",v[0]=="Cobenefit"),(!K||D[0]&1)&&ue(B,"active",v[0]=="SEF"),Z===(Z=ce(v))&&m?m.p(v,D):(m&&m.d(1),m=Z&&Z(v),m&&(m.c(),m.m(A,null)))},i(v){K||(Se(e.$$.fragment,v),Se(R.$$.fragment,v),K=!0)},o(v){Ae(e.$$.fragment,v),Ae(R.$$.fragment,v),K=!1},d(v){v&&(g(l),g(s)),Te(e,v),o[19](null),o[20](null),o[21](null),m&&m.d(),Te(R),o[22](null),oe=!1,we(ie)}}}function it(){const e=document.getElementsByClassName("maplibregl-canvas")[0].toDataURL("image/png");var l=document.createElement("a");l.download="map.png",l.href=e,l.dataset.downloadurl=["image/png",l.download,l.href].join(":"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function ct(o,e,l){let{data:s}=e,p,b,S,r,d,i,n="Cobenefit",h=!1,x="BNZ",k=he.map(c=>c.id),w="total",C="LAD",y="EPC",_;function A(){if(i.makeColorScale(!1),n=="SEF"&&be.includes(y)){const c=Ye("white","black");let E=Object.values(De[y]);const I=E.map((G,ne)=>c(ne/(E.length-1)));let z=Je().domain(E).range(I);i.setColorScale(z)}S=i.legend(F()),l(4,r.innerHTML="",r),r.append(S)}function F(){if(n=="SEF")return`${Ce.filter(c=>c.id==y)[0].label} (${tt(y)})`;if(n=="Cobenefit")return"Cobenefits (£ per capita)"}He(async()=>{let c;C=="LAD"?c=await re(qe(Array.from(k),"UK",w)):C=="LSOA"&&(c=await re(ke(Array.from(k),x,w))),c.forEach(E=>{E.value_per_capita=E.value_per_capita*1e6}),l(12,i=new Qe(c,C,b,"value_per_capita",!0,"Lookup_Value",!0)),i.initMap(),i.setTooltipCb(le),S=i.legend(F()),r.append(S)});const H=c=>{const E=c.currentTarget.value;E=="total"?l(15,k=he.map(I=>I.id)):l(15,k=[E])},te=c=>{const E=c.currentTarget.value;l(16,w=E)};function J(c,E){l(0,n=c.currentTarget.value)}const B=c=>{l(1,y=c.currentTarget.value)},W=c=>{i.removeLayers(),i.removeSources(),l(17,C=c.currentTarget.value),l(12,i.granularity=C,i),C=="LSOA"?l(12,i.border=!1,i):l(12,i.border=!0,i),l(13,h=!0)},le=c=>{if(n=="SEF")return be.includes(y)?`Mode value is ${De[y][c]}`:`Mean value is ${c.toFixed(2)}`;if(n=="Cobenefit")return`£${c.toFixed(2)} per capita.`};function V(c){fe[c?"unshift":"push"](()=>{b=c,l(3,b)})}function P(c){fe[c?"unshift":"push"](()=>{r=c,l(4,r)})}function j(c){fe[c?"unshift":"push"](()=>{d=c,l(5,d)})}function U(c){fe[c?"unshift":"push"](()=>{p=c,l(2,p)})}return o.$$set=c=>{"data"in c&&l(11,s=c.data)},o.$$.update=()=>{if(o.$$.dirty[0]&520195&&i?.loaded){if(n=="Cobenefit"){if(l(12,i.dataKey="value_per_capita",i),C=="LAD")l(18,_=re(qe(Array.from(k),"UK",w)));else if(C=="LSOA"){let c;k.length==11?c=[]:c=k,l(18,_=re(ke(c,x,w)))}}else l(0,n="SEF")&&(l(12,i.dataKey="val",i),C=="LAD"?be.includes(y)?l(18,_=re(We(y))):l(18,_=re(Xe(y))):C=="LSOA"&&l(18,_=re($e(y))));_.then(c=>{n=="Cobenefit"&&c.forEach(I=>{I.value_per_capita=I.value_per_capita*1e6});let E;n=="Cobenefit"?k.length==1?(E=JSON.parse(JSON.stringify(et(k[0]))),E.shift(),E=E.reverse()):E=["red","white","black"]:E=["white","black"],i.update(c,n,h,E),A(),l(13,h=!1)})}},[n,y,p,b,r,d,H,te,J,B,W,s,i,h,x,k,w,C,_,V,P,j,U]}class Ct extends je{constructor(e){super(),ze(this,e,ct,ot,Oe,{data:11},null,[-1,-1])}}export{Ct as component};
