import{s as U,a as S,r as x,g as w,i as C,f as A,v as Z,e as D,c as b,b as E,p as P,q as N,h as v,w as q,n as B,t as k,d as y,j as G}from"../chunks/scheduler.B9T0ItC_.js";import{S as H,i as K,c as V,b as Y,m as z,t as F,a as J,d as Q}from"../chunks/index.BVM93j1J.js";import{N as X,e as I}from"../chunks/NavigationBar.CRF45Iqq.js";import{b as $}from"../chunks/paths.BWl5fsg7.js";import{g as tt,c as et}from"../chunks/duckdb.BytYIbn2.js";import"../chunks/transform.Cxf8x_5z.js";import{c as M}from"../chunks/dsv.XhNTmijJ.js";function T(m,t,e){const n=m.slice();return n[10]=t[e],n}function W(m,t,e){const n=m.slice();return n[13]=t[e],n}function at(m){let t,e,n="List of Local Authorities across UK",d,c,r="Click on a local authority for detailed reports.",_,a=I(m[2]),l=[];for(let s=0;s<a.length;s+=1)l[s]=j(T(m,a,s));return{c(){t=D("main"),e=D("h1"),e.textContent=n,d=S(),c=D("p"),c.textContent=r,_=S();for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){t=b(s,"MAIN",{class:!0});var p=E(t);e=b(p,"H1",{"data-svelte-h":!0}),P(e)!=="svelte-1goi9te"&&(e.textContent=n),d=w(p),c=b(p,"P",{"data-svelte-h":!0}),P(c)!=="svelte-1x3ru64"&&(c.textContent=r),_=w(p);for(let o=0;o<l.length;o+=1)l[o].l(p);p.forEach(A),this.h()},h(){N(t,"class","svelte-gdt2b9")},m(s,p){C(s,t,p),v(t,e),v(t,d),v(t,c),v(t,_);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(t,null)},p(s,p){if(p&6){a=I(s[2]);let o;for(o=0;o<a.length;o+=1){const u=T(s,a,o);l[o]?l[o].p(u,p):(l[o]=j(u),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=a.length}},d(s){s&&A(t),q(l,s)}}}function lt(m){let t,e="Loading local authoritiesâ€¦";return{c(){t=D("p"),t.textContent=e},l(n){t=b(n,"P",{"data-svelte-h":!0}),P(t)!=="svelte-12l6vp8"&&(t.textContent=e)},m(n,d){C(n,t,d)},p:B,d(n){n&&A(t)}}}function R(m){let t,e=m[13].name+"",n,d;return{c(){t=D("a"),n=k(e),this.h()},l(c){t=b(c,"A",{class:!0,href:!0});var r=E(t);n=y(r,e),r.forEach(A),this.h()},h(){N(t,"class","lad-link svelte-gdt2b9"),N(t,"href",d=$+"/location?location="+m[13].code)},m(c,r){C(c,t,r),v(t,n)},p(c,r){r&2&&e!==(e=c[13].name+"")&&G(n,e),r&2&&d!==(d=$+"/location?location="+c[13].code)&&N(t,"href",d)},d(c){c&&A(t)}}}function j(m){let t,e,n=m[10]+"",d,c,r=m[1][m[10]].length+"",_,a,l,s,p,o=I(m[1][m[10]]),u=[];for(let h=0;h<o.length;h+=1)u[h]=R(W(m,o,h));return{c(){t=D("details"),e=D("summary"),d=k(n),c=k(" ("),_=k(r),a=k(")"),l=S(),s=D("div");for(let h=0;h<u.length;h+=1)u[h].c();p=S(),this.h()},l(h){t=b(h,"DETAILS",{class:!0});var g=E(t);e=b(g,"SUMMARY",{class:!0});var i=E(e);d=y(i,n),c=y(i," ("),_=y(i,r),a=y(i,")"),i.forEach(A),l=w(g),s=b(g,"DIV",{class:!0});var f=E(s);for(let L=0;L<u.length;L+=1)u[L].l(f);f.forEach(A),p=w(g),g.forEach(A),this.h()},h(){N(e,"class","svelte-gdt2b9"),N(s,"class","lad-grid svelte-gdt2b9"),N(t,"class","svelte-gdt2b9")},m(h,g){C(h,t,g),v(t,e),v(e,d),v(e,c),v(e,_),v(e,a),v(t,l),v(t,s);for(let i=0;i<u.length;i+=1)u[i]&&u[i].m(s,null);v(t,p)},p(h,g){if(g&2&&r!==(r=h[1][h[10]].length+"")&&G(_,r),g&6){o=I(h[1][h[10]]);let i;for(i=0;i<o.length;i+=1){const f=W(h,o,i);u[i]?u[i].p(f,g):(u[i]=R(f),u[i].c(),u[i].m(s,null))}for(;i<u.length;i+=1)u[i].d(1);u.length=o.length}},d(h){h&&A(t),q(u,h)}}}function nt(m){let t,e,n,d;t=new X({});function c(a,l){return a[0].length===0?lt:at}let r=c(m),_=r(m);return{c(){V(t.$$.fragment),e=S(),_.c(),n=x()},l(a){Y(t.$$.fragment,a),e=w(a),_.l(a),n=x()},m(a,l){z(t,a,l),C(a,e,l),_.m(a,l),C(a,n,l),d=!0},p(a,[l]){r===(r=c(a))&&_?_.p(a,l):(_.d(1),_=r(a),_&&(_.c(),_.m(n.parentNode,n)))},i(a){d||(F(t.$$.fragment,a),d=!0)},o(a){J(t.$$.fragment,a),d=!1},d(a){a&&(A(e),A(n)),Q(t,a),_.d(a)}}}function ot(m,t,e){const n=`${$}/LAD/Eng_Wales_LSOA_LADs.csv`,d=`${$}/LAD/NI_DZ_LAD.csv`,c=`${$}/LAD/Scotland_DZ_LA.csv`;let r={},_={},a=[],l={},s=["England","Wales","Northern Ireland","Scotland"];const p={NI:"Northern Ireland",England:"England",Wales:"Wales",Scotland:"Scotland"};async function o(){const u=await M(n);for(let f of u)r[f.LAD22CD]=f.LAD22NM;const h=await M(d);for(let f of h)r[f.LGD2014_code]=f.LGD2014_name;const g=await M(c);for(let f of g)r[f.LA_Code]=f.LA_Name;const i=await tt(et());for(let f of i){const L=p[f.Nation]||f.Nation;_[f.LAD]=L}e(0,a=Object.entries(r).map(([f,L])=>({code:f,name:L,nation:_[f]}))),e(1,l={});for(let f of s)e(1,l[f]=a.filter(L=>L.nation===f).sort((L,O)=>L.name.localeCompare(O.name)),l)}return Z(async()=>{await o()}),[a,l,s]}class mt extends H{constructor(t){super(),K(this,t,ot,nt,U,{})}}export{mt as component};
