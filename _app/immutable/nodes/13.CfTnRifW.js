import{s as yr,d as A,w as br,x as _r,a as xe,i as $t,b as c,z as ue,F as Cr,q as v,g as D,c as y,e as N,p as O,f as G,j as z,h as b,t as Z,v as wr,A as Mt}from"../chunks/B9XzmCUZ.js";import{S as Mr,i as Er,d as Ar,t as kr,a as Lr,m as xr,c as Dr,b as zr}from"../chunks/D6lOsQeQ.js";import{N as Br,e as On}from"../chunks/BRcnb727.js";import{n as Tr}from"../chunks/DRyxMU8n.js";import{ar as Nr,am as De,as as ir,a5 as dn,g as Te,G as cr,i as ur,a as fr,M as mn,H as gn,S as Sr,l as yn,n as bn,at as Vr,o as ze,au as pn,av as Ir,U as Be,aw as Pr,q as Hr,a8 as Fr,B as Rr,a9 as Or,ax as hr,ay as jr,az as Ur,ah as dr,aA as Wr,ab as pr,N as Yr,a4 as qr,aB as Gr,X as ge,aC as vr,Y as Zr,aD as Xr,V as it,a2 as gt,ad as yt,_ as jn,ac as Kr,aE as Jr,W as Un}from"../chunks/BZW538Bk.js";import{M as Qr,a as $r}from"../chunks/DT3N6WES.js";import{f as ta,S as vn,C as Wn,r as ea,A as Qt,M as ct,h as na,a as ra,T as cn,V as aa,c as sa,e as Yn,i as oa}from"../chunks/RqbpEnOX.js";import{g as bt,p as qn,q as la,r as Gn,d as ia,s as Zn,t as ca,u as ua}from"../chunks/BzXIH_FN.js";import{A as fa,a as Xt,b as Xn}from"../chunks/DKkW8n3a.js";import{t as ha,e as mr,m as da,a as Kn,s as pa,f as va,b as un,d as Jn}from"../chunks/CVYaCuvD.js";import{a as ma,b as fn,d as ga}from"../chunks/Dd4jVbTU.js";const ya=ba(_a);function ba(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:a,width:s,height:l}=e;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((l=Math.floor(l!==void 0?l:a.length/s))>=0))throw new RangeError("invalid height");if(!s||!l||!n&&!r)return e;const u=n&&t(n),f=r&&t(r),o=a.slice();return u&&f?(fe(u,o,a,s,l),fe(u,a,o,s,l),fe(u,o,a,s,l),he(f,a,o,s,l),he(f,o,a,s,l),he(f,a,o,s,l)):u?(fe(u,a,o,s,l),fe(u,o,a,s,l),fe(u,a,o,s,l)):f&&(he(f,a,o,s,l),he(f,o,a,s,l),he(f,a,o,s,l)),e}}function fe(t,e,n,r,a){for(let s=0,l=r*a;s<l;)t(e,n,s,s+=r,1)}function he(t,e,n,r,a){for(let s=0,l=r*a;s<r;++s)t(e,n,s,s+l,r)}function _a(t){const e=Math.floor(t);if(e===t)return Ca(t);const n=t-e,r=2*t+1;return(a,s,l,u,f)=>{if(!((u-=f)>=l))return;let o=e*s[l];const i=f*e,m=i+f;for(let h=l,g=l+i;h<g;h+=f)o+=s[Math.min(u,h)];for(let h=l,g=u;h<=g;h+=f)o+=s[Math.min(u,h+i)],a[h]=(o+n*(s[Math.max(l,h-m)]+s[Math.min(u,h+m)]))/r,o-=s[Math.max(l,h-i)]}}function Ca(t){const e=2*t+1;return(n,r,a,s,l)=>{if(!((s-=l)>=a))return;let u=t*r[a];const f=l*t;for(let o=a,i=a+f;o<i;o+=l)u+=r[Math.min(s,o)];for(let o=a,i=s;o<=i;o+=l)u+=r[Math.min(s,o+f)],n[o]=u/e,u-=r[Math.max(a,o-f)]}}function wa(t,e,n){let r;for(;;){const a=Nr(t,e,n);if(a===r||a===0||!isFinite(a))return[t,e];a>0?(t=Math.floor(t/a)*a,e=Math.ceil(e/a)*a):a<0&&(t=Math.ceil(t*a)/a,e=Math.floor(e*a)/a),r=a}}var Ma=Array.prototype,gr=Ma.slice;function Ea(t,e){return t-e}function Aa(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}const Ht=t=>()=>t;function ka(t,e){for(var n=-1,r=e.length,a;++n<r;)if(a=La(t,e[n]))return a;return 0}function La(t,e){for(var n=e[0],r=e[1],a=-1,s=0,l=t.length,u=l-1;s<l;u=s++){var f=t[s],o=f[0],i=f[1],m=t[u],h=m[0],g=m[1];if(xa(f,m,e))return 0;i>r!=g>r&&n<(h-o)*(r-i)/(g-i)+o&&(a=-a)}return a}function xa(t,e,n){var r;return Da(t,e,n)&&za(t[r=+(t[0]===e[0])],n[r],e[r])}function Da(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function za(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function Ba(){}var Et=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Qn(){var t=1,e=1,n=ha,r=f;function a(o){var i=n(o);if(Array.isArray(i))i=i.slice().sort(Ea);else{const m=De(o,Ta);for(i=ir(...wa(m[0],m[1],i),i);i[i.length-1]>=m[1];)i.pop();for(;i[1]<m[0];)i.shift()}return i.map(m=>s(o,m))}function s(o,i){const m=i==null?NaN:+i;if(isNaN(m))throw new Error(`invalid value: ${i}`);var h=[],g=[];return l(o,m,function(C){r(C,o,m),Aa(C)>0?h.push([C]):g.push(C)}),g.forEach(function(C){for(var k=0,L=h.length,_;k<L;++k)if(ka((_=h[k])[0],C)!==-1){_.push(C);return}}),{type:"MultiPolygon",value:i,coordinates:h}}function l(o,i,m){var h=new Array,g=new Array,C,k,L,_,p,E;for(C=k=-1,_=Kt(o[0],i),Et[_<<1].forEach(w);++C<t-1;)L=_,_=Kt(o[C+1],i),Et[L|_<<1].forEach(w);for(Et[_<<0].forEach(w);++k<e-1;){for(C=-1,_=Kt(o[k*t+t],i),p=Kt(o[k*t],i),Et[_<<1|p<<2].forEach(w);++C<t-1;)L=_,_=Kt(o[k*t+t+C+1],i),E=p,p=Kt(o[k*t+C+1],i),Et[L|_<<1|p<<2|E<<3].forEach(w);Et[_|p<<3].forEach(w)}for(C=-1,p=o[k*t]>=i,Et[p<<2].forEach(w);++C<t-1;)E=p,p=Kt(o[k*t+C+1],i),Et[p<<2|E<<3].forEach(w);Et[p<<3].forEach(w);function w(T){var x=[T[0][0]+C,T[0][1]+k],I=[T[1][0]+C,T[1][1]+k],F=u(x),S=u(I),M,V;(M=g[F])?(V=h[S])?(delete g[M.end],delete h[V.start],M===V?(M.ring.push(I),m(M.ring)):h[M.start]=g[V.end]={start:M.start,end:V.end,ring:M.ring.concat(V.ring)}):(delete g[M.end],M.ring.push(I),g[M.end=S]=M):(M=h[S])?(V=g[F])?(delete h[M.start],delete g[V.end],M===V?(M.ring.push(I),m(M.ring)):h[V.start]=g[M.end]={start:V.start,end:M.end,ring:V.ring.concat(M.ring)}):(delete h[M.start],M.ring.unshift(x),h[M.start=F]=M):h[F]=g[S]={start:F,end:S,ring:[x,I]}}}function u(o){return o[0]*2+o[1]*(t+1)*4}function f(o,i,m){o.forEach(function(h){var g=h[0],C=h[1],k=g|0,L=C|0,_=hn(i[L*t+k]);g>0&&g<t&&k===g&&(h[0]=$n(g,hn(i[L*t+k-1]),_,m)),C>0&&C<e&&L===C&&(h[1]=$n(C,hn(i[(L-1)*t+k]),_,m))})}return a.contour=s,a.size=function(o){if(!arguments.length)return[t,e];var i=Math.floor(o[0]),m=Math.floor(o[1]);if(!(i>=0&&m>=0))throw new Error("invalid size");return t=i,e=m,a},a.thresholds=function(o){return arguments.length?(n=typeof o=="function"?o:Array.isArray(o)?Ht(gr.call(o)):Ht(o),a):n},a.smooth=function(o){return arguments.length?(r=o?f:Ba,a):r===f},a}function Ta(t){return isFinite(t)?t:NaN}function Kt(t,e){return t==null?!1:+t>=e}function hn(t){return t==null||isNaN(t=+t)?-1/0:t}function $n(t,e,n,r){const a=r-e,s=n-e,l=isFinite(a)||isFinite(s)?a/s:Math.sign(a)/Math.sign(s);return isNaN(l)?t:t+l-.5}function Na(t){return t[0]}function Sa(t){return t[1]}function Va(){return 1}function Ia(){var t=Na,e=Sa,n=Va,r=960,a=500,s=20,l=2,u=s*3,f=r+u*2>>l,o=a+u*2>>l,i=Ht(20);function m(p){var E=new Float32Array(f*o),w=Math.pow(2,-l),T=-1;for(const B of p){var x=(t(B,++T,p)+u)*w,I=(e(B,T,p)+u)*w,F=+n(B,T,p);if(F&&x>=0&&x<f&&I>=0&&I<o){var S=Math.floor(x),M=Math.floor(I),V=x-S-.5,X=I-M-.5;E[S+M*f]+=(1-V)*(1-X)*F,E[S+1+M*f]+=V*(1-X)*F,E[S+1+(M+1)*f]+=V*X*F,E[S+(M+1)*f]+=(1-V)*X*F}}return ya({data:E,width:f,height:o},s*w),E}function h(p){var E=m(p),w=i(E),T=Math.pow(2,2*l);return Array.isArray(w)||(w=ir(Number.MIN_VALUE,dn(E)/T,w)),Qn().size([f,o]).thresholds(w.map(x=>x*T))(E).map((x,I)=>(x.value=+w[I],g(x)))}h.contours=function(p){var E=m(p),w=Qn().size([f,o]),T=Math.pow(2,2*l),x=I=>{I=+I;var F=g(w.contour(E,I*T));return F.value=I,F};return Object.defineProperty(x,"max",{get:()=>dn(E)/T}),x};function g(p){return p.coordinates.forEach(C),p}function C(p){p.forEach(k)}function k(p){p.forEach(L)}function L(p){p[0]=p[0]*Math.pow(2,l)-u,p[1]=p[1]*Math.pow(2,l)-u}function _(){return u=s*3,f=r+u*2>>l,o=a+u*2>>l,h}return h.x=function(p){return arguments.length?(t=typeof p=="function"?p:Ht(+p),h):t},h.y=function(p){return arguments.length?(e=typeof p=="function"?p:Ht(+p),h):e},h.weight=function(p){return arguments.length?(n=typeof p=="function"?p:Ht(+p),h):n},h.size=function(p){if(!arguments.length)return[r,a];var E=+p[0],w=+p[1];if(!(E>=0&&w>=0))throw new Error("invalid size");return r=E,a=w,_()},h.cellSize=function(p){if(!arguments.length)return 1<<l;if(!((p=+p)>=1))throw new Error("invalid cell size");return l=Math.floor(Math.log(p)/Math.LN2),_()},h.thresholds=function(p){return arguments.length?(i=typeof p=="function"?p:Array.isArray(p)?Ht(gr.call(p)):Ht(p),h):i},h.bandwidth=function(p){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((p=+p)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*p*p+1)-1)/2,_()},h}const Pa={ariaLabel:"cell"};class Ha extends fa{constructor(e,{x:n,y:r,...a}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},a,Pa)}_transform(e,n){e.call(Te,n,{},0,0)}}function tr(t,{x:e,y:n,...r}={}){return[e,n]=cr(e,n),new Ha(t,{...r,x:e,y:n})}const Fa={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Ra extends mn{constructor(e,n={}){const{x:r,y:a,z:s,curve:l,tension:u}=n;super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y"},z:{value:gn(n),optional:!0}},n,Fa),this.z=s,this.curve=da(l,u),Sr(this,n)}filter(e){return e}project(e,n,r){this.curve!==Kn&&super.project(e,n,r)}render(e,n,r,a,s){const{x:l,y:u}=r,{curve:f}=this;return yn("svg:g",s).call(bn,this,a,s).call(Te,this,n).call(o=>o.selectAll().data(Vr(e,[l,u],this,r)).enter().append("path").call(ze,this).call(pn,this,r).call(Ir,this,r,s).attr("d",f===Kn&&s.projection?Oa(s.path(),l,u):pa().curve(f).defined(i=>i>=0).x(i=>l[i]).y(i=>u[i]))).node()}}function Oa(t,e,n){return e=Be(e),n=Be(n),r=>{let a=[];const s=[a];for(const l of r)l===-1?(a=[],s.push(a)):a.push([e[l],n[l]]);return t({type:"MultiLineString",coordinates:s})}}function ja(t,{x:e=fr,y:n=ur,...r}={}){return new Ra(t,mr({...r,x:e,y:n}))}const Ua={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Wa extends mn{constructor(e,{x:n,y:r,z:a,weight:s,fill:l,stroke:u,...f}={}){const o=er(l)&&(l="currentColor",!0),i=er(u)&&(u="currentColor",!0);super(e,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:gn({z:a,fill:l,stroke:u}),optional:!0},weight:{value:s,optional:!0}},Ga({...f,fill:l,stroke:u},o,i),Ua),o&&(this.fill=void 0),i&&(this.stroke=void 0),this.z=a}filter(e){return e}render(e,n,r,a,s){const{contours:l}=r,u=Pr();return yn("svg:g",s).call(bn,this,a,s).call(Te,this,{}).call(f=>f.selectAll().data(e).enter().append("path").call(ze,this).call(Hr,this,r).attr("d",o=>u(l[o]))).node()}}function Ya(t,{x:e,y:n,...r}={}){return[e,n]=cr(e,n),new Wa(t,{...r,x:e,y:n})}const qa=new Set(["x","y","z","weight"]);function Ga(t,e,n){let{bandwidth:a,thresholds:s}=t;return a=a===void 0?20:+a,s=s===void 0?20:typeof s?.[Symbol.iterator]=="function"?Be(s):+s,Fr(t,function(l,u,f,o,i,m){const h=f.weight?Be(f.weight.value):null,g=f.z?.value,{z:C}=this,[k,L]=Rr(this,i),{width:_,height:p}=i,{x:E,y:w}=Or(f,o,m),T=Object.fromEntries(Object.entries(f).filter(([B])=>!qa.has(B)).map(([B,K])=>[B,{...K,value:[]}])),x=e&&[],I=n&&[],F=Ia().x(E?B=>E[B]:k).y(w?B=>w[B]:L).weight(h?B=>h[B]:1).size([_,p]).bandwidth(a),S=[];for(const B of u){const K=[];S.push(K);for(const W of g?hr(B,g,C):[B]){const et=F.contours(W);K.push([W,et])}}let M=s;if(!(M instanceof jr)){let B=0;for(const K of S)for(const[,W]of K){const et=W.max;et>B&&(B=et)}M=Float64Array.from({length:s-1},(K,W)=>B*100*(W+1)/s)}const V=[],X=[];for(const B of S){const K=[];V.push(K);for(const[W,et]of B)for(const Q of M){K.push(X.length),X.push(et(Q/100)),x&&x.push(Q),I&&I.push(Q);for(const ft in T)T[ft].value.push(f[ft].value[W[0]])}}return x&&x.push(0),I&&I.push(0),{data:l,facets:V,channels:{...T,...x&&{fill:{value:x,scale:"color"}},...I&&{stroke:{value:I,scale:"color"}},contours:{value:X}}}})}function er(t){return/^density$/i.test(t)}function Za(t,e,n){var r=1e-8,a=e-1,s=n-1,l=0,u,f,o,i,m,h,g,C;if(t<=0)return 0;if(t>=1)return 1;for(u=Math.log(e/(e+n)),f=Math.log(n/(e+n)),o=Math.exp(e*u)/e,i=Math.exp(n*f)/n,g=o+i,t<o/g?h=Math.pow(e*g*t,1/e):h=1-Math.pow(n*g*(1-t),1/n),C=-de(e)-de(n)+de(e+n);l<10;l++){if(h===0||h===1)return h;if(m=Xa(h,e,n)-t,o=Math.exp(a*Math.log(h)+s*Math.log(1-h)+C),i=m/o,h-=o=i/(1-.5*Math.min(1,i*(a/h-s/(1-h)))),h<=0&&(h=.5*(h+o)),h>=1&&(h=.5*(h+o+1)),Math.abs(o)<r*h&&l>0)break}return h}function Xa(t,e,n){var r=t===0||t===1?0:Math.exp(de(e+n)-de(e)-de(n)+e*Math.log(t)+n*Math.log(1-t));return t<0||t>1?!1:t<(e+1)/(e+n+2)?r*nr(t,e,n)/e:1-r*nr(1-t,n,e)/n}function nr(t,e,n){var r=1e-30,a=1,s=e+n,l=e+1,u=e-1,f=1,o=1-s*t/l,i,m,h,g;for(Math.abs(o)<r&&(o=r),o=1/o,g=o;a<=100&&(i=2*a,m=a*(n-a)*t/((u+i)*(e+i)),o=1+m*o,Math.abs(o)<r&&(o=r),f=1+m/f,Math.abs(f)<r&&(f=r),o=1/o,g*=o*f,m=-(e+a)*(s+a)*t/((e+i)*(l+i)),o=1+m*o,Math.abs(o)<r&&(o=r),f=1+m/f,Math.abs(f)<r&&(f=r),o=1/o,h=o*f,g*=h,!(Math.abs(h-1)<3e-7));a++);return g}function de(t){var e=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,a,s,l;for(l=(s=a=t)+5.5,l-=(a+.5)*Math.log(l);e<6;e++)r+=n[e]/++s;return Math.log(2.506628274631*r/a)-l}function Ka(t,e){var n=Za(2*Math.min(t,1-t),.5*e,.5);return n=Math.sqrt(e*(1-n)/n),t>.5?n:-n}const Ja={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Qa extends mn{constructor(e,n={}){const{x:r,y:a,z:s,ci:l=.95,precision:u=4}=n;if(super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y"},z:{value:gn(n),optional:!0}},n,Ja),this.z=s,this.ci=+l,this.precision=+u,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${l}`);if(!(this.precision>0))throw new Error(`invalid precision: ${u}`)}render(e,n,r,a,s){const{x:l,y:u,z:f}=r,{ci:o}=this;return yn("svg:g",s).call(bn,this,a,s).call(Te,this,n).call(i=>i.selectAll().data(f?hr(e,f,this.z):[e]).enter().call(m=>m.append("path").attr("fill","none").call(ze,this).call(pn,this,{...r,fill:null,fillOpacity:null}).attr("d",h=>this._renderLine(h,l,u)).call(o&&!Wr(this.fill)?h=>h.select($a).attr("stroke","none").call(ze,this).call(pn,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",g=>this._renderBand(g,l,u)):()=>{}))).node()}}function $a(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(Tr.svg,"path"),this)}class ts extends Qa{constructor(e,n){super(e,n)}_renderBand(e,n,r){const{ci:a,precision:s}=this,[l,u]=De(e,i=>n[i]),f=rr(e,n,r),o=ns(e,n,r,(1-a)/2,f);return va().x(i=>i).y0(i=>o(i,-1)).y1(i=>o(i,1))(dr(l,u-s/2,s).concat(u))}_renderLine(e,n,r){const[a,s]=De(e,u=>n[u]),l=rr(e,n,r);return`M${a},${l(a)}L${s},${l(s)}`}}function es(t,{x:e=fr,y:n=ur,stroke:r,fill:a=Ur(r)?"currentColor":r,...s}={}){return new ts(t,mr({...s,x:e,y:n,fill:a,stroke:r}))}function rr(t,e,n){let r=0,a=0,s=0,l=0;for(const i of t){const m=e[i],h=n[i];r+=m,a+=h,s+=m*h,l+=m*m}const u=t.length,f=(u*s-r*a)/(u*l-r*r),o=(a-f*r)/u;return i=>f*i+o}function ns(t,e,n,r,a){const s=pr(t,i=>e[i])/t.length;let l=0,u=0;for(const i of t)l+=(e[i]-s)**2,u+=(n[i]-a(e[i]))**2;const f=Math.sqrt(u/(t.length-2)),o=Ka(r,t.length-2);return(i,m)=>{const h=a(i),g=f*Math.sqrt(1/t.length+(i-s)**2/l);return h+m*o*g}}function ar(t,e){return arguments.length===1&&({basis:t,...e}=t),ma(rs(t),e)}function rs(t){if(t===void 0)return sr;if(typeof t=="function")return Ne(Yr(t));if(/^p\d{2}$/i.test(t))return pe(Xr(t));switch(`${t}`.toLowerCase()){case"deviation":return os;case"first":return sr;case"last":return ss;case"max":return ls;case"mean":return is;case"median":return cs;case"min":return us;case"sum":return fs;case"extent":return as}throw new Error(`invalid basis: ${t}`)}function Ne(t){return{mapIndex(e,n,r){const a=+t(e,n);for(const s of e)r[s]=n[s]===null?NaN:n[s]/a}}}function pe(t){return Ne((e,n)=>t(e,r=>n[r]))}const as={mapIndex(t,e,n){const[r,a]=De(t,l=>e[l]),s=a-r;for(const l of t)n[l]=e[l]===null?NaN:(e[l]-r)/s}},sr=Ne((t,e)=>{for(let n=0;n<t.length;++n){const r=e[t[n]];if(vr(r))return r}}),ss=Ne((t,e)=>{for(let n=t.length-1;n>=0;--n){const r=e[t[n]];if(vr(r))return r}}),os={mapIndex(t,e,n){const r=ge(t,s=>e[s]),a=Zr(t,s=>e[s]);for(const s of t)n[s]=e[s]===null?NaN:a?(e[s]-r)/a:0}},ls=pe(dn),is=pe(ge),cs=pe(Gr),us=pe(qr),fs=pe(pr);function or(t,e,n){const r=t.slice();return r[46]=e[n],r[47]=e,r[48]=n,r}function hs(t){let e,n,r,a,s,l,u,f,o=`Histogram shows the number of data zones distributed across
                                    different household social economic factors.`,i,m,h="",g=t[46],C,k,L,_,p,E,w,T,x,I=`Density plot refers to UK distribution while the
                                        scattered points refer to data zones in the local authority.`,F,S,M="",V,X,B,K="";const W=()=>t[25](m,g),et=()=>t[25](null,g),Q=()=>t[26](S,g),ft=()=>t[26](null,g),At=()=>t[27](B,g),kt=()=>t[27](null,g);return{c(){e=b("div"),n=b("h3"),r=Z("Data Zones Distribution (vs. "),a=b("span"),s=Z(t[8]),l=Z(" average)"),u=z(),f=b("p"),f.textContent=o,i=z(),m=b("div"),m.innerHTML=h,C=z(),k=b("div"),L=b("div"),_=b("h3"),p=Z("Co-benefits Recieved by Data Zones across "),E=Z(t[46]),w=Z(`
                                        Values`),T=z(),x=b("p"),x.textContent=I,F=z(),S=b("div"),S.innerHTML=M,V=z(),X=b("div"),B=b("div"),B.innerHTML=K,this.h()},l(Y){e=y(Y,"DIV",{class:!0});var J=N(e);n=y(J,"H3",{class:!0});var nt=N(n);r=G(nt,"Data Zones Distribution (vs. "),a=y(nt,"SPAN",{class:!0});var Ft=N(a);s=G(Ft,t[8]),Ft.forEach(A),l=G(nt," average)"),nt.forEach(A),u=D(J),f=y(J,"P",{class:!0,"data-svelte-h":!0}),O(f)!=="svelte-xcsopb"&&(f.textContent=o),i=D(J),m=y(J,"DIV",{class:!0,"data-svelte-h":!0}),O(m)!=="svelte-1gvlz6w"&&(m.innerHTML=h),J.forEach(A),C=D(Y),k=y(Y,"DIV",{class:!0});var ht=N(k);L=y(ht,"DIV",{});var tt=N(L);_=y(tt,"H3",{class:!0});var d=N(_);p=G(d,"Co-benefits Recieved by Data Zones across "),E=G(d,t[46]),w=G(d,`
                                        Values`),d.forEach(A),T=D(tt),x=y(tt,"P",{class:!0,"data-svelte-h":!0}),O(x)!=="svelte-18bgpzu"&&(x.textContent=I),F=D(tt),S=y(tt,"DIV",{class:!0,"data-svelte-h":!0}),O(S)!=="svelte-aesnqn"&&(S.innerHTML=M),tt.forEach(A),V=D(ht),X=y(ht,"DIV",{});var P=N(X);B=y(P,"DIV",{class:!0,"data-svelte-h":!0}),O(B)!=="svelte-xsgztl"&&(B.innerHTML=K),P.forEach(A),ht.forEach(A),this.h()},h(){v(a,"class","nation-label svelte-i61d1c"),v(n,"class","component-title"),v(f,"class","description short"),v(m,"class","plot"),v(e,"class","component"),v(_,"class","component-title"),v(x,"class","description short"),v(S,"class","plot"),v(B,"class","plot"),v(k,"class","component")},m(Y,J){$t(Y,e,J),c(e,n),c(n,r),c(n,a),c(a,s),c(n,l),c(e,u),c(e,f),c(e,i),c(e,m),W(),$t(Y,C,J),$t(Y,k,J),c(k,L),c(L,_),c(_,p),c(_,E),c(_,w),c(L,T),c(L,x),c(L,F),c(L,S),Q(),c(k,V),c(k,X),c(X,B),At()},p(Y,J){t=Y,J[0]&256&&xe(s,t[8]),g!==t[46]&&(et(),g=t[46],W()),g!==t[46]&&(ft(),g=t[46],Q()),g!==t[46]&&(kt(),g=t[46],At())},d(Y){Y&&(A(e),A(C),A(k)),et(),ft(),kt()}}}function ds(t){let e,n,r="",a=t[46];const s=()=>t[24](n,a),l=()=>t[24](null,a);return{c(){e=b("div"),n=b("div"),n.innerHTML=r,this.h()},l(u){e=y(u,"DIV",{class:!0});var f=N(e);n=y(f,"DIV",{class:!0,"data-svelte-h":!0}),O(n)!=="svelte-1shkadq"&&(n.innerHTML=r),f.forEach(A),this.h()},h(){v(n,"class","plot"),v(e,"class","component")},m(u,f){$t(u,e,f),c(e,n),s()},p(u,f){t=u,a!==t[46]&&(l(),a=t[46],s())},d(u){u&&A(e),l()}}}function lr(t){let e,n,r,a,s,l;function u(i,m){return i[7]?ds:hs}let f=u(t),o=f(t);return{c(){e=b("div"),n=b("h2"),r=Z(t[46]),a=z(),s=b("div"),o.c(),l=z(),this.h()},l(i){e=y(i,"DIV",{});var m=N(e);n=y(m,"H2",{});var h=N(n);r=G(h,t[46]),h.forEach(A),a=D(m),s=y(m,"DIV",{class:!0});var g=N(s);o.l(g),g.forEach(A),l=D(m),m.forEach(A),this.h()},h(){v(s,"class","row")},m(i,m){$t(i,e,m),c(e,n),c(n,r),c(e,a),c(e,s),o.m(s,null),c(e,l)},p(i,m){f===(f=u(i))&&o?o.p(i,m):(o.d(1),o=f(i),o&&(o.c(),o.m(s,null)))},d(i){i&&A(e),o.d()}}}function ps(t){let e,n,r,a,s,l,u,f="Data Report",o,i,m=t[11][t[10]]+"",h,g,C,k=`Explore how this local authority will benefit from achieving Net Zero and general factors
            of their households.`,L,_,p,E,w,T,x="UK",I,F,S,M,V,X="England",B,K,W,et,Q,ft="Wales",At,kt,Y,J,nt,Ft="Scotland",ht,tt,d,P,Lt="Northern Ireland",dt,U,_t,rt=`<p class="section-subtitle">Overview</p> <h2 class="section-title">How much co-benefit values would this area recieve?</h2> <p class="description">We calculate and model 11 types of co-benefits across five different pathyways
                suggested by Climate Change Committee in the Sixth Carbon Budget from 2025-2050 on the level of data
                zones across UK.</p>`,st,ot,lt,xt,Se,te,ye,Ve,Ie,Ct,Pe,_n=t[11][t[10]]+"",He,Fe,ee,be,Re,Dt,Cn="",Oe,pt,Rt,wn=t[11][t[10]]+"",je,Ue,We,Ot,Mn="Scroll for zooming in and out.",Ye,wt,En="",qe,vt,jt,An=`<p class="section-subtitle">Temporal Trends</p> <h2 class="section-title">How co-benefits change over time?</h2> <p class="description">Detailed breakdown of temporal trends for total co-benefits, types of co-benefits,
                and five pathways.</p>`,Ge,zt,Bt,Ze,ne,_e,Xe,Ke,re,Tt,kn="",Je,Nt,Ut,Ln=`11 Types of Co-benefits Distribution Following Balance Pathway from
                2025-2050`,Qe,ae,se,St,xn="",$e,Vt,at,Wt,Dn="Households",tn,Yt,zn="Social Economic Factors of Households",en,qt,Bn=`We describe the distribution of household economic factors aggregated on the data
                zone level and the different level of co-benefits recieved by those data zones.`,nn,Gt,rn,It,Tn="Aggregate Plots",an,Pt,Zt,sn,Nn;e=new Br({});let oe=On(vn),$=[];for(let H=0;H<oe.length;H+=1)$[H]=lr(or(t,oe,H));return{c(){zr(e.$$.fragment),n=z(),r=b("div"),a=b("div"),s=z(),l=b("div"),u=b("p"),u.textContent=f,o=z(),i=b("h1"),h=Z(m),g=z(),C=b("p"),C.textContent=k,L=z(),_=b("div"),p=Z(`Compare the Local District Area with average of:
            `),E=b("input"),w=z(),T=b("label"),T.textContent=x,I=b("br"),F=z(),S=b("input"),M=z(),V=b("label"),V.textContent=X,B=b("br"),K=z(),W=b("input"),et=z(),Q=b("label"),Q.textContent=ft,At=b("br"),kt=z(),Y=b("input"),J=z(),nt=b("label"),nt.textContent=Ft,ht=z(),tt=b("input"),d=z(),P=b("label"),P.textContent=Lt,dt=z(),U=b("div"),_t=b("div"),_t.innerHTML=rt,st=z(),ot=b("div"),lt=b("div"),xt=b("h3"),Se=Z("11 Types of Co-Benefits Values (vs. "),te=b("span"),ye=Z(t[8]),Ve=Z(" Average)"),Ie=z(),Ct=b("p"),Pe=Z("Co-benefits values in "),He=Z(_n),Fe=Z(` verus average value across all local
                    authorities in `),ee=b("span"),be=Z(t[8]),Re=z(),Dt=b("div"),Dt.innerHTML=Cn,Oe=z(),pt=b("div"),Rt=b("h3"),je=Z(wn),Ue=Z(" on UK Map"),We=z(),Ot=b("p"),Ot.textContent=Mn,Ye=z(),wt=b("div"),wt.innerHTML=En,qe=z(),vt=b("div"),jt=b("div"),jt.innerHTML=An,Ge=z(),zt=b("div"),Bt=b("h3"),Ze=Z("Total Co-benefits Distribution from 2025-2050 (vs. "),ne=b("span"),_e=Z(t[8]),Xe=Z(" Average)"),Ke=z(),re=b("div"),Tt=b("div"),Tt.innerHTML=kn,Je=z(),Nt=b("div"),Ut=b("h3"),Ut.textContent=Ln,Qe=z(),ae=b("div"),se=b("div"),St=b("div"),St.innerHTML=xn,$e=z(),Vt=b("div"),at=b("div"),Wt=b("p"),Wt.textContent=Dn,tn=z(),Yt=b("h2"),Yt.textContent=zn,en=z(),qt=b("p"),qt.textContent=Bn,nn=z(),Gt=b("input"),rn=z(),It=b("label"),It.textContent=Tn,an=z(),Pt=b("div");for(let H=0;H<$.length;H+=1)$[H].c();this.h()},l(H){Dr(e.$$.fragment,H),n=D(H),r=y(H,"DIV",{class:!0});var q=N(r);a=y(q,"DIV",{style:!0}),N(a).forEach(A),s=D(q),l=y(q,"DIV",{class:!0});var R=N(l);u=y(R,"P",{class:!0,"data-svelte-h":!0}),O(u)!=="svelte-1gxb8h1"&&(u.textContent=f),o=D(R),i=y(R,"H1",{class:!0});var ve=N(i);h=G(ve,m),ve.forEach(A),g=D(R),C=y(R,"P",{class:!0,"data-svelte-h":!0}),O(C)!=="svelte-g7xah4"&&(C.textContent=k),L=D(R),_=y(R,"DIV",{class:!0});var j=N(_);p=G(j,`Compare the Local District Area with average of:
            `),E=y(j,"INPUT",{type:!0,name:!0}),w=D(j),T=y(j,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(T)!=="svelte-1yhxhao"&&(T.textContent=x),I=y(j,"BR",{}),F=D(j),S=y(j,"INPUT",{type:!0,name:!0}),M=D(j),V=y(j,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(V)!=="svelte-11zyrfp"&&(V.textContent=X),B=y(j,"BR",{}),K=D(j),W=y(j,"INPUT",{type:!0,name:!0}),et=D(j),Q=y(j,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(Q)!=="svelte-18hrmu4"&&(Q.textContent=ft),At=y(j,"BR",{}),kt=D(j),Y=y(j,"INPUT",{type:!0,name:!0}),J=D(j),nt=y(j,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(nt)!=="svelte-16xf1ji"&&(nt.textContent=Ft),ht=D(j),tt=y(j,"INPUT",{type:!0,name:!0}),d=D(j),P=y(j,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(P)!=="svelte-g19yfx"&&(P.textContent=Lt),j.forEach(A),R.forEach(A),dt=D(q),U=y(q,"DIV",{class:!0});var Ce=N(U);_t=y(Ce,"DIV",{class:!0,"data-svelte-h":!0}),O(_t)!=="svelte-ppwlk3"&&(_t.innerHTML=rt),st=D(Ce),ot=y(Ce,"DIV",{id:!0,class:!0});var we=N(ot);lt=y(we,"DIV",{class:!0});var le=N(lt);xt=y(le,"H3",{class:!0});var Me=N(xt);Se=G(Me,"11 Types of Co-Benefits Values (vs. "),te=y(Me,"SPAN",{class:!0});var Sn=N(te);ye=G(Sn,t[8]),Sn.forEach(A),Ve=G(Me," Average)"),Me.forEach(A),Ie=D(le),Ct=y(le,"P",{class:!0});var me=N(Ct);Pe=G(me,"Co-benefits values in "),He=G(me,_n),Fe=G(me,` verus average value across all local
                    authorities in `),ee=y(me,"SPAN",{class:!0});var Vn=N(ee);be=G(Vn,t[8]),Vn.forEach(A),me.forEach(A),Re=D(le),Dt=y(le,"DIV",{class:!0,"data-svelte-h":!0}),O(Dt)!=="svelte-1gmwtaj"&&(Dt.innerHTML=Cn),le.forEach(A),Oe=D(we),pt=y(we,"DIV",{class:!0});var ie=N(pt);Rt=y(ie,"H3",{class:!0});var on=N(Rt);je=G(on,wn),Ue=G(on," on UK Map"),on.forEach(A),We=D(ie),Ot=y(ie,"P",{class:!0,"data-svelte-h":!0}),O(Ot)!=="svelte-1ask2se"&&(Ot.textContent=Mn),Ye=D(ie),wt=y(ie,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),O(wt)!=="svelte-13ehpmu"&&(wt.innerHTML=En),ie.forEach(A),we.forEach(A),Ce.forEach(A),qe=D(q),vt=y(q,"DIV",{class:!0});var ce=N(vt);jt=y(ce,"DIV",{class:!0,"data-svelte-h":!0}),O(jt)!=="svelte-a3uzt2"&&(jt.innerHTML=An),Ge=D(ce),zt=y(ce,"DIV",{class:!0});var Ee=N(zt);Bt=y(Ee,"H3",{class:!0});var Ae=N(Bt);Ze=G(Ae,"Total Co-benefits Distribution from 2025-2050 (vs. "),ne=y(Ae,"SPAN",{class:!0});var In=N(ne);_e=G(In,t[8]),In.forEach(A),Xe=G(Ae," Average)"),Ae.forEach(A),Ke=D(Ee),re=y(Ee,"DIV",{class:!0});var Pn=N(re);Tt=y(Pn,"DIV",{class:!0,"data-svelte-h":!0}),O(Tt)!=="svelte-vuq0y7"&&(Tt.innerHTML=kn),Pn.forEach(A),Ee.forEach(A),Je=D(ce),Nt=y(ce,"DIV",{class:!0});var ke=N(Nt);Ut=y(ke,"H3",{class:!0,"data-svelte-h":!0}),O(Ut)!=="svelte-199w57s"&&(Ut.textContent=Ln),Qe=D(ke),ae=y(ke,"DIV",{class:!0});var Hn=N(ae);se=y(Hn,"DIV",{class:!0});var Fn=N(se);St=y(Fn,"DIV",{class:!0,"data-svelte-h":!0}),O(St)!=="svelte-18dxhf7"&&(St.innerHTML=xn),Fn.forEach(A),Hn.forEach(A),ke.forEach(A),ce.forEach(A),$e=D(q),Vt=y(q,"DIV",{class:!0});var Le=N(Vt);at=y(Le,"DIV",{class:!0});var mt=N(at);Wt=y(mt,"P",{class:!0,"data-svelte-h":!0}),O(Wt)!=="svelte-ceroz1"&&(Wt.textContent=Dn),tn=D(mt),Yt=y(mt,"H2",{class:!0,"data-svelte-h":!0}),O(Yt)!=="svelte-so6kne"&&(Yt.textContent=zn),en=D(mt),qt=y(mt,"P",{class:!0,"data-svelte-h":!0}),O(qt)!=="svelte-1u75598"&&(qt.textContent=Bn),nn=D(mt),Gt=y(mt,"INPUT",{type:!0}),rn=D(mt),It=y(mt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(It)!=="svelte-1kwkdzm"&&(It.textContent=Tn),mt.forEach(A),an=D(Le),Pt=y(Le,"DIV",{id:!0,class:!0});var Rn=N(Pt);for(let ln=0;ln<$.length;ln+=1)$[ln].l(Rn);Rn.forEach(A),Le.forEach(A),q.forEach(A),this.h()},h(){Cr(a,"--color",Qt),v(u,"class","page-subtitle"),v(i,"class","page-title"),v(C,"class","description"),v(E,"type","radio"),v(E,"name","compare"),E.value="UK",E.checked=!0,v(T,"class","nation-label svelte-i61d1c"),v(T,"for","html"),v(S,"type","radio"),v(S,"name","compare"),S.value="England",v(V,"class","nation-label svelte-i61d1c"),v(V,"for","html"),v(W,"type","radio"),v(W,"name","compare"),W.value="Wales",v(Q,"class","nation-label svelte-i61d1c"),v(Q,"for","html"),v(Y,"type","radio"),v(Y,"name","compare"),Y.value="Scotland",v(nt,"class","nation-label svelte-i61d1c"),v(nt,"for","javascript"),v(tt,"type","radio"),v(tt,"name","compare"),tt.value="NI",v(P,"class","nation-label svelte-i61d1c"),v(P,"for","javascript"),v(_,"class","radio-set"),v(l,"class","section header"),v(_t,"class","section-header"),v(te,"class","nation-label svelte-i61d1c"),v(xt,"class","component-title"),v(ee,"class","nation-label svelte-i61d1c"),v(Ct,"class","description"),v(Dt,"class","plot"),v(lt,"class","component column"),v(Rt,"class","component-title"),v(Ot,"class","description"),v(wt,"id","map"),v(wt,"class","svelte-i61d1c"),v(pt,"class","component column"),v(ot,"id","vis-block"),v(ot,"class","svelte-i61d1c"),v(U,"class","section"),v(jt,"class","section-header"),v(ne,"class","nation-label svelte-i61d1c"),v(Bt,"class","component-title"),v(Tt,"class","plot"),v(re,"class","row"),v(zt,"class","component singlevis"),v(Ut,"class","component-title"),v(St,"class","plot"),v(se,"class","row"),v(ae,"class","row"),v(Nt,"class","component singlevis"),v(vt,"class","section"),v(Wt,"class","section-subtitle"),v(Yt,"class","section-title"),v(qt,"class","description"),v(Gt,"type","checkbox"),v(It,"for","checkbox"),v(It,"class","svelte-i61d1c"),v(at,"class","section-header"),v(Pt,"id","multiple-comp"),v(Pt,"class","svelte-i61d1c"),v(Vt,"class","section"),v(r,"class","page-container")},m(H,q){xr(e,H,q),$t(H,n,q),$t(H,r,q),c(r,a),c(r,s),c(r,l),c(l,u),c(l,o),c(l,i),c(i,h),c(l,g),c(l,C),c(l,L),c(l,_),c(_,p),c(_,E),c(_,w),c(_,T),c(_,I),c(_,F),c(_,S),c(_,M),c(_,V),c(_,B),c(_,K),c(_,W),c(_,et),c(_,Q),c(_,At),c(_,kt),c(_,Y),c(_,J),c(_,nt),c(_,ht),c(_,tt),c(_,d),c(_,P),c(r,dt),c(r,U),c(U,_t),c(U,st),c(U,ot),c(ot,lt),c(lt,xt),c(xt,Se),c(xt,te),c(te,ye),c(xt,Ve),c(lt,Ie),c(lt,Ct),c(Ct,Pe),c(Ct,He),c(Ct,Fe),c(Ct,ee),c(ee,be),c(lt,Re),c(lt,Dt),t[19](Dt),c(ot,Oe),c(ot,pt),c(pt,Rt),c(Rt,je),c(Rt,Ue),c(pt,We),c(pt,Ot),c(pt,Ye),c(pt,wt),t[20](wt),c(r,qe),c(r,vt),c(vt,jt),c(vt,Ge),c(vt,zt),c(zt,Bt),c(Bt,Ze),c(Bt,ne),c(ne,_e),c(Bt,Xe),c(zt,Ke),c(zt,re),c(re,Tt),t[21](Tt),c(vt,Je),c(vt,Nt),c(Nt,Ut),c(Nt,Qe),c(Nt,ae),c(ae,se),c(se,St),t[22](St),c(r,$e),c(r,Vt),c(Vt,at),c(at,Wt),c(at,tn),c(at,Yt),c(at,en),c(at,qt),c(at,nn),c(at,Gt),Gt.checked=t[7],c(at,rn),c(at,It),c(Vt,an),c(Vt,Pt);for(let R=0;R<$.length;R+=1)$[R]&&$[R].m(Pt,null);t[28](r),Zt=!0,sn||(Nn=[ue(E,"change",t[12]),ue(S,"change",t[12]),ue(W,"change",t[12]),ue(Y,"change",t[12]),ue(tt,"change",t[12]),ue(Gt,"change",t[23])],sn=!0)},p(H,q){if((!Zt||q[0]&256)&&xe(ye,H[8]),(!Zt||q[0]&256)&&xe(be,H[8]),(!Zt||q[0]&256)&&xe(_e,H[8]),q[0]&128&&(Gt.checked=H[7]),q[0]&440){oe=On(vn);let R;for(R=0;R<oe.length;R+=1){const ve=or(H,oe,R);$[R]?$[R].p(ve,q):($[R]=lr(ve),$[R].c(),$[R].m(Pt,null))}for(;R<$.length;R+=1)$[R].d(1);$.length=oe.length}},i(H){Zt||(Lr(e.$$.fragment,H),Zt=!0)},o(H){kr(e.$$.fragment,H),Zt=!1},d(H){H&&(A(n),A(r)),Ar(e,H),t[19](null),t[20](null),t[21](null),t[22](null),br($,H),t[28](null),sn=!1,_r(Nn)}}}let ut=400;function Jt(t){const e=t.querySelector("figure");e&&e.remove();const n=t.querySelector("svg");n&&n.remove()}function vs(t,e,n){let r,a,s,l,u={},f={},o={},i={},m="barchart",h=!1,{data:g}=e;const C=g.LAD;let k="UK",L,_,p,E,w,T,x=!1;async function I(){n(15,L=await bt(qn())),await bt(la()),n(16,_=await bt(Gn([]))),p=await bt(ia(Wn.map(d=>d.id))),n(17,E=await bt(Zn())),w=await bt(ca(C)),T=await bt(ua(C)),n(18,x=!0),ea(r)}I();const F=g.LADToName;let S,M;wr(()=>{ta(r),S=new Qr(C,"LAD",M,"val",!0),S.initMap()});function V(){{let d=it({height:ut/1.4,...ct,x:{type:"band"},style:{fontSize:"18px"},marks:[Xt(_,gt({y:"mean"},{y:"val",x:"scenario",fill:"lightblue",opacity:.7,dx:20})),Xt(w,gt({y:"sum"},{y:"total",x:"scenario",tip:!0}))]});setTimeout(()=>{const P=yt(d).selectAll("g[aria-label='bar']"),Lt=yt(P.nodes()[0]),dt=yt(P.nodes()[1]);console.log(2323232323,Lt.node()),dt.selectAll("rect").each(function(){console.log(2,this)}),dt.remove()},1e3)}}function X(){a?.append(it({height:ut,width:811,MARGINS:ct,x:{type:"band"},marks:[Xt(E,gt({y:"mean"},{y:"val",x:"co_benefit_type",dx:na,fill:Qt,sort:{x:"y",reverse:!0},tip:!0})),Xt(T,gt({y:"sum"},{y:"total",x:"co_benefit_type",fill:d=>ra(d.co_benefit_type),tip:!0}))]}))}function B(){vn.forEach(d=>{let P;h?(Yn.includes(d)?P=it({height:ut/3,width:500*2,...ct,style:{fontSize:"18px"},color:{legend:!0,scheme:"greys"},x:{domain:dr(0,6),ticks:new Set(w.map(U=>U[d]))},marks:[tr(w,gt({fill:"count"},{x:d,stroke:"black"})),tr([Math.floor(ge(L.map(U=>U[d])))],{x:U=>U,stroke:"red",fill:null,strokeWidth:2})]}):P=it({height:ut/3,width:500*2,...ct,style:{fontSize:"18px"},color:{legend:!0},marks:[fn(w,{x:d,tip:!0}),fn([ge(w.map(U=>U[d]))],{stroke:"blue",strokeWidth:2}),fn([ge(L.map(U=>U[d]))],{stroke:"red",strokeWidth:2})]}),u[d]?.append(P)):(Yn.includes(d)?P=it({height:ut/2,width:500,...ct,marginLeft:100,x:{grid:!0,label:d,tickFormat:U=>Math.floor(U)},style:{fontSize:"18px"},color:{legend:!0},marks:[Xt(L,ar(gt({y:"count"},{x:d,dx:20,fill:Qt}))),Xt(w,ar(gt({y:"count"},{x:d})))]}):P=it({height:ut/2,...ct,style:{fontSize:"18px"},marks:[un(w,Jn({y:"proportion"},{x:d,tip:!0,fill:Qt,stroke:Qt,fillOpacity:.2,strokeWidth:3})),un(L,Jn({y:"proportion"},{x:d,tip:!0,fill:"black",stroke:"black",fillOpacity:.2,strokeWidth:3}))]}),f[d]?.append(void 0),u[d]?.append(P));let dt=it({height:ut/2,...ct,style:{fontSize:"18px"},color:{range:["rgb(227, 248, 255)","lightblue"]},marks:[Ya($r(L,3e4),{x:d,y:"total",fill:"density",thresholds:10}),ga(w,{x:d,y:"total",fill:"black",r:2}),es(w,{x:d,y:"total"}),Kr(),Jr({anchor:"bottom"})]});o[d]?.append(dt)})}function K(){for(let d of oa){let P=it({height:ut,width:410,...ct,marginRight:0,marginLeft:100,marks:[Xn(p,Un({x:"mean"},{x:"val",y:"co_benefit_type",dy:-10,fill:Qt,tip:!0})),Xn(T,Un({x:"mean"},{x:"total",y:"co_benefit_type",tip:!0}))]});i[d]?.append(P)}}function W(){let d=w.flatMap(rt=>cn.map(st=>({time:st,value:rt[st],scenario:rt.scenario,zone:"local"}))),P=L.flatMap(rt=>cn.map(st=>({time:st,value:rt[st],scenario:rt.scenario,zone:"UK"}))),Lt=d.concat(P),dt=it({height:ut,width:800,...ct,paddingLeft:200,marginRight:0,x:{tickSize:0,label:null,ticks:[]},color:{range:[aa,Qt]},marks:[Xt(Lt,gt({y:"mean"},{x:"zone",y:"value",fx:"time",tip:!0,fill:"zone"}))]});s?.append(dt),yt(s).select("g[aria-label='bar']").selectAll("g").each(function(rt,st){const ot=yt(this).selectAll("rect").nodes()[0],lt=yt(ot).attr("transform")||"";yt(ot).attr("transform",`${lt} translate(-20, 0)`),yt(this).selectAll("rect").nodes()[0].getAttribute("height"),yt(this).selectAll("rect").nodes()[1].getAttribute("height"),yt(this).selectAll("rect")}),it({height:ut,width:800,...ct,paddingLeft:200,marginRight:0,color:{legend:!0},marks:[ja(Lt,gt({y:"mean"},{x:"time",y:"value",tip:!0,stroke:"scenario"}))]});let U=T.flatMap(rt=>cn.map(st=>({time:st,value:rt[st],cobenefit:rt.co_benefit_type})));console.log("debug",U);let _t=it({height:ut,width:1e3,...ct,paddingLeft:200,marginRight:0,insetLeft:10,insetRight:10,insetBottom:30,style:{fontSize:"10px"},y:{tickFormat:".2f",label:"Value (£)"},x:{label:"Year"},color:{legend:!0,range:sa,domain:Wn.map(rt=>rt.id)},marks:[un(U,gt({y:"mean"},{x:"time",y:"value",tip:!0,fill:"cobenefit"})),jn([0],{strokeWidth:8,stroke:"white",opacity:1,strokeLinecap:"round"}),jn([0],{strokeWidth:2,stroke:"#333333",opacity:1,strokeLinecap:"round"})]});l?.append(_t)}async function et(d){n(8,k=d.currentTarget.value),n(17,E=await bt(Zn("total",k))),n(16,_=await bt(Gn([],k))),n(15,L=await bt(qn(k)))}function Q(d){Mt[d?"unshift":"push"](()=>{a=d,n(0,a)})}function ft(d){Mt[d?"unshift":"push"](()=>{M=d,n(9,M)})}function At(d){Mt[d?"unshift":"push"](()=>{s=d,n(1,s)})}function kt(d){Mt[d?"unshift":"push"](()=>{l=d,n(2,l)})}function Y(){h=this.checked,n(7,h)}function J(d,P){Mt[d?"unshift":"push"](()=>{u[P]=d,n(3,u)})}function nt(d,P){Mt[d?"unshift":"push"](()=>{u[P]=d,n(3,u)})}function Ft(d,P){Mt[d?"unshift":"push"](()=>{f[P]=d,n(4,f)})}function ht(d,P){Mt[d?"unshift":"push"](()=>{o[P]=d,n(5,o)})}function tt(d){Mt[d?"unshift":"push"](()=>{r=d,n(6,r)})}return t.$$set=d=>{"data"in d&&n(13,g=d.data)},t.$$.update=()=>{t.$$.dirty[0]&507911&&(a&&Jt(a),s&&Jt(s),l&&Jt(l),x&&E&&_&&L&&(console.log("render"),V(),X(),W())),t.$$.dirty[0]&262200&&(Object.values(u).forEach(d=>{d&&Jt(d)}),Object.values(f).forEach(d=>{d&&Jt(d)}),Object.values(o).forEach(d=>{d&&Jt(d)}),x&&B()),t.$$.dirty[0]&262144&&(Object.values(i).forEach(d=>{d&&Jt(d)}),x&&K())},[a,s,l,u,f,o,r,h,k,M,C,F,et,g,m,L,_,E,x,Q,ft,At,kt,Y,J,nt,Ft,ht,tt]}class Ls extends Mr{constructor(e){super(),Er(this,e,vs,ps,yr,{data:13},null,[-1,-1])}}export{Ls as component};
