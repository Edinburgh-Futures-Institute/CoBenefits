import{s as et,n as Me,r as tt,o as lt,e as Ge}from"../chunks/scheduler.tir__IPy.js";import{S as at,i as nt,e as n,s as E,c as s,h as B,g as N,k as A,d as C,n as e,b as ve,l as t,p as O,q as st,f as rt,j as ot}from"../chunks/index.Bmq5Vkz3.js";import{e as Je,m as it}from"../chunks/maplibre-gl.CiiVRyRr.js";import{c as ut}from"../chunks/transform.Bxaw71Wc.js";import{s as dt,q as Ke,c as Qe,f as ct,h as We,j as pt,k as Xe,l as vt,n as ft,o as ht,d as yt,i as mt}from"../chunks/index.iNGoBIib.js";import{C as Ye,g as _t,f as bt}from"../chunks/duckdb.D6UuY4Ge.js";function xt(l){return dt(ut(l).call(document.documentElement))}function Ct(l,{title:d,tickSize:v=6,width:c=320,height:y=44+v,marginTop:u=18,marginRight:o=0,marginBottom:m=16+v,marginLeft:i=0,ticks:g=c/64,tickFormat:p,tickValues:P}={}){function w(a,S=256){const z=document.createElement("canvas");z.width=S,z.height=1;const M=z.getContext("2d");for(let T=0;T<S;++T)M.fillStyle=a(T/(S-1)),M.fillRect(T,0,1,1);return z}const x=xt("svg").attr("width",c).attr("height",y).attr("viewBox",[0,0,c,y]).style("overflow","visible").style("display","block");let V=a=>a.selectAll(".tick line").attr("y1",u+m-y),h;if(l.interpolate){const a=Math.min(l.domain().length,l.range().length);h=l.copy().rangeRound(Ke(Qe(i,c-o),a)),x.append("image").attr("x",i).attr("y",u).attr("width",c-i-o).attr("height",y-u-m).attr("preserveAspectRatio","none").attr("xlink:href",w(l.copy().domain(Ke(Qe(0,1),a))).toDataURL())}else if(l.interpolator){if(h=Object.assign(l.copy().interpolator(ct(i,c-o)),{range(){return[i,c-o]}}),x.append("image").attr("x",i).attr("y",u).attr("width",c-i-o).attr("height",y-u-m).attr("preserveAspectRatio","none").attr("xlink:href",w(l.interpolator()).toDataURL()),!h.ticks){if(P===void 0){const a=Math.round(g+1);P=We(a).map(S=>pt(l.domain(),S/(a-1)))}typeof p!="function"&&(p=Xe(p===void 0?",f":p))}}else if(l.invertExtent){const a=l.thresholds?l.thresholds():l.quantiles?l.quantiles():l.domain(),S=p===void 0?z=>z:typeof p=="string"?Xe(p):p;h=vt().domain([-1,l.range().length-1]).rangeRound([i,c-o]),x.append("g").selectAll("rect").data(l.range()).join("rect").attr("x",(z,M)=>h(M-1)).attr("y",u).attr("width",(z,M)=>h(M)-h(M-1)).attr("height",y-u-m).attr("fill",z=>z),P=We(a.length),p=z=>S(a[z],z)}else h=ft().domain(l.domain()).rangeRound([i,c-o]),x.append("g").selectAll("rect").data(l.domain()).join("rect").attr("x",h).attr("y",u).attr("width",Math.max(0,h.bandwidth()-1)).attr("height",y-u-m).attr("fill",l),V=()=>{};return x.append("g").attr("transform",`translate(0,${y-m})`).call(ht(h).ticks(g,typeof p=="string"?p:void 0).tickFormat(typeof p=="function"?p:void 0).tickSize(v).tickValues(P)).call(V).call(a=>a.select(".domain").remove()).call(a=>a.append("text").attr("x",i).attr("y",u+m-y-6).attr("fill","currentColor").attr("text-anchor","start").attr("font-weight","bold").attr("class","title").text(d)),x.node()}function Fe(l,d,v){const c=l.slice();return c[21]=d[v],c}function $e(l){let d,v,c,y,u,o,m;return{c(){d=n("input"),v=E(),c=n("label"),y=rt(l[21]),u=n("br"),this.h()},l(i){d=s(i,"INPUT",{type:!0,name:!0}),v=A(i),c=s(i,"LABEL",{for:!0});var g=B(c);y=ot(g,l[21]),g.forEach(C),u=s(i,"BR",{}),this.h()},h(){e(d,"type","checkbox"),e(d,"name","cobenef"),d.value=l[21],d.checked=!0,e(c,"for","css")},m(i,g){ve(i,d,g),ve(i,v,g),ve(i,c,g),t(c,y),ve(i,u,g),o||(m=O(d,"change",l[3]),o=!0)},p:Me,d(i){i&&(C(d),C(v),C(c),C(u)),o=!1,m()}}}function gt(l){let d,v,c=`<h2>Map</h2> <p>This interactive map shows the co-benefit of each datazone. The pathway and time window can be selected,
            along a given set of co-benefits.</p>`,y,u,o,m,i="",g,p,P="",w,x,V,h,a,S,z="Scenario",M,T,ce,H,fe="BNZ",r,f,U,pe,W,Pe="Test",ye,me,ie,we="Co Benefits",_e,he,ue,je="Time",be,L,X,q,Y,Ve="total",xe,F,Z,$,Ue="2025-2029",Ce,ee,G,te,He="2030-2034",ge,le,J,ae,qe="2035-2039",ze,ne,K,se,Re="2040-2044",Ee,re,Q,oe,ke="2045-2049",Ae,Oe,de=Je(Ye),I=[];for(let D=0;D<de.length;D+=1)I[D]=$e(Fe(l,de,D));return{c(){d=n("div"),v=n("div"),v.innerHTML=c,y=E(),u=n("div"),o=n("div"),m=n("div"),m.innerHTML=i,g=E(),p=n("div"),p.innerHTML=P,w=E(),x=n("div"),V=E(),h=n("div"),a=n("div"),S=n("h2"),S.textContent=z,M=E(),T=n("input"),ce=E(),H=n("label"),H.textContent=fe,r=n("br"),f=E(),U=n("input"),pe=E(),W=n("label"),W.textContent=Pe,ye=n("br"),me=E(),ie=n("h2"),ie.textContent=we,_e=E();for(let D=0;D<I.length;D+=1)I[D].c();he=E(),ue=n("h2"),ue.textContent=je,be=E(),L=n("div"),X=n("label"),q=n("input"),Y=n("span"),Y.textContent=Ve,xe=E(),F=n("label"),Z=n("input"),$=n("span"),$.textContent=Ue,Ce=E(),ee=n("label"),G=n("input"),te=n("span"),te.textContent=He,ge=E(),le=n("label"),J=n("input"),ae=n("span"),ae.textContent=qe,ze=E(),ne=n("label"),K=n("input"),se=n("span"),se.textContent=Re,Ee=E(),re=n("label"),Q=n("input"),oe=n("span"),oe.textContent=ke,this.h()},l(D){d=s(D,"DIV",{class:!0});var R=B(d);v=s(R,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),N(v)!=="svelte-mj8vf3"&&(v.innerHTML=c),y=A(R),u=s(R,"DIV",{id:!0,class:!0});var _=B(u);o=s(_,"DIV",{class:!0,id:!0});var k=B(o);m=s(k,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),N(m)!=="svelte-lcvcxs"&&(m.innerHTML=i),g=A(k),p=s(k,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),N(p)!=="svelte-1j653gg"&&(p.innerHTML=P),w=A(k),x=s(k,"DIV",{id:!0,class:!0}),B(x).forEach(C),k.forEach(C),V=A(_),h=s(_,"DIV",{class:!0,id:!0});var Ze=B(h);a=s(Ze,"DIV",{});var b=B(a);S=s(b,"H2",{"data-svelte-h":!0}),N(S)!=="svelte-7j3pqc"&&(S.textContent=z),M=A(b),T=s(b,"INPUT",{type:!0,name:!0}),ce=A(b),H=s(b,"LABEL",{for:!0,"data-svelte-h":!0}),N(H)!=="svelte-12d5b6d"&&(H.textContent=fe),r=s(b,"BR",{}),f=A(b),U=s(b,"INPUT",{type:!0,name:!0}),pe=A(b),W=s(b,"LABEL",{for:!0,"data-svelte-h":!0}),N(W)!=="svelte-xliwgr"&&(W.textContent=Pe),ye=s(b,"BR",{}),me=A(b),ie=s(b,"H2",{"data-svelte-h":!0}),N(ie)!=="svelte-8wtja0"&&(ie.textContent=we),_e=A(b);for(let Be=0;Be<I.length;Be+=1)I[Be].l(b);he=A(b),ue=s(b,"H2",{"data-svelte-h":!0}),N(ue)!=="svelte-hletp"&&(ue.textContent=je),be=A(b),L=s(b,"DIV",{id:!0,class:!0});var j=B(L);X=s(j,"LABEL",{class:!0});var Le=B(X);q=s(Le,"INPUT",{type:!0,name:!0,class:!0}),Y=s(Le,"SPAN",{class:!0,"data-svelte-h":!0}),N(Y)!=="svelte-67wc0s"&&(Y.textContent=Ve),Le.forEach(C),xe=A(j),F=s(j,"LABEL",{class:!0});var Ie=B(F);Z=s(Ie,"INPUT",{type:!0,name:!0,class:!0}),$=s(Ie,"SPAN",{class:!0,"data-svelte-h":!0}),N($)!=="svelte-177152l"&&($.textContent=Ue),Ie.forEach(C),Ce=A(j),ee=s(j,"LABEL",{class:!0});var De=B(ee);G=s(De,"INPUT",{type:!0,name:!0,class:!0}),te=s(De,"SPAN",{class:!0,"data-svelte-h":!0}),N(te)!=="svelte-sne3j9"&&(te.textContent=He),De.forEach(C),ge=A(j),le=s(j,"LABEL",{class:!0});var Se=B(le);J=s(Se,"INPUT",{type:!0,name:!0,class:!0}),ae=s(Se,"SPAN",{class:!0,"data-svelte-h":!0}),N(ae)!=="svelte-13ifhof"&&(ae.textContent=qe),Se.forEach(C),ze=A(j),ne=s(j,"LABEL",{class:!0});var Te=B(ne);K=s(Te,"INPUT",{type:!0,name:!0,class:!0}),se=s(Te,"SPAN",{class:!0,"data-svelte-h":!0}),N(se)!=="svelte-1pug1mv"&&(se.textContent=Re),Te.forEach(C),Ee=A(j),re=s(j,"LABEL",{class:!0});var Ne=B(re);Q=s(Ne,"INPUT",{type:!0,name:!0,class:!0}),oe=s(Ne,"SPAN",{class:!0,"data-svelte-h":!0}),N(oe)!=="svelte-3f05xd"&&(oe.textContent=ke),Ne.forEach(C),j.forEach(C),b.forEach(C),Ze.forEach(C),_.forEach(C),R.forEach(C),this.h()},h(){e(v,"class","component"),e(v,"id","heaser"),e(m,"id","map"),e(m,"class","svelte-zt7y8i"),e(p,"id","map-legend"),e(p,"class","svelte-zt7y8i"),e(x,"id","tooltip"),e(x,"class","tooltip svelte-zt7y8i"),e(o,"class","component column"),e(o,"id","mapComp"),e(T,"type","radio"),e(T,"name","visType"),T.value="BNZ",T.checked=!0,e(H,"for","html"),e(U,"type","radio"),e(U,"name","visType"),U.value="Test",e(W,"for","css"),e(q,"type","radio"),e(q,"name","toggle"),q.value="total",q.checked=!0,e(q,"class","svelte-zt7y8i"),e(Y,"class","svelte-zt7y8i"),e(X,"class","time-radio svelte-zt7y8i"),e(Z,"type","radio"),e(Z,"name","toggle"),Z.value="2025_2029",e(Z,"class","svelte-zt7y8i"),e($,"class","svelte-zt7y8i"),e(F,"class","time-radio svelte-zt7y8i"),e(G,"type","radio"),e(G,"name","toggle"),G.value="2030_2034",e(G,"class","svelte-zt7y8i"),e(te,"class","svelte-zt7y8i"),e(ee,"class","time-radio svelte-zt7y8i"),e(J,"type","radio"),e(J,"name","toggle"),J.value="2035_2039",e(J,"class","svelte-zt7y8i"),e(ae,"class","svelte-zt7y8i"),e(le,"class","time-radio svelte-zt7y8i"),e(K,"type","radio"),e(K,"name","toggle"),K.value="2040_2044",e(K,"class","svelte-zt7y8i"),e(se,"class","svelte-zt7y8i"),e(ne,"class","time-radio svelte-zt7y8i"),e(Q,"type","radio"),e(Q,"name","toggle"),Q.value="2045_2049",e(Q,"class","svelte-zt7y8i"),e(oe,"class","svelte-zt7y8i"),e(re,"class","time-radio svelte-zt7y8i"),e(L,"id","time"),e(L,"class","svelte-zt7y8i"),e(h,"class","component column svelte-zt7y8i"),e(h,"id","control-panel"),e(u,"id","map-row"),e(u,"class","row svelte-zt7y8i"),e(d,"class","page-container svelte-zt7y8i")},m(D,R){ve(D,d,R),t(d,v),t(d,y),t(d,u),t(u,o),t(o,m),t(o,g),t(o,p),l[9](p),t(o,w),t(o,x),t(u,V),t(u,h),t(h,a),t(a,S),t(a,M),t(a,T),t(a,ce),t(a,H),t(a,r),t(a,f),t(a,U),t(a,pe),t(a,W),t(a,ye),t(a,me),t(a,ie),t(a,_e);for(let _=0;_<I.length;_+=1)I[_]&&I[_].m(a,null);t(a,he),t(a,ue),t(a,be),t(a,L),t(L,X),t(X,q),t(X,Y),t(L,xe),t(L,F),t(F,Z),t(F,$),t(L,Ce),t(L,ee),t(ee,G),t(ee,te),t(L,ge),t(L,le),t(le,J),t(le,ae),t(L,ze),t(L,ne),t(ne,K),t(ne,se),t(L,Ee),t(L,re),t(re,Q),t(re,oe),l[10](d),Ae||(Oe=[O(T,"change",l[2]),O(U,"change",l[2]),O(q,"change",l[4]),O(Z,"change",l[4]),O(G,"change",l[4]),O(J,"change",l[4]),O(K,"change",l[4]),O(Q,"change",l[4])],Ae=!0)},p(D,[R]){if(R&8){de=Je(Ye);let _;for(_=0;_<de.length;_+=1){const k=Fe(D,de,_);I[_]?I[_].p(k,R):(I[_]=$e(k),I[_].c(),I[_].m(a,he))}for(;_<I.length;_+=1)I[_].d(1);I.length=de.length}},i:Me,o:Me,d(D){D&&C(d),l[9](null),st(I,D),l[10](null),Ae=!1,tt(Oe)}}}function zt(l,d,v){let{data:c}=d;const y=c.datazones;let u,o,m,i,g,p={},P="BNZ",w=new Set,x="total",V=!1,h=yt().domain([-10,0,40]).interpolator(mt);async function a(){g=await _t(bt(Array.from(w),P,x))}function S(){g.forEach(r=>{p[r.Lookup_Value]=r[x]});for(let r of y.features){let f=r.properties.LSOA21CD;r.properties.value=p[f]}o.getSource("datazones").setData(y)}function z(){g.forEach(f=>{p[f.Lookup_Value]=f.total});for(let f of y.features){let U=f.properties.LSOA21CD;f.properties.value=p[U]}o.addSource("datazones",{type:"geojson",data:y}),o.addLayer({id:"fill",type:"fill",source:"datazones",paint:{"fill-color":["interpolate",["linear"],["get","value"],...h.domain().flatMap(f=>[f,h(f)])],"fill-opacity":.9}});const r=document.getElementById("tooltip");o.on("mousemove","choropleth-layer",f=>{const pe=f.features[0].properties.value;r.innerHTML=`Value: ${pe}`,r.style.left=f.point.x+10+"px",r.style.top=f.point.y+10+"px",r.style.display="block"}),o.on("mouseleave","choropleth-layer",()=>{r.style.display="none"})}lt(()=>{let r=[-4.5481,54.2361];o=new it.Map({container:"map",style:{version:8,sources:{},layers:[]},center:r,zoom:5,preserveDrawingBuffer:!0}),o.on("style.load",()=>{v(8,V=!0),a().then(()=>{z()})}),m=Ct(h,{title:"Cobenefits (Millions of £)"}),i.append(m)});const M=r=>{v(6,P=r.currentTarget.value)},T=r=>{const f=r.currentTarget.value;w.has(f)?w.delete(f):w.add(f)},ce=r=>{const f=r.currentTarget.value;v(7,x=f)};function H(r){Ge[r?"unshift":"push"](()=>{i=r,v(1,i)})}function fe(r){Ge[r?"unshift":"push"](()=>{u=r,v(0,u)})}return l.$$set=r=>{"data"in r&&v(5,c=r.data)},l.$$.update=()=>{l.$$.dirty&448&&P!=null&&w!=null&&x!=null&&V&&a().then(()=>{S()})},[u,i,M,T,ce,c,P,x,V,H,fe]}class Tt extends at{constructor(d){super(),nt(this,d,zt,gt,et,{data:5})}}export{Tt as component};
