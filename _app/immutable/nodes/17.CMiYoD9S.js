import{s as we,a as q,e as u,g as k,c as f,b as w,p as H,f as m,q as t,D as ie,i as $,h as a,w as Z,E as ke,y as Fe,B as ce,x as De,t as xe,d as Be,n as Me,v as Ve,r as Ie}from"../chunks/scheduler.CM2kgFFE.js";import{S as Pe,i as Ue,c as Oe,b as He,m as Ge,t as Re,a as je,d as ze}from"../chunks/index.BdkIKoLm.js";import{N as Ke,e as ue}from"../chunks/NavigationBar.wfWUH9cH.js";import{i as Ye,o as Je}from"../chunks/transform.BNP73y-7.js";import"../chunks/index.gHFfw6XA.js";import{b as Ze}from"../chunks/paths.D_GsmK_s.js";import{M as Qe}from"../chunks/mapUK.BsL-1tB-.js";import{g as re,k as Ee,l as ye,m as We,n as Xe,o as $e}from"../chunks/duckdb.BvMxQizY.js";import{a as fe,d as be,h as Le,b as et,c as Ce,e as tt,g as Ne}from"../chunks/globals.BaB0XPZ2.js";function Se(o,e,l){const n=o.slice();return n[32]=e[l],n}function Ae(o,e,l){const n=o.slice();return n[29]=e[l],n}function lt(o){let e,l,n="Social Economic Factor",v,_,S=ue(Ce),r=[];for(let d=0;d<S.length;d+=1)r[d]=Te(Se(o,S,d));return{c(){e=u("div"),l=u("h2"),l.textContent=n,v=q(),_=u("div");for(let d=0;d<r.length;d+=1)r[d].c();this.h()},l(d){e=f(d,"DIV",{class:!0});var i=w(e);l=f(i,"H2",{"data-svelte-h":!0}),H(l)!=="svelte-1ld89ev"&&(l.textContent=n),v=k(i),_=f(i,"DIV",{id:!0,class:!0});var s=w(_);for(let h=0;h<r.length;h+=1)r[h].l(s);s.forEach(m),i.forEach(m),this.h()},h(){t(_,"id","time"),t(_,"class","svelte-1t23qr4"),t(e,"class","tabcontent svelte-1t23qr4")},m(d,i){$(d,e,i),a(e,l),a(e,v),a(e,_);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(_,null)},p(d,i){if(i[0]&514){S=ue(Ce);let s;for(s=0;s<S.length;s+=1){const h=Se(d,S,s);r[s]?r[s].p(h,i):(r[s]=Te(h),r[s].c(),r[s].m(_,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=S.length}},d(d){d&&m(e),De(r,d)}}}function at(o){let e,l,n,v="Co-Benefits",_,S,r,d,i="Time",s,h,D,T,F,b="Total",L,p,A,M,G="2025-2029",le,J,x,Q,ae="2030-2034",P,U,z,O,c="2035-2039",y,B,K,R,se="2040-2044",ne,Y,W,ee,oe="2045-2049",te,V,C=ue(fe.concat({id:"total",label:"Total"})),g=[];for(let I=0;I<C.length;I+=1)g[I]=qe(Ae(o,C,I));return{c(){e=u("div"),l=u("div"),n=u("h2"),n.textContent=v,_=q();for(let I=0;I<g.length;I+=1)g[I].c();S=q(),r=u("div"),d=u("h2"),d.textContent=i,s=q(),h=u("div"),D=u("label"),T=u("input"),F=u("span"),F.textContent=b,L=q(),p=u("label"),A=u("input"),M=u("span"),M.textContent=G,le=q(),J=u("label"),x=u("input"),Q=u("span"),Q.textContent=ae,P=q(),U=u("label"),z=u("input"),O=u("span"),O.textContent=c,y=q(),B=u("label"),K=u("input"),R=u("span"),R.textContent=se,ne=q(),Y=u("label"),W=u("input"),ee=u("span"),ee.textContent=oe,this.h()},l(I){e=f(I,"DIV",{class:!0});var j=w(e);l=f(j,"DIV",{class:!0});var E=w(l);n=f(E,"H2",{"data-svelte-h":!0}),H(n)!=="svelte-uglilz"&&(n.textContent=v),_=k(E);for(let ge=0;ge<g.length;ge+=1)g[ge].l(E);E.forEach(m),S=k(j),r=f(j,"DIV",{class:!0});var X=w(r);d=f(X,"H2",{"data-svelte-h":!0}),H(d)!=="svelte-hletp"&&(d.textContent=i),s=k(X),h=f(X,"DIV",{id:!0,class:!0});var N=w(h);D=f(N,"LABEL",{class:!0});var de=w(D);T=f(de,"INPUT",{type:!0,name:!0,class:!0}),F=f(de,"SPAN",{class:!0,"data-svelte-h":!0}),H(F)!=="svelte-2fqrek"&&(F.textContent=b),de.forEach(m),L=k(N),p=f(N,"LABEL",{class:!0});var he=w(p);A=f(he,"INPUT",{type:!0,name:!0,class:!0}),M=f(he,"SPAN",{class:!0,"data-svelte-h":!0}),H(M)!=="svelte-177152l"&&(M.textContent=G),he.forEach(m),le=k(N),J=f(N,"LABEL",{class:!0});var ve=w(J);x=f(ve,"INPUT",{type:!0,name:!0,class:!0}),Q=f(ve,"SPAN",{class:!0,"data-svelte-h":!0}),H(Q)!=="svelte-sne3j9"&&(Q.textContent=ae),ve.forEach(m),P=k(N),U=f(N,"LABEL",{class:!0});var pe=w(U);z=f(pe,"INPUT",{type:!0,name:!0,class:!0}),O=f(pe,"SPAN",{class:!0,"data-svelte-h":!0}),H(O)!=="svelte-13ifhof"&&(O.textContent=c),pe.forEach(m),y=k(N),B=f(N,"LABEL",{class:!0});var me=w(B);K=f(me,"INPUT",{type:!0,name:!0,class:!0}),R=f(me,"SPAN",{class:!0,"data-svelte-h":!0}),H(R)!=="svelte-1pug1mv"&&(R.textContent=se),me.forEach(m),ne=k(N),Y=f(N,"LABEL",{class:!0});var _e=w(Y);W=f(_e,"INPUT",{type:!0,name:!0,class:!0}),ee=f(_e,"SPAN",{class:!0,"data-svelte-h":!0}),H(ee)!=="svelte-3f05xd"&&(ee.textContent=oe),_e.forEach(m),N.forEach(m),X.forEach(m),j.forEach(m),this.h()},h(){t(l,"class","component"),t(T,"type","radio"),t(T,"name","toggle"),T.value="total",T.checked=!0,t(T,"class","svelte-1t23qr4"),t(F,"class","svelte-1t23qr4"),t(D,"class","time-radio svelte-1t23qr4"),t(A,"type","radio"),t(A,"name","toggle"),A.value="Y2025_2029",t(A,"class","svelte-1t23qr4"),t(M,"class","svelte-1t23qr4"),t(p,"class","time-radio svelte-1t23qr4"),t(x,"type","radio"),t(x,"name","toggle"),x.value="Y2030_2034",t(x,"class","svelte-1t23qr4"),t(Q,"class","svelte-1t23qr4"),t(J,"class","time-radio svelte-1t23qr4"),t(z,"type","radio"),t(z,"name","toggle"),z.value="Y2035_2039",t(z,"class","svelte-1t23qr4"),t(O,"class","svelte-1t23qr4"),t(U,"class","time-radio svelte-1t23qr4"),t(K,"type","radio"),t(K,"name","toggle"),K.value="Y2040_2044",t(K,"class","svelte-1t23qr4"),t(R,"class","svelte-1t23qr4"),t(B,"class","time-radio svelte-1t23qr4"),t(W,"type","radio"),t(W,"name","toggle"),W.value="Y2045_2049",t(W,"class","svelte-1t23qr4"),t(ee,"class","svelte-1t23qr4"),t(Y,"class","time-radio svelte-1t23qr4"),t(h,"id","time"),t(h,"class","svelte-1t23qr4"),t(r,"class","component"),t(e,"class","tabcontent svelte-1t23qr4")},m(I,j){$(I,e,j),a(e,l),a(l,n),a(l,_);for(let E=0;E<g.length;E+=1)g[E]&&g[E].m(l,null);a(e,S),a(e,r),a(r,d),a(r,s),a(r,h),a(h,D),a(D,T),a(D,F),a(h,L),a(h,p),a(p,A),a(p,M),a(h,le),a(h,J),a(J,x),a(J,Q),a(h,P),a(h,U),a(U,z),a(U,O),a(h,y),a(h,B),a(B,K),a(B,R),a(h,ne),a(h,Y),a(Y,W),a(Y,ee),te||(V=[Z(T,"change",o[7]),Z(A,"change",o[7]),Z(x,"change",o[7]),Z(z,"change",o[7]),Z(K,"change",o[7]),Z(W,"change",o[7])],te=!0)},p(I,j){if(j[0]&64){C=ue(fe.concat({id:"total",label:"Total"}));let E;for(E=0;E<C.length;E+=1){const X=Ae(I,C,E);g[E]?g[E].p(X,j):(g[E]=qe(X),g[E].c(),g[E].m(l,null))}for(;E<g.length;E+=1)g[E].d(1);g.length=C.length}},d(I){I&&m(e),De(g,I),te=!1,ke(V)}}}function Te(o){let e,l,n,v,_=o[32].label+"",S,r,d,i;return{c(){e=u("input"),n=q(),v=u("label"),S=xe(_),r=u("br"),this.h()},l(s){e=f(s,"INPUT",{type:!0,id:!0,name:!0,class:!0}),n=k(s),v=f(s,"LABEL",{for:!0});var h=w(v);S=Be(h,_),h.forEach(m),r=f(s,"BR",{}),this.h()},h(){t(e,"type","radio"),t(e,"id","html"),t(e,"name","fav_language"),e.value=o[32].id,e.checked=l=o[32].id==o[1],t(e,"class","svelte-1t23qr4"),t(v,"for","html")},m(s,h){$(s,e,h),$(s,n,h),$(s,v,h),a(v,S),$(s,r,h),d||(i=Z(e,"change",o[9]),d=!0)},p(s,h){h[0]&2&&l!==(l=s[32].id==s[1])&&(e.checked=l)},d(s){s&&(m(e),m(n),m(v),m(r)),d=!1,i()}}}function st(o){let e,l;return{c(){e=u("img"),this.h()},l(n){e=f(n,"IMG",{style:!0,class:!0,src:!0}),this.h()},h(){Ve(e,"opacity","0"),t(e,"class","icon svelte-1t23qr4"),Ie(e.src,l=Ne("Air quality"))||t(e,"src",l)},m(n,v){$(n,e,v)},d(n){n&&m(e)}}}function nt(o){let e,l;return{c(){e=u("img"),this.h()},l(n){e=f(n,"IMG",{alt:!0,class:!0,src:!0}),this.h()},h(){t(e,"alt","cobenefit icon"),t(e,"class","icon svelte-1t23qr4"),Ie(e.src,l=Ne(o[29].id))||t(e,"src",l)},m(n,v){$(n,e,v)},d(n){n&&m(e)}}}function qe(o){let e,l,n,v,_,S=o[29].label+"",r,d,i,s,h,D;function T(L,p){return L[29].id!="total"?nt:st}let b=T(o)(o);return{c(){e=u("div"),b.c(),l=q(),n=u("input"),v=q(),_=u("a"),r=xe(S),d=q(),i=u("br"),s=q(),this.h()},l(L){e=f(L,"DIV",{class:!0});var p=w(e);b.l(p),l=k(p),n=f(p,"INPUT",{type:!0,name:!0}),v=k(p),_=f(p,"A",{class:!0,href:!0});var A=w(_);r=Be(A,S),A.forEach(m),d=k(p),i=f(p,"BR",{}),s=k(p),p.forEach(m),this.h()},h(){t(n,"type","radio"),t(n,"name","cobenef"),n.value=o[29].id,n.checked=!0,t(_,"class","link"),t(_,"href",Ze+"/cobenefit?cobenefit="+o[29].id),t(e,"class","checkbox-div svelte-1t23qr4")},m(L,p){$(L,e,p),b.m(e,null),a(e,l),a(e,n),a(e,v),a(e,_),a(_,r),a(e,d),a(e,i),a(e,s),h||(D=Z(n,"change",o[6]),h=!0)},p:Me,d(L){L&&m(e),b.d(),h=!1,D()}}}function rt(o){let e,l,n,v,_=`<h2>Map</h2> <p>This interactive map allows to explore both the co-benefit values (per capita) and the socio-economic factors
            at the local
            authorities and datazones levels.</p> <p><strong>Co-Benefits:</strong> The total co-benefit per capita is initially shown. The values go from white
            (low) to black (high), and negative values are shown in red. Individual co-benefit can be selected with the
            radio buttons on the right.</p> <p><strong>Socio-Economic Factors:</strong> The average values are shown for numerical factors while the mode is
            shown for categorical factors. Values go from white for low values to black for high values (when values can
            be ordered).</p>`,S,r,d,i,s="",h,D,T="",F,b,L="Export",p,A,M,G,le="CoBenefits",J,x,Q=`Socio-Economic\r
                    Factors`,ae,P,U,z,O,c="Local Authorities",y,B,K,R,se="Data Zones",ne,Y,W,ee;e=new Ke({});function oe(C,g){if(C[0]=="Cobenefit")return at;if(C[0]=="SEF")return lt}let te=oe(o),V=te&&te(o);return{c(){Oe(e.$$.fragment),l=q(),n=u("div"),v=u("div"),v.innerHTML=_,S=q(),r=u("div"),d=u("div"),i=u("div"),i.innerHTML=s,h=q(),D=u("div"),D.innerHTML=T,F=q(),b=u("button"),b.textContent=L,p=q(),A=u("div"),M=u("div"),G=u("button"),G.textContent=le,J=q(),x=u("button"),x.textContent=Q,ae=q(),P=u("div"),U=u("input"),z=q(),O=u("label"),O.textContent=c,y=q(),B=u("input"),K=q(),R=u("label"),R.textContent=se,ne=q(),V&&V.c(),this.h()},l(C){He(e.$$.fragment,C),l=k(C),n=f(C,"DIV",{class:!0});var g=w(n);v=f(g,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),H(v)!=="svelte-5el79v"&&(v.innerHTML=_),S=k(g),r=f(g,"DIV",{id:!0,class:!0});var I=w(r);d=f(I,"DIV",{class:!0,id:!0});var j=w(d);i=f(j,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),H(i)!=="svelte-1ej9vmv"&&(i.innerHTML=s),h=k(j),D=f(j,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),H(D)!=="svelte-1j653gg"&&(D.innerHTML=T),F=k(j),b=f(j,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),H(b)!=="svelte-zgluur"&&(b.textContent=L),j.forEach(m),p=k(I),A=f(I,"DIV",{class:!0,id:!0});var E=w(A);M=f(E,"DIV",{class:!0});var X=w(M);G=f(X,"BUTTON",{class:!0,"data-svelte-h":!0}),H(G)!=="svelte-14nmzoo"&&(G.textContent=le),J=k(X),x=f(X,"BUTTON",{class:!0,"data-svelte-h":!0}),H(x)!=="svelte-xxvynj"&&(x.textContent=Q),X.forEach(m),ae=k(E),P=f(E,"DIV",{class:!0});var N=w(P);U=f(N,"INPUT",{type:!0,name:!0}),z=k(N),O=f(N,"LABEL",{for:!0,"data-svelte-h":!0}),H(O)!=="svelte-p8irzv"&&(O.textContent=c),y=k(N),B=f(N,"INPUT",{type:!0,name:!0}),K=k(N),R=f(N,"LABEL",{for:!0,"data-svelte-h":!0}),H(R)!=="svelte-1ytveqc"&&(R.textContent=se),N.forEach(m),ne=k(E),V&&V.l(E),E.forEach(m),I.forEach(m),g.forEach(m),this.h()},h(){t(v,"class","component"),t(v,"id","heaser"),t(i,"id","map"),t(i,"class","svelte-1t23qr4"),t(D,"id","map-legend"),t(D,"class","svelte-1t23qr4"),t(b,"id","export-button"),t(b,"class","svelte-1t23qr4"),t(d,"class","component column svelte-1t23qr4"),t(d,"id","mapComp"),t(G,"class","tablinks svelte-1t23qr4"),G.value="Cobenefit",ie(G,"active",o[0]=="Cobenefit"),t(x,"class","tablinks svelte-1t23qr4"),x.value="SEF",ie(x,"active",o[0]=="SEF"),t(M,"class","tab svelte-1t23qr4"),t(U,"type","radio"),t(U,"name","granularity"),U.value="LAD",U.checked=!0,t(O,"for","LAD"),t(B,"type","radio"),t(B,"name","granularity"),B.value="LSOA",t(R,"for","LSOA"),t(P,"class","component"),t(A,"class","component column svelte-1t23qr4"),t(A,"id","control-panel"),t(r,"id","map-row"),t(r,"class","row svelte-1t23qr4"),t(n,"class","page-container svelte-1t23qr4")},m(C,g){Ge(e,C,g),$(C,l,g),$(C,n,g),a(n,v),a(n,S),a(n,r),a(r,d),a(d,i),o[19](i),a(d,h),a(d,D),o[20](D),a(d,F),a(d,b),o[21](b),a(r,p),a(r,A),a(A,M),a(M,G),a(M,J),a(M,x),a(A,ae),a(A,P),a(P,U),a(P,z),a(P,O),a(P,y),a(P,B),a(P,K),a(P,R),a(A,ne),V&&V.m(A,null),o[22](n),Y=!0,W||(ee=[Z(b,"click",ot),Z(G,"click",o[8]),Z(x,"click",o[8]),Z(U,"change",o[10]),Z(B,"change",o[10])],W=!0)},p(C,g){(!Y||g[0]&1)&&ie(G,"active",C[0]=="Cobenefit"),(!Y||g[0]&1)&&ie(x,"active",C[0]=="SEF"),te===(te=oe(C))&&V?V.p(C,g):(V&&V.d(1),V=te&&te(C),V&&(V.c(),V.m(A,null)))},i(C){Y||(Re(e.$$.fragment,C),Y=!0)},o(C){je(e.$$.fragment,C),Y=!1},d(C){C&&(m(l),m(n)),ze(e,C),o[19](null),o[20](null),o[21](null),V&&V.d(),o[22](null),W=!1,ke(ee)}}}function ot(){const e=document.getElementsByClassName("maplibregl-canvas")[0].toDataURL("image/png");var l=document.createElement("a");l.download="map.png",l.href=e,l.dataset.downloadurl=["image/png",l.download,l.href].join(":"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function it(o,e,l){let{data:n}=e,v,_,S,r,d,i,s="Cobenefit",h=!1,D="BNZ",T=fe.map(c=>c.id),F="total",b="LAD",L="EPC",p;function A(){if(i.makeColorScale(!1),s=="SEF"&&be.includes(L)){const c=Ye("white","black");let y=Object.values(Le[L]);const B=y.map((R,se)=>c(se/(y.length-1)));let K=Je().domain(y).range(B);i.setColorScale(K)}S=i.legend(M()),l(4,r.innerHTML="",r),r.append(S)}function M(){if(s=="SEF")return`${Ce.filter(c=>c.id==L)[0].label} (${tt(L)})`;if(s=="Cobenefit")return"Cobenefits (£ per capita)"}Fe(async()=>{let c;b=="LAD"?c=await re(Ee(Array.from(T),"UK",F)):b=="LSOA"&&(c=await re(ye(Array.from(T),D,F))),c.forEach(y=>{y.value_per_capita=y.value_per_capita*1e6}),l(12,i=new Qe(c,b,_,"value_per_capita",!0,"Lookup_Value",!0)),i.initMap(),i.setTooltipCb(ae),S=i.legend(M()),r.append(S)});const G=c=>{const y=c.currentTarget.value;y=="total"?l(15,T=fe.map(B=>B.id)):l(15,T=[y])},le=c=>{const y=c.currentTarget.value;l(16,F=y)};function J(c,y){l(0,s=c.currentTarget.value)}const x=c=>{l(1,L=c.currentTarget.value)},Q=c=>{i.removeLayers(),i.removeSources(),l(17,b=c.currentTarget.value),l(12,i.granularity=b,i),b=="LSOA"?l(12,i.border=!1,i):l(12,i.border=!0,i),l(13,h=!0)},ae=c=>{if(s=="SEF")return be.includes(L)?`Mode value is ${Le[L][c]}`:`Mean value is ${c.toFixed(2)}`;if(s=="Cobenefit")return`£${c.toFixed(2)} per capita.`};function P(c){ce[c?"unshift":"push"](()=>{_=c,l(3,_)})}function U(c){ce[c?"unshift":"push"](()=>{r=c,l(4,r)})}function z(c){ce[c?"unshift":"push"](()=>{d=c,l(5,d)})}function O(c){ce[c?"unshift":"push"](()=>{v=c,l(2,v)})}return o.$$set=c=>{"data"in c&&l(11,n=c.data)},o.$$.update=()=>{if(o.$$.dirty[0]&520195&&i?.loaded){if(s=="Cobenefit"){if(l(12,i.dataKey="value_per_capita",i),b=="LAD")l(18,p=re(Ee(Array.from(T),"UK",F)));else if(b=="LSOA"){let c;T.length==11?c=[]:c=T,l(18,p=re(ye(c,D,F)))}}else l(0,s="SEF")&&(l(12,i.dataKey="val",i),b=="LAD"?be.includes(L)?l(18,p=re(We(L))):l(18,p=re(Xe(L))):b=="LSOA"&&l(18,p=re($e(L))));p.then(c=>{s=="Cobenefit"&&c.forEach(B=>{B.value_per_capita=B.value_per_capita*1e6});let y;s=="Cobenefit"?T.length==1?(y=JSON.parse(JSON.stringify(et(T[0]))),y.shift(),y=y.reverse()):y=["red","white","black"]:y=["white","black"],i.update(c,s,h,y),A(),l(13,h=!1)})}},[s,L,v,_,r,d,G,le,J,x,Q,n,i,h,D,T,F,b,p,P,U,z,O]}class gt extends Pe{constructor(e){super(),Ue(this,e,it,rt,we,{data:11},null,[-1,-1])}}export{gt as component};
