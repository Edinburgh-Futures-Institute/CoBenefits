import{s as Oe,n as Ne,d as o,x as dt,W as ft,i as O,b as s,z as Se,p as u,c,e as g,g as I,f as le,h as f,j as z,t as ae,X as Mt,w as Me,a as de,y as De,C as at,q as ne,B as Ie,E as Ot,r as Ct,H as Gt,Y as Dt,Q as Ut,Z as Rt,v as jt,_ as xt,A as Ze}from"../chunks/ChnDNINx.js";import{S as it,i as st,d as Qe,t as Je,a as $e,m as et,c as tt,b as lt}from"../chunks/BjCzwqlE.js";import{e as ke,N as qt}from"../chunks/DV3eCbeS.js";import{b as Fe}from"../chunks/Be9ybBC4.js";import{g as Wt}from"../chunks/C5_Xi-4x.js";import{H as nt,O as Xt,P as Et}from"../chunks/s0pE0-UL.js";import{g as ut,C as ht,e as Yt,f as Kt,h as Zt}from"../chunks/Dq-mM_5l.js";import{b as mt}from"../chunks/DfkbkWuS.js";import{g as Qt,n as Jt}from"../chunks/C4IO1USO.js";function Vt(a,e,t){const l=a.slice();return l[10]=e[t],l}function kt(a){let e,t=ke(a[2]),l=[];for(let n=0;n<t.length;n+=1)l[n]=yt(Vt(a,t,n));return{c(){e=f("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=c(n,"UL",{class:!0});var i=g(e);for(let r=0;r<l.length;r+=1)l[r].l(i);i.forEach(o),this.h()},h(){u(e,"class","suggestions svelte-1kj8esc")},m(n,i){O(n,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(n,i){if(i&12){t=ke(n[2]);let r;for(r=0;r<t.length;r+=1){const p=Vt(n,t,r);l[r]?l[r].p(p,i):(l[r]=yt(p),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(n){n&&o(e),Me(l,n)}}}function yt(a){let e,t=a[10][1]+"",l,n,i;function r(){return a[7](a[10])}return{c(){e=f("li"),l=ae(t),this.h()},l(p){e=c(p,"LI",{class:!0});var d=g(e);l=le(d,t),d.forEach(o),this.h()},h(){u(e,"class","svelte-1kj8esc")},m(p,d){O(p,e,d),s(e,l),n||(i=Se(e,"click",r),n=!0)},p(p,d){a=p,d&4&&t!==(t=a[10][1]+"")&&de(l,t)},d(p){p&&o(e),n=!1,i()}}}function $t(a){let e,t,l,n,i,r,p,d,m,B,h=a[2].length&&kt(a);return{c(){e=f("div"),t=f("div"),l=f("input"),n=z(),i=f("button"),r=ae("See Report"),d=z(),h&&h.c(),this.h()},l(D){e=c(D,"DIV",{class:!0});var b=g(e);t=c(b,"DIV",{class:!0});var C=g(t);l=c(C,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,class:!0}),n=I(C),i=c(C,"BUTTON",{type:!0,class:!0});var F=g(i);r=le(F,"See Report"),F.forEach(o),C.forEach(o),d=I(b),h&&h.l(b),b.forEach(o),this.h()},h(){u(l,"type","text"),u(l,"placeholder","Type local authority name to search..."),u(l,"autocomplete","off"),u(l,"class","svelte-1kj8esc"),u(i,"type","button"),u(i,"class","search-btn svelte-1kj8esc"),i.disabled=p=!a[1],u(t,"class","input-group svelte-1kj8esc"),u(e,"class","autocomplete svelte-1kj8esc")},m(D,b){O(D,e,b),s(e,t),s(t,l),ft(l,a[0]),s(t,n),s(t,i),s(i,r),s(e,d),h&&h.m(e,null),m||(B=[Se(l,"input",a[6]),Se(i,"click",a[4])],m=!0)},p(D,[b]){b&1&&l.value!==D[0]&&ft(l,D[0]),b&2&&p!==(p=!D[1])&&(i.disabled=p),D[2].length?h?h.p(D,b):(h=kt(D),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:Ne,o:Ne,d(D){D&&o(e),h&&h.d(),m=!1,dt(B)}}}function el(a,e,t){let l;const n=Mt();let{items:i}=e,r="",p=null;const d=Object.entries(i);function m([b,C]){t(0,r=C),t(1,p=b),n("select",b)}function B(){p&&n("search",p)}function h(){r=this.value,t(0,r)}const D=b=>m(b);return a.$$set=b=>{"items"in b&&t(5,i=b.items)},a.$$.update=()=>{a.$$.dirty&1&&t(2,l=r?d.filter(([b,C])=>C.toLowerCase().includes(r.toLowerCase())).slice(0,10):[])},[r,p,l,m,B,i,h,D]}class tl extends it{constructor(e){super(),st(this,e,el,$t,Oe,{items:5})}}function Bt(a,e,t){const l=a.slice();return l[11]=e[t],l}function Lt(a){let e,t=(a[6]==="total"?a[8](a[11].total_value,a[1],a[2],a[11].co_benefit_type,a[5]):a[8](a[11].value_per_capita,a[3],a[4],a[11].co_benefit_type,a[5]))+"",l;return{c(){e=new Gt(!1),l=Ct(),this.h()},l(n){e=Ot(n,!1),l=Ct(),this.h()},h(){e.a=l},m(n,i){e.m(t,n,i),O(n,l,i)},p(n,i){i&127&&t!==(t=(n[6]==="total"?n[8](n[11].total_value,n[1],n[2],n[11].co_benefit_type,n[5]):n[8](n[11].value_per_capita,n[3],n[4],n[11].co_benefit_type,n[5]))+"")&&e.p(t)},d(n){n&&(o(l),e.d())}}}function ll(a){let e,t=a[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=f("span"),l=ae(t)},l(n){e=c(n,"SPAN",{});var i=g(e);l=le(i,t),i.forEach(o)},m(n,i){O(n,e,i),s(e,l)},p(n,i){i&1&&t!==(t=n[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&de(l,t)},d(n){n&&o(e)}}}function al(a){let e,t=a[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=f("span"),l=ae(t)},l(n){e=c(n,"SPAN",{});var i=g(e);l=le(i,t),i.forEach(o)},m(n,i){O(n,e,i),s(e,l)},p(n,i){i&1&&t!==(t=n[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&de(l,t)},d(n){n&&o(e)}}}function Tt(a){let e,t,l,n,i,r,p,d=a[7](a[11].co_benefit_type)+"",m,B,h,D,b,C=a[6],F,w,S,E=Lt(a);function _(L,A){return L[6]==="total"?al:ll}let G=_(a),H=G(a);return{c(){e=f("tr"),t=f("td"),l=f("div"),n=f("img"),r=z(),p=f("a"),m=ae(d),h=z(),D=f("td"),b=f("div"),E.c(),F=z(),w=f("td"),H.c(),S=z(),this.h()},l(L){e=c(L,"TR",{});var A=g(e);t=c(A,"TD",{});var Y=g(t);l=c(Y,"DIV",{class:!0});var $=g(l);n=c($,"IMG",{src:!0,alt:!0,class:!0}),r=I($),p=c($,"A",{href:!0});var J=g(p);m=le(J,d),J.forEach(o),$.forEach(o),Y.forEach(o),h=I(A),D=c(A,"TD",{});var P=g(D);b=c(P,"DIV",{class:!0});var T=g(b);E.l(T),T.forEach(o),P.forEach(o),F=I(A),w=c(A,"TD",{});var U=g(w);H.l(U),U.forEach(o),S=I(A),A.forEach(o),this.h()},h(){Ie(n.src,i=ut(a[11].co_benefit_type))||u(n,"src",i),u(n,"alt","Icon"),u(n,"class","in-table-icon"),u(p,"href",B=Fe+"/cobenefit?cobenefit="+a[11].co_benefit_type),u(l,"class","coben-content"),u(b,"class","bar-cell")},m(L,A){O(L,e,A),s(e,t),s(t,l),s(l,n),s(l,r),s(l,p),s(p,m),s(e,h),s(e,D),s(D,b),E.m(b,null),s(e,F),s(e,w),H.m(w,null),s(e,S)},p(L,A){A&1&&!Ie(n.src,i=ut(L[11].co_benefit_type))&&u(n,"src",i),A&1&&d!==(d=L[7](L[11].co_benefit_type)+"")&&de(m,d),A&1&&B!==(B=Fe+"/cobenefit?cobenefit="+L[11].co_benefit_type)&&u(p,"href",B),A&64&&Oe(C,C=L[6])?(E.d(1),E=Lt(L),E.c(),E.m(b,null)):E.p(L,A),G===(G=_(L))&&H?H.p(L,A):(H.d(1),H=G(L),H&&(H.c(),H.m(w,null)))},d(L){L&&o(e),E.d(L),H.d()}}}function nl(a){let e,t,l,n="Total",i,r,p="Per Capita",d,m,B,h,D,b="Name",C,F,w=a[6]==="total"?"Total":"Per Capita",S,E,_,G=a[6]==="total"?"£, billion":"£",H,L,A,Y,$,J=ke(a[0]),P=[];for(let T=0;T<J.length;T+=1)P[T]=Tt(Bt(a,J,T));return{c(){e=f("div"),t=f("div"),l=f("button"),l.textContent=n,i=z(),r=f("button"),r.textContent=p,d=z(),m=f("table"),B=f("thead"),h=f("tr"),D=f("th"),D.textContent=b,C=z(),F=f("th"),S=ae(w),E=z(),_=f("th"),H=ae(G),L=z(),A=f("tbody");for(let T=0;T<P.length;T+=1)P[T].c();this.h()},l(T){e=c(T,"DIV",{class:!0});var U=g(e);t=c(U,"DIV",{class:!0});var M=g(t);l=c(M,"BUTTON",{"data-svelte-h":!0}),ne(l)!=="svelte-15mf98g"&&(l.textContent=n),i=I(M),r=c(M,"BUTTON",{"data-svelte-h":!0}),ne(r)!=="svelte-1ts3a4f"&&(r.textContent=p),M.forEach(o),U.forEach(o),d=I(T),m=c(T,"TABLE",{class:!0});var K=g(m);B=c(K,"THEAD",{});var j=g(B);h=c(j,"TR",{});var ee=g(h);D=c(ee,"TH",{"data-svelte-h":!0}),ne(D)!=="svelte-13ju7y1"&&(D.textContent=b),C=I(ee),F=c(ee,"TH",{style:!0});var X=g(F);S=le(X,w),X.forEach(o),E=I(ee),_=c(ee,"TH",{style:!0});var k=g(_);H=le(k,G),k.forEach(o),ee.forEach(o),j.forEach(o),L=I(K),A=c(K,"TBODY",{});var R=g(A);for(let y=0;y<P.length;y+=1)P[y].l(R);R.forEach(o),K.forEach(o),this.h()},h(){De(l,"selected",a[6]==="total"),De(r,"selected",a[6]==="per_capita"),u(t,"class","button-group"),u(e,"class","controls"),at(F,"width","180px"),at(_,"width","80px"),u(m,"class","data-table")},m(T,U){O(T,e,U),s(e,t),s(t,l),s(t,i),s(t,r),O(T,d,U),O(T,m,U),s(m,B),s(B,h),s(h,D),s(h,C),s(h,F),s(F,S),s(h,E),s(h,_),s(_,H),s(m,L),s(m,A);for(let M=0;M<P.length;M+=1)P[M]&&P[M].m(A,null);Y||($=[Se(l,"click",a[9]),Se(r,"click",a[10])],Y=!0)},p(T,[U]){if(U&64&&De(l,"selected",T[6]==="total"),U&64&&De(r,"selected",T[6]==="per_capita"),U&64&&w!==(w=T[6]==="total"?"Total":"Per Capita")&&de(S,w),U&64&&G!==(G=T[6]==="total"?"£, billion":"£")&&de(H,G),U&511){J=ke(T[0]);let M;for(M=0;M<J.length;M+=1){const K=Bt(T,J,M);P[M]?P[M].p(K,U):(P[M]=Tt(K),P[M].c(),P[M].m(A,null))}for(;M<P.length;M+=1)P[M].d(1);P.length=J.length}},i:Ne,o:Ne,d(T){T&&(o(e),o(d),o(m)),Me(P,T),Y=!1,dt($)}}}function il(a,e,t){let{aggregationPerCapitaPerBenefit:l}=e,{minCoBenefValue:n}=e,{maxCoBenefValue:i}=e,{minHHCoBenefValue:r}=e,{maxHHCoBenefValue:p}=e,{COBENEFS_SCALE:d}=e;function m(C){return ht.find(F=>F.id===C)?.label??C}let B="total";function h(C,F,w,S,E){const _=E(S);return nt({width:100,height:20,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,x:{domain:[F,w],axis:null},marks:[Xt([0],{stroke:"#3C3C3C"}),mt([C],{x:H=>H,y:0,fill:_})]}).outerHTML}const D=()=>t(6,B="total"),b=()=>t(6,B="per_capita");return a.$$set=C=>{"aggregationPerCapitaPerBenefit"in C&&t(0,l=C.aggregationPerCapitaPerBenefit),"minCoBenefValue"in C&&t(1,n=C.minCoBenefValue),"maxCoBenefValue"in C&&t(2,i=C.maxCoBenefValue),"minHHCoBenefValue"in C&&t(3,r=C.minHHCoBenefValue),"maxHHCoBenefValue"in C&&t(4,p=C.maxHHCoBenefValue),"COBENEFS_SCALE"in C&&t(5,d=C.COBENEFS_SCALE)},[l,n,i,r,p,d,B,m,h,D,b]}class sl extends it{constructor(e){super(),st(this,e,il,nl,Oe,{aggregationPerCapitaPerBenefit:0,minCoBenefValue:1,maxCoBenefValue:2,minHHCoBenefValue:3,maxHHCoBenefValue:4,COBENEFS_SCALE:5})}}function wt(a,e,t){const l=a.slice();return l[16]=e[t],l}function Ht(a,e,t){const l=a.slice();return l[19]=e[t],l}function St(a){let e,t=a[19].label+"",l;return{c(){e=f("option"),l=ae(t),this.h()},l(n){e=c(n,"OPTION",{});var i=g(e);l=le(i,t),i.forEach(o),this.h()},h(){e.__value=a[19].value,ft(e,e.__value)},m(n,i){O(n,e,i),s(e,l)},p:Ne,d(n){n&&o(e)}}}function ol(a){let e,t=a[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=f("span"),l=ae(t)},l(n){e=c(n,"SPAN",{});var i=g(e);l=le(i,t),i.forEach(o)},m(n,i){O(n,e,i),s(e,l)},p(n,i){i&2&&t!==(t=n[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&de(l,t)},d(n){n&&o(e)}}}function rl(a){let e,t=a[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=f("span"),l=ae(t)},l(n){e=c(n,"SPAN",{});var i=g(e);l=le(i,t),i.forEach(o)},m(n,i){O(n,e,i),s(e,l)},p(n,i){i&2&&t!==(t=n[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&de(l,t)},d(n){n&&o(e)}}}function At(a){let e,t,l,n=(a[5][a[16].LAD]??a[16].LAD)+"",i,r,p,d,m,B,h=(a[2]==="total"?a[9](a[16].total_value,a[3]):a[10](a[16].value_per_capita,a[4]))+"",D,b,C;function F(E,_){return E[2]==="total"?rl:ol}let w=F(a),S=w(a);return{c(){e=f("tr"),t=f("td"),l=f("a"),i=ae(n),p=z(),d=f("td"),m=f("div"),B=new Gt(!1),D=z(),b=f("td"),S.c(),C=z(),this.h()},l(E){e=c(E,"TR",{});var _=g(e);t=c(_,"TD",{});var G=g(t);l=c(G,"A",{href:!0});var H=g(l);i=le(H,n),H.forEach(o),G.forEach(o),p=I(_),d=c(_,"TD",{});var L=g(d);m=c(L,"DIV",{class:!0});var A=g(m);B=Ot(A,!1),A.forEach(o),L.forEach(o),D=I(_),b=c(_,"TD",{});var Y=g(b);S.l(Y),Y.forEach(o),C=I(_),_.forEach(o),this.h()},h(){u(l,"href",r=Fe+"/location?location="+a[16].LAD),B.a=null,u(m,"class","bar-cell")},m(E,_){O(E,e,_),s(e,t),s(t,l),s(l,i),s(e,p),s(e,d),s(d,m),B.m(h,m),s(e,D),s(e,b),S.m(b,null),s(e,C)},p(E,_){_&34&&n!==(n=(E[5][E[16].LAD]??E[16].LAD)+"")&&de(i,n),_&2&&r!==(r=Fe+"/location?location="+E[16].LAD)&&u(l,"href",r),_&30&&h!==(h=(E[2]==="total"?E[9](E[16].total_value,E[3]):E[10](E[16].value_per_capita,E[4]))+"")&&B.p(h),w===(w=F(E))&&S?S.p(E,_):(S.d(1),S=w(E),S&&(S.c(),S.m(b,null)))},d(E){E&&o(e),S.d()}}}function cl(a){let e,t,l="Nation:",n,i,r,p,d,m="Total",B,h,D="Per Capita",b,C,F,w,S,E='Name <span style="font-weight:300; color: #545454">(Top 12 in display)</span>',_,G,H=a[2]==="total"?"Total":"Per Capita",L,A,Y,$=a[2]==="total"?"£, billion":"£",J,P,T,U,M,K=ke(a[7]),j=[];for(let k=0;k<K.length;k+=1)j[k]=St(Ht(a,K,k));let ee=ke(a[1]),X=[];for(let k=0;k<ee.length;k+=1)X[k]=At(wt(a,ee,k));return{c(){e=f("div"),t=f("label"),t.textContent=l,n=z(),i=f("select");for(let k=0;k<j.length;k+=1)j[k].c();r=z(),p=f("div"),d=f("button"),d.textContent=m,B=z(),h=f("button"),h.textContent=D,b=z(),C=f("table"),F=f("thead"),w=f("tr"),S=f("th"),S.innerHTML=E,_=z(),G=f("th"),L=ae(H),A=z(),Y=f("th"),J=ae($),P=z(),T=f("tbody");for(let k=0;k<X.length;k+=1)X[k].c();this.h()},l(k){e=c(k,"DIV",{class:!0});var R=g(e);t=c(R,"LABEL",{"data-svelte-h":!0}),ne(t)!=="svelte-1ecnfnj"&&(t.textContent=l),n=I(R),i=c(R,"SELECT",{});var y=g(i);for(let x=0;x<j.length;x+=1)j[x].l(y);y.forEach(o),r=I(R),p=c(R,"DIV",{class:!0});var ie=g(p);d=c(ie,"BUTTON",{"data-svelte-h":!0}),ne(d)!=="svelte-2dev6e"&&(d.textContent=m),B=I(ie),h=c(ie,"BUTTON",{"data-svelte-h":!0}),ne(h)!=="svelte-1q4fgxf"&&(h.textContent=D),ie.forEach(o),R.forEach(o),b=I(k),C=c(k,"TABLE",{class:!0});var ce=g(C);F=c(ce,"THEAD",{});var Ce=g(F);w=c(Ce,"TR",{});var Ee=g(w);S=c(Ee,"TH",{"data-svelte-h":!0}),ne(S)!=="svelte-1homman"&&(S.innerHTML=E),_=I(Ee),G=c(Ee,"TH",{style:!0});var Ae=g(G);L=le(Ae,H),Ae.forEach(o),A=I(Ee),Y=c(Ee,"TH",{style:!0});var ve=g(Y);J=le(ve,$),ve.forEach(o),Ee.forEach(o),Ce.forEach(o),P=I(ce),T=c(ce,"TBODY",{});var V=g(T);for(let x=0;x<X.length;x+=1)X[x].l(V);V.forEach(o),ce.forEach(o),this.h()},h(){a[0]===void 0&&Ut(()=>a[13].call(i)),De(d,"selected",a[2]==="total"),De(h,"selected",a[2]==="per_capita"),u(p,"class","button-group"),u(e,"class","controls"),at(G,"width","120px"),at(Y,"width","80px"),u(C,"class","data-table")},m(k,R){O(k,e,R),s(e,t),s(e,n),s(e,i);for(let y=0;y<j.length;y+=1)j[y]&&j[y].m(i,null);Dt(i,a[0],!0),s(e,r),s(e,p),s(p,d),s(p,B),s(p,h),O(k,b,R),O(k,C,R),s(C,F),s(F,w),s(w,S),s(w,_),s(w,G),s(G,L),s(w,A),s(w,Y),s(Y,J),s(C,P),s(C,T);for(let y=0;y<X.length;y+=1)X[y]&&X[y].m(T,null);U||(M=[Se(i,"change",a[13]),Se(i,"change",a[8]),Se(d,"click",a[14]),Se(h,"click",a[15])],U=!0)},p(k,[R]){if(R&128){K=ke(k[7]);let y;for(y=0;y<K.length;y+=1){const ie=Ht(k,K,y);j[y]?j[y].p(ie,R):(j[y]=St(ie),j[y].c(),j[y].m(i,null))}for(;y<j.length;y+=1)j[y].d(1);j.length=K.length}if(R&129&&Dt(i,k[0]),R&4&&De(d,"selected",k[2]==="total"),R&4&&De(h,"selected",k[2]==="per_capita"),R&4&&H!==(H=k[2]==="total"?"Total":"Per Capita")&&de(L,H),R&4&&$!==($=k[2]==="total"?"£, billion":"£")&&de(J,$),R&1598){ee=ke(k[1]);let y;for(y=0;y<ee.length;y+=1){const ie=wt(k,ee,y);X[y]?X[y].p(ie,R):(X[y]=At(ie),X[y].c(),X[y].m(T,null))}for(;y<X.length;y+=1)X[y].d(1);X.length=ee.length}},i:Ne,o:Ne,d(k){k&&(o(e),o(b),o(C)),Me(j,k),Me(X,k),U=!1,dt(M)}}}function fl(a,e,t){const l=Mt();let{ladData:n=[]}=e,{region:i}=e,{sortBy:r}=e,{maxLADValue:p}=e,{maxHHLADValue:d}=e,{LADToName:m={}}=e,{viewMode:B="total"}=e,{selectedRegion:h="All"}=e;const D=[{label:"All",value:"All"},{label:"England",value:"England"},{label:"Wales",value:"Wales"},{label:"Scotland",value:"Scotland"},{label:"Northern Ireland",value:"NI"}];function b(_){l("filterChange",{region:_.target.value,sortBy:r})}function C(_,G){return nt({width:80,height:20,margin:0,x:{domain:[0,G],axis:null},marks:[mt([_],{x:L=>L,y:0,fill:"#ccc"})]}).outerHTML}function F(_,G){return nt({width:80,height:20,margin:0,x:{domain:[0,G],axis:null},marks:[mt([_],{x:L=>L,y:0,fill:"#ccc"})]}).outerHTML}function w(){i=Rt(this),t(0,i),t(7,D)}const S=()=>l("filterChange",{region:i,sortBy:"total"}),E=()=>l("filterChange",{region:i,sortBy:"per_capita"});return a.$$set=_=>{"ladData"in _&&t(1,n=_.ladData),"region"in _&&t(0,i=_.region),"sortBy"in _&&t(2,r=_.sortBy),"maxLADValue"in _&&t(3,p=_.maxLADValue),"maxHHLADValue"in _&&t(4,d=_.maxHHLADValue),"LADToName"in _&&t(5,m=_.LADToName),"viewMode"in _&&t(11,B=_.viewMode),"selectedRegion"in _&&t(12,h=_.selectedRegion)},[i,n,r,p,d,m,l,D,b,C,F,B,h,w,S,E]}class ul extends it{constructor(e){super(),st(this,e,fl,cl,Oe,{ladData:1,region:0,sortBy:2,maxLADValue:3,maxHHLADValue:4,LADToName:5,viewMode:11,selectedRegion:12})}}function It(a,e,t){const l=a.slice();return l[42]=e[t],l[44]=t,l}function zt(a){let e,t,l,n,i,r,p;return{c(){e=f("div"),t=f("img"),i=z(),r=f("img"),this.h()},l(d){e=c(d,"DIV",{class:!0});var m=g(e);t=c(m,"IMG",{class:!0,src:!0,alt:!0}),i=I(m),r=c(m,"IMG",{class:!0,src:!0,alt:!0}),m.forEach(o),this.h()},h(){u(t,"class","slide-image"),Ie(t.src,l=a[42].image)||u(t,"src",l),u(t,"alt",n=a[42].label),u(r,"class","slide-map svelte-1m2rzix"),Ie(r.src,p=a[42].mapImage)||u(r,"src",p),u(r,"alt","Map overlay"),u(e,"class","hero-slide svelte-1m2rzix"),De(e,"active",a[44]===a[16]),De(e,"previous",a[44]===a[17])},m(d,m){O(d,e,m),s(e,t),s(e,i),s(e,r)},p(d,m){m[0]&8192&&!Ie(t.src,l=d[42].image)&&u(t,"src",l),m[0]&8192&&n!==(n=d[42].label)&&u(t,"alt",n),m[0]&8192&&!Ie(r.src,p=d[42].mapImage)&&u(r,"src",p),m[0]&65536&&De(e,"active",d[44]===d[16]),m[0]&131072&&De(e,"previous",d[44]===d[17])},d(d){d&&o(e)}}}function Nt(a){let e,t,l;return{c(){e=f("div"),t=f("img"),this.h()},l(n){e=c(n,"DIV",{class:!0});var i=g(e);t=c(i,"IMG",{src:!0,alt:!0,class:!0}),i.forEach(o),this.h()},h(){Ie(t.src,l=a[12])||u(t,"src",l),u(t,"alt","Icon"),u(t,"class","svelte-1m2rzix"),u(e,"class","waffle-icon svelte-1m2rzix")},m(n,i){O(n,e,i),s(e,t)},p(n,i){i[0]&4096&&!Ie(t.src,l=n[12])&&u(t,"src",l)},d(n){n&&o(e)}}}function hl(a){let e,t="National costs";return{c(){e=f("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-o12owz"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-1m2rzix")},m(l,n){O(l,e,n)},d(l){l&&o(e)}}}function ml(a){let e,t="National benefits";return{c(){e=f("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-10ytukz"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-1m2rzix")},m(l,n){O(l,e,n)},d(l){l&&o(e)}}}function dl(a){let e,t="Per capita costs";return{c(){e=f("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-6pmcl0"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-1m2rzix")},m(l,n){O(l,e,n)},d(l){l&&o(e)}}}function _l(a){let e,t="Per capita benefits";return{c(){e=f("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-g1rvwk"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-1m2rzix")},m(l,n){O(l,e,n)},d(l){l&&o(e)}}}function Pt(a){let e,t,l,n,i,r,p="%",d,m,B="Contribution";return{c(){e=f("div"),t=f("div"),l=f("span"),n=ae(a[11]),i=z(),r=f("span"),r.textContent=p,d=z(),m=f("div"),m.textContent=B,this.h()},l(h){e=c(h,"DIV",{class:!0});var D=g(e);t=c(D,"DIV",{class:!0});var b=g(t);l=c(b,"SPAN",{class:!0});var C=g(l);n=le(C,a[11]),C.forEach(o),i=I(b),r=c(b,"SPAN",{class:!0,"data-svelte-h":!0}),ne(r)!=="svelte-jxggz7"&&(r.textContent=p),b.forEach(o),d=I(D),m=c(D,"DIV",{class:!0,"data-svelte-h":!0}),ne(m)!=="svelte-1ahdmih"&&(m.textContent=B),D.forEach(o),this.h()},h(){u(l,"class","waffle-big svelte-1m2rzix"),u(r,"class","small svelte-1m2rzix"),u(t,"class","waffle-value svelte-1m2rzix"),u(m,"class","waffle-caption svelte-1m2rzix"),u(e,"class","waffle-stat svelte-1m2rzix")},m(h,D){O(h,e,D),s(e,t),s(t,l),s(l,n),s(t,i),s(t,r),s(e,d),s(e,m)},p(h,D){D[0]&2048&&de(n,h[11])},d(h){h&&o(e)}}}function Ft(a){let e,t="GGGGGGGGG";return{c(){e=f("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1hoodjr"&&(e.textContent=t),this.h()},h(){u(e,"class","spinner")},m(l,n){O(l,e,n)},d(l){l&&o(e)}}}function vl(a){let e,t,l,n,i,r,p=`<img src="${Fe}/atlas-logos/logo-colored-waffle-png.png" alt="Logo" height="0px"/> <h1 class="hero-title svelte-1m2rzix">The Co-Benefits of Reaching <br/> Net Zero in the UK</h1> <p class="hero-description svelte-1m2rzix">Climate actions lower greenhouse gas (GHG) emissions but the gains for society reach further. The CO-BENS project models 11 additional benefits based on actions recommended by the Climate Change Committee (CCC) in its Seventh Carbon Budget (2025) across 45,000 communities and regions within the UK.<br/></p> <p class="hero-description svelte-1m2rzix">Explore how, when and for whom benefits emerge to further understand connections between a wide range of social, economic and environmental priorities, and drive more effective decision-making.</p> <p class="hero-description svelte-1m2rzix">To understand more about the analysis or if you would like bespoke co-benefit modelling please get in touch by emailing <a href="mailto:cobens@ed.ac.uk">cobens@ed.ac.uk</a></p>`,d,m,B,h,D,b,C,F,w,S,E,_,G,H,L,A,Y="billion",$,J,P,T,U,M,K,j,ee,X,k,R,y,ie,ce,Ce,Ee="Find My Place",Ae,ve,V,x,Z,se,ye="Explore by Local Authority",ge,W,_e,re,pe,N="Explore by Co-Benefit",oe,be,Be,Ve,Le;e=new qt({});let Te=ke(a[13]),Q=[];for(let v=0;v<Te.length;v+=1)Q[v]=zt(It(a,Te,v));let fe=a[12]&&Nt(a);function _t(v,q){return v[9]>0?ml:hl}let Ge=_t(a),we=Ge(a);function vt(v,q){return v[10]>0?_l:dl}let Ue=vt(a),He=Ue(a),ue=a[15]!==null&&Pt(a);ve=new tl({props:{items:a[20]}}),ve.$on("search",a[32]),W=new ul({props:{ladData:a[0],region:a[1],sortBy:a[2],maxLADValue:a[3],maxHHLADValue:a[4],LADToName:a[20]}}),W.$on("filterChange",a[21]),be=new sl({props:{aggregationPerCapitaPerBenefit:a[19],minCoBenefValue:a[23],maxCoBenefValue:a[22],minHHCoBenefValue:a[24],maxHHCoBenefValue:a[25],COBENEFS_SCALE:Yt}});let me=a[18]&&Ft();return{c(){lt(e.$$.fragment),t=z(),l=f("section");for(let v=0;v<Q.length;v+=1)Q[v].c();n=z(),i=f("div"),r=f("div"),r.innerHTML=p,d=z(),m=f("div"),B=f("div"),h=f("div"),fe&&fe.c(),D=z(),b=f("div"),C=ae(a[8]),F=z(),w=f("div"),S=f("div"),E=f("div"),_=f("span"),G=ae("£"),H=ae(a[9]),L=z(),A=f("span"),A.textContent=Y,$=z(),we.c(),J=z(),P=f("div"),T=f("div"),U=f("span"),M=ae("£"),K=ae(a[10]),j=z(),He.c(),ee=z(),ue&&ue.c(),X=z(),k=f("div"),R=z(),y=f("div"),ie=z(),ce=f("section"),Ce=f("h1"),Ce.textContent=Ee,Ae=z(),lt(ve.$$.fragment),V=z(),x=f("section"),Z=f("div"),se=f("h2"),se.textContent=ye,ge=z(),lt(W.$$.fragment),_e=z(),re=f("div"),pe=f("h2"),pe.textContent=N,oe=z(),lt(be.$$.fragment),Be=z(),Ve=f("main"),me&&me.c(),this.h()},l(v){tt(e.$$.fragment,v),t=I(v),l=c(v,"SECTION",{class:!0});var q=g(l);for(let ct=0;ct<Q.length;ct+=1)Q[ct].l(q);n=I(q),i=c(q,"DIV",{class:!0});var he=g(i);r=c(he,"DIV",{class:!0,"data-svelte-h":!0}),ne(r)!=="svelte-wan26l"&&(r.innerHTML=p),d=I(he),m=c(he,"DIV",{class:!0});var te=g(m);B=c(te,"DIV",{class:!0});var ze=g(B);h=c(ze,"DIV",{class:!0});var Re=g(h);fe&&fe.l(Re),D=I(Re),b=c(Re,"DIV",{class:!0});var gt=g(b);C=le(gt,a[8]),gt.forEach(o),Re.forEach(o),F=I(ze),w=c(ze,"DIV",{class:!0});var Pe=g(w);S=c(Pe,"DIV",{class:!0});var je=g(S);E=c(je,"DIV",{class:!0});var xe=g(E);_=c(xe,"SPAN",{class:!0});var ot=g(_);G=le(ot,"£"),H=le(ot,a[9]),ot.forEach(o),L=I(xe),A=c(xe,"SPAN",{class:!0,"data-svelte-h":!0}),ne(A)!=="svelte-tlhydp"&&(A.textContent=Y),xe.forEach(o),$=I(je),we.l(je),je.forEach(o),J=I(Pe),P=c(Pe,"DIV",{class:!0});var qe=g(P);T=c(qe,"DIV",{class:!0});var pt=g(T);U=c(pt,"SPAN",{class:!0});var rt=g(U);M=le(rt,"£"),K=le(rt,a[10]),rt.forEach(o),pt.forEach(o),j=I(qe),He.l(qe),qe.forEach(o),ee=I(Pe),ue&&ue.l(Pe),Pe.forEach(o),ze.forEach(o),X=I(te),k=c(te,"DIV",{class:!0}),g(k).forEach(o),R=I(te),y=c(te,"DIV",{}),g(y).forEach(o),te.forEach(o),he.forEach(o),q.forEach(o),ie=I(v),ce=c(v,"SECTION",{class:!0});var We=g(ce);Ce=c(We,"H1",{class:!0,"data-svelte-h":!0}),ne(Ce)!=="svelte-byubde"&&(Ce.textContent=Ee),Ae=I(We),tt(ve.$$.fragment,We),We.forEach(o),V=I(v),x=c(v,"SECTION",{class:!0});var Xe=g(x);Z=c(Xe,"DIV",{class:!0});var Ye=g(Z);se=c(Ye,"H2",{class:!0,"data-svelte-h":!0}),ne(se)!=="svelte-pgup4c"&&(se.textContent=ye),ge=I(Ye),tt(W.$$.fragment,Ye),Ye.forEach(o),_e=I(Xe),re=c(Xe,"DIV",{class:!0});var Ke=g(re);pe=c(Ke,"H2",{class:!0,"data-svelte-h":!0}),ne(pe)!=="svelte-9nk5va"&&(pe.textContent=N),oe=I(Ke),tt(be.$$.fragment,Ke),Ke.forEach(o),Xe.forEach(o),Be=I(v),Ve=c(v,"MAIN",{class:!0});var bt=g(Ve);me&&me.l(bt),bt.forEach(o),this.h()},h(){u(r,"class","hero-text svelte-1m2rzix"),u(b,"class","waffle-title svelte-1m2rzix"),u(h,"class","waffle-header svelte-1m2rzix"),u(_,"class","waffle-big svelte-1m2rzix"),u(A,"class","small svelte-1m2rzix"),u(E,"class","waffle-value svelte-1m2rzix"),u(S,"class","waffle-stat svelte-1m2rzix"),u(U,"class","waffle-big svelte-1m2rzix"),u(T,"class","waffle-value svelte-1m2rzix"),u(P,"class","waffle-stat svelte-1m2rzix"),u(w,"class","waffle-stats svelte-1m2rzix"),u(B,"class","waffle-label svelte-1m2rzix"),u(k,"class","waffle-bg svelte-1m2rzix"),u(m,"class","waffle-overlay svelte-1m2rzix"),u(i,"class","hero-content svelte-1m2rzix"),u(l,"class","hero-container svelte-1m2rzix"),u(Ce,"class","svelte-1m2rzix"),u(ce,"class","search-section svelte-1m2rzix"),u(se,"class","svelte-1m2rzix"),u(Z,"class","side-box svelte-1m2rzix"),u(pe,"class","svelte-1m2rzix"),u(re,"class","side-box svelte-1m2rzix"),u(x,"class","side-by-side-section svelte-1m2rzix"),u(Ve,"class","svelte-1m2rzix")},m(v,q){et(e,v,q),O(v,t,q),O(v,l,q);for(let he=0;he<Q.length;he+=1)Q[he]&&Q[he].m(l,null);s(l,n),s(l,i),s(i,r),s(i,d),s(i,m),s(m,B),s(B,h),fe&&fe.m(h,null),s(h,D),s(h,b),s(b,C),s(B,F),s(B,w),s(w,S),s(S,E),s(E,_),s(_,G),s(_,H),s(E,L),s(E,A),s(S,$),we.m(S,null),s(w,J),s(w,P),s(P,T),s(T,U),s(U,M),s(U,K),s(P,j),He.m(P,null),s(w,ee),ue&&ue.m(w,null),a[28](B),s(m,X),s(m,k),a[29](k),s(m,R),s(m,y),a[30](y),a[31](l),O(v,ie,q),O(v,ce,q),s(ce,Ce),s(ce,Ae),et(ve,ce,null),O(v,V,q),O(v,x,q),s(x,Z),s(Z,se),s(Z,ge),et(W,Z,null),s(x,_e),s(x,re),s(re,pe),s(re,oe),et(be,re,null),O(v,Be,q),O(v,Ve,q),me&&me.m(Ve,null),Le=!0},p(v,q){if(q[0]&204800){Te=ke(v[13]);let te;for(te=0;te<Te.length;te+=1){const ze=It(v,Te,te);Q[te]?Q[te].p(ze,q):(Q[te]=zt(ze),Q[te].c(),Q[te].m(l,n))}for(;te<Q.length;te+=1)Q[te].d(1);Q.length=Te.length}v[12]?fe?fe.p(v,q):(fe=Nt(v),fe.c(),fe.m(h,D)):fe&&(fe.d(1),fe=null),(!Le||q[0]&256)&&de(C,v[8]),(!Le||q[0]&512)&&de(H,v[9]),Ge!==(Ge=_t(v))&&(we.d(1),we=Ge(v),we&&(we.c(),we.m(S,null))),(!Le||q[0]&1024)&&de(K,v[10]),Ue!==(Ue=vt(v))&&(He.d(1),He=Ue(v),He&&(He.c(),He.m(P,null))),v[15]!==null?ue?ue.p(v,q):(ue=Pt(v),ue.c(),ue.m(w,null)):ue&&(ue.d(1),ue=null);const he={};q[0]&1&&(he.ladData=v[0]),q[0]&2&&(he.region=v[1]),q[0]&4&&(he.sortBy=v[2]),q[0]&8&&(he.maxLADValue=v[3]),q[0]&16&&(he.maxHHLADValue=v[4]),W.$set(he),v[18]?me||(me=Ft(),me.c(),me.m(Ve,null)):me&&(me.d(1),me=null)},i(v){Le||($e(e.$$.fragment,v),$e(ve.$$.fragment,v),$e(W.$$.fragment,v),$e(be.$$.fragment,v),Le=!0)},o(v){Je(e.$$.fragment,v),Je(ve.$$.fragment,v),Je(W.$$.fragment,v),Je(be.$$.fragment,v),Le=!1},d(v){v&&(o(t),o(l),o(ie),o(ce),o(V),o(x),o(Be),o(Ve)),Qe(e,v),Me(Q,v),fe&&fe.d(),we.d(),He.d(),ue&&ue.d(),a[28](null),a[29](null),a[30](null),a[31](null),Qe(ve),Qe(W),Qe(be),me&&me.d()}}}function gl(a,e,t){let{data:l}=e,n=[...l.aggregationPerBenefit].sort((V,x)=>x.total-V.total),i=[...l.aggregationPerCapitaPerBenefit].sort((V,x)=>x.total_value-V.total_value);console.log("aggregationPerCapitaPerBenefit",i);let r=l.totalAggregation[0].total_value_per_capita,p=[],d="All",m="total",B=0,h=0,D=l.LADToName;async function b(){const V=Jt({region:d,sortBy:m}),x=await Qt(V);t(0,p=x),t(3,B=Math.max(...x.map(Z=>Z.total_value))),t(4,h=Math.max(...x.map(Z=>Z.value_per_capita)))}function C(V){t(1,d=V.detail.region),t(2,m=V.detail.sortBy),b()}const F=Math.max(...i.map(V=>V.total_value)),w=Math.min(...i.map(V=>V.total_value)),S=Math.min(...i.map(V=>V.value_per_capita)),E=Math.max(...i.map(V=>V.value_per_capita));let _,G=[],H=null,L,A,Y,$,J,P,T=null,U=[],M,K=null,j=0,ee=0,X;function k(V){const x=_.filter(W=>W.type!=="empty").map(W=>W.type),Z=Array.from(new Set(x)),se=n.reduce((W,_e)=>W+_e.total,0),ye=[{type:null,label:"Total Co-Benefits",icon:null,totalValue:se.toFixed(2),perCapitaValue:r.toFixed(2),percentValue:"100%"},...Z.map(W=>{const re=ht.find(Q=>Q.id===W)?.label??W;let pe=ut(W);const N=n.find(Q=>Q.co_benefit_type===W),oe=i.find(Q=>Q.co_benefit_type===W),be=N?.total??0,Be=oe?.value_per_capita??0,Ve=be.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Le=Be.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Te=se>0?(be/se*100).toFixed(2):0;return console.log("percentage",W,be,se,Te),{type:W,label:re,icon:pe,totalValue:Ve,perCapitaValue:Le,percentValue:Te}})];setInterval(()=>{t(17,ee=j),t(16,j=(j+1)%ye.length);const{type:W,label:_e,icon:re,totalValue:pe,perCapitaValue:N,percentValue:oe}=ye[j];t(15,K=W),t(8,Y=_e),t(9,$=pe),t(10,J=N),t(11,P=oe),t(12,T=re),R(V,W)},5e3);const ge=ye[0];t(15,K=ge.type),t(8,Y=ge.label),t(9,$=ge.totalValue),t(10,J=ge.perCapitaValue),t(11,P=ge.percentValue),R(V,ge.type),console.log("update display",U)}function R(V,x){if(!H)return;t(5,H.innerHTML="",H);const Z=20,se=15,ye=Math.floor(V/Z),ge=se*ye,W=n.reduce((N,oe)=>N+oe.total,0),_e=[];for(const N of n){const oe=Math.round(Math.abs(N.total)/W*ge),be=N.total<0;for(let Be=0;Be<oe;Be++)_e.push({type:N.co_benefit_type,negative:be})}for(;_e.length<ge;)_e.push({type:"empty"});_e.sort((N,oe)=>N.type==="empty"?1:oe.type==="empty"?-1:N.negative&&!oe.negative?1:!N.negative&&oe.negative?-1:0),_=_e.map((N,oe)=>({x:oe%se,y:Math.floor(oe/se),...N})),G=Array.from(new Set(_.map(N=>N.type).filter(N=>N!=="empty"))),t(13,U=Kt(G));const re=x??null,pe=nt({width:Z*se,height:Z*ye,margin:0,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:ht.map(N=>N.id),range:Zt,unknown:"#eee",legend:!1},marks:[Et(_.filter(N=>!N.negative),{x:N=>N.x*Z,y:N=>N.y*Z,fill:"type",fillOpacity:N=>re&&N.type!==re?.15:1}),Et(_.filter(N=>N.negative),{x:N=>N.x*Z,y:N=>N.y*Z,stroke:"type",strokeOpacity:N=>re&&N.type!==re?.15:1,strokeWidth:1,fill:"none"})]});L&&(t(6,L.style.width=`${Z*se}px`,L),t(6,L.style.height=`${V}px`,L)),t(5,H.innerHTML="",H),H.append(pe)}function y(V){Wt(`${Fe}/location?location=${V}`)}let ie=!0;jt(()=>{b();const V=M.getBoundingClientRect().height;R(V),k(V)}),xt(()=>{clearInterval(X)});function ce(V){Ze[V?"unshift":"push"](()=>{A=V,t(7,A)})}function Ce(V){Ze[V?"unshift":"push"](()=>{L=V,t(6,L)})}function Ee(V){Ze[V?"unshift":"push"](()=>{H=V,t(5,H)})}function Ae(V){Ze[V?"unshift":"push"](()=>{M=V,t(14,M)})}const ve=V=>y(V.detail);return a.$$set=V=>{"data"in V&&t(27,l=V.data)},a.$$.update=()=>{a.$$.dirty[0]&134217728&&t(18,ie=!l)},[p,d,m,B,h,H,L,A,Y,$,J,P,T,U,M,K,j,ee,ie,i,D,C,F,w,S,E,y,l,ce,Ce,Ee,Ae,ve]}class Ll extends it{constructor(e){super(),st(this,e,gl,vl,Oe,{data:27},null,[-1,-1])}}export{Ll as component};
