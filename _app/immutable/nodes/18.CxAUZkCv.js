import{S as He,i as Ge,s as je,d as g,v as ye,D as we,o as Le,p as Se,E as ue,w as Ae,b as ee,c as a,F as Q,x as t,y as Te,h as T,e as u,f as F,z as O,A as ke,k,j as f,B as Re,G as fe,C as Me,n as ze,g as Ve,t as Pe,H as Ue,I as Ke}from"../chunks/vqp9XDtz.js";import{N as Ye,e as de}from"../chunks/81iL96uD.js";import"../chunks/IHki7fMi.js";import{i as Je,o as Ze}from"../chunks/C4dxaJ6L.js";import{b as Qe}from"../chunks/5PUMWepz.js";import{p as be}from"../chunks/BOd594CG.js";import{M as We}from"../chunks/CAn6ybig.js";import{g as re,d as qe,e as De,f as Xe,h as $e,i as et}from"../chunks/1cJRTIz9.js";import{C as pe,a as tt,S as Ee,g as Oe,b as Ce,c as xe,d as lt}from"../chunks/DQM_3w2p.js";import{F as at}from"../chunks/CE76q_-h.js";function Be(i,e,l){const s=i.slice();return s[32]=e[l],s}function Ie(i,e,l){const s=i.slice();return s[29]=e[l],s}function nt(i){let e,l,s="Social Economic Factor",h,b,S=de(Ee),o=[];for(let d=0;d<S.length;d+=1)o[d]=Fe(Be(i,S,d));return{c(){e=f("div"),l=f("h2"),l.textContent=s,h=k(),b=f("div");for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=u(d,"DIV",{class:!0});var c=F(e);l=u(c,"H2",{"data-svelte-h":!0}),O(l)!=="svelte-1ld89ev"&&(l.textContent=s),h=T(c),b=u(c,"DIV",{id:!0,class:!0});var n=F(b);for(let p=0;p<o.length;p+=1)o[p].l(n);n.forEach(g),c.forEach(g),this.h()},h(){t(b,"id","time"),t(b,"class","svelte-1t23qr4"),t(e,"class","tabcontent svelte-1t23qr4")},m(d,c){ee(d,e,c),a(e,l),a(e,h),a(e,b);for(let n=0;n<o.length;n+=1)o[n]&&o[n].m(b,null)},p(d,c){if(c[0]&514){S=de(Ee);let n;for(n=0;n<S.length;n+=1){const p=Be(d,S,n);o[n]?o[n].p(p,c):(o[n]=Fe(p),o[n].c(),o[n].m(b,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=S.length}},d(d){d&&g(e),Me(o,d)}}}function st(i){let e,l,s,h="Co-Benefits",b,S,o,d,c="Time",n,p,x,q,N,C="Total",y,_,A,w,H="2025-2029",te,J,B,W,le="2030-2034",V,P,R,U,r="2035-2039",E,I,z,G,ne="2040-2044",se,$,j,K,oe="2045-2049",ie,ce,Z=de(pe.concat({id:"total",label:"Total"})),m=[];for(let v=0;v<Z.length;v+=1)m[v]=Ne(Ie(i,Z,v));return{c(){e=f("div"),l=f("div"),s=f("h2"),s.textContent=h,b=k();for(let v=0;v<m.length;v+=1)m[v].c();S=k(),o=f("div"),d=f("h2"),d.textContent=c,n=k(),p=f("div"),x=f("label"),q=f("input"),N=f("span"),N.textContent=C,y=k(),_=f("label"),A=f("input"),w=f("span"),w.textContent=H,te=k(),J=f("label"),B=f("input"),W=f("span"),W.textContent=le,V=k(),P=f("label"),R=f("input"),U=f("span"),U.textContent=r,E=k(),I=f("label"),z=f("input"),G=f("span"),G.textContent=ne,se=k(),$=f("label"),j=f("input"),K=f("span"),K.textContent=oe,this.h()},l(v){e=u(v,"DIV",{class:!0});var D=F(e);l=u(D,"DIV",{class:!0});var L=F(l);s=u(L,"H2",{"data-svelte-h":!0}),O(s)!=="svelte-uglilz"&&(s.textContent=h),b=T(L);for(let ge=0;ge<m.length;ge+=1)m[ge].l(L);L.forEach(g),S=T(D),o=u(D,"DIV",{class:!0});var Y=F(o);d=u(Y,"H2",{"data-svelte-h":!0}),O(d)!=="svelte-hletp"&&(d.textContent=c),n=T(Y),p=u(Y,"DIV",{id:!0,class:!0});var M=F(p);x=u(M,"LABEL",{class:!0});var ae=F(x);q=u(ae,"INPUT",{type:!0,name:!0,class:!0}),N=u(ae,"SPAN",{class:!0,"data-svelte-h":!0}),O(N)!=="svelte-2fqrek"&&(N.textContent=C),ae.forEach(g),y=T(M),_=u(M,"LABEL",{class:!0});var X=F(_);A=u(X,"INPUT",{type:!0,name:!0,class:!0}),w=u(X,"SPAN",{class:!0,"data-svelte-h":!0}),O(w)!=="svelte-177152l"&&(w.textContent=H),X.forEach(g),te=T(M),J=u(M,"LABEL",{class:!0});var ve=F(J);B=u(ve,"INPUT",{type:!0,name:!0,class:!0}),W=u(ve,"SPAN",{class:!0,"data-svelte-h":!0}),O(W)!=="svelte-sne3j9"&&(W.textContent=le),ve.forEach(g),V=T(M),P=u(M,"LABEL",{class:!0});var he=F(P);R=u(he,"INPUT",{type:!0,name:!0,class:!0}),U=u(he,"SPAN",{class:!0,"data-svelte-h":!0}),O(U)!=="svelte-13ifhof"&&(U.textContent=r),he.forEach(g),E=T(M),I=u(M,"LABEL",{class:!0});var me=F(I);z=u(me,"INPUT",{type:!0,name:!0,class:!0}),G=u(me,"SPAN",{class:!0,"data-svelte-h":!0}),O(G)!=="svelte-1pug1mv"&&(G.textContent=ne),me.forEach(g),se=T(M),$=u(M,"LABEL",{class:!0});var _e=F($);j=u(_e,"INPUT",{type:!0,name:!0,class:!0}),K=u(_e,"SPAN",{class:!0,"data-svelte-h":!0}),O(K)!=="svelte-3f05xd"&&(K.textContent=oe),_e.forEach(g),M.forEach(g),Y.forEach(g),D.forEach(g),this.h()},h(){t(l,"class","component"),t(q,"type","radio"),t(q,"name","toggle"),q.value="total",q.checked=!0,t(q,"class","svelte-1t23qr4"),t(N,"class","svelte-1t23qr4"),t(x,"class","time-radio svelte-1t23qr4"),t(A,"type","radio"),t(A,"name","toggle"),A.value="Y2025_2029",t(A,"class","svelte-1t23qr4"),t(w,"class","svelte-1t23qr4"),t(_,"class","time-radio svelte-1t23qr4"),t(B,"type","radio"),t(B,"name","toggle"),B.value="Y2030_2034",t(B,"class","svelte-1t23qr4"),t(W,"class","svelte-1t23qr4"),t(J,"class","time-radio svelte-1t23qr4"),t(R,"type","radio"),t(R,"name","toggle"),R.value="Y2035_2039",t(R,"class","svelte-1t23qr4"),t(U,"class","svelte-1t23qr4"),t(P,"class","time-radio svelte-1t23qr4"),t(z,"type","radio"),t(z,"name","toggle"),z.value="Y2040_2044",t(z,"class","svelte-1t23qr4"),t(G,"class","svelte-1t23qr4"),t(I,"class","time-radio svelte-1t23qr4"),t(j,"type","radio"),t(j,"name","toggle"),j.value="Y2045_2049",t(j,"class","svelte-1t23qr4"),t(K,"class","svelte-1t23qr4"),t($,"class","time-radio svelte-1t23qr4"),t(p,"id","time"),t(p,"class","svelte-1t23qr4"),t(o,"class","component"),t(e,"class","tabcontent svelte-1t23qr4")},m(v,D){ee(v,e,D),a(e,l),a(l,s),a(l,b);for(let L=0;L<m.length;L+=1)m[L]&&m[L].m(l,null);a(e,S),a(e,o),a(o,d),a(o,n),a(o,p),a(p,x),a(x,q),a(x,N),a(p,y),a(p,_),a(_,A),a(_,w),a(p,te),a(p,J),a(J,B),a(J,W),a(p,V),a(p,P),a(P,R),a(P,U),a(p,E),a(p,I),a(I,z),a(I,G),a(p,se),a(p,$),a($,j),a($,K),ie||(ce=[Q(q,"change",i[7]),Q(A,"change",i[7]),Q(B,"change",i[7]),Q(R,"change",i[7]),Q(z,"change",i[7]),Q(j,"change",i[7])],ie=!0)},p(v,D){if(D[0]&64){Z=de(pe.concat({id:"total",label:"Total"}));let L;for(L=0;L<Z.length;L+=1){const Y=Ie(v,Z,L);m[L]?m[L].p(Y,D):(m[L]=Ne(Y),m[L].c(),m[L].m(l,null))}for(;L<m.length;L+=1)m[L].d(1);m.length=Z.length}},d(v){v&&g(e),Me(m,v),ie=!1,we(ce)}}}function Fe(i){let e,l,s,h,b=i[32].label+"",S,o,d,c;return{c(){e=f("input"),s=k(),h=f("label"),S=Pe(b),o=f("br"),this.h()},l(n){e=u(n,"INPUT",{type:!0,id:!0,name:!0,class:!0}),s=T(n),h=u(n,"LABEL",{for:!0});var p=F(h);S=Ve(p,b),p.forEach(g),o=u(n,"BR",{}),this.h()},h(){t(e,"type","radio"),t(e,"id","html"),t(e,"name","fav_language"),e.value=i[32].id,e.checked=l=i[32].id==i[1],t(e,"class","svelte-1t23qr4"),t(h,"for","html")},m(n,p){ee(n,e,p),ee(n,s,p),ee(n,h,p),a(h,S),ee(n,o,p),d||(c=Q(e,"change",i[9]),d=!0)},p(n,p){p[0]&2&&l!==(l=n[32].id==n[1])&&(e.checked=l)},d(n){n&&(g(e),g(s),g(h),g(o)),d=!1,c()}}}function rt(i){let e,l;return{c(){e=f("img"),this.h()},l(s){e=u(s,"IMG",{style:!0,class:!0,src:!0}),this.h()},h(){Ke(e,"opacity","0"),t(e,"class","icon svelte-1t23qr4"),Ue(e.src,l=Oe("Air quality"))||t(e,"src",l)},m(s,h){ee(s,e,h)},d(s){s&&g(e)}}}function ot(i){let e,l;return{c(){e=f("img"),this.h()},l(s){e=u(s,"IMG",{alt:!0,class:!0,src:!0}),this.h()},h(){t(e,"alt","cobenefit icon"),t(e,"class","icon svelte-1t23qr4"),Ue(e.src,l=Oe(i[29].id))||t(e,"src",l)},m(s,h){ee(s,e,h)},d(s){s&&g(e)}}}function Ne(i){let e,l,s,h,b,S=i[29].label+"",o,d,c,n,p,x;function q(y,_){return y[29].id!="total"?ot:rt}let C=q(i)(i);return{c(){e=f("div"),C.c(),l=k(),s=f("input"),h=k(),b=f("a"),o=Pe(S),d=k(),c=f("br"),n=k(),this.h()},l(y){e=u(y,"DIV",{class:!0});var _=F(e);C.l(_),l=T(_),s=u(_,"INPUT",{type:!0,name:!0}),h=T(_),b=u(_,"A",{class:!0,href:!0});var A=F(b);o=Ve(A,S),A.forEach(g),d=T(_),c=u(_,"BR",{}),n=T(_),_.forEach(g),this.h()},h(){t(s,"type","radio"),t(s,"name","cobenef"),s.value=i[29].id,s.checked=!0,t(b,"class","link"),t(b,"href",Qe+"/cobenefit?cobenefit="+i[29].id),t(e,"class","checkbox-div svelte-1t23qr4")},m(y,_){ee(y,e,_),C.m(e,null),a(e,l),a(e,s),a(e,h),a(e,b),a(b,o),a(e,d),a(e,c),a(e,n),p||(x=Q(s,"change",i[6]),p=!0)},p:ze,d(y){y&&g(e),C.d(),p=!1,x()}}}function it(i){let e,l,s,h,b=`<h2>Map</h2> <p>This interactive map allows to explore both the co-benefit values (per capita) and the socio-economic factors
            at the local
            authorities and datazones levels.</p> <p><strong>Co-Benefits:</strong> The total co-benefit per capita is initially shown. The values go from white
            (low) to black (high), and negative values are shown in red. Individual co-benefit can be selected with the
            radio buttons on the right.</p> <p><strong>Socio-Economic Factors:</strong> The average values are shown for numerical factors while the mode is
            shown for categorical factors. Values go from white for low values to black for high values (when values can
            be ordered).</p>`,S,o,d,c,n="",p,x,q="",N,C,y="Export",_,A,w,H,te="CoBenefits",J,B,W=`Socio-Economic
                    Factors`,le,V,P,R,U,r="Local Authorities",E,I,z,G,ne="Data Zones",se,$,j,K,oe,ie;e=new Ye({});function ce(v,D){if(v[0]=="Cobenefit")return st;if(v[0]=="SEF")return nt}let Z=ce(i),m=Z&&Z(i);return j=new at({}),{c(){ke(e.$$.fragment),l=k(),s=f("div"),h=f("div"),h.innerHTML=b,S=k(),o=f("div"),d=f("div"),c=f("div"),c.innerHTML=n,p=k(),x=f("div"),x.innerHTML=q,N=k(),C=f("button"),C.textContent=y,_=k(),A=f("div"),w=f("div"),H=f("button"),H.textContent=te,J=k(),B=f("button"),B.textContent=W,le=k(),V=f("div"),P=f("input"),R=k(),U=f("label"),U.textContent=r,E=k(),I=f("input"),z=k(),G=f("label"),G.textContent=ne,se=k(),m&&m.c(),$=k(),ke(j.$$.fragment),this.h()},l(v){Te(e.$$.fragment,v),l=T(v),s=u(v,"DIV",{class:!0});var D=F(s);h=u(D,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),O(h)!=="svelte-5el79v"&&(h.innerHTML=b),S=T(D),o=u(D,"DIV",{id:!0,class:!0});var L=F(o);d=u(L,"DIV",{class:!0,id:!0});var Y=F(d);c=u(Y,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),O(c)!=="svelte-1ej9vmv"&&(c.innerHTML=n),p=T(Y),x=u(Y,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),O(x)!=="svelte-1j653gg"&&(x.innerHTML=q),N=T(Y),C=u(Y,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),O(C)!=="svelte-zgluur"&&(C.textContent=y),Y.forEach(g),_=T(L),A=u(L,"DIV",{class:!0,id:!0});var M=F(A);w=u(M,"DIV",{class:!0});var ae=F(w);H=u(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),O(H)!=="svelte-14nmzoo"&&(H.textContent=te),J=T(ae),B=u(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),O(B)!=="svelte-xxvynj"&&(B.textContent=W),ae.forEach(g),le=T(M),V=u(M,"DIV",{class:!0});var X=F(V);P=u(X,"INPUT",{type:!0,name:!0}),R=T(X),U=u(X,"LABEL",{for:!0,"data-svelte-h":!0}),O(U)!=="svelte-p8irzv"&&(U.textContent=r),E=T(X),I=u(X,"INPUT",{type:!0,name:!0}),z=T(X),G=u(X,"LABEL",{for:!0,"data-svelte-h":!0}),O(G)!=="svelte-1ytveqc"&&(G.textContent=ne),X.forEach(g),se=T(M),m&&m.l(M),M.forEach(g),L.forEach(g),$=T(D),Te(j.$$.fragment,D),D.forEach(g),this.h()},h(){t(h,"class","component"),t(h,"id","heaser"),t(c,"id","map"),t(c,"class","svelte-1t23qr4"),t(x,"id","map-legend"),t(x,"class","svelte-1t23qr4"),t(C,"id","export-button"),t(C,"class","svelte-1t23qr4"),t(d,"class","component column svelte-1t23qr4"),t(d,"id","mapComp"),t(H,"class","tablinks svelte-1t23qr4"),H.value="Cobenefit",ue(H,"active",i[0]=="Cobenefit"),t(B,"class","tablinks svelte-1t23qr4"),B.value="SEF",ue(B,"active",i[0]=="SEF"),t(w,"class","tab svelte-1t23qr4"),t(P,"type","radio"),t(P,"name","granularity"),P.value="LAD",P.checked=!0,t(U,"for","LAD"),t(I,"type","radio"),t(I,"name","granularity"),I.value="LSOA",t(G,"for","LSOA"),t(V,"class","component"),t(A,"class","component column svelte-1t23qr4"),t(A,"id","control-panel"),t(o,"id","map-row"),t(o,"class","row svelte-1t23qr4"),t(s,"class","page-container svelte-1t23qr4")},m(v,D){Ae(e,v,D),ee(v,l,D),ee(v,s,D),a(s,h),a(s,S),a(s,o),a(o,d),a(d,c),i[19](c),a(d,p),a(d,x),i[20](x),a(d,N),a(d,C),i[21](C),a(o,_),a(o,A),a(A,w),a(w,H),a(w,J),a(w,B),a(A,le),a(A,V),a(V,P),a(V,R),a(V,U),a(V,E),a(V,I),a(V,z),a(V,G),a(A,se),m&&m.m(A,null),a(s,$),Ae(j,s,null),i[22](s),K=!0,oe||(ie=[Q(C,"click",ct),Q(H,"click",i[8]),Q(B,"click",i[8]),Q(P,"change",i[10]),Q(I,"change",i[10])],oe=!0)},p(v,D){(!K||D[0]&1)&&ue(H,"active",v[0]=="Cobenefit"),(!K||D[0]&1)&&ue(B,"active",v[0]=="SEF"),Z===(Z=ce(v))&&m?m.p(v,D):(m&&m.d(1),m=Z&&Z(v),m&&(m.c(),m.m(A,null)))},i(v){K||(Se(e.$$.fragment,v),Se(j.$$.fragment,v),K=!0)},o(v){Le(e.$$.fragment,v),Le(j.$$.fragment,v),K=!1},d(v){v&&(g(l),g(s)),ye(e,v),i[19](null),i[20](null),i[21](null),m&&m.d(),ye(j),i[22](null),oe=!1,we(ie)}}}function ct(){const e=document.getElementsByClassName("maplibregl-canvas")[0].toDataURL("image/png");var l=document.createElement("a");l.download="map.png",l.href=e,l.dataset.downloadurl=["image/png",l.download,l.href].join(":"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function ut(i,e,l){let{data:s}=e,h,b,S,o,d,c,n="Cobenefit",p=!1,x="BNZ",q=pe.map(r=>r.id),N="total",C="LAD",y="EPC",_;function A(){if(c.makeColorScale(!1),n=="SEF"&&Ce.includes(y)){const r=Je("white","black");let E=Object.values(xe[y]);const I=E.map((G,ne)=>r(ne/(E.length-1)));let z=Ze().domain(E).range(I);c.setColorScale(z)}S=c.legend(w()),l(4,o.innerHTML="",o),o.append(S)}function w(){if(n=="SEF")return`${Ee.filter(r=>r.id==y)[0].label} (${lt(y)})`;if(n=="Cobenefit")return"Cobenefits (£ per capita)"}Re(async()=>{let r;C=="LAD"?r=await re(qe(Array.from(q),"UK",N)):C=="LSOA"&&(r=await re(De(Array.from(q),x,N))),r.forEach(E=>{E.value_per_capita=E.value_per_capita*1e6}),l(12,c=new We(r,C,b,"value_per_capita",!0,"Lookup_Value",!0)),c.initMap(),c.setTooltipCb(le),S=c.legend(w()),o.append(S)});const H=r=>{const E=r.currentTarget.value;E=="total"?l(15,q=pe.map(I=>I.id)):l(15,q=[E]),be.capture("clicked specific CoBenefit",{CoBenefit:r.currentTarget.value})},te=r=>{const E=r.currentTarget.value;l(16,N=E)};function J(r,E){l(0,n=r.currentTarget.value)}const B=r=>{l(1,y=r.currentTarget.value),be.capture("clicked specific SEF",{SEF:r.currentTarget.value})},W=r=>{c.removeLayers(),c.removeSources(),l(17,C=r.currentTarget.value),l(12,c.granularity=C,c),C=="LSOA"?l(12,c.border=!1,c):l(12,c.border=!0,c),l(13,p=!0),be.capture("clicked granularity",{granularity:r.currentTarget.value})},le=r=>{if(n=="SEF")return Ce.includes(y)?`Mode value is ${xe[y][r]}`:`Mean value is ${r.toFixed(2)}`;if(n=="Cobenefit")return`£${r.toFixed(2)} per capita.`};function V(r){fe[r?"unshift":"push"](()=>{b=r,l(3,b)})}function P(r){fe[r?"unshift":"push"](()=>{o=r,l(4,o)})}function R(r){fe[r?"unshift":"push"](()=>{d=r,l(5,d)})}function U(r){fe[r?"unshift":"push"](()=>{h=r,l(2,h)})}return i.$$set=r=>{"data"in r&&l(11,s=r.data)},i.$$.update=()=>{if(i.$$.dirty[0]&520195&&c?.loaded){if(n=="Cobenefit"){if(l(12,c.dataKey="value_per_capita",c),C=="LAD")l(18,_=re(qe(Array.from(q),"UK",N)));else if(C=="LSOA"){let r;q.length==11?r=[]:r=q,l(18,_=re(De(r,x,N)))}}else l(0,n="SEF")&&(l(12,c.dataKey="val",c),C=="LAD"?Ce.includes(y)?l(18,_=re(Xe(y))):l(18,_=re($e(y))):C=="LSOA"&&l(18,_=re(et(y))));_.then(r=>{n=="Cobenefit"&&r.forEach(I=>{I.value_per_capita=I.value_per_capita*1e6});let E;n=="Cobenefit"?q.length==1?(E=JSON.parse(JSON.stringify(tt(q[0]))),E.shift(),E=E.reverse()):E=["red","white","black"]:E=["white","black"],c.update(r,n,p,E),A(),l(13,p=!1)})}},[n,y,h,b,o,d,H,te,J,B,W,s,c,p,x,q,N,C,_,V,P,R,U]}class Et extends He{constructor(e){super(),Ge(this,e,ut,it,je,{data:11},null,[-1,-1])}}export{Et as component};
