import{s as Me,a as A,e as o,g as T,c as i,b as I,p as w,f as _,q as t,x as ue,i as te,h as a,y as W,z as De,v as Ve,A as fe,w as xe,t as Be,d as Ie,n as Ue,B as Pe,C as Ne}from"../chunks/scheduler.GkBzG_tJ.js";import{S as Oe,i as we,c as He,b as Ge,m as Re,t as je,a as qe,d as ze}from"../chunks/index.puHNmHGV.js";import{N as Ke,e as de}from"../chunks/NavigationBar.CEj2Ji9N.js";import{i as Ye,o as Je}from"../chunks/transform.BNP73y-7.js";import"../chunks/index.CHZ6sWj5.js";import{M as Ze}from"../chunks/mapUK.B6pPeKIC.js";import{g as re,d as Ee,e as ye,f as Qe,h as We,i as Xe}from"../chunks/duckdb.BvSS-aVo.js";import{C as ve,S as be,a as Le,b as $e,c as Ce,d as et,g as Fe}from"../chunks/globals.muBbes9U.js";function Se(u,e,l){const n=u.slice();return n[32]=e[l],n}function Ae(u,e,l){const n=u.slice();return n[29]=e[l],n}function tt(u){let e,l,n="Social Economic Factor",h,C,S=de(Ce),r=[];for(let f=0;f<S.length;f+=1)r[f]=Te(Se(u,S,f));return{c(){e=o("div"),l=o("h2"),l.textContent=n,h=A(),C=o("div");for(let f=0;f<r.length;f+=1)r[f].c();this.h()},l(f){e=i(f,"DIV",{class:!0});var c=I(e);l=i(c,"H2",{"data-svelte-h":!0}),w(l)!=="svelte-1ld89ev"&&(l.textContent=n),h=T(c),C=i(c,"DIV",{id:!0,class:!0});var s=I(C);for(let v=0;v<r.length;v+=1)r[v].l(s);s.forEach(_),c.forEach(_),this.h()},h(){t(C,"id","time"),t(C,"class","svelte-1fc578l"),t(e,"class","tabcontent svelte-1fc578l")},m(f,c){te(f,e,c),a(e,l),a(e,h),a(e,C);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(C,null)},p(f,c){if(c[0]&514){S=de(Ce);let s;for(s=0;s<S.length;s+=1){const v=Se(f,S,s);r[s]?r[s].p(v,c):(r[s]=Te(v),r[s].c(),r[s].m(C,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=S.length}},d(f){f&&_(e),xe(r,f)}}}function lt(u){let e,l,n,h="Co-Benefits",C,S,r,f,c="Time",s,v,k,D,M,E="Total",y,g,F,j,P="2025-2029",q,N,Y,J,H="2030-2034",ae,Z,x,U,d="2035-2039",b,O,z,G,se="2040-2044",ee,le,X,K,oe="2045-2049",ie,ce,Q=de(ve.concat({id:"total",label:"Total"})),m=[];for(let p=0;p<Q.length;p+=1)m[p]=ke(Ae(u,Q,p));return{c(){e=o("div"),l=o("div"),n=o("h2"),n.textContent=h,C=A();for(let p=0;p<m.length;p+=1)m[p].c();S=A(),r=o("div"),f=o("h2"),f.textContent=c,s=A(),v=o("div"),k=o("label"),D=o("input"),M=o("span"),M.textContent=E,y=A(),g=o("label"),F=o("input"),j=o("span"),j.textContent=P,q=A(),N=o("label"),Y=o("input"),J=o("span"),J.textContent=H,ae=A(),Z=o("label"),x=o("input"),U=o("span"),U.textContent=d,b=A(),O=o("label"),z=o("input"),G=o("span"),G.textContent=se,ee=A(),le=o("label"),X=o("input"),K=o("span"),K.textContent=oe,this.h()},l(p){e=i(p,"DIV",{class:!0});var B=I(e);l=i(B,"DIV",{class:!0});var L=I(l);n=i(L,"H2",{"data-svelte-h":!0}),w(n)!=="svelte-uglilz"&&(n.textContent=h),C=T(L);for(let ge=0;ge<m.length;ge+=1)m[ge].l(L);L.forEach(_),S=T(B),r=i(B,"DIV",{class:!0});var R=I(r);f=i(R,"H2",{"data-svelte-h":!0}),w(f)!=="svelte-hletp"&&(f.textContent=c),s=T(R),v=i(R,"DIV",{id:!0,class:!0});var V=I(v);k=i(V,"LABEL",{class:!0});var ne=I(k);D=i(ne,"INPUT",{type:!0,name:!0,class:!0}),M=i(ne,"SPAN",{class:!0,"data-svelte-h":!0}),w(M)!=="svelte-2fqrek"&&(M.textContent=E),ne.forEach(_),y=T(V),g=i(V,"LABEL",{class:!0});var $=I(g);F=i($,"INPUT",{type:!0,name:!0,class:!0}),j=i($,"SPAN",{class:!0,"data-svelte-h":!0}),w(j)!=="svelte-177152l"&&(j.textContent=P),$.forEach(_),q=T(V),N=i(V,"LABEL",{class:!0});var pe=I(N);Y=i(pe,"INPUT",{type:!0,name:!0,class:!0}),J=i(pe,"SPAN",{class:!0,"data-svelte-h":!0}),w(J)!=="svelte-sne3j9"&&(J.textContent=H),pe.forEach(_),ae=T(V),Z=i(V,"LABEL",{class:!0});var he=I(Z);x=i(he,"INPUT",{type:!0,name:!0,class:!0}),U=i(he,"SPAN",{class:!0,"data-svelte-h":!0}),w(U)!=="svelte-13ifhof"&&(U.textContent=d),he.forEach(_),b=T(V),O=i(V,"LABEL",{class:!0});var me=I(O);z=i(me,"INPUT",{type:!0,name:!0,class:!0}),G=i(me,"SPAN",{class:!0,"data-svelte-h":!0}),w(G)!=="svelte-1pug1mv"&&(G.textContent=se),me.forEach(_),ee=T(V),le=i(V,"LABEL",{class:!0});var _e=I(le);X=i(_e,"INPUT",{type:!0,name:!0,class:!0}),K=i(_e,"SPAN",{class:!0,"data-svelte-h":!0}),w(K)!=="svelte-3f05xd"&&(K.textContent=oe),_e.forEach(_),V.forEach(_),R.forEach(_),B.forEach(_),this.h()},h(){t(l,"class","component"),t(D,"type","radio"),t(D,"name","toggle"),D.value="total",D.checked=!0,t(D,"class","svelte-1fc578l"),t(M,"class","svelte-1fc578l"),t(k,"class","time-radio svelte-1fc578l"),t(F,"type","radio"),t(F,"name","toggle"),F.value="Y2025_2029",t(F,"class","svelte-1fc578l"),t(j,"class","svelte-1fc578l"),t(g,"class","time-radio svelte-1fc578l"),t(Y,"type","radio"),t(Y,"name","toggle"),Y.value="Y2030_2034",t(Y,"class","svelte-1fc578l"),t(J,"class","svelte-1fc578l"),t(N,"class","time-radio svelte-1fc578l"),t(x,"type","radio"),t(x,"name","toggle"),x.value="Y2035_2039",t(x,"class","svelte-1fc578l"),t(U,"class","svelte-1fc578l"),t(Z,"class","time-radio svelte-1fc578l"),t(z,"type","radio"),t(z,"name","toggle"),z.value="Y2040_2044",t(z,"class","svelte-1fc578l"),t(G,"class","svelte-1fc578l"),t(O,"class","time-radio svelte-1fc578l"),t(X,"type","radio"),t(X,"name","toggle"),X.value="Y2045_2049",t(X,"class","svelte-1fc578l"),t(K,"class","svelte-1fc578l"),t(le,"class","time-radio svelte-1fc578l"),t(v,"id","time"),t(v,"class","svelte-1fc578l"),t(r,"class","component"),t(e,"class","tabcontent svelte-1fc578l")},m(p,B){te(p,e,B),a(e,l),a(l,n),a(l,C);for(let L=0;L<m.length;L+=1)m[L]&&m[L].m(l,null);a(e,S),a(e,r),a(r,f),a(r,s),a(r,v),a(v,k),a(k,D),a(k,M),a(v,y),a(v,g),a(g,F),a(g,j),a(v,q),a(v,N),a(N,Y),a(N,J),a(v,ae),a(v,Z),a(Z,x),a(Z,U),a(v,b),a(v,O),a(O,z),a(O,G),a(v,ee),a(v,le),a(le,X),a(le,K),ie||(ce=[W(D,"change",u[7]),W(F,"change",u[7]),W(Y,"change",u[7]),W(x,"change",u[7]),W(z,"change",u[7]),W(X,"change",u[7])],ie=!0)},p(p,B){if(B[0]&64){Q=de(ve.concat({id:"total",label:"Total"}));let L;for(L=0;L<Q.length;L+=1){const R=Ae(p,Q,L);m[L]?m[L].p(R,B):(m[L]=ke(R),m[L].c(),m[L].m(l,null))}for(;L<m.length;L+=1)m[L].d(1);m.length=Q.length}},d(p){p&&_(e),xe(m,p),ie=!1,De(ce)}}}function Te(u){let e,l,n,h,C=u[32].label+"",S,r,f,c;return{c(){e=o("input"),n=A(),h=o("label"),S=Be(C),r=o("br"),this.h()},l(s){e=i(s,"INPUT",{type:!0,id:!0,name:!0,class:!0}),n=T(s),h=i(s,"LABEL",{for:!0});var v=I(h);S=Ie(v,C),v.forEach(_),r=i(s,"BR",{}),this.h()},h(){t(e,"type","radio"),t(e,"id","html"),t(e,"name","fav_language"),e.value=u[32].id,e.checked=l=u[32].id==u[1],t(e,"class","svelte-1fc578l"),t(h,"for","html")},m(s,v){te(s,e,v),te(s,n,v),te(s,h,v),a(h,S),te(s,r,v),f||(c=W(e,"change",u[9]),f=!0)},p(s,v){v[0]&2&&l!==(l=s[32].id==s[1])&&(e.checked=l)},d(s){s&&(_(e),_(n),_(h),_(r)),f=!1,c()}}}function at(u){let e,l;return{c(){e=o("img"),this.h()},l(n){e=i(n,"IMG",{style:!0,class:!0,src:!0}),this.h()},h(){Pe(e,"opacity","0"),t(e,"class","icon svelte-1fc578l"),Ne(e.src,l=Fe("Air quality"))||t(e,"src",l)},m(n,h){te(n,e,h)},d(n){n&&_(e)}}}function st(u){let e,l;return{c(){e=o("img"),this.h()},l(n){e=i(n,"IMG",{alt:!0,class:!0,src:!0}),this.h()},h(){t(e,"alt","cobenefit icon"),t(e,"class","icon svelte-1fc578l"),Ne(e.src,l=Fe(u[29].id))||t(e,"src",l)},m(n,h){te(n,e,h)},d(n){n&&_(e)}}}function ke(u){let e,l,n,h,C,S=u[29].label+"",r,f,c,s,v,k;function D(y,g){return y[29].id!="total"?st:at}let E=D(u)(u);return{c(){e=o("div"),E.c(),l=A(),n=o("input"),h=A(),C=o("label"),r=Be(S),f=A(),c=o("br"),s=A(),this.h()},l(y){e=i(y,"DIV",{class:!0});var g=I(e);E.l(g),l=T(g),n=i(g,"INPUT",{type:!0,name:!0}),h=T(g),C=i(g,"LABEL",{for:!0});var F=I(C);r=Ie(F,S),F.forEach(_),f=T(g),c=i(g,"BR",{}),s=T(g),g.forEach(_),this.h()},h(){t(n,"type","radio"),t(n,"name","cobenef"),n.value=u[29].id,n.checked=!0,t(C,"for","css"),t(e,"class","checkbox-div svelte-1fc578l")},m(y,g){te(y,e,g),E.m(e,null),a(e,l),a(e,n),a(e,h),a(e,C),a(C,r),a(e,f),a(e,c),a(e,s),v||(k=W(n,"change",u[6]),v=!0)},p:Ue,d(y){y&&_(e),E.d(),v=!1,k()}}}function nt(u){let e,l,n,h,C=`<h2>MapUK</h2> <p>This interactive map allows to explore both the co-benefit values and the socio-economic factors at the local
            authorities and datazones levels.</p>`,S,r,f,c,s="",v,k,D="",M,E,y="Export",g,F,j,P,q,N,Y="CoBenefits",J,H,ae=`Socio-Economic
                    Factors`,Z,x,U,d,b,O="Local Authorities",z,G,se,ee,le="Data Zones",X,K,oe,ie;e=new Ke({});function ce(p,B){if(p[0]=="Cobenefit")return lt;if(p[0]=="SEF")return tt}let Q=ce(u),m=Q&&Q(u);return{c(){He(e.$$.fragment),l=A(),n=o("div"),h=o("div"),h.innerHTML=C,S=A(),r=o("div"),f=o("div"),c=o("div"),c.innerHTML=s,v=A(),k=o("div"),k.innerHTML=D,M=A(),E=o("button"),E.textContent=y,g=A(),F=o("div"),j=A(),P=o("div"),q=o("div"),N=o("button"),N.textContent=Y,J=A(),H=o("button"),H.textContent=ae,Z=A(),x=o("div"),U=o("input"),d=A(),b=o("label"),b.textContent=O,z=A(),G=o("input"),se=A(),ee=o("label"),ee.textContent=le,X=A(),m&&m.c(),this.h()},l(p){Ge(e.$$.fragment,p),l=T(p),n=i(p,"DIV",{class:!0});var B=I(n);h=i(B,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),w(h)!=="svelte-1bpnvd7"&&(h.innerHTML=C),S=T(B),r=i(B,"DIV",{id:!0,class:!0});var L=I(r);f=i(L,"DIV",{class:!0,id:!0});var R=I(f);c=i(R,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),w(c)!=="svelte-1ej9vmv"&&(c.innerHTML=s),v=T(R),k=i(R,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),w(k)!=="svelte-1j653gg"&&(k.innerHTML=D),M=T(R),E=i(R,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),w(E)!=="svelte-zgluur"&&(E.textContent=y),g=T(R),F=i(R,"DIV",{id:!0,class:!0}),I(F).forEach(_),R.forEach(_),j=T(L),P=i(L,"DIV",{class:!0,id:!0});var V=I(P);q=i(V,"DIV",{class:!0});var ne=I(q);N=i(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),w(N)!=="svelte-14nmzoo"&&(N.textContent=Y),J=T(ne),H=i(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),w(H)!=="svelte-xxvynj"&&(H.textContent=ae),ne.forEach(_),Z=T(V),x=i(V,"DIV",{class:!0});var $=I(x);U=i($,"INPUT",{type:!0,name:!0}),d=T($),b=i($,"LABEL",{for:!0,"data-svelte-h":!0}),w(b)!=="svelte-p8irzv"&&(b.textContent=O),z=T($),G=i($,"INPUT",{type:!0,name:!0}),se=T($),ee=i($,"LABEL",{for:!0,"data-svelte-h":!0}),w(ee)!=="svelte-1ytveqc"&&(ee.textContent=le),$.forEach(_),X=T(V),m&&m.l(V),V.forEach(_),L.forEach(_),B.forEach(_),this.h()},h(){t(h,"class","component"),t(h,"id","heaser"),t(c,"id","map"),t(c,"class","svelte-1fc578l"),t(k,"id","map-legend"),t(k,"class","svelte-1fc578l"),t(E,"id","export-button"),t(E,"class","svelte-1fc578l"),t(F,"id","tooltip"),t(F,"class","tooltip svelte-1fc578l"),t(f,"class","component column svelte-1fc578l"),t(f,"id","mapComp"),t(N,"class","tablinks svelte-1fc578l"),N.value="Cobenefit",ue(N,"active",u[0]=="Cobenefit"),t(H,"class","tablinks svelte-1fc578l"),H.value="SEF",ue(H,"active",u[0]=="SEF"),t(q,"class","tab svelte-1fc578l"),t(U,"type","radio"),t(U,"name","granularity"),U.value="LAD",U.checked=!0,t(b,"for","LAD"),t(G,"type","radio"),t(G,"name","granularity"),G.value="LSOA",t(ee,"for","LSOA"),t(x,"class","component"),t(P,"class","component column svelte-1fc578l"),t(P,"id","control-panel"),t(r,"id","map-row"),t(r,"class","row svelte-1fc578l"),t(n,"class","page-container svelte-1fc578l")},m(p,B){Re(e,p,B),te(p,l,B),te(p,n,B),a(n,h),a(n,S),a(n,r),a(r,f),a(f,c),u[19](c),a(f,v),a(f,k),u[20](k),a(f,M),a(f,E),u[21](E),a(f,g),a(f,F),a(r,j),a(r,P),a(P,q),a(q,N),a(q,J),a(q,H),a(P,Z),a(P,x),a(x,U),a(x,d),a(x,b),a(x,z),a(x,G),a(x,se),a(x,ee),a(P,X),m&&m.m(P,null),u[22](n),K=!0,oe||(ie=[W(E,"click",rt),W(N,"click",u[8]),W(H,"click",u[8]),W(U,"change",u[10]),W(G,"change",u[10])],oe=!0)},p(p,B){(!K||B[0]&1)&&ue(N,"active",p[0]=="Cobenefit"),(!K||B[0]&1)&&ue(H,"active",p[0]=="SEF"),Q===(Q=ce(p))&&m?m.p(p,B):(m&&m.d(1),m=Q&&Q(p),m&&(m.c(),m.m(P,null)))},i(p){K||(je(e.$$.fragment,p),K=!0)},o(p){qe(e.$$.fragment,p),K=!1},d(p){p&&(_(l),_(n)),ze(e,p),u[19](null),u[20](null),u[21](null),m&&m.d(),u[22](null),oe=!1,De(ie)}}}function rt(){const e=document.getElementsByClassName("maplibregl-canvas")[0].toDataURL("image/png");var l=document.createElement("a");l.download="map.png",l.href=e,l.dataset.downloadurl=["image/png",l.download,l.href].join(":"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function ot(u,e,l){let{data:n}=e,h,C,S,r,f,c,s="Cobenefit",v=!1,k="BNZ",D=ve.map(d=>d.id),M="total",E="LAD",y="EPC",g;function F(){if(c.makeColorScale(!1),s=="SEF"&&be.includes(y)){const d=Ye("white","black");let b=Object.values(Le[y]);const O=b.map((G,se)=>d(se/(b.length-1)));let z=Je().domain(b).range(O);c.setColorScale(z)}S=c.legend(j()),l(4,r.innerHTML="",r),r.append(S)}function j(){if(s=="SEF")return`${Ce.filter(d=>d.id==y)[0].label} (${et(y)})`;if(s=="Cobenefit")return"Cobenefits (£ per capita)"}Ve(async()=>{let d;E=="LAD"?d=await re(Ee(Array.from(D),"UK",M)):E=="LSOA"&&(d=await re(ye(Array.from(D),k,M))),d.forEach(b=>{b.value_per_capita=b.value_per_capita*1e6}),l(12,c=new Ze(d,E,C,"value_per_capita",!0,"Lookup_Value",!0)),c.initMap(),c.setTooltipCb(H),S=c.legend(j()),r.append(S)});const P=d=>{const b=d.currentTarget.value;b=="total"?l(15,D=ve.map(O=>O.id)):l(15,D=[b])},q=d=>{const b=d.currentTarget.value;l(16,M=b)};function N(d,b){l(0,s=d.currentTarget.value)}const Y=d=>{l(1,y=d.currentTarget.value)},J=d=>{c.removeLayers(),c.removeSources(),l(17,E=d.currentTarget.value),l(12,c.granularity=E,c),E=="LSOA"?l(12,c.border=!1,c):l(12,c.border=!0,c),l(13,v=!0)},H=d=>{if(s=="SEF")return be.includes(y)?`Mode value is ${Le[y][d]}`:`Mean value is ${d.toFixed(2)}`;if(s=="Cobenefit")return`${d}£ per capita`};function ae(d){fe[d?"unshift":"push"](()=>{C=d,l(3,C)})}function Z(d){fe[d?"unshift":"push"](()=>{r=d,l(4,r)})}function x(d){fe[d?"unshift":"push"](()=>{f=d,l(5,f)})}function U(d){fe[d?"unshift":"push"](()=>{h=d,l(2,h)})}return u.$$set=d=>{"data"in d&&l(11,n=d.data)},u.$$.update=()=>{u.$$.dirty[0]&520195&&c?.loaded&&(s=="Cobenefit"?(l(12,c.dataKey="value_per_capita",c),E=="LAD"?l(18,g=re(Ee(Array.from(D),"UK",M))):E=="LSOA"&&l(18,g=re(ye(Array.from(D),k,M)))):l(0,s="SEF")&&(l(12,c.dataKey="val",c),E=="LAD"?be.includes(y)?l(18,g=re(Qe(y))):l(18,g=re(We(y))):E=="LSOA"&&l(18,g=re(Xe(y)))),g.then(d=>{s=="Cobenefit"&&d.forEach(O=>{O.value_per_capita=O.value_per_capita*1e6});let b;s=="Cobenefit"?D.length==1?(b=JSON.parse(JSON.stringify($e(D[0]))),b.shift(),b=b.reverse()):b=["red","white","black"]:b=["white","black"],c.update(d,s,v,b),F(),l(13,v=!1)}))},[s,y,h,C,r,f,P,q,N,Y,J,n,c,v,k,D,M,E,g,ae,Z,x,U]}class mt extends Oe{constructor(e){super(),we(this,e,ot,nt,Me,{data:11},null,[-1,-1])}}export{mt as component};
