import{s as $e,n as He,r as et,o as tt,e as Me}from"../chunks/scheduler.tir__IPy.js";import{S as lt,i as st,e as s,s as _,c as a,d as A,m as T,h as b,g as m,n as e,j as ue,k as t,q as O,o as at,b as nt,f as rt}from"../chunks/index.bU9Y8Vjw.js";import{e as Ke}from"../chunks/each.-gASlQSi.js";import"../chunks/transform.Bxaw71Wc.js";import"../chunks/index.8pWjiIHb.js";import{M as ot}from"../chunks/map.Dzd9nxDE.js";import{g as ve,i as Qe,j as We}from"../chunks/duckdb.CXuML0zp.js";import{C as he}from"../chunks/globals.xEjTdJsR.js";function Xe(o,i,l){const L=o.slice();return L[18]=i[l],L}function Ye(o){let i,l,L,B,f,u,v;return{c(){i=s("input"),l=_(),L=s("label"),B=nt(o[18]),f=s("br"),this.h()},l(n){i=a(n,"INPUT",{type:!0,name:!0}),l=b(n),L=a(n,"LABEL",{for:!0});var g=A(L);B=rt(g,o[18]),g.forEach(m),f=a(n,"BR",{}),this.h()},h(){e(i,"type","checkbox"),e(i,"name","cobenef"),i.value=o[18],i.checked=!0,e(L,"for","css")},m(n,g){ue(n,i,g),ue(n,l,g),ue(n,L,g),t(L,B),ue(n,f,g),u||(v=O(i,"change",o[4]),u=!0)},p:He,d(n){n&&(m(i),m(l),m(L),m(f)),u=!1,v()}}}function it(o){let i,l,L=`<h2>Map</h2> <p>This interactive map shows the co-benefit of each datazone. The pathway and time window can be selected,
            along a given set of co-benefits.</p>`,B,f,u,v,n="",g,p,I="",D,x,ie,N,c,V,pe="Scenario",ce,r,E,P,k="BNZ",fe,ge,G,me,F,Oe="Test",_e,be,ne,Ve="Co Benefits",Ce,de,re,ke="Time",ye,C,J,w,K,Ue="total",je,Q,U,W,ze="2025-2029",Le,X,z,Y,Ze="2030-2034",xe,$,Z,ee,qe="2035-2039",Te,te,q,le,Re="2040-2044",Ae,se,R,ae,Ge="2045-2049",Ee,Fe,oe=Ke(he),y=[];for(let j=0;j<oe.length;j+=1)y[j]=Ye(Xe(o,oe,j));return{c(){i=s("div"),l=s("div"),l.innerHTML=L,B=_(),f=s("div"),u=s("div"),v=s("div"),v.innerHTML=n,g=_(),p=s("div"),p.innerHTML=I,D=_(),x=s("div"),ie=_(),N=s("div"),c=s("div"),V=s("h2"),V.textContent=pe,ce=_(),r=s("input"),E=_(),P=s("label"),P.textContent=k,fe=s("br"),ge=_(),G=s("input"),me=_(),F=s("label"),F.textContent=Oe,_e=s("br"),be=_(),ne=s("h2"),ne.textContent=Ve,Ce=_();for(let j=0;j<y.length;j+=1)y[j].c();de=_(),re=s("h2"),re.textContent=ke,ye=_(),C=s("div"),J=s("label"),w=s("input"),K=s("span"),K.textContent=Ue,je=_(),Q=s("label"),U=s("input"),W=s("span"),W.textContent=ze,Le=_(),X=s("label"),z=s("input"),Y=s("span"),Y.textContent=Ze,xe=_(),$=s("label"),Z=s("input"),ee=s("span"),ee.textContent=qe,Te=_(),te=s("label"),q=s("input"),le=s("span"),le.textContent=Re,Ae=_(),se=s("label"),R=s("input"),ae=s("span"),ae.textContent=Ge,this.h()},l(j){i=a(j,"DIV",{class:!0});var M=A(i);l=a(M,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),T(l)!=="svelte-mj8vf3"&&(l.innerHTML=L),B=b(M),f=a(M,"DIV",{id:!0,class:!0});var d=A(f);u=a(d,"DIV",{class:!0,id:!0});var H=A(u);v=a(H,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),T(v)!=="svelte-1ej9vmv"&&(v.innerHTML=n),g=b(H),p=a(H,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),T(p)!=="svelte-1j653gg"&&(p.innerHTML=I),D=b(H),x=a(H,"DIV",{id:!0,class:!0}),A(x).forEach(m),H.forEach(m),ie=b(d),N=a(d,"DIV",{class:!0,id:!0});var Je=A(N);c=a(Je,"DIV",{});var h=A(c);V=a(h,"H2",{"data-svelte-h":!0}),T(V)!=="svelte-7j3pqc"&&(V.textContent=pe),ce=b(h),r=a(h,"INPUT",{type:!0,name:!0}),E=b(h),P=a(h,"LABEL",{for:!0,"data-svelte-h":!0}),T(P)!=="svelte-12d5b6d"&&(P.textContent=k),fe=a(h,"BR",{}),ge=b(h),G=a(h,"INPUT",{type:!0,name:!0}),me=b(h),F=a(h,"LABEL",{for:!0,"data-svelte-h":!0}),T(F)!=="svelte-xliwgr"&&(F.textContent=Oe),_e=a(h,"BR",{}),be=b(h),ne=a(h,"H2",{"data-svelte-h":!0}),T(ne)!=="svelte-8wtja0"&&(ne.textContent=Ve),Ce=b(h);for(let we=0;we<y.length;we+=1)y[we].l(h);de=b(h),re=a(h,"H2",{"data-svelte-h":!0}),T(re)!=="svelte-hletp"&&(re.textContent=ke),ye=b(h),C=a(h,"DIV",{id:!0,class:!0});var S=A(C);J=a(S,"LABEL",{class:!0});var Se=A(J);w=a(Se,"INPUT",{type:!0,name:!0,class:!0}),K=a(Se,"SPAN",{class:!0,"data-svelte-h":!0}),T(K)!=="svelte-67wc0s"&&(K.textContent=Ue),Se.forEach(m),je=b(S),Q=a(S,"LABEL",{class:!0});var Be=A(Q);U=a(Be,"INPUT",{type:!0,name:!0,class:!0}),W=a(Be,"SPAN",{class:!0,"data-svelte-h":!0}),T(W)!=="svelte-177152l"&&(W.textContent=ze),Be.forEach(m),Le=b(S),X=a(S,"LABEL",{class:!0});var Ie=A(X);z=a(Ie,"INPUT",{type:!0,name:!0,class:!0}),Y=a(Ie,"SPAN",{class:!0,"data-svelte-h":!0}),T(Y)!=="svelte-sne3j9"&&(Y.textContent=Ze),Ie.forEach(m),xe=b(S),$=a(S,"LABEL",{class:!0});var De=A($);Z=a(De,"INPUT",{type:!0,name:!0,class:!0}),ee=a(De,"SPAN",{class:!0,"data-svelte-h":!0}),T(ee)!=="svelte-13ifhof"&&(ee.textContent=qe),De.forEach(m),Te=b(S),te=a(S,"LABEL",{class:!0});var Ne=A(te);q=a(Ne,"INPUT",{type:!0,name:!0,class:!0}),le=a(Ne,"SPAN",{class:!0,"data-svelte-h":!0}),T(le)!=="svelte-1pug1mv"&&(le.textContent=Re),Ne.forEach(m),Ae=b(S),se=a(S,"LABEL",{class:!0});var Pe=A(se);R=a(Pe,"INPUT",{type:!0,name:!0,class:!0}),ae=a(Pe,"SPAN",{class:!0,"data-svelte-h":!0}),T(ae)!=="svelte-3f05xd"&&(ae.textContent=Ge),Pe.forEach(m),S.forEach(m),h.forEach(m),Je.forEach(m),d.forEach(m),M.forEach(m),this.h()},h(){e(l,"class","component"),e(l,"id","heaser"),e(v,"id","map"),e(v,"class","svelte-1ej8gp6"),e(p,"id","map-legend"),e(p,"class","svelte-1ej8gp6"),e(x,"id","tooltip"),e(x,"class","tooltip svelte-1ej8gp6"),e(u,"class","component column svelte-1ej8gp6"),e(u,"id","mapComp"),e(r,"type","radio"),e(r,"name","visType"),r.value="BNZ",r.checked=!0,e(P,"for","html"),e(G,"type","radio"),e(G,"name","visType"),G.value="Test",e(F,"for","css"),e(w,"type","radio"),e(w,"name","toggle"),w.value="total",w.checked=!0,e(w,"class","svelte-1ej8gp6"),e(K,"class","svelte-1ej8gp6"),e(J,"class","time-radio svelte-1ej8gp6"),e(U,"type","radio"),e(U,"name","toggle"),U.value="2025_2029",e(U,"class","svelte-1ej8gp6"),e(W,"class","svelte-1ej8gp6"),e(Q,"class","time-radio svelte-1ej8gp6"),e(z,"type","radio"),e(z,"name","toggle"),z.value="2030_2034",e(z,"class","svelte-1ej8gp6"),e(Y,"class","svelte-1ej8gp6"),e(X,"class","time-radio svelte-1ej8gp6"),e(Z,"type","radio"),e(Z,"name","toggle"),Z.value="2035_2039",e(Z,"class","svelte-1ej8gp6"),e(ee,"class","svelte-1ej8gp6"),e($,"class","time-radio svelte-1ej8gp6"),e(q,"type","radio"),e(q,"name","toggle"),q.value="2040_2044",e(q,"class","svelte-1ej8gp6"),e(le,"class","svelte-1ej8gp6"),e(te,"class","time-radio svelte-1ej8gp6"),e(R,"type","radio"),e(R,"name","toggle"),R.value="2045_2049",e(R,"class","svelte-1ej8gp6"),e(ae,"class","svelte-1ej8gp6"),e(se,"class","time-radio svelte-1ej8gp6"),e(C,"id","time"),e(C,"class","svelte-1ej8gp6"),e(N,"class","component column svelte-1ej8gp6"),e(N,"id","control-panel"),e(f,"id","map-row"),e(f,"class","row svelte-1ej8gp6"),e(i,"class","page-container svelte-1ej8gp6")},m(j,M){ue(j,i,M),t(i,l),t(i,B),t(i,f),t(f,u),t(u,v),o[14](v),t(u,g),t(u,p),o[15](p),t(u,D),t(u,x),t(f,ie),t(f,N),t(N,c),t(c,V),t(c,ce),t(c,r),t(c,E),t(c,P),t(c,fe),t(c,ge),t(c,G),t(c,me),t(c,F),t(c,_e),t(c,be),t(c,ne),t(c,Ce);for(let d=0;d<y.length;d+=1)y[d]&&y[d].m(c,null);t(c,de),t(c,re),t(c,ye),t(c,C),t(C,J),t(J,w),t(J,K),t(C,je),t(C,Q),t(Q,U),t(Q,W),t(C,Le),t(C,X),t(X,z),t(X,Y),t(C,xe),t(C,$),t($,Z),t($,ee),t(C,Te),t(C,te),t(te,q),t(te,le),t(C,Ae),t(C,se),t(se,R),t(se,ae),o[16](i),Ee||(Fe=[O(r,"change",o[3]),O(G,"change",o[3]),O(w,"change",o[5]),O(U,"change",o[5]),O(z,"change",o[5]),O(Z,"change",o[5]),O(q,"change",o[5]),O(R,"change",o[5])],Ee=!0)},p(j,[M]){if(M&16){oe=Ke(he);let d;for(d=0;d<oe.length;d+=1){const H=Xe(j,oe,d);y[d]?y[d].p(H,M):(y[d]=Ye(H),y[d].c(),y[d].m(c,de))}for(;d<y.length;d+=1)y[d].d(1);y.length=oe.length}},i:He,o:He,d(j){j&&m(i),o[14](null),o[15](null),at(y,j),o[16](null),Ee=!1,et(Fe)}}}function ct(o,i,l){let{data:L}=i,B,f,u,v,n,g="BNZ",p=new Set(he),I="total",D="LAD",x;tt(async()=>{l(13,x=await ve(Qe(Array.from(p),g,I))),l(8,n=new ot(x,D,f)),n.initMap(),console.log("map initiated"),l(7,u=n.legend()),v.append(u),n.map.on("zoom",()=>{const r=n.map.getZoom();if(console.log("zz ",r),r>30&&n.granularity!="LSOA"){console.log("GOOOOO"),l(12,D="LSOA");const E=n.map.getStyle().layers;E&&E.forEach(k=>{n.map.removeLayer(k.id)});const P=n.map.getStyle().sources;for(const k in P)n.map.removeSource(k);n.reset(),l(8,n.granularity="LSOA",n),ve(We(Array.from(p),g,I)).then(k=>{n.loadData(k),n.loadLayers()})}})});const ie=r=>{l(9,g=r.currentTarget.value)},N=r=>{const E=r.currentTarget.value;p.size==0&&l(10,p=new Set(he)),p.has(E)?p.delete(E):p.add(E),l(10,p)},c=r=>{const E=r.currentTarget.value;l(11,I=E)};function V(r){Me[r?"unshift":"push"](()=>{f=r,l(2,f)})}function pe(r){Me[r?"unshift":"push"](()=>{v=r,l(0,v),l(12,D),l(10,p),l(9,g),l(11,I),l(13,x),l(8,n),l(7,u)})}function ce(r){Me[r?"unshift":"push"](()=>{B=r,l(1,B)})}return o.$$set=r=>{"data"in r&&l(6,L=r.data)},o.$$.update=()=>{o.$$.dirty&16257&&(console.log("sv update"),D=="LAD"?l(13,x=ve(Qe(Array.from(p),g,I))):D=="LSOA"&&l(13,x=ve(We(Array.from(p),g,I))),x.then(r=>{n.update(r)}),n?.loaded&&(l(7,u=n.legend()),l(0,v.innerHTML="",v),v.append(u)))},[v,B,f,ie,N,c,L,u,n,g,p,I,D,x,V,pe,ce]}class _t extends lt{constructor(i){super(),st(this,i,ct,it,$e,{data:6})}}export{_t as component};
