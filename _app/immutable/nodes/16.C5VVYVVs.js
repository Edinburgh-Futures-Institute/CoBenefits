import{s as Z,a as $,v as M,g as S,i as b,f as d,r as z,e as g,c as k,b as N,p as P,q as v,h as p,w as R,n as j,t as L,d as y,j as q}from"../chunks/scheduler.C_OAE-Pi.js";import{S as H,i as U,c as V,b as Y,m as F,t as J,a as K,d as Q}from"../chunks/index.CgDKAzTL.js";import{N as X,e as w}from"../chunks/NavigationBar.C3EBvx9T.js";import{b as C}from"../chunks/paths.DEkJBdUD.js";import{g as tt,c as et}from"../chunks/duckdb.D0FjxdsC.js";import"../chunks/transform.BNP73y-7.js";import{c as I}from"../chunks/dsv.XhNTmijJ.js";function x(h,t,n){const a=h.slice();return a[10]=t[n],a}function T(h,t,n){const a=h.slice();return a[13]=t[n],a}function lt(h){let t,n,a="Browse local authorities",i,s,f="Open the tabs and then click on a local authority for detailed reports.",m,e=w(h[2]),l=[];for(let o=0;o<e.length;o+=1)l[o]=O(x(h,e,o));return{c(){t=g("main"),n=g("h1"),n.textContent=a,i=$(),s=g("p"),s.textContent=f,m=$();for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){t=k(o,"MAIN",{class:!0});var r=N(t);n=k(r,"H1",{"data-svelte-h":!0}),P(n)!=="svelte-1ieghi8"&&(n.textContent=a),i=S(r),s=k(r,"P",{class:!0,"data-svelte-h":!0}),P(s)!=="svelte-xzip8x"&&(s.textContent=f),m=S(r);for(let c=0;c<l.length;c+=1)l[c].l(r);r.forEach(d),this.h()},h(){v(s,"class","svelte-1rtvnkm"),v(t,"class","svelte-1rtvnkm")},m(o,r){b(o,t,r),p(t,n),p(t,i),p(t,s),p(t,m);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(t,null)},p(o,r){if(r&6){e=w(o[2]);let c;for(c=0;c<e.length;c+=1){const _=x(o,e,c);l[c]?l[c].p(_,r):(l[c]=O(_),l[c].c(),l[c].m(t,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=e.length}},d(o){o&&d(t),R(l,o)}}}function nt(h){let t,n="Loading local authoritiesâ€¦";return{c(){t=g("p"),t.textContent=n,this.h()},l(a){t=k(a,"P",{class:!0,"data-svelte-h":!0}),P(t)!=="svelte-12l6vp8"&&(t.textContent=n),this.h()},h(){v(t,"class","svelte-1rtvnkm")},m(a,i){b(a,t,i)},p:j,d(a){a&&d(t)}}}function at(h){let t,n=h[10]+"",a,i,s=h[1][h[10]].length+"",f,m;return{c(){t=g("p"),a=L(n),i=L(" ("),f=L(s),m=L(")"),this.h()},l(e){t=k(e,"P",{class:!0});var l=N(t);a=y(l,n),i=y(l," ("),f=y(l,s),m=y(l,")"),l.forEach(d),this.h()},h(){v(t,"class","svelte-1rtvnkm")},m(e,l){b(e,t,l),p(t,a),p(t,i),p(t,f),p(t,m)},p(e,l){l&2&&s!==(s=e[1][e[10]].length+"")&&q(f,s)},d(e){e&&d(t)}}}function ot(h){let t,n=h[10]+"",a,i;return{c(){t=g("p"),a=L(n),i=L(" (317)"),this.h()},l(s){t=k(s,"P",{class:!0});var f=N(t);a=y(f,n),i=y(f," (317)"),f.forEach(d),this.h()},h(){v(t,"class","svelte-1rtvnkm")},m(s,f){b(s,t,f),p(t,a),p(t,i)},p:j,d(s){s&&d(t)}}}function W(h){let t,n=h[13].name+"",a,i;return{c(){t=g("a"),a=L(n),this.h()},l(s){t=k(s,"A",{class:!0,href:!0});var f=N(t);a=y(f,n),f.forEach(d),this.h()},h(){v(t,"class","lad-link svelte-1rtvnkm"),v(t,"href",i=C+"/location?location="+h[13].code)},m(s,f){b(s,t,f),p(t,a)},p(s,f){f&2&&n!==(n=s[13].name+"")&&q(a,n),f&2&&i!==(i=C+"/location?location="+s[13].code)&&v(t,"href",i)},d(s){s&&d(t)}}}function O(h){let t,n,a,i,s;function f(r,c){return r[10]=="England"?ot:at}let e=f(h)(h),l=w(h[1][h[10]]),o=[];for(let r=0;r<l.length;r+=1)o[r]=W(T(h,l,r));return{c(){t=g("details"),n=g("summary"),e.c(),a=$(),i=g("div");for(let r=0;r<o.length;r+=1)o[r].c();s=$(),this.h()},l(r){t=k(r,"DETAILS",{class:!0});var c=N(t);n=k(c,"SUMMARY",{class:!0});var _=N(n);e.l(_),_.forEach(d),a=S(c),i=k(c,"DIV",{class:!0});var D=N(i);for(let E=0;E<o.length;E+=1)o[E].l(D);D.forEach(d),s=S(c),c.forEach(d),this.h()},h(){v(n,"class","svelte-1rtvnkm"),v(i,"class","lad-grid svelte-1rtvnkm"),v(t,"class","svelte-1rtvnkm")},m(r,c){b(r,t,c),p(t,n),e.m(n,null),p(t,a),p(t,i);for(let _=0;_<o.length;_+=1)o[_]&&o[_].m(i,null);p(t,s)},p(r,c){if(e.p(r,c),c&6){l=w(r[1][r[10]]);let _;for(_=0;_<l.length;_+=1){const D=T(r,l,_);o[_]?o[_].p(D,c):(o[_]=W(D),o[_].c(),o[_].m(i,null))}for(;_<o.length;_+=1)o[_].d(1);o.length=l.length}},d(r){r&&d(t),e.d(),R(o,r)}}}function st(h){let t,n,a,i;t=new X({});function s(e,l){return e[0].length===0?nt:lt}let f=s(h),m=f(h);return{c(){V(t.$$.fragment),n=$(),m.c(),a=M()},l(e){Y(t.$$.fragment,e),n=S(e),m.l(e),a=M()},m(e,l){F(t,e,l),b(e,n,l),m.m(e,l),b(e,a,l),i=!0},p(e,[l]){f===(f=s(e))&&m?m.p(e,l):(m.d(1),m=f(e),m&&(m.c(),m.m(a.parentNode,a)))},i(e){i||(J(t.$$.fragment,e),i=!0)},o(e){K(t.$$.fragment,e),i=!1},d(e){e&&(d(n),d(a)),Q(t,e),m.d(e)}}}function rt(h,t,n){const a=`${C}/LAD/Eng_Wales_LSOA_LADs.csv`,i=`${C}/LAD/NI_DZ_LAD.csv`,s=`${C}/LAD/Scotland_DZ_LA.csv`;let f={},m={},e=[],l={},o=["England","Northern Ireland","Scotland","Wales"];const r={NI:"Northern Ireland",England:"England",Wales:"Wales",Scotland:"Scotland"};async function c(){const _=await I(a);for(let u of _)f[u.LAD22CD]=u.LAD22NM;const D=await I(i);for(let u of D)f[u.LGD2014_code]=u.LGD2014_name;const E=await I(s);for(let u of E)f[u.LA_Code]=u.LA_Name;const B=await tt(et());for(let u of B){const A=r[u.Nation]||u.Nation;m[u.LAD]=A}n(0,e=Object.entries(f).map(([u,A])=>({code:u,name:A,nation:m[u]}))),n(1,l={});for(let u of o)n(1,l[u]=e.filter(A=>A.nation===u).sort((A,G)=>A.name.localeCompare(G.name)),l)}return z(async()=>{await c()}),[e,l,o]}class dt extends H{constructor(t){super(),U(this,t,rt,st,Z,{})}}export{dt as component};
