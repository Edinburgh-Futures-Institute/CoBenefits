import{s as qt,d as At,n as kt,r as Ht,o as Vt,e as Q}from"../chunks/scheduler.tir__IPy.js";import{S as Bt,i as Pt,e as s,b as Z,s as y,c as o,d as C,f as $,g as b,h as S,m as j,n as d,j as Ft,k as e,p as jt,q as Ct,o as wt}from"../chunks/index.bU9Y8Vjw.js";import{e as Mt}from"../chunks/each.-gASlQSi.js";import"../chunks/transform.Cz5Y6iUM.js";import{i as at,j as zt,k as mt,l as Dt,r as Lt,n as Rt}from"../chunks/index.DHG4JIsl.js";import{M as Ot}from"../chunks/map.Cp5HnIKx.js";import{S as pt,a as Xt}from"../chunks/globals.CkVBXOP0.js";import{b as Yt,a as xt,d as ft,e as Nt}from"../chunks/bar.B1Wzq4TR.js";import{l as Ut}from"../chunks/link.Dkxq05wz.js";function Tt(n,a,i){const c=n.slice();return c[21]=a[i],c[22]=a,c[23]=i,c}function It(n){let a,i="",c=n[21];const g=()=>n[14](a,c),E=()=>n[14](null,c);return{c(){a=s("div"),a.innerHTML=i,this.h()},l(h){a=o(h,"DIV",{class:!0,"data-svelte-h":!0}),j(a)!=="svelte-18okkjt"&&(a.innerHTML=i),this.h()},h(){d(a,"class","plot")},m(h,p){Ft(h,a,p),g()},p(h,p){n=h,c!==n[21]&&(E(),c=n[21],g())},d(h){h&&b(a),E()}}}function Gt(n){let a,i,c,g,E,h,p,L,x,v,l,M,A,H,N,z,U,T,tt="Barchart",G,W,I,J,t,V="Distribution",u,B,vt="",gt,it,D,w,_t="Map",lt,R,rt,F,bt="",st,q,O,Et="Socio Economic Factors",ot,P,dt,yt,X=Mt(pt),m=[];for(let f=0;f<X.length;f+=1)m[f]=It(Tt(n,X,f));return{c(){a=s("div"),i=s("div"),c=s("h1"),g=Z(n[6]),E=y(),h=s("p"),p=Z(n[6]),L=Z(" is ..."),x=y(),v=s("div"),l=s("div"),M=s("h3"),A=Z(n[6]),H=Z(" datazone distribution"),N=y(),z=s("input"),U=y(),T=s("label"),T.textContent=tt,G=s("br"),W=y(),I=s("input"),J=y(),t=s("label"),t.textContent=V,u=y(),B=s("div"),B.innerHTML=vt,it=y(),D=s("div"),w=s("h3"),w.textContent=_t,lt=y(),R=s("div"),rt=y(),F=s("div"),F.innerHTML=bt,st=y(),q=s("div"),O=s("h3"),O.textContent=Et,ot=y(),P=s("div");for(let f=0;f<m.length;f+=1)m[f].c();this.h()},l(f){a=o(f,"DIV",{class:!0});var k=C(a);i=o(k,"DIV",{class:!0});var r=C(i);c=o(r,"H1",{});var K=C(c);g=$(K,n[6]),K.forEach(b),E=S(r),h=o(r,"P",{});var ct=C(h);p=$(ct,n[6]),L=$(ct," is ..."),ct.forEach(b),r.forEach(b),x=S(k),v=o(k,"DIV",{id:!0,class:!0});var et=C(v);l=o(et,"DIV",{class:!0});var _=C(l);M=o(_,"H3",{});var ht=C(M);A=$(ht,n[6]),H=$(ht," datazone distribution"),ht.forEach(b),N=S(_),z=o(_,"INPUT",{type:!0,name:!0}),U=S(_),T=o(_,"LABEL",{for:!0,"data-svelte-h":!0}),j(T)!=="svelte-1hwbt9c"&&(T.textContent=tt),G=o(_,"BR",{}),W=S(_),I=o(_,"INPUT",{type:!0,name:!0}),J=S(_),t=o(_,"LABEL",{for:!0,"data-svelte-h":!0}),j(t)!=="svelte-27dm33"&&(t.textContent=V),u=S(_),B=o(_,"DIV",{class:!0,"data-svelte-h":!0}),j(B)!=="svelte-111cum5"&&(B.innerHTML=vt),_.forEach(b),it=S(et),D=o(et,"DIV",{class:!0});var Y=C(D);w=o(Y,"H3",{"data-svelte-h":!0}),j(w)!=="svelte-vcuthw"&&(w.textContent=_t),lt=S(Y),R=o(Y,"DIV",{id:!0}),C(R).forEach(b),rt=S(Y),F=o(Y,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),j(F)!=="svelte-1ej9vmv"&&(F.innerHTML=bt),Y.forEach(b),et.forEach(b),st=S(k),q=o(k,"DIV",{id:!0,class:!0});var nt=C(q);O=o(nt,"H3",{"data-svelte-h":!0}),j(O)!=="svelte-zqlelw"&&(O.textContent=Et),ot=S(nt),P=o(nt,"DIV",{id:!0,class:!0});var St=C(P);for(let ut=0;ut<m.length;ut+=1)m[ut].l(St);St.forEach(b),nt.forEach(b),k.forEach(b),this.h()},h(){d(i,"class","component"),d(z,"type","radio"),d(z,"name","visType"),z.value="barchart",z.checked=!0,d(T,"for","html"),d(I,"type","radio"),d(I,"name","visType"),I.value="distribution",d(t,"for","javascript"),d(B,"class","plot"),d(l,"class","component column"),At(()=>n[11].call(l)),d(R,"id","map-legend"),d(F,"id","map"),d(F,"class","svelte-1qzzqci"),d(D,"class","component column"),d(v,"id","vis-block"),d(v,"class","svelte-1qzzqci"),d(P,"id","multiple-plots"),d(P,"class","svelte-1qzzqci"),d(q,"id","multiple-comp"),d(q,"class","component svelte-1qzzqci"),d(a,"class","page-container")},m(f,k){Ft(f,a,k),e(a,i),e(i,c),e(c,g),e(i,E),e(i,h),e(h,p),e(h,L),e(a,x),e(a,v),e(v,l),e(l,M),e(M,A),e(M,H),e(l,N),e(l,z),e(l,U),e(l,T),e(l,G),e(l,W),e(l,I),e(l,J),e(l,t),e(l,u),e(l,B),n[10](B),gt=jt(l,n[11].bind(l)),e(v,it),e(v,D),e(D,w),e(D,lt),e(D,R),n[12](R),e(D,rt),e(D,F),n[13](F),e(a,st),e(a,q),e(q,O),e(q,ot),e(q,P);for(let r=0;r<m.length;r+=1)m[r]&&m[r].m(P,null);n[15](a),dt||(yt=[Ct(z,"change",n[7]),Ct(I,"change",n[7])],dt=!0)},p(f,[k]){if(k&2){X=Mt(pt);let r;for(r=0;r<X.length;r+=1){const K=Tt(f,X,r);m[r]?m[r].p(K,k):(m[r]=It(K),m[r].c(),m[r].m(P,null))}for(;r<m.length;r+=1)m[r].d(1);m.length=X.length}},i:kt,o:kt,d(f){f&&b(a),n[10](null),gt(),n[12](null),n[13](null),wt(m,f),n[15](null),dt=!1,Ht(yt)}}}function Wt(n,a,i){let c,g,E={},h="barchart",p,{data:L}=a;const x=L.data,v=L.SEFData,l=L.coBenefit;let M,A,H;Vt(()=>{M=new Ot(x,"LSOA",A,"total"),M.initMap();let t=M.legend();H.append(t)});function N(){h=="barchart"?g?.append(at({height:p/1.4,marginLeft:60,marginRight:60,marginBottom:60,y:{type:"band"},style:{fontSize:"18px"},marks:[Yt(x,zt({x:"mean"},{x:"total",y:"scenario"})),Ut(x,zt({x1:t=>mt(t)-Dt(t),x2:t=>mt(t)+Dt(t)},{x:"total",y:"scenario",stroke:"gray",strokeWidth:3}))]})):h=="distribution"&&g?.append(at({height:p/1.4,marginLeft:60,marginRight:60,y:{label:"Datazones Frequency"},style:{fontSize:"18px"},facet:{data:x,y:"scenario"},marks:[xt(x,ft({y:"count"},{x:"total",tip:!0}))]}))}function z(){pt.forEach(t=>{let V;Xt.includes(t)?V=at({height:p/2,width:330,marginLeft:80,marginBottom:60,marginRight:30,marginTop:60,y:{grid:!0,label:"mean value (£)"},x:{grid:!0,label:t,type:"band",tickFormat:u=>Math.floor(u)},style:{fontSize:"18px"},color:{legend:!0},marks:[Nt(v.filter(u=>u.SEFMAME==t),ft({y:"mean"},{x:u=>Math.floor(u.SE).toString(),y:"total"}))]}):V=at({height:p/2,width:330,marginLeft:80,marginBottom:60,marginRight:30,marginTop:60,y:{grid:!0,label:"mean value (£)"},x:{grid:!0,label:t},style:{fontSize:"18px"},color:{legend:!0},marks:[xt(v.filter(u=>u.SEFMAME==t),ft({y:"mean"},{x:"SE",y:"total"})),Lt([mt(v.filter(u=>u.SEFMAME==t).map(u=>u.SE))],{stroke:"red"}),Lt([Rt(v.filter(u=>u.SEFMAME==t).map(u=>u.SE))],{stroke:"blue"})]}),E[t]?.append(V)})}function U(t){i(9,h=t.currentTarget.value)}function T(t){Q[t?"unshift":"push"](()=>{g=t,i(0,g)})}function tt(){p=this.clientHeight,i(2,p)}function G(t){Q[t?"unshift":"push"](()=>{H=t,i(5,H)})}function W(t){Q[t?"unshift":"push"](()=>{A=t,i(4,A)})}function I(t,V){Q[t?"unshift":"push"](()=>{E[V]=t,i(1,E)})}function J(t){Q[t?"unshift":"push"](()=>{c=t,i(3,c)})}return n.$$set=t=>{"data"in t&&i(8,L=t.data)},n.$$.update=()=>{n.$$.dirty&519&&(g?.firstChild?.remove(),Object.values(E).forEach(t=>{t.firstChild?.remove()}),p&&(N(),z()))},[g,E,p,c,A,H,l,U,L,h,T,tt,G,W,I,J]}class ie extends Bt{constructor(a){super(),Pt(this,a,Wt,Gt,qt,{data:8})}}export{ie as component};
