import{s as Mr,d as A,v as xr,x as Ar,a as De,i as Gt,b as c,z as oe,w as m,g as z,c as y,e as N,p as R,f as W,j as T,h as b,t as X,r as kr,A as Mt}from"../chunks/DsiPdP4J.js";import{S as Lr,i as Dr,d as zr,t as Tr,a as Br,m as Ir,c as Nr,b as Sr}from"../chunks/BBJTKZ5Q.js";import{N as Vr,e as Un}from"../chunks/DBMomcd4.js";import{n as Pr}from"../chunks/DRyxMU8n.js";import{ac as Fr,ad as hn,ae as Hr,af as Or,a7 as ze,ag as fr,ah as yn,f as ye,k as hr,o as Be,q as dr,M as Ie,ai as Ne,E as pr,d as Se,e as Ve,aj as Rr,g as ge,ak as bn,al as Ur,G as Te,am as jr,an as qr,ao as Wr,S as jn,ap as Xr,aq as Yr,ar as vr,Q as qn,as as Zr,i as mr,F as Gr,at as Kr,P as Qr,c as Jr,R as $r,au as gr,av as ta,aw as ea,a1 as yr,ax as na,U as br,ay as ra,az as aa,J as me,aA as _r,K as sa,aB as oa,H as ft,X as bt,Z as _t,N as Wn,V as la,aC as ia,I as Xn}from"../chunks/B-csFKs7.js";import{M as ca,a as ua}from"../chunks/gr-j2Mee.js";import{f as fa,S as _n,r as ha,C as Yn,M as ht,T as dn,V as da,A as le,c as pa,b as Zn,h as va,i as ma,d as ga}from"../chunks/CY_g8wcW.js";import{g as wt,p as Gn,q as ya,r as Kn,d as ba,s as Qn,t as _a,u as wa}from"../chunks/BddKlxjk.js";import{A as Ca,a as Xt,b as Jn}from"../chunks/Dg6gmsLM.js";import{t as Ea,d as wr,m as Ma,c as $n,s as xa,e as Aa,f as ka,a as pn,b as tr}from"../chunks/FuHNd5id.js";import{d as La}from"../chunks/BKccPpJD.js";const Da=za(Ta);function za(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:a,width:s,height:l}=e;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((l=Math.floor(l!==void 0?l:a.length/s))>=0))throw new RangeError("invalid height");if(!s||!l||!n&&!r)return e;const f=n&&t(n),u=r&&t(r),o=a.slice();return f&&u?(ie(f,o,a,s,l),ie(f,a,o,s,l),ie(f,o,a,s,l),ce(u,a,o,s,l),ce(u,o,a,s,l),ce(u,a,o,s,l)):f?(ie(f,a,o,s,l),ie(f,o,a,s,l),ie(f,a,o,s,l)):u&&(ce(u,a,o,s,l),ce(u,o,a,s,l),ce(u,a,o,s,l)),e}}function ie(t,e,n,r,a){for(let s=0,l=r*a;s<l;)t(e,n,s,s+=r,1)}function ce(t,e,n,r,a){for(let s=0,l=r*a;s<r;++s)t(e,n,s,s+l,r)}function Ta(t){const e=Math.floor(t);if(e===t)return Ba(t);const n=t-e,r=2*t+1;return(a,s,l,f,u)=>{if(!((f-=u)>=l))return;let o=e*s[l];const i=u*e,d=i+u;for(let h=l,g=l+i;h<g;h+=u)o+=s[Math.min(f,h)];for(let h=l,g=f;h<=g;h+=u)o+=s[Math.min(f,h+i)],a[h]=(o+n*(s[Math.max(l,h-d)]+s[Math.min(f,h+d)]))/r,o-=s[Math.max(l,h-i)]}}function Ba(t){const e=2*t+1;return(n,r,a,s,l)=>{if(!((s-=l)>=a))return;let f=t*r[a];const u=l*t;for(let o=a,i=a+u;o<i;o+=l)f+=r[Math.min(s,o)];for(let o=a,i=s;o<=i;o+=l)f+=r[Math.min(s,o+u)],n[o]=f/e,f-=r[Math.max(a,o-u)]}}function Ia(t,e,n){let r;for(;;){const a=Fr(t,e,n);if(a===r||a===0||!isFinite(a))return[t,e];a>0?(t=Math.floor(t/a)*a,e=Math.ceil(e/a)*a):a<0&&(t=Math.ceil(t*a)/a,e=Math.floor(e*a)/a),r=a}}function Cr(t,e=hn){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=hn);const a=(f,u)=>e(n[f],n[u]);let s,l;return t=Uint32Array.from(n,(f,u)=>u),t.sort(e===hn?(f,u)=>Hr(n[f],n[u]):Or(a)),t.forEach((f,u)=>{const o=a(f,s===void 0?f:s);o>=0?((s===void 0||o>0)&&(s=f,l=u),r[f]=l):r[f]=NaN}),r}var Na=Array.prototype,Er=Na.slice;function Sa(t,e){return t-e}function Va(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}const Vt=t=>()=>t;function Pa(t,e){for(var n=-1,r=e.length,a;++n<r;)if(a=Fa(t,e[n]))return a;return 0}function Fa(t,e){for(var n=e[0],r=e[1],a=-1,s=0,l=t.length,f=l-1;s<l;f=s++){var u=t[s],o=u[0],i=u[1],d=t[f],h=d[0],g=d[1];if(Ha(u,d,e))return 0;i>r!=g>r&&n<(h-o)*(r-i)/(g-i)+o&&(a=-a)}return a}function Ha(t,e,n){var r;return Oa(t,e,n)&&Ra(t[r=+(t[0]===e[0])],n[r],e[r])}function Oa(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function Ra(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function Ua(){}var xt=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function er(){var t=1,e=1,n=Ea,r=u;function a(o){var i=n(o);if(Array.isArray(i))i=i.slice().sort(Sa);else{const d=ze(o,ja);for(i=fr(...Ia(d[0],d[1],i),i);i[i.length-1]>=d[1];)i.pop();for(;i[1]<d[0];)i.shift()}return i.map(d=>s(o,d))}function s(o,i){const d=i==null?NaN:+i;if(isNaN(d))throw new Error(`invalid value: ${i}`);var h=[],g=[];return l(o,d,function(C){r(C,o,d),Va(C)>0?h.push([C]):g.push(C)}),g.forEach(function(C){for(var _=0,D=h.length,w;_<D;++_)if(Pa((w=h[_])[0],C)!==-1){w.push(C);return}}),{type:"MultiPolygon",value:i,coordinates:h}}function l(o,i,d){var h=new Array,g=new Array,C,_,D,w,v,x;for(C=_=-1,w=Yt(o[0],i),xt[w<<1].forEach(E);++C<t-1;)D=w,w=Yt(o[C+1],i),xt[D|w<<1].forEach(E);for(xt[w<<0].forEach(E);++_<e-1;){for(C=-1,w=Yt(o[_*t+t],i),v=Yt(o[_*t],i),xt[w<<1|v<<2].forEach(E);++C<t-1;)D=w,w=Yt(o[_*t+t+C+1],i),x=v,v=Yt(o[_*t+C+1],i),xt[D|w<<1|v<<2|x<<3].forEach(E);xt[w|v<<3].forEach(E)}for(C=-1,v=o[_*t]>=i,xt[v<<2].forEach(E);++C<t-1;)x=v,v=Yt(o[_*t+C+1],i),xt[v<<2|x<<3].forEach(E);xt[v<<3].forEach(E);function E(S){var k=[S[0][0]+C,S[0][1]+_],B=[S[1][0]+C,S[1][1]+_],H=f(k),I=f(B),M,V;(M=g[H])?(V=h[I])?(delete g[M.end],delete h[V.start],M===V?(M.ring.push(B),d(M.ring)):h[M.start]=g[V.end]={start:M.start,end:V.end,ring:M.ring.concat(V.ring)}):(delete g[M.end],M.ring.push(B),g[M.end=I]=M):(M=h[I])?(V=g[H])?(delete h[M.start],delete g[V.end],M===V?(M.ring.push(B),d(M.ring)):h[V.start]=g[M.end]={start:V.start,end:M.end,ring:V.ring.concat(M.ring)}):(delete h[M.start],M.ring.unshift(k),h[M.start=H]=M):h[H]=g[I]={start:H,end:I,ring:[k,B]}}}function f(o){return o[0]*2+o[1]*(t+1)*4}function u(o,i,d){o.forEach(function(h){var g=h[0],C=h[1],_=g|0,D=C|0,w=vn(i[D*t+_]);g>0&&g<t&&_===g&&(h[0]=nr(g,vn(i[D*t+_-1]),w,d)),C>0&&C<e&&D===C&&(h[1]=nr(C,vn(i[(D-1)*t+_]),w,d))})}return a.contour=s,a.size=function(o){if(!arguments.length)return[t,e];var i=Math.floor(o[0]),d=Math.floor(o[1]);if(!(i>=0&&d>=0))throw new Error("invalid size");return t=i,e=d,a},a.thresholds=function(o){return arguments.length?(n=typeof o=="function"?o:Array.isArray(o)?Vt(Er.call(o)):Vt(o),a):n},a.smooth=function(o){return arguments.length?(r=o?u:Ua,a):r===u},a}function ja(t){return isFinite(t)?t:NaN}function Yt(t,e){return t==null?!1:+t>=e}function vn(t){return t==null||isNaN(t=+t)?-1/0:t}function nr(t,e,n,r){const a=r-e,s=n-e,l=isFinite(a)||isFinite(s)?a/s:Math.sign(a)/Math.sign(s);return isNaN(l)?t:t+l-.5}function qa(t){return t[0]}function Wa(t){return t[1]}function Xa(){return 1}function Ya(){var t=qa,e=Wa,n=Xa,r=960,a=500,s=20,l=2,f=s*3,u=r+f*2>>l,o=a+f*2>>l,i=Vt(20);function d(v){var x=new Float32Array(u*o),E=Math.pow(2,-l),S=-1;for(const L of v){var k=(t(L,++S,v)+f)*E,B=(e(L,S,v)+f)*E,H=+n(L,S,v);if(H&&k>=0&&k<u&&B>=0&&B<o){var I=Math.floor(k),M=Math.floor(B),V=k-I-.5,Y=B-M-.5;x[I+M*u]+=(1-V)*(1-Y)*H,x[I+1+M*u]+=V*(1-Y)*H,x[I+1+(M+1)*u]+=V*Y*H,x[I+(M+1)*u]+=(1-V)*Y*H}}return Da({data:x,width:u,height:o},s*E),x}function h(v){var x=d(v),E=i(x),S=Math.pow(2,2*l);return Array.isArray(E)||(E=fr(Number.MIN_VALUE,yn(x)/S,E)),er().size([u,o]).thresholds(E.map(k=>k*S))(x).map((k,B)=>(k.value=+E[B],g(k)))}h.contours=function(v){var x=d(v),E=er().size([u,o]),S=Math.pow(2,2*l),k=B=>{B=+B;var H=g(E.contour(x,B*S));return H.value=B,H};return Object.defineProperty(k,"max",{get:()=>yn(x)/S}),k};function g(v){return v.coordinates.forEach(C),v}function C(v){v.forEach(_)}function _(v){v.forEach(D)}function D(v){v[0]=v[0]*Math.pow(2,l)-f,v[1]=v[1]*Math.pow(2,l)-f}function w(){return f=s*3,u=r+f*2>>l,o=a+f*2>>l,h}return h.x=function(v){return arguments.length?(t=typeof v=="function"?v:Vt(+v),h):t},h.y=function(v){return arguments.length?(e=typeof v=="function"?v:Vt(+v),h):e},h.weight=function(v){return arguments.length?(n=typeof v=="function"?v:Vt(+v),h):n},h.size=function(v){if(!arguments.length)return[r,a];var x=+v[0],E=+v[1];if(!(x>=0&&E>=0))throw new Error("invalid size");return r=x,a=E,w()},h.cellSize=function(v){if(!arguments.length)return 1<<l;if(!((v=+v)>=1))throw new Error("invalid cell size");return l=Math.floor(Math.log(v)/Math.LN2),w()},h.thresholds=function(v){return arguments.length?(i=typeof v=="function"?v:Array.isArray(v)?Vt(Er.call(v)):Vt(v),h):i},h.bandwidth=function(v){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((v=+v)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*v*v+1)-1)/2,w()},h}const Za={ariaLabel:"cell"};class Ga extends Ca{constructor(e,{x:n,y:r,...a}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},a,Za)}_transform(e,n){e.call(ye,n,{},0,0)}}function rr(t,{x:e,y:n,...r}={}){return[e,n]=hr(e,n),new Ga(t,{...r,x:e,y:n})}const Ka={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Qa extends Ie{constructor(e,n={}){const{x:r,y:a,z:s,curve:l,tension:f}=n;super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y"},z:{value:Ne(n),optional:!0}},n,Ka),this.z=s,this.curve=Ma(l,f),pr(this,n)}filter(e){return e}project(e,n,r){this.curve!==$n&&super.project(e,n,r)}render(e,n,r,a,s){const{x:l,y:f}=r,{curve:u}=this;return Se("svg:g",s).call(Ve,this,a,s).call(ye,this,n).call(o=>o.selectAll().data(Rr(e,[l,f],this,r)).enter().append("path").call(ge,this).call(bn,this,r).call(Ur,this,r,s).attr("d",u===$n&&s.projection?Ja(s.path(),l,f):xa().curve(u).defined(i=>i>=0).x(i=>l[i]).y(i=>f[i]))).node()}}function Ja(t,e,n){return e=Te(e),n=Te(n),r=>{let a=[];const s=[a];for(const l of r)l===-1?(a=[],s.push(a)):a.push([e[l],n[l]]);return t({type:"MultiLineString",coordinates:s})}}function $a(t,{x:e=dr,y:n=Be,...r}={}){return new Qa(t,wr({...r,x:e,y:n}))}function ts(t,e={}){let{y:n,y1:r,y2:a}=e;n===void 0&&r===void 0&&a===void 0&&(e={...e,y:n=Be});const s={};return n!=null&&(s.y=t),r!=null&&(s.y1=t),a!=null&&(s.y2=t),es(s,e)}function es(t={},e={}){const n=Ne(e),r=Object.entries(t).map(([a,s])=>{const l=jr(a,e);if(l==null)throw new Error(`missing channel: ${a}`);const[f,u]=qr(l);return{key:a,input:l,output:f,setOutput:u,map:ns(s)}});return{...Wr(e,(a,s)=>{const l=jn(a,n),f=r.map(({input:o})=>jn(a,o)),u=r.map(({setOutput:o})=>o(new Array(a.length)));for(const o of s)for(const i of l?Xr(o,d=>l[d]).values():[o])r.forEach(({map:d},h)=>d.mapIndex(i,f[h],u[h]));return{data:a,facets:s}}),...Object.fromEntries(r.map(({key:a,output:s})=>[a,s]))}}function ns(t){if(t==null)throw new Error("missing map");if(typeof t.mapIndex=="function")return t;if(typeof t.map=="function"&&Yr(t))return rs(t);if(typeof t=="function")return mn(vr(t));switch(`${t}`.toLowerCase()){case"cumsum":return ss;case"rank":return mn((e,n)=>Cr(e,r=>n[r]));case"quantile":return mn((e,n)=>as(e,r=>n[r]))}throw new Error(`invalid map: ${t}`)}function rs(t){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:t.map.bind(t)}}function as(t,e){const n=Aa(t,e)-1;return Cr(t,e).map(r=>r/n)}function mn(t){return{mapIndex(e,n,r){const a=t(e,n);if(a.length!==e.length)throw new Error("map function returned a mismatched length");for(let s=0,l=e.length;s<l;++s)r[e[s]]=a[s]}}}const ss={mapIndex(t,e,n){let r=0;for(const a of t)n[a]=r+=e[a]}},os={ariaLabel:"tick",fill:null,stroke:"currentColor"};class ls extends Ie{constructor(e,n,r){super(e,n,r,os),pr(this,r)}render(e,n,r,a,s){return Se("svg:g",s).call(Ve,this,a,s).call(this._transform,this,n).call(l=>l.selectAll().data(e).enter().append("line").call(ge,this).attr("x1",this._x1(n,r,a)).attr("x2",this._x2(n,r,a)).attr("y1",this._y1(n,r,a)).attr("y2",this._y2(n,r,a)).call(mr,this,r).call(Gr,this,r,s)).node()}}class is extends ls{constructor(e,n={}){const{x:r,y:a,inset:s=0,insetTop:l=s,insetBottom:f=s}=n;super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y",type:"band",optional:!0}},n),this.insetTop=qn(l),this.insetBottom=qn(f)}_transform(e,n,{x:r}){e.call(ye,n,{x:r},Zr,0)}_x1(e,{x:n}){return r=>n[r]}_x2(e,{x:n}){return r=>n[r]}_y1({y:e},{y:n},{marginTop:r}){const{insetTop:a}=this;return n&&e?s=>n[s]+a:r+a}_y2({y:e},{y:n},{height:r,marginBottom:a}){const{insetBottom:s}=this;return n&&e?l=>n[l]+e.bandwidth()-s:r-a-s}}function gn(t,{x:e=Be,...n}={}){return new is(t,{...n,x:e})}const cs={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class us extends Ie{constructor(e,{x:n,y:r,z:a,weight:s,fill:l,stroke:f,...u}={}){const o=ar(l)&&(l="currentColor",!0),i=ar(f)&&(f="currentColor",!0);super(e,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:Ne({z:a,fill:l,stroke:f}),optional:!0},weight:{value:s,optional:!0}},ds({...u,fill:l,stroke:f},o,i),cs),o&&(this.fill=void 0),i&&(this.stroke=void 0),this.z=a}filter(e){return e}render(e,n,r,a,s){const{contours:l}=r,f=Kr();return Se("svg:g",s).call(Ve,this,a,s).call(ye,this,{}).call(u=>u.selectAll().data(e).enter().append("path").call(ge,this).call(mr,this,r).attr("d",o=>f(l[o]))).node()}}function fs(t,{x:e,y:n,...r}={}){return[e,n]=hr(e,n),new us(t,{...r,x:e,y:n})}const hs=new Set(["x","y","z","weight"]);function ds(t,e,n){let{bandwidth:a,thresholds:s}=t;return a=a===void 0?20:+a,s=s===void 0?20:typeof s?.[Symbol.iterator]=="function"?Te(s):+s,Qr(t,function(l,f,u,o,i,d){const h=u.weight?Te(u.weight.value):null,g=u.z?.value,{z:C}=this,[_,D]=Jr(this,i),{width:w,height:v}=i,{x,y:E}=$r(u,o,d),S=Object.fromEntries(Object.entries(u).filter(([L])=>!hs.has(L)).map(([L,G])=>[L,{...G,value:[]}])),k=e&&[],B=n&&[],H=Ya().x(x?L=>x[L]:_).y(E?L=>E[L]:D).weight(h?L=>h[L]:1).size([w,v]).bandwidth(a),I=[];for(const L of f){const G=[];I.push(G);for(const j of g?gr(L,g,C):[L]){const nt=H.contours(j);G.push([j,nt])}}let M=s;if(!(M instanceof ta)){let L=0;for(const G of I)for(const[,j]of G){const nt=j.max;nt>L&&(L=nt)}M=Float64Array.from({length:s-1},(G,j)=>L*100*(j+1)/s)}const V=[],Y=[];for(const L of I){const G=[];V.push(G);for(const[j,nt]of L)for(const ot of M){G.push(Y.length),Y.push(nt(ot/100)),k&&k.push(ot),B&&B.push(ot);for(const ct in S)S[ct].value.push(u[ct].value[j[0]])}}return k&&k.push(0),B&&B.push(0),{data:l,facets:V,channels:{...S,...k&&{fill:{value:k,scale:"color"}},...B&&{stroke:{value:B,scale:"color"}},contours:{value:Y}}}})}function ar(t){return/^density$/i.test(t)}function ps(t,e,n){var r=1e-8,a=e-1,s=n-1,l=0,f,u,o,i,d,h,g,C;if(t<=0)return 0;if(t>=1)return 1;for(f=Math.log(e/(e+n)),u=Math.log(n/(e+n)),o=Math.exp(e*f)/e,i=Math.exp(n*u)/n,g=o+i,t<o/g?h=Math.pow(e*g*t,1/e):h=1-Math.pow(n*g*(1-t),1/n),C=-ue(e)-ue(n)+ue(e+n);l<10;l++){if(h===0||h===1)return h;if(d=vs(h,e,n)-t,o=Math.exp(a*Math.log(h)+s*Math.log(1-h)+C),i=d/o,h-=o=i/(1-.5*Math.min(1,i*(a/h-s/(1-h)))),h<=0&&(h=.5*(h+o)),h>=1&&(h=.5*(h+o+1)),Math.abs(o)<r*h&&l>0)break}return h}function vs(t,e,n){var r=t===0||t===1?0:Math.exp(ue(e+n)-ue(e)-ue(n)+e*Math.log(t)+n*Math.log(1-t));return t<0||t>1?!1:t<(e+1)/(e+n+2)?r*sr(t,e,n)/e:1-r*sr(1-t,n,e)/n}function sr(t,e,n){var r=1e-30,a=1,s=e+n,l=e+1,f=e-1,u=1,o=1-s*t/l,i,d,h,g;for(Math.abs(o)<r&&(o=r),o=1/o,g=o;a<=100&&(i=2*a,d=a*(n-a)*t/((f+i)*(e+i)),o=1+d*o,Math.abs(o)<r&&(o=r),u=1+d/u,Math.abs(u)<r&&(u=r),o=1/o,g*=o*u,d=-(e+a)*(s+a)*t/((e+i)*(l+i)),o=1+d*o,Math.abs(o)<r&&(o=r),u=1+d/u,Math.abs(u)<r&&(u=r),o=1/o,h=o*u,g*=h,!(Math.abs(h-1)<3e-7));a++);return g}function ue(t){var e=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,a,s,l;for(l=(s=a=t)+5.5,l-=(a+.5)*Math.log(l);e<6;e++)r+=n[e]/++s;return Math.log(2.506628274631*r/a)-l}function ms(t,e){var n=ps(2*Math.min(t,1-t),.5*e,.5);return n=Math.sqrt(e*(1-n)/n),t>.5?n:-n}const gs={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ys extends Ie{constructor(e,n={}){const{x:r,y:a,z:s,ci:l=.95,precision:f=4}=n;if(super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y"},z:{value:Ne(n),optional:!0}},n,gs),this.z=s,this.ci=+l,this.precision=+f,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${l}`);if(!(this.precision>0))throw new Error(`invalid precision: ${f}`)}render(e,n,r,a,s){const{x:l,y:f,z:u}=r,{ci:o}=this;return Se("svg:g",s).call(Ve,this,a,s).call(ye,this,n).call(i=>i.selectAll().data(u?gr(e,u,this.z):[e]).enter().call(d=>d.append("path").attr("fill","none").call(ge,this).call(bn,this,{...r,fill:null,fillOpacity:null}).attr("d",h=>this._renderLine(h,l,f)).call(o&&!na(this.fill)?h=>h.select(bs).attr("stroke","none").call(ge,this).call(bn,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",g=>this._renderBand(g,l,f)):()=>{}))).node()}}function bs(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(Pr.svg,"path"),this)}class _s extends ys{constructor(e,n){super(e,n)}_renderBand(e,n,r){const{ci:a,precision:s}=this,[l,f]=ze(e,i=>n[i]),u=or(e,n,r),o=Cs(e,n,r,(1-a)/2,u);return ka().x(i=>i).y0(i=>o(i,-1)).y1(i=>o(i,1))(yr(l,f-s/2,s).concat(f))}_renderLine(e,n,r){const[a,s]=ze(e,f=>n[f]),l=or(e,n,r);return`M${a},${l(a)}L${s},${l(s)}`}}function ws(t,{x:e=dr,y:n=Be,stroke:r,fill:a=ea(r)?"currentColor":r,...s}={}){return new _s(t,wr({...s,x:e,y:n,fill:a,stroke:r}))}function or(t,e,n){let r=0,a=0,s=0,l=0;for(const i of t){const d=e[i],h=n[i];r+=d,a+=h,s+=d*h,l+=d*d}const f=t.length,u=(f*s-r*a)/(f*l-r*r),o=(a-u*r)/f;return i=>u*i+o}function Cs(t,e,n,r,a){const s=br(t,i=>e[i])/t.length;let l=0,f=0;for(const i of t)l+=(e[i]-s)**2,f+=(n[i]-a(e[i]))**2;const u=Math.sqrt(f/(t.length-2)),o=ms(r,t.length-2);return(i,d)=>{const h=a(i),g=u*Math.sqrt(1/t.length+(i-s)**2/l);return h+d*o*g}}function lr(t,e){return arguments.length===1&&({basis:t,...e}=t),ts(Es(t),e)}function Es(t){if(t===void 0)return ir;if(typeof t=="function")return Pe(vr(t));if(/^p\d{2}$/i.test(t))return fe(oa(t));switch(`${t}`.toLowerCase()){case"deviation":return As;case"first":return ir;case"last":return xs;case"max":return ks;case"mean":return Ls;case"median":return Ds;case"min":return zs;case"sum":return Ts;case"extent":return Ms}throw new Error(`invalid basis: ${t}`)}function Pe(t){return{mapIndex(e,n,r){const a=+t(e,n);for(const s of e)r[s]=n[s]===null?NaN:n[s]/a}}}function fe(t){return Pe((e,n)=>t(e,r=>n[r]))}const Ms={mapIndex(t,e,n){const[r,a]=ze(t,l=>e[l]),s=a-r;for(const l of t)n[l]=e[l]===null?NaN:(e[l]-r)/s}},ir=Pe((t,e)=>{for(let n=0;n<t.length;++n){const r=e[t[n]];if(_r(r))return r}}),xs=Pe((t,e)=>{for(let n=t.length-1;n>=0;--n){const r=e[t[n]];if(_r(r))return r}}),As={mapIndex(t,e,n){const r=me(t,s=>e[s]),a=sa(t,s=>e[s]);for(const s of t)n[s]=e[s]===null?NaN:a?(e[s]-r)/a:0}},ks=fe(yn),Ls=fe(me),Ds=fe(aa),zs=fe(ra),Ts=fe(br);function cr(t,e,n){const r=t.slice();return r[46]=e[n],r[47]=e,r[48]=n,r}function Bs(t){let e,n,r,a,s,l,f,u,o=`Histogram shows the number of data zones distributed across
                                    different household social economic factors.`,i,d,h="",g=t[46],C,_,D,w,v,x,E,S,k,B=`Density plot refers to UK distribution while the
                                        scattered points refer to data zones in the local authority.`,H,I,M="",V,Y,L,G="";const j=()=>t[25](d,g),nt=()=>t[25](null,g),ot=()=>t[26](I,g),ct=()=>t[26](null,g),lt=()=>t[27](L,g),At=()=>t[27](null,g);return{c(){e=b("div"),n=b("h3"),r=X("Data Zones Distribution (vs. "),a=b("span"),s=X(t[8]),l=X(" average)"),f=T(),u=b("p"),u.textContent=o,i=T(),d=b("div"),d.innerHTML=h,C=T(),_=b("div"),D=b("div"),w=b("h3"),v=X("Co-benefits Recieved by Data Zones across "),x=X(t[46]),E=X(`
                                        Values`),S=T(),k=b("p"),k.textContent=B,H=T(),I=b("div"),I.innerHTML=M,V=T(),Y=b("div"),L=b("div"),L.innerHTML=G,this.h()},l(q){e=y(q,"DIV",{class:!0});var J=N(e);n=y(J,"H3",{class:!0});var pt=N(n);r=W(pt,"Data Zones Distribution (vs. "),a=y(pt,"SPAN",{class:!0});var it=N(a);s=W(it,t[8]),it.forEach(A),l=W(pt," average)"),pt.forEach(A),f=z(J),u=y(J,"P",{class:!0,"data-svelte-h":!0}),R(u)!=="svelte-xcsopb"&&(u.textContent=o),i=z(J),d=y(J,"DIV",{class:!0,"data-svelte-h":!0}),R(d)!=="svelte-1gvlz6w"&&(d.innerHTML=h),J.forEach(A),C=z(q),_=y(q,"DIV",{class:!0});var vt=N(_);D=y(vt,"DIV",{});var $=N(D);w=y($,"H3",{class:!0});var p=N(w);v=W(p,"Co-benefits Recieved by Data Zones across "),x=W(p,t[46]),E=W(p,`
                                        Values`),p.forEach(A),S=z($),k=y($,"P",{class:!0,"data-svelte-h":!0}),R(k)!=="svelte-18bgpzu"&&(k.textContent=B),H=z($),I=y($,"DIV",{class:!0,"data-svelte-h":!0}),R(I)!=="svelte-aesnqn"&&(I.innerHTML=M),$.forEach(A),V=z(vt),Y=y(vt,"DIV",{});var F=N(Y);L=y(F,"DIV",{class:!0,"data-svelte-h":!0}),R(L)!=="svelte-xsgztl"&&(L.innerHTML=G),F.forEach(A),vt.forEach(A),this.h()},h(){m(a,"class","nation-label svelte-1hc23gs"),m(n,"class","component-title"),m(u,"class","description short"),m(d,"class","plot"),m(e,"class","component"),m(w,"class","component-title"),m(k,"class","description short"),m(I,"class","plot"),m(L,"class","plot"),m(_,"class","component")},m(q,J){Gt(q,e,J),c(e,n),c(n,r),c(n,a),c(a,s),c(n,l),c(e,f),c(e,u),c(e,i),c(e,d),j(),Gt(q,C,J),Gt(q,_,J),c(_,D),c(D,w),c(w,v),c(w,x),c(w,E),c(D,S),c(D,k),c(D,H),c(D,I),ot(),c(_,V),c(_,Y),c(Y,L),lt()},p(q,J){t=q,J[0]&256&&De(s,t[8]),g!==t[46]&&(nt(),g=t[46],j()),g!==t[46]&&(ct(),g=t[46],ot()),g!==t[46]&&(At(),g=t[46],lt())},d(q){q&&(A(e),A(C),A(_)),nt(),ct(),At()}}}function Is(t){let e,n,r="",a=t[46];const s=()=>t[24](n,a),l=()=>t[24](null,a);return{c(){e=b("div"),n=b("div"),n.innerHTML=r,this.h()},l(f){e=y(f,"DIV",{class:!0});var u=N(e);n=y(u,"DIV",{class:!0,"data-svelte-h":!0}),R(n)!=="svelte-1shkadq"&&(n.innerHTML=r),u.forEach(A),this.h()},h(){m(n,"class","plot"),m(e,"class","component")},m(f,u){Gt(f,e,u),c(e,n),s()},p(f,u){t=f,a!==t[46]&&(l(),a=t[46],s())},d(f){f&&A(e),l()}}}function ur(t){let e,n,r,a,s,l;function f(i,d){return i[7]?Is:Bs}let u=f(t),o=u(t);return{c(){e=b("div"),n=b("h2"),r=X(t[46]),a=T(),s=b("div"),o.c(),l=T(),this.h()},l(i){e=y(i,"DIV",{});var d=N(e);n=y(d,"H2",{});var h=N(n);r=W(h,t[46]),h.forEach(A),a=z(d),s=y(d,"DIV",{class:!0});var g=N(s);o.l(g),g.forEach(A),l=z(d),d.forEach(A),this.h()},h(){m(s,"class","row")},m(i,d){Gt(i,e,d),c(e,n),c(n,r),c(e,a),c(e,s),o.m(s,null),c(e,l)},p(i,d){u===(u=f(i))&&o?o.p(i,d):(o.d(1),o=u(i),o&&(o.c(),o.m(s,null)))},d(i){i&&A(e),o.d()}}}function Ns(t){let e,n,r,a,s,l="Data Report",f,u,o=t[11][t[10]]+"",i,d,h,g=`Explore how this local authority will benefit from achieving Net Zero and general factors
            of their households.`,C,_,D,w,v,x,E="UK",S,k,B,H,I,M="England",V,Y,L,G,j,nt="Wales",ot,ct,lt,At,q,J="Scotland",pt,it,vt,$,p="Northern Ireland",F,rt,at,et=`<p class="section-subtitle">Overview</p> <h2 class="section-title">How much co-benefit values would this area recieve?</h2> <p class="description">We calculate and model 11 types of co-benefits across five different pathyways
                suggested by Climate Change Committee in the Sixth Carbon Budget from 2025-2050 on the level of data
                zones across UK.</p>`,he,K,Z,ut,de,Kt,be,Fe,He,Ct,Oe,wn=t[11][t[10]]+"",Re,Ue,Qt,_e,je,kt,Cn="",qe,mt,Pt,En=t[11][t[10]]+"",We,Xe,Ye,Ft,Mn="Scroll for zooming in and out.",Ze,Et,xn="",Ge,gt,Ht,An=`<p class="section-subtitle">Temporal Trends</p> <h2 class="section-title">How co-benefits change over time?</h2> <p class="description">Detailed breakdown of temporal trends for total co-benefits, types of co-benefits,
                and five pathways.</p>`,Ke,Lt,Dt,Qe,Jt,we,Je,$e,$t,zt,kn="",tn,Tt,Ot,Ln=`11 Types of Co-benefits Distribution Following Balance Pathway from
                2025-2050`,en,te,ee,Bt,Dn="",nn,It,st,Rt,zn="Households",rn,Ut,Tn="Social Economic Factors of Households",an,jt,Bn=`We describe the distribution of household economic factors aggregated on the data
                zone level and the different level of co-benefits recieved by those data zones.`,sn,qt,on,Nt,In="Aggregate Plots",ln,St,Wt,cn,Nn;e=new Vr({});let ne=Un(_n),tt=[];for(let P=0;P<ne.length;P+=1)tt[P]=ur(cr(t,ne,P));return{c(){Sr(e.$$.fragment),n=T(),r=b("div"),a=b("div"),s=b("p"),s.textContent=l,f=T(),u=b("h1"),i=X(o),d=T(),h=b("p"),h.textContent=g,C=T(),_=b("div"),D=X(`Compare the Local District Area with average of:








            `),w=b("input"),v=T(),x=b("label"),x.textContent=E,S=b("br"),k=T(),B=b("input"),H=T(),I=b("label"),I.textContent=M,V=b("br"),Y=T(),L=b("input"),G=T(),j=b("label"),j.textContent=nt,ot=b("br"),ct=T(),lt=b("input"),At=T(),q=b("label"),q.textContent=J,pt=T(),it=b("input"),vt=T(),$=b("label"),$.textContent=p,F=T(),rt=b("div"),at=b("div"),at.innerHTML=et,he=T(),K=b("div"),Z=b("div"),ut=b("h3"),de=X("11 Types of Co-Benefits Values (vs. "),Kt=b("span"),be=X(t[8]),Fe=X(" Average)"),He=T(),Ct=b("p"),Oe=X("Co-benefits values in "),Re=X(wn),Ue=X(` verus average value across all local
                    authorities in `),Qt=b("span"),_e=X(t[8]),je=T(),kt=b("div"),kt.innerHTML=Cn,qe=T(),mt=b("div"),Pt=b("h3"),We=X(En),Xe=X(" on UK Map"),Ye=T(),Ft=b("p"),Ft.textContent=Mn,Ze=T(),Et=b("div"),Et.innerHTML=xn,Ge=T(),gt=b("div"),Ht=b("div"),Ht.innerHTML=An,Ke=T(),Lt=b("div"),Dt=b("h3"),Qe=X("Total Co-benefits Distribution from 2025-2050 (vs. "),Jt=b("span"),we=X(t[8]),Je=X(" Average)"),$e=T(),$t=b("div"),zt=b("div"),zt.innerHTML=kn,tn=T(),Tt=b("div"),Ot=b("h3"),Ot.textContent=Ln,en=T(),te=b("div"),ee=b("div"),Bt=b("div"),Bt.innerHTML=Dn,nn=T(),It=b("div"),st=b("div"),Rt=b("p"),Rt.textContent=zn,rn=T(),Ut=b("h2"),Ut.textContent=Tn,an=T(),jt=b("p"),jt.textContent=Bn,sn=T(),qt=b("input"),on=T(),Nt=b("label"),Nt.textContent=In,ln=T(),St=b("div");for(let P=0;P<tt.length;P+=1)tt[P].c();this.h()},l(P){Nr(e.$$.fragment,P),n=z(P),r=y(P,"DIV",{class:!0});var Q=N(r);a=y(Q,"DIV",{class:!0});var O=N(a);s=y(O,"P",{class:!0,"data-svelte-h":!0}),R(s)!=="svelte-1gxb8h1"&&(s.textContent=l),f=z(O),u=y(O,"H1",{class:!0});var pe=N(u);i=W(pe,o),pe.forEach(A),d=z(O),h=y(O,"P",{class:!0,"data-svelte-h":!0}),R(h)!=="svelte-g7xah4"&&(h.textContent=g),C=z(O),_=y(O,"DIV",{class:!0});var U=N(_);D=W(U,`Compare the Local District Area with average of:








            `),w=y(U,"INPUT",{type:!0,name:!0}),v=z(U),x=y(U,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(x)!=="svelte-1yhxhao"&&(x.textContent=E),S=y(U,"BR",{}),k=z(U),B=y(U,"INPUT",{type:!0,name:!0}),H=z(U),I=y(U,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(I)!=="svelte-11zyrfp"&&(I.textContent=M),V=y(U,"BR",{}),Y=z(U),L=y(U,"INPUT",{type:!0,name:!0}),G=z(U),j=y(U,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(j)!=="svelte-18hrmu4"&&(j.textContent=nt),ot=y(U,"BR",{}),ct=z(U),lt=y(U,"INPUT",{type:!0,name:!0}),At=z(U),q=y(U,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R(q)!=="svelte-16xf1ji"&&(q.textContent=J),pt=z(U),it=y(U,"INPUT",{type:!0,name:!0}),vt=z(U),$=y(U,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),R($)!=="svelte-g19yfx"&&($.textContent=p),U.forEach(A),O.forEach(A),F=z(Q),rt=y(Q,"DIV",{class:!0});var Ce=N(rt);at=y(Ce,"DIV",{class:!0,"data-svelte-h":!0}),R(at)!=="svelte-ppwlk3"&&(at.innerHTML=et),he=z(Ce),K=y(Ce,"DIV",{id:!0,class:!0});var Ee=N(K);Z=y(Ee,"DIV",{class:!0});var re=N(Z);ut=y(re,"H3",{class:!0});var Me=N(ut);de=W(Me,"11 Types of Co-Benefits Values (vs. "),Kt=y(Me,"SPAN",{class:!0});var Sn=N(Kt);be=W(Sn,t[8]),Sn.forEach(A),Fe=W(Me," Average)"),Me.forEach(A),He=z(re),Ct=y(re,"P",{class:!0});var ve=N(Ct);Oe=W(ve,"Co-benefits values in "),Re=W(ve,wn),Ue=W(ve,` verus average value across all local
                    authorities in `),Qt=y(ve,"SPAN",{class:!0});var Vn=N(Qt);_e=W(Vn,t[8]),Vn.forEach(A),ve.forEach(A),je=z(re),kt=y(re,"DIV",{class:!0,"data-svelte-h":!0}),R(kt)!=="svelte-1gmwtaj"&&(kt.innerHTML=Cn),re.forEach(A),qe=z(Ee),mt=y(Ee,"DIV",{class:!0});var ae=N(mt);Pt=y(ae,"H3",{class:!0});var un=N(Pt);We=W(un,En),Xe=W(un," on UK Map"),un.forEach(A),Ye=z(ae),Ft=y(ae,"P",{class:!0,"data-svelte-h":!0}),R(Ft)!=="svelte-1ask2se"&&(Ft.textContent=Mn),Ze=z(ae),Et=y(ae,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),R(Et)!=="svelte-13ehpmu"&&(Et.innerHTML=xn),ae.forEach(A),Ee.forEach(A),Ce.forEach(A),Ge=z(Q),gt=y(Q,"DIV",{class:!0});var se=N(gt);Ht=y(se,"DIV",{class:!0,"data-svelte-h":!0}),R(Ht)!=="svelte-a3uzt2"&&(Ht.innerHTML=An),Ke=z(se),Lt=y(se,"DIV",{class:!0});var xe=N(Lt);Dt=y(xe,"H3",{class:!0});var Ae=N(Dt);Qe=W(Ae,"Total Co-benefits Distribution from 2025-2050 (vs. "),Jt=y(Ae,"SPAN",{class:!0});var Pn=N(Jt);we=W(Pn,t[8]),Pn.forEach(A),Je=W(Ae," Average)"),Ae.forEach(A),$e=z(xe),$t=y(xe,"DIV",{class:!0});var Fn=N($t);zt=y(Fn,"DIV",{class:!0,"data-svelte-h":!0}),R(zt)!=="svelte-vuq0y7"&&(zt.innerHTML=kn),Fn.forEach(A),xe.forEach(A),tn=z(se),Tt=y(se,"DIV",{class:!0});var ke=N(Tt);Ot=y(ke,"H3",{class:!0,"data-svelte-h":!0}),R(Ot)!=="svelte-199w57s"&&(Ot.textContent=Ln),en=z(ke),te=y(ke,"DIV",{class:!0});var Hn=N(te);ee=y(Hn,"DIV",{class:!0});var On=N(ee);Bt=y(On,"DIV",{class:!0,"data-svelte-h":!0}),R(Bt)!=="svelte-18dxhf7"&&(Bt.innerHTML=Dn),On.forEach(A),Hn.forEach(A),ke.forEach(A),se.forEach(A),nn=z(Q),It=y(Q,"DIV",{class:!0});var Le=N(It);st=y(Le,"DIV",{class:!0});var yt=N(st);Rt=y(yt,"P",{class:!0,"data-svelte-h":!0}),R(Rt)!=="svelte-ceroz1"&&(Rt.textContent=zn),rn=z(yt),Ut=y(yt,"H2",{class:!0,"data-svelte-h":!0}),R(Ut)!=="svelte-so6kne"&&(Ut.textContent=Tn),an=z(yt),jt=y(yt,"P",{class:!0,"data-svelte-h":!0}),R(jt)!=="svelte-1u75598"&&(jt.textContent=Bn),sn=z(yt),qt=y(yt,"INPUT",{type:!0}),on=z(yt),Nt=y(yt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(Nt)!=="svelte-1kwkdzm"&&(Nt.textContent=In),yt.forEach(A),ln=z(Le),St=y(Le,"DIV",{id:!0,class:!0});var Rn=N(St);for(let fn=0;fn<tt.length;fn+=1)tt[fn].l(Rn);Rn.forEach(A),Le.forEach(A),Q.forEach(A),this.h()},h(){m(s,"class","page-subtitle"),m(u,"class","page-title"),m(h,"class","description"),m(w,"type","radio"),m(w,"name","compare"),w.value="UK",w.checked=!0,m(x,"class","nation-label svelte-1hc23gs"),m(x,"for","html"),m(B,"type","radio"),m(B,"name","compare"),B.value="England",m(I,"class","nation-label svelte-1hc23gs"),m(I,"for","html"),m(L,"type","radio"),m(L,"name","compare"),L.value="Wales",m(j,"class","nation-label svelte-1hc23gs"),m(j,"for","html"),m(lt,"type","radio"),m(lt,"name","compare"),lt.value="Scotland",m(q,"class","nation-label svelte-1hc23gs"),m(q,"for","javascript"),m(it,"type","radio"),m(it,"name","compare"),it.value="NI",m($,"class","nation-label svelte-1hc23gs"),m($,"for","javascript"),m(_,"class","radio-set"),m(a,"class","section header"),m(at,"class","section-header"),m(Kt,"class","nation-label svelte-1hc23gs"),m(ut,"class","component-title"),m(Qt,"class","nation-label svelte-1hc23gs"),m(Ct,"class","description"),m(kt,"class","plot"),m(Z,"class","component column"),m(Pt,"class","component-title"),m(Ft,"class","description"),m(Et,"id","map"),m(Et,"class","svelte-1hc23gs"),m(mt,"class","component column"),m(K,"id","vis-block"),m(K,"class","svelte-1hc23gs"),m(rt,"class","section"),m(Ht,"class","section-header"),m(Jt,"class","nation-label svelte-1hc23gs"),m(Dt,"class","component-title"),m(zt,"class","plot"),m($t,"class","row"),m(Lt,"class","component singlevis"),m(Ot,"class","component-title"),m(Bt,"class","plot"),m(ee,"class","row"),m(te,"class","row"),m(Tt,"class","component singlevis"),m(gt,"class","section"),m(Rt,"class","section-subtitle"),m(Ut,"class","section-title"),m(jt,"class","description"),m(qt,"type","checkbox"),m(Nt,"for","checkbox"),m(Nt,"class","svelte-1hc23gs"),m(st,"class","section-header"),m(St,"id","multiple-comp"),m(St,"class","svelte-1hc23gs"),m(It,"class","section"),m(r,"class","page-container")},m(P,Q){Ir(e,P,Q),Gt(P,n,Q),Gt(P,r,Q),c(r,a),c(a,s),c(a,f),c(a,u),c(u,i),c(a,d),c(a,h),c(a,C),c(a,_),c(_,D),c(_,w),c(_,v),c(_,x),c(_,S),c(_,k),c(_,B),c(_,H),c(_,I),c(_,V),c(_,Y),c(_,L),c(_,G),c(_,j),c(_,ot),c(_,ct),c(_,lt),c(_,At),c(_,q),c(_,pt),c(_,it),c(_,vt),c(_,$),c(r,F),c(r,rt),c(rt,at),c(rt,he),c(rt,K),c(K,Z),c(Z,ut),c(ut,de),c(ut,Kt),c(Kt,be),c(ut,Fe),c(Z,He),c(Z,Ct),c(Ct,Oe),c(Ct,Re),c(Ct,Ue),c(Ct,Qt),c(Qt,_e),c(Z,je),c(Z,kt),t[19](kt),c(K,qe),c(K,mt),c(mt,Pt),c(Pt,We),c(Pt,Xe),c(mt,Ye),c(mt,Ft),c(mt,Ze),c(mt,Et),t[20](Et),c(r,Ge),c(r,gt),c(gt,Ht),c(gt,Ke),c(gt,Lt),c(Lt,Dt),c(Dt,Qe),c(Dt,Jt),c(Jt,we),c(Dt,Je),c(Lt,$e),c(Lt,$t),c($t,zt),t[21](zt),c(gt,tn),c(gt,Tt),c(Tt,Ot),c(Tt,en),c(Tt,te),c(te,ee),c(ee,Bt),t[22](Bt),c(r,nn),c(r,It),c(It,st),c(st,Rt),c(st,rn),c(st,Ut),c(st,an),c(st,jt),c(st,sn),c(st,qt),qt.checked=t[7],c(st,on),c(st,Nt),c(It,ln),c(It,St);for(let O=0;O<tt.length;O+=1)tt[O]&&tt[O].m(St,null);t[28](r),Wt=!0,cn||(Nn=[oe(w,"change",t[12]),oe(B,"change",t[12]),oe(L,"change",t[12]),oe(lt,"change",t[12]),oe(it,"change",t[12]),oe(qt,"change",t[23])],cn=!0)},p(P,Q){if((!Wt||Q[0]&256)&&De(be,P[8]),(!Wt||Q[0]&256)&&De(_e,P[8]),(!Wt||Q[0]&256)&&De(we,P[8]),Q[0]&128&&(qt.checked=P[7]),Q[0]&440){ne=Un(_n);let O;for(O=0;O<ne.length;O+=1){const pe=cr(P,ne,O);tt[O]?tt[O].p(pe,Q):(tt[O]=ur(pe),tt[O].c(),tt[O].m(St,null))}for(;O<tt.length;O+=1)tt[O].d(1);tt.length=ne.length}},i(P){Wt||(Br(e.$$.fragment,P),Wt=!0)},o(P){Tr(e.$$.fragment,P),Wt=!1},d(P){P&&(A(n),A(r)),zr(e,P),t[19](null),t[20](null),t[21](null),t[22](null),xr(tt,P),t[28](null),cn=!1,Ar(Nn)}}}let dt=400;function Zt(t){const e=t.querySelector("figure");e&&e.remove();const n=t.querySelector("svg");n&&n.remove()}function Ss(t,e,n){let r,a,s,l,f={},u={},o={},i={},d="barchart",h=!1,{data:g}=e;const C=g.LAD;let _="UK",D,w,v,x,E,S,k=!1;async function B(){n(15,D=await wt(Gn())),await wt(ya()),n(16,w=await wt(Kn([]))),v=await wt(ba(Yn)),n(17,x=await wt(Qn())),E=await wt(_a(C)),S=await wt(wa(C)),n(18,k=!0),ha(r)}B();const H=g.LADToName;let I,M;kr(()=>{fa(r),I=new ca(C,"LAD",M,"val",!0),I.initMap()});function V(){{let p=ft({height:dt/1.4,...ht,x:{type:"band"},style:{fontSize:"18px"},marks:[Xt(w,bt({y:"mean"},{y:"val",x:"scenario",fill:"lightblue",opacity:.7,dx:20})),Xt(E,bt({y:"sum"},{y:"total",x:"scenario",tip:!0}))]});setTimeout(()=>{const F=_t(p).selectAll("g[aria-label='bar']"),rt=_t(F.nodes()[0]),at=_t(F.nodes()[1]);console.log(2323232323,rt.node()),at.selectAll("rect").each(function(){console.log(2,this)}),at.remove()},1e3)}}function Y(){a?.append(ft({height:dt,width:811,MARGINS:ht,x:{type:"band"},marks:[Xt(x,bt({y:"mean"},{y:"val",x:"co_benefit_type",dx:ma,fill:le,sort:{x:"y",reverse:!0},tip:!0})),Xt(S,bt({y:"sum"},{y:"total",x:"co_benefit_type",fill:p=>ga(p.co_benefit_type),tip:!0}))]}))}function L(){_n.forEach(p=>{let F;h?(Zn.includes(p)?F=ft({height:dt/3,width:500*2,...ht,style:{fontSize:"18px"},color:{legend:!0,scheme:"greys"},x:{domain:yr(0,6),ticks:new Set(E.map(et=>et[p]))},marks:[rr(E,bt({fill:"count"},{x:p,stroke:"black"})),rr([Math.floor(me(D.map(et=>et[p])))],{x:et=>et,stroke:"red",fill:null,strokeWidth:2})]}):F=ft({height:dt/3,width:500*2,...ht,style:{fontSize:"18px"},color:{legend:!0},marks:[gn(E,{x:p,tip:!0}),gn([me(E.map(et=>et[p]))],{stroke:"blue",strokeWidth:2}),gn([me(D.map(et=>et[p]))],{stroke:"red",strokeWidth:2})]}),f[p]?.append(F)):(Zn.includes(p)?F=ft({height:dt/2,width:500,...ht,marginLeft:100,x:{grid:!0,label:p,tickFormat:et=>Math.floor(et)},style:{fontSize:"18px"},color:{legend:!0},marks:[Xt(D,lr(bt({y:"count"},{x:p,dx:20,fill:le}))),Xt(E,lr(bt({y:"count"},{x:p})))]}):F=ft({height:dt/2,...ht,style:{fontSize:"18px"},marks:[pn(E,tr({y:"proportion"},{x:p,tip:!0,fill:le,stroke:le,fillOpacity:.2,strokeWidth:3})),pn(D,tr({y:"proportion"},{x:p,tip:!0,fill:"black",stroke:"black",fillOpacity:.2,strokeWidth:3}))]}),u[p]?.append(void 0),f[p]?.append(F));let at=ft({height:dt/2,...ht,style:{fontSize:"18px"},color:{range:["rgb(227, 248, 255)","lightblue"]},marks:[fs(ua(D,3e4),{x:p,y:"total",fill:"density",thresholds:10}),La(E,{x:p,y:"total",fill:"black",r:2}),ws(E,{x:p,y:"total"}),la(),ia({anchor:"bottom"})]});o[p]?.append(at)})}function G(){for(let p of va){let F=ft({height:dt,width:410,...ht,marginRight:0,marginLeft:100,marks:[Jn(v,Xn({x:"mean"},{x:"val",y:"co_benefit_type",dy:-10,fill:le,tip:!0})),Jn(S,Xn({x:"mean"},{x:"total",y:"co_benefit_type",tip:!0}))]});i[p]?.append(F)}}function j(){let p=E.flatMap(K=>dn.map(Z=>({time:Z,value:K[Z],scenario:K.scenario,zone:"local"}))),F=D.flatMap(K=>dn.map(Z=>({time:Z,value:K[Z],scenario:K.scenario,zone:"UK"}))),rt=p.concat(F),at=ft({height:dt,width:800,...ht,paddingLeft:200,marginRight:0,x:{tickSize:0,label:null,ticks:[]},color:{range:[da,le]},marks:[Xt(rt,bt({y:"mean"},{x:"zone",y:"value",fx:"time",tip:!0,fill:"zone"}))]});s?.append(at),_t(s).select("g[aria-label='bar']").selectAll("g").each(function(K,Z){const ut=_t(this).selectAll("rect").nodes()[0],de=_t(ut).attr("transform")||"";_t(ut).attr("transform",`${de} translate(-20, 0)`),_t(this).selectAll("rect").nodes()[0].getAttribute("height"),_t(this).selectAll("rect").nodes()[1].getAttribute("height"),_t(this).selectAll("rect")}),ft({height:dt,width:800,...ht,paddingLeft:200,marginRight:0,color:{legend:!0},marks:[$a(rt,bt({y:"mean"},{x:"time",y:"value",tip:!0,stroke:"scenario"}))]});let et=S.flatMap(K=>dn.map(Z=>({time:Z,value:K[Z],cobenefit:K.co_benefit_type}))),he=ft({height:dt,width:1e3,...ht,paddingLeft:200,marginRight:0,insetLeft:10,insetRight:10,insetBottom:30,style:{fontSize:"10px"},y:{tickFormat:".2f",label:"Value (£)"},x:{label:"Year"},color:{legend:!0,range:pa,domain:Yn},marks:[pn(et,bt({y:"mean"},{x:"time",y:"value",tip:!0,fill:"cobenefit"})),Wn([0],{strokeWidth:8,stroke:"white",opacity:1,strokeLinecap:"round"}),Wn([0],{strokeWidth:2,stroke:"#333333",opacity:1,strokeLinecap:"round"})]});l?.append(he)}async function nt(p){n(8,_=p.currentTarget.value),n(17,x=await wt(Qn("total",_))),n(16,w=await wt(Kn([],_))),n(15,D=await wt(Gn(_)))}function ot(p){Mt[p?"unshift":"push"](()=>{a=p,n(0,a)})}function ct(p){Mt[p?"unshift":"push"](()=>{M=p,n(9,M)})}function lt(p){Mt[p?"unshift":"push"](()=>{s=p,n(1,s)})}function At(p){Mt[p?"unshift":"push"](()=>{l=p,n(2,l)})}function q(){h=this.checked,n(7,h)}function J(p,F){Mt[p?"unshift":"push"](()=>{f[F]=p,n(3,f)})}function pt(p,F){Mt[p?"unshift":"push"](()=>{f[F]=p,n(3,f)})}function it(p,F){Mt[p?"unshift":"push"](()=>{u[F]=p,n(4,u)})}function vt(p,F){Mt[p?"unshift":"push"](()=>{o[F]=p,n(5,o)})}function $(p){Mt[p?"unshift":"push"](()=>{r=p,n(6,r)})}return t.$$set=p=>{"data"in p&&n(13,g=p.data)},t.$$.update=()=>{t.$$.dirty[0]&507911&&(a&&Zt(a),s&&Zt(s),l&&Zt(l),k&&x&&w&&D&&(console.log("render"),V(),Y(),j())),t.$$.dirty[0]&262200&&(Object.values(f).forEach(p=>{p&&Zt(p)}),Object.values(u).forEach(p=>{p&&Zt(p)}),Object.values(o).forEach(p=>{p&&Zt(p)}),k&&L()),t.$$.dirty[0]&262144&&(Object.values(i).forEach(p=>{p&&Zt(p)}),k&&G())},[a,s,l,f,u,o,r,h,_,M,C,H,nt,g,d,D,w,x,k,ot,ct,lt,At,q,J,pt,it,vt,$]}class Ys extends Lr{constructor(e){super(),Dr(this,e,Ss,Ns,Mr,{data:13},null,[-1,-1])}}export{Ys as component};
