import{s as qe,e as c,a as S,t as le,c as f,b as v,g as A,d as ae,f as r,q as h,i as K,h as o,W as ht,y as ye,n as Me,z as vt,X as Rt,w as Ge,j as _e,p as oe,x as we,B as tt,C as Ie,H as jt,r as bt,E as Gt,N as qt,Y as Ct,Z as Wt,v as zt,_ as Xt,A as je}from"../chunks/scheduler.GkBzG_tJ.js";import{S as st,i as rt,c as lt,b as at,m as nt,t as Be,a as Ae,e as wt,d as it,g as Dt}from"../chunks/index.puHNmHGV.js";import{e as Te,N as Yt}from"../chunks/NavigationBar.P_46taXB.js";import{b as Re}from"../chunks/paths.CPiWD8rj.js";import{g as Kt}from"../chunks/entry.DeMhmWOz.js";import{I as ot,P as Zt,Q as Et}from"../chunks/index.CHZ6sWj5.js";import{g as dt,C as _t,e as Qt,f as Jt,r as xt,h as $t,i as el}from"../chunks/globals.ogqPN0SY.js";import{b as mt}from"../chunks/bar.B1iivFak.js";import{g as et,j as tl,k as ll,l as al,m as nl}from"../chunks/duckdb.N1R-6HAq.js";import"../chunks/transform.BNP73y-7.js";function Vt(a,e,t){const l=a.slice();return l[10]=e[t],l}function kt(a){let e,t=Te(a[2]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Bt(Vt(a,t,n));return{c(){e=c("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=f(n,"UL",{class:!0});var i=v(e);for(let s=0;s<l.length;s+=1)l[s].l(i);i.forEach(r),this.h()},h(){h(e,"class","suggestions svelte-1kj8esc")},m(n,i){K(n,e,i);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(n,i){if(i&12){t=Te(n[2]);let s;for(s=0;s<t.length;s+=1){const u=Vt(n,t,s);l[s]?l[s].p(u,i):(l[s]=Bt(u),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){n&&r(e),Ge(l,n)}}}function Bt(a){let e,t=a[10][1]+"",l,n,i;function s(){return a[7](a[10])}return{c(){e=c("li"),l=le(t),this.h()},l(u){e=f(u,"LI",{class:!0});var _=v(e);l=ae(_,t),_.forEach(r),this.h()},h(){h(e,"class","svelte-1kj8esc")},m(u,_){K(u,e,_),o(e,l),n||(i=ye(e,"click",s),n=!0)},p(u,_){a=u,_&4&&t!==(t=a[10][1]+"")&&_e(l,t)},d(u){u&&r(e),n=!1,i()}}}function il(a){let e,t,l,n,i,s,u,_,g,B,d=a[2].length&&kt(a);return{c(){e=c("div"),t=c("div"),l=c("input"),n=S(),i=c("button"),s=le("See Report"),_=S(),d&&d.c(),this.h()},l(b){e=f(b,"DIV",{class:!0});var C=v(e);t=f(C,"DIV",{class:!0});var p=v(t);l=f(p,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,class:!0}),n=A(p),i=f(p,"BUTTON",{type:!0,class:!0});var U=v(i);s=ae(U,"See Report"),U.forEach(r),p.forEach(r),_=A(C),d&&d.l(C),C.forEach(r),this.h()},h(){h(l,"type","text"),h(l,"placeholder","Type local authority name to search..."),h(l,"autocomplete","off"),h(l,"class","svelte-1kj8esc"),h(i,"type","button"),h(i,"class","search-btn svelte-1kj8esc"),i.disabled=u=!a[1],h(t,"class","input-group svelte-1kj8esc"),h(e,"class","autocomplete svelte-1kj8esc")},m(b,C){K(b,e,C),o(e,t),o(t,l),ht(l,a[0]),o(t,n),o(t,i),o(i,s),o(e,_),d&&d.m(e,null),g||(B=[ye(l,"input",a[6]),ye(i,"click",a[4])],g=!0)},p(b,[C]){C&1&&l.value!==b[0]&&ht(l,b[0]),C&2&&u!==(u=!b[1])&&(i.disabled=u),b[2].length?d?d.p(b,C):(d=kt(b),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i:Me,o:Me,d(b){b&&r(e),d&&d.d(),g=!1,vt(B)}}}function ol(a,e,t){let l;const n=Rt();let{items:i}=e,s="",u=null;const _=Object.entries(i);function g([C,p]){t(0,s=p),t(1,u=C),n("select",C)}function B(){u&&n("search",u)}function d(){s=this.value,t(0,s)}const b=C=>g(C);return a.$$set=C=>{"items"in C&&t(5,i=C.items)},a.$$.update=()=>{a.$$.dirty&1&&t(2,l=s?_.filter(([C,p])=>p.toLowerCase().includes(s.toLowerCase())).slice(0,10):[])},[s,u,l,g,B,i,d,b]}class sl extends st{constructor(e){super(),rt(this,e,ol,il,qe,{items:5})}}function Tt(a,e,t){const l=a.slice();return l[11]=e[t],l}function Lt(a){let e,t=(a[6]==="total"?a[8](a[11].total_value,a[1],a[2],a[11].co_benefit_type,a[5]):a[8](a[11].value_per_capita,a[3],a[4],a[11].co_benefit_type,a[5]))+"",l;return{c(){e=new jt(!1),l=bt(),this.h()},l(n){e=Gt(n,!1),l=bt(),this.h()},h(){e.a=l},m(n,i){e.m(t,n,i),K(n,l,i)},p(n,i){i&127&&t!==(t=(n[6]==="total"?n[8](n[11].total_value,n[1],n[2],n[11].co_benefit_type,n[5]):n[8](n[11].value_per_capita,n[3],n[4],n[11].co_benefit_type,n[5]))+"")&&e.p(t)},d(n){n&&(r(l),e.d())}}}function rl(a){let e,t=a[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=c("span"),l=le(t)},l(n){e=f(n,"SPAN",{});var i=v(e);l=ae(i,t),i.forEach(r)},m(n,i){K(n,e,i),o(e,l)},p(n,i){i&1&&t!==(t=n[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&_e(l,t)},d(n){n&&r(e)}}}function cl(a){let e,t=a[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=c("span"),l=le(t)},l(n){e=f(n,"SPAN",{});var i=v(e);l=ae(i,t),i.forEach(r)},m(n,i){K(n,e,i),o(e,l)},p(n,i){i&1&&t!==(t=n[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&_e(l,t)},d(n){n&&r(e)}}}function yt(a){let e,t,l,n,i,s,u,_=a[7](a[11].co_benefit_type)+"",g,B,d,b,C,p=a[6],U,N,L,w=Lt(a);function m(H,I){return H[6]==="total"?cl:rl}let F=m(a),M=F(a);return{c(){e=c("tr"),t=c("td"),l=c("div"),n=c("img"),s=S(),u=c("a"),g=le(_),d=S(),b=c("td"),C=c("div"),w.c(),U=S(),N=c("td"),M.c(),L=S(),this.h()},l(H){e=f(H,"TR",{});var I=v(e);t=f(I,"TD",{});var z=v(t);l=f(z,"DIV",{class:!0});var Y=v(l);n=f(Y,"IMG",{src:!0,alt:!0,class:!0}),s=A(Y),u=f(Y,"A",{href:!0});var X=v(u);g=ae(X,_),X.forEach(r),Y.forEach(r),z.forEach(r),d=A(I),b=f(I,"TD",{});var R=v(b);C=f(R,"DIV",{class:!0});var V=v(C);w.l(V),V.forEach(r),R.forEach(r),U=A(I),N=f(I,"TD",{});var j=v(N);M.l(j),j.forEach(r),L=A(I),I.forEach(r),this.h()},h(){Ie(n.src,i=dt(a[11].co_benefit_type))||h(n,"src",i),h(n,"alt","Icon"),h(n,"class","in-table-icon"),h(u,"href",B=Re+"/cobenefit?cobenefit="+a[11].co_benefit_type),h(l,"class","coben-content"),h(C,"class","bar-cell")},m(H,I){K(H,e,I),o(e,t),o(t,l),o(l,n),o(l,s),o(l,u),o(u,g),o(e,d),o(e,b),o(b,C),w.m(C,null),o(e,U),o(e,N),M.m(N,null),o(e,L)},p(H,I){I&1&&!Ie(n.src,i=dt(H[11].co_benefit_type))&&h(n,"src",i),I&1&&_!==(_=H[7](H[11].co_benefit_type)+"")&&_e(g,_),I&1&&B!==(B=Re+"/cobenefit?cobenefit="+H[11].co_benefit_type)&&h(u,"href",B),I&64&&qe(p,p=H[6])?(w.d(1),w=Lt(H),w.c(),w.m(C,null)):w.p(H,I),F===(F=m(H))&&M?M.p(H,I):(M.d(1),M=F(H),M&&(M.c(),M.m(N,null)))},d(H){H&&r(e),w.d(H),M.d()}}}function fl(a){let e,t,l,n="Total",i,s,u="Per Capita",_,g,B,d,b,C="Name",p,U,N=a[6]==="total"?"Total":"Per Capita",L,w,m,F=a[6]==="total"?"£, billion":"£",M,H,I,z,Y,X=Te(a[0]),R=[];for(let V=0;V<X.length;V+=1)R[V]=yt(Tt(a,X,V));return{c(){e=c("div"),t=c("div"),l=c("button"),l.textContent=n,i=S(),s=c("button"),s.textContent=u,_=S(),g=c("table"),B=c("thead"),d=c("tr"),b=c("th"),b.textContent=C,p=S(),U=c("th"),L=le(N),w=S(),m=c("th"),M=le(F),H=S(),I=c("tbody");for(let V=0;V<R.length;V+=1)R[V].c();this.h()},l(V){e=f(V,"DIV",{class:!0});var j=v(e);t=f(j,"DIV",{class:!0});var P=v(t);l=f(P,"BUTTON",{"data-svelte-h":!0}),oe(l)!=="svelte-15mf98g"&&(l.textContent=n),i=A(P),s=f(P,"BUTTON",{"data-svelte-h":!0}),oe(s)!=="svelte-1ts3a4f"&&(s.textContent=u),P.forEach(r),j.forEach(r),_=A(V),g=f(V,"TABLE",{class:!0});var Q=v(g);B=f(Q,"THEAD",{});var W=v(B);d=f(W,"TR",{});var x=v(d);b=f(x,"TH",{"data-svelte-h":!0}),oe(b)!=="svelte-13ju7y1"&&(b.textContent=C),p=A(x),U=f(x,"TH",{style:!0});var q=v(U);L=ae(q,N),q.forEach(r),w=A(x),m=f(x,"TH",{style:!0});var k=v(m);M=ae(k,F),k.forEach(r),x.forEach(r),W.forEach(r),H=A(Q),I=f(Q,"TBODY",{});var O=v(I);for(let T=0;T<R.length;T+=1)R[T].l(O);O.forEach(r),Q.forEach(r),this.h()},h(){we(l,"selected",a[6]==="total"),we(s,"selected",a[6]==="per_capita"),h(t,"class","button-group"),h(e,"class","controls"),tt(U,"width","180px"),tt(m,"width","80px"),h(g,"class","data-table")},m(V,j){K(V,e,j),o(e,t),o(t,l),o(t,i),o(t,s),K(V,_,j),K(V,g,j),o(g,B),o(B,d),o(d,b),o(d,p),o(d,U),o(U,L),o(d,w),o(d,m),o(m,M),o(g,H),o(g,I);for(let P=0;P<R.length;P+=1)R[P]&&R[P].m(I,null);z||(Y=[ye(l,"click",a[9]),ye(s,"click",a[10])],z=!0)},p(V,[j]){if(j&64&&we(l,"selected",V[6]==="total"),j&64&&we(s,"selected",V[6]==="per_capita"),j&64&&N!==(N=V[6]==="total"?"Total":"Per Capita")&&_e(L,N),j&64&&F!==(F=V[6]==="total"?"£, billion":"£")&&_e(M,F),j&511){X=Te(V[0]);let P;for(P=0;P<X.length;P+=1){const Q=Tt(V,X,P);R[P]?R[P].p(Q,j):(R[P]=yt(Q),R[P].c(),R[P].m(I,null))}for(;P<R.length;P+=1)R[P].d(1);R.length=X.length}},i:Me,o:Me,d(V){V&&(r(e),r(_),r(g)),Ge(R,V),z=!1,vt(Y)}}}function ul(a,e,t){let{aggregationPerCapitaPerBenefit:l}=e,{minCoBenefValue:n}=e,{maxCoBenefValue:i}=e,{minHHCoBenefValue:s}=e,{maxHHCoBenefValue:u}=e,{COBENEFS_SCALE:_}=e;function g(p){return _t.find(U=>U.id===p)?.label??p}let B="total";function d(p,U,N,L,w){const m=w(L);return ot({width:100,height:20,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,x:{domain:[U,N],axis:null},marks:[Zt([0],{stroke:"#3C3C3C"}),mt([p],{x:M=>M,y:0,fill:m})]}).outerHTML}const b=()=>t(6,B="total"),C=()=>t(6,B="per_capita");return a.$$set=p=>{"aggregationPerCapitaPerBenefit"in p&&t(0,l=p.aggregationPerCapitaPerBenefit),"minCoBenefValue"in p&&t(1,n=p.minCoBenefValue),"maxCoBenefValue"in p&&t(2,i=p.maxCoBenefValue),"minHHCoBenefValue"in p&&t(3,s=p.minHHCoBenefValue),"maxHHCoBenefValue"in p&&t(4,u=p.maxHHCoBenefValue),"COBENEFS_SCALE"in p&&t(5,_=p.COBENEFS_SCALE)},[l,n,i,s,u,_,B,g,d,b,C]}class hl extends st{constructor(e){super(),rt(this,e,ul,fl,qe,{aggregationPerCapitaPerBenefit:0,minCoBenefValue:1,maxCoBenefValue:2,minHHCoBenefValue:3,maxHHCoBenefValue:4,COBENEFS_SCALE:5})}}function Ht(a,e,t){const l=a.slice();return l[16]=e[t],l}function St(a,e,t){const l=a.slice();return l[19]=e[t],l}function At(a){let e,t=a[19].label+"",l;return{c(){e=c("option"),l=le(t),this.h()},l(n){e=f(n,"OPTION",{});var i=v(e);l=ae(i,t),i.forEach(r),this.h()},h(){e.__value=a[19].value,ht(e,e.__value)},m(n,i){K(n,e,i),o(e,l)},p:Me,d(n){n&&r(e)}}}function dl(a){let e,t=a[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=c("span"),l=le(t)},l(n){e=f(n,"SPAN",{});var i=v(e);l=ae(i,t),i.forEach(r)},m(n,i){K(n,e,i),o(e,l)},p(n,i){i&2&&t!==(t=n[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&_e(l,t)},d(n){n&&r(e)}}}function _l(a){let e,t=a[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=c("span"),l=le(t)},l(n){e=f(n,"SPAN",{});var i=v(e);l=ae(i,t),i.forEach(r)},m(n,i){K(n,e,i),o(e,l)},p(n,i){i&2&&t!==(t=n[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&_e(l,t)},d(n){n&&r(e)}}}function It(a){let e,t,l,n=(a[5][a[16].LAD]??a[16].LAD)+"",i,s,u,_,g,B,d=(a[2]==="total"?a[9](a[16].total_value,a[3]):a[10](a[16].value_per_capita,a[4]))+"",b,C,p;function U(w,m){return w[2]==="total"?_l:dl}let N=U(a),L=N(a);return{c(){e=c("tr"),t=c("td"),l=c("a"),i=le(n),u=S(),_=c("td"),g=c("div"),B=new jt(!1),b=S(),C=c("td"),L.c(),p=S(),this.h()},l(w){e=f(w,"TR",{});var m=v(e);t=f(m,"TD",{});var F=v(t);l=f(F,"A",{href:!0});var M=v(l);i=ae(M,n),M.forEach(r),F.forEach(r),u=A(m),_=f(m,"TD",{});var H=v(_);g=f(H,"DIV",{class:!0});var I=v(g);B=Gt(I,!1),I.forEach(r),H.forEach(r),b=A(m),C=f(m,"TD",{});var z=v(C);L.l(z),z.forEach(r),p=A(m),m.forEach(r),this.h()},h(){h(l,"href",s=Re+"/location?location="+a[16].LAD),B.a=null,h(g,"class","bar-cell")},m(w,m){K(w,e,m),o(e,t),o(t,l),o(l,i),o(e,u),o(e,_),o(_,g),B.m(d,g),o(e,b),o(e,C),L.m(C,null),o(e,p)},p(w,m){m&34&&n!==(n=(w[5][w[16].LAD]??w[16].LAD)+"")&&_e(i,n),m&2&&s!==(s=Re+"/location?location="+w[16].LAD)&&h(l,"href",s),m&30&&d!==(d=(w[2]==="total"?w[9](w[16].total_value,w[3]):w[10](w[16].value_per_capita,w[4]))+"")&&B.p(d),N===(N=U(w))&&L?L.p(w,m):(L.d(1),L=N(w),L&&(L.c(),L.m(C,null)))},d(w){w&&r(e),L.d()}}}function ml(a){let e,t,l="Nation:",n,i,s,u,_,g="Total",B,d,b="Per Capita",C,p,U,N,L,w='Name <span style="font-weight:300; color: #545454">(Top 12 in display)</span>',m,F,M=a[2]==="total"?"Total":"Per Capita",H,I,z,Y=a[2]==="total"?"£, billion":"£",X,R,V,j,P,Q=Te(a[7]),W=[];for(let k=0;k<Q.length;k+=1)W[k]=At(St(a,Q,k));let x=Te(a[1]),q=[];for(let k=0;k<x.length;k+=1)q[k]=It(Ht(a,x,k));return{c(){e=c("div"),t=c("label"),t.textContent=l,n=S(),i=c("select");for(let k=0;k<W.length;k+=1)W[k].c();s=S(),u=c("div"),_=c("button"),_.textContent=g,B=S(),d=c("button"),d.textContent=b,C=S(),p=c("table"),U=c("thead"),N=c("tr"),L=c("th"),L.innerHTML=w,m=S(),F=c("th"),H=le(M),I=S(),z=c("th"),X=le(Y),R=S(),V=c("tbody");for(let k=0;k<q.length;k+=1)q[k].c();this.h()},l(k){e=f(k,"DIV",{class:!0});var O=v(e);t=f(O,"LABEL",{"data-svelte-h":!0}),oe(t)!=="svelte-1ecnfnj"&&(t.textContent=l),n=A(O),i=f(O,"SELECT",{});var T=v(i);for(let be=0;be<W.length;be+=1)W[be].l(T);T.forEach(r),s=A(O),u=f(O,"DIV",{class:!0});var ne=v(u);_=f(ne,"BUTTON",{"data-svelte-h":!0}),oe(_)!=="svelte-2dev6e"&&(_.textContent=g),B=A(ne),d=f(ne,"BUTTON",{"data-svelte-h":!0}),oe(d)!=="svelte-1q4fgxf"&&(d.textContent=b),ne.forEach(r),O.forEach(r),C=A(k),p=f(k,"TABLE",{class:!0});var Ve=v(p);U=f(Ve,"THEAD",{});var he=v(U);N=f(he,"TR",{});var se=v(N);L=f(se,"TH",{"data-svelte-h":!0}),oe(L)!=="svelte-1homman"&&(L.innerHTML=w),m=A(se),F=f(se,"TH",{style:!0});var Ne=v(F);H=ae(Ne,M),Ne.forEach(r),I=A(se),z=f(se,"TH",{style:!0});var He=v(z);X=ae(He,Y),He.forEach(r),se.forEach(r),he.forEach(r),R=A(Ve),V=f(Ve,"TBODY",{});var pe=v(V);for(let be=0;be<q.length;be+=1)q[be].l(pe);pe.forEach(r),Ve.forEach(r),this.h()},h(){a[0]===void 0&&qt(()=>a[13].call(i)),we(_,"selected",a[2]==="total"),we(d,"selected",a[2]==="per_capita"),h(u,"class","button-group"),h(e,"class","controls"),tt(F,"width","120px"),tt(z,"width","80px"),h(p,"class","data-table")},m(k,O){K(k,e,O),o(e,t),o(e,n),o(e,i);for(let T=0;T<W.length;T+=1)W[T]&&W[T].m(i,null);Ct(i,a[0],!0),o(e,s),o(e,u),o(u,_),o(u,B),o(u,d),K(k,C,O),K(k,p,O),o(p,U),o(U,N),o(N,L),o(N,m),o(N,F),o(F,H),o(N,I),o(N,z),o(z,X),o(p,R),o(p,V);for(let T=0;T<q.length;T+=1)q[T]&&q[T].m(V,null);j||(P=[ye(i,"change",a[13]),ye(i,"change",a[8]),ye(_,"click",a[14]),ye(d,"click",a[15])],j=!0)},p(k,[O]){if(O&128){Q=Te(k[7]);let T;for(T=0;T<Q.length;T+=1){const ne=St(k,Q,T);W[T]?W[T].p(ne,O):(W[T]=At(ne),W[T].c(),W[T].m(i,null))}for(;T<W.length;T+=1)W[T].d(1);W.length=Q.length}if(O&129&&Ct(i,k[0]),O&4&&we(_,"selected",k[2]==="total"),O&4&&we(d,"selected",k[2]==="per_capita"),O&4&&M!==(M=k[2]==="total"?"Total":"Per Capita")&&_e(H,M),O&4&&Y!==(Y=k[2]==="total"?"£, billion":"£")&&_e(X,Y),O&1598){x=Te(k[1]);let T;for(T=0;T<x.length;T+=1){const ne=Ht(k,x,T);q[T]?q[T].p(ne,O):(q[T]=It(ne),q[T].c(),q[T].m(V,null))}for(;T<q.length;T+=1)q[T].d(1);q.length=x.length}},i:Me,o:Me,d(k){k&&(r(e),r(C),r(p)),Ge(W,k),Ge(q,k),j=!1,vt(P)}}}function vl(a,e,t){const l=Rt();let{ladData:n=[]}=e,{region:i}=e,{sortBy:s}=e,{maxLADValue:u}=e,{maxHHLADValue:_}=e,{LADToName:g={}}=e,{viewMode:B="total"}=e,{selectedRegion:d="All"}=e;const b=[{label:"All",value:"All"},{label:"England",value:"England"},{label:"Wales",value:"Wales"},{label:"Scotland",value:"Scotland"},{label:"Northern Ireland",value:"NI"}];function C(m){l("filterChange",{region:m.target.value,sortBy:s})}function p(m,F){return ot({width:80,height:20,margin:0,x:{domain:[0,F],axis:null},marks:[mt([m],{x:H=>H,y:0,fill:"#ccc"})]}).outerHTML}function U(m,F){return ot({width:80,height:20,margin:0,x:{domain:[0,F],axis:null},marks:[mt([m],{x:H=>H,y:0,fill:"#ccc"})]}).outerHTML}function N(){i=Wt(this),t(0,i),t(7,b)}const L=()=>l("filterChange",{region:i,sortBy:"total"}),w=()=>l("filterChange",{region:i,sortBy:"per_capita"});return a.$$set=m=>{"ladData"in m&&t(1,n=m.ladData),"region"in m&&t(0,i=m.region),"sortBy"in m&&t(2,s=m.sortBy),"maxLADValue"in m&&t(3,u=m.maxLADValue),"maxHHLADValue"in m&&t(4,_=m.maxHHLADValue),"LADToName"in m&&t(5,g=m.LADToName),"viewMode"in m&&t(11,B=m.viewMode),"selectedRegion"in m&&t(12,d=m.selectedRegion)},[i,n,s,u,_,g,l,b,C,p,U,B,d,N,L,w]}class gl extends st{constructor(e){super(),rt(this,e,vl,ml,qe,{ladData:1,region:0,sortBy:2,maxLADValue:3,maxHHLADValue:4,LADToName:5,viewMode:11,selectedRegion:12})}}function Nt(a,e,t){const l=a.slice();return l[47]=e[t],l[49]=t,l}function Pt(a){let e,t,l,n,i,s,u;return{c(){e=c("div"),t=c("img"),i=S(),s=c("img"),this.h()},l(_){e=f(_,"DIV",{class:!0});var g=v(e);t=f(g,"IMG",{class:!0,src:!0,alt:!0}),i=A(g),s=f(g,"IMG",{class:!0,src:!0,alt:!0}),g.forEach(r),this.h()},h(){h(t,"class","slide-image"),Ie(t.src,l=a[47].image)||h(t,"src",l),h(t,"alt",n=a[47].label),h(s,"class","slide-map svelte-d5cw6v"),Ie(s.src,u=a[47].mapImage)||h(s,"src",u),h(s,"alt","Map overlay"),h(e,"class","hero-slide svelte-d5cw6v"),we(e,"active",a[49]===a[23]),we(e,"previous",a[49]===a[24])},m(_,g){K(_,e,g),o(e,t),o(e,i),o(e,s)},p(_,g){g[0]&1048576&&!Ie(t.src,l=_[47].image)&&h(t,"src",l),g[0]&1048576&&n!==(n=_[47].label)&&h(t,"alt",n),g[0]&1048576&&!Ie(s.src,u=_[47].mapImage)&&h(s,"src",u),g[0]&8388608&&we(e,"active",_[49]===_[23]),g[0]&16777216&&we(e,"previous",_[49]===_[24])},d(_){_&&r(e)}}}function Ft(a){let e,t,l;return{c(){e=c("div"),t=c("img"),this.h()},l(n){e=f(n,"DIV",{class:!0});var i=v(e);t=f(i,"IMG",{src:!0,alt:!0,class:!0}),i.forEach(r),this.h()},h(){Ie(t.src,l=a[19])||h(t,"src",l),h(t,"alt","Icon"),h(t,"class","svelte-d5cw6v"),h(e,"class","waffle-icon svelte-d5cw6v")},m(n,i){K(n,e,i),o(e,t)},p(n,i){i[0]&524288&&!Ie(t.src,l=n[19])&&h(t,"src",l)},d(n){n&&r(e)}}}function pl(a){let e,t="National costs";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-o12owz"&&(e.textContent=t),this.h()},h(){h(e,"class","waffle-caption svelte-d5cw6v")},m(l,n){K(l,e,n)},d(l){l&&r(e)}}}function bl(a){let e,t="National benefits";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-10ytukz"&&(e.textContent=t),this.h()},h(){h(e,"class","waffle-caption svelte-d5cw6v")},m(l,n){K(l,e,n)},d(l){l&&r(e)}}}function Cl(a){let e,t="Per capita costs";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-6pmcl0"&&(e.textContent=t),this.h()},h(){h(e,"class","waffle-caption svelte-d5cw6v")},m(l,n){K(l,e,n)},d(l){l&&r(e)}}}function wl(a){let e,t="Per capita benefits";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-g1rvwk"&&(e.textContent=t),this.h()},h(){h(e,"class","waffle-caption svelte-d5cw6v")},m(l,n){K(l,e,n)},d(l){l&&r(e)}}}function Mt(a){let e,t,l,n,i,s,u="%",_,g,B="Contribution";return{c(){e=c("div"),t=c("div"),l=c("span"),n=le(a[18]),i=S(),s=c("span"),s.textContent=u,_=S(),g=c("div"),g.textContent=B,this.h()},l(d){e=f(d,"DIV",{class:!0});var b=v(e);t=f(b,"DIV",{class:!0});var C=v(t);l=f(C,"SPAN",{class:!0});var p=v(l);n=ae(p,a[18]),p.forEach(r),i=A(C),s=f(C,"SPAN",{class:!0,"data-svelte-h":!0}),oe(s)!=="svelte-jxggz7"&&(s.textContent=u),C.forEach(r),_=A(b),g=f(b,"DIV",{class:!0,"data-svelte-h":!0}),oe(g)!=="svelte-1ahdmih"&&(g.textContent=B),b.forEach(r),this.h()},h(){h(l,"class","waffle-big svelte-d5cw6v"),h(s,"class","small svelte-d5cw6v"),h(t,"class","waffle-value svelte-d5cw6v"),h(g,"class","waffle-caption svelte-d5cw6v"),h(e,"class","waffle-stat svelte-d5cw6v")},m(d,b){K(d,e,b),o(e,t),o(t,l),o(l,n),o(t,i),o(t,s),o(e,_),o(e,g)},p(d,b){b[0]&262144&&_e(n,d[18])},d(d){d&&r(e)}}}function Ot(a){let e,t;return e=new gl({props:{ladData:a[7],region:a[8],sortBy:a[9],maxLADValue:a[10],maxHHLADValue:a[11],LADToName:a[25]}}),e.$on("filterChange",a[26]),{c(){lt(e.$$.fragment)},l(l){at(e.$$.fragment,l)},m(l,n){nt(e,l,n),t=!0},p(l,n){const i={};n[0]&128&&(i.ladData=l[7]),n[0]&256&&(i.region=l[8]),n[0]&512&&(i.sortBy=l[9]),n[0]&1024&&(i.maxLADValue=l[10]),n[0]&2048&&(i.maxHHLADValue=l[11]),e.$set(i)},i(l){t||(Be(e.$$.fragment,l),t=!0)},o(l){Ae(e.$$.fragment,l),t=!1},d(l){it(e,l)}}}function Ut(a){let e,t;return e=new hl({props:{aggregationPerCapitaPerBenefit:a[1],minCoBenefValue:a[3],maxCoBenefValue:a[2],minHHCoBenefValue:a[4],maxHHCoBenefValue:a[5],COBENEFS_SCALE:Qt}}),{c(){lt(e.$$.fragment)},l(l){at(e.$$.fragment,l)},m(l,n){nt(e,l,n),t=!0},p(l,n){const i={};n[0]&2&&(i.aggregationPerCapitaPerBenefit=l[1]),n[0]&8&&(i.minCoBenefValue=l[3]),n[0]&4&&(i.maxCoBenefValue=l[2]),n[0]&16&&(i.minHHCoBenefValue=l[4]),n[0]&32&&(i.maxHHCoBenefValue=l[5]),e.$set(i)},i(l){t||(Be(e.$$.fragment,l),t=!0)},o(l){Ae(e.$$.fragment,l),t=!1},d(l){it(e,l)}}}function Dl(a){let e,t,l,n,i,s,u,_=`<img src="${Re}/atlas-logos/logo-colored-waffle-png.png" alt="Logo" height="0px"/> <h1 class="hero-title svelte-d5cw6v">The Co-Benefits of Reaching <br/> Net Zero in the UK</h1> <p class="hero-description svelte-d5cw6v">Climate actions lower greenhouse gas (GHG) emissions but the gains for society reach further. The
                    CO-BENS project models 11 additional benefits based on actions recommended by the Climate Change
                    Committee (CCC) in its Seventh Carbon Budget (2025) across 45,000 communities and regions within the
                    UK.<br/></p> <p class="hero-description svelte-d5cw6v">Explore how, when and for whom benefits emerge to further understand connections between a wide
                    range of
                    social, economic and environmental priorities, and drive more effective decision-making.</p> <p class="hero-description svelte-d5cw6v">To understand more about the analysis or if you would like bespoke co-benefit modelling please get
                    in
                    touch by emailing <a href="mailto:cobens@ed.ac.uk">cobens@ed.ac.uk</a></p>`,g,B,d,b,C,p,U,N,L,w,m,F,M,H,I,z,Y="billion",X,R,V,j,P,Q,W,x,q,k,O,T,ne,Ve,he,se,Ne="Find My Place",He,pe,be,ke,De,D,me="Explore by Local Authority",ie,ve,ce,re,$="Explore by Co-Benefit",ge,fe;t=new Yt({});let Ce=Te(a[20]),E=[];for(let y=0;y<Ce.length;y+=1)E[y]=Pt(Nt(a,Ce,y));let G=a[19]&&Ft(a);function Se(y,Z){return y[16]>0?bl:pl}let Le=Se(a),Ee=Le(a);function We(y,Z){return y[17]>0?wl:Cl}let Pe=We(a),de=Pe(a),ue=a[22]!==null&&Mt(a);pe=new sl({props:{items:a[25]}}),pe.$on("search",a[33]);let ee=!a[6]&&Ot(a),te=!a[6]&&Ut(a);return{c(){e=c("div"),lt(t.$$.fragment),l=S(),n=c("section");for(let y=0;y<E.length;y+=1)E[y].c();i=S(),s=c("div"),u=c("div"),u.innerHTML=_,g=S(),B=c("div"),d=c("div"),b=c("div"),G&&G.c(),C=S(),p=c("div"),U=le(a[15]),N=S(),L=c("div"),w=c("div"),m=c("div"),F=c("span"),M=le("£"),H=le(a[16]),I=S(),z=c("span"),z.textContent=Y,X=S(),Ee.c(),R=S(),V=c("div"),j=c("div"),P=c("span"),Q=le("£"),W=le(a[17]),x=S(),de.c(),q=S(),ue&&ue.c(),k=S(),O=c("div"),T=S(),ne=c("div"),Ve=S(),he=c("section"),se=c("h1"),se.textContent=Ne,He=S(),lt(pe.$$.fragment),be=S(),ke=c("section"),De=c("div"),D=c("h2"),D.textContent=me,ie=S(),ee&&ee.c(),ve=S(),ce=c("div"),re=c("h2"),re.textContent=$,ge=S(),te&&te.c(),this.h()},l(y){e=f(y,"DIV",{});var Z=v(e);at(t.$$.fragment,Z),l=A(Z),n=f(Z,"SECTION",{class:!0});var J=v(n);for(let ut=0;ut<E.length;ut+=1)E[ut].l(J);i=A(J),s=f(J,"DIV",{class:!0});var Fe=v(s);u=f(Fe,"DIV",{class:!0,"data-svelte-h":!0}),oe(u)!=="svelte-8289tn"&&(u.innerHTML=_),g=A(Fe),B=f(Fe,"DIV",{class:!0});var Oe=v(B);d=f(Oe,"DIV",{class:!0});var ze=v(d);b=f(ze,"DIV",{class:!0});var Xe=v(b);G&&G.l(Xe),C=A(Xe),p=f(Xe,"DIV",{class:!0});var gt=v(p);U=ae(gt,a[15]),gt.forEach(r),Xe.forEach(r),N=A(ze),L=f(ze,"DIV",{class:!0});var Ue=v(L);w=f(Ue,"DIV",{class:!0});var Ye=v(w);m=f(Ye,"DIV",{class:!0});var Ke=v(m);F=f(Ke,"SPAN",{class:!0});var ct=v(F);M=ae(ct,"£"),H=ae(ct,a[16]),ct.forEach(r),I=A(Ke),z=f(Ke,"SPAN",{class:!0,"data-svelte-h":!0}),oe(z)!=="svelte-tlhydp"&&(z.textContent=Y),Ke.forEach(r),X=A(Ye),Ee.l(Ye),Ye.forEach(r),R=A(Ue),V=f(Ue,"DIV",{class:!0});var Ze=v(V);j=f(Ze,"DIV",{class:!0});var pt=v(j);P=f(pt,"SPAN",{class:!0});var ft=v(P);Q=ae(ft,"£"),W=ae(ft,a[17]),ft.forEach(r),pt.forEach(r),x=A(Ze),de.l(Ze),Ze.forEach(r),q=A(Ue),ue&&ue.l(Ue),Ue.forEach(r),ze.forEach(r),k=A(Oe),O=f(Oe,"DIV",{class:!0}),v(O).forEach(r),T=A(Oe),ne=f(Oe,"DIV",{}),v(ne).forEach(r),Oe.forEach(r),Fe.forEach(r),J.forEach(r),Ve=A(Z),he=f(Z,"SECTION",{class:!0});var Qe=v(he);se=f(Qe,"H1",{class:!0,"data-svelte-h":!0}),oe(se)!=="svelte-byubde"&&(se.textContent=Ne),He=A(Qe),at(pe.$$.fragment,Qe),Qe.forEach(r),be=A(Z),ke=f(Z,"SECTION",{class:!0});var Je=v(ke);De=f(Je,"DIV",{class:!0});var xe=v(De);D=f(xe,"H2",{class:!0,"data-svelte-h":!0}),oe(D)!=="svelte-pgup4c"&&(D.textContent=me),ie=A(xe),ee&&ee.l(xe),xe.forEach(r),ve=A(Je),ce=f(Je,"DIV",{class:!0});var $e=v(ce);re=f($e,"H2",{class:!0,"data-svelte-h":!0}),oe(re)!=="svelte-9nk5va"&&(re.textContent=$),ge=A($e),te&&te.l($e),$e.forEach(r),Je.forEach(r),Z.forEach(r),this.h()},h(){h(u,"class","hero-text svelte-d5cw6v"),h(p,"class","waffle-title svelte-d5cw6v"),h(b,"class","waffle-header svelte-d5cw6v"),h(F,"class","waffle-big svelte-d5cw6v"),h(z,"class","small svelte-d5cw6v"),h(m,"class","waffle-value svelte-d5cw6v"),h(w,"class","waffle-stat svelte-d5cw6v"),h(P,"class","waffle-big svelte-d5cw6v"),h(j,"class","waffle-value svelte-d5cw6v"),h(V,"class","waffle-stat svelte-d5cw6v"),h(L,"class","waffle-stats svelte-d5cw6v"),h(d,"class","waffle-label svelte-d5cw6v"),h(O,"class","waffle-bg svelte-d5cw6v"),h(B,"class","waffle-overlay svelte-d5cw6v"),h(s,"class","hero-content svelte-d5cw6v"),h(n,"class","hero-container svelte-d5cw6v"),h(se,"class","svelte-d5cw6v"),h(he,"class","search-section svelte-d5cw6v"),h(D,"class","svelte-d5cw6v"),h(De,"class","side-box svelte-d5cw6v"),h(re,"class","svelte-d5cw6v"),h(ce,"class","side-box svelte-d5cw6v"),h(ke,"class","side-by-side-section svelte-d5cw6v")},m(y,Z){K(y,e,Z),nt(t,e,null),o(e,l),o(e,n);for(let J=0;J<E.length;J+=1)E[J]&&E[J].m(n,null);o(n,i),o(n,s),o(s,u),o(s,g),o(s,B),o(B,d),o(d,b),G&&G.m(b,null),o(b,C),o(b,p),o(p,U),o(d,N),o(d,L),o(L,w),o(w,m),o(m,F),o(F,M),o(F,H),o(m,I),o(m,z),o(w,X),Ee.m(w,null),o(L,R),o(L,V),o(V,j),o(j,P),o(P,Q),o(P,W),o(V,x),de.m(V,null),o(L,q),ue&&ue.m(L,null),a[29](d),o(B,k),o(B,O),a[30](O),o(B,T),o(B,ne),a[31](ne),a[32](n),o(e,Ve),o(e,he),o(he,se),o(he,He),nt(pe,he,null),o(e,be),o(e,ke),o(ke,De),o(De,D),o(De,ie),ee&&ee.m(De,null),o(ke,ve),o(ke,ce),o(ce,re),o(ce,ge),te&&te.m(ce,null),a[34](e),fe=!0},p(y,Z){if(Z[0]&26214400){Ce=Te(y[20]);let J;for(J=0;J<Ce.length;J+=1){const Fe=Nt(y,Ce,J);E[J]?E[J].p(Fe,Z):(E[J]=Pt(Fe),E[J].c(),E[J].m(n,i))}for(;J<E.length;J+=1)E[J].d(1);E.length=Ce.length}y[19]?G?G.p(y,Z):(G=Ft(y),G.c(),G.m(b,C)):G&&(G.d(1),G=null),(!fe||Z[0]&32768)&&_e(U,y[15]),(!fe||Z[0]&65536)&&_e(H,y[16]),Le!==(Le=Se(y))&&(Ee.d(1),Ee=Le(y),Ee&&(Ee.c(),Ee.m(w,null))),(!fe||Z[0]&131072)&&_e(W,y[17]),Pe!==(Pe=We(y))&&(de.d(1),de=Pe(y),de&&(de.c(),de.m(V,null))),y[22]!==null?ue?ue.p(y,Z):(ue=Mt(y),ue.c(),ue.m(L,null)):ue&&(ue.d(1),ue=null),y[6]?ee&&(Dt(),Ae(ee,1,1,()=>{ee=null}),wt()):ee?(ee.p(y,Z),Z[0]&64&&Be(ee,1)):(ee=Ot(y),ee.c(),Be(ee,1),ee.m(De,null)),y[6]?te&&(Dt(),Ae(te,1,1,()=>{te=null}),wt()):te?(te.p(y,Z),Z[0]&64&&Be(te,1)):(te=Ut(y),te.c(),Be(te,1),te.m(ce,null))},i(y){fe||(Be(t.$$.fragment,y),Be(pe.$$.fragment,y),Be(ee),Be(te),fe=!0)},o(y){Ae(t.$$.fragment,y),Ae(pe.$$.fragment,y),Ae(ee),Ae(te),fe=!1},d(y){y&&r(e),it(t),Ge(E,y),G&&G.d(),Ee.d(),de.d(),ue&&ue.d(),a[29](null),a[30](null),a[31](null),a[32](null),it(pe),ee&&ee.d(),te&&te.d(),a[34](null)}}}function El(a,e,t){let{data:l}=e,n=l.LADToName,i,s,u,_,g,B,d,b,C,p=!0;async function U(){s=await et(tl()),t(1,u=await et(ll())),_=await et(al()),s=[...s].sort((D,me)=>me.total-D.total),t(1,u=[...u].sort((D,me)=>me.total_value-D.total_value)),console.log("aggregationPerCapitaPerBenefit",u),g=_[0].total_value_per_capita,t(2,B=Math.max(...u.map(D=>D.total_value))),t(3,d=Math.min(...u.map(D=>D.total_value))),t(4,b=Math.min(...u.map(D=>D.value_per_capita))),t(5,C=Math.max(...u.map(D=>D.value_per_capita))),t(6,p=!1)}let N=[],L="All",w="total",m=0,F=0;async function M(){const D=nl({region:L,sortBy:w}),me=await et(D);t(7,N=me),t(10,m=Math.max(...me.map(ie=>ie.total_value))),t(11,F=Math.max(...me.map(ie=>ie.value_per_capita)))}function H(D){t(8,L=D.detail.region),t(9,w=D.detail.sortBy),M()}let I,z=[],Y=null,X,R,V,j,P="",Q,W=null,x=[],q,k=null,O=0,T=0,ne;function Ve(D){const me=I.filter($=>$.type!=="empty").map($=>$.type),ie=Array.from(new Set(me)),ve=s.reduce(($,ge)=>$+ge.total,0),ce=[{type:null,label:"Total Co-Benefits",icon:null,totalValue:ve.toFixed(2),perCapitaValue:g.toFixed(2),percentValue:"100%"},...ie.map($=>{const fe=_t.find(de=>de.id===$)?.label??$;let Ce=dt($);const E=s.find(de=>de.co_benefit_type===$),G=u.find(de=>de.co_benefit_type===$),Se=E?.total??0,Le=G?.value_per_capita??0,Ee=Se.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),We=Le.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Pe=ve>0?(Se/ve*100).toFixed(2):0;return console.log("percentage",$,Se,ve,Pe),{type:$,label:fe,icon:Ce,totalValue:Ee,perCapitaValue:We,percentValue:Pe}})];setInterval(()=>{t(24,T=O),t(23,O=(O+1)%ce.length);const{type:$,label:ge,icon:fe,totalValue:Ce,perCapitaValue:E,percentValue:G}=ce[O];t(22,k=$),t(15,V=ge),t(16,j=Ce),t(17,P=E),t(18,Q=G),t(19,W=fe),he(D,$)},5e3);const re=ce[0];t(22,k=re.type),t(15,V=re.label),t(16,j=re.totalValue),t(17,P=re.perCapitaValue),t(18,Q=re.percentValue),he(D,re.type),console.log("update display",x)}function he(D,me){if(!Y)return;t(12,Y.innerHTML="",Y);const ie=20,ve=15,ce=Math.floor(D/ie),re=ve*ce,$=s.reduce((E,G)=>E+G.total,0),ge=[];for(const E of s){const G=Math.round(Math.abs(E.total)/$*re),Se=E.total<0;for(let Le=0;Le<G;Le++)ge.push({type:E.co_benefit_type,negative:Se})}for(;ge.length<re;)ge.push({type:"empty"});ge.sort((E,G)=>E.type==="empty"?1:G.type==="empty"?-1:E.negative&&!G.negative?1:!E.negative&&G.negative?-1:0),I=ge.map((E,G)=>({x:G%ve,y:Math.floor(G/ve),...E})),z=Array.from(new Set(I.map(E=>E.type).filter(E=>E!=="empty"))),t(20,x=$t(z));const fe=me??null,Ce=ot({width:ie*ve,height:ie*ce,margin:0,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:_t.map(E=>E.id),range:el,unknown:"#eee",legend:!1},marks:[Et(I.filter(E=>!E.negative),{x:E=>E.x*ie,y:E=>E.y*ie,fill:"type",fillOpacity:E=>fe&&E.type!==fe?.15:1}),Et(I.filter(E=>E.negative),{x:E=>E.x*ie,y:E=>E.y*ie,stroke:"type",strokeOpacity:E=>fe&&E.type!==fe?.15:1,strokeWidth:1,fill:"none"})]});X&&(t(13,X.style.width=`${ie*ve}px`,X),t(13,X.style.height=`${D}px`,X)),t(12,Y.innerHTML="",Y),Y.append(Ce)}function se(D){Kt(`${Re}/location?location=${D}`)}zt(()=>{Jt(i),U().then(()=>{M();const D=q.getBoundingClientRect().height;he(D),Ve(D),xt(i)})}),Xt(()=>{clearInterval(ne)});function Ne(D){je[D?"unshift":"push"](()=>{R=D,t(14,R)})}function He(D){je[D?"unshift":"push"](()=>{X=D,t(13,X)})}function pe(D){je[D?"unshift":"push"](()=>{Y=D,t(12,Y)})}function be(D){je[D?"unshift":"push"](()=>{q=D,t(21,q)})}const ke=D=>se(D.detail);function De(D){je[D?"unshift":"push"](()=>{i=D,t(0,i)})}return a.$$set=D=>{"data"in D&&t(28,l=D.data)},a.$$.update=()=>{a.$$.dirty[0]&268435456},[i,u,B,d,b,C,p,N,L,w,m,F,Y,X,R,V,j,P,Q,W,x,q,k,O,T,n,H,se,l,Ne,He,pe,be,ke,De]}class Nl extends st{constructor(e){super(),rt(this,e,El,Dl,qe,{data:28},null,[-1,-1])}}export{Nl as component};
