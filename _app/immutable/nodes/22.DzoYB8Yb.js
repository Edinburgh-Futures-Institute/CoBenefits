import{s as xl,a as E,e as d,t as L,g as D,c as h,b as _,p as te,d as A,f as n,q as f,v as De,i as S,h as i,w as Hl,j as he,x as pl,y as Ul,z as zl,n as Oe,H as Wl,A as Gl,r as Yl,B as Ve}from"../chunks/scheduler.Uo5vrMzy.js";import{S as jl,i as ql,c as vl,b as _l,m as ml,t as gl,a as bl,d as yl}from"../chunks/index.CfagcI6h.js";import{N as Jl,e as wt}from"../chunks/NavigationBar.DmUW6qqq.js";import"../chunks/transform.BNP73y-7.js";import{aL as Kl,aE as Jt,aF as Xl,t as kl,aJ as Ql,T as El,aM as Dl,aN as Zl,aO as $l,S as Ll,G as Je,P as ea,K as Ke,J as dt,R as ta,H as Vt,Q as It}from"../chunks/index.BijtlihT.js";import{f as Kt}from"../chunks/module.BDHLYmQ2.js";import{b as la}from"../chunks/paths.CccibVs_.js";import{M as aa}from"../chunks/mapUK.B0lpgo9m.js";import{l as sa,m as ia,n as ra,o as na,p as oa,q as ca,i as Al,f as pt,g as ua,d as Xe,s as Tt,t as Xt,e as fa}from"../chunks/globals.LRqkLXH3.js";import{g as ht,o as da,n as ha,x as pa,y as va,f as _a}from"../chunks/duckdb.C2uT7ASB.js";import{p as Mt}from"../chunks/per_capita.COcMrZFY.js";import{F as ma}from"../chunks/Footer.CZ0Rr6NC.js";import{n as ga}from"../chunks/nice.BFvfF_Md.js";import{t as ba,b as ya}from"../chunks/bin.Dm3GvWfY.js";import{b as ka}from"../chunks/bar.RgVc80ea.js";import{d as Ct}from"../chunks/dot.o3Wq83Nt.js";import{b as Ea}from"../chunks/box.DdPWxBx2.js";var Da=Array.prototype,La=Da.slice;function Qt(l){return()=>l}function Sl(){var l=Kl,t=Jt,e=ba;function a(r){Array.isArray(r)||(r=Array.from(r));var s,u=r.length,m,y,k=new Array(u);for(s=0;s<u;++s)k[s]=l(r[s],s,r);var c=t(k),v=c[0],b=c[1],H=e(k,v,b);if(!Array.isArray(H)){const g=b,T=+H;if(t===Jt&&([v,b]=ga(v,b,T)),H=Xl(v,b,T),H[0]<=v&&(y=kl(v,b,T)),H[H.length-1]>=b)if(g>=b&&t===Jt){const F=kl(v,b,T);isFinite(F)&&(F>0?b=(Math.floor(b/F)+1)*F:F<0&&(b=(Math.ceil(b*-F)+1)/-F))}else H.pop()}for(var I=H.length,P=0,x=I;H[P]<=v;)++P;for(;H[x-1]>b;)--x;(P||x<I)&&(H=H.slice(P,x),I=x-P);var N=new Array(I+1),C;for(s=0;s<=I;++s)C=N[s]=[],C.x0=s>0?H[s-1]:v,C.x1=s<I?H[s]:b;if(isFinite(y)){if(y>0)for(s=0;s<u;++s)(m=k[s])!=null&&v<=m&&m<=b&&N[Math.min(I,Math.floor((m-v)/y))].push(r[s]);else if(y<0){for(s=0;s<u;++s)if((m=k[s])!=null&&v<=m&&m<=b){const g=Math.floor((v-m)*y);N[Math.min(I,g+(H[g]<=m))].push(r[s])}}}else for(s=0;s<u;++s)(m=k[s])!=null&&v<=m&&m<=b&&N[Ql(H,m,0,I)].push(r[s]);return N}return a.value=function(r){return arguments.length?(l=typeof r=="function"?r:Qt(r),a):l},a.domain=function(r){return arguments.length?(t=typeof r=="function"?r:Qt([r[0],r[1]]),a):t},a.thresholds=function(r){return arguments.length?(e=typeof r=="function"?r:Qt(Array.isArray(r)?La.call(r):r),a):e},a}const Aa=""+new URL("../assets/negative.BhphYhmj.png",import.meta.url).href;function wl(l,t,e){const a=l.slice();return a[70]=t[e],a[71]=t,a[72]=e,a}function Vl(l,t,e){const a=l.slice();return a[70]=t[e],a}function Sa(l){let t;return{c(){t=d("div"),this.h()},l(e){t=h(e,"DIV",{class:!0}),_(t).forEach(n),this.h()},h(){f(t,"class","plot svelte-10c07ly")},m(e,a){S(e,t,a),l[42](t)},p:Oe,d(e){e&&n(t),l[42](null)}}}function wa(l){let t;return{c(){t=d("div"),this.h()},l(e){t=h(e,"DIV",{class:!0}),_(t).forEach(n),this.h()},h(){f(t,"class","plot svelte-10c07ly")},m(e,a){S(e,t,a),l[41](t)},p:Oe,d(e){e&&n(t),l[41](null)}}}function Va(l){let t,e,a=Ie(l[14],l[26])+"",r,s,u,m,y,k;return{c(){t=L("Max value: "),e=d("strong"),r=L(a),s=L("("),u=L(l[3]),m=E(),y=L(l[20]),k=L(")")},l(c){t=A(c,"Max value: "),e=h(c,"STRONG",{});var v=_(e);r=A(v,a),v.forEach(n),s=A(c,"("),u=A(c,l[3]),m=D(c),y=A(c,l[20]),k=A(c,")")},m(c,v){S(c,t,v),S(c,e,v),i(e,r),S(c,s,v),S(c,u,v),S(c,m,v),S(c,y,v),S(c,k,v)},p(c,v){v[0]&16384&&a!==(a=Ie(c[14],c[26])+"")&&he(r,a),v[0]&8&&he(u,c[3]),v[0]&1048576&&he(y,c[20])},d(c){c&&(n(t),n(e),n(s),n(u),n(m),n(y),n(k))}}}function Ia(l){let t;return{c(){t=L("-")},l(e){t=A(e,"-")},m(e,a){S(e,t,a)},p:Oe,d(e){e&&n(t)}}}function Ta(l){let t,e,a=Ie(l[12],l[26])+"",r;return{c(){t=L("Average value: "),e=d("strong"),r=L(a),this.h()},l(s){t=A(s,"Average value: "),e=h(s,"STRONG",{style:!0});var u=_(e);r=A(u,a),u.forEach(n),this.h()},h(){De(e,"color","#BD210E")},m(s,u){S(s,t,u),S(s,e,u),i(e,r)},p(s,u){u[0]&4096&&a!==(a=Ie(s[12],s[26])+"")&&he(r,a)},d(s){s&&(n(t),n(e))}}}function Ca(l){let t,e,a=Ie(l[13],l[26])+"",r;return{c(){t=L("Most common category: "),e=d("strong"),r=L(a),this.h()},l(s){t=A(s,"Most common category: "),e=h(s,"STRONG",{style:!0});var u=_(e);r=A(u,a),u.forEach(n),this.h()},h(){De(e,"color","#BD210E")},m(s,u){S(s,t,u),S(s,e,u),i(e,r)},p(s,u){u[0]&8192&&a!==(a=Ie(s[13],s[26])+"")&&he(r,a)},d(s){s&&(n(t),n(e))}}}function Ma(l){let t,e,a=Ie(l[15],l[26])+"",r,s,u,m,y,k;return{c(){t=L("Min value: "),e=d("strong"),r=L(a),s=L("("),u=L(l[4]),m=E(),y=L(l[21]),k=L(")")},l(c){t=A(c,"Min value: "),e=h(c,"STRONG",{});var v=_(e);r=A(v,a),v.forEach(n),s=A(c,"("),u=A(c,l[4]),m=D(c),y=A(c,l[21]),k=A(c,")")},m(c,v){S(c,t,v),S(c,e,v),i(e,r),S(c,s,v),S(c,u,v),S(c,m,v),S(c,y,v),S(c,k,v)},p(c,v){v[0]&32768&&a!==(a=Ie(c[15],c[26])+"")&&he(r,a),v[0]&16&&he(u,c[4]),v[0]&2097152&&he(y,c[21])},d(c){c&&(n(t),n(e),n(s),n(u),n(m),n(y),n(k))}}}function Fa(l){let t;return{c(){t=L("-")},l(e){t=A(e,"-")},m(e,a){S(e,t,a)},p:Oe,d(e){e&&n(t)}}}function Il(l){let t,e,a,r,s;return{c(){t=d("div"),e=d("div"),a=d("span"),r=L(l[23]),s=L(" >>"),this.h()},l(u){t=h(u,"DIV",{class:!0});var m=_(t);e=h(m,"DIV",{class:!0});var y=_(e);a=h(y,"SPAN",{class:!0});var k=_(a);r=A(k,l[23]),s=A(k," >>"),k.forEach(n),y.forEach(n),m.forEach(n),this.h()},h(){f(a,"class","mini-header-text"),f(e,"class","mini-header-content"),f(t,"class","mini-header")},m(u,m){S(u,t,m),i(t,e),i(e,a),i(a,r),i(a,s)},p:Oe,d(u){u&&n(t)}}}function Ha(l){let t;return{c(){t=L("LSOA.")},l(e){t=A(e,"LSOA.")},m(e,a){S(e,t,a)},d(e){e&&n(t)}}}function Na(l){let t;return{c(){t=L("LAD.")},l(e){t=A(e,"LAD.")},m(e,a){S(e,t,a)},d(e){e&&n(t)}}}function Pa(l){let t;return{c(){t=d("div"),this.h()},l(e){t=h(e,"DIV",{class:!0}),_(t).forEach(n),this.h()},h(){f(t,"class","plot svelte-10c07ly")},m(e,a){S(e,t,a),l[44](t)},p:Oe,d(e){e&&n(t),l[44](null)}}}function Ba(l){let t;return{c(){t=d("div"),this.h()},l(e){t=h(e,"DIV",{class:!0}),_(t).forEach(n),this.h()},h(){f(t,"class","plot svelte-10c07ly")},m(e,a){S(e,t,a),l[43](t)},p:Oe,d(e){e&&n(t),l[43](null)}}}function Tl(l){let t,e,a=l[16].legend(l[27]).outerHTML+"";return{c(){t=d("div"),e=new Wl(!1),this.h()},l(r){t=h(r,"DIV",{id:!0});var s=_(t);e=Gl(s,!1),s.forEach(n),this.h()},h(){e.a=null,f(t,"id","legend")},m(r,s){S(r,t,s),e.m(a,t)},p(r,s){s[0]&65536&&a!==(a=r[16].legend(r[27]).outerHTML+"")&&e.p(a)},d(r){r&&n(t)}}}function Cl(l){let t,e,a,r,s=l[70].def+"",u,m,y,k,c,v,b,H="here",I,P,x=l[70].id.toLowerCase()+"",N,C,g;return{c(){t=d("div"),e=d("div"),a=d("div"),r=E(),u=L(s),m=E(),y=d("br"),k=E(),c=d("div"),v=L("Click "),b=d("a"),b.textContent=H,I=L(` for the \r
                                `),P=d("span"),N=L(x),C=E(),g=L("report page."),this.h()},l(T){t=h(T,"DIV",{class:!0});var F=_(t);e=h(F,"DIV",{class:!0});var R=_(e);a=h(R,"DIV",{style:!0}),_(a).forEach(n),r=D(R),u=A(R,s),m=D(R),y=h(R,"BR",{}),k=D(R),c=h(R,"DIV",{class:!0});var j=_(c);v=A(j,"Click "),b=h(j,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0,"data-svelte-h":!0}),te(b)!=="svelte-gjrxnt"&&(b.textContent=H),I=A(j,` for the \r
                                `),P=h(j,"SPAN",{style:!0});var q=_(P);N=A(q,x),C=D(q),q.forEach(n),g=A(j,"report page."),j.forEach(n),R.forEach(n),F.forEach(n),this.h()},h(){De(a,"height","0.8em"),f(b,"class","link"),f(b,"href",la+"/cobenefit?cobenefit="+l[70].id),f(b,"target","_blank"),f(b,"rel","noopener noreferrer"),De(b,"color",pt(l[70].id)),De(P,"color",pt(l[70].id)),f(c,"class","link-box svelte-10c07ly"),f(e,"class","legend-description svelte-10c07ly"),f(t,"class","legend-description-box svelte-10c07ly")},m(T,F){S(T,t,F),i(t,e),i(e,a),i(e,r),i(e,u),i(e,m),i(e,y),i(e,k),i(e,c),i(c,v),i(c,b),i(c,I),i(c,P),i(P,N),i(P,C),i(c,g)},d(T){T&&n(t)}}}function Ml(l){let t,e,a,r,s,u=l[70].label+"",m,y,k,c,v=l[19].has(l[70].id)?"▲":"▼",b,H,I=l[19].has(l[70].id),P,x,N;function C(){return l[46](l[70])}let g=I&&Cl(l);return{c(){t=d("div"),e=d("div"),a=d("span"),r=E(),s=d("span"),m=L(u),k=E(),c=d("span"),b=L(v),H=E(),g&&g.c(),P=E(),this.h()},l(T){t=h(T,"DIV",{class:!0});var F=_(t);e=h(F,"DIV",{class:!0,style:!0});var R=_(e);a=h(R,"SPAN",{class:!0,style:!0}),_(a).forEach(n),r=D(R),s=h(R,"SPAN",{class:!0});var j=_(s);m=A(j,u),j.forEach(n),k=D(R),c=h(R,"SPAN",{class:!0});var q=_(c);b=A(q,v),q.forEach(n),R.forEach(n),H=D(F),g&&g.l(F),P=D(F),F.forEach(n),this.h()},h(){f(a,"class","legend-color svelte-10c07ly"),De(a,"background-color",pt(l[70].id)),f(s,"class",y="legend-text "+(l[19].has(l[70].id)?"expanded":"")+" svelte-10c07ly"),f(c,"class","toggle-icon svelte-10c07ly"),f(e,"class","legend-header svelte-10c07ly"),De(e,"cursor","pointer"),f(t,"class","legend-item svelte-10c07ly")},m(T,F){S(T,t,F),i(t,e),i(e,a),i(e,r),i(e,s),i(s,m),i(e,k),i(e,c),i(c,b),i(t,H),g&&g.m(t,null),i(t,P),x||(N=Hl(e,"click",C),x=!0)},p(T,F){l=T,F[0]&524288&&y!==(y="legend-text "+(l[19].has(l[70].id)?"expanded":"")+" svelte-10c07ly")&&f(s,"class",y),F[0]&524288&&v!==(v=l[19].has(l[70].id)?"▲":"▼")&&he(b,v),F[0]&524288&&(I=l[19].has(l[70].id)),I?g||(g=Cl(l),g.c(),g.m(t,P)):g&&(g.d(1),g=null)},d(T){T&&n(t),g&&g.d(),x=!1,N()}}}function Oa(l){let t,e=`<img class="sm-icon svelte-10c07ly" src="${Mt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each area.</span>`;return{c(){t=d("div"),t.innerHTML=e,this.h()},l(a){t=h(a,"DIV",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-1lqh0bd"&&(t.innerHTML=e),this.h()},h(){f(t,"class","tooltip-wrapper")},m(a,r){S(a,t,r)},d(a){a&&n(t)}}}function Ra(l){let t,e=`<img class="sm-icon svelte-10c07ly" src="${Mt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each area.</span>`,a,r,s=`<img class="sm-icon svelte-10c07ly" src="${Aa}" alt="icon"/> <span class="tooltip-text-neg svelte-10c07ly">This chart includes negative values.</span>`;return{c(){t=d("div"),t.innerHTML=e,a=E(),r=d("div"),r.innerHTML=s,this.h()},l(u){t=h(u,"DIV",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-1tqucbd"&&(t.innerHTML=e),a=D(u),r=h(u,"DIV",{class:!0,"data-svelte-h":!0}),te(r)!=="svelte-10ijo5a"&&(r.innerHTML=s),this.h()},h(){f(t,"class","tooltip-wrapper"),f(r,"class","tooltip-wrapper")},m(u,m){S(u,t,m),S(u,a,m),S(u,r,m)},d(u){u&&(n(t),n(a),n(r))}}}function xa(l){let t,e=l[70];const a=()=>l[48](t,e),r=()=>l[48](null,e);return{c(){t=d("div"),this.h()},l(s){t=h(s,"DIV",{class:!0}),_(t).forEach(n),this.h()},h(){f(t,"class","plot svelte-10c07ly")},m(s,u){S(s,t,u),a()},p(s,u){l=s,e!==l[70]&&(r(),e=l[70],a())},d(s){s&&n(t),r()}}}function Ua(l){let t,e=l[70];const a=()=>l[47](t,e),r=()=>l[47](null,e);return{c(){t=d("div"),this.h()},l(s){t=h(s,"DIV",{class:!0}),_(t).forEach(n),this.h()},h(){f(t,"class","plot svelte-10c07ly")},m(s,u){S(s,t,u),a()},p(s,u){l=s,e!==l[70]&&(r(),e=l[70],a())},d(s){s&&n(t),r()}}}function Fl(l){let t,e,a,r,s,u,m=l[70].label+"",y,k,c,v;function b(C,g){return C[70].id=="Hassle costs"||C[70].id=="Road repairs"||C[70].id=="Road safety"||C[70].id=="Congestion"||C[70].id=="Excess heat"?Ra:Oa}let I=b(l)(l);function P(C,g){return Xe.includes(C[22])?Ua:xa}let N=P(l)(l);return{c(){t=d("div"),e=d("div"),a=d("img"),s=E(),u=d("h3"),y=L(m),k=E(),I.c(),c=E(),N.c(),v=E(),this.h()},l(C){t=h(C,"DIV",{class:!0});var g=_(t);e=h(g,"DIV",{class:!0});var T=_(e);a=h(T,"IMG",{class:!0,src:!0,alt:!0}),s=D(T),u=h(T,"H3",{class:!0});var F=_(u);y=A(F,m),F.forEach(n),k=D(T),I.l(T),T.forEach(n),c=D(g),N.l(g),v=D(g),g.forEach(n),this.h()},h(){f(a,"class","sm-cb-icon svelte-10c07ly"),Yl(a.src,r=ua(l[70].id))||f(a,"src",r),f(a,"alt",l[70].label+" icon"),f(u,"class","chart-component-title"),f(e,"class","component-chart-title-container svelte-10c07ly"),f(t,"class","plot-container svelte-10c07ly")},m(C,g){S(C,t,g),i(t,e),i(e,a),i(e,s),i(e,u),i(u,y),i(e,k),I.m(e,null),i(t,c),N.m(t,null),i(t,v)},p(C,g){N.p(C,g)},d(C){C&&n(t),I.d(),N.d()}}}function za(l){let t,e,a,r,s,u,m,y="Socio-Economic Factor Report",k,c,v,b,H,I,P,x,N,C,g,T,F,R,j,q,Te,Z,pe=l[2]?"Switch to LAD level data":"Switch to LSOA level data",se,ve,_e,ne,B,X,vt='<p class="section-subtitle svelte-10c07ly">Overview</p>',Qe,ie,Q,z,Ce,Le,Re,re,Ze,xe,me,Me=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Mt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each area.</span></div>`,$e,et,W,ge,tt,Ue,lt,oe,ce="Scroll for zooming in and out.",ze,be,_t=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Mt}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each area.</span></div>`,at,We,ye,st,ue,ke,mt='<p class="section-subtitle svelte-10c07ly">By Co-benefits</p>',o,w,O,$,U,Zt=l[23].toLowerCase()+"",Ft,Ht,Nt,Fe,$t="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",Pt,Bt,Ot,ee,Ge,el="Co-benefits:",Rt,xt,it,Ut,zt,Ae,tl='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',Wt,He,Se,gt,Ne,rt,Gt,ll;t=new Jl({});function Nl(p,M){return Xe.includes(p[22])?wa:Sa}let nt=Nl(l)(l);function Pl(p,M){return Xe.includes(p[22])?Ia:Va}let ot=Pl(l)(l);function Bl(p,M){return Xe.includes(p[22])?Ca:Ta}let ct=Bl(l)(l);function Ol(p,M){return Xe.includes(p[22])?Fa:Ma}let ut=Ol(l)(l),J=l[18]&&Il(l);function al(p,M){return p[5]==p[1]?Na:Ha}let bt=al(l),Ee=bt(l);function Rl(p,M){return Xe.includes(p[22])?Ba:Pa}let ft=Rl(l)(l),K=l[16]&&Tl(l),Ye=wt(Tt),G=[];for(let p=0;p<Ye.length;p+=1)G[p]=Ml(Vl(l,Ye,p));let je=wt(Tt),Y=[];for(let p=0;p<je.length;p+=1)Y[p]=Fl(wl(l,je,p));return Ne=new ma({}),{c(){vl(t.$$.fragment),e=E(),a=d("div"),r=d("div"),s=d("div"),u=d("div"),m=d("p"),m.textContent=y,k=E(),c=d("div"),v=d("h1"),b=L(l[25]),H=E(),I=d("p"),P=L(l[24]),x=E(),N=d("div"),nt.c(),C=E(),g=d("div"),T=d("p"),ot.c(),F=E(),R=d("p"),ct.c(),j=E(),q=d("p"),ut.c(),Te=E(),Z=d("button"),se=L(pe),ve=E(),J&&J.c(),_e=E(),ne=d("div"),B=d("div"),X=d("div"),X.innerHTML=vt,Qe=E(),ie=d("div"),Q=d("div"),z=d("h3"),Ce=L(l[23]),Le=L(" against per capita co-benefit values (£, thousand)"),Re=E(),re=d("p"),Ze=L(`Each point in the chart below represents a UK \r
                        `),Ee.c(),xe=E(),me=d("div"),me.innerHTML=Me,$e=E(),ft.c(),et=E(),W=d("div"),ge=d("h3"),tt=L(l[23]),Ue=L(" at LSOA level"),lt=E(),oe=d("p"),oe.textContent=ce,ze=E(),be=d("div"),be.innerHTML=_t,at=E(),K&&K.c(),We=E(),ye=d("div"),st=E(),ue=d("div"),ke=d("div"),ke.innerHTML=mt,o=E(),w=d("div"),O=d("div"),$=d("h3"),U=L(`Plotting \r
                    \r
                    `),Ft=L(Zt),Ht=L(`\r
                \r
                against the gain/loss (£, thousand) per capita for each co-benefit`),Nt=E(),Fe=d("p"),Fe.textContent=$t,Pt=E(),Bt=d("br"),Ot=E(),ee=d("div"),Ge=d("strong"),Ge.textContent=el,Rt=d("br"),xt=L(`Expand for detailed explanation\r
                    `),it=d("div"),Ut=E();for(let p=0;p<G.length;p+=1)G[p].c();zt=E(),Ae=d("div"),Ae.innerHTML=tl,Wt=E(),He=d("div"),Se=d("div");for(let p=0;p<Y.length;p+=1)Y[p].c();gt=E(),vl(Ne.$$.fragment),this.h()},l(p){_l(t.$$.fragment,p),e=D(p),a=h(p,"DIV",{class:!0});var M=_(a);r=h(M,"DIV",{class:!0});var V=_(r);s=h(V,"DIV",{class:!0});var le=_(s);u=h(le,"DIV",{class:!0});var yt=_(u);m=h(yt,"P",{class:!0,"data-svelte-h":!0}),te(m)!=="svelte-16ymxs7"&&(m.textContent=y),k=D(yt),c=h(yt,"DIV",{class:!0});var kt=_(c);v=h(kt,"H1",{class:!0});var sl=_(v);b=A(sl,l[25]),sl.forEach(n),H=D(kt),I=h(kt,"P",{class:!0});var il=_(I);P=A(il,l[24]),il.forEach(n),kt.forEach(n),yt.forEach(n),x=D(le),N=h(le,"DIV",{class:!0});var rl=_(N);nt.l(rl),rl.forEach(n),C=D(le),g=h(le,"DIV",{class:!0});var qe=_(g);T=h(qe,"P",{class:!0});var nl=_(T);ot.l(nl),nl.forEach(n),F=D(qe),R=h(qe,"P",{class:!0});var ol=_(R);ct.l(ol),ol.forEach(n),j=D(qe),q=h(qe,"P",{class:!0});var cl=_(q);ut.l(cl),cl.forEach(n),qe.forEach(n),le.forEach(n),V.forEach(n),Te=D(M),Z=h(M,"BUTTON",{});var ul=_(Z);se=A(ul,pe),ul.forEach(n),ve=D(M),J&&J.l(M),_e=D(M),ne=h(M,"DIV",{class:!0});var fl=_(ne);B=h(fl,"DIV",{id:!0});var Et=_(B);X=h(Et,"DIV",{class:!0,"data-svelte-h":!0}),te(X)!=="svelte-ll1i43"&&(X.innerHTML=vt),Qe=D(Et),ie=h(Et,"DIV",{id:!0,class:!0});var Dt=_(ie);Q=h(Dt,"DIV",{class:!0});var we=_(Q);z=h(we,"H3",{class:!0});var Yt=_(z);Ce=A(Yt,l[23]),Le=A(Yt," against per capita co-benefit values (£, thousand)"),Yt.forEach(n),Re=D(we),re=h(we,"P",{class:!0});var jt=_(re);Ze=A(jt,`Each point in the chart below represents a UK \r
                        `),Ee.l(jt),jt.forEach(n),xe=D(we),me=h(we,"DIV",{class:!0,"data-svelte-h":!0}),te(me)!=="svelte-tg5ofw"&&(me.innerHTML=Me),$e=D(we),ft.l(we),we.forEach(n),et=D(Dt),W=h(Dt,"DIV",{class:!0});var fe=_(W);ge=h(fe,"H3",{class:!0});var qt=_(ge);tt=A(qt,l[23]),Ue=A(qt," at LSOA level"),qt.forEach(n),lt=D(fe),oe=h(fe,"P",{class:!0,"data-svelte-h":!0}),te(oe)!=="svelte-1ask2se"&&(oe.textContent=ce),ze=D(fe),be=h(fe,"DIV",{class:!0,"data-svelte-h":!0}),te(be)!=="svelte-7b2hds"&&(be.innerHTML=_t),at=D(fe),K&&K.l(fe),We=D(fe),ye=h(fe,"DIV",{id:!0,class:!0}),_(ye).forEach(n),fe.forEach(n),Dt.forEach(n),Et.forEach(n),fl.forEach(n),st=D(M),ue=h(M,"DIV",{id:!0});var Lt=_(ue);ke=h(Lt,"DIV",{class:!0,"data-svelte-h":!0}),te(ke)!=="svelte-1av3fse"&&(ke.innerHTML=mt),o=D(Lt),w=h(Lt,"DIV",{id:!0,class:!0,style:!0});var At=_(w);O=h(At,"DIV",{id:!0,class:!0});var de=_(O);$=h(de,"H3",{class:!0});var St=_($);U=A(St,`Plotting \r
                    \r
                    `),Ft=A(St,Zt),Ht=A(St,`\r
                \r
                against the gain/loss (£, thousand) per capita for each co-benefit`),St.forEach(n),Nt=D(de),Fe=h(de,"P",{class:!0,"data-svelte-h":!0}),te(Fe)!=="svelte-1h97e3k"&&(Fe.textContent=$t),Pt=D(de),Bt=h(de,"BR",{}),Ot=D(de),ee=h(de,"DIV",{id:!0,class:!0});var Pe=_(ee);Ge=h(Pe,"STRONG",{"data-svelte-h":!0}),te(Ge)!=="svelte-1qu96kx"&&(Ge.textContent=el),Rt=h(Pe,"BR",{}),xt=A(Pe,`Expand for detailed explanation\r
                    `),it=h(Pe,"DIV",{style:!0}),_(it).forEach(n),Ut=D(Pe);for(let Be=0;Be<G.length;Be+=1)G[Be].l(Pe);Pe.forEach(n),zt=D(de),Ae=h(de,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),te(Ae)!=="svelte-11g4vkg"&&(Ae.innerHTML=tl),de.forEach(n),Wt=D(At),He=h(At,"DIV",{id:!0,class:!0});var dl=_(He);Se=h(dl,"DIV",{id:!0,class:!0});var hl=_(Se);for(let Be=0;Be<Y.length;Be+=1)Y[Be].l(hl);hl.forEach(n),dl.forEach(n),At.forEach(n),Lt.forEach(n),M.forEach(n),gt=D(p),_l(Ne.$$.fragment,p),this.h()},h(){f(m,"class","page-subtitle svelte-10c07ly"),f(v,"class","page-title svelte-10c07ly"),f(I,"class","definition"),f(c,"class","title-container"),f(u,"class","header-text svelte-10c07ly"),f(N,"class","header-vis svelte-10c07ly"),f(T,"class","definition-stat svelte-10c07ly"),f(R,"class","definition-stat svelte-10c07ly"),f(q,"class","definition-stat svelte-10c07ly"),f(g,"class","header-stats svelte-10c07ly"),f(s,"class","header-content svelte-10c07ly"),f(r,"class","section header svelte-10c07ly"),f(X,"class","section-header"),f(z,"class","component-title"),f(re,"class","description"),f(me,"class","aggregation-icon-container2 svelte-10c07ly"),f(Q,"class","component column"),f(ge,"class","component-title"),f(oe,"class","description"),f(be,"class","aggregation-icon-container2 svelte-10c07ly"),f(ye,"id","map"),f(ye,"class","svelte-10c07ly"),f(W,"class","component column"),f(ie,"id","vis-block"),f(ie,"class","svelte-10c07ly"),f(B,"id","overview"),f(ne,"class","section"),f(ke,"class","section-header"),f($,"class","component-title"),f(Fe,"class","explanation"),De(it,"height","0.8em"),f(ee,"id","main-legend"),f(ee,"class","legend-box svelte-10c07ly"),f(Ae,"id","se-disclaimer"),f(Ae,"class","disclaimer-box svelte-10c07ly"),f(O,"id","se-title"),f(O,"class","svelte-10c07ly"),f(Se,"id","multiple-plots"),f(Se,"class","svelte-10c07ly"),f(He,"id","multiple-comp"),f(He,"class","svelte-10c07ly"),f(w,"id","se-block"),f(w,"class","component svelte-10c07ly"),De(w,"margin-left","1rem"),f(ue,"id","compare"),f(a,"class","page-container")},m(p,M){ml(t,p,M),S(p,e,M),S(p,a,M),i(a,r),i(r,s),i(s,u),i(u,m),i(u,k),i(u,c),i(c,v),i(v,b),i(c,H),i(c,I),i(I,P),i(s,x),i(s,N),nt.m(N,null),i(s,C),i(s,g),i(g,T),ot.m(T,null),i(g,F),i(g,R),ct.m(R,null),i(g,j),i(g,q),ut.m(q,null),i(a,Te),i(a,Z),i(Z,se),i(a,ve),J&&J.m(a,null),i(a,_e),i(a,ne),i(ne,B),i(B,X),i(B,Qe),i(B,ie),i(ie,Q),i(Q,z),i(z,Ce),i(z,Le),i(Q,Re),i(Q,re),i(re,Ze),Ee.m(re,null),i(Q,xe),i(Q,me),i(Q,$e),ft.m(Q,null),i(ie,et),i(ie,W),i(W,ge),i(ge,tt),i(ge,Ue),i(W,lt),i(W,oe),i(W,ze),i(W,be),i(W,at),K&&K.m(W,null),i(W,We),i(W,ye),l[45](ye),i(a,st),i(a,ue),i(ue,ke),i(ue,o),i(ue,w),i(w,O),i(O,$),i($,U),i($,Ft),i($,Ht),i(O,Nt),i(O,Fe),i(O,Pt),i(O,Bt),i(O,Ot),i(O,ee),i(ee,Ge),i(ee,Rt),i(ee,xt),i(ee,it),i(ee,Ut);for(let V=0;V<G.length;V+=1)G[V]&&G[V].m(ee,null);i(O,zt),i(O,Ae),i(w,Wt),i(w,He),i(He,Se);for(let V=0;V<Y.length;V+=1)Y[V]&&Y[V].m(Se,null);l[49](a),S(p,gt,M),ml(Ne,p,M),rt=!0,Gt||(ll=Hl(Z,"click",l[28]),Gt=!0)},p(p,M){if(nt.p(p,M),ot.p(p,M),ct.p(p,M),ut.p(p,M),(!rt||M[0]&4)&&pe!==(pe=p[2]?"Switch to LAD level data":"Switch to LSOA level data")&&he(se,pe),p[18]?J?J.p(p,M):(J=Il(p),J.c(),J.m(a,_e)):J&&(J.d(1),J=null),bt!==(bt=al(p))&&(Ee.d(1),Ee=bt(p),Ee&&(Ee.c(),Ee.m(re,null))),ft.p(p,M),p[16]?K?K.p(p,M):(K=Tl(p),K.c(),K.m(W,We)):K&&(K.d(1),K=null),M[0]&537395200){Ye=wt(Tt);let V;for(V=0;V<Ye.length;V+=1){const le=Vl(p,Ye,V);G[V]?G[V].p(le,M):(G[V]=Ml(le),G[V].c(),G[V].m(ee,null))}for(;V<G.length;V+=1)G[V].d(1);G.length=Ye.length}if(M[0]&4196353){je=wt(Tt);let V;for(V=0;V<je.length;V+=1){const le=wl(p,je,V);Y[V]?Y[V].p(le,M):(Y[V]=Fl(le),Y[V].c(),Y[V].m(Se,null))}for(;V<Y.length;V+=1)Y[V].d(1);Y.length=je.length}},i(p){rt||(gl(t.$$.fragment,p),gl(Ne.$$.fragment,p),rt=!0)},o(p){bl(t.$$.fragment,p),bl(Ne.$$.fragment,p),rt=!1},d(p){p&&(n(e),n(a),n(gt)),yl(t,p),nt.d(),ot.d(),ct.d(),ut.d(),J&&J.d(),Ee.d(),ft.d(),K&&K.d(),l[45](null),pl(G,p),pl(Y,p),l[49](null),yl(Ne,p),Gt=!1,ll()}}}let ae=400;function Ie(l,t){return t==="£"?`${t}${l}`:`${l} ${t}`}function Wa(l,t,e){let a,r,s,u,m,y,k,c,v,b={},H={},I,P,x,N,C=!1,g,T=!1,F,R,j,q,Te,Z,pe,se,ve,_e,{data:ne}=t;const B=ne.SEF;console.log("SEF ",B);const X=sa.find(o=>o.id===B)?.id??B,vt=ia.find(o=>o.id===B)?.label??B,Qe=ra.find(o=>o.id===B)?.def??B,ie=na.find(o=>o.id===B)?.description??B,Q=oa.find(o=>o.id===B)?.short_units??B,z=ca.find(o=>o.id===B)?.units??B;let Ce,Le,Re=!1,re="";const Ze=["overview","compare"];let xe={},me=!1;function Me(){const o=window.scrollY;e(18,Re=o>250);for(const w of Ze){const O=document.getElementById(w);if(!O)continue;const $=O.getBoundingClientRect();if($.top<=150&&$.bottom>=150){re!==w&&Kt.capture("section entered (sef)",{section_name:w}),re=w;break}}}Ul(()=>(window.addEventListener("scroll",Me),Me(),()=>window.removeEventListener("scroll",Me))),zl(()=>{window.removeEventListener("scroll",Me)});async function $e(){e(31,I=await ht(da(B))),console.log("totals",I),e(1,N=await ht(ha(B))),console.log("LAD data 1 ",N),e(32,P=await ht(pa(B))),console.log("by cobens",P),e(33,g=await ht(va(B))),console.log("LADsef",g),x=await ht(_a()),console.log("per_capita_data",x),Xt.forEach(o=>{e(32,P[o]=+P[o],P)}),e(34,T=!0)}$e().then(()=>{e(16,Ce=new aa(I,"LSOA",Le,"val",!1,"Lookup_Value",!1)),Ce.initMap()}),console.log("Example Lookup_Value from currentData",a?.[0]?.Lookup_Value),console.log("Known LAD codes",Object.keys(xe));function et(){e(2,C=!C)}function W(){const o=El(I,w=>w.val)??0;Ll(Sl().thresholds(20).value(w=>w.val)(I),w=>w.length),e(7,y.innerHTML="",y),y?.append(Je({height:ae/1.9,width:ae*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${z}`},y:{label:a===N?"No. of LADs":"No. of LSOAs",labelArrow:!1,domain:a===N?[0,100]:[0,1e4]},style:{fontSize:"16px"},marks:[ea(a,ya({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),Ke([o],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:o,label:"Average"}},tip:{format:{average:w=>`${w.toFixed(2)}`,x:!1}}}),dt({label:`${z}`,labelArrow:!1,labelAnchor:"center"})]}))}function ge(){const o=Dl(a,U=>U.val)??0,w=Ll(Sl().thresholds(20).value(U=>U.val)(a),U=>U.length),O=Al[X],$=O?Object.keys(O).map(Number):a.filter(U=>U.SEFMAME==X).map(U=>U.SE);c?.append(Je({height:ae/1.9,width:ae*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:X==="Typology"?80:50,x:{domain:$,label:fa(X),tickFormat:U=>O?.[U]??U,tickRotate:X==="Typology"?-10:0},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[ka(a,ta({y:"count"},{x:"val",fill:"black",opacity:.5})),Ke([o],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:o,label:"Average"}},tip:{format:{average:U=>`${U.toFixed(2)}`,x:!1}}}),Ct(a,{x:{value:o,thresholds:20},y:w+.1*w,r:5,fill:"#BD210E"})]}))}function tt(){e(8,k.innerHTML="",k),k?.append(Je({height:ae*1.5,width:ae*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[Vt([0],{stroke:"#333",strokeWidth:1.25}),Ke([0],{stroke:"#333",strokeWidth:.75}),Ct(a,{x:"val",y:o=>o.total_per_capita*1e3,fill:o=>o.total_per_capita<0?"#BD210E":"#242424",r:a===N?4:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${z}`},value:{value:o=>o.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),It({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),dt({label:`${z}`,labelArrow:!1,labelAnchor:"center"})]}))}function Ue(){v?.append(Je({height:ae*1.5,width:ae*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[Vt([0],{stroke:"#333",strokeWidth:1.25}),Ke([0],{stroke:"#333",strokeWidth:.75}),Ea(a,{x:"val",y:o=>o.total_per_capita*1e3,fill:o=>o.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${z}`},value:{value:o=>o.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),It({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),dt({label:`${z}`,labelArrow:!1,labelAnchor:"center"})]}))}function lt(){Xt.forEach(o=>{let w;w=Je({height:ae,width:ae,marginLeft:o==="Excess heat"?80:60,marginTop:40,marginRight:10,marginBottom:50,x:{label:null},y:{label:null},style:{fontSize:"14px"},marks:[Vt([0],{stroke:"#333",strokeWidth:1.25}),Ke([0],{stroke:"#333",strokeWidth:.75}),Ct(r.filter(O=>O.co_benefit_type==o),{x:"val",y:"total",fill:pt(o),fillOpacity:.5,r:r===g?3.5:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),It({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"top"}),dt({label:`${z}`,labelArrow:!1,labelAnchor:"center"})]}),b[o]?.append(w)})}function oe(){Xt.forEach(o=>{let w;w=Je({height:ae,width:ae,marginLeft:60,marginTop:40,marginRight:10,marginBottom:50,x:{label:null},y:{label:null},style:{fontSize:"14px"},marks:[Vt([0],{stroke:"#333",strokeWidth:1.25}),Ke([0],{stroke:"#333",strokeWidth:.75}),Ct(r.filter(O=>O.co_benefit_type==o),{x:"val",y:"total",fill:pt(o),fillOpacity:.5,r:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),It({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),dt({label:`${z}`,labelArrow:!1,labelAnchor:"center"})]}),H[o]?.append(w)})}let ce=new Set;function ze(o){ce.has(o)?ce.delete(o):ce.add(o),e(19,ce=new Set(ce))}function be(o){Ve[o?"unshift":"push"](()=>{c=o,e(9,c)})}function _t(o){Ve[o?"unshift":"push"](()=>{y=o,e(7,y)})}function at(o){Ve[o?"unshift":"push"](()=>{v=o,e(10,v)})}function We(o){Ve[o?"unshift":"push"](()=>{k=o,e(8,k)})}function ye(o){Ve[o?"unshift":"push"](()=>{Le=o,e(17,Le)})}const st=o=>{const w=ce.has(o.id);ze(o.id),w?Kt.capture("cobenefit closed",{cobenefit:o.label}):Kt.capture("cobenefit opened",{cobenefit:o.label})};function ue(o,w){Ve[o?"unshift":"push"](()=>{H[w.id]=o,e(11,H)})}function ke(o,w){Ve[o?"unshift":"push"](()=>{b[w.id]=o,e(0,b)})}function mt(o){Ve[o?"unshift":"push"](()=>{m=o,e(6,m)})}return l.$$set=o=>{"data"in o&&e(30,ne=o.data)},l.$$.update=()=>{l.$$.dirty[0]&6|l.$$.dirty[1]&1&&e(5,a=C?I:N),l.$$.dirty[0]&4|l.$$.dirty[1]&6&&(r=C?P:g),l.$$.dirty[0]&32&&e(12,F=a?(El(a,o=>o.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&32&&e(37,ve=a?Dl(a,o=>o.val):null),l.$$.dirty[1]&192&&e(13,R=ve!=null&&_e?_e[ve]??ve:"N/A"),l.$$.dirty[0]&32&&e(35,Z=a?Zl(a,o=>o.val):-1),l.$$.dirty[0]&32|l.$$.dirty[1]&16&&e(3,Te=Z!==-1&&a?a[Z].Lookup_Value?.trim():"N/A"),l.$$.dirty[0]&32|l.$$.dirty[1]&16&&e(14,j=Z!==-1&&a?(a[Z].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&32&&e(36,se=a?$l(a,o=>o.val):-1),l.$$.dirty[0]&32|l.$$.dirty[1]&32&&e(4,pe=se!==-1&&a?a[se].Lookup_Value:"N/A"),l.$$.dirty[0]&32|l.$$.dirty[1]&32&&e(15,q=se!==-1&&a?(a[se].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&16|l.$$.dirty[1]&768&&e(21,s=pe),l.$$.dirty[0]&8|l.$$.dirty[1]&768&&e(20,u=Te),l.$$.dirty[0]&33|l.$$.dirty[1]&8&&(Object.values(b).forEach(o=>{o.firstChild?.remove()}),T&&(W(),Ue(),lt(),oe()),T&&a&&(tt(),ge(),oe(),Ue()))},e(38,_e=Al[X]),[b,N,C,Te,pe,a,m,y,k,c,v,H,F,R,j,q,Ce,Le,Re,ce,u,s,X,vt,Qe,ie,Q,z,et,ze,ne,I,P,g,T,Z,se,ve,_e,xe,me,be,_t,at,We,ye,st,ue,ke,mt]}class ds extends jl{constructor(t){super(),ql(this,t,Wa,za,xl,{data:30},null,[-1,-1,-1])}}export{ds as component};
