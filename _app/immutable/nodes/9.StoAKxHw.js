import{s as Oe,e as c,a as I,t as le,c as f,b as g,g as N,d as ae,f as o,q as u,i as O,h as s,W as ft,y as Se,n as ze,z as dt,X as Mt,w as Me,j as de,p as ne,x as De,B as at,C as Ie,H as Ot,r as Ct,E as Gt,N as Ut,Y as Dt,Z as Rt,v as jt,_ as xt,A as Ze}from"../chunks/scheduler.GkBzG_tJ.js";import{S as it,i as st,c as Qe,b as Je,m as $e,t as et,a as tt,d as lt}from"../chunks/index.puHNmHGV.js";import{e as ke,N as qt}from"../chunks/NavigationBar.Bg68QGmS.js";import{b as Fe}from"../chunks/paths.D1RhhMgx.js";import{g as Wt}from"../chunks/entry.BPH04S5Q.js";import{I as nt,P as Xt,Q as Et}from"../chunks/index.CHZ6sWj5.js";import{g as ut,C as ht,e as Yt,f as Kt,h as Zt}from"../chunks/globals.CkQUNe_5.js";import{b as mt}from"../chunks/bar.B1iivFak.js";import{g as Qt,n as Jt}from"../chunks/duckdb.CiHXljN7.js";function Vt(a,e,t){const l=a.slice();return l[10]=e[t],l}function kt(a){let e,t=ke(a[2]),l=[];for(let n=0;n<t.length;n+=1)l[n]=yt(Vt(a,t,n));return{c(){e=c("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=f(n,"UL",{class:!0});var i=g(e);for(let r=0;r<l.length;r+=1)l[r].l(i);i.forEach(o),this.h()},h(){u(e,"class","suggestions svelte-1kj8esc")},m(n,i){O(n,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(n,i){if(i&12){t=ke(n[2]);let r;for(r=0;r<t.length;r+=1){const p=Vt(n,t,r);l[r]?l[r].p(p,i):(l[r]=yt(p),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(n){n&&o(e),Me(l,n)}}}function yt(a){let e,t=a[10][1]+"",l,n,i;function r(){return a[7](a[10])}return{c(){e=c("li"),l=le(t),this.h()},l(p){e=f(p,"LI",{class:!0});var d=g(e);l=ae(d,t),d.forEach(o),this.h()},h(){u(e,"class","svelte-1kj8esc")},m(p,d){O(p,e,d),s(e,l),n||(i=Se(e,"click",r),n=!0)},p(p,d){a=p,d&4&&t!==(t=a[10][1]+"")&&de(l,t)},d(p){p&&o(e),n=!1,i()}}}function $t(a){let e,t,l,n,i,r,p,d,m,B,h=a[2].length&&kt(a);return{c(){e=c("div"),t=c("div"),l=c("input"),n=I(),i=c("button"),r=le("See Report"),d=I(),h&&h.c(),this.h()},l(D){e=f(D,"DIV",{class:!0});var b=g(e);t=f(b,"DIV",{class:!0});var C=g(t);l=f(C,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,class:!0}),n=N(C),i=f(C,"BUTTON",{type:!0,class:!0});var F=g(i);r=ae(F,"See Report"),F.forEach(o),C.forEach(o),d=N(b),h&&h.l(b),b.forEach(o),this.h()},h(){u(l,"type","text"),u(l,"placeholder","Type local authority name to search..."),u(l,"autocomplete","off"),u(l,"class","svelte-1kj8esc"),u(i,"type","button"),u(i,"class","search-btn svelte-1kj8esc"),i.disabled=p=!a[1],u(t,"class","input-group svelte-1kj8esc"),u(e,"class","autocomplete svelte-1kj8esc")},m(D,b){O(D,e,b),s(e,t),s(t,l),ft(l,a[0]),s(t,n),s(t,i),s(i,r),s(e,d),h&&h.m(e,null),m||(B=[Se(l,"input",a[6]),Se(i,"click",a[4])],m=!0)},p(D,[b]){b&1&&l.value!==D[0]&&ft(l,D[0]),b&2&&p!==(p=!D[1])&&(i.disabled=p),D[2].length?h?h.p(D,b):(h=kt(D),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:ze,o:ze,d(D){D&&o(e),h&&h.d(),m=!1,dt(B)}}}function el(a,e,t){let l;const n=Mt();let{items:i}=e,r="",p=null;const d=Object.entries(i);function m([b,C]){t(0,r=C),t(1,p=b),n("select",b)}function B(){p&&n("search",p)}function h(){r=this.value,t(0,r)}const D=b=>m(b);return a.$$set=b=>{"items"in b&&t(5,i=b.items)},a.$$.update=()=>{a.$$.dirty&1&&t(2,l=r?d.filter(([b,C])=>C.toLowerCase().includes(r.toLowerCase())).slice(0,10):[])},[r,p,l,m,B,i,h,D]}class tl extends it{constructor(e){super(),st(this,e,el,$t,Oe,{items:5})}}function Bt(a,e,t){const l=a.slice();return l[11]=e[t],l}function Lt(a){let e,t=(a[6]==="total"?a[8](a[11].total_value,a[1],a[2],a[11].co_benefit_type,a[5]):a[8](a[11].value_per_capita,a[3],a[4],a[11].co_benefit_type,a[5]))+"",l;return{c(){e=new Ot(!1),l=Ct(),this.h()},l(n){e=Gt(n,!1),l=Ct(),this.h()},h(){e.a=l},m(n,i){e.m(t,n,i),O(n,l,i)},p(n,i){i&127&&t!==(t=(n[6]==="total"?n[8](n[11].total_value,n[1],n[2],n[11].co_benefit_type,n[5]):n[8](n[11].value_per_capita,n[3],n[4],n[11].co_benefit_type,n[5]))+"")&&e.p(t)},d(n){n&&(o(l),e.d())}}}function ll(a){let e,t=a[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=c("span"),l=le(t)},l(n){e=f(n,"SPAN",{});var i=g(e);l=ae(i,t),i.forEach(o)},m(n,i){O(n,e,i),s(e,l)},p(n,i){i&1&&t!==(t=n[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&de(l,t)},d(n){n&&o(e)}}}function al(a){let e,t=a[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=c("span"),l=le(t)},l(n){e=f(n,"SPAN",{});var i=g(e);l=ae(i,t),i.forEach(o)},m(n,i){O(n,e,i),s(e,l)},p(n,i){i&1&&t!==(t=n[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&de(l,t)},d(n){n&&o(e)}}}function Tt(a){let e,t,l,n,i,r,p,d=a[7](a[11].co_benefit_type)+"",m,B,h,D,b,C=a[6],F,w,S,E=Lt(a);function _(L,A){return L[6]==="total"?al:ll}let G=_(a),H=G(a);return{c(){e=c("tr"),t=c("td"),l=c("div"),n=c("img"),r=I(),p=c("a"),m=le(d),h=I(),D=c("td"),b=c("div"),E.c(),F=I(),w=c("td"),H.c(),S=I(),this.h()},l(L){e=f(L,"TR",{});var A=g(e);t=f(A,"TD",{});var Y=g(t);l=f(Y,"DIV",{class:!0});var $=g(l);n=f($,"IMG",{src:!0,alt:!0,class:!0}),r=N($),p=f($,"A",{href:!0});var J=g(p);m=ae(J,d),J.forEach(o),$.forEach(o),Y.forEach(o),h=N(A),D=f(A,"TD",{});var P=g(D);b=f(P,"DIV",{class:!0});var T=g(b);E.l(T),T.forEach(o),P.forEach(o),F=N(A),w=f(A,"TD",{});var U=g(w);H.l(U),U.forEach(o),S=N(A),A.forEach(o),this.h()},h(){Ie(n.src,i=ut(a[11].co_benefit_type))||u(n,"src",i),u(n,"alt","Icon"),u(n,"class","in-table-icon"),u(p,"href",B=Fe+"/cobenefit?cobenefit="+a[11].co_benefit_type),u(l,"class","coben-content"),u(b,"class","bar-cell")},m(L,A){O(L,e,A),s(e,t),s(t,l),s(l,n),s(l,r),s(l,p),s(p,m),s(e,h),s(e,D),s(D,b),E.m(b,null),s(e,F),s(e,w),H.m(w,null),s(e,S)},p(L,A){A&1&&!Ie(n.src,i=ut(L[11].co_benefit_type))&&u(n,"src",i),A&1&&d!==(d=L[7](L[11].co_benefit_type)+"")&&de(m,d),A&1&&B!==(B=Fe+"/cobenefit?cobenefit="+L[11].co_benefit_type)&&u(p,"href",B),A&64&&Oe(C,C=L[6])?(E.d(1),E=Lt(L),E.c(),E.m(b,null)):E.p(L,A),G===(G=_(L))&&H?H.p(L,A):(H.d(1),H=G(L),H&&(H.c(),H.m(w,null)))},d(L){L&&o(e),E.d(L),H.d()}}}function nl(a){let e,t,l,n="Total",i,r,p="Per Capita",d,m,B,h,D,b="Name",C,F,w=a[6]==="total"?"Total":"Per Capita",S,E,_,G=a[6]==="total"?"£, billion":"£",H,L,A,Y,$,J=ke(a[0]),P=[];for(let T=0;T<J.length;T+=1)P[T]=Tt(Bt(a,J,T));return{c(){e=c("div"),t=c("div"),l=c("button"),l.textContent=n,i=I(),r=c("button"),r.textContent=p,d=I(),m=c("table"),B=c("thead"),h=c("tr"),D=c("th"),D.textContent=b,C=I(),F=c("th"),S=le(w),E=I(),_=c("th"),H=le(G),L=I(),A=c("tbody");for(let T=0;T<P.length;T+=1)P[T].c();this.h()},l(T){e=f(T,"DIV",{class:!0});var U=g(e);t=f(U,"DIV",{class:!0});var M=g(t);l=f(M,"BUTTON",{"data-svelte-h":!0}),ne(l)!=="svelte-15mf98g"&&(l.textContent=n),i=N(M),r=f(M,"BUTTON",{"data-svelte-h":!0}),ne(r)!=="svelte-1ts3a4f"&&(r.textContent=p),M.forEach(o),U.forEach(o),d=N(T),m=f(T,"TABLE",{class:!0});var K=g(m);B=f(K,"THEAD",{});var j=g(B);h=f(j,"TR",{});var ee=g(h);D=f(ee,"TH",{"data-svelte-h":!0}),ne(D)!=="svelte-13ju7y1"&&(D.textContent=b),C=N(ee),F=f(ee,"TH",{style:!0});var X=g(F);S=ae(X,w),X.forEach(o),E=N(ee),_=f(ee,"TH",{style:!0});var k=g(_);H=ae(k,G),k.forEach(o),ee.forEach(o),j.forEach(o),L=N(K),A=f(K,"TBODY",{});var R=g(A);for(let y=0;y<P.length;y+=1)P[y].l(R);R.forEach(o),K.forEach(o),this.h()},h(){De(l,"selected",a[6]==="total"),De(r,"selected",a[6]==="per_capita"),u(t,"class","button-group"),u(e,"class","controls"),at(F,"width","180px"),at(_,"width","80px"),u(m,"class","data-table")},m(T,U){O(T,e,U),s(e,t),s(t,l),s(t,i),s(t,r),O(T,d,U),O(T,m,U),s(m,B),s(B,h),s(h,D),s(h,C),s(h,F),s(F,S),s(h,E),s(h,_),s(_,H),s(m,L),s(m,A);for(let M=0;M<P.length;M+=1)P[M]&&P[M].m(A,null);Y||($=[Se(l,"click",a[9]),Se(r,"click",a[10])],Y=!0)},p(T,[U]){if(U&64&&De(l,"selected",T[6]==="total"),U&64&&De(r,"selected",T[6]==="per_capita"),U&64&&w!==(w=T[6]==="total"?"Total":"Per Capita")&&de(S,w),U&64&&G!==(G=T[6]==="total"?"£, billion":"£")&&de(H,G),U&511){J=ke(T[0]);let M;for(M=0;M<J.length;M+=1){const K=Bt(T,J,M);P[M]?P[M].p(K,U):(P[M]=Tt(K),P[M].c(),P[M].m(A,null))}for(;M<P.length;M+=1)P[M].d(1);P.length=J.length}},i:ze,o:ze,d(T){T&&(o(e),o(d),o(m)),Me(P,T),Y=!1,dt($)}}}function il(a,e,t){let{aggregationPerCapitaPerBenefit:l}=e,{minCoBenefValue:n}=e,{maxCoBenefValue:i}=e,{minHHCoBenefValue:r}=e,{maxHHCoBenefValue:p}=e,{COBENEFS_SCALE:d}=e;function m(C){return ht.find(F=>F.id===C)?.label??C}let B="total";function h(C,F,w,S,E){const _=E(S);return nt({width:100,height:20,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,x:{domain:[F,w],axis:null},marks:[Xt([0],{stroke:"#3C3C3C"}),mt([C],{x:H=>H,y:0,fill:_})]}).outerHTML}const D=()=>t(6,B="total"),b=()=>t(6,B="per_capita");return a.$$set=C=>{"aggregationPerCapitaPerBenefit"in C&&t(0,l=C.aggregationPerCapitaPerBenefit),"minCoBenefValue"in C&&t(1,n=C.minCoBenefValue),"maxCoBenefValue"in C&&t(2,i=C.maxCoBenefValue),"minHHCoBenefValue"in C&&t(3,r=C.minHHCoBenefValue),"maxHHCoBenefValue"in C&&t(4,p=C.maxHHCoBenefValue),"COBENEFS_SCALE"in C&&t(5,d=C.COBENEFS_SCALE)},[l,n,i,r,p,d,B,m,h,D,b]}class sl extends it{constructor(e){super(),st(this,e,il,nl,Oe,{aggregationPerCapitaPerBenefit:0,minCoBenefValue:1,maxCoBenefValue:2,minHHCoBenefValue:3,maxHHCoBenefValue:4,COBENEFS_SCALE:5})}}function wt(a,e,t){const l=a.slice();return l[16]=e[t],l}function Ht(a,e,t){const l=a.slice();return l[19]=e[t],l}function St(a){let e,t=a[19].label+"",l;return{c(){e=c("option"),l=le(t),this.h()},l(n){e=f(n,"OPTION",{});var i=g(e);l=ae(i,t),i.forEach(o),this.h()},h(){e.__value=a[19].value,ft(e,e.__value)},m(n,i){O(n,e,i),s(e,l)},p:ze,d(n){n&&o(e)}}}function ol(a){let e,t=a[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=c("span"),l=le(t)},l(n){e=f(n,"SPAN",{});var i=g(e);l=ae(i,t),i.forEach(o)},m(n,i){O(n,e,i),s(e,l)},p(n,i){i&2&&t!==(t=n[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&de(l,t)},d(n){n&&o(e)}}}function rl(a){let e,t=a[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=c("span"),l=le(t)},l(n){e=f(n,"SPAN",{});var i=g(e);l=ae(i,t),i.forEach(o)},m(n,i){O(n,e,i),s(e,l)},p(n,i){i&2&&t!==(t=n[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&de(l,t)},d(n){n&&o(e)}}}function At(a){let e,t,l,n=(a[5][a[16].LAD]??a[16].LAD)+"",i,r,p,d,m,B,h=(a[2]==="total"?a[9](a[16].total_value,a[3]):a[10](a[16].value_per_capita,a[4]))+"",D,b,C;function F(E,_){return E[2]==="total"?rl:ol}let w=F(a),S=w(a);return{c(){e=c("tr"),t=c("td"),l=c("a"),i=le(n),p=I(),d=c("td"),m=c("div"),B=new Ot(!1),D=I(),b=c("td"),S.c(),C=I(),this.h()},l(E){e=f(E,"TR",{});var _=g(e);t=f(_,"TD",{});var G=g(t);l=f(G,"A",{href:!0});var H=g(l);i=ae(H,n),H.forEach(o),G.forEach(o),p=N(_),d=f(_,"TD",{});var L=g(d);m=f(L,"DIV",{class:!0});var A=g(m);B=Gt(A,!1),A.forEach(o),L.forEach(o),D=N(_),b=f(_,"TD",{});var Y=g(b);S.l(Y),Y.forEach(o),C=N(_),_.forEach(o),this.h()},h(){u(l,"href",r=Fe+"/location?location="+a[16].LAD),B.a=null,u(m,"class","bar-cell")},m(E,_){O(E,e,_),s(e,t),s(t,l),s(l,i),s(e,p),s(e,d),s(d,m),B.m(h,m),s(e,D),s(e,b),S.m(b,null),s(e,C)},p(E,_){_&34&&n!==(n=(E[5][E[16].LAD]??E[16].LAD)+"")&&de(i,n),_&2&&r!==(r=Fe+"/location?location="+E[16].LAD)&&u(l,"href",r),_&30&&h!==(h=(E[2]==="total"?E[9](E[16].total_value,E[3]):E[10](E[16].value_per_capita,E[4]))+"")&&B.p(h),w===(w=F(E))&&S?S.p(E,_):(S.d(1),S=w(E),S&&(S.c(),S.m(b,null)))},d(E){E&&o(e),S.d()}}}function cl(a){let e,t,l="Nation:",n,i,r,p,d,m="Total",B,h,D="Per Capita",b,C,F,w,S,E='Name <span style="font-weight:300; color: #545454">(Top 12 in display)</span>',_,G,H=a[2]==="total"?"Total":"Per Capita",L,A,Y,$=a[2]==="total"?"£, billion":"£",J,P,T,U,M,K=ke(a[7]),j=[];for(let k=0;k<K.length;k+=1)j[k]=St(Ht(a,K,k));let ee=ke(a[1]),X=[];for(let k=0;k<ee.length;k+=1)X[k]=At(wt(a,ee,k));return{c(){e=c("div"),t=c("label"),t.textContent=l,n=I(),i=c("select");for(let k=0;k<j.length;k+=1)j[k].c();r=I(),p=c("div"),d=c("button"),d.textContent=m,B=I(),h=c("button"),h.textContent=D,b=I(),C=c("table"),F=c("thead"),w=c("tr"),S=c("th"),S.innerHTML=E,_=I(),G=c("th"),L=le(H),A=I(),Y=c("th"),J=le($),P=I(),T=c("tbody");for(let k=0;k<X.length;k+=1)X[k].c();this.h()},l(k){e=f(k,"DIV",{class:!0});var R=g(e);t=f(R,"LABEL",{"data-svelte-h":!0}),ne(t)!=="svelte-1ecnfnj"&&(t.textContent=l),n=N(R),i=f(R,"SELECT",{});var y=g(i);for(let x=0;x<j.length;x+=1)j[x].l(y);y.forEach(o),r=N(R),p=f(R,"DIV",{class:!0});var ie=g(p);d=f(ie,"BUTTON",{"data-svelte-h":!0}),ne(d)!=="svelte-2dev6e"&&(d.textContent=m),B=N(ie),h=f(ie,"BUTTON",{"data-svelte-h":!0}),ne(h)!=="svelte-1q4fgxf"&&(h.textContent=D),ie.forEach(o),R.forEach(o),b=N(k),C=f(k,"TABLE",{class:!0});var ce=g(C);F=f(ce,"THEAD",{});var Ce=g(F);w=f(Ce,"TR",{});var Ee=g(w);S=f(Ee,"TH",{"data-svelte-h":!0}),ne(S)!=="svelte-1homman"&&(S.innerHTML=E),_=N(Ee),G=f(Ee,"TH",{style:!0});var Ae=g(G);L=ae(Ae,H),Ae.forEach(o),A=N(Ee),Y=f(Ee,"TH",{style:!0});var ve=g(Y);J=ae(ve,$),ve.forEach(o),Ee.forEach(o),Ce.forEach(o),P=N(ce),T=f(ce,"TBODY",{});var V=g(T);for(let x=0;x<X.length;x+=1)X[x].l(V);V.forEach(o),ce.forEach(o),this.h()},h(){a[0]===void 0&&Ut(()=>a[13].call(i)),De(d,"selected",a[2]==="total"),De(h,"selected",a[2]==="per_capita"),u(p,"class","button-group"),u(e,"class","controls"),at(G,"width","120px"),at(Y,"width","80px"),u(C,"class","data-table")},m(k,R){O(k,e,R),s(e,t),s(e,n),s(e,i);for(let y=0;y<j.length;y+=1)j[y]&&j[y].m(i,null);Dt(i,a[0],!0),s(e,r),s(e,p),s(p,d),s(p,B),s(p,h),O(k,b,R),O(k,C,R),s(C,F),s(F,w),s(w,S),s(w,_),s(w,G),s(G,L),s(w,A),s(w,Y),s(Y,J),s(C,P),s(C,T);for(let y=0;y<X.length;y+=1)X[y]&&X[y].m(T,null);U||(M=[Se(i,"change",a[13]),Se(i,"change",a[8]),Se(d,"click",a[14]),Se(h,"click",a[15])],U=!0)},p(k,[R]){if(R&128){K=ke(k[7]);let y;for(y=0;y<K.length;y+=1){const ie=Ht(k,K,y);j[y]?j[y].p(ie,R):(j[y]=St(ie),j[y].c(),j[y].m(i,null))}for(;y<j.length;y+=1)j[y].d(1);j.length=K.length}if(R&129&&Dt(i,k[0]),R&4&&De(d,"selected",k[2]==="total"),R&4&&De(h,"selected",k[2]==="per_capita"),R&4&&H!==(H=k[2]==="total"?"Total":"Per Capita")&&de(L,H),R&4&&$!==($=k[2]==="total"?"£, billion":"£")&&de(J,$),R&1598){ee=ke(k[1]);let y;for(y=0;y<ee.length;y+=1){const ie=wt(k,ee,y);X[y]?X[y].p(ie,R):(X[y]=At(ie),X[y].c(),X[y].m(T,null))}for(;y<X.length;y+=1)X[y].d(1);X.length=ee.length}},i:ze,o:ze,d(k){k&&(o(e),o(b),o(C)),Me(j,k),Me(X,k),U=!1,dt(M)}}}function fl(a,e,t){const l=Mt();let{ladData:n=[]}=e,{region:i}=e,{sortBy:r}=e,{maxLADValue:p}=e,{maxHHLADValue:d}=e,{LADToName:m={}}=e,{viewMode:B="total"}=e,{selectedRegion:h="All"}=e;const D=[{label:"All",value:"All"},{label:"England",value:"England"},{label:"Wales",value:"Wales"},{label:"Scotland",value:"Scotland"},{label:"Northern Ireland",value:"NI"}];function b(_){l("filterChange",{region:_.target.value,sortBy:r})}function C(_,G){return nt({width:80,height:20,margin:0,x:{domain:[0,G],axis:null},marks:[mt([_],{x:L=>L,y:0,fill:"#ccc"})]}).outerHTML}function F(_,G){return nt({width:80,height:20,margin:0,x:{domain:[0,G],axis:null},marks:[mt([_],{x:L=>L,y:0,fill:"#ccc"})]}).outerHTML}function w(){i=Rt(this),t(0,i),t(7,D)}const S=()=>l("filterChange",{region:i,sortBy:"total"}),E=()=>l("filterChange",{region:i,sortBy:"per_capita"});return a.$$set=_=>{"ladData"in _&&t(1,n=_.ladData),"region"in _&&t(0,i=_.region),"sortBy"in _&&t(2,r=_.sortBy),"maxLADValue"in _&&t(3,p=_.maxLADValue),"maxHHLADValue"in _&&t(4,d=_.maxHHLADValue),"LADToName"in _&&t(5,m=_.LADToName),"viewMode"in _&&t(11,B=_.viewMode),"selectedRegion"in _&&t(12,h=_.selectedRegion)},[i,n,r,p,d,m,l,D,b,C,F,B,h,w,S,E]}class ul extends it{constructor(e){super(),st(this,e,fl,cl,Oe,{ladData:1,region:0,sortBy:2,maxLADValue:3,maxHHLADValue:4,LADToName:5,viewMode:11,selectedRegion:12})}}function It(a,e,t){const l=a.slice();return l[42]=e[t],l[44]=t,l}function Nt(a){let e,t,l,n,i,r,p;return{c(){e=c("div"),t=c("img"),i=I(),r=c("img"),this.h()},l(d){e=f(d,"DIV",{class:!0});var m=g(e);t=f(m,"IMG",{class:!0,src:!0,alt:!0}),i=N(m),r=f(m,"IMG",{class:!0,src:!0,alt:!0}),m.forEach(o),this.h()},h(){u(t,"class","slide-image"),Ie(t.src,l=a[42].image)||u(t,"src",l),u(t,"alt",n=a[42].label),u(r,"class","slide-map svelte-1m2rzix"),Ie(r.src,p=a[42].mapImage)||u(r,"src",p),u(r,"alt","Map overlay"),u(e,"class","hero-slide svelte-1m2rzix"),De(e,"active",a[44]===a[16]),De(e,"previous",a[44]===a[17])},m(d,m){O(d,e,m),s(e,t),s(e,i),s(e,r)},p(d,m){m[0]&8192&&!Ie(t.src,l=d[42].image)&&u(t,"src",l),m[0]&8192&&n!==(n=d[42].label)&&u(t,"alt",n),m[0]&8192&&!Ie(r.src,p=d[42].mapImage)&&u(r,"src",p),m[0]&65536&&De(e,"active",d[44]===d[16]),m[0]&131072&&De(e,"previous",d[44]===d[17])},d(d){d&&o(e)}}}function zt(a){let e,t,l;return{c(){e=c("div"),t=c("img"),this.h()},l(n){e=f(n,"DIV",{class:!0});var i=g(e);t=f(i,"IMG",{src:!0,alt:!0,class:!0}),i.forEach(o),this.h()},h(){Ie(t.src,l=a[12])||u(t,"src",l),u(t,"alt","Icon"),u(t,"class","svelte-1m2rzix"),u(e,"class","waffle-icon svelte-1m2rzix")},m(n,i){O(n,e,i),s(e,t)},p(n,i){i[0]&4096&&!Ie(t.src,l=n[12])&&u(t,"src",l)},d(n){n&&o(e)}}}function hl(a){let e,t="National costs";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-o12owz"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-1m2rzix")},m(l,n){O(l,e,n)},d(l){l&&o(e)}}}function ml(a){let e,t="National benefits";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-10ytukz"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-1m2rzix")},m(l,n){O(l,e,n)},d(l){l&&o(e)}}}function dl(a){let e,t="Per capita costs";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-6pmcl0"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-1m2rzix")},m(l,n){O(l,e,n)},d(l){l&&o(e)}}}function _l(a){let e,t="Per capita benefits";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-g1rvwk"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-1m2rzix")},m(l,n){O(l,e,n)},d(l){l&&o(e)}}}function Pt(a){let e,t,l,n,i,r,p="%",d,m,B="Contribution";return{c(){e=c("div"),t=c("div"),l=c("span"),n=le(a[11]),i=I(),r=c("span"),r.textContent=p,d=I(),m=c("div"),m.textContent=B,this.h()},l(h){e=f(h,"DIV",{class:!0});var D=g(e);t=f(D,"DIV",{class:!0});var b=g(t);l=f(b,"SPAN",{class:!0});var C=g(l);n=ae(C,a[11]),C.forEach(o),i=N(b),r=f(b,"SPAN",{class:!0,"data-svelte-h":!0}),ne(r)!=="svelte-jxggz7"&&(r.textContent=p),b.forEach(o),d=N(D),m=f(D,"DIV",{class:!0,"data-svelte-h":!0}),ne(m)!=="svelte-1ahdmih"&&(m.textContent=B),D.forEach(o),this.h()},h(){u(l,"class","waffle-big svelte-1m2rzix"),u(r,"class","small svelte-1m2rzix"),u(t,"class","waffle-value svelte-1m2rzix"),u(m,"class","waffle-caption svelte-1m2rzix"),u(e,"class","waffle-stat svelte-1m2rzix")},m(h,D){O(h,e,D),s(e,t),s(t,l),s(l,n),s(t,i),s(t,r),s(e,d),s(e,m)},p(h,D){D[0]&2048&&de(n,h[11])},d(h){h&&o(e)}}}function Ft(a){let e,t="GGGGGGGGG";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1hoodjr"&&(e.textContent=t),this.h()},h(){u(e,"class","spinner")},m(l,n){O(l,e,n)},d(l){l&&o(e)}}}function vl(a){let e,t,l,n,i,r,p=`<img src="${Fe}/atlas-logos/logo-colored-waffle-png.png" alt="Logo" height="0px"/> <h1 class="hero-title svelte-1m2rzix">The Co-Benefits of Reaching <br/> Net Zero in the UK</h1> <p class="hero-description svelte-1m2rzix">Climate actions lower greenhouse gas (GHG) emissions but the gains for society reach further. The CO-BENS project models 11 additional benefits based on actions recommended by the Climate Change Committee (CCC) in its Seventh Carbon Budget (2025) across 45,000 communities and regions within the UK.<br/></p> <p class="hero-description svelte-1m2rzix">Explore how, when and for whom benefits emerge to further understand connections between a wide range of social, economic and environmental priorities, and drive more effective decision-making.</p> <p class="hero-description svelte-1m2rzix">To understand more about the analysis or if you would like bespoke co-benefit modelling please get in touch by emailing <a href="mailto:cobens@ed.ac.uk">cobens@ed.ac.uk</a></p>`,d,m,B,h,D,b,C,F,w,S,E,_,G,H,L,A,Y="billion",$,J,P,T,U,M,K,j,ee,X,k,R,y,ie,ce,Ce,Ee="Find My Place",Ae,ve,V,x,Z,se,ye="Explore by Local Authority",ge,W,_e,re,pe,z="Explore by Co-Benefit",oe,be,Be,Ve,Le;e=new qt({});let Te=ke(a[13]),Q=[];for(let v=0;v<Te.length;v+=1)Q[v]=Nt(It(a,Te,v));let fe=a[12]&&zt(a);function _t(v,q){return v[9]>0?ml:hl}let Ge=_t(a),we=Ge(a);function vt(v,q){return v[10]>0?_l:dl}let Ue=vt(a),He=Ue(a),ue=a[15]!==null&&Pt(a);ve=new tl({props:{items:a[20]}}),ve.$on("search",a[32]),W=new ul({props:{ladData:a[0],region:a[1],sortBy:a[2],maxLADValue:a[3],maxHHLADValue:a[4],LADToName:a[20]}}),W.$on("filterChange",a[21]),be=new sl({props:{aggregationPerCapitaPerBenefit:a[19],minCoBenefValue:a[23],maxCoBenefValue:a[22],minHHCoBenefValue:a[24],maxHHCoBenefValue:a[25],COBENEFS_SCALE:Yt}});let me=a[18]&&Ft();return{c(){Qe(e.$$.fragment),t=I(),l=c("section");for(let v=0;v<Q.length;v+=1)Q[v].c();n=I(),i=c("div"),r=c("div"),r.innerHTML=p,d=I(),m=c("div"),B=c("div"),h=c("div"),fe&&fe.c(),D=I(),b=c("div"),C=le(a[8]),F=I(),w=c("div"),S=c("div"),E=c("div"),_=c("span"),G=le("£"),H=le(a[9]),L=I(),A=c("span"),A.textContent=Y,$=I(),we.c(),J=I(),P=c("div"),T=c("div"),U=c("span"),M=le("£"),K=le(a[10]),j=I(),He.c(),ee=I(),ue&&ue.c(),X=I(),k=c("div"),R=I(),y=c("div"),ie=I(),ce=c("section"),Ce=c("h1"),Ce.textContent=Ee,Ae=I(),Qe(ve.$$.fragment),V=I(),x=c("section"),Z=c("div"),se=c("h2"),se.textContent=ye,ge=I(),Qe(W.$$.fragment),_e=I(),re=c("div"),pe=c("h2"),pe.textContent=z,oe=I(),Qe(be.$$.fragment),Be=I(),Ve=c("main"),me&&me.c(),this.h()},l(v){Je(e.$$.fragment,v),t=N(v),l=f(v,"SECTION",{class:!0});var q=g(l);for(let ct=0;ct<Q.length;ct+=1)Q[ct].l(q);n=N(q),i=f(q,"DIV",{class:!0});var he=g(i);r=f(he,"DIV",{class:!0,"data-svelte-h":!0}),ne(r)!=="svelte-wan26l"&&(r.innerHTML=p),d=N(he),m=f(he,"DIV",{class:!0});var te=g(m);B=f(te,"DIV",{class:!0});var Ne=g(B);h=f(Ne,"DIV",{class:!0});var Re=g(h);fe&&fe.l(Re),D=N(Re),b=f(Re,"DIV",{class:!0});var gt=g(b);C=ae(gt,a[8]),gt.forEach(o),Re.forEach(o),F=N(Ne),w=f(Ne,"DIV",{class:!0});var Pe=g(w);S=f(Pe,"DIV",{class:!0});var je=g(S);E=f(je,"DIV",{class:!0});var xe=g(E);_=f(xe,"SPAN",{class:!0});var ot=g(_);G=ae(ot,"£"),H=ae(ot,a[9]),ot.forEach(o),L=N(xe),A=f(xe,"SPAN",{class:!0,"data-svelte-h":!0}),ne(A)!=="svelte-tlhydp"&&(A.textContent=Y),xe.forEach(o),$=N(je),we.l(je),je.forEach(o),J=N(Pe),P=f(Pe,"DIV",{class:!0});var qe=g(P);T=f(qe,"DIV",{class:!0});var pt=g(T);U=f(pt,"SPAN",{class:!0});var rt=g(U);M=ae(rt,"£"),K=ae(rt,a[10]),rt.forEach(o),pt.forEach(o),j=N(qe),He.l(qe),qe.forEach(o),ee=N(Pe),ue&&ue.l(Pe),Pe.forEach(o),Ne.forEach(o),X=N(te),k=f(te,"DIV",{class:!0}),g(k).forEach(o),R=N(te),y=f(te,"DIV",{}),g(y).forEach(o),te.forEach(o),he.forEach(o),q.forEach(o),ie=N(v),ce=f(v,"SECTION",{class:!0});var We=g(ce);Ce=f(We,"H1",{class:!0,"data-svelte-h":!0}),ne(Ce)!=="svelte-byubde"&&(Ce.textContent=Ee),Ae=N(We),Je(ve.$$.fragment,We),We.forEach(o),V=N(v),x=f(v,"SECTION",{class:!0});var Xe=g(x);Z=f(Xe,"DIV",{class:!0});var Ye=g(Z);se=f(Ye,"H2",{class:!0,"data-svelte-h":!0}),ne(se)!=="svelte-pgup4c"&&(se.textContent=ye),ge=N(Ye),Je(W.$$.fragment,Ye),Ye.forEach(o),_e=N(Xe),re=f(Xe,"DIV",{class:!0});var Ke=g(re);pe=f(Ke,"H2",{class:!0,"data-svelte-h":!0}),ne(pe)!=="svelte-9nk5va"&&(pe.textContent=z),oe=N(Ke),Je(be.$$.fragment,Ke),Ke.forEach(o),Xe.forEach(o),Be=N(v),Ve=f(v,"MAIN",{class:!0});var bt=g(Ve);me&&me.l(bt),bt.forEach(o),this.h()},h(){u(r,"class","hero-text svelte-1m2rzix"),u(b,"class","waffle-title svelte-1m2rzix"),u(h,"class","waffle-header svelte-1m2rzix"),u(_,"class","waffle-big svelte-1m2rzix"),u(A,"class","small svelte-1m2rzix"),u(E,"class","waffle-value svelte-1m2rzix"),u(S,"class","waffle-stat svelte-1m2rzix"),u(U,"class","waffle-big svelte-1m2rzix"),u(T,"class","waffle-value svelte-1m2rzix"),u(P,"class","waffle-stat svelte-1m2rzix"),u(w,"class","waffle-stats svelte-1m2rzix"),u(B,"class","waffle-label svelte-1m2rzix"),u(k,"class","waffle-bg svelte-1m2rzix"),u(m,"class","waffle-overlay svelte-1m2rzix"),u(i,"class","hero-content svelte-1m2rzix"),u(l,"class","hero-container svelte-1m2rzix"),u(Ce,"class","svelte-1m2rzix"),u(ce,"class","search-section svelte-1m2rzix"),u(se,"class","svelte-1m2rzix"),u(Z,"class","side-box svelte-1m2rzix"),u(pe,"class","svelte-1m2rzix"),u(re,"class","side-box svelte-1m2rzix"),u(x,"class","side-by-side-section svelte-1m2rzix"),u(Ve,"class","svelte-1m2rzix")},m(v,q){$e(e,v,q),O(v,t,q),O(v,l,q);for(let he=0;he<Q.length;he+=1)Q[he]&&Q[he].m(l,null);s(l,n),s(l,i),s(i,r),s(i,d),s(i,m),s(m,B),s(B,h),fe&&fe.m(h,null),s(h,D),s(h,b),s(b,C),s(B,F),s(B,w),s(w,S),s(S,E),s(E,_),s(_,G),s(_,H),s(E,L),s(E,A),s(S,$),we.m(S,null),s(w,J),s(w,P),s(P,T),s(T,U),s(U,M),s(U,K),s(P,j),He.m(P,null),s(w,ee),ue&&ue.m(w,null),a[28](B),s(m,X),s(m,k),a[29](k),s(m,R),s(m,y),a[30](y),a[31](l),O(v,ie,q),O(v,ce,q),s(ce,Ce),s(ce,Ae),$e(ve,ce,null),O(v,V,q),O(v,x,q),s(x,Z),s(Z,se),s(Z,ge),$e(W,Z,null),s(x,_e),s(x,re),s(re,pe),s(re,oe),$e(be,re,null),O(v,Be,q),O(v,Ve,q),me&&me.m(Ve,null),Le=!0},p(v,q){if(q[0]&204800){Te=ke(v[13]);let te;for(te=0;te<Te.length;te+=1){const Ne=It(v,Te,te);Q[te]?Q[te].p(Ne,q):(Q[te]=Nt(Ne),Q[te].c(),Q[te].m(l,n))}for(;te<Q.length;te+=1)Q[te].d(1);Q.length=Te.length}v[12]?fe?fe.p(v,q):(fe=zt(v),fe.c(),fe.m(h,D)):fe&&(fe.d(1),fe=null),(!Le||q[0]&256)&&de(C,v[8]),(!Le||q[0]&512)&&de(H,v[9]),Ge!==(Ge=_t(v))&&(we.d(1),we=Ge(v),we&&(we.c(),we.m(S,null))),(!Le||q[0]&1024)&&de(K,v[10]),Ue!==(Ue=vt(v))&&(He.d(1),He=Ue(v),He&&(He.c(),He.m(P,null))),v[15]!==null?ue?ue.p(v,q):(ue=Pt(v),ue.c(),ue.m(w,null)):ue&&(ue.d(1),ue=null);const he={};q[0]&1&&(he.ladData=v[0]),q[0]&2&&(he.region=v[1]),q[0]&4&&(he.sortBy=v[2]),q[0]&8&&(he.maxLADValue=v[3]),q[0]&16&&(he.maxHHLADValue=v[4]),W.$set(he),v[18]?me||(me=Ft(),me.c(),me.m(Ve,null)):me&&(me.d(1),me=null)},i(v){Le||(et(e.$$.fragment,v),et(ve.$$.fragment,v),et(W.$$.fragment,v),et(be.$$.fragment,v),Le=!0)},o(v){tt(e.$$.fragment,v),tt(ve.$$.fragment,v),tt(W.$$.fragment,v),tt(be.$$.fragment,v),Le=!1},d(v){v&&(o(t),o(l),o(ie),o(ce),o(V),o(x),o(Be),o(Ve)),lt(e,v),Me(Q,v),fe&&fe.d(),we.d(),He.d(),ue&&ue.d(),a[28](null),a[29](null),a[30](null),a[31](null),lt(ve),lt(W),lt(be),me&&me.d()}}}function gl(a,e,t){let{data:l}=e,n=[...l.aggregationPerBenefit].sort((V,x)=>x.total-V.total),i=[...l.aggregationPerCapitaPerBenefit].sort((V,x)=>x.total_value-V.total_value);console.log("aggregationPerCapitaPerBenefit",i);let r=l.totalAggregation[0].total_value_per_capita,p=[],d="All",m="total",B=0,h=0,D=l.LADToName;async function b(){const V=Jt({region:d,sortBy:m}),x=await Qt(V);t(0,p=x),t(3,B=Math.max(...x.map(Z=>Z.total_value))),t(4,h=Math.max(...x.map(Z=>Z.value_per_capita)))}function C(V){t(1,d=V.detail.region),t(2,m=V.detail.sortBy),b()}const F=Math.max(...i.map(V=>V.total_value)),w=Math.min(...i.map(V=>V.total_value)),S=Math.min(...i.map(V=>V.value_per_capita)),E=Math.max(...i.map(V=>V.value_per_capita));let _,G=[],H=null,L,A,Y,$,J,P,T=null,U=[],M,K=null,j=0,ee=0,X;function k(V){const x=_.filter(W=>W.type!=="empty").map(W=>W.type),Z=Array.from(new Set(x)),se=n.reduce((W,_e)=>W+_e.total,0),ye=[{type:null,label:"Total Co-Benefits",icon:null,totalValue:se.toFixed(2),perCapitaValue:r.toFixed(2),percentValue:"100%"},...Z.map(W=>{const re=ht.find(Q=>Q.id===W)?.label??W;let pe=ut(W);const z=n.find(Q=>Q.co_benefit_type===W),oe=i.find(Q=>Q.co_benefit_type===W),be=z?.total??0,Be=oe?.value_per_capita??0,Ve=be.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Le=Be.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Te=se>0?(be/se*100).toFixed(2):0;return console.log("percentage",W,be,se,Te),{type:W,label:re,icon:pe,totalValue:Ve,perCapitaValue:Le,percentValue:Te}})];setInterval(()=>{t(17,ee=j),t(16,j=(j+1)%ye.length);const{type:W,label:_e,icon:re,totalValue:pe,perCapitaValue:z,percentValue:oe}=ye[j];t(15,K=W),t(8,Y=_e),t(9,$=pe),t(10,J=z),t(11,P=oe),t(12,T=re),R(V,W)},5e3);const ge=ye[0];t(15,K=ge.type),t(8,Y=ge.label),t(9,$=ge.totalValue),t(10,J=ge.perCapitaValue),t(11,P=ge.percentValue),R(V,ge.type),console.log("update display",U)}function R(V,x){if(!H)return;t(5,H.innerHTML="",H);const Z=20,se=15,ye=Math.floor(V/Z),ge=se*ye,W=n.reduce((z,oe)=>z+oe.total,0),_e=[];for(const z of n){const oe=Math.round(Math.abs(z.total)/W*ge),be=z.total<0;for(let Be=0;Be<oe;Be++)_e.push({type:z.co_benefit_type,negative:be})}for(;_e.length<ge;)_e.push({type:"empty"});_e.sort((z,oe)=>z.type==="empty"?1:oe.type==="empty"?-1:z.negative&&!oe.negative?1:!z.negative&&oe.negative?-1:0),_=_e.map((z,oe)=>({x:oe%se,y:Math.floor(oe/se),...z})),G=Array.from(new Set(_.map(z=>z.type).filter(z=>z!=="empty"))),t(13,U=Kt(G));const re=x??null,pe=nt({width:Z*se,height:Z*ye,margin:0,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:ht.map(z=>z.id),range:Zt,unknown:"#eee",legend:!1},marks:[Et(_.filter(z=>!z.negative),{x:z=>z.x*Z,y:z=>z.y*Z,fill:"type",fillOpacity:z=>re&&z.type!==re?.15:1}),Et(_.filter(z=>z.negative),{x:z=>z.x*Z,y:z=>z.y*Z,stroke:"type",strokeOpacity:z=>re&&z.type!==re?.15:1,strokeWidth:1,fill:"none"})]});L&&(t(6,L.style.width=`${Z*se}px`,L),t(6,L.style.height=`${V}px`,L)),t(5,H.innerHTML="",H),H.append(pe)}function y(V){Wt(`${Fe}/location?location=${V}`)}let ie=!0;jt(()=>{b();const V=M.getBoundingClientRect().height;R(V),k(V)}),xt(()=>{clearInterval(X)});function ce(V){Ze[V?"unshift":"push"](()=>{A=V,t(7,A)})}function Ce(V){Ze[V?"unshift":"push"](()=>{L=V,t(6,L)})}function Ee(V){Ze[V?"unshift":"push"](()=>{H=V,t(5,H)})}function Ae(V){Ze[V?"unshift":"push"](()=>{M=V,t(14,M)})}const ve=V=>y(V.detail);return a.$$set=V=>{"data"in V&&t(27,l=V.data)},a.$$.update=()=>{a.$$.dirty[0]&134217728&&t(18,ie=!l)},[p,d,m,B,h,H,L,A,Y,$,J,P,T,U,M,K,j,ee,ie,i,D,C,F,w,S,E,y,l,ce,Ce,Ee,Ae,ve]}class Ll extends it{constructor(e){super(),st(this,e,gl,vl,Oe,{data:27},null,[-1,-1])}}export{Ll as component};
