import{s as Rl,a as E,e as u,t as D,g as k,c as d,b as m,p as Z,d as L,f as r,q as f,B as ye,i as T,h as i,y as Hl,j as Te,w as pl,r as Ul,G as Gl,n as ot,H as xl,E as zl,C as Wl,A as Be}from"../chunks/scheduler.DxTP-Qzi.js";import{S as jl,i as ql,c as vl,b as _l,m as ml,t as gl,a as bl,d as yl}from"../chunks/index.CDFQmUj4.js";import{N as Yl,e as kt}from"../chunks/NavigationBar.CHs0W_wA.js";import"../chunks/transform.BNP73y-7.js";import{aM as Kl,ao as Wt,ap as Xl,t as El,at as Jl,H as kl,aN as Dl,aO as Ql,aP as Zl,G as Ll,I as at,W as $l,J as Dt,L as Lt,N as es,O as jt,K as qt}from"../chunks/index.BLoJmirk.js";import{f as Yt}from"../chunks/module.jBGXnV9S.js";import{b as ts}from"../chunks/paths.DB4P3rpQ.js";import{M as ls}from"../chunks/mapUK.FMtBGQVv.js";import{l as ss,m as as,n as is,o as ns,p as rs,q as os,a as Al,e as rt,g as cs,S as nt,s as At,t as Kt,d as fs}from"../chunks/globals.DvxH7Vdj.js";import{g as it,i as us,h as ds,x as hs,y as ps,s as vs}from"../chunks/duckdb.CqqNOwjJ.js";import{p as St}from"../chunks/per_capita.COcMrZFY.js";import{F as _s}from"../chunks/Footer.Dr6q-w5a.js";import{n as ms}from"../chunks/nice.DHxIpIBp.js";import{t as gs,b as bs}from"../chunks/bin.vDT_EE8z.js";import{a as ys}from"../chunks/bar.CuW7nKQD.js";import{d as Xt}from"../chunks/dot.pNaywhZp.js";var Es=Array.prototype,ks=Es.slice;function Jt(l){return()=>l}function Sl(){var l=Kl,t=Wt,e=gs;function s(n){Array.isArray(n)||(n=Array.from(n));var a,o=n.length,v,p,_=new Array(o);for(a=0;a<o;++a)_[a]=l(n[a],a,n);var A=t(_),y=A[0],b=A[1],F=e(_,y,b);if(!Array.isArray(F)){const g=b,V=+F;if(t===Wt&&([y,b]=ms(y,b,V)),F=Xl(y,b,V),F[0]<=y&&(p=El(y,b,V)),F[F.length-1]>=b)if(g>=b&&t===Wt){const I=El(y,b,V);isFinite(I)&&(I>0?b=(Math.floor(b/I)+1)*I:I<0&&(b=(Math.ceil(b*-I)+1)/-I))}else F.pop()}for(var w=F.length,H=0,B=w;F[H]<=y;)++H;for(;F[B-1]>b;)--B;(H||B<w)&&(F=F.slice(H,B),w=B-H);var P=new Array(w+1),M;for(a=0;a<=w;++a)M=P[a]=[],M.x0=a>0?F[a-1]:y,M.x1=a<w?F[a]:b;if(isFinite(p)){if(p>0)for(a=0;a<o;++a)(v=_[a])!=null&&y<=v&&v<=b&&P[Math.min(w,Math.floor((v-y)/p))].push(n[a]);else if(p<0){for(a=0;a<o;++a)if((v=_[a])!=null&&y<=v&&v<=b){const g=Math.floor((y-v)*p);P[Math.min(w,g+(F[g]<=v))].push(n[a])}}}else for(a=0;a<o;++a)(v=_[a])!=null&&y<=v&&v<=b&&P[Jl(F,v,0,w)].push(n[a]);return P}return s.value=function(n){return arguments.length?(l=typeof n=="function"?n:Jt(n),s):l},s.domain=function(n){return arguments.length?(t=typeof n=="function"?n:Jt([n[0],n[1]]),s):t},s.thresholds=function(n){return arguments.length?(e=typeof n=="function"?n:Jt(Array.isArray(n)?ks.call(n):n),s):e},s}const Ds=""+new URL("../assets/negative.BhphYhmj.png",import.meta.url).href;function wl(l,t,e){const s=l.slice();return s[67]=t[e],s[68]=t,s[69]=e,s}function Vl(l,t,e){const s=l.slice();return s[67]=t[e],s}function Ls(l){let t;return{c(){t=u("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),m(t).forEach(r),this.h()},h(){f(t,"class","plot svelte-10c07ly")},m(e,s){T(e,t,s),l[37](t)},p:ot,d(e){e&&r(t),l[37](null)}}}function As(l){let t;return{c(){t=u("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),m(t).forEach(r),this.h()},h(){f(t,"class","plot svelte-10c07ly")},m(e,s){T(e,t,s),l[36](t)},p:ot,d(e){e&&r(t),l[36](null)}}}function Ss(l){let t,e,s=Ce(l[11],l[23])+"",n,a,o,v;return{c(){t=D("Max value: "),e=u("strong"),n=D(s),a=D("("),o=D(l[13]),v=D(")")},l(p){t=L(p,"Max value: "),e=d(p,"STRONG",{});var _=m(e);n=L(_,s),_.forEach(r),a=L(p,"("),o=L(p,l[13]),v=L(p,")")},m(p,_){T(p,t,_),T(p,e,_),i(e,n),T(p,a,_),T(p,o,_),T(p,v,_)},p(p,_){_[0]&2048&&s!==(s=Ce(p[11],p[23])+"")&&Te(n,s),_[0]&8192&&Te(o,p[13])},d(p){p&&(r(t),r(e),r(a),r(o),r(v))}}}function ws(l){let t;return{c(){t=D("-")},l(e){t=L(e,"-")},m(e,s){T(e,t,s)},p:ot,d(e){e&&r(t)}}}function Vs(l){let t,e,s=Ce(l[9],l[23])+"",n;return{c(){t=D("Average value: "),e=u("strong"),n=D(s),this.h()},l(a){t=L(a,"Average value: "),e=d(a,"STRONG",{style:!0});var o=m(e);n=L(o,s),o.forEach(r),this.h()},h(){ye(e,"color","#BD210E")},m(a,o){T(a,t,o),T(a,e,o),i(e,n)},p(a,o){o[0]&512&&s!==(s=Ce(a[9],a[23])+"")&&Te(n,s)},d(a){a&&(r(t),r(e))}}}function Is(l){let t,e,s=Ce(l[10],l[23])+"",n;return{c(){t=D("Most common category: "),e=u("strong"),n=D(s),this.h()},l(a){t=L(a,"Most common category: "),e=d(a,"STRONG",{style:!0});var o=m(e);n=L(o,s),o.forEach(r),this.h()},h(){ye(e,"color","#BD210E")},m(a,o){T(a,t,o),T(a,e,o),i(e,n)},p(a,o){o[0]&1024&&s!==(s=Ce(a[10],a[23])+"")&&Te(n,s)},d(a){a&&(r(t),r(e))}}}function Ts(l){let t,e,s=Ce(l[12],l[23])+"",n,a,o,v;return{c(){t=D("Min value: "),e=u("strong"),n=D(s),a=D("("),o=D(l[14]),v=D(")")},l(p){t=L(p,"Min value: "),e=d(p,"STRONG",{});var _=m(e);n=L(_,s),_.forEach(r),a=L(p,"("),o=L(p,l[14]),v=L(p,")")},m(p,_){T(p,t,_),T(p,e,_),i(e,n),T(p,a,_),T(p,o,_),T(p,v,_)},p(p,_){_[0]&4096&&s!==(s=Ce(p[12],p[23])+"")&&Te(n,s),_[0]&16384&&Te(o,p[14])},d(p){p&&(r(t),r(e),r(a),r(o),r(v))}}}function Cs(l){let t;return{c(){t=D("-")},l(e){t=L(e,"-")},m(e,s){T(e,t,s)},p:ot,d(e){e&&r(t)}}}function Il(l){let t,e,s,n,a;return{c(){t=u("div"),e=u("div"),s=u("span"),n=D(l[20]),a=D(" >>"),this.h()},l(o){t=d(o,"DIV",{class:!0});var v=m(t);e=d(v,"DIV",{class:!0});var p=m(e);s=d(p,"SPAN",{class:!0});var _=m(s);n=L(_,l[20]),a=L(_," >>"),_.forEach(r),p.forEach(r),v.forEach(r),this.h()},h(){f(s,"class","mini-header-text"),f(e,"class","mini-header-content"),f(t,"class","mini-header")},m(o,v){T(o,t,v),i(t,e),i(e,s),i(s,n),i(s,a)},p:ot,d(o){o&&r(t)}}}function Ms(l){let t;return{c(){t=D("LSOA.")},l(e){t=L(e,"LSOA.")},m(e,s){T(e,t,s)},d(e){e&&r(t)}}}function Fs(l){let t;return{c(){t=D("LAD.")},l(e){t=L(e,"LAD.")},m(e,s){T(e,t,s)},d(e){e&&r(t)}}}function Tl(l){let t,e,s=l[15].legend(l[24]).outerHTML+"";return{c(){t=u("div"),e=new xl(!1),this.h()},l(n){t=d(n,"DIV",{id:!0});var a=m(t);e=zl(a,!1),a.forEach(r),this.h()},h(){e.a=null,f(t,"id","legend")},m(n,a){T(n,t,a),e.m(s,t)},p(n,a){a[0]&32768&&s!==(s=n[15].legend(n[24]).outerHTML+"")&&e.p(s)},d(n){n&&r(t)}}}function Cl(l){let t,e,s,n,a=l[67].def+"",o,v,p,_,A,y,b,F="here",w,H,B=l[67].id.toLowerCase()+"",P,M,g;return{c(){t=u("div"),e=u("div"),s=u("div"),n=E(),o=D(a),v=E(),p=u("br"),_=E(),A=u("div"),y=D("Click "),b=u("a"),b.textContent=F,w=D(` for the 
                                `),H=u("span"),P=D(B),M=E(),g=D("report page."),this.h()},l(V){t=d(V,"DIV",{class:!0});var I=m(t);e=d(I,"DIV",{class:!0});var O=m(e);s=d(O,"DIV",{style:!0}),m(s).forEach(r),n=k(O),o=L(O,a),v=k(O),p=d(O,"BR",{}),_=k(O),A=d(O,"DIV",{class:!0});var G=m(A);y=L(G,"Click "),b=d(G,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0,"data-svelte-h":!0}),Z(b)!=="svelte-gjrxnt"&&(b.textContent=F),w=L(G,` for the 
                                `),H=d(G,"SPAN",{style:!0});var q=m(H);P=L(q,B),M=k(q),q.forEach(r),g=L(G,"report page."),G.forEach(r),O.forEach(r),I.forEach(r),this.h()},h(){ye(s,"height","0.8em"),f(b,"class","link"),f(b,"href",ts+"/cobenefit?cobenefit="+l[67].id),f(b,"target","_blank"),f(b,"rel","noopener noreferrer"),ye(b,"color",rt(l[67].id)),ye(H,"color",rt(l[67].id)),f(A,"class","link-box svelte-10c07ly"),f(e,"class","legend-description svelte-10c07ly"),f(t,"class","legend-description-box svelte-10c07ly")},m(V,I){T(V,t,I),i(t,e),i(e,s),i(e,n),i(e,o),i(e,v),i(e,p),i(e,_),i(e,A),i(A,y),i(A,b),i(A,w),i(A,H),i(H,P),i(H,M),i(A,g)},d(V){V&&r(t)}}}function Ml(l){let t,e,s,n,a,o=l[67].label+"",v,p,_,A,y=l[18].has(l[67].id)?"▲":"▼",b,F,w=l[18].has(l[67].id),H,B,P;function M(){return l[40](l[67])}let g=w&&Cl(l);return{c(){t=u("div"),e=u("div"),s=u("span"),n=E(),a=u("span"),v=D(o),_=E(),A=u("span"),b=D(y),F=E(),g&&g.c(),H=E(),this.h()},l(V){t=d(V,"DIV",{class:!0});var I=m(t);e=d(I,"DIV",{class:!0,style:!0});var O=m(e);s=d(O,"SPAN",{class:!0,style:!0}),m(s).forEach(r),n=k(O),a=d(O,"SPAN",{class:!0});var G=m(a);v=L(G,o),G.forEach(r),_=k(O),A=d(O,"SPAN",{class:!0});var q=m(A);b=L(q,y),q.forEach(r),O.forEach(r),F=k(I),g&&g.l(I),H=k(I),I.forEach(r),this.h()},h(){f(s,"class","legend-color svelte-10c07ly"),ye(s,"background-color",rt(l[67].id)),f(a,"class",p="legend-text "+(l[18].has(l[67].id)?"expanded":"")+" svelte-10c07ly"),f(A,"class","toggle-icon svelte-10c07ly"),f(e,"class","legend-header svelte-10c07ly"),ye(e,"cursor","pointer"),f(t,"class","legend-item svelte-10c07ly")},m(V,I){T(V,t,I),i(t,e),i(e,s),i(e,n),i(e,a),i(a,v),i(e,_),i(e,A),i(A,b),i(t,F),g&&g.m(t,null),i(t,H),B||(P=Hl(e,"click",M),B=!0)},p(V,I){l=V,I[0]&262144&&p!==(p="legend-text "+(l[18].has(l[67].id)?"expanded":"")+" svelte-10c07ly")&&f(a,"class",p),I[0]&262144&&y!==(y=l[18].has(l[67].id)?"▲":"▼")&&Te(b,y),I[0]&262144&&(w=l[18].has(l[67].id)),w?g||(g=Cl(l),g.c(),g.m(t,H)):g&&(g.d(1),g=null)},d(V){V&&r(t),g&&g.d(),B=!1,P()}}}function Hs(l){let t,e=`<img class="sm-icon svelte-10c07ly" src="${St}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each area.</span>`;return{c(){t=u("div"),t.innerHTML=e,this.h()},l(s){t=d(s,"DIV",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-1lqh0bd"&&(t.innerHTML=e),this.h()},h(){f(t,"class","tooltip-wrapper")},m(s,n){T(s,t,n)},d(s){s&&r(t)}}}function Ns(l){let t,e=`<img class="sm-icon svelte-10c07ly" src="${St}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each area.</span>`,s,n,a=`<img class="sm-icon svelte-10c07ly" src="${Ds}" alt="icon"/> <span class="tooltip-text-neg svelte-10c07ly">This chart includes negative values.</span>`;return{c(){t=u("div"),t.innerHTML=e,s=E(),n=u("div"),n.innerHTML=a,this.h()},l(o){t=d(o,"DIV",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-1tqucbd"&&(t.innerHTML=e),s=k(o),n=d(o,"DIV",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-10ijo5a"&&(n.innerHTML=a),this.h()},h(){f(t,"class","tooltip-wrapper"),f(n,"class","tooltip-wrapper")},m(o,v){T(o,t,v),T(o,s,v),T(o,n,v)},d(o){o&&(r(t),r(s),r(n))}}}function Ps(l){let t,e=l[67];const s=()=>l[42](t,e),n=()=>l[42](null,e);return{c(){t=u("div"),this.h()},l(a){t=d(a,"DIV",{class:!0}),m(t).forEach(r),this.h()},h(){f(t,"class","plot svelte-10c07ly")},m(a,o){T(a,t,o),s()},p(a,o){l=a,e!==l[67]&&(n(),e=l[67],s())},d(a){a&&r(t),n()}}}function Os(l){let t,e=l[67];const s=()=>l[41](t,e),n=()=>l[41](null,e);return{c(){t=u("div"),this.h()},l(a){t=d(a,"DIV",{class:!0}),m(t).forEach(r),this.h()},h(){f(t,"class","plot svelte-10c07ly")},m(a,o){T(a,t,o),s()},p(a,o){l=a,e!==l[67]&&(n(),e=l[67],s())},d(a){a&&r(t),n()}}}function Fl(l){let t,e,s,n,a,o,v=l[67].label+"",p,_,A,y;function b(M,g){return M[67].id=="Hassle costs"||M[67].id=="Road repairs"||M[67].id=="Road safety"||M[67].id=="Congestion"||M[67].id=="Excess heat"?Ns:Hs}let w=b(l)(l);function H(M,g){return nt.includes(M[19])?Os:Ps}let P=H(l)(l);return{c(){t=u("div"),e=u("div"),s=u("img"),a=E(),o=u("h3"),p=D(v),_=E(),w.c(),A=E(),P.c(),y=E(),this.h()},l(M){t=d(M,"DIV",{class:!0});var g=m(t);e=d(g,"DIV",{class:!0});var V=m(e);s=d(V,"IMG",{class:!0,src:!0,alt:!0}),a=k(V),o=d(V,"H3",{class:!0});var I=m(o);p=L(I,v),I.forEach(r),_=k(V),w.l(V),V.forEach(r),A=k(g),P.l(g),y=k(g),g.forEach(r),this.h()},h(){f(s,"class","sm-cb-icon svelte-10c07ly"),Wl(s.src,n=cs(l[67].id))||f(s,"src",n),f(s,"alt",l[67].label+" icon"),f(o,"class","chart-component-title"),f(e,"class","component-chart-title-container svelte-10c07ly"),f(t,"class","plot-container svelte-10c07ly")},m(M,g){T(M,t,g),i(t,e),i(e,s),i(e,a),i(e,o),i(o,p),i(e,_),w.m(e,null),i(t,A),P.m(t,null),i(t,y)},p(M,g){P.p(M,g)},d(M){M&&r(t),w.d(),P.d()}}}function Bs(l){let t,e,s,n,a,o,v,p="Socio-Economic Factor Report",_,A,y,b,F,w,H,B,P,M,g,V,I,O,G,q,ae,$,ie=l[2]?"Switch to LAD level data":"Switch to LSOA level data",Ee,U,ee,ke,ne,pe,ct='<p class="section-subtitle svelte-10c07ly">Overview</p>',le,J,z,re,Re,je,De,oe,se,Ue,ve,ft=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${St}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each area.</span></div>`,qe,Le,Ye,x,_e,Ke,Xe,Je,me,ut="Scroll for zooming in and out.",Qe,ge,c=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${St}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each area.</span></div>`,N,R,ce,dt,Ae,Me,Qt='<p class="section-subtitle svelte-10c07ly">By Co-benefits</p>',wt,fe,X,Se,Vt,Zt=l[20].toLowerCase()+"",It,Tt,Ct,Fe,$t="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",Mt,Ft,Ht,Q,Ge,el="Co-benefits:",Nt,Pt,Ze,Ot,Bt,we,tl='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',Rt,He,Ve,ht,Ne,$e,Ut,ll;t=new Yl({});function Nl(h,C){return nt.includes(h[19])?As:Ls}let et=Nl(l)(l);function Pl(h,C){return nt.includes(h[19])?ws:Ss}let tt=Pl(l)(l);function Ol(h,C){return nt.includes(h[19])?Is:Vs}let lt=Ol(l)(l);function Bl(h,C){return nt.includes(h[19])?Cs:Ts}let st=Bl(l)(l),Y=l[17]&&Il(l);function sl(h,C){return h[3]==h[1]?Fs:Ms}let pt=sl(l),be=pt(l),K=l[15]&&Tl(l),xe=kt(At),W=[];for(let h=0;h<xe.length;h+=1)W[h]=Ml(Vl(l,xe,h));let ze=kt(At),j=[];for(let h=0;h<ze.length;h+=1)j[h]=Fl(wl(l,ze,h));return Ne=new _s({}),{c(){vl(t.$$.fragment),e=E(),s=u("div"),n=u("div"),a=u("div"),o=u("div"),v=u("p"),v.textContent=p,_=E(),A=u("div"),y=u("h1"),b=D(l[22]),F=E(),w=u("p"),H=D(l[21]),B=E(),P=u("div"),et.c(),M=E(),g=u("div"),V=u("p"),tt.c(),I=E(),O=u("p"),lt.c(),G=E(),q=u("p"),st.c(),ae=E(),$=u("button"),Ee=D(ie),U=E(),Y&&Y.c(),ee=E(),ke=u("div"),ne=u("div"),pe=u("div"),pe.innerHTML=ct,le=E(),J=u("div"),z=u("div"),re=u("h3"),Re=D(l[20]),je=D(" against per capita co-benefit values (£, thousand)"),De=E(),oe=u("p"),se=D(`Each point in the chart below represents a UK 
                        `),be.c(),Ue=E(),ve=u("div"),ve.innerHTML=ft,qe=E(),Le=u("div"),Ye=E(),x=u("div"),_e=u("h3"),Ke=D(l[20]),Xe=D(" at LSOA level"),Je=E(),me=u("p"),me.textContent=ut,Qe=E(),ge=u("div"),ge.innerHTML=c,N=E(),K&&K.c(),R=E(),ce=u("div"),dt=E(),Ae=u("div"),Me=u("div"),Me.innerHTML=Qt,wt=E(),fe=u("div"),X=u("div"),Se=u("h3"),Vt=D(`Plotting 
                    
                    `),It=D(Zt),Tt=D(`
                
                against the gain/loss (£, thousand) per capita for each co-benefit`),Ct=E(),Fe=u("p"),Fe.textContent=$t,Mt=E(),Ft=u("br"),Ht=E(),Q=u("div"),Ge=u("strong"),Ge.textContent=el,Nt=u("br"),Pt=D(`Expand for detailed explanation
                    `),Ze=u("div"),Ot=E();for(let h=0;h<W.length;h+=1)W[h].c();Bt=E(),we=u("div"),we.innerHTML=tl,Rt=E(),He=u("div"),Ve=u("div");for(let h=0;h<j.length;h+=1)j[h].c();ht=E(),vl(Ne.$$.fragment),this.h()},l(h){_l(t.$$.fragment,h),e=k(h),s=d(h,"DIV",{class:!0});var C=m(s);n=d(C,"DIV",{class:!0});var S=m(n);a=d(S,"DIV",{class:!0});var te=m(a);o=d(te,"DIV",{class:!0});var vt=m(o);v=d(vt,"P",{class:!0,"data-svelte-h":!0}),Z(v)!=="svelte-16ymxs7"&&(v.textContent=p),_=k(vt),A=d(vt,"DIV",{class:!0});var _t=m(A);y=d(_t,"H1",{class:!0});var al=m(y);b=L(al,l[22]),al.forEach(r),F=k(_t),w=d(_t,"P",{class:!0});var il=m(w);H=L(il,l[21]),il.forEach(r),_t.forEach(r),vt.forEach(r),B=k(te),P=d(te,"DIV",{class:!0});var nl=m(P);et.l(nl),nl.forEach(r),M=k(te),g=d(te,"DIV",{class:!0});var We=m(g);V=d(We,"P",{class:!0});var rl=m(V);tt.l(rl),rl.forEach(r),I=k(We),O=d(We,"P",{class:!0});var ol=m(O);lt.l(ol),ol.forEach(r),G=k(We),q=d(We,"P",{class:!0});var cl=m(q);st.l(cl),cl.forEach(r),We.forEach(r),te.forEach(r),S.forEach(r),ae=k(C),$=d(C,"BUTTON",{});var fl=m($);Ee=L(fl,ie),fl.forEach(r),U=k(C),Y&&Y.l(C),ee=k(C),ke=d(C,"DIV",{class:!0});var ul=m(ke);ne=d(ul,"DIV",{id:!0});var mt=m(ne);pe=d(mt,"DIV",{class:!0,"data-svelte-h":!0}),Z(pe)!=="svelte-ll1i43"&&(pe.innerHTML=ct),le=k(mt),J=d(mt,"DIV",{id:!0,class:!0});var gt=m(J);z=d(gt,"DIV",{class:!0});var Ie=m(z);re=d(Ie,"H3",{class:!0});var Gt=m(re);Re=L(Gt,l[20]),je=L(Gt," against per capita co-benefit values (£, thousand)"),Gt.forEach(r),De=k(Ie),oe=d(Ie,"P",{class:!0});var xt=m(oe);se=L(xt,`Each point in the chart below represents a UK 
                        `),be.l(xt),xt.forEach(r),Ue=k(Ie),ve=d(Ie,"DIV",{class:!0,"data-svelte-h":!0}),Z(ve)!=="svelte-tg5ofw"&&(ve.innerHTML=ft),qe=k(Ie),Le=d(Ie,"DIV",{class:!0}),m(Le).forEach(r),Ie.forEach(r),Ye=k(gt),x=d(gt,"DIV",{class:!0});var ue=m(x);_e=d(ue,"H3",{class:!0});var zt=m(_e);Ke=L(zt,l[20]),Xe=L(zt," at LSOA level"),zt.forEach(r),Je=k(ue),me=d(ue,"P",{class:!0,"data-svelte-h":!0}),Z(me)!=="svelte-1ask2se"&&(me.textContent=ut),Qe=k(ue),ge=d(ue,"DIV",{class:!0,"data-svelte-h":!0}),Z(ge)!=="svelte-7b2hds"&&(ge.innerHTML=c),N=k(ue),K&&K.l(ue),R=k(ue),ce=d(ue,"DIV",{id:!0,class:!0}),m(ce).forEach(r),ue.forEach(r),gt.forEach(r),mt.forEach(r),ul.forEach(r),dt=k(C),Ae=d(C,"DIV",{id:!0});var bt=m(Ae);Me=d(bt,"DIV",{class:!0,"data-svelte-h":!0}),Z(Me)!=="svelte-1av3fse"&&(Me.innerHTML=Qt),wt=k(bt),fe=d(bt,"DIV",{id:!0,class:!0,style:!0});var yt=m(fe);X=d(yt,"DIV",{id:!0,class:!0});var de=m(X);Se=d(de,"H3",{class:!0});var Et=m(Se);Vt=L(Et,`Plotting 
                    
                    `),It=L(Et,Zt),Tt=L(Et,`
                
                against the gain/loss (£, thousand) per capita for each co-benefit`),Et.forEach(r),Ct=k(de),Fe=d(de,"P",{class:!0,"data-svelte-h":!0}),Z(Fe)!=="svelte-1h97e3k"&&(Fe.textContent=$t),Mt=k(de),Ft=d(de,"BR",{}),Ht=k(de),Q=d(de,"DIV",{id:!0,class:!0});var Pe=m(Q);Ge=d(Pe,"STRONG",{"data-svelte-h":!0}),Z(Ge)!=="svelte-1qu96kx"&&(Ge.textContent=el),Nt=d(Pe,"BR",{}),Pt=L(Pe,`Expand for detailed explanation
                    `),Ze=d(Pe,"DIV",{style:!0}),m(Ze).forEach(r),Ot=k(Pe);for(let Oe=0;Oe<W.length;Oe+=1)W[Oe].l(Pe);Pe.forEach(r),Bt=k(de),we=d(de,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),Z(we)!=="svelte-11g4vkg"&&(we.innerHTML=tl),de.forEach(r),Rt=k(yt),He=d(yt,"DIV",{id:!0,class:!0});var dl=m(He);Ve=d(dl,"DIV",{id:!0,class:!0});var hl=m(Ve);for(let Oe=0;Oe<j.length;Oe+=1)j[Oe].l(hl);hl.forEach(r),dl.forEach(r),yt.forEach(r),bt.forEach(r),C.forEach(r),ht=k(h),_l(Ne.$$.fragment,h),this.h()},h(){f(v,"class","page-subtitle svelte-10c07ly"),f(y,"class","page-title svelte-10c07ly"),f(w,"class","definition"),f(A,"class","title-container"),f(o,"class","header-text svelte-10c07ly"),f(P,"class","header-vis svelte-10c07ly"),f(V,"class","definition-stat svelte-10c07ly"),f(O,"class","definition-stat svelte-10c07ly"),f(q,"class","definition-stat svelte-10c07ly"),f(g,"class","header-stats svelte-10c07ly"),f(a,"class","header-content svelte-10c07ly"),f(n,"class","section header svelte-10c07ly"),f(pe,"class","section-header"),f(re,"class","component-title"),f(oe,"class","description"),f(ve,"class","aggregation-icon-container2 svelte-10c07ly"),f(Le,"class","plot svelte-10c07ly"),f(z,"class","component column"),f(_e,"class","component-title"),f(me,"class","description"),f(ge,"class","aggregation-icon-container2 svelte-10c07ly"),f(ce,"id","map"),f(ce,"class","svelte-10c07ly"),f(x,"class","component column"),f(J,"id","vis-block"),f(J,"class","svelte-10c07ly"),f(ne,"id","overview"),f(ke,"class","section"),f(Me,"class","section-header"),f(Se,"class","component-title"),f(Fe,"class","explanation"),ye(Ze,"height","0.8em"),f(Q,"id","main-legend"),f(Q,"class","legend-box svelte-10c07ly"),f(we,"id","se-disclaimer"),f(we,"class","disclaimer-box svelte-10c07ly"),f(X,"id","se-title"),f(X,"class","svelte-10c07ly"),f(Ve,"id","multiple-plots"),f(Ve,"class","svelte-10c07ly"),f(He,"id","multiple-comp"),f(He,"class","svelte-10c07ly"),f(fe,"id","se-block"),f(fe,"class","component svelte-10c07ly"),ye(fe,"margin-left","1rem"),f(Ae,"id","compare"),f(s,"class","page-container")},m(h,C){ml(t,h,C),T(h,e,C),T(h,s,C),i(s,n),i(n,a),i(a,o),i(o,v),i(o,_),i(o,A),i(A,y),i(y,b),i(A,F),i(A,w),i(w,H),i(a,B),i(a,P),et.m(P,null),i(a,M),i(a,g),i(g,V),tt.m(V,null),i(g,I),i(g,O),lt.m(O,null),i(g,G),i(g,q),st.m(q,null),i(s,ae),i(s,$),i($,Ee),i(s,U),Y&&Y.m(s,null),i(s,ee),i(s,ke),i(ke,ne),i(ne,pe),i(ne,le),i(ne,J),i(J,z),i(z,re),i(re,Re),i(re,je),i(z,De),i(z,oe),i(oe,se),be.m(oe,null),i(z,Ue),i(z,ve),i(z,qe),i(z,Le),l[38](Le),i(J,Ye),i(J,x),i(x,_e),i(_e,Ke),i(_e,Xe),i(x,Je),i(x,me),i(x,Qe),i(x,ge),i(x,N),K&&K.m(x,null),i(x,R),i(x,ce),l[39](ce),i(s,dt),i(s,Ae),i(Ae,Me),i(Ae,wt),i(Ae,fe),i(fe,X),i(X,Se),i(Se,Vt),i(Se,It),i(Se,Tt),i(X,Ct),i(X,Fe),i(X,Mt),i(X,Ft),i(X,Ht),i(X,Q),i(Q,Ge),i(Q,Nt),i(Q,Pt),i(Q,Ze),i(Q,Ot);for(let S=0;S<W.length;S+=1)W[S]&&W[S].m(Q,null);i(X,Bt),i(X,we),i(fe,Rt),i(fe,He),i(He,Ve);for(let S=0;S<j.length;S+=1)j[S]&&j[S].m(Ve,null);l[43](s),T(h,ht,C),ml(Ne,h,C),$e=!0,Ut||(ll=Hl($,"click",l[26]),Ut=!0)},p(h,C){if(et.p(h,C),tt.p(h,C),lt.p(h,C),st.p(h,C),(!$e||C[0]&4)&&ie!==(ie=h[2]?"Switch to LAD level data":"Switch to LSOA level data")&&Te(Ee,ie),h[17]?Y?Y.p(h,C):(Y=Il(h),Y.c(),Y.m(s,ee)):Y&&(Y.d(1),Y=null),pt!==(pt=sl(h))&&(be.d(1),be=pt(h),be&&(be.c(),be.m(oe,null))),h[15]?K?K.p(h,C):(K=Tl(h),K.c(),K.m(x,R)):K&&(K.d(1),K=null),C[0]&33816576){xe=kt(At);let S;for(S=0;S<xe.length;S+=1){const te=Vl(h,xe,S);W[S]?W[S].p(te,C):(W[S]=Ml(te),W[S].c(),W[S].m(Q,null))}for(;S<W.length;S+=1)W[S].d(1);W.length=xe.length}if(C[0]&524545){ze=kt(At);let S;for(S=0;S<ze.length;S+=1){const te=wl(h,ze,S);j[S]?j[S].p(te,C):(j[S]=Fl(te),j[S].c(),j[S].m(Ve,null))}for(;S<j.length;S+=1)j[S].d(1);j.length=ze.length}},i(h){$e||(gl(t.$$.fragment,h),gl(Ne.$$.fragment,h),$e=!0)},o(h){bl(t.$$.fragment,h),bl(Ne.$$.fragment,h),$e=!1},d(h){h&&(r(e),r(s),r(ht)),yl(t,h),et.d(),tt.d(),lt.d(),st.d(),Y&&Y.d(),be.d(),l[38](null),K&&K.d(),l[39](null),pl(W,h),pl(j,h),l[43](null),yl(Ne,h),Ut=!1,ll()}}}let he=400;function Ce(l,t){return t==="£"?`${t}${l}`:`${l} ${t}`}function Rs(l,t,e){let s,n,a,o,v,p,_={},A={},y,b,F,w,H=!1,B,P=!1,M,g,V,I,O,G,q,ae,$,ie,{data:Ee}=t;const U=Ee.SEF;console.log("SEF ",U);const ee=ss.find(c=>c.id===U)?.id??U,ke=as.find(c=>c.id===U)?.label??U,ne=is.find(c=>c.id===U)?.def??U,pe=ns.find(c=>c.id===U)?.description??U,ct=rs.find(c=>c.id===U)?.short_units??U,le=os.find(c=>c.id===U)?.units??U;let J,z,re=!1,Re="";const je=["overview","compare"];function De(){const c=window.scrollY;e(17,re=c>250);for(const N of je){const R=document.getElementById(N);if(!R)continue;const ce=R.getBoundingClientRect();if(ce.top<=150&&ce.bottom>=150){Re!==N&&Yt.capture("section entered (sef)",{section_name:N}),Re=N;break}}}Ul(()=>(window.addEventListener("scroll",De),De(),()=>window.removeEventListener("scroll",De))),Gl(()=>{window.removeEventListener("scroll",De)});async function oe(){e(28,y=await it(us(U))),console.log("totals",y),e(1,w=await it(ds(U))),console.log("LAD data 1 ",w),e(29,b=await it(hs(U))),console.log("by cobens",b),e(30,B=await it(ps(U))),console.log("LADsef",B),F=await it(vs()),console.log("per_capita_data",F),Kt.forEach(c=>{e(29,b[c]=+b[c],b)}),e(31,P=!0)}oe().then(()=>{e(15,J=new ls(y,"LSOA",z,"val",!1,"Lookup_Value",!1)),J.initMap()});let se=new Set;function Ue(c){se.has(c)?se.delete(c):se.add(c),e(18,se=new Set(se))}function ve(){e(2,H=!H)}function ft(){const c=kl(y,N=>N.val)??0;Ll(Sl().thresholds(20).value(N=>N.val)(y),N=>N.length),e(5,o.innerHTML="",o),o?.append(at({height:he/1.9,width:he*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${le}`},y:{label:s===w?"No. of LADs":"No. of LSOAs",labelArrow:!1,domain:s===w?[0,100]:[0,1e4]},style:{fontSize:"16px"},marks:[$l(s,bs({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),Dt([c],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:c,label:"Average"}},tip:{format:{average:N=>`${N.toFixed(2)}`,x:!1}}}),Lt({label:`${le}`,labelArrow:!1,labelAnchor:"center"})]}))}function qe(){Dl(s,R=>R.val),Ll(Sl().thresholds(20).value(R=>R.val)(s),R=>R.length);const c=Al[ee],N=c?Object.keys(c).map(Number):s.filter(R=>R.SEFMAME==ee).map(R=>R.SE);p?.append(at({height:he/1.9,width:he*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:ee==="Typology"?80:50,x:{domain:N,label:fs(ee),tickFormat:R=>c?.[R]??R,tickRotate:ee==="Typology"?-10:0},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[ys(s,es({y:"count"},{x:"val",fill:"black",opacity:.5,tooltip:!0}))]}))}function Le(){e(6,v.innerHTML="",v),v?.append(at({height:he*1.5,width:he*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[jt([0],{stroke:"#333",strokeWidth:1.25}),Dt([0],{stroke:"#333",strokeWidth:.75}),Xt(s,{x:"val",y:c=>c.total_per_capita*1e3,fill:c=>c.total_per_capita<0?"#BD210E":"#242424",r:s===w?4:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${le}`},value:{value:c=>c.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),qt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),Lt({label:`${le}`,labelArrow:!1,labelAnchor:"center"})]}))}function Ye(){Kt.forEach(c=>{let N;N=at({height:he,width:he,marginLeft:c==="Excess heat"?80:60,marginTop:40,marginRight:10,marginBottom:50,x:{label:null},y:{label:null},style:{fontSize:"14px"},marks:[jt([0],{stroke:"#333",strokeWidth:1.25}),Dt([0],{stroke:"#333",strokeWidth:.75}),Xt(n.filter(R=>R.co_benefit_type==c),{x:"val",y:"total",fill:rt(c),fillOpacity:.5,r:n===B?3.5:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),qt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"top"}),Lt({label:`${le}`,labelArrow:!1,labelAnchor:"center"})]}),_[c]?.append(N)})}function x(){Kt.forEach(c=>{let N;N=at({height:he,width:he,marginLeft:60,marginTop:40,marginRight:10,marginBottom:50,x:{label:null},y:{label:null},style:{fontSize:"14px"},marks:[jt([0],{stroke:"#333",strokeWidth:1.25}),Dt([0],{stroke:"#333",strokeWidth:.75}),Xt(n.filter(R=>R.co_benefit_type==c),{x:"val",y:"total",fill:rt(c),fillOpacity:.5,r:n===B?3.5:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),qt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"top"}),Lt({label:`${le}`,labelArrow:!1,labelAnchor:"center"})]}),A[c]?.append(N)})}function _e(c){Be[c?"unshift":"push"](()=>{p=c,e(7,p)})}function Ke(c){Be[c?"unshift":"push"](()=>{o=c,e(5,o)})}function Xe(c){Be[c?"unshift":"push"](()=>{v=c,e(6,v)})}function Je(c){Be[c?"unshift":"push"](()=>{z=c,e(16,z)})}const me=c=>{const N=se.has(c.id);Ue(c.id),N?Yt.capture("cobenefit closed",{cobenefit:c.label}):Yt.capture("cobenefit opened",{cobenefit:c.label})};function ut(c,N){Be[c?"unshift":"push"](()=>{A[N.id]=c,e(8,A)})}function Qe(c,N){Be[c?"unshift":"push"](()=>{_[N.id]=c,e(0,_)})}function ge(c){Be[c?"unshift":"push"](()=>{a=c,e(4,a)})}return l.$$set=c=>{"data"in c&&e(27,Ee=c.data)},l.$$.update=()=>{l.$$.dirty[0]&268435462&&e(3,s=H?y:w),l.$$.dirty[0]&1610612740&&(n=H?b:B),l.$$.dirty[0]&8&&e(9,M=s?(kl(s,c=>c.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&8&&e(34,$=s?Dl(s,c=>c.val):null),l.$$.dirty[1]&24&&e(10,g=$!=null&&ie?ie[$]??$:"N/A"),l.$$.dirty[0]&8&&e(32,G=s?Ql(s,c=>c.val):-1),l.$$.dirty[0]&8|l.$$.dirty[1]&2&&e(13,O=G!==-1&&s?s[G].Lookup_Value?.trim():"N/A"),l.$$.dirty[0]&8|l.$$.dirty[1]&2&&e(11,V=G!==-1&&s?(s[G].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&8&&e(33,ae=s?Zl(s,c=>c.val):-1),l.$$.dirty[0]&8|l.$$.dirty[1]&4&&e(14,q=ae!==-1&&s?s[ae].Lookup_Value:"N/A"),l.$$.dirty[0]&8|l.$$.dirty[1]&4&&e(12,I=ae!==-1&&s?(s[ae].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&9|l.$$.dirty[1]&1&&(Object.values(_).forEach(c=>{c.firstChild?.remove()}),P&&s&&(Le(),qe(),x(),ft(),Ye(),x()))},e(35,ie=Al[ee]),[_,w,H,s,a,o,v,p,A,M,g,V,I,O,q,J,z,re,se,ee,ke,ne,pe,ct,le,Ue,ve,Ee,y,b,B,P,G,ae,$,ie,_e,Ke,Xe,Je,me,ut,Qe,ge]}class na extends jl{constructor(t){super(),ql(this,t,Rs,Bs,Rl,{data:27},null,[-1,-1,-1])}}export{na as component};
