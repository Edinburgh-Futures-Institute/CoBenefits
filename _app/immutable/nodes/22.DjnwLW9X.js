import{s as la,a as C,e as f,t as L,g as V,c as d,b,p as ie,d as A,f as r,q as c,A as Me,i as T,h as o,x as Tt,v as Vl,y as Jl,r as aa,F as ia,H as oa,D as sa,j as me,B as na,z as Be,n as Re}from"../chunks/scheduler.BVm0POKv.js";import{S as ra,i as ca,c as Il,b as Nl,m as ql,t as Ml,a as Pl,d as Fl}from"../chunks/index.C_bTuQvQ.js";import{N as ua,e as Rt}from"../chunks/NavigationBar.Dh5Yck7h.js";import"../chunks/transform.Db-NgJu-.js";import{aq as fa,o as xl,ar as da,as as ha,at as pa,q as st,G as _a,u as sl,w as Dt,z as Lt,x as va,y as Ol,au as nl,v as At}from"../chunks/index.DrA8R0kw.js";import{f as rl}from"../chunks/module.BDHLYmQ2.js";import{b as Gt}from"../chunks/paths.DvZz0vVF.js";import{M as ma}from"../chunks/mapUK.dFtHOa0v.js";import{p as ga,q as ba,s as ya,t as ka,u as Ea,v as Da,a as Hl,e as jt,g as La,S as Xe,w as Ut,f as Aa,x as cl,r as wa,m as Ta,n as Sa,o as Ca,d as Va}from"../chunks/globals.Bu6lVeFg.js";import{g as wt,i as Ia,h as Na,w as qa,x as Ma,r as Pa}from"../chunks/duckdb.Btv2MpRu.js";import{p as Yt}from"../chunks/per_capita.COcMrZFY.js";import{F as Fa}from"../chunks/Footer.6yP5PmeE.js";import{e as ul,a as xa,t as Bl,b as Oa,m as Ha}from"../chunks/linear.DZfyr4Dt.js";import{n as Ba}from"../chunks/nice.J2OPSXwp.js";import{t as Wa,b as Ra}from"../chunks/bin.CLltLqji.js";import{c as fl}from"../chunks/dsv.XhNTmijJ.js";import{d as zt}from"../chunks/dot.BXu9dTF1.js";var Ua=Array.prototype,za=Ua.slice;function dl(a){return()=>a}function Ga(){var a=fa,t=ul,e=Wa;function l(s){Array.isArray(s)||(s=Array.from(s));var n,u=s.length,v,P,E=new Array(u);for(n=0;n<u;++n)E[n]=a(s[n],n,s);var h=t(E),m=h[0],w=h[1],I=e(E,m,w);if(!Array.isArray(I)){const D=w,q=+I;if(t===ul&&([m,w]=Ba(m,w,q)),I=xa(m,w,q),I[0]<=m&&(P=Bl(m,w,q)),I[I.length-1]>=w)if(D>=w&&t===ul){const H=Bl(m,w,q);isFinite(H)&&(H>0?w=(Math.floor(w/H)+1)*H:H<0&&(w=(Math.ceil(w*-H)+1)/-H))}else I.pop()}for(var k=I.length,g=0,y=k;I[g]<=m;)++g;for(;I[y-1]>w;)--y;(g||y<k)&&(I=I.slice(g,y),k=y-g);var S=new Array(k+1),F;for(n=0;n<=k;++n)F=S[n]=[],F.x0=n>0?I[n-1]:m,F.x1=n<k?I[n]:w;if(isFinite(P)){if(P>0)for(n=0;n<u;++n)(v=E[n])!=null&&m<=v&&v<=w&&S[Math.min(k,Math.floor((v-m)/P))].push(s[n]);else if(P<0){for(n=0;n<u;++n)if((v=E[n])!=null&&m<=v&&v<=w){const D=Math.floor((m-v)*P);S[Math.min(k,D+(I[D]<=v))].push(s[n])}}}else for(n=0;n<u;++n)(v=E[n])!=null&&m<=v&&v<=w&&S[Oa(I,v,0,k)].push(s[n]);return S}return l.value=function(s){return arguments.length?(a=typeof s=="function"?s:dl(s),l):a},l.domain=function(s){return arguments.length?(t=typeof s=="function"?s:dl([s[0],s[1]]),l):t},l.thresholds=function(s){return arguments.length?(e=typeof s=="function"?s:dl(Array.isArray(s)?za.call(s):s),l):e},l}const Xl=""+new URL("../assets/negative.BhphYhmj.png",import.meta.url).href;function Wl(a,t,e){const l=a.slice();return l[74]=t[e],l[75]=t,l[76]=e,l}function Rl(a,t,e){const l=a.slice();return l[74]=t[e],l}function ja(a){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),b(t).forEach(r),this.h()},h(){c(t,"class","plot svelte-1qi276a")},m(e,l){T(e,t,l),a[45](t)},p:Re,d(e){e&&r(t),a[45](null)}}}function Ya(a){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),b(t).forEach(r),this.h()},h(){c(t,"class","plot svelte-1qi276a")},m(e,l){T(e,t,l),a[44](t)},p:Re,d(e){e&&r(t),a[44](null)}}}function Ka(a){let t,e,l=a[25].toLowerCase()+"",s,n,u,v,P=We(a[15],a[28])+"",E,h,m;function w(g,y){return g[7]==g[2]?Za:Xa}let I=w(a),k=I(a);return{c(){t=f("h3"),e=L("Distribution of "),s=L(l),n=L(" across the UK"),u=L(`
                    Max value: `),v=f("strong"),E=L(P),h=L(` 
                    (`),k.c(),m=L(")"),this.h()},l(g){t=d(g,"H3",{class:!0});var y=b(t);e=A(y,"Distribution of "),s=A(y,l),n=A(y," across the UK"),y.forEach(r),u=A(g,`
                    Max value: `),v=d(g,"STRONG",{});var S=b(v);E=A(S,P),S.forEach(r),h=A(g,` 
                    (`),k.l(g),m=A(g,")"),this.h()},h(){c(t,"class","component-title")},m(g,y){T(g,t,y),o(t,e),o(t,s),o(t,n),T(g,u,y),T(g,v,y),o(v,E),T(g,h,y),k.m(g,y),T(g,m,y)},p(g,y){y[0]&32768&&P!==(P=We(g[15],g[28])+"")&&me(E,P),I===(I=w(g))&&k?k.p(g,y):(k.d(1),k=I(g),k&&(k.c(),k.m(m.parentNode,m)))},d(g){g&&(r(t),r(u),r(v),r(h),r(m)),k.d(g)}}}function Ja(a){let t,e,l=a[25].toLowerCase()+"",s,n;return{c(){t=f("h3"),e=L("Distribution of "),s=L(l),n=L(" across the UK"),this.h()},l(u){t=d(u,"H3",{class:!0});var v=b(t);e=A(v,"Distribution of "),s=A(v,l),n=A(v," across the UK"),v.forEach(r),this.h()},h(){c(t,"class","component-title")},m(u,v){T(u,t,v),o(t,e),o(t,s),o(t,n)},p:Re,d(u){u&&r(t)}}}function Xa(a){let t;return{c(){t=L(a[23])},l(e){t=A(e,a[23])},m(e,l){T(e,t,l)},p(e,l){l[0]&8388608&&me(t,e[23])},d(e){e&&r(t)}}}function Za(a){let t=a[5][a[3]]+"",e;return{c(){e=L(t)},l(l){e=A(l,t)},m(l,s){T(l,e,s)},p(l,s){s[0]&40&&t!==(t=l[5][l[3]]+"")&&me(e,t)},d(l){l&&r(e)}}}function Qa(a){let t,e,l=We(a[13],a[28])+"",s;return{c(){t=L("Average value: "),e=f("strong"),s=L(l),this.h()},l(n){t=A(n,"Average value: "),e=d(n,"STRONG",{style:!0});var u=b(e);s=A(u,l),u.forEach(r),this.h()},h(){Me(e,"color","#BD210E")},m(n,u){T(n,t,u),T(n,e,u),o(e,s)},p(n,u){u[0]&8192&&l!==(l=We(n[13],n[28])+"")&&me(s,l)},d(n){n&&(r(t),r(e))}}}function $a(a){let t;return{c(){t=L(" ")},l(e){t=A(e," ")},m(e,l){T(e,t,l)},p:Re,d(e){e&&r(t)}}}function ei(a){let t,e,l=We(a[16],a[28])+"",s,n,u;function v(h,m){return h[7]==h[2]?ai:li}let P=v(a),E=P(a);return{c(){t=L("Min value: "),e=f("strong"),s=L(l),n=L(` 
                    (`),E.c(),u=L(")")},l(h){t=A(h,"Min value: "),e=d(h,"STRONG",{});var m=b(e);s=A(m,l),m.forEach(r),n=A(h,` 
                    (`),E.l(h),u=A(h,")")},m(h,m){T(h,t,m),T(h,e,m),o(e,s),T(h,n,m),E.m(h,m),T(h,u,m)},p(h,m){m[0]&65536&&l!==(l=We(h[16],h[28])+"")&&me(s,l),P===(P=v(h))&&E?E.p(h,m):(E.d(1),E=P(h),E&&(E.c(),E.m(u.parentNode,u)))},d(h){h&&(r(t),r(e),r(n),r(u)),E.d(h)}}}function ti(a){let t,e,l=We(a[14],a[28])+"",s;return{c(){t=L("Most common category: "),e=f("strong"),s=L(l),this.h()},l(n){t=A(n,"Most common category: "),e=d(n,"STRONG",{style:!0});var u=b(e);s=A(u,l),u.forEach(r),this.h()},h(){Me(e,"color","#BD210E")},m(n,u){T(n,t,u),T(n,e,u),o(e,s)},p(n,u){u[0]&16384&&l!==(l=We(n[14],n[28])+"")&&me(s,l)},d(n){n&&(r(t),r(e))}}}function li(a){let t;return{c(){t=L(a[22])},l(e){t=A(e,a[22])},m(e,l){T(e,t,l)},p(e,l){l[0]&4194304&&me(t,e[22])},d(e){e&&r(t)}}}function ai(a){let t=a[5][a[4]]+"",e;return{c(){e=L(t)},l(l){e=A(l,t)},m(l,s){T(l,e,s)},p(l,s){s[0]&48&&t!==(t=l[5][l[4]]+"")&&me(e,t)},d(l){l&&r(e)}}}function ii(a){let t=a[6]?"Currently the data for this page is grouped by local authorities (LADs), click here to switch to data zones (LSOAs).":"Currently the data for this page is grouped by data zones (LSOAs), click here to switch to local authorities (LADs).",e;return{c(){e=L(t)},l(l){e=A(l,t)},m(l,s){T(l,e,s)},p(l,s){s[0]&64&&t!==(t=l[6]?"Currently the data for this page is grouped by local authorities (LADs), click here to switch to data zones (LSOAs).":"Currently the data for this page is grouped by data zones (LSOAs), click here to switch to local authorities (LADs).")&&me(e,t)},d(l){l&&r(e)}}}function oi(a){let t,e;return{c(){t=f("span"),e=L(`
                        Loading...`),this.h()},l(l){t=d(l,"SPAN",{class:!0}),b(t).forEach(r),e=A(l,`
                        Loading...`),this.h()},h(){c(t,"class","spinner svelte-1qi276a")},m(l,s){T(l,t,s),T(l,e,s)},p:Re,d(l){l&&(r(t),r(e))}}}function Ul(a){let t,e,l,s,n,u,v,P,E,h="Download Page Data",m,w;function I(y,S){return y[21]?ni:si}let k=I(a),g=k(a);return{c(){t=f("div"),e=f("div"),l=f("span"),s=L(a[25]),n=L(" >>"),u=C(),v=f("button"),g.c(),P=C(),E=f("button"),E.textContent=h,this.h()},l(y){t=d(y,"DIV",{class:!0});var S=b(t);e=d(S,"DIV",{class:!0});var F=b(e);l=d(F,"SPAN",{class:!0});var D=b(l);s=A(D,a[25]),n=A(D," >>"),D.forEach(r),u=V(F),v=d(F,"BUTTON",{class:!0});var q=b(v);g.l(q),q.forEach(r),F.forEach(r),P=V(S),E=d(S,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ie(E)!=="svelte-vn9rs8"&&(E.textContent=h),S.forEach(r),this.h()},h(){c(l,"class","mini-header-text"),c(v,"class","switch-button-sticky svelte-1qi276a"),v.disabled=a[21],c(e,"class","mini-header-content"),c(E,"type","button"),c(E,"class","data-btn-sticky"),c(t,"class","mini-header")},m(y,S){T(y,t,S),o(t,e),o(e,l),o(l,s),o(l,n),o(e,u),o(e,v),g.m(v,null),o(t,P),o(t,E),m||(w=[Tt(v,"click",a[31]),Tt(E,"click",a[32])],m=!0)},p(y,S){k===(k=I(y))&&g?g.p(y,S):(g.d(1),g=k(y),g&&(g.c(),g.m(v,null))),S[0]&2097152&&(v.disabled=y[21])},d(y){y&&r(t),g.d(),m=!1,Jl(w)}}}function si(a){let t=a[6]?"Currently the data for this page is grouped by local authorities (LADs), click here to switch to data zones (LSOAs).":"Currently the data for this page is grouped by data zones (LSOAs), click here to switch to local authorities (LADs).",e;return{c(){e=L(t)},l(l){e=A(l,t)},m(l,s){T(l,e,s)},p(l,s){s[0]&64&&t!==(t=l[6]?"Currently the data for this page is grouped by local authorities (LADs), click here to switch to data zones (LSOAs).":"Currently the data for this page is grouped by data zones (LSOAs), click here to switch to local authorities (LADs).")&&me(e,t)},d(l){l&&r(e)}}}function ni(a){let t,e;return{c(){t=f("span"),e=L(`
                Loading...`),this.h()},l(l){t=d(l,"SPAN",{class:!0}),b(t).forEach(r),e=A(l,`
                Loading...`),this.h()},h(){c(t,"class","spinner svelte-1qi276a")},m(l,s){T(l,t,s),T(l,e,s)},p:Re,d(l){l&&(r(t),r(e))}}}function ri(a){let t;return{c(){t=L("data zone (LSOA).")},l(e){t=A(e,"data zone (LSOA).")},m(e,l){T(e,t,l)},d(e){e&&r(t)}}}function ci(a){let t;return{c(){t=L("local authority (LAD).")},l(e){t=A(e,"local authority (LAD).")},m(e,l){T(e,t,l)},d(e){e&&r(t)}}}function zl(a){let t,e=`<img class="aggregation-icon" src="${Xl}" alt="icon"/> <span class="tooltip-text-neg svelte-1qi276a">This chart includes negative values.</span>`;return{c(){t=f("div"),t.innerHTML=e,this.h()},l(l){t=d(l,"DIV",{class:!0,"data-svelte-h":!0}),ie(t)!=="svelte-1foj16e"&&(t.innerHTML=e),this.h()},h(){c(t,"class","tooltip-wrapper")},m(l,s){T(l,t,s)},d(l){l&&r(t)}}}function ui(a){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),b(t).forEach(r),this.h()},h(){c(t,"class","plot svelte-1qi276a")},m(e,l){T(e,t,l),a[47](t)},p:Re,d(e){e&&r(t),a[47](null)}}}function fi(a){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),b(t).forEach(r),this.h()},h(){c(t,"class","plot svelte-1qi276a")},m(e,l){T(e,t,l),a[46](t)},p:Re,d(e){e&&r(t),a[46](null)}}}function Gl(a){let t,e,l=a[17].legend(a[29]).outerHTML+"";return{c(){t=f("div"),e=new oa(!1),this.h()},l(s){t=d(s,"DIV",{id:!0});var n=b(t);e=sa(n,!1),n.forEach(r),this.h()},h(){e.a=null,c(t,"id","legend")},m(s,n){T(s,t,n),e.m(l,t)},p(s,n){n[0]&131072&&l!==(l=s[17].legend(s[29]).outerHTML+"")&&e.p(l)},d(s){s&&r(t)}}}function jl(a){let t,e,l,s,n=a[74].def+"",u,v,P,E,h,m=a[74].id+"",w,I;return{c(){t=f("div"),e=f("div"),l=f("div"),s=C(),u=L(n),v=C(),P=f("br"),E=C(),h=f("a"),w=L(m),I=L(" report page"),this.h()},l(k){t=d(k,"DIV",{class:!0});var g=b(t);e=d(g,"DIV",{class:!0});var y=b(e);l=d(y,"DIV",{style:!0}),b(l).forEach(r),s=V(y),u=A(y,n),v=V(y),P=d(y,"BR",{}),E=V(y),h=d(y,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0});var S=b(h);w=A(S,m),I=A(S," report page"),S.forEach(r),y.forEach(r),g.forEach(r),this.h()},h(){Me(l,"height","0.8em"),c(h,"class","link"),c(h,"href",Gt+"/cobenefit?cobenefit="+a[74].id),c(h,"target","_blank"),c(h,"rel","noopener noreferrer"),Me(h,"color",jt(a[74].id)),Me(h,"text-decoration","underline"),c(e,"class","legend-description svelte-1qi276a"),c(t,"class","legend-description-box svelte-1qi276a")},m(k,g){T(k,t,g),o(t,e),o(e,l),o(e,s),o(e,u),o(e,v),o(e,P),o(e,E),o(e,h),o(h,w),o(h,I)},d(k){k&&r(t)}}}function Yl(a){let t,e,l,s,n,u=a[74].label+"",v,P,E,h,m=a[20].has(a[74].id)?"▲":"▼",w,I,k=a[20].has(a[74].id),g,y,S;function F(){return a[49](a[74])}let D=k&&jl(a);return{c(){t=f("div"),e=f("div"),l=f("span"),s=C(),n=f("span"),v=L(u),E=C(),h=f("span"),w=L(m),I=C(),D&&D.c(),g=C(),this.h()},l(q){t=d(q,"DIV",{class:!0});var H=b(t);e=d(H,"DIV",{class:!0,style:!0});var G=b(e);l=d(G,"SPAN",{class:!0,style:!0}),b(l).forEach(r),s=V(G),n=d(G,"SPAN",{class:!0});var Le=b(n);v=A(Le,u),Le.forEach(r),E=V(G),h=d(G,"SPAN",{class:!0});var K=b(h);w=A(K,m),K.forEach(r),G.forEach(r),I=V(H),D&&D.l(H),g=V(H),H.forEach(r),this.h()},h(){c(l,"class","legend-color svelte-1qi276a"),Me(l,"background-color",jt(a[74].id)),c(n,"class",P="legend-text "+(a[20].has(a[74].id)?"expanded":"")+" svelte-1qi276a"),c(h,"class","toggle-icon svelte-1qi276a"),c(e,"class","legend-header svelte-1qi276a"),Me(e,"cursor","pointer"),c(t,"class","legend-item svelte-1qi276a")},m(q,H){T(q,t,H),o(t,e),o(e,l),o(e,s),o(e,n),o(n,v),o(e,E),o(e,h),o(h,w),o(t,I),D&&D.m(t,null),o(t,g),y||(S=Tt(e,"click",F),y=!0)},p(q,H){a=q,H[0]&1048576&&P!==(P="legend-text "+(a[20].has(a[74].id)?"expanded":"")+" svelte-1qi276a")&&c(n,"class",P),H[0]&1048576&&m!==(m=a[20].has(a[74].id)?"▲":"▼")&&me(w,m),H[0]&1048576&&(k=a[20].has(a[74].id)),k?D||(D=jl(a),D.c(),D.m(t,g)):D&&(D.d(1),D=null)},d(q){q&&r(t),D&&D.d(),y=!1,S()}}}function di(a){let t,e=`<img class="sm-icon svelte-1qi276a" src="${Yt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each area.</span>`;return{c(){t=f("div"),t.innerHTML=e,this.h()},l(l){t=d(l,"DIV",{class:!0,"data-svelte-h":!0}),ie(t)!=="svelte-1lqh0bd"&&(t.innerHTML=e),this.h()},h(){c(t,"class","tooltip-wrapper")},m(l,s){T(l,t,s)},d(l){l&&r(t)}}}function hi(a){let t,e=`<img class="sm-icon svelte-1qi276a" src="${Yt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each area.</span>`,l,s,n=`<img class="sm-icon svelte-1qi276a" src="${Xl}" alt="icon"/> <span class="tooltip-text-neg svelte-1qi276a">This chart includes negative values.</span>`;return{c(){t=f("div"),t.innerHTML=e,l=C(),s=f("div"),s.innerHTML=n,this.h()},l(u){t=d(u,"DIV",{class:!0,"data-svelte-h":!0}),ie(t)!=="svelte-1tqucbd"&&(t.innerHTML=e),l=V(u),s=d(u,"DIV",{class:!0,"data-svelte-h":!0}),ie(s)!=="svelte-10ijo5a"&&(s.innerHTML=n),this.h()},h(){c(t,"class","tooltip-wrapper"),c(s,"class","tooltip-wrapper")},m(u,v){T(u,t,v),T(u,l,v),T(u,s,v)},d(u){u&&(r(t),r(l),r(s))}}}function pi(a){let t,e=a[74];const l=()=>a[51](t,e),s=()=>a[51](null,e);return{c(){t=f("div"),this.h()},l(n){t=d(n,"DIV",{class:!0}),b(t).forEach(r),this.h()},h(){c(t,"class","plot svelte-1qi276a")},m(n,u){T(n,t,u),l()},p(n,u){a=n,e!==a[74]&&(s(),e=a[74],l())},d(n){n&&r(t),s()}}}function _i(a){let t,e=a[74];const l=()=>a[50](t,e),s=()=>a[50](null,e);return{c(){t=f("div"),this.h()},l(n){t=d(n,"DIV",{class:!0}),b(t).forEach(r),this.h()},h(){c(t,"class","plot svelte-1qi276a")},m(n,u){T(n,t,u),l()},p(n,u){a=n,e!==a[74]&&(s(),e=a[74],l())},d(n){n&&r(t),s()}}}function Kl(a){let t,e,l,s,n,u,v=a[74].label+"",P,E,h,m;function w(F,D){return F[74].id=="Longer travel times"||F[74].id=="Road repairs"||F[74].id=="Road safety"||F[74].id=="Congestion"||F[74].id=="Excess heat"?hi:di}let k=w(a)(a);function g(F,D){return Xe.includes(F[24])?_i:pi}let S=g(a)(a);return{c(){t=f("div"),e=f("div"),l=f("img"),n=C(),u=f("h3"),P=L(v),E=C(),k.c(),h=C(),S.c(),m=C(),this.h()},l(F){t=d(F,"DIV",{class:!0});var D=b(t);e=d(D,"DIV",{class:!0});var q=b(e);l=d(q,"IMG",{class:!0,src:!0,alt:!0}),n=V(q),u=d(q,"H3",{class:!0});var H=b(u);P=A(H,v),H.forEach(r),E=V(q),k.l(q),q.forEach(r),h=V(D),S.l(D),m=V(D),D.forEach(r),this.h()},h(){c(l,"class","sm-cb-icon svelte-1qi276a"),na(l.src,s=La(a[74].id))||c(l,"src",s),c(l,"alt",a[74].label+" icon"),c(u,"class","chart-component-title"),c(e,"class","component-chart-title-container svelte-1qi276a"),c(t,"class","plot-container svelte-1qi276a")},m(F,D){T(F,t,D),o(t,e),o(e,l),o(e,n),o(e,u),o(u,P),o(e,E),k.m(e,null),o(t,h),S.m(t,null),o(t,m)},p(F,D){S.p(F,D)},d(F){F&&r(t),k.d(),S.d()}}}function vi(a){let t,e,l,s,n,u,v,P="Socio-Economic Factor Report",E,h,m,w,I,k,g,y,S,F,D,q="Download Page Data",H,G,Le,K,Ae,Ze,J,ge,oe,be,ne,le,Ue,R,p,ye,we,St='<p class="section-subtitle svelte-1qi276a">Overview</p>',nt,U,X,re,Qe,$e,rt,B,Z,Pe,pe,ce,ze=`<img class="aggregation-icon" src="${Yt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each area.</span>`,ct,_e,et,z,Te,Se,ut,ft,Ce,Ct="Scroll for zooming in and out.",dt,Ve,Vt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Yt}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each area.</span></div>`,ht,tt,Ie,pt,ke,Ne,It='<p class="section-subtitle svelte-1qi276a">By Co-benefits</p>',_t,ue,i,N,M,Ge=a[25].toLowerCase()+"",Q,W,fe,$,hl="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",Kt,Jt,Xt,se,lt,pl="Co-benefits:",Zt,Qt,vt,$t,el,Fe,_l='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',tl,je,xe,Nt,Ye,mt,ll,vl;t=new ua({});function Zl(_,O){return Xe.includes(_[24])?Ya:ja}let gt=Zl(a)(a);function Ql(_,O){return Xe.includes(_[24])?Ja:Ka}let bt=Ql(a)(a);function $l(_,O){return Xe.includes(_[24])?$a:Qa}let yt=$l(a)(a);function ea(_,O){return Xe.includes(_[24])?ti:ei}let kt=ea(a)(a);function ml(_,O){return _[21]?oi:ii}let qt=ml(a),ve=qt(a),ee=a[19]&&Ul(a);function gl(_,O){return _[7]==_[2]?ci:ri}let Mt=gl(a),qe=Mt(a),ae=!a[6]&&zl();function ta(_,O){return Xe.includes(_[24])?fi:ui}let Et=ta(a)(a),te=a[17]&&Gl(a),at=Rt(Ut),j=[];for(let _=0;_<at.length;_+=1)j[_]=Yl(Rl(a,at,_));let it=Rt(Ut),Y=[];for(let _=0;_<it.length;_+=1)Y[_]=Kl(Wl(a,it,_));return Ye=new Fa({}),{c(){Il(t.$$.fragment),e=C(),l=f("div"),s=f("div"),n=f("div"),u=f("div"),v=f("p"),v.textContent=P,E=C(),h=f("div"),m=f("h1"),w=L(a[27]),I=C(),k=f("p"),g=L(a[26]),y=C(),S=f("br"),F=C(),D=f("button"),D.textContent=q,H=C(),G=f("div"),gt.c(),Le=C(),K=f("div"),Ae=f("p"),bt.c(),Ze=C(),J=f("p"),yt.c(),ge=C(),oe=f("p"),kt.c(),be=C(),ne=f("div"),le=f("button"),ve.c(),Ue=C(),ee&&ee.c(),R=C(),p=f("div"),ye=f("div"),we=f("div"),we.innerHTML=St,nt=C(),U=f("div"),X=f("div"),re=f("h3"),Qe=L(a[25]),$e=L(" against per capita co-benefit values (£, thousand)"),rt=C(),B=f("p"),Z=L(`Each point in the chart below represents a UK 
                        `),qe.c(),Pe=C(),pe=f("div"),ce=f("div"),ce.innerHTML=ze,ct=C(),ae&&ae.c(),_e=C(),Et.c(),et=C(),z=f("div"),Te=f("h3"),Se=L(a[25]),ut=L(" at data zone (LSOA) level"),ft=C(),Ce=f("p"),Ce.textContent=Ct,dt=C(),Ve=f("div"),Ve.innerHTML=Vt,ht=C(),te&&te.c(),tt=C(),Ie=f("div"),pt=C(),ke=f("div"),Ne=f("div"),Ne.innerHTML=It,_t=C(),ue=f("div"),i=f("div"),N=f("h3"),M=L(`Plotting 
                    
                    `),Q=L(Ge),W=L(`
                
                against the gain/loss (£, thousand) per capita for each co-benefit`),fe=C(),$=f("p"),$.textContent=hl,Kt=C(),Jt=f("br"),Xt=C(),se=f("div"),lt=f("strong"),lt.textContent=pl,Zt=f("br"),Qt=L(`Expand for detailed explanation
                    `),vt=f("div"),$t=C();for(let _=0;_<j.length;_+=1)j[_].c();el=C(),Fe=f("div"),Fe.innerHTML=_l,tl=C(),je=f("div"),xe=f("div");for(let _=0;_<Y.length;_+=1)Y[_].c();Nt=C(),Il(Ye.$$.fragment),this.h()},l(_){Nl(t.$$.fragment,_),e=V(_),l=d(_,"DIV",{class:!0});var O=b(l);s=d(O,"DIV",{class:!0});var x=b(s);n=d(x,"DIV",{class:!0});var de=b(n);u=d(de,"DIV",{class:!0});var Pt=b(u);v=d(Pt,"P",{class:!0,"data-svelte-h":!0}),ie(v)!=="svelte-16ymxs7"&&(v.textContent=P),E=V(Pt),h=d(Pt,"DIV",{class:!0});var Oe=b(h);m=d(Oe,"H1",{class:!0});var bl=b(m);w=A(bl,a[27]),bl.forEach(r),I=V(Oe),k=d(Oe,"P",{class:!0});var yl=b(k);g=A(yl,a[26]),yl.forEach(r),y=V(Oe),S=d(Oe,"BR",{}),F=V(Oe),D=d(Oe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ie(D)!=="svelte-1d58oxe"&&(D.textContent=q),Oe.forEach(r),Pt.forEach(r),H=V(de),G=d(de,"DIV",{class:!0});var kl=b(G);gt.l(kl),kl.forEach(r),Le=V(de),K=d(de,"DIV",{class:!0});var ot=b(K);Ae=d(ot,"P",{class:!0});var El=b(Ae);bt.l(El),El.forEach(r),Ze=V(ot),J=d(ot,"P",{class:!0});var Dl=b(J);yt.l(Dl),Dl.forEach(r),ge=V(ot),oe=d(ot,"P",{class:!0});var Ll=b(oe);kt.l(Ll),Ll.forEach(r),ot.forEach(r),de.forEach(r),x.forEach(r),be=V(O),ne=d(O,"DIV",{class:!0});var Al=b(ne);le=d(Al,"BUTTON",{class:!0});var wl=b(le);ve.l(wl),wl.forEach(r),Al.forEach(r),Ue=V(O),ee&&ee.l(O),R=V(O),p=d(O,"DIV",{class:!0});var Tl=b(p);ye=d(Tl,"DIV",{id:!0});var Ft=b(ye);we=d(Ft,"DIV",{class:!0,"data-svelte-h":!0}),ie(we)!=="svelte-ll1i43"&&(we.innerHTML=St),nt=V(Ft),U=d(Ft,"DIV",{id:!0,class:!0});var xt=b(U);X=d(xt,"DIV",{class:!0});var He=b(X);re=d(He,"H3",{class:!0});var al=b(re);Qe=A(al,a[25]),$e=A(al," against per capita co-benefit values (£, thousand)"),al.forEach(r),rt=V(He),B=d(He,"P",{class:!0});var il=b(B);Z=A(il,`Each point in the chart below represents a UK 
                        `),qe.l(il),il.forEach(r),Pe=V(He),pe=d(He,"DIV",{class:!0});var Ot=b(pe);ce=d(Ot,"DIV",{class:!0,"data-svelte-h":!0}),ie(ce)!=="svelte-iixtfs"&&(ce.innerHTML=ze),ct=V(Ot),ae&&ae.l(Ot),Ot.forEach(r),_e=V(He),Et.l(He),He.forEach(r),et=V(xt),z=d(xt,"DIV",{class:!0});var Ee=b(z);Te=d(Ee,"H3",{class:!0});var ol=b(Te);Se=A(ol,a[25]),ut=A(ol," at data zone (LSOA) level"),ol.forEach(r),ft=V(Ee),Ce=d(Ee,"P",{class:!0,"data-svelte-h":!0}),ie(Ce)!=="svelte-1ask2se"&&(Ce.textContent=Ct),dt=V(Ee),Ve=d(Ee,"DIV",{class:!0,"data-svelte-h":!0}),ie(Ve)!=="svelte-7b2hds"&&(Ve.innerHTML=Vt),ht=V(Ee),te&&te.l(Ee),tt=V(Ee),Ie=d(Ee,"DIV",{id:!0,class:!0}),b(Ie).forEach(r),Ee.forEach(r),xt.forEach(r),Ft.forEach(r),Tl.forEach(r),pt=V(O),ke=d(O,"DIV",{id:!0});var Ht=b(ke);Ne=d(Ht,"DIV",{class:!0,"data-svelte-h":!0}),ie(Ne)!=="svelte-1av3fse"&&(Ne.innerHTML=It),_t=V(Ht),ue=d(Ht,"DIV",{id:!0,class:!0,style:!0});var Bt=b(ue);i=d(Bt,"DIV",{id:!0,class:!0});var De=b(i);N=d(De,"H3",{class:!0});var Wt=b(N);M=A(Wt,`Plotting 
                    
                    `),Q=A(Wt,Ge),W=A(Wt,`
                
                against the gain/loss (£, thousand) per capita for each co-benefit`),Wt.forEach(r),fe=V(De),$=d(De,"P",{class:!0,"data-svelte-h":!0}),ie($)!=="svelte-1h97e3k"&&($.textContent=hl),Kt=V(De),Jt=d(De,"BR",{}),Xt=V(De),se=d(De,"DIV",{id:!0,class:!0});var Ke=b(se);lt=d(Ke,"STRONG",{"data-svelte-h":!0}),ie(lt)!=="svelte-1qu96kx"&&(lt.textContent=pl),Zt=d(Ke,"BR",{}),Qt=A(Ke,`Expand for detailed explanation
                    `),vt=d(Ke,"DIV",{style:!0}),b(vt).forEach(r),$t=V(Ke);for(let Je=0;Je<j.length;Je+=1)j[Je].l(Ke);Ke.forEach(r),el=V(De),Fe=d(De,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),ie(Fe)!=="svelte-11g4vkg"&&(Fe.innerHTML=_l),De.forEach(r),tl=V(Bt),je=d(Bt,"DIV",{id:!0,class:!0});var Sl=b(je);xe=d(Sl,"DIV",{id:!0,class:!0});var Cl=b(xe);for(let Je=0;Je<Y.length;Je+=1)Y[Je].l(Cl);Cl.forEach(r),Sl.forEach(r),Bt.forEach(r),Ht.forEach(r),O.forEach(r),Nt=V(_),Nl(Ye.$$.fragment,_),this.h()},h(){c(v,"class","page-subtitle svelte-1qi276a"),c(m,"class","page-title svelte-1qi276a"),c(k,"class","definition"),c(D,"type","button"),c(D,"class","data-btn"),c(h,"class","title-container"),c(u,"class","header-text svelte-1qi276a"),c(G,"class","header-vis svelte-1qi276a"),c(Ae,"class","definition-stat svelte-1qi276a"),c(J,"class","definition-stat svelte-1qi276a"),c(oe,"class","definition-stat svelte-1qi276a"),c(K,"class","header-stats svelte-1qi276a"),c(n,"class","header-content svelte-1qi276a"),c(s,"class","section header svelte-1qi276a"),c(le,"class","switch-button svelte-1qi276a"),le.disabled=a[21],c(ne,"class","button-wrapper svelte-1qi276a"),c(we,"class","section-header"),c(re,"class","component-title"),c(B,"class","description"),c(ce,"class","tooltip-wrapper"),c(pe,"class","aggregation-icon-container2 svelte-1qi276a"),c(X,"class","component column"),c(Te,"class","component-title"),c(Ce,"class","description"),c(Ve,"class","aggregation-icon-container2 svelte-1qi276a"),c(Ie,"id","map"),c(Ie,"class","svelte-1qi276a"),c(z,"class","component column"),c(U,"id","vis-block"),c(U,"class","svelte-1qi276a"),c(ye,"id","overview"),c(p,"class","section"),c(Ne,"class","section-header"),c(N,"class","component-title"),c($,"class","explanation"),Me(vt,"height","0.8em"),c(se,"id","main-legend"),c(se,"class","legend-box svelte-1qi276a"),c(Fe,"id","se-disclaimer"),c(Fe,"class","disclaimer-box svelte-1qi276a"),c(i,"id","se-title"),c(i,"class","svelte-1qi276a"),c(xe,"id","multiple-plots"),c(xe,"class","svelte-1qi276a"),c(je,"id","multiple-comp"),c(je,"class","svelte-1qi276a"),c(ue,"id","se-block"),c(ue,"class","component svelte-1qi276a"),Me(ue,"margin-left","1rem"),c(ke,"id","compare"),c(l,"class","page-container")},m(_,O){ql(t,_,O),T(_,e,O),T(_,l,O),o(l,s),o(s,n),o(n,u),o(u,v),o(u,E),o(u,h),o(h,m),o(m,w),o(h,I),o(h,k),o(k,g),o(h,y),o(h,S),o(h,F),o(h,D),o(n,H),o(n,G),gt.m(G,null),o(n,Le),o(n,K),o(K,Ae),bt.m(Ae,null),o(K,Ze),o(K,J),yt.m(J,null),o(K,ge),o(K,oe),kt.m(oe,null),o(l,be),o(l,ne),o(ne,le),ve.m(le,null),o(l,Ue),ee&&ee.m(l,null),o(l,R),o(l,p),o(p,ye),o(ye,we),o(ye,nt),o(ye,U),o(U,X),o(X,re),o(re,Qe),o(re,$e),o(X,rt),o(X,B),o(B,Z),qe.m(B,null),o(X,Pe),o(X,pe),o(pe,ce),o(pe,ct),ae&&ae.m(pe,null),o(X,_e),Et.m(X,null),o(U,et),o(U,z),o(z,Te),o(Te,Se),o(Te,ut),o(z,ft),o(z,Ce),o(z,dt),o(z,Ve),o(z,ht),te&&te.m(z,null),o(z,tt),o(z,Ie),a[48](Ie),o(l,pt),o(l,ke),o(ke,Ne),o(ke,_t),o(ke,ue),o(ue,i),o(i,N),o(N,M),o(N,Q),o(N,W),o(i,fe),o(i,$),o(i,Kt),o(i,Jt),o(i,Xt),o(i,se),o(se,lt),o(se,Zt),o(se,Qt),o(se,vt),o(se,$t);for(let x=0;x<j.length;x+=1)j[x]&&j[x].m(se,null);o(i,el),o(i,Fe),o(ue,tl),o(ue,je),o(je,xe);for(let x=0;x<Y.length;x+=1)Y[x]&&Y[x].m(xe,null);a[52](l),T(_,Nt,O),ql(Ye,_,O),mt=!0,ll||(vl=[Tt(D,"click",a[32]),Tt(le,"click",a[31])],ll=!0)},p(_,O){if(gt.p(_,O),bt.p(_,O),yt.p(_,O),kt.p(_,O),qt===(qt=ml(_))&&ve?ve.p(_,O):(ve.d(1),ve=qt(_),ve&&(ve.c(),ve.m(le,null))),(!mt||O[0]&2097152)&&(le.disabled=_[21]),_[19]?ee?ee.p(_,O):(ee=Ul(_),ee.c(),ee.m(l,R)):ee&&(ee.d(1),ee=null),Mt!==(Mt=gl(_))&&(qe.d(1),qe=Mt(_),qe&&(qe.c(),qe.m(B,null))),_[6]?ae&&(ae.d(1),ae=null):ae||(ae=zl(),ae.c(),ae.m(pe,null)),Et.p(_,O),_[17]?te?te.p(_,O):(te=Gl(_),te.c(),te.m(z,tt)):te&&(te.d(1),te=null),O[0]&1074790400){at=Rt(Ut);let x;for(x=0;x<at.length;x+=1){const de=Rl(_,at,x);j[x]?j[x].p(de,O):(j[x]=Yl(de),j[x].c(),j[x].m(se,null))}for(;x<j.length;x+=1)j[x].d(1);j.length=at.length}if(O[0]&16777219){it=Rt(Ut);let x;for(x=0;x<it.length;x+=1){const de=Wl(_,it,x);Y[x]?Y[x].p(de,O):(Y[x]=Kl(de),Y[x].c(),Y[x].m(xe,null))}for(;x<Y.length;x+=1)Y[x].d(1);Y.length=it.length}},i(_){mt||(Ml(t.$$.fragment,_),Ml(Ye.$$.fragment,_),mt=!0)},o(_){Pl(t.$$.fragment,_),Pl(Ye.$$.fragment,_),mt=!1},d(_){_&&(r(e),r(l),r(Nt)),Fl(t,_),gt.d(),bt.d(),yt.d(),kt.d(),ve.d(),ee&&ee.d(),qe.d(),ae&&ae.d(),Et.d(),te&&te.d(),a[48](null),Vl(j,_),Vl(Y,_),a[52](null),Fl(Ye,_),ll=!1,Jl(vl)}}}let he=400;function We(a,t){return t==="£"?`${t}${a}`:`${a} ${t}`}function mi(a,t,e){let l,s,n,u;const v=`${Gt}/LAD/Eng_Wales_LSOA_LADs.csv`,P=`${Gt}/LAD/NI_DZ_LAD.csv`,E=`${Gt}/LAD/Scotland_DZ_LA.csv`;let h,m,w,I,k,g={},y={},S,F,D,q,H,G=!1,Le,K,Ae,Ze,J,ge,oe,be,ne,le,{data:Ue}=t;const R=Ue.SEF,p=ga.find(i=>i.id===R)?.id??R,ye=ba.find(i=>i.id===R)?.label??R,we=ya.find(i=>i.id===R)?.def??R,St=ka.find(i=>i.id===R)?.description??R,nt=Ea.find(i=>i.id===R)?.short_units??R,U=Da.find(i=>i.id===R)?.units??R;let X,re,Qe=!1,$e="";const rt=["overview","compare"],B={},Z={};let Pe=!1;async function pe(){try{const i=new Set,N=await fl(v);for(let Q of N){const W=Q.LAD22CD?.trim(),fe=Q.LAD22NM?.trim(),$=Q.LSOA11CD?.trim();$&&W&&e(42,Z[$]=W,Z),!i.has(W)&&W&&fe&&(e(5,B[W]=fe,B),i.add(W))}const M=await fl(P);for(let Q of M){const W=Q.LGD2014_code?.trim(),fe=Q.LGD2014_name?.trim(),$=Q.DZ2021_code?.trim();$&&W&&e(42,Z[$]=W,Z),!i.has(W)&&W&&fe&&(e(5,B[W]=fe,B),i.add(W))}const Ge=await fl(E);for(let Q of Ge){const W=Q.LA_Code?.trim(),fe=Q.LA_Name?.trim(),$=Q.DZ2011_Code?.trim();$&&W&&e(42,Z[$]=W,Z),!i.has(W)&&W&&fe&&(e(5,B[W]=fe,B),i.add(W))}e(43,Pe=!0),console.log("Loaded LAD names:",Object.keys(B).length,B),console.log("SmallArea → LAD mapping:",Object.keys(Z).length,Z)}catch(i){console.error("Error loading LAD names:",i)}}function ce(i){if(!i)return"Unknown";const N=Z[i];return N?B[N]||"Unknown Name":"Unknown LAD"}pe();function ze(){const i=window.scrollY;e(19,Qe=i>250);for(const N of rt){const M=document.getElementById(N);if(!M)continue;const Ge=M.getBoundingClientRect();if(Ge.top<=150&&Ge.bottom>=150){$e!==N&&rl.capture("section entered (sef)",{section_name:N}),$e=N;break}}}aa(()=>(Aa(h),window.addEventListener("scroll",ze),ze(),()=>window.removeEventListener("scroll",ze))),ia(()=>{window.removeEventListener("scroll",ze)});async function ct(){e(34,S=await wt(Ia(R))),console.log("totals",S),e(2,q=await wt(Na(R))),console.log("LAD data 1 ",q),e(35,F=await wt(qa(R))),console.log("by cobens",F),e(36,H=await wt(Ma(R))),console.log("LADsef",H),D=await wt(Pa()),console.log("per_capita_data",D),cl.forEach(i=>{e(35,F[i]=+F[i],F)}),e(37,G=!0),wa(h)}ct().then(()=>{e(17,X=new ma(S,"LSOA",re,"val",!1,"Lookup_Value",!1)),X.initMap()});let _e=new Set;function et(i){_e.has(i)?_e.delete(i):_e.add(i),e(20,_e=new Set(_e))}let z=!1;function Te(){e(21,z=!0),setTimeout(()=>{e(6,Se=!Se),e(21,z=!1)},1e3)}let Se=!0;function ut(){const i=xl(S,N=>N.val)??0;Ha(Ga().thresholds(20).value(N=>N.val)(S),N=>N.length),e(9,m.innerHTML="",m),m?.append(st({height:he/1.9,width:he*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${U}`},y:{label:l===q?"No. of LADs":"No. of LSOAs",labelArrow:!1},style:{fontSize:"16px"},marks:[_a(l,Ra({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),sl([i],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:i,label:"Average"}},tip:{format:{average:N=>`${N.toFixed(2)}`,x:!1}}}),Dt({label:`${U}`,labelArrow:!1,labelAnchor:"center"})]}))}function ft(){const i=Hl[p],N=i?Object.keys(i).map(Number):l.filter(M=>M.SEFMAME==p).map(M=>M.SE);e(11,I.innerHTML="",I),I?.append(st({height:he/1.9,width:he*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:p==="Typology"?80:50,x:{domain:N,label:Va(p),tickFormat:M=>i?.[M]??M,tickRotate:p==="Typology"?-10:0,padding:.5},style:{fontSize:"16px"},marks:[Lt([0],{stroke:"#333",strokeWidth:.75}),va(l,Ol({y:"count"},{x:"val",fill:"black",opacity:.5,tooltip:!0,title:M=>`Count: ${M.count}`})),nl(l,Ol({y:"count",text:"count"},{x:"val",text:M=>M.count,dy:-15,fill:"#333",fontWeight:500})),At({label:l===q?"No. of LADs":"No. of LSOAs",labelArrow:!1})]}))}function Ce(){e(10,w.innerHTML="",w),w?.append(st({height:he*1.5,width:he*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[Lt([0],{stroke:"#333",strokeWidth:.75}),sl([0],{stroke:"#333",strokeWidth:.75}),zt(l,{x:p=="Rurality"?i=>i.val+(Math.random()-.5)*.02:i=>i.val,y:i=>i.total_per_capita*1e3,fill:i=>i.total_per_capita<0?"#BD210E":"#242424",r:l===q?4:.9,fillOpacity:.75,channels:{location:{value:i=>l===q?B[i.Lookup_Value]||"Unknown":ce(i.Lookup_Value),label:"Location"},sef:{value:"val",label:`${U}`},value:{value:i=>i.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),At({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),Dt({label:`${U}`,labelArrow:!1,labelAnchor:"center"})]}))}function Ct(){e(12,k.innerHTML="",k),k?.append(st({height:he*1.5,width:he*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1,domain:p=="EPC"?[.5,7.5]:p=="Tenure"?[.5,3.5]:p=="Typology"?[.5,6.5]:p=="Fuel_Type"?[.5,3.5]:p=="Gas_flag"?[-.5,1.5]:[-.5,2.5]},y:{grid:!0},style:{fontSize:"16px"},marks:[Lt([0],{stroke:"#333",strokeWidth:1.25}),zt(l,{x:s===H?i=>i.val+(Math.random()-.5)*.2:i=>i.val+(Math.random()-.5)*.1,y:i=>i.total_per_capita*1e3,fill:i=>i.total_per_capita<0?"#BD210E":"#242424",r:l===q?4:.9,fillOpacity:.75,channels:{location:{value:i=>l===q?B[i.Lookup_Value]||"Unknown":ce(i.Lookup_Value),label:"Location"},sef:{value:"val",label:`${U}`},value:{value:i=>i.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!1,value:!0,x:!1,y:!1}}}),At({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),Dt({label:`${U}`,labelArrow:!1,labelAnchor:"center",tickFormat:()=>"",ticks:[]}),nl([{x:0,y:0,text:p=="Number_cars"?"0":p=="Gas_flag"?"No":"",fill:"#333",fontWeight:"bold"},{x:1,y:0,text:p=="EPC"?"A":p=="Tenure"?"Owner":p=="Typology"?"Semi-detached":p=="Fuel_Type"?"Gas boiler":p=="Gas_flag"?"Yes":"1",rotate:p==="Typology"?-50:0,fill:"#333",stroke:"white",fontWeight:"bold"},{x:2,y:0,text:p=="EPC"?"B":p=="Tenure"?"Rented (social)":p=="Typology"?"Detached":p=="Fuel_Type"?"Electric heating":p=="Number_cars"?"2":"",fill:"#333",fontWeight:"bold"},{x:3,y:0,text:p=="EPC"?"C":p=="Tenure"?"Rented (private)":p=="Typology"?"Mid-terrace":p=="Fuel_Type"?"Oil heating":"",fill:"#333",fontWeight:"bold"},{x:4,y:0,text:p=="EPC"?"D":p=="Typology"?"End-terrace":"",fill:"#333",fontWeight:"bold"},{x:5,y:0,text:p=="EPC"?"E":p=="Typology"?"Enclosed":"",fill:"#333",fontWeight:"bold"},{x:5,y:-.3,text:p=="Typology"?"end-terrace":"",fill:"#333",fontWeight:"bold"},{x:6,y:0,text:p=="EPC"?"F":p=="Typology"?"Enclosed":"",fill:"#333",fontWeight:"bold"},{x:6,y:-.3,text:p=="Typology"?"mid-terrace":"",fill:"#333",fontWeight:"bold"},{x:7,y:0,text:p=="EPC"?"G":"",fill:"#333",fontWeight:"bold"}],{x:"x",y:"y",text:"text",fill:"fill",fontWeight:"fontWeight",dy:15})]}))}function dt(){cl.forEach(i=>{let N;N=st({height:he,width:he,marginLeft:i==="Excess heat"?80:60,marginTop:40,marginRight:10,marginBottom:50,x:{label:null},y:{label:null},style:{fontSize:"14px"},marks:[Lt([0],{stroke:"#333",strokeWidth:1.25}),sl([0],{stroke:"#333",strokeWidth:.75}),zt(s.filter(M=>M.co_benefit_type==i),{x:p=="Rurality"?M=>M.val+(Math.random()-.5)*.02:M=>M.val,y:"total",fill:jt(i),fillOpacity:.5,r:s===H?3.5:.5,channels:{location:{value:M=>l===q?B[M.Lookup_Value]||"Unknown":ce(M.Lookup_Value),label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),At({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"top"}),Dt({label:`${U}`,labelArrow:!1,labelAnchor:"center"})]}),g[i]?.append(N)})}function Ve(){cl.forEach(i=>{let N;N=st({height:he,width:he,marginLeft:i=="Excess heat"?70:60,marginTop:40,marginRight:10,marginBottom:50,x:{grid:!1,domain:p=="EPC"?[.5,7.5]:p=="Tenure"?[.5,3.5]:p=="Typology"?[.5,6.5]:p=="Fuel_Type"?[.5,3.5]:p=="Gas_flag"?[-.5,1.5]:[-.5,2.5]},y:{label:null},style:{fontSize:"14px"},marks:[Lt([0],{stroke:"#333",strokeWidth:1.25}),zt(s.filter(M=>M.co_benefit_type==i),{x:s===H?M=>M.val+(Math.random()-.5)*.1:M=>M.val+(Math.random()-.5)*.2,y:"total",fill:jt(i),fillOpacity:.5,r:s===H?3.5:.5,channels:{location:{value:M=>l===q?B[M.Lookup_Value]||"Unknown":ce(M.Lookup_Value),label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),At({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"top"}),Dt({label:`${U}`,labelArrow:!1,labelAnchor:"center",tickFormat:()=>"",ticks:[]}),nl([{x:0,y:0,text:p=="Number_cars"?"0":p=="Gas_flag"?"No":"",fill:"#333",fontWeight:"bold"},{x:1,y:0,text:p=="EPC"?"A":p=="Tenure"?"Owner":p=="Typology"?"S-D":p=="Fuel_Type"?"Gas boiler":p=="Gas_flag"?"Yes":"1",fill:"#333",fontWeight:"bold"},{x:2,y:0,text:p=="EPC"?"B":p=="Tenure"?"Rented (social)":p=="Typology"?"D":p=="Fuel_Type"?"Electric heating":p=="Number_cars"?"2":"",fill:"#333",fontWeight:"bold"},{x:3,y:0,text:p=="EPC"?"C":p=="Tenure"?"Rented (private)":p=="Typology"?"M-T":p=="Fuel_Type"?"Oil heating":"",fill:"#333",fontWeight:"bold"},{x:4,y:0,text:p=="EPC"?"D":p=="Typology"?"E-T":"",fill:"#333",fontWeight:"bold"},{x:5,y:0,text:p=="EPC"?"E":p=="Typology"?"EE-T":"",fill:"#333",fontWeight:"bold"},{x:6,y:0,text:p=="EPC"?"F":p=="Typology"?"EM-T":"",fill:"#333",fontWeight:"bold"},{x:7,y:0,text:p=="EPC"?"G":"",fill:"#333",fontWeight:"bold"}],{x:"x",y:"y",text:"text",fill:"fill",fontWeight:"fontWeight",dy:15})]}),y[i]?.append(N)})}function Vt(){let i=S;i.forEach(M=>{delete M.scenario});const N=Ta(i);Sa(N,`cobenefits_${p}.csv`),Ca("/Scotland_co-benefits_CB7_2045.pdf","readme.pdf")}function ht(i){Be[i?"unshift":"push"](()=>{I=i,e(11,I)})}function tt(i){Be[i?"unshift":"push"](()=>{m=i,e(9,m)})}function Ie(i){Be[i?"unshift":"push"](()=>{k=i,e(12,k)})}function pt(i){Be[i?"unshift":"push"](()=>{w=i,e(10,w)})}function ke(i){Be[i?"unshift":"push"](()=>{re=i,e(18,re)})}const Ne=i=>{const N=_e.has(i.id);et(i.id),N?rl.capture("cobenefit closed",{cobenefit:i.label}):rl.capture("cobenefit opened",{cobenefit:i.label})};function It(i,N){Be[i?"unshift":"push"](()=>{y[N.id]=i,e(1,y)})}function _t(i,N){Be[i?"unshift":"push"](()=>{g[N.id]=i,e(0,g)})}function ue(i){Be[i?"unshift":"push"](()=>{h=i,e(8,h)})}return a.$$set=i=>{"data"in i&&e(33,Ue=i.data)},a.$$.update=()=>{a.$$.dirty[0]&68|a.$$.dirty[1]&8&&e(7,l=Se?q:S),a.$$.dirty[0]&64|a.$$.dirty[1]&48&&(s=Se?H:F),a.$$.dirty[0]&128&&e(13,Le=l?(xl(l,i=>i.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),a.$$.dirty[0]&128&&e(40,ne=l?da(l,i=>i.val):null),a.$$.dirty[1]&1536&&e(14,K=ne!=null&&le?le[ne]??ne:"N/A"),a.$$.dirty[0]&128&&e(38,ge=l?ha(l,i=>i.val):-1),a.$$.dirty[0]&128|a.$$.dirty[1]&128&&e(3,J=ge!==-1&&l?l[ge].Lookup_Value?.trim()??"N/A":"N/A"),a.$$.dirty[0]&128|a.$$.dirty[1]&128&&e(15,Ae=ge!==-1&&l?(l[ge].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),a.$$.dirty[0]&128&&e(39,be=l?pa(l,i=>i.val):-1),a.$$.dirty[0]&128|a.$$.dirty[1]&256&&e(4,oe=be!==-1&&l?l[be].Lookup_Value?.trim()??"N/A":"N/A"),a.$$.dirty[0]&128|a.$$.dirty[1]&256&&e(16,Ze=be!==-1&&l?(l[be].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),a.$$.dirty[0]&172|a.$$.dirty[1]&6144&&e(23,n=Pe&&J!=="N/A"?l===q?B[J]??J:B[Z[J]]??J:"Loading..."),a.$$.dirty[0]&180|a.$$.dirty[1]&6144&&e(22,u=Pe&&oe!=="N/A"?l===q?B[oe]??oe:B[Z[oe]]??oe:"Loading..."),a.$$.dirty[0]&8&&console.log("maxLookupValue:",J),a.$$.dirty[0]&40&&console.log("LAD name for maxLookupValue:",B[J]),a.$$.dirty[0]&131|a.$$.dirty[1]&64&&(Object.values(g).forEach(i=>{i.firstChild?.remove()}),Object.values(y).forEach(i=>{i.firstChild?.remove()}),G&&l&&(Xe.includes(p)?(ft(),Ve(),Ct()):(Ce(),dt(),ut())))},e(41,le=Hl[p]),[g,y,q,J,oe,B,Se,l,h,m,w,I,k,Le,K,Ae,Ze,X,re,Qe,_e,z,u,n,p,ye,we,St,nt,U,et,Te,Vt,Ue,S,F,H,G,ge,be,ne,le,Z,Pe,ht,tt,Ie,pt,ke,Ne,It,_t,ue]}class Bi extends ra{constructor(t){super(),ca(this,t,mi,vi,la,{data:33},null,[-1,-1,-1])}}export{Bi as component};
