import{s as Ml,a as V,e as c,t as S,g as x,c as d,b as v,p as $,d as A,f,q as r,B as ee,i as j,h as e,j as Te,w as vl,r as Pl,Y as Fl,n as bt,H as Bl,E as Hl,y as Nl,A as Ke}from"../chunks/scheduler.C9ZL8GxQ.js";import{S as Rl,i as Ol,c as Ul,b as Yl,m as Wl,t as Gl,a as jl,d as ql}from"../chunks/index.vifww4_P.js";import{N as Xl,e as ut}from"../chunks/NavigationBar.DeVjztyd.js";import"../chunks/transform.BNP73y-7.js";import{Q as Kl,R as Yt,S as Jl,t as pl,T as Ql,O as ml,U as gl,V as Zl,W as $l,X as _l,J as ht,L as ea,Y as vt,Z as pt,_ as ta,N as bl,$ as El}from"../chunks/index.xKAkP9XD.js";import{b as la}from"../chunks/paths.BD2ysqO_.js";import{M as aa}from"../chunks/mapUK.C3xNGINq.js";import{f as sa,h as na,i as ia,j as oa,k as ra,l as ca,e as _t,S as wl,m as mt,n as kl}from"../chunks/globals.D4ZZRNMA.js";import{g as Wt,i as da,k as fa,l as ua}from"../chunks/duckdb.BUY0M7hy.js";import{p as Gt}from"../chunks/per_capita.COcMrZFY.js";import{n as ha}from"../chunks/nice.BNODEgY4.js";import{t as va,b as pa}from"../chunks/bin.CfZRpQ3l.js";import{d as gt}from"../chunks/dot.CIeIS7dg.js";import{a as ma}from"../chunks/bar.D6_jcMRG.js";var ga=Array.prototype,_a=ga.slice;function jt(t){return()=>t}function Dl(){var t=Kl,a=Yt,l=va;function n(o){Array.isArray(o)||(o=Array.from(o));var s,h=o.length,m,g,z=new Array(h);for(s=0;s<h;++s)z[s]=t(o[s],s,o);var p=a(z),k=p[0],_=p[1],D=l(z,k,_);if(!Array.isArray(D)){const E=_,I=+D;if(a===Yt&&([k,_]=ha(k,_,I)),D=Jl(k,_,I),D[0]<=k&&(g=pl(k,_,I)),D[D.length-1]>=_)if(E>=_&&a===Yt){const b=pl(k,_,I);isFinite(b)&&(b>0?_=(Math.floor(_/b)+1)*b:b<0&&(_=(Math.ceil(_*-b)+1)/-b))}else D.pop()}for(var w=D.length,L=0,B=w;D[L]<=k;)++L;for(;D[B-1]>_;)--B;(L||B<w)&&(D=D.slice(L,B),w=B-L);var T=new Array(w+1),U;for(s=0;s<=w;++s)U=T[s]=[],U.x0=s>0?D[s-1]:k,U.x1=s<w?D[s]:_;if(isFinite(g)){if(g>0)for(s=0;s<h;++s)(m=z[s])!=null&&k<=m&&m<=_&&T[Math.min(w,Math.floor((m-k)/g))].push(o[s]);else if(g<0){for(s=0;s<h;++s)if((m=z[s])!=null&&k<=m&&m<=_){const E=Math.floor((k-m)*g);T[Math.min(w,E+(D[E]<=m))].push(o[s])}}}else for(s=0;s<h;++s)(m=z[s])!=null&&k<=m&&m<=_&&T[Ql(D,m,0,w)].push(o[s]);return T}return n.value=function(o){return arguments.length?(t=typeof o=="function"?o:jt(o),n):t},n.domain=function(o){return arguments.length?(a=typeof o=="function"?o:jt([o[0],o[1]]),n):a},n.thresholds=function(o){return arguments.length?(l=typeof o=="function"?o:jt(Array.isArray(o)?_a.call(o):o),n):l},n}function yl(t,a,l){const n=t.slice();return n[47]=a[l],n[48]=a,n[49]=l,n}function Vl(t,a,l){const n=t.slice();return n[47]=a[l],n}function ba(t){let a;return{c(){a=c("div"),this.h()},l(l){a=d(l,"DIV",{class:!0}),v(a).forEach(f),this.h()},h(){r(a,"class","plot svelte-1w6xccz")},m(l,n){j(l,a,n),t[25](a)},p:bt,d(l){l&&f(a),t[25](null)}}}function Ea(t){let a;return{c(){a=c("div"),this.h()},l(l){a=d(l,"DIV",{class:!0}),v(a).forEach(f),this.h()},h(){r(a,"class","plot svelte-1w6xccz")},m(l,n){j(l,a,n),t[24](a)},p:bt,d(l){l&&f(a),t[24](null)}}}function wa(t){let a,l,n=_e(t[5],t[19])+"",o;return{c(){a=S("Average value: "),l=c("strong"),o=S(n),this.h()},l(s){a=A(s,"Average value: "),l=d(s,"STRONG",{style:!0});var h=v(l);o=A(h,n),h.forEach(f),this.h()},h(){ee(l,"color","#BD210E")},m(s,h){j(s,a,h),j(s,l,h),e(l,o)},p(s,h){h[0]&32&&n!==(n=_e(s[5],s[19])+"")&&Te(o,n)},d(s){s&&(f(a),f(l))}}}function ka(t){let a,l,n=_e(t[6],t[19])+"",o;return{c(){a=S("Most common value: "),l=c("strong"),o=S(n),this.h()},l(s){a=A(s,"Most common value: "),l=d(s,"STRONG",{style:!0});var h=v(l);o=A(h,n),h.forEach(f),this.h()},h(){ee(l,"color","#BD210E")},m(s,h){j(s,a,h),j(s,l,h),e(l,o)},p(s,h){h[0]&64&&n!==(n=_e(s[6],s[19])+"")&&Te(o,n)},d(s){s&&(f(a),f(l))}}}function xl(t){let a,l,n,o,s;return{c(){a=c("div"),l=c("div"),n=c("span"),o=S(t[16]),s=S(" >>"),this.h()},l(h){a=d(h,"DIV",{class:!0});var m=v(a);l=d(m,"DIV",{class:!0});var g=v(l);n=d(g,"SPAN",{class:!0});var z=v(n);o=A(z,t[16]),s=A(z," >>"),z.forEach(f),g.forEach(f),m.forEach(f),this.h()},h(){r(n,"class","mini-header-text"),r(l,"class","mini-header-content"),r(a,"class","mini-header")},m(h,m){j(h,a,m),e(a,l),e(l,n),e(n,o),e(n,s)},p:bt,d(h){h&&f(a)}}}function Sl(t){let a,l,n=t[11].legend(t[20]).outerHTML+"";return{c(){a=c("div"),l=new Bl(!1),this.h()},l(o){a=d(o,"DIV",{id:!0});var s=v(a);l=Hl(s,!1),s.forEach(f),this.h()},h(){l.a=null,r(a,"id","legend")},m(o,s){j(o,a,s),l.m(n,a)},p(o,s){s[0]&2048&&n!==(n=o[11].legend(o[20]).outerHTML+"")&&l.p(n)},d(o){o&&f(a)}}}function Al(t){let a,l,n,o,s=t[47].def+"",h,m,g,z,p,k,_,D="here",w,L,B=t[47].id.toLowerCase()+"",T,U,E;return{c(){a=c("div"),l=c("div"),n=c("div"),o=V(),h=S(s),m=V(),g=c("br"),z=V(),p=c("div"),k=S("Click "),_=c("a"),_.textContent=D,w=S(` for the \r
                                `),L=c("span"),T=S(B),U=V(),E=S("report page."),this.h()},l(I){a=d(I,"DIV",{class:!0});var b=v(a);l=d(b,"DIV",{class:!0});var P=v(l);n=d(P,"DIV",{style:!0}),v(n).forEach(f),o=x(P),h=A(P,s),m=x(P),g=d(P,"BR",{}),z=x(P),p=d(P,"DIV",{class:!0});var H=v(p);k=A(H,"Click "),_=d(H,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0,"data-svelte-h":!0}),$(_)!=="svelte-gjrxnt"&&(_.textContent=D),w=A(H,` for the \r
                                `),L=d(H,"SPAN",{style:!0});var q=v(L);T=A(q,B),U=x(q),q.forEach(f),E=A(H,"report page."),H.forEach(f),P.forEach(f),b.forEach(f),this.h()},h(){ee(n,"height","0.8em"),r(_,"class","link"),r(_,"href",la+"/cobenefit?cobenefit="+t[47].id),r(_,"target","_blank"),r(_,"rel","noopener noreferrer"),ee(_,"color",_t(t[47].id)),ee(L,"color",_t(t[47].id)),r(p,"class","link-box svelte-1w6xccz"),r(l,"class","legend-description svelte-1w6xccz"),r(a,"class","legend-description-box svelte-1w6xccz")},m(I,b){j(I,a,b),e(a,l),e(l,n),e(l,o),e(l,h),e(l,m),e(l,g),e(l,z),e(l,p),e(p,k),e(p,_),e(p,w),e(p,L),e(L,T),e(L,U),e(p,E)},d(I){I&&f(a)}}}function Il(t){let a,l,n,o,s,h=t[47].label+"",m,g,z,p,k=t[14].has(t[47].id)?"▲":"▼",_,D,w=t[14].has(t[47].id),L,B,T;function U(){return t[28](t[47])}let E=w&&Al(t);return{c(){a=c("div"),l=c("div"),n=c("span"),o=V(),s=c("span"),m=S(h),z=V(),p=c("span"),_=S(k),D=V(),E&&E.c(),L=V(),this.h()},l(I){a=d(I,"DIV",{class:!0});var b=v(a);l=d(b,"DIV",{class:!0,style:!0});var P=v(l);n=d(P,"SPAN",{class:!0,style:!0}),v(n).forEach(f),o=x(P),s=d(P,"SPAN",{class:!0});var H=v(s);m=A(H,h),H.forEach(f),z=x(P),p=d(P,"SPAN",{class:!0});var q=v(p);_=A(q,k),q.forEach(f),P.forEach(f),D=x(b),E&&E.l(b),L=x(b),b.forEach(f),this.h()},h(){r(n,"class","legend-color svelte-1w6xccz"),ee(n,"background-color",_t(t[47].id)),r(s,"class",g="legend-text "+(t[14].has(t[47].id)?"expanded":"")+" svelte-1w6xccz"),r(p,"class","toggle-icon svelte-1w6xccz"),r(l,"class","legend-header svelte-1w6xccz"),ee(l,"cursor","pointer"),r(a,"class","legend-item svelte-1w6xccz")},m(I,b){j(I,a,b),e(a,l),e(l,n),e(l,o),e(l,s),e(s,m),e(l,z),e(l,p),e(p,_),e(a,D),E&&E.m(a,null),e(a,L),B||(T=Nl(l,"click",U),B=!0)},p(I,b){t=I,b[0]&16384&&g!==(g="legend-text "+(t[14].has(t[47].id)?"expanded":"")+" svelte-1w6xccz")&&r(s,"class",g),b[0]&16384&&k!==(k=t[14].has(t[47].id)?"▲":"▼")&&Te(_,k),b[0]&16384&&(w=t[14].has(t[47].id)),w?E||(E=Al(t),E.c(),E.m(a,L)):E&&(E.d(1),E=null)},d(I){I&&f(a),E&&E.d(),B=!1,T()}}}function zl(t){let a=console.log("Missing key in plotSmallMult:",t[47].id)+"",l;return{c(){l=S(a)},l(n){l=A(n,a)},m(n,o){j(n,l,o)},p:bt,d(n){n&&f(l)}}}function Ll(t){let a,l,n=t[47].label+"",o,s,h,m,g=t[47],z,p=t[0][t[47].id]===void 0&&zl(t);const k=()=>t[29](m,g),_=()=>t[29](null,g);return{c(){a=c("div"),l=c("h3"),o=S(n),s=V(),p&&p.c(),h=V(),m=c("div"),z=V(),this.h()},l(D){a=d(D,"DIV",{class:!0});var w=v(a);l=d(w,"H3",{class:!0});var L=v(l);o=A(L,n),L.forEach(f),s=x(w),p&&p.l(w),h=x(w),m=d(w,"DIV",{class:!0}),v(m).forEach(f),z=x(w),w.forEach(f),this.h()},h(){r(l,"class","component-chart-title svelte-1w6xccz"),r(m,"class","plot svelte-1w6xccz"),r(a,"class","plot-container svelte-1w6xccz")},m(D,w){j(D,a,w),e(a,l),e(l,o),e(a,s),p&&p.m(a,null),e(a,h),e(a,m),k(),e(a,z)},p(D,w){t=D,t[0][t[47].id]===void 0?p?p.p(t,w):(p=zl(t),p.c(),p.m(a,h)):p&&(p.d(1),p=null),g!==t[47]&&(_(),g=t[47],k())},d(D){D&&f(a),p&&p.d(),_()}}}function Da(t){let a,l,n,o,s,h,m,g="SEF Report",z,p,k,_,D,w,L,B,T,U,E,I,b,P,H=_e(t[7],t[19])+"",q,Je,Me,K,be,te,Pe,J,re,Ee,we=_e(t[8],t[19])+"",Fe,Qe,Be,ae,He,Ne,ce,se,oe,lt='<p class="section-subtitle svelte-1w6xccz">Overview</p>',Ze,le,i,F,M,Re,at,ke,qt="Each point in the chart below represents a UK data zone (LSOA).",Et,De,Xt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Gt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each AREA.</span></div>`,wt,Oe,kt,G,Ue,Dt,yt,ye,Kt="Scroll for zooming in and out.",Vt,Ve,Jt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Gt}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,xt,st,xe,St,de,Se,Qt='<p class="section-subtitle svelte-1w6xccz">By Co-benefits</p>',At,ne,N,fe,It,ue,Zt=t[16].toLowerCase()+"",zt,Lt,Ct,Ae,$t="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",Tt,Mt,Pt,Ie,el=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Gt}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,Ft,X,Ye,tl="Co-benefits:",Bt,Ht,$e,Nt,Rt,he,ll='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',Ot,ze,ve,pe;a=new Xl({});function Cl(u,C){return wl.includes(u[15])?Ea:ba}let et=Cl(t)(t);function Tl(u,C){return wl.includes(u[15])?ka:wa}let tt=Tl(t)(t),Y=t[13]&&xl(t),W=t[11]&&Sl(t),We=ut(mt),R=[];for(let u=0;u<We.length;u+=1)R[u]=Il(Vl(t,We,u));let Ge=ut(mt),O=[];for(let u=0;u<Ge.length;u+=1)O[u]=Ll(yl(t,Ge,u));return{c(){Ul(a.$$.fragment),l=V(),n=c("div"),o=c("div"),s=c("div"),h=c("div"),m=c("p"),m.textContent=g,z=V(),p=c("div"),k=c("h1"),_=S(t[18]),D=V(),w=c("p"),L=S(t[17]),B=V(),T=c("div"),et.c(),U=V(),E=c("div"),I=c("p"),b=S("Max value: "),P=c("strong"),q=S(H),Je=S(`\r
                    (`),Me=S(t[9]),K=S(")"),be=V(),te=c("p"),tt.c(),Pe=V(),J=c("p"),re=S("Min value: "),Ee=c("strong"),Fe=S(we),Qe=S(`\r
                    (`),Be=S(t[10]),ae=S(")"),He=V(),Y&&Y.c(),Ne=V(),ce=c("div"),se=c("div"),oe=c("div"),oe.innerHTML=lt,Ze=V(),le=c("div"),i=c("div"),F=c("h3"),M=S(t[16]),Re=S(" against per capita co-benefit values (£, thousand)"),at=V(),ke=c("p"),ke.textContent=qt,Et=V(),De=c("div"),De.innerHTML=Xt,wt=V(),Oe=c("div"),kt=V(),G=c("div"),Ue=c("h3"),Dt=S(t[16]),yt=V(),ye=c("p"),ye.textContent=Kt,Vt=V(),Ve=c("div"),Ve.innerHTML=Jt,xt=V(),W&&W.c(),st=V(),xe=c("div"),St=V(),de=c("div"),Se=c("div"),Se.innerHTML=Qt,At=V(),ne=c("div"),N=c("div"),fe=c("h3"),It=S("Plotting "),ue=c("span"),zt=S(Zt),Lt=S(" against the gain/loss (£, thousand) per capita for each co-benefit"),Ct=V(),Ae=c("p"),Ae.textContent=$t,Tt=V(),Mt=c("br"),Pt=V(),Ie=c("div"),Ie.innerHTML=el,Ft=V(),X=c("div"),Ye=c("strong"),Ye.textContent=tl,Bt=c("br"),Ht=S(`Expand for detailed explanation\r
                    `),$e=c("div"),Nt=V();for(let u=0;u<R.length;u+=1)R[u].c();Rt=V(),he=c("div"),he.innerHTML=ll,Ot=V(),ze=c("div"),ve=c("div");for(let u=0;u<O.length;u+=1)O[u].c();this.h()},l(u){Yl(a.$$.fragment,u),l=x(u),n=d(u,"DIV",{class:!0});var C=v(n);o=d(C,"DIV",{class:!0});var y=v(o);s=d(y,"DIV",{class:!0});var Q=v(s);h=d(Q,"DIV",{class:!0});var nt=v(h);m=d(nt,"P",{class:!0,"data-svelte-h":!0}),$(m)!=="svelte-3h7aqf"&&(m.textContent=g),z=x(nt),p=d(nt,"DIV",{class:!0});var it=v(p);k=d(it,"H1",{class:!0});var al=v(k);_=A(al,t[18]),al.forEach(f),D=x(it),w=d(it,"P",{class:!0});var sl=v(w);L=A(sl,t[17]),sl.forEach(f),it.forEach(f),nt.forEach(f),B=x(Q),T=d(Q,"DIV",{class:!0});var nl=v(T);et.l(nl),nl.forEach(f),U=x(Q),E=d(Q,"DIV",{class:!0});var je=v(E);I=d(je,"P",{class:!0});var qe=v(I);b=A(qe,"Max value: "),P=d(qe,"STRONG",{});var il=v(P);q=A(il,H),il.forEach(f),Je=A(qe,`\r
                    (`),Me=A(qe,t[9]),K=A(qe,")"),qe.forEach(f),be=x(je),te=d(je,"P",{class:!0});var ol=v(te);tt.l(ol),ol.forEach(f),Pe=x(je),J=d(je,"P",{class:!0});var Xe=v(J);re=A(Xe,"Min value: "),Ee=d(Xe,"STRONG",{});var rl=v(Ee);Fe=A(rl,we),rl.forEach(f),Qe=A(Xe,`\r
                    (`),Be=A(Xe,t[10]),ae=A(Xe,")"),Xe.forEach(f),je.forEach(f),Q.forEach(f),y.forEach(f),He=x(C),Y&&Y.l(C),Ne=x(C),ce=d(C,"DIV",{class:!0});var cl=v(ce);se=d(cl,"DIV",{id:!0});var ot=v(se);oe=d(ot,"DIV",{class:!0,"data-svelte-h":!0}),$(oe)!=="svelte-ll1i43"&&(oe.innerHTML=lt),Ze=x(ot),le=d(ot,"DIV",{id:!0,class:!0});var rt=v(le);i=d(rt,"DIV",{class:!0});var me=v(i);F=d(me,"H3",{class:!0});var Ut=v(F);M=A(Ut,t[16]),Re=A(Ut," against per capita co-benefit values (£, thousand)"),Ut.forEach(f),at=x(me),ke=d(me,"P",{class:!0,"data-svelte-h":!0}),$(ke)!=="svelte-1ozkrs5"&&(ke.textContent=qt),Et=x(me),De=d(me,"DIV",{class:!0,"data-svelte-h":!0}),$(De)!=="svelte-xpsz06"&&(De.innerHTML=Xt),wt=x(me),Oe=d(me,"DIV",{class:!0}),v(Oe).forEach(f),me.forEach(f),kt=x(rt),G=d(rt,"DIV",{class:!0});var ie=v(G);Ue=d(ie,"H3",{class:!0});var dl=v(Ue);Dt=A(dl,t[16]),dl.forEach(f),yt=x(ie),ye=d(ie,"P",{class:!0,"data-svelte-h":!0}),$(ye)!=="svelte-1ask2se"&&(ye.textContent=Kt),Vt=x(ie),Ve=d(ie,"DIV",{class:!0,"data-svelte-h":!0}),$(Ve)!=="svelte-1dxsuae"&&(Ve.innerHTML=Jt),xt=x(ie),W&&W.l(ie),st=x(ie),xe=d(ie,"DIV",{id:!0,class:!0}),v(xe).forEach(f),ie.forEach(f),rt.forEach(f),ot.forEach(f),cl.forEach(f),St=x(C),de=d(C,"DIV",{id:!0});var ct=v(de);Se=d(ct,"DIV",{class:!0,"data-svelte-h":!0}),$(Se)!=="svelte-1av3fse"&&(Se.innerHTML=Qt),At=x(ct),ne=d(ct,"DIV",{id:!0,class:!0,style:!0});var dt=v(ne);N=d(dt,"DIV",{id:!0,class:!0});var Z=v(N);fe=d(Z,"H3",{class:!0});var ft=v(fe);It=A(ft,"Plotting "),ue=d(ft,"SPAN",{style:!0});var fl=v(ue);zt=A(fl,Zt),fl.forEach(f),Lt=A(ft," against the gain/loss (£, thousand) per capita for each co-benefit"),ft.forEach(f),Ct=x(Z),Ae=d(Z,"P",{class:!0,"data-svelte-h":!0}),$(Ae)!=="svelte-1h97e3k"&&(Ae.textContent=$t),Tt=x(Z),Mt=d(Z,"BR",{}),Pt=x(Z),Ie=d(Z,"DIV",{class:!0,"data-svelte-h":!0}),$(Ie)!=="svelte-1ps2onq"&&(Ie.innerHTML=el),Ft=x(Z),X=d(Z,"DIV",{id:!0,class:!0});var Le=v(X);Ye=d(Le,"STRONG",{"data-svelte-h":!0}),$(Ye)!=="svelte-1qu96kx"&&(Ye.textContent=tl),Bt=d(Le,"BR",{}),Ht=A(Le,`Expand for detailed explanation\r
                    `),$e=d(Le,"DIV",{style:!0}),v($e).forEach(f),Nt=x(Le);for(let Ce=0;Ce<R.length;Ce+=1)R[Ce].l(Le);Le.forEach(f),Rt=x(Z),he=d(Z,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),$(he)!=="svelte-11g4vkg"&&(he.innerHTML=ll),Z.forEach(f),Ot=x(dt),ze=d(dt,"DIV",{id:!0,class:!0});var ul=v(ze);ve=d(ul,"DIV",{id:!0,class:!0});var hl=v(ve);for(let Ce=0;Ce<O.length;Ce+=1)O[Ce].l(hl);hl.forEach(f),ul.forEach(f),dt.forEach(f),ct.forEach(f),C.forEach(f),this.h()},h(){r(m,"class","page-subtitle svelte-1w6xccz"),r(k,"class","page-title svelte-1w6xccz"),r(w,"class","definition"),r(p,"class","title-container"),r(h,"class","header-text svelte-1w6xccz"),r(T,"class","header-vis svelte-1w6xccz"),r(I,"class","definition-stat svelte-1w6xccz"),r(te,"class","definition-stat svelte-1w6xccz"),r(J,"class","definition-stat svelte-1w6xccz"),r(E,"class","header-stats svelte-1w6xccz"),r(s,"class","header-content svelte-1w6xccz"),r(o,"class","section header svelte-1w6xccz"),r(oe,"class","section-header"),r(F,"class","component-title"),r(ke,"class","description"),r(De,"class","aggregation-icon-container"),r(Oe,"class","plot-dot svelte-1w6xccz"),r(i,"class","component column"),r(Ue,"class","component-title"),r(ye,"class","description"),r(Ve,"class","aggregation-icon-container2 svelte-1w6xccz"),r(xe,"id","map"),r(xe,"class","svelte-1w6xccz"),r(G,"class","component column"),r(le,"id","vis-block"),r(le,"class","svelte-1w6xccz"),r(se,"id","overview"),r(ce,"class","section"),r(Se,"class","section-header"),ee(ue,"background-color","#555"),ee(ue,"padding","0 1px"),ee(ue,"color","#f9f9f9"),r(fe,"class","component-title"),r(Ae,"class","explanation"),r(Ie,"class","aggregation-icon-container2 svelte-1w6xccz"),ee($e,"height","0.8em"),r(X,"id","main-legend"),r(X,"class","legend-box svelte-1w6xccz"),r(he,"id","se-disclaimer"),r(he,"class","disclaimer-box svelte-1w6xccz"),r(N,"id","se-title"),r(N,"class","svelte-1w6xccz"),r(ve,"id","multiple-plots"),r(ve,"class","svelte-1w6xccz"),r(ze,"id","multiple-comp"),r(ze,"class","svelte-1w6xccz"),r(ne,"id","se-block"),r(ne,"class","component svelte-1w6xccz"),ee(ne,"margin-left","1rem"),r(de,"id","compare"),r(n,"class","page-container")},m(u,C){Wl(a,u,C),j(u,l,C),j(u,n,C),e(n,o),e(o,s),e(s,h),e(h,m),e(h,z),e(h,p),e(p,k),e(k,_),e(p,D),e(p,w),e(w,L),e(s,B),e(s,T),et.m(T,null),e(s,U),e(s,E),e(E,I),e(I,b),e(I,P),e(P,q),e(I,Je),e(I,Me),e(I,K),e(E,be),e(E,te),tt.m(te,null),e(E,Pe),e(E,J),e(J,re),e(J,Ee),e(Ee,Fe),e(J,Qe),e(J,Be),e(J,ae),e(n,He),Y&&Y.m(n,null),e(n,Ne),e(n,ce),e(ce,se),e(se,oe),e(se,Ze),e(se,le),e(le,i),e(i,F),e(F,M),e(F,Re),e(i,at),e(i,ke),e(i,Et),e(i,De),e(i,wt),e(i,Oe),t[26](Oe),e(le,kt),e(le,G),e(G,Ue),e(Ue,Dt),e(G,yt),e(G,ye),e(G,Vt),e(G,Ve),e(G,xt),W&&W.m(G,null),e(G,st),e(G,xe),t[27](xe),e(n,St),e(n,de),e(de,Se),e(de,At),e(de,ne),e(ne,N),e(N,fe),e(fe,It),e(fe,ue),e(ue,zt),e(fe,Lt),e(N,Ct),e(N,Ae),e(N,Tt),e(N,Mt),e(N,Pt),e(N,Ie),e(N,Ft),e(N,X),e(X,Ye),e(X,Bt),e(X,Ht),e(X,$e),e(X,Nt);for(let y=0;y<R.length;y+=1)R[y]&&R[y].m(X,null);e(N,Rt),e(N,he),e(ne,Ot),e(ne,ze),e(ze,ve);for(let y=0;y<O.length;y+=1)O[y]&&O[y].m(ve,null);t[30](n),pe=!0},p(u,C){if(et.p(u,C),(!pe||C[0]&128)&&H!==(H=_e(u[7],u[19])+"")&&Te(q,H),(!pe||C[0]&512)&&Te(Me,u[9]),tt.p(u,C),(!pe||C[0]&256)&&we!==(we=_e(u[8],u[19])+"")&&Te(Fe,we),(!pe||C[0]&1024)&&Te(Be,u[10]),u[13]?Y?Y.p(u,C):(Y=xl(u),Y.c(),Y.m(n,Ne)):Y&&(Y.d(1),Y=null),u[11]?W?W.p(u,C):(W=Sl(u),W.c(),W.m(G,st)):W&&(W.d(1),W=null),C[0]&2113536){We=ut(mt);let y;for(y=0;y<We.length;y+=1){const Q=Vl(u,We,y);R[y]?R[y].p(Q,C):(R[y]=Il(Q),R[y].c(),R[y].m(X,null))}for(;y<R.length;y+=1)R[y].d(1);R.length=We.length}if(C[0]&1){Ge=ut(mt);let y;for(y=0;y<Ge.length;y+=1){const Q=yl(u,Ge,y);O[y]?O[y].p(Q,C):(O[y]=Ll(Q),O[y].c(),O[y].m(ve,null))}for(;y<O.length;y+=1)O[y].d(1);O.length=Ge.length}},i(u){pe||(Gl(a.$$.fragment,u),pe=!0)},o(u){jl(a.$$.fragment,u),pe=!1},d(u){u&&(f(l),f(n)),ql(a,u),et.d(),tt.d(),Y&&Y.d(),t[26](null),W&&W.d(),t[27](null),vl(R,u),vl(O,u),t[30](null)}}}let ge=400;function _e(t,a){return a==="£"?`${a}${t}`:`${t} ${a}`}function ya(t,a,l){let n,o,s,h,m={},g,z,p,k=!1,_,D,w,L,B,T,U,E,{data:I}=a;const b=I.SEF;console.log("SEF ",b);const P=sa.find(i=>i.id===b)?.id??b,H=na.find(i=>i.id===b)?.label??b,q=ia.find(i=>i.id===b)?.def??b,Je=oa.find(i=>i.id===b)?.description??b,Me=ra.find(i=>i.id===b)?.short_units??b,K=ca.find(i=>i.id===b)?.units??b;let be,te,Pe=!1;const J=["overview","compare"];function re(){const i=window.scrollY;l(13,Pe=i>250);for(const F of J){const M=document.getElementById(F);if(!M)continue;const Re=M.getBoundingClientRect();if(Re.top<=150&&Re.bottom>=150)break}}Pl(()=>(window.addEventListener("scroll",re),re(),()=>window.removeEventListener("scroll",re))),Fl(()=>{window.removeEventListener("scroll",re)});async function Ee(){g=await Wt(da(b)),console.log("totals",g),z=await Wt(fa(b)),console.log("by cobens",z),p=await Wt(ua()),console.log("per_capita_data",p),l(5,_=(ml(g,i=>i.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),l(6,D=gl(g,i=>i.val)??"N/A"),console.log("Average Value: ",_),T=Zl(g,i=>i.val),l(9,B=T!==-1?g[T].Lookup_Value:"N/A"),l(7,w=(g[T]?.val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),E=$l(g,i=>i.val),l(10,U=E!==-1?g[E].Lookup_Value:"N/A"),l(8,L=(g[E]?.val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),kl.forEach(i=>{z[i]=+z[i]}),l(23,k=!0)}Ee().then(()=>{l(11,be=new aa(g,"LSOA",te,"val",!1,"Lookup_Value",!1)),be.initMap()});function we(){const i=ml(g,M=>M.val)??0,F=_l(Dl().thresholds(20).value(M=>M.val)(g),M=>M.length);o?.append(ht({height:ge/1.9,width:ge*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${K}`},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[ea(g,pa({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),vt([i],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:i,label:"Average"}},tip:{format:{average:M=>`${M.toFixed(2)}`,x:!1}}}),gt(g,{x:{value:i,thresholds:20},y:F+.1*F,r:5,fill:"#BD210E"}),pt({label:`${K}`,labelArrow:!1,labelAnchor:"center"})]}))}function Fe(){const i=gl(g,M=>M.val)??0,F=_l(Dl().thresholds(20).value(M=>M.val)(g),M=>M.length);h?.append(ht({height:ge/1.9,width:ge*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${K}`},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[ma(g,ta({y:"count"},{x:"val",fill:"black",opacity:.5})),vt([i],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:i,label:"Average"}},tip:{format:{average:M=>`${M.toFixed(2)}`,x:!1}}}),gt(g,{x:{value:i,thresholds:20},y:F+.1*F,r:5,fill:"#BD210E"}),pt({label:`${K}`,labelArrow:!1,labelAnchor:"center"})]}))}function Qe(){s?.append(ht({height:ge*1.5,width:ge*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[bl([0],{stroke:"#333",strokeWidth:1.25}),vt([0],{stroke:"#333",strokeWidth:.75}),gt(g,{x:"val",y:i=>i.total_per_capita*1e3,fill:i=>i.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${K}`},value:{value:i=>i.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),El({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),pt({label:`${K}`,labelArrow:!1,labelAnchor:"center"})]}))}function Be(){kl.forEach(i=>{let F;F=ht({height:ge,width:ge,marginLeft:60,marginTop:10,marginRight:10,marginBottom:60,x:{label:null},y:{label:null},style:{fontSize:"12px"},marks:[bl([0],{stroke:"#333",strokeWidth:1.25}),vt([0],{stroke:"#333",strokeWidth:.75}),gt(z.filter(M=>M.co_benefit_type==i),{x:"val",y:"total",fill:_t(i),fillOpacity:.5,r:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),El({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),pt({label:`${K}`,labelArrow:!1,labelAnchor:"center"})]}),m[i]?.append(F)})}let ae=new Set;function He(i){ae.has(i)?ae.delete(i):ae.add(i),l(14,ae=new Set(ae))}function Ne(i){Ke[i?"unshift":"push"](()=>{h=i,l(4,h)})}function ce(i){Ke[i?"unshift":"push"](()=>{o=i,l(2,o)})}function se(i){Ke[i?"unshift":"push"](()=>{s=i,l(3,s)})}function oe(i){Ke[i?"unshift":"push"](()=>{te=i,l(12,te)})}const lt=i=>He(i.id);function Ze(i,F){Ke[i?"unshift":"push"](()=>{m[F.id]=i,l(0,m)})}function le(i){Ke[i?"unshift":"push"](()=>{n=i,l(1,n)})}return t.$$set=i=>{"data"in i&&l(22,I=i.data)},t.$$.update=()=>{t.$$.dirty[0]&8388609&&(Object.values(m).forEach(i=>{i.firstChild?.remove()}),k&&(we(),Fe(),Qe(),Be()))},[m,n,o,s,h,_,D,w,L,B,U,be,te,Pe,ae,P,H,q,Je,Me,K,He,I,k,Ne,ce,se,oe,lt,Ze,le]}class Oa extends Rl{constructor(a){super(),Ol(this,a,ya,Da,Ml,{data:22},null,[-1,-1])}}export{Oa as component};
