import{s as Gs,d as u,w as js,p as n,i as U,b as s,B as Ps,C as Mt,g as b,c as r,e as h,q as T,f as S,j as m,h as o,t as I,r as Xs,a0 as Zs,a as Se,E as Js,H as Qs,A as $t}from"../chunks/BevTp-kf.js";import{S as $s,i as ta,d as ea,t as la,a as sa,m as aa,c as na,b as ia}from"../chunks/C7e0BwVj.js";import{N as ra,e as _s}from"../chunks/DvHzCNfM.js";import"../chunks/F40_IDQw.js";import{au as Wl,av as oa,aw as ca,ax as fa,ay as ua,az as da,X as ha,aA as va,aB as pa,a7 as gs,aC as ba,i as Bs,aD as ws,g as ma,aE as _a,M as ga,F as wa,l as ya,n as Ea,o as Ca,q as Da,G as ka,aF as Sa,aG as Fs,aH as Ia,am as Hs,aI as Aa,ar as La,P as Os,aJ as xa,I as ke,O as Ze,as as Va,at as ys,an as Es}from"../chunks/lkIfnYzw.js";import{M as Na}from"../chunks/D1YgqXay.js";import{q as Pt,C as Cs,D as Ta,a as te,s as Ds,g as Ma,S as ks,T as Pa,b as Ba,c as Fa,d as Yl,M as Ha,i as Oa}from"../chunks/C86AsLJh.js";import{g as be,o as za,p as Ra,j as Ua,k as qa,q as Wa,l as Ya}from"../chunks/C6FVUdRl.js";import{c as Ka,b as Ga}from"../chunks/BBmCwvQl.js";import{a as zs}from"../chunks/C_CmdUB-.js";import{d as Rs}from"../chunks/BPOdavE_.js";import{a as ja}from"../chunks/DfRp9xuZ.js";function Us(a,t=Wl){if(typeof a[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let l=Array.from(a);const e=new Float64Array(l.length);t.length!==2&&(l=l.map(t),t=Wl);const i=(_,y)=>t(l[_],l[y]);let f,c;return a=Uint32Array.from(l,(_,y)=>y),a.sort(t===Wl?(_,y)=>oa(l[_],l[y]):ca(i)),a.forEach((_,y)=>{const C=i(_,f===void 0?_:f);C>=0?((f===void 0||C>0)&&(f=_,c=y),e[_]=c):e[_]=NaN}),e}function Xa(a={},t={}){const l=fa(t),e=Object.entries(a).map(([i,f])=>{const c=ua(i,t);if(c==null)throw new Error(`missing channel: ${i}`);const[_,y]=da(c);return{key:i,input:c,output:_,setOutput:y,map:Za(f)}});return{...ha(t,(i,f)=>{const c=gs(i,l),_=e.map(({input:C})=>gs(i,C)),y=e.map(({setOutput:C})=>C(new Array(i.length)));for(const C of f)for(const E of c?ba(C,p=>c[p]).values():[C])e.forEach(({map:p},D)=>p.mapIndex(E,_[D],y[D]));return{data:i,facets:f}}),...Object.fromEntries(e.map(({key:i,output:f})=>[i,f]))}}function Za(a){if(a==null)throw new Error("missing map");if(typeof a.mapIndex=="function")return a;if(typeof a.map=="function"&&va(a))return Ja(a);if(typeof a=="function")return Kl(pa(a));switch(`${a}`.toLowerCase()){case"cumsum":return $a;case"rank":return Kl((t,l)=>Us(t,e=>l[e]));case"quantile":return Kl((t,l)=>Qa(t,e=>l[e]))}throw new Error(`invalid map: ${a}`)}function Ja(a){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:a.map.bind(a)}}function Qa(a,t){const l=Ka(a,t)-1;return Us(a,t).map(e=>e/l)}function Kl(a){return{mapIndex(t,l,e){const i=a(t,l);if(i.length!==t.length)throw new Error("map function returned a mismatched length");for(let f=0,c=t.length;f<c;++f)e[t[f]]=i[f]}}}const $a={mapIndex(a,t,l){let e=0;for(const i of a)l[i]=e+=t[i]}},tn={ariaLabel:"tick",fill:null,stroke:"currentColor"};class en extends ga{constructor(t,l,e){super(t,l,e,tn),wa(this,e)}render(t,l,e,i,f){return ya("svg:g",f).call(Ea,this,i,f).call(this._transform,this,l).call(c=>c.selectAll().data(t).enter().append("line").call(Ca,this).attr("x1",this._x1(l,e,i)).attr("x2",this._x2(l,e,i)).attr("y1",this._y1(l,e,i)).attr("y2",this._y2(l,e,i)).call(Da,this,e).call(ka,this,e,f)).node()}}class ln extends en{constructor(t,l={}){const{x:e,y:i,inset:f=0,insetRight:c=f,insetLeft:_=f}=l;super(t,{y:{value:i,scale:"y"},x:{value:e,scale:"x",type:"band",optional:!0}},l),this.insetRight=ws(c),this.insetLeft=ws(_)}_transform(t,l,{y:e}){t.call(ma,l,{y:e},0,_a)}_x1({x:t},{x:l},{marginLeft:e}){const{insetLeft:i}=this;return l&&t?f=>l[f]+i:e+i}_x2({x:t},{x:l},{width:e,marginRight:i}){const{insetRight:f}=this;return l&&t?c=>l[c]+t.bandwidth()-f:e-i-f}_y1(t,{y:l}){return e=>l[e]}_y2(t,{y:l}){return e=>l[e]}}function sn(a,{y:t=Bs,...l}={}){return new ln(a,{...l,y:t})}function an(a,{y:t=Bs,x:l=null,r:e,fill:i="#ccc",fillOpacity:f,stroke:c="currentColor",strokeOpacity:_,strokeWidth:y=2,sort:C,...E}={}){const p=l!=null?Fs:Ia;return Sa(Hs(a,p({y1:qs,y2:Ws},{x:l,y:t,stroke:c,strokeOpacity:_,...E})),zs(a,p({y1:"p25",y2:"p75"},{x:l,y:t,fill:i,fillOpacity:f,...E})),sn(a,p({y:"p50"},{x:l,y:t,stroke:c,strokeOpacity:_,strokeWidth:y,sort:C,...E})),Rs(a,Xa({y:nn},{x:l,y:t,z:l,r:e,stroke:c,strokeOpacity:_,...E})))}function nn(a){const t=qs(a),l=Ws(a);return a.map(e=>e<t||e>l?e:NaN)}function qs(a){const t=Ys(a)*2.5-Ks(a)*1.5;return Aa(a,l=>l>=t?l:NaN)}function Ws(a){const t=Ks(a)*2.5-Ys(a)*1.5;return La(a,l=>l<=t?l:NaN)}function Ys(a){return Os(a,.25)}function Ks(a){return Os(a,.75)}const rn=""+new URL("../assets/total.DNiyzZzC.png",import.meta.url).href;function Ss(a,t,l){const e=a.slice();return e[45]=t[l],e[46]=t,e[47]=l,e}function Is(a){let t,l,e=a[4].toLocaleString()+"",i;return{c(){t=o("span"),l=I("£"),i=I(e),this.h()},l(f){t=r(f,"SPAN",{class:!0});var c=h(t);l=S(c,"£"),i=S(c,e),c.forEach(u),this.h()},h(){n(t,"class","waffle-big svelte-1t0bw1b")},m(f,c){U(f,t,c),s(t,l),s(t,i)},p(f,c){c[0]&16&&e!==(e=f[4].toLocaleString()+"")&&Se(i,e)},d(f){f&&u(t)}}}function on(a){let t,l="National costs";return{c(){t=o("div"),t.textContent=l,this.h()},l(e){t=r(e,"DIV",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-o12owz"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-1t0bw1b")},m(e,i){U(e,t,i)},d(e){e&&u(t)}}}function cn(a){let t,l="National benefits";return{c(){t=o("div"),t.textContent=l,this.h()},l(e){t=r(e,"DIV",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-10ytukz"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-1t0bw1b")},m(e,i){U(e,t,i)},d(e){e&&u(t)}}}function As(a){let t,l,e=a[6].toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",i;return{c(){t=o("span"),l=I("£"),i=I(e),this.h()},l(f){t=r(f,"SPAN",{class:!0});var c=h(t);l=S(c,"£"),i=S(c,e),c.forEach(u),this.h()},h(){n(t,"class","waffle-big svelte-1t0bw1b")},m(f,c){U(f,t,c),s(t,l),s(t,i)},p(f,c){c[0]&64&&e!==(e=f[6].toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&Se(i,e)},d(f){f&&u(t)}}}function fn(a){let t,l="Per capita costs";return{c(){t=o("div"),t.textContent=l,this.h()},l(e){t=r(e,"DIV",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-6pmcl0"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-1t0bw1b")},m(e,i){U(e,t,i)},d(e){e&&u(t)}}}function un(a){let t,l="Per capita benefits";return{c(){t=o("div"),t.textContent=l,this.h()},l(e){t=r(e,"DIV",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-g1rvwk"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-1t0bw1b")},m(e,i){U(e,t,i)},d(e){e&&u(t)}}}function Ls(a){let t,l,e=(a[4]/a[5]*100).toFixed(2)+"",i,f,c,_="%";return{c(){t=o("div"),l=o("span"),i=I(e),f=m(),c=o("span"),c.textContent=_,this.h()},l(y){t=r(y,"DIV",{class:!0});var C=h(t);l=r(C,"SPAN",{class:!0});var E=h(l);i=S(E,e),E.forEach(u),f=b(C),c=r(C,"SPAN",{class:!0,"data-svelte-h":!0}),T(c)!=="svelte-jxggz7"&&(c.textContent=_),C.forEach(u),this.h()},h(){n(l,"class","waffle-big svelte-1t0bw1b"),n(c,"class","small svelte-1t0bw1b"),n(t,"class","waffle-value svelte-1t0bw1b")},m(y,C){U(y,t,C),s(t,l),s(l,i),s(t,f),s(t,c)},p(y,C){C[0]&48&&e!==(e=(y[4]/y[5]*100).toFixed(2)+"")&&Se(i,e)},d(y){y&&u(t)}}}function xs(a){let t,l,e,i,f,c,_,y,C,E=Ms(a[10])+"",p,D=a[4]&&Vs(a);return{c(){t=o("div"),l=o("div"),e=o("img"),f=m(),c=o("span"),_=I(a[15]),y=m(),D&&D.c(),C=I(`
            >> `),p=I(E),this.h()},l(B){t=r(B,"DIV",{class:!0});var F=h(t);l=r(F,"DIV",{class:!0});var L=h(l);e=r(L,"IMG",{src:!0,alt:!0,class:!0}),f=b(L),c=r(L,"SPAN",{class:!0});var V=h(c);_=S(V,a[15]),y=b(V),D&&D.l(V),C=S(V,`
            >> `),p=S(V,E),V.forEach(u),L.forEach(u),F.forEach(u),this.h()},h(){Ps(e.src,i=a[17])||n(e,"src",i),n(e,"alt","Icon"),n(e,"class","mini-heading-icon"),n(c,"class","mini-header-text"),n(l,"class","mini-header-content"),n(t,"class","mini-header")},m(B,F){U(B,t,F),s(t,l),s(l,e),s(l,f),s(l,c),s(c,_),s(c,y),D&&D.m(c,null),s(c,C),s(c,p)},p(B,F){B[4]?D?D.p(B,F):(D=Vs(B),D.c(),D.m(c,C)):D&&(D.d(1),D=null),F[0]&1024&&E!==(E=Ms(B[10])+"")&&Se(p,E)},d(B){B&&u(t),D&&D.d()}}}function Vs(a){let t,l,e,i;return{c(){t=o("span"),l=I("(UK total: £"),e=I(a[4]),i=I(" billion)"),this.h()},l(f){t=r(f,"SPAN",{class:!0});var c=h(t);l=S(c,"(UK total: £"),e=S(c,a[4]),i=S(c," billion)"),c.forEach(u),this.h()},h(){n(t,"class","mini-header-value")},m(f,c){U(f,t,c),s(t,l),s(t,e),s(t,i)},p(f,c){c[0]&16&&Se(e,f[4])},d(f){f&&u(t)}}}function dn(a){let t,l="Each bar shows the total benefits or costs obtained in that period.";return{c(){t=o("p"),t.textContent=l,this.h()},l(e){t=r(e,"P",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-1ualj8m"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-1t0bw1b")},m(e,i){U(e,t,i)},d(e){e&&u(t)}}}function hn(a){let t,l="Each bar shows the total values obtained in that period.";return{c(){t=o("p"),t.textContent=l,this.h()},l(e){t=r(e,"P",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-19uixzb"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-1t0bw1b")},m(e,i){U(e,t,i)},d(e){e&&u(t)}}}function vn(a){let t,l="Along the x-axis, see how many data zones (y-axis) lose/benefit how much.";return{c(){t=o("p"),t.textContent=l,this.h()},l(e){t=r(e,"P",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-wn292q"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-1t0bw1b")},m(e,i){U(e,t,i)},d(e){e&&u(t)}}}function pn(a){let t,l="Along the x-axis, see how many data zones (y-axis) benefit by how much.";return{c(){t=o("p"),t.textContent=l,this.h()},l(e){t=r(e,"P",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-10gpxc9"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-1t0bw1b")},m(e,i){U(e,t,i)},d(e){e&&u(t)}}}function Ns(a){let t,l,e=a[7].legend().outerHTML+"";return{c(){t=o("div"),l=new Qs(!1),this.h()},l(i){t=r(i,"DIV",{id:!0});var f=h(t);l=Js(f,!1),f.forEach(u),this.h()},h(){l.a=null,n(t,"id","legend")},m(i,f){U(i,t,f),l.m(e,t)},p(i,f){f[0]&128&&e!==(e=i[7].legend().outerHTML+"")&&l.p(e)},d(i){i&&u(t)}}}function Ts(a){let t,l,e=a[45].label+"",i,f,c,_=a[45].def+"",y,C,E,p=a[45],D;const B=()=>a[27](E,p),F=()=>a[27](null,p);return{c(){t=o("div"),l=o("h3"),i=I(e),f=m(),c=o("p"),y=I(_),C=m(),E=o("div"),D=m(),this.h()},l(L){t=r(L,"DIV",{class:!0});var V=h(t);l=r(V,"H3",{class:!0});var dt=h(l);i=S(dt,e),dt.forEach(u),f=b(V),c=r(V,"P",{class:!0});var tt=h(c);y=S(tt,_),tt.forEach(u),C=b(V),E=r(V,"DIV",{class:!0}),h(E).forEach(u),D=b(V),V.forEach(u),this.h()},h(){n(l,"class","component-chart-title svelte-1t0bw1b"),n(c,"class","component-chart-caption svelte-1t0bw1b"),n(E,"class","plot"),n(t,"class","plot-container svelte-1t0bw1b")},m(L,V){U(L,t,V),s(t,l),s(l,i),s(t,f),s(t,c),s(c,y),s(t,C),s(t,E),B(),s(t,D)},p(L,V){a=L,p!==a[45]&&(F(),p=a[45],B())},d(L){L&&u(t),F()}}}function bn(a){let t,l,e,i,f,c,_,y="Co-Benefit Report",C,E,p,D,B,F,L,V,dt,tt,rt,ee,ht,Bt,le,j,st,et,at,lt,Ft,vt,Ht="billion",_e,nt,H,pt,ge,we,it,se,bt,Ie="Contribution to national benefits",ye,Et,Ee,Ct,v,w,g,P,N,Ce='<p class="section-subtitle">Overview</p>',De,X,A,ot,k,O,Ae=a[15].toLowerCase()+"",ae,Je,Qe,Le,Ot,Gl=`<div class="tooltip-wrapper svelte-1t0bw1b"><img class="aggregation-icon svelte-1t0bw1b" src="${rn}" alt="icon"/> <span class="tooltip-text svelte-1t0bw1b">This chart uses total values. i.e. shows the total benefit/cost for all of the UK.</span></div>`,$e,ne,tl,el,ll,Dt,sl,zt,jl=a[15].toLowerCase()+"",al,nl,il,xe,kt,Xl="",rl,ol,cl,Q,St,fl,Rt,Zl=a[15].toLowerCase()+"",ul,dl,hl,Ut,Jl="Scroll for zooming in and out.",vl,Ve,mt,Ql="",pl,It,qt,$l='<p class="section-subtitle">Socio-economic factors</p>',bl,ct,Z,At,ml,Wt,ts=a[15]?.toLowerCase()+"",_l,gl,wl,Yt,es="Each plot shows the distribution of benefits or costs depending on a given socio-economic factor.",yl,El,Cl,Lt,ls='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Discrete scales:</strong> The first set of socio-economic factors are using categorical values where the x-axis is non-linear:  EPC, Tenure, Typology, Fuel type, Gas flag, Number of cars.</p>',Dl,$,Kt,ss="Legend:",kl,Sl,Il,ie,as="The scatter plots are shaded by nation.",Al,J,Ll,xl,Gt,re,Vl,Nl,jt,oe,Tl,Ml,Xt,ce,Pl,Bl,Zt,fe,Fl,Hl,Jt,xt,Vt;t=new ra({});let q=a[4]&&Is(a);function ns(d,x){return d[4]>0?cn:on}let Ne=ns(a),_t=Ne(a),W=a[4]&&As(a);function is(d,x){return d[4]>0?un:fn}let Te=is(a),gt=Te(a),Y=a[4]&&Ls(a),K=a[9]&&xs(a);function rs(d,x){return d[4]>0?hn:dn}let Me=rs(a),wt=Me(a);function os(d,x){return d[4]>0?pn:vn}let Pe=os(a),yt=Pe(a),G=a[7]&&Ns(a),ue=_s(ks),R=[];for(let d=0;d<ue.length;d+=1)R[d]=Ts(Ss(a,ue,d));return{c(){ia(t.$$.fragment),l=m(),e=o("div"),i=o("div"),f=o("div"),c=o("div"),_=o("p"),_.textContent=y,C=m(),E=o("div"),p=o("h1"),D=o("img"),F=m(),L=o("div"),V=m(),dt=I(a[15]),tt=m(),rt=o("div"),ee=m(),ht=o("p"),Bt=I(a[16]),le=m(),j=o("div"),st=o("div"),et=o("div"),at=o("div"),lt=o("div"),q&&q.c(),Ft=m(),vt=o("span"),vt.textContent=Ht,_e=m(),_t.c(),nt=m(),H=o("div"),pt=o("div"),W&&W.c(),ge=m(),gt.c(),we=m(),it=o("div"),Y&&Y.c(),se=m(),bt=o("div"),bt.textContent=Ie,ye=m(),Et=o("div"),Ee=m(),Ct=o("div"),v=m(),K&&K.c(),w=m(),g=o("div"),P=o("div"),N=o("div"),N.innerHTML=Ce,De=m(),X=o("div"),A=o("div"),ot=o("h3"),k=I("Total values (£, billion) for "),O=o("span"),ae=I(Ae),Je=I(" over time"),Qe=m(),wt.c(),Le=m(),Ot=o("div"),Ot.innerHTML=Gl,$e=m(),ne=o("div"),tl=m(),el=o("br"),ll=m(),Dt=o("h3"),sl=I("Distribution of values (£, billion) for "),zt=o("span"),al=I(jl),nl=I(" by UK data zones"),il=m(),yt.c(),xe=m(),kt=o("div"),kt.innerHTML=Xl,rl=m(),ol=o("br"),cl=m(),Q=o("div"),St=o("h3"),fl=I("Total values (£, billion) for "),Rt=o("span"),ul=I(Zl),dl=I(" across the UK"),hl=m(),Ut=o("p"),Ut.textContent=Jl,vl=m(),G&&G.c(),Ve=m(),mt=o("div"),mt.innerHTML=Ql,pl=m(),It=o("div"),qt=o("div"),qt.innerHTML=$l,bl=m(),ct=o("div"),Z=o("div"),At=o("h3"),ml=I("Mapping the impact of "),Wt=o("span"),_l=I(ts),gl=I(" across UK local authorities according to socio-economic factors"),wl=m(),Yt=o("p"),Yt.textContent=es,yl=m(),El=o("br"),Cl=m(),Lt=o("div"),Lt.innerHTML=ls,Dl=m(),$=o("div"),Kt=o("strong"),Kt.textContent=ss,kl=m(),Sl=o("br"),Il=m(),ie=o("span"),ie.textContent=as,Al=m(),J=o("ul"),Ll=o("br"),xl=m(),Gt=o("li"),re=o("span"),Vl=I(`
                            Scotland`),Nl=m(),jt=o("li"),oe=o("span"),Tl=I(`
                            Northern Ireland`),Ml=m(),Xt=o("li"),ce=o("span"),Pl=I("England"),Bl=m(),Zt=o("li"),fe=o("span"),Fl=I("Wales"),Hl=m(),Jt=o("div"),xt=o("div");for(let d=0;d<R.length;d+=1)R[d].c();this.h()},l(d){na(t.$$.fragment,d),l=b(d),e=r(d,"DIV",{class:!0});var x=h(e);i=r(x,"DIV",{class:!0});var M=h(i);f=r(M,"DIV",{class:!0});var Qt=h(f);c=r(Qt,"DIV",{class:!0});var Be=h(c);_=r(Be,"P",{class:!0,"data-svelte-h":!0}),T(_)!=="svelte-1flv0v9"&&(_.textContent=y),C=b(Be),E=r(Be,"DIV",{class:!0});var de=h(E);p=r(de,"H1",{class:!0});var he=h(p);D=r(he,"IMG",{src:!0,alt:!0,class:!0}),F=b(he),L=r(he,"DIV",{style:!0}),h(L).forEach(u),V=b(he),dt=S(he,a[15]),he.forEach(u),tt=b(de),rt=r(de,"DIV",{style:!0}),h(rt).forEach(u),ee=b(de),ht=r(de,"P",{class:!0});var cs=h(ht);Bt=S(cs,a[16]),cs.forEach(u),de.forEach(u),Be.forEach(u),le=b(Qt),j=r(Qt,"DIV",{class:!0});var ve=h(j);st=r(ve,"DIV",{class:!0});var fs=h(st);et=r(fs,"DIV",{class:!0});var pe=h(et);at=r(pe,"DIV",{class:!0});var Fe=h(at);lt=r(Fe,"DIV",{class:!0});var He=h(lt);q&&q.l(He),Ft=b(He),vt=r(He,"SPAN",{class:!0,"data-svelte-h":!0}),T(vt)!=="svelte-tlhydp"&&(vt.textContent=Ht),He.forEach(u),_e=b(Fe),_t.l(Fe),Fe.forEach(u),nt=b(pe),H=r(pe,"DIV",{class:!0});var Oe=h(H);pt=r(Oe,"DIV",{class:!0});var us=h(pt);W&&W.l(us),us.forEach(u),ge=b(Oe),gt.l(Oe),Oe.forEach(u),we=b(pe),it=r(pe,"DIV",{class:!0});var ze=h(it);Y&&Y.l(ze),se=b(ze),bt=r(ze,"DIV",{class:!0,"data-svelte-h":!0}),T(bt)!=="svelte-1v3rfza"&&(bt.textContent=Ie),ze.forEach(u),pe.forEach(u),fs.forEach(u),ye=b(ve),Et=r(ve,"DIV",{class:!0}),h(Et).forEach(u),Ee=b(ve),Ct=r(ve,"DIV",{class:!0}),h(Ct).forEach(u),ve.forEach(u),Qt.forEach(u),M.forEach(u),v=b(x),K&&K.l(x),w=b(x),g=r(x,"DIV",{class:!0});var Re=h(g);P=r(Re,"DIV",{id:!0});var Ue=h(P);N=r(Ue,"DIV",{class:!0,"data-svelte-h":!0}),T(N)!=="svelte-ll1i43"&&(N.innerHTML=Ce),De=b(Ue),X=r(Ue,"DIV",{id:!0,class:!0});var qe=h(X);A=r(qe,"DIV",{class:!0});var z=h(A);ot=r(z,"H3",{class:!0});var We=h(ot);k=S(We,"Total values (£, billion) for "),O=r(We,"SPAN",{style:!0});var ds=h(O);ae=S(ds,Ae),ds.forEach(u),Je=S(We," over time"),We.forEach(u),Qe=b(z),wt.l(z),Le=b(z),Ot=r(z,"DIV",{class:!0,"data-svelte-h":!0}),T(Ot)!=="svelte-bj1j46"&&(Ot.innerHTML=Gl),$e=b(z),ne=r(z,"DIV",{class:!0}),h(ne).forEach(u),tl=b(z),el=r(z,"BR",{}),ll=b(z),Dt=r(z,"H3",{class:!0});var Ye=h(Dt);sl=S(Ye,"Distribution of values (£, billion) for "),zt=r(Ye,"SPAN",{style:!0});var hs=h(zt);al=S(hs,jl),hs.forEach(u),nl=S(Ye," by UK data zones"),Ye.forEach(u),il=b(z),yt.l(z),xe=b(z),kt=r(z,"DIV",{class:!0,"data-svelte-h":!0}),T(kt)!=="svelte-1ta2xvp"&&(kt.innerHTML=Xl),rl=b(z),ol=r(z,"BR",{}),z.forEach(u),cl=b(qe),Q=r(qe,"DIV",{class:!0});var Nt=h(Q);St=r(Nt,"H3",{class:!0});var Ke=h(St);fl=S(Ke,"Total values (£, billion) for "),Rt=r(Ke,"SPAN",{style:!0});var vs=h(Rt);ul=S(vs,Zl),vs.forEach(u),dl=S(Ke," across the UK"),Ke.forEach(u),hl=b(Nt),Ut=r(Nt,"P",{class:!0,"data-svelte-h":!0}),T(Ut)!=="svelte-1ask2se"&&(Ut.textContent=Jl),vl=b(Nt),G&&G.l(Nt),Ve=b(Nt),mt=r(Nt,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),T(mt)!=="svelte-1bex1ev"&&(mt.innerHTML=Ql),Nt.forEach(u),qe.forEach(u),Ue.forEach(u),pl=b(Re),It=r(Re,"DIV",{id:!0});var Ge=h(It);qt=r(Ge,"DIV",{class:!0,"data-svelte-h":!0}),T(qt)!=="svelte-dcew9z"&&(qt.innerHTML=$l),bl=b(Ge),ct=r(Ge,"DIV",{id:!0,class:!0,style:!0});var je=h(ct);Z=r(je,"DIV",{id:!0,class:!0});var ft=h(Z);At=r(ft,"H3",{class:!0});var Xe=h(At);ml=S(Xe,"Mapping the impact of "),Wt=r(Xe,"SPAN",{style:!0});var ps=h(Wt);_l=S(ps,ts),ps.forEach(u),gl=S(Xe," across UK local authorities according to socio-economic factors"),Xe.forEach(u),wl=b(ft),Yt=r(ft,"P",{class:!0,"data-svelte-h":!0}),T(Yt)!=="svelte-hz97te"&&(Yt.textContent=es),yl=b(ft),El=r(ft,"BR",{}),Cl=b(ft),Lt=r(ft,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),T(Lt)!=="svelte-250g83"&&(Lt.innerHTML=ls),Dl=b(ft),$=r(ft,"DIV",{id:!0,class:!0});var Tt=h($);Kt=r(Tt,"STRONG",{style:!0,"data-svelte-h":!0}),T(Kt)!=="svelte-xb363n"&&(Kt.textContent=ss),kl=b(Tt),Sl=r(Tt,"BR",{}),Il=b(Tt),ie=r(Tt,"SPAN",{"data-svelte-h":!0}),T(ie)!=="svelte-189nhhe"&&(ie.textContent=as),Al=b(Tt),J=r(Tt,"UL",{class:!0});var ut=h(J);Ll=r(ut,"BR",{}),xl=b(ut),Gt=r(ut,"LI",{class:!0});var Ol=h(Gt);re=r(Ol,"SPAN",{class:!0,style:!0}),h(re).forEach(u),Vl=S(Ol,`
                            Scotland`),Ol.forEach(u),Nl=b(ut),jt=r(ut,"LI",{class:!0});var zl=h(jt);oe=r(zl,"SPAN",{class:!0,style:!0}),h(oe).forEach(u),Tl=S(zl,`
                            Northern Ireland`),zl.forEach(u),Ml=b(ut),Xt=r(ut,"LI",{class:!0});var Rl=h(Xt);ce=r(Rl,"SPAN",{class:!0,style:!0}),h(ce).forEach(u),Pl=S(Rl,"England"),Rl.forEach(u),Bl=b(ut),Zt=r(ut,"LI",{class:!0});var Ul=h(Zt);fe=r(Ul,"SPAN",{class:!0,style:!0}),h(fe).forEach(u),Fl=S(Ul,"Wales"),Ul.forEach(u),ut.forEach(u),Tt.forEach(u),ft.forEach(u),Hl=b(je),Jt=r(je,"DIV",{id:!0,class:!0});var bs=h(Jt);xt=r(bs,"DIV",{id:!0,class:!0});var ms=h(xt);for(let ql=0;ql<R.length;ql+=1)R[ql].l(ms);ms.forEach(u),bs.forEach(u),je.forEach(u),Ge.forEach(u),Re.forEach(u),x.forEach(u),this.h()},h(){n(_,"class","page-subtitle svelte-1t0bw1b"),Ps(D.src,B=a[17])||n(D,"src",B),n(D,"alt","Icon"),n(D,"class","heading-icon svelte-1t0bw1b"),Mt(L,"margin-top","10px"),n(p,"class","page-title svelte-1t0bw1b"),Mt(rt,"margin-top","14px"),n(ht,"class","definition svelte-1t0bw1b"),n(E,"class","title-container"),n(c,"class","header-text svelte-1t0bw1b"),n(vt,"class","small svelte-1t0bw1b"),n(lt,"class","waffle-value svelte-1t0bw1b"),n(at,"class","waffle-stat svelte-1t0bw1b"),n(pt,"class","waffle-value svelte-1t0bw1b"),n(H,"class","waffle-stat svelte-1t0bw1b"),n(bt,"class","waffle-caption svelte-1t0bw1b"),n(it,"class","waffle-stat svelte-1t0bw1b"),n(et,"class","waffle-stats svelte-1t0bw1b"),n(st,"class","waffle-label svelte-1t0bw1b"),n(Et,"class","waffle-el"),n(Ct,"class","waffle-bg svelte-1t0bw1b"),n(j,"class","header-waffle-wrapper svelte-1t0bw1b"),n(f,"class","header-content svelte-1t0bw1b"),n(i,"class","section header svelte-1t0bw1b"),n(N,"class","section-header"),n(O,"style",a[13]),n(ot,"class","component-title"),n(Ot,"class","aggregation-icon-container svelte-1t0bw1b"),n(ne,"class","plot-bar svelte-1t0bw1b"),n(zt,"style",a[13]),n(Dt,"class","component-title"),n(kt,"class","plot"),n(A,"class","component singlevis"),n(Rt,"style",a[13]),n(St,"class","component-title"),n(Ut,"class","description svelte-1t0bw1b"),n(mt,"id","map"),n(mt,"class","svelte-1t0bw1b"),n(Q,"class","component column"),n(X,"id","vis-block"),n(X,"class","svelte-1t0bw1b"),n(P,"id","overview"),n(qt,"class","section-header"),n(Wt,"style",a[13]),n(At,"class","component-title"),n(Yt,"class","explanation"),n(Lt,"id","se-disclaimer"),n(Lt,"class","disclaimer-box svelte-1t0bw1b"),Mt(Kt,"margin-bottom","1rem"),n(re,"class","legend-color svelte-1t0bw1b"),Mt(re,"background-color",Pt(a[14])[0]),n(Gt,"class","svelte-1t0bw1b"),n(oe,"class","legend-color svelte-1t0bw1b"),Mt(oe,"background-color",Pt(a[14])[1]),n(jt,"class","svelte-1t0bw1b"),n(ce,"class","legend-color svelte-1t0bw1b"),Mt(ce,"background-color",Pt(a[14])[2]),n(Xt,"class","svelte-1t0bw1b"),n(fe,"class","legend-color svelte-1t0bw1b"),Mt(fe,"background-color",Pt(a[14])[3]),n(Zt,"class","svelte-1t0bw1b"),n(J,"class","legend-list svelte-1t0bw1b"),n($,"id","se-legend"),n($,"class","legend-box svelte-1t0bw1b"),n(Z,"id","se-title"),n(Z,"class","svelte-1t0bw1b"),n(xt,"id","multiple-plots"),n(xt,"class","svelte-1t0bw1b"),n(Jt,"id","multiple-comp"),n(Jt,"class","svelte-1t0bw1b"),n(ct,"id","se-block"),n(ct,"class","component svelte-1t0bw1b"),Mt(ct,"margin-left","1rem"),n(It,"id","compare"),n(g,"class","section"),n(e,"class","page-container")},m(d,x){aa(t,d,x),U(d,l,x),U(d,e,x),s(e,i),s(i,f),s(f,c),s(c,_),s(c,C),s(c,E),s(E,p),s(p,D),s(p,F),s(p,L),s(p,V),s(p,dt),s(E,tt),s(E,rt),s(E,ee),s(E,ht),s(ht,Bt),s(f,le),s(f,j),s(j,st),s(st,et),s(et,at),s(at,lt),q&&q.m(lt,null),s(lt,Ft),s(lt,vt),s(at,_e),_t.m(at,null),s(et,nt),s(et,H),s(H,pt),W&&W.m(pt,null),s(H,ge),gt.m(H,null),s(et,we),s(et,it),Y&&Y.m(it,null),s(it,se),s(it,bt),s(j,ye),s(j,Et),a[22](Et),s(j,Ee),s(j,Ct),a[23](Ct),s(e,v),K&&K.m(e,null),s(e,w),s(e,g),s(g,P),s(P,N),s(P,De),s(P,X),s(X,A),s(A,ot),s(ot,k),s(ot,O),s(O,ae),s(ot,Je),s(A,Qe),wt.m(A,null),s(A,Le),s(A,Ot),s(A,$e),s(A,ne),a[24](ne),s(A,tl),s(A,el),s(A,ll),s(A,Dt),s(Dt,sl),s(Dt,zt),s(zt,al),s(Dt,nl),s(A,il),yt.m(A,null),s(A,xe),s(A,kt),a[25](kt),s(A,rl),s(A,ol),s(X,cl),s(X,Q),s(Q,St),s(St,fl),s(St,Rt),s(Rt,ul),s(St,dl),s(Q,hl),s(Q,Ut),s(Q,vl),G&&G.m(Q,null),s(Q,Ve),s(Q,mt),a[26](mt),s(g,pl),s(g,It),s(It,qt),s(It,bl),s(It,ct),s(ct,Z),s(Z,At),s(At,ml),s(At,Wt),s(Wt,_l),s(At,gl),s(Z,wl),s(Z,Yt),s(Z,yl),s(Z,El),s(Z,Cl),s(Z,Lt),s(Z,Dl),s(Z,$),s($,Kt),s($,kl),s($,Sl),s($,Il),s($,ie),s($,Al),s($,J),s(J,Ll),s(J,xl),s(J,Gt),s(Gt,re),s(Gt,Vl),s(J,Nl),s(J,jt),s(jt,oe),s(jt,Tl),s(J,Ml),s(J,Xt),s(Xt,ce),s(Xt,Pl),s(J,Bl),s(J,Zt),s(Zt,fe),s(Zt,Fl),s(ct,Hl),s(ct,Jt),s(Jt,xt);for(let M=0;M<R.length;M+=1)R[M]&&R[M].m(xt,null);a[28](e),Vt=!0},p(d,x){if(d[4]?q?q.p(d,x):(q=Is(d),q.c(),q.m(lt,Ft)):q&&(q.d(1),q=null),Ne!==(Ne=ns(d))&&(_t.d(1),_t=Ne(d),_t&&(_t.c(),_t.m(at,null))),d[4]?W?W.p(d,x):(W=As(d),W.c(),W.m(pt,null)):W&&(W.d(1),W=null),Te!==(Te=is(d))&&(gt.d(1),gt=Te(d),gt&&(gt.c(),gt.m(H,null))),d[4]?Y?Y.p(d,x):(Y=Ls(d),Y.c(),Y.m(it,se)):Y&&(Y.d(1),Y=null),d[9]?K?K.p(d,x):(K=xs(d),K.c(),K.m(e,w)):K&&(K.d(1),K=null),(!Vt||x[0]&8192)&&n(O,"style",d[13]),Me!==(Me=rs(d))&&(wt.d(1),wt=Me(d),wt&&(wt.c(),wt.m(A,Le))),(!Vt||x[0]&8192)&&n(zt,"style",d[13]),Pe!==(Pe=os(d))&&(yt.d(1),yt=Pe(d),yt&&(yt.c(),yt.m(A,xe))),(!Vt||x[0]&8192)&&n(Rt,"style",d[13]),d[7]?G?G.p(d,x):(G=Ns(d),G.c(),G.m(Q,Ve)):G&&(G.d(1),G=null),(!Vt||x[0]&8192)&&n(Wt,"style",d[13]),x[0]&2){ue=_s(ks);let M;for(M=0;M<ue.length;M+=1){const Qt=Ss(d,ue,M);R[M]?R[M].p(Qt,x):(R[M]=Ts(Qt),R[M].c(),R[M].m(xt,null))}for(;M<R.length;M+=1)R[M].d(1);R.length=ue.length}},i(d){Vt||(sa(t.$$.fragment,d),Vt=!0)},o(d){la(t.$$.fragment,d),Vt=!1},d(d){d&&(u(l),u(e)),ea(t,d),q&&q.d(),_t.d(),W&&W.d(),gt.d(),Y&&Y.d(),a[22](null),a[23](null),K&&K.d(),wt.d(),a[24](null),yt.d(),a[25](null),G&&G.d(),a[26](null),js(R,d),a[28](null)}}}let me=400;function Ms(a){return{overview:"Overview",compare:"Compare by socio-economic factor"}[a]||""}function mn(a,t,l){let e,i,f,c,_,y={},C="barchart",{data:E}=t;const p=E.coBenefit,D=Cs.find(v=>v.id===p)?.label??p,B=Ta.find(v=>v.id===p)?.def??p;let F,L,V,dt,tt,rt,ee,ht,Bt=!1,le,j,st,et;_e().then(()=>{let v=JSON.parse(JSON.stringify(te(p)));v.shift(),v=v.reverse(),l(7,j=new Na(L,"LAD",st,"total",!1,"LAD",!1,v)),j.initMap();let w=j.legend();et.append(w)});let at=Ma(p),lt=!1,Ft="";const vt=["overview","compare"];function Ht(){const v=window.scrollY;l(9,lt=v>250);for(const w of vt){const g=document.getElementById(w);if(!g)continue;const P=g.getBoundingClientRect();if(P.top<=150&&P.bottom>=150){l(10,Ft=w);break}}}Xs(()=>(window.addEventListener("scroll",Ht),Ht(),()=>window.removeEventListener("scroll",Ht))),Zs(()=>{window.removeEventListener("scroll",Ht)});async function _e(){F=await be(za(p)),V=await be(Ra(p)),tt=await be(Ua()),tt=tt.sort((w,g)=>g.total-w.total),rt=await be(qa()),rt=rt.sort((w,g)=>g.total_value-w.total_value);const v=rt.find(w=>w.co_benefit_type===p);l(6,le=v?v.value_per_capita:null),L=await be(Wa(p)),console.log("data",L),ee=await be(Ya()),l(5,ht=ee[0].total_value),Ds.forEach(w=>{V[w]=+V[w]}),l(4,dt=xa(F,w=>w.total/1e3).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),l(20,Bt=!0)}let nt,H;function pt(v,w){if(!nt)return;const g=20,P=15,N=Math.floor(200/g),Ce=P*N,De=tt.reduce((k,O)=>k+O.total,0),X=[];for(const k of tt){const O=Math.round(Math.abs(k.total)/De*Ce),Ae=k.total<0;for(let ae=0;ae<O;ae++)X.push({type:k.co_benefit_type,negative:Ae})}for(;X.length<Ce;)X.push({type:"empty"});X.sort((k,O)=>k.type==="empty"?1:O.type==="empty"?-1:k.negative&&!O.negative?1:!k.negative&&O.negative?-1:0);const A=X.map((k,O)=>({x:O%P,y:Math.floor(O/P),...k})),ot=ke({width:g*P,height:g*N,margin:0,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:Cs.map(k=>k.id),range:Oa,unknown:"#eee",legend:!1},marks:[Es(A.filter(k=>!k.negative),{x:k=>k.x*g,y:k=>k.y*g,fill:"type",fillOpacity:k=>w&&k.type!==w?.15:1}),Es(A.filter(k=>k.negative),{x:k=>k.x*g,y:k=>k.y*g,stroke:"type",strokeOpacity:k=>w&&k.type!==w?.15:1,strokeWidth:1,fill:"none"})]});H&&(l(12,H.style.width=`${g*P}px`,H),l(12,H.style.height=`${v-100}px`,H)),l(11,nt.innerHTML="",nt),nt.append(ot)}function ge(){c?.append(ke({height:me/1.5,...Ha,marginLeft:90,marginTop:40,marginRight:40,y:{label:"Number of Datazones",grid:!0},x:{label:"Total (£, billion)",labelArrow:"none",labelAnchor:"center"},style:{fontSize:"15px"},marks:[ja(L,Ga({y:"count"},{x:"total",fill:te(p)[0],tip:!0,fillOpacity:.5,stroke:te(p)[0],strokeWidth:2})),ys({anchor:"left",label:"Number of datazones",labelArrow:"none",labelAnchor:"center"}),Ze([0],{stroke:"#333",strokeWidth:.75})]}))}function we(){let v=F.flatMap(w=>Pa.map(g=>({time:g,value:w[g],total:w.total,scenario:w.scenario})));_?.append(ke({height:me/1.5,marginLeft:80,marginRight:40,marginBottom:60,marginTop:40,style:{fontSize:"15px"},x:{type:"band",tickFormat:w=>w.replace(/^Y/,"").replace("_","-"),label:"Year Intervals"},y:{grid:!0,label:"Total (£, billion)"},marks:[zs(v,Fs({y:"sum"},{x:"time",y:w=>w.value/1e3,fill:te(p)[0],tip:{format:{y:w=>`${w.toFixed(2)}`,x:!1}},fillOpacity:.8,insetLeft:15,insetRight:15})),ys({anchor:"left",grid:!0,label:"Total (£, billion)",labelArrow:"none",labelAnchor:"center"}),Ze([0],{stroke:"#333",strokeWidth:.75})]}))}function it(){Ds.forEach(v=>{let w;if(Ba.includes(v)){const g=Fa[v],P=g?Object.keys(g).map(Number):L.filter(N=>N.SEFMAME==v).map(N=>N.SE);w=ke({style:{fontSize:"14px",textAnchor:"middle",fill:"#333"},height:me/1.4,width:me*1.2,marginLeft:70,marginBottom:v==="Typology"?80:60,marginRight:20,marginTop:20,x:{domain:P,label:Yl(v),tickFormat:N=>g?.[N]??N,tickRotate:v==="Typology"?-20:0},y:{label:"£, thousand",labelArrow:"none"},color:{legend:!0},marks:[an(L.filter(N=>N.SEFMAME==v),{x:"SE",y:N=>N.total*1e3,stroke:te(p)[0],fill:te(p)[0],r:2,fillOpacity:.3}),Ze([0],{stroke:"#333",strokeWidth:.75})]})}else w=ke({style:{fontSize:"14px",textAnchor:"middle",fill:"#333"},height:me/1.4,width:me*1.2,marginLeft:70,marginBottom:60,marginRight:20,marginTop:30,x:{label:Yl(v),labelArrow:!1,labelAnchor:"center"},y:{label:"£, thousand",labelArrow:!1},color:{legend:!0},marks:[Rs(L.filter(g=>g.SEFMAME==v),{x:g=>["Under_35","Over_65","Unemployment"].includes(v)?g.SE*100:g.SE,y:g=>g.total*1e3,fill:g=>g.LAD.startsWith("S")?Pt(p)[0]:g.LAD.startsWith("N")?Pt(p)[1]:g.LAD.startsWith("E")?Pt(p)[2]:Pt(p)[3],r:2,fillOpacity:1}),Va({label:Yl(v),labelArrow:!1,labelAnchor:"center"}),Ze([0],{stroke:"#333",strokeWidth:.75}),Hs([0],{stroke:"#333",strokeWidth:.75})]});y[v]?.append(w)})}function se(v){$t[v?"unshift":"push"](()=>{nt=v,l(11,nt)})}function bt(v){$t[v?"unshift":"push"](()=>{H=v,l(12,H)})}function Ie(v){$t[v?"unshift":"push"](()=>{_=v,l(0,_)})}function ye(v){$t[v?"unshift":"push"](()=>{c=v,l(3,c)})}function Et(v){$t[v?"unshift":"push"](()=>{st=v,l(8,st)})}function Ee(v,w){$t[v?"unshift":"push"](()=>{y[w.id]=v,l(1,y)})}function Ct(v){$t[v?"unshift":"push"](()=>{f=v,l(2,f)})}return a.$$set=v=>{"data"in v&&l(18,E=v.data)},a.$$.update=()=>{a.$$.dirty[0]&1572867&&(_?.firstChild?.remove(),Object.values(y).forEach(v=>{v.firstChild?.remove()}),Bt&&(ge(),we(),it(),pt(300,p))),a.$$.dirty[0]&2097152&&l(13,i=`color: ${e}; font-weight: bold; font-size: 22px;`)},l(21,e=te(p)[0]),[_,y,f,c,dt,ht,le,j,st,lt,Ft,nt,H,i,p,D,B,at,E,C,Bt,e,se,bt,Ie,ye,Et,Ee,Ct]}class xn extends $s{constructor(t){super(),ta(this,t,mn,bn,Gs,{data:18},null,[-1,-1])}}export{xn as component};
