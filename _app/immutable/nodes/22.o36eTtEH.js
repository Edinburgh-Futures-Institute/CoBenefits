import{s as Rl,a as A,e as u,t as w,g as S,c as f,b as _,p as ee,d as E,f as n,q as d,A as ge,i as V,h as i,x as Fl,v as vl,r as zl,F as Ul,n as Te,H as Wl,D as xl,j as Ve,B as Gl,z as Se}from"../chunks/scheduler.BVm0POKv.js";import{S as jl,i as Kl,c as _l,b as ml,m as bl,t as gl,a as kl,d as yl}from"../chunks/index.C_bTuQvQ.js";import{N as ql,e as Vt}from"../chunks/NavigationBar.BTNVLO8d.js";import"../chunks/transform.BNP73y-7.js";import{aM as Yl,ao as Yt,ap as Jl,t as wl,at as Xl,H as El,aN as Ql,aO as Zl,aP as $l,G as ea,I as je,W as ta,J as Ke,L as dt,O as ut,N as Dl,aQ as la,K as ft}from"../chunks/index.DRj_ZHTF.js";import{f as Jt}from"../chunks/module.BDHLYmQ2.js";import{b as aa}from"../chunks/paths.IOUa54_1.js";import{M as sa}from"../chunks/mapUK.DbBWZzG1.js";import{m as ia,n as ra,o as na,p as oa,q as ca,s as da,a as Ll,e as pt,g as ua,S as Oe,t as It,f as fa,u as Xt,r as ha,d as pa}from"../chunks/globals._26LTywl.js";import{g as ht,i as va,h as _a,w as ma,x as ba,r as ga}from"../chunks/duckdb.3xkmPUlf.js";import{p as Mt}from"../chunks/per_capita.COcMrZFY.js";import{F as ka}from"../chunks/Footer.9pQd_CEA.js";import{n as ya}from"../chunks/nice.BkzgUbph.js";import{t as wa,b as Ea}from"../chunks/bin.Bl2kikCE.js";import{a as Da}from"../chunks/bar.2xGs5Shd.js";import{d as Tt}from"../chunks/dot.LN3TJCxy.js";var La=Array.prototype,Aa=La.slice;function Qt(a){return()=>a}function Sa(){var a=Yl,e=Yt,t=wa;function l(r){Array.isArray(r)||(r=Array.from(r));var s,c=r.length,p,v,m=new Array(c);for(s=0;s<c;++s)m[s]=a(r[s],s,r);var k=e(m),D=k[0],g=k[1],b=t(m,D,g);if(!Array.isArray(b)){const y=g,C=+b;if(e===Yt&&([D,g]=ya(D,g,C)),b=Jl(D,g,C),b[0]<=D&&(v=wl(D,g,C)),b[b.length-1]>=g)if(y>=g&&e===Yt){const F=wl(D,g,C);isFinite(F)&&(F>0?g=(Math.floor(g/F)+1)*F:F<0&&(g=(Math.ceil(g*-F)+1)/-F))}else b.pop()}for(var L=b.length,T=0,B=L;b[T]<=D;)++T;for(;b[B-1]>g;)--B;(T||B<L)&&(b=b.slice(T,B),L=B-T);var O=new Array(L+1),H;for(s=0;s<=L;++s)H=O[s]=[],H.x0=s>0?b[s-1]:D,H.x1=s<L?b[s]:g;if(isFinite(v)){if(v>0)for(s=0;s<c;++s)(p=m[s])!=null&&D<=p&&p<=g&&O[Math.min(L,Math.floor((p-D)/v))].push(r[s]);else if(v<0){for(s=0;s<c;++s)if((p=m[s])!=null&&D<=p&&p<=g){const y=Math.floor((D-p)*v);O[Math.min(L,y+(b[y]<=p))].push(r[s])}}}else for(s=0;s<c;++s)(p=m[s])!=null&&D<=p&&p<=g&&O[Xl(b,p,0,L)].push(r[s]);return O}return l.value=function(r){return arguments.length?(a=typeof r=="function"?r:Qt(r),l):a},l.domain=function(r){return arguments.length?(e=typeof r=="function"?r:Qt([r[0],r[1]]),l):e},l.thresholds=function(r){return arguments.length?(t=typeof r=="function"?r:Qt(Array.isArray(r)?Aa.call(r):r),l):t},l}const Va=""+new URL("../assets/negative.BhphYhmj.png",import.meta.url).href;function Al(a,e,t){const l=a.slice();return l[69]=e[t],l[70]=e,l[71]=t,l}function Sl(a,e,t){const l=a.slice();return l[69]=e[t],l}function Ia(a){let e;return{c(){e=u("div"),this.h()},l(t){e=f(t,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){d(e,"class","plot svelte-10kw4td")},m(t,l){V(t,e,l),a[39](e)},p:Te,d(t){t&&n(e),a[39](null)}}}function Ta(a){let e;return{c(){e=u("div"),this.h()},l(t){e=f(t,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){d(e,"class","plot svelte-10kw4td")},m(t,l){V(t,e,l),a[38](e)},p:Te,d(t){t&&n(e),a[38](null)}}}function Ma(a){let e,t,l=a[22].toLowerCase()+"",r,s,c,p,v=Ie(a[12],a[25])+"",m,k,D,g;return{c(){e=u("h3"),t=w("Distribution of "),r=w(l),s=w(" across the UK"),c=w(`\r
                    Max value: `),p=u("strong"),m=w(v),k=w("("),D=w(a[14]),g=w(")"),this.h()},l(b){e=f(b,"H3",{class:!0});var L=_(e);t=E(L,"Distribution of "),r=E(L,l),s=E(L," across the UK"),L.forEach(n),c=E(b,`\r
                    Max value: `),p=f(b,"STRONG",{});var T=_(p);m=E(T,v),T.forEach(n),k=E(b,"("),D=E(b,a[14]),g=E(b,")"),this.h()},h(){d(e,"class","component-title")},m(b,L){V(b,e,L),i(e,t),i(e,r),i(e,s),V(b,c,L),V(b,p,L),i(p,m),V(b,k,L),V(b,D,L),V(b,g,L)},p(b,L){L[0]&4096&&v!==(v=Ie(b[12],b[25])+"")&&Ve(m,v),L[0]&16384&&Ve(D,b[14])},d(b){b&&(n(e),n(c),n(p),n(k),n(D),n(g))}}}function Ca(a){let e,t,l=a[22].toLowerCase()+"",r,s,c=a[26].toLowerCase()+"",p,v;return{c(){e=u("h3"),t=w("Distribution of "),r=w(l),s=w(" by "),p=w(c),v=w(" across the UK"),this.h()},l(m){e=f(m,"H3",{class:!0});var k=_(e);t=E(k,"Distribution of "),r=E(k,l),s=E(k," by "),p=E(k,c),v=E(k," across the UK"),k.forEach(n),this.h()},h(){d(e,"class","component-title")},m(m,k){V(m,e,k),i(e,t),i(e,r),i(e,s),i(e,p),i(e,v)},p:Te,d(m){m&&n(e)}}}function Fa(a){let e,t,l=Ie(a[10],a[25])+"",r;return{c(){e=w("Average value: "),t=u("strong"),r=w(l),this.h()},l(s){e=E(s,"Average value: "),t=f(s,"STRONG",{style:!0});var c=_(t);r=E(c,l),c.forEach(n),this.h()},h(){ge(t,"color","#BD210E")},m(s,c){V(s,e,c),V(s,t,c),i(t,r)},p(s,c){c[0]&1024&&l!==(l=Ie(s[10],s[25])+"")&&Ve(r,l)},d(s){s&&(n(e),n(t))}}}function Ha(a){let e;return{c(){e=w(" ")},l(t){e=E(t," ")},m(t,l){V(t,e,l)},p:Te,d(t){t&&n(e)}}}function Na(a){let e,t,l=Ie(a[13],a[25])+"",r,s,c,p;return{c(){e=w("Min value: "),t=u("strong"),r=w(l),s=w("("),c=w(a[15]),p=w(")")},l(v){e=E(v,"Min value: "),t=f(v,"STRONG",{});var m=_(t);r=E(m,l),m.forEach(n),s=E(v,"("),c=E(v,a[15]),p=E(v,")")},m(v,m){V(v,e,m),V(v,t,m),i(t,r),V(v,s,m),V(v,c,m),V(v,p,m)},p(v,m){m[0]&8192&&l!==(l=Ie(v[13],v[25])+"")&&Ve(r,l),m[0]&32768&&Ve(c,v[15])},d(v){v&&(n(e),n(t),n(s),n(c),n(p))}}}function Pa(a){let e,t,l=Ie(a[11],a[25])+"",r;return{c(){e=w("Most common category: "),t=u("strong"),r=w(l),this.h()},l(s){e=E(s,"Most common category: "),t=f(s,"STRONG",{style:!0});var c=_(t);r=E(c,l),c.forEach(n),this.h()},h(){ge(t,"color","#BD210E")},m(s,c){V(s,e,c),V(s,t,c),i(t,r)},p(s,c){c[0]&2048&&l!==(l=Ie(s[11],s[25])+"")&&Ve(r,l)},d(s){s&&(n(e),n(t))}}}function Oa(a){let e=a[3]?"Show data grouped by local authorities (LADs)":"Show data grouped by data zones (LSOAs)",t;return{c(){t=w(e)},l(l){t=E(l,e)},m(l,r){V(l,t,r)},p(l,r){r[0]&8&&e!==(e=l[3]?"Show data grouped by local authorities (LADs)":"Show data grouped by data zones (LSOAs)")&&Ve(t,e)},d(l){l&&n(t)}}}function Ba(a){let e,t;return{c(){e=u("span"),t=w(`\r
    Loading...`),this.h()},l(l){e=f(l,"SPAN",{class:!0}),_(e).forEach(n),t=E(l,`\r
    Loading...`),this.h()},h(){d(e,"class","spinner svelte-10kw4td")},m(l,r){V(l,e,r),V(l,t,r)},p:Te,d(l){l&&(n(e),n(t))}}}function Vl(a){let e,t,l,r,s;return{c(){e=u("div"),t=u("div"),l=u("span"),r=w(a[22]),s=w(" >>"),this.h()},l(c){e=f(c,"DIV",{class:!0});var p=_(e);t=f(p,"DIV",{class:!0});var v=_(t);l=f(v,"SPAN",{class:!0});var m=_(l);r=E(m,a[22]),s=E(m," >>"),m.forEach(n),v.forEach(n),p.forEach(n),this.h()},h(){d(l,"class","mini-header-text"),d(t,"class","mini-header-content"),d(e,"class","mini-header")},m(c,p){V(c,e,p),i(e,t),i(t,l),i(l,r),i(l,s)},p:Te,d(c){c&&n(e)}}}function Ra(a){let e;return{c(){e=w("data zone (LSOA).")},l(t){e=E(t,"data zone (LSOA).")},m(t,l){V(t,e,l)},d(t){t&&n(e)}}}function za(a){let e;return{c(){e=w("local authority (LAD).")},l(t){e=E(t,"local authority (LAD).")},m(t,l){V(t,e,l)},d(t){t&&n(e)}}}function Ua(a){let e;return{c(){e=u("div"),this.h()},l(t){e=f(t,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){d(e,"class","plot svelte-10kw4td")},m(t,l){V(t,e,l),a[41](e)},p:Te,d(t){t&&n(e),a[41](null)}}}function Wa(a){let e;return{c(){e=u("div"),this.h()},l(t){e=f(t,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){d(e,"class","plot svelte-10kw4td")},m(t,l){V(t,e,l),a[40](e)},p:Te,d(t){t&&n(e),a[40](null)}}}function Il(a){let e,t,l=a[16].legend(a[26]).outerHTML+"";return{c(){e=u("div"),t=new Wl(!1),this.h()},l(r){e=f(r,"DIV",{id:!0});var s=_(e);t=xl(s,!1),s.forEach(n),this.h()},h(){t.a=null,d(e,"id","legend")},m(r,s){V(r,e,s),t.m(l,e)},p(r,s){s[0]&65536&&l!==(l=r[16].legend(r[26]).outerHTML+"")&&t.p(l)},d(r){r&&n(e)}}}function Tl(a){let e,t,l,r,s=a[69].def+"",c,p,v,m,k,D,g,b="here",L,T,B=a[69].id.toLowerCase()+"",O,H,y;return{c(){e=u("div"),t=u("div"),l=u("div"),r=A(),c=w(s),p=A(),v=u("br"),m=A(),k=u("div"),D=w("Click "),g=u("a"),g.textContent=b,L=w(` for the \r
                                `),T=u("span"),O=w(B),H=A(),y=w("report page."),this.h()},l(C){e=f(C,"DIV",{class:!0});var F=_(e);t=f(F,"DIV",{class:!0});var R=_(t);l=f(R,"DIV",{style:!0}),_(l).forEach(n),r=S(R),c=E(R,s),p=S(R),v=f(R,"BR",{}),m=S(R),k=f(R,"DIV",{class:!0});var x=_(k);D=E(x,"Click "),g=f(x,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0,"data-svelte-h":!0}),ee(g)!=="svelte-gjrxnt"&&(g.textContent=b),L=E(x,` for the \r
                                `),T=f(x,"SPAN",{style:!0});var Y=_(T);O=E(Y,B),H=S(Y),Y.forEach(n),y=E(x,"report page."),x.forEach(n),R.forEach(n),F.forEach(n),this.h()},h(){ge(l,"height","0.8em"),d(g,"class","link"),d(g,"href",aa+"/cobenefit?cobenefit="+a[69].id),d(g,"target","_blank"),d(g,"rel","noopener noreferrer"),ge(g,"color",pt(a[69].id)),ge(T,"color",pt(a[69].id)),d(k,"class","link-box svelte-10kw4td"),d(t,"class","legend-description svelte-10kw4td"),d(e,"class","legend-description-box svelte-10kw4td")},m(C,F){V(C,e,F),i(e,t),i(t,l),i(t,r),i(t,c),i(t,p),i(t,v),i(t,m),i(t,k),i(k,D),i(k,g),i(k,L),i(k,T),i(T,O),i(T,H),i(k,y)},d(C){C&&n(e)}}}function Ml(a){let e,t,l,r,s,c=a[69].label+"",p,v,m,k,D=a[19].has(a[69].id)?"▲":"▼",g,b,L=a[19].has(a[69].id),T,B,O;function H(){return a[43](a[69])}let y=L&&Tl(a);return{c(){e=u("div"),t=u("div"),l=u("span"),r=A(),s=u("span"),p=w(c),m=A(),k=u("span"),g=w(D),b=A(),y&&y.c(),T=A(),this.h()},l(C){e=f(C,"DIV",{class:!0});var F=_(e);t=f(F,"DIV",{class:!0,style:!0});var R=_(t);l=f(R,"SPAN",{class:!0,style:!0}),_(l).forEach(n),r=S(R),s=f(R,"SPAN",{class:!0});var x=_(s);p=E(x,c),x.forEach(n),m=S(R),k=f(R,"SPAN",{class:!0});var Y=_(k);g=E(Y,D),Y.forEach(n),R.forEach(n),b=S(F),y&&y.l(F),T=S(F),F.forEach(n),this.h()},h(){d(l,"class","legend-color svelte-10kw4td"),ge(l,"background-color",pt(a[69].id)),d(s,"class",v="legend-text "+(a[19].has(a[69].id)?"expanded":"")+" svelte-10kw4td"),d(k,"class","toggle-icon svelte-10kw4td"),d(t,"class","legend-header svelte-10kw4td"),ge(t,"cursor","pointer"),d(e,"class","legend-item svelte-10kw4td")},m(C,F){V(C,e,F),i(e,t),i(t,l),i(t,r),i(t,s),i(s,p),i(t,m),i(t,k),i(k,g),i(e,b),y&&y.m(e,null),i(e,T),B||(O=Fl(t,"click",H),B=!0)},p(C,F){a=C,F[0]&524288&&v!==(v="legend-text "+(a[19].has(a[69].id)?"expanded":"")+" svelte-10kw4td")&&d(s,"class",v),F[0]&524288&&D!==(D=a[19].has(a[69].id)?"▲":"▼")&&Ve(g,D),F[0]&524288&&(L=a[19].has(a[69].id)),L?y||(y=Tl(a),y.c(),y.m(e,T)):y&&(y.d(1),y=null)},d(C){C&&n(e),y&&y.d(),B=!1,O()}}}function xa(a){let e,t=`<img class="sm-icon svelte-10kw4td" src="${Mt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each area.</span>`;return{c(){e=u("div"),e.innerHTML=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1lqh0bd"&&(e.innerHTML=t),this.h()},h(){d(e,"class","tooltip-wrapper")},m(l,r){V(l,e,r)},d(l){l&&n(e)}}}function Ga(a){let e,t=`<img class="sm-icon svelte-10kw4td" src="${Mt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each area.</span>`,l,r,s=`<img class="sm-icon svelte-10kw4td" src="${Va}" alt="icon"/> <span class="tooltip-text-neg svelte-10kw4td">This chart includes negative values.</span>`;return{c(){e=u("div"),e.innerHTML=t,l=A(),r=u("div"),r.innerHTML=s,this.h()},l(c){e=f(c,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1tqucbd"&&(e.innerHTML=t),l=S(c),r=f(c,"DIV",{class:!0,"data-svelte-h":!0}),ee(r)!=="svelte-10ijo5a"&&(r.innerHTML=s),this.h()},h(){d(e,"class","tooltip-wrapper"),d(r,"class","tooltip-wrapper")},m(c,p){V(c,e,p),V(c,l,p),V(c,r,p)},d(c){c&&(n(e),n(l),n(r))}}}function ja(a){let e,t=a[69];const l=()=>a[45](e,t),r=()=>a[45](null,t);return{c(){e=u("div"),this.h()},l(s){e=f(s,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){d(e,"class","plot svelte-10kw4td")},m(s,c){V(s,e,c),l()},p(s,c){a=s,t!==a[69]&&(r(),t=a[69],l())},d(s){s&&n(e),r()}}}function Ka(a){let e,t=a[69];const l=()=>a[44](e,t),r=()=>a[44](null,t);return{c(){e=u("div"),this.h()},l(s){e=f(s,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){d(e,"class","plot svelte-10kw4td")},m(s,c){V(s,e,c),l()},p(s,c){a=s,t!==a[69]&&(r(),t=a[69],l())},d(s){s&&n(e),r()}}}function Cl(a){let e,t,l,r,s,c,p=a[69].label+"",v,m,k,D;function g(H,y){return H[69].id=="Hassle costs"||H[69].id=="Road repairs"||H[69].id=="Road safety"||H[69].id=="Congestion"||H[69].id=="Excess heat"?Ga:xa}let L=g(a)(a);function T(H,y){return Oe.includes(H[21])?Ka:ja}let O=T(a)(a);return{c(){e=u("div"),t=u("div"),l=u("img"),s=A(),c=u("h3"),v=w(p),m=A(),L.c(),k=A(),O.c(),D=A(),this.h()},l(H){e=f(H,"DIV",{class:!0});var y=_(e);t=f(y,"DIV",{class:!0});var C=_(t);l=f(C,"IMG",{class:!0,src:!0,alt:!0}),s=S(C),c=f(C,"H3",{class:!0});var F=_(c);v=E(F,p),F.forEach(n),m=S(C),L.l(C),C.forEach(n),k=S(y),O.l(y),D=S(y),y.forEach(n),this.h()},h(){d(l,"class","sm-cb-icon svelte-10kw4td"),Gl(l.src,r=ua(a[69].id))||d(l,"src",r),d(l,"alt",a[69].label+" icon"),d(c,"class","chart-component-title"),d(t,"class","component-chart-title-container svelte-10kw4td"),d(e,"class","plot-container svelte-10kw4td")},m(H,y){V(H,e,y),i(e,t),i(t,l),i(t,s),i(t,c),i(c,v),i(t,m),L.m(t,null),i(e,k),O.m(e,null),i(e,D)},p(H,y){O.p(H,y)},d(H){H&&n(e),L.d(),O.d()}}}function qa(a){let e,t,l,r,s,c,p,v="Socio-Economic Factor Report",m,k,D,g,b,L,T,B,O,H,y,C,F,R,x,Y,re,J,ke,ye,z,j,ue,vt='<p class="section-subtitle svelte-10kw4td">Overview</p>',qe,ae,U,se,we,Be,Re,ne,Ee,Ye,Z,Je=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Mt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each area.</span></div>`,Me,Xe,W,fe,Qe,Ze,$e,he,_t="Scroll for zooming in and out.",et,pe,mt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Mt}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each area.</span></div>`,tt,ze,ve,lt,oe,_e,o='<p class="section-subtitle svelte-10kw4td">By Co-benefits</p>',P,N,G,me,Ct,Zt=a[22].toLowerCase()+"",Ft,Ht,Nt,Ce,$t="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",Pt,Ot,Bt,$,Ue,el="Co-benefits:",Rt,zt,at,Ut,Wt,De,tl='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',xt,Fe,Le,bt,He,st,Gt,ll;e=new ql({});function Hl(h,M){return Oe.includes(h[21])?Ta:Ia}let it=Hl(a)(a);function Nl(h,M){return Oe.includes(h[21])?Ca:Ma}let rt=Nl(a)(a);function Pl(h,M){return Oe.includes(h[21])?Ha:Fa}let nt=Pl(a)(a);function Ol(h,M){return Oe.includes(h[21])?Pa:Na}let ot=Ol(a)(a);function al(h,M){return h[20]?Ba:Oa}let gt=al(a),ie=gt(a),X=a[18]&&Vl(a);function sl(h,M){return h[4]==h[2]?za:Ra}let kt=sl(a),be=kt(a);function Bl(h,M){return Oe.includes(h[21])?Wa:Ua}let ct=Bl(a)(a),Q=a[16]&&Il(a),We=Vt(It),K=[];for(let h=0;h<We.length;h+=1)K[h]=Ml(Sl(a,We,h));let xe=Vt(It),q=[];for(let h=0;h<xe.length;h+=1)q[h]=Cl(Al(a,xe,h));return He=new ka({}),{c(){_l(e.$$.fragment),t=A(),l=u("div"),r=u("div"),s=u("div"),c=u("div"),p=u("p"),p.textContent=v,m=A(),k=u("div"),D=u("h1"),g=w(a[24]),b=A(),L=u("p"),T=w(a[23]),B=A(),O=u("div"),it.c(),H=A(),y=u("div"),C=u("p"),rt.c(),F=A(),R=u("p"),nt.c(),x=A(),Y=u("p"),ot.c(),re=A(),J=u("button"),ie.c(),ke=A(),X&&X.c(),ye=A(),z=u("div"),j=u("div"),ue=u("div"),ue.innerHTML=vt,qe=A(),ae=u("div"),U=u("div"),se=u("h3"),we=w(a[22]),Be=w(" against per capita co-benefit values (£, thousand)"),Re=A(),ne=u("p"),Ee=w(`Each point in the chart below represents a UK \r
                        `),be.c(),Ye=A(),Z=u("div"),Z.innerHTML=Je,Me=A(),ct.c(),Xe=A(),W=u("div"),fe=u("h3"),Qe=w(a[22]),Ze=w(" at data zone (LSOA) level"),$e=A(),he=u("p"),he.textContent=_t,et=A(),pe=u("div"),pe.innerHTML=mt,tt=A(),Q&&Q.c(),ze=A(),ve=u("div"),lt=A(),oe=u("div"),_e=u("div"),_e.innerHTML=o,P=A(),N=u("div"),G=u("div"),me=u("h3"),Ct=w(`Plotting \r
                    \r
                    `),Ft=w(Zt),Ht=w(`\r
                \r
                against the gain/loss (£, thousand) per capita for each co-benefit`),Nt=A(),Ce=u("p"),Ce.textContent=$t,Pt=A(),Ot=u("br"),Bt=A(),$=u("div"),Ue=u("strong"),Ue.textContent=el,Rt=u("br"),zt=w(`Expand for detailed explanation\r
                    `),at=u("div"),Ut=A();for(let h=0;h<K.length;h+=1)K[h].c();Wt=A(),De=u("div"),De.innerHTML=tl,xt=A(),Fe=u("div"),Le=u("div");for(let h=0;h<q.length;h+=1)q[h].c();bt=A(),_l(He.$$.fragment),this.h()},l(h){ml(e.$$.fragment,h),t=S(h),l=f(h,"DIV",{class:!0});var M=_(l);r=f(M,"DIV",{class:!0});var I=_(r);s=f(I,"DIV",{class:!0});var te=_(s);c=f(te,"DIV",{class:!0});var yt=_(c);p=f(yt,"P",{class:!0,"data-svelte-h":!0}),ee(p)!=="svelte-16ymxs7"&&(p.textContent=v),m=S(yt),k=f(yt,"DIV",{class:!0});var wt=_(k);D=f(wt,"H1",{class:!0});var il=_(D);g=E(il,a[24]),il.forEach(n),b=S(wt),L=f(wt,"P",{class:!0});var rl=_(L);T=E(rl,a[23]),rl.forEach(n),wt.forEach(n),yt.forEach(n),B=S(te),O=f(te,"DIV",{class:!0});var nl=_(O);it.l(nl),nl.forEach(n),H=S(te),y=f(te,"DIV",{class:!0});var Ge=_(y);C=f(Ge,"P",{class:!0});var ol=_(C);rt.l(ol),ol.forEach(n),F=S(Ge),R=f(Ge,"P",{class:!0});var cl=_(R);nt.l(cl),cl.forEach(n),x=S(Ge),Y=f(Ge,"P",{class:!0});var dl=_(Y);ot.l(dl),dl.forEach(n),Ge.forEach(n),te.forEach(n),I.forEach(n),re=S(M),J=f(M,"BUTTON",{class:!0});var ul=_(J);ie.l(ul),ul.forEach(n),ke=S(M),X&&X.l(M),ye=S(M),z=f(M,"DIV",{class:!0});var fl=_(z);j=f(fl,"DIV",{id:!0});var Et=_(j);ue=f(Et,"DIV",{class:!0,"data-svelte-h":!0}),ee(ue)!=="svelte-ll1i43"&&(ue.innerHTML=vt),qe=S(Et),ae=f(Et,"DIV",{id:!0,class:!0});var Dt=_(ae);U=f(Dt,"DIV",{class:!0});var Ae=_(U);se=f(Ae,"H3",{class:!0});var jt=_(se);we=E(jt,a[22]),Be=E(jt," against per capita co-benefit values (£, thousand)"),jt.forEach(n),Re=S(Ae),ne=f(Ae,"P",{class:!0});var Kt=_(ne);Ee=E(Kt,`Each point in the chart below represents a UK \r
                        `),be.l(Kt),Kt.forEach(n),Ye=S(Ae),Z=f(Ae,"DIV",{class:!0,"data-svelte-h":!0}),ee(Z)!=="svelte-tg5ofw"&&(Z.innerHTML=Je),Me=S(Ae),ct.l(Ae),Ae.forEach(n),Xe=S(Dt),W=f(Dt,"DIV",{class:!0});var ce=_(W);fe=f(ce,"H3",{class:!0});var qt=_(fe);Qe=E(qt,a[22]),Ze=E(qt," at data zone (LSOA) level"),qt.forEach(n),$e=S(ce),he=f(ce,"P",{class:!0,"data-svelte-h":!0}),ee(he)!=="svelte-1ask2se"&&(he.textContent=_t),et=S(ce),pe=f(ce,"DIV",{class:!0,"data-svelte-h":!0}),ee(pe)!=="svelte-7b2hds"&&(pe.innerHTML=mt),tt=S(ce),Q&&Q.l(ce),ze=S(ce),ve=f(ce,"DIV",{id:!0,class:!0}),_(ve).forEach(n),ce.forEach(n),Dt.forEach(n),Et.forEach(n),fl.forEach(n),lt=S(M),oe=f(M,"DIV",{id:!0});var Lt=_(oe);_e=f(Lt,"DIV",{class:!0,"data-svelte-h":!0}),ee(_e)!=="svelte-1av3fse"&&(_e.innerHTML=o),P=S(Lt),N=f(Lt,"DIV",{id:!0,class:!0,style:!0});var At=_(N);G=f(At,"DIV",{id:!0,class:!0});var de=_(G);me=f(de,"H3",{class:!0});var St=_(me);Ct=E(St,`Plotting \r
                    \r
                    `),Ft=E(St,Zt),Ht=E(St,`\r
                \r
                against the gain/loss (£, thousand) per capita for each co-benefit`),St.forEach(n),Nt=S(de),Ce=f(de,"P",{class:!0,"data-svelte-h":!0}),ee(Ce)!=="svelte-1h97e3k"&&(Ce.textContent=$t),Pt=S(de),Ot=f(de,"BR",{}),Bt=S(de),$=f(de,"DIV",{id:!0,class:!0});var Ne=_($);Ue=f(Ne,"STRONG",{"data-svelte-h":!0}),ee(Ue)!=="svelte-1qu96kx"&&(Ue.textContent=el),Rt=f(Ne,"BR",{}),zt=E(Ne,`Expand for detailed explanation\r
                    `),at=f(Ne,"DIV",{style:!0}),_(at).forEach(n),Ut=S(Ne);for(let Pe=0;Pe<K.length;Pe+=1)K[Pe].l(Ne);Ne.forEach(n),Wt=S(de),De=f(de,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),ee(De)!=="svelte-11g4vkg"&&(De.innerHTML=tl),de.forEach(n),xt=S(At),Fe=f(At,"DIV",{id:!0,class:!0});var hl=_(Fe);Le=f(hl,"DIV",{id:!0,class:!0});var pl=_(Le);for(let Pe=0;Pe<q.length;Pe+=1)q[Pe].l(pl);pl.forEach(n),hl.forEach(n),At.forEach(n),Lt.forEach(n),M.forEach(n),bt=S(h),ml(He.$$.fragment,h),this.h()},h(){d(p,"class","page-subtitle svelte-10kw4td"),d(D,"class","page-title svelte-10kw4td"),d(L,"class","definition"),d(k,"class","title-container"),d(c,"class","header-text svelte-10kw4td"),d(O,"class","header-vis svelte-10kw4td"),d(C,"class","definition-stat svelte-10kw4td"),d(R,"class","definition-stat svelte-10kw4td"),d(Y,"class","definition-stat svelte-10kw4td"),d(y,"class","header-stats svelte-10kw4td"),d(s,"class","header-content svelte-10kw4td"),d(r,"class","section header svelte-10kw4td"),d(J,"class","switch-button svelte-10kw4td"),J.disabled=a[20],d(ue,"class","section-header"),d(se,"class","component-title"),d(ne,"class","description"),d(Z,"class","aggregation-icon-container2 svelte-10kw4td"),d(U,"class","component column"),d(fe,"class","component-title"),d(he,"class","description"),d(pe,"class","aggregation-icon-container2 svelte-10kw4td"),d(ve,"id","map"),d(ve,"class","svelte-10kw4td"),d(W,"class","component column"),d(ae,"id","vis-block"),d(ae,"class","svelte-10kw4td"),d(j,"id","overview"),d(z,"class","section"),d(_e,"class","section-header"),d(me,"class","component-title"),d(Ce,"class","explanation"),ge(at,"height","0.8em"),d($,"id","main-legend"),d($,"class","legend-box svelte-10kw4td"),d(De,"id","se-disclaimer"),d(De,"class","disclaimer-box svelte-10kw4td"),d(G,"id","se-title"),d(G,"class","svelte-10kw4td"),d(Le,"id","multiple-plots"),d(Le,"class","svelte-10kw4td"),d(Fe,"id","multiple-comp"),d(Fe,"class","svelte-10kw4td"),d(N,"id","se-block"),d(N,"class","component svelte-10kw4td"),ge(N,"margin-left","1rem"),d(oe,"id","compare"),d(l,"class","page-container")},m(h,M){bl(e,h,M),V(h,t,M),V(h,l,M),i(l,r),i(r,s),i(s,c),i(c,p),i(c,m),i(c,k),i(k,D),i(D,g),i(k,b),i(k,L),i(L,T),i(s,B),i(s,O),it.m(O,null),i(s,H),i(s,y),i(y,C),rt.m(C,null),i(y,F),i(y,R),nt.m(R,null),i(y,x),i(y,Y),ot.m(Y,null),i(l,re),i(l,J),ie.m(J,null),i(l,ke),X&&X.m(l,null),i(l,ye),i(l,z),i(z,j),i(j,ue),i(j,qe),i(j,ae),i(ae,U),i(U,se),i(se,we),i(se,Be),i(U,Re),i(U,ne),i(ne,Ee),be.m(ne,null),i(U,Ye),i(U,Z),i(U,Me),ct.m(U,null),i(ae,Xe),i(ae,W),i(W,fe),i(fe,Qe),i(fe,Ze),i(W,$e),i(W,he),i(W,et),i(W,pe),i(W,tt),Q&&Q.m(W,null),i(W,ze),i(W,ve),a[42](ve),i(l,lt),i(l,oe),i(oe,_e),i(oe,P),i(oe,N),i(N,G),i(G,me),i(me,Ct),i(me,Ft),i(me,Ht),i(G,Nt),i(G,Ce),i(G,Pt),i(G,Ot),i(G,Bt),i(G,$),i($,Ue),i($,Rt),i($,zt),i($,at),i($,Ut);for(let I=0;I<K.length;I+=1)K[I]&&K[I].m($,null);i(G,Wt),i(G,De),i(N,xt),i(N,Fe),i(Fe,Le);for(let I=0;I<q.length;I+=1)q[I]&&q[I].m(Le,null);a[46](l),V(h,bt,M),bl(He,h,M),st=!0,Gt||(ll=Fl(J,"click",a[28]),Gt=!0)},p(h,M){if(it.p(h,M),rt.p(h,M),nt.p(h,M),ot.p(h,M),gt===(gt=al(h))&&ie?ie.p(h,M):(ie.d(1),ie=gt(h),ie&&(ie.c(),ie.m(J,null))),(!st||M[0]&1048576)&&(J.disabled=h[20]),h[18]?X?X.p(h,M):(X=Vl(h),X.c(),X.m(l,ye)):X&&(X.d(1),X=null),kt!==(kt=sl(h))&&(be.d(1),be=kt(h),be&&(be.c(),be.m(ne,null))),ct.p(h,M),h[16]?Q?Q.p(h,M):(Q=Il(h),Q.c(),Q.m(W,ze)):Q&&(Q.d(1),Q=null),M[0]&134742016){We=Vt(It);let I;for(I=0;I<We.length;I+=1){const te=Sl(h,We,I);K[I]?K[I].p(te,M):(K[I]=Ml(te),K[I].c(),K[I].m($,null))}for(;I<K.length;I+=1)K[I].d(1);K.length=We.length}if(M[0]&2097155){xe=Vt(It);let I;for(I=0;I<xe.length;I+=1){const te=Al(h,xe,I);q[I]?q[I].p(te,M):(q[I]=Cl(te),q[I].c(),q[I].m(Le,null))}for(;I<q.length;I+=1)q[I].d(1);q.length=xe.length}},i(h){st||(gl(e.$$.fragment,h),gl(He.$$.fragment,h),st=!0)},o(h){kl(e.$$.fragment,h),kl(He.$$.fragment,h),st=!1},d(h){h&&(n(t),n(l),n(bt)),yl(e,h),it.d(),rt.d(),nt.d(),ot.d(),ie.d(),X&&X.d(),be.d(),ct.d(),Q&&Q.d(),a[42](null),vl(K,h),vl(q,h),a[46](null),yl(He,h),Gt=!1,ll()}}}let le=400;function Ie(a,e){return e==="£"?`${e}${a}`:`${a} ${e}`}function Ya(a,e,t){let l,r,s,c,p,v,m,k={},D={},g,b,L,T,B,O=!1,H,y,C,F,R,x,Y,re,J,ke,{data:ye}=e;const z=ye.SEF,j=ia.find(o=>o.id===z)?.id??z,ue=ra.find(o=>o.id===z)?.label??z,vt=na.find(o=>o.id===z)?.def??z,qe=oa.find(o=>o.id===z)?.description??z,ae=ca.find(o=>o.id===z)?.short_units??z,U=da.find(o=>o.id===z)?.units??z;let se,we,Be=!1,Re="";const ne=["overview","compare"];function Ee(){const o=window.scrollY;t(18,Be=o>250);for(const P of ne){const N=document.getElementById(P);if(!N)continue;const G=N.getBoundingClientRect();if(G.top<=150&&G.bottom>=150){Re!==P&&Jt.capture("section entered (sef)",{section_name:P}),Re=P;break}}}zl(()=>(fa(s),window.addEventListener("scroll",Ee),Ee(),()=>window.removeEventListener("scroll",Ee))),Ul(()=>{window.removeEventListener("scroll",Ee)});async function Ye(){t(30,g=await ht(va(z))),console.log("totals",g),t(2,T=await ht(_a(z))),console.log("LAD data 1 ",T),t(31,b=await ht(ma(z))),console.log("by cobens",b),t(32,B=await ht(ba(z))),console.log("LADsef",B),L=await ht(ga()),console.log("per_capita_data",L),Xt.forEach(o=>{t(31,b[o]=+b[o],b)}),t(33,O=!0),ha(s)}Ye().then(()=>{t(16,se=new sa(g,"LSOA",we,"val",!1,"Lookup_Value",!1)),se.initMap()});let Z=new Set;function Je(o){Z.has(o)?Z.delete(o):Z.add(o),t(19,Z=new Set(Z))}let Me=!1;function Xe(){t(20,Me=!0),setTimeout(()=>{t(3,W=!W),t(20,Me=!1)},1e3)}let W=!0;function fe(){const o=El(g,P=>P.val)??0;ea(Sa().thresholds(20).value(P=>P.val)(g),P=>P.length),t(6,c.innerHTML="",c),c?.append(je({height:le/1.9,width:le*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${U}`},y:{label:l===T?"No. of LADs":"No. of LSOAs",labelArrow:!1,domain:l===T?[0,100]:[0,1e4]},style:{fontSize:"16px"},marks:[ta(l,Ea({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),Ke([o],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:o,label:"Average"}},tip:{format:{average:P=>`${P.toFixed(2)}`,x:!1}}}),dt({label:`${U}`,labelArrow:!1,labelAnchor:"center"})]}))}function Qe(){const o=Ll[j],P=o?Object.keys(o).map(Number):l.filter(N=>N.SEFMAME==j).map(N=>N.SE);t(8,v.innerHTML="",v),v?.append(je({height:le/1.9,width:le*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:j==="Typology"?80:50,x:{domain:P,label:pa(j),tickFormat:N=>o?.[N]??N,tickRotate:j==="Typology"?-10:0,padding:.5},style:{fontSize:"16px"},marks:[ut([0],{stroke:"#333",strokeWidth:.75}),Ke([0],{stroke:"#333",strokeWidth:.75}),Da(l,Dl({y:"count"},{x:"val",fill:"black",opacity:.5,tooltip:!0,title:N=>`Count: ${N.count}`})),la(l,Dl({y:"count",text:"count"},{x:"val",text:N=>N.count,dy:-15,fill:"#333",fontWeight:500})),ft({label:l===T?"No. of LADs":"No. of LSOAs",labelArrow:!1})]}))}function Ze(){t(7,p.innerHTML="",p),p?.append(je({height:le*1.5,width:le*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[ut([0],{stroke:"#333",strokeWidth:.75}),Ke([0],{stroke:"#333",strokeWidth:.75}),Tt(l,{x:"val",y:o=>o.total_per_capita*1e3,fill:o=>o.total_per_capita<0?"#BD210E":"#242424",r:l===T?4:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${U}`},value:{value:o=>o.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),ft({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),dt({label:`${U}`,labelArrow:!1,labelAnchor:"center"})]}))}function $e(){t(9,m.innerHTML="",m),m?.append(je({height:le*1.5,width:le*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[ut([0],{stroke:"#333",strokeWidth:1.25}),Ke([0],{stroke:"#333",strokeWidth:.75}),Tt(l,{x:r===B?o=>o.val+(Math.random()-.5)*.05:o=>o.val+(Math.random()-.5)*.1,y:o=>o.total_per_capita*1e3,fill:o=>o.total_per_capita<0?"#BD210E":"#242424",r:l===T?4:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${U}`},value:{value:o=>o.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),ft({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),dt({label:`${U}`,labelArrow:!1,labelAnchor:"center"})]}))}function he(){Xt.forEach(o=>{let P;P=je({height:le,width:le,marginLeft:o==="Excess heat"?80:60,marginTop:40,marginRight:10,marginBottom:50,x:{label:null},y:{label:null},style:{fontSize:"14px"},marks:[ut([0],{stroke:"#333",strokeWidth:1.25}),Ke([0],{stroke:"#333",strokeWidth:.75}),Tt(r.filter(N=>N.co_benefit_type==o),{x:"val",y:"total",fill:pt(o),fillOpacity:.5,r:r===B?3.5:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),ft({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"top"}),dt({label:`${U}`,labelArrow:!1,labelAnchor:"center"})]}),k[o]?.append(P)})}function _t(){Xt.forEach(o=>{let P;P=je({height:le,width:le,marginLeft:60,marginTop:40,marginRight:10,marginBottom:50,x:{label:null},y:{label:null},style:{fontSize:"14px"},marks:[ut([0],{stroke:"#333",strokeWidth:1.25}),Ke([0],{stroke:"#333",strokeWidth:.75}),Tt(r.filter(N=>N.co_benefit_type==o),{x:r===B?N=>N.val+(Math.random()-.5)*.1:N=>N.val+(Math.random()-.5)*.2,y:"total",fill:pt(o),fillOpacity:.5,r:r===B?3.5:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),ft({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"top"}),dt({label:`${U}`,labelArrow:!1,labelAnchor:"center"})]}),D[o]?.append(P)})}function et(o){Se[o?"unshift":"push"](()=>{v=o,t(8,v)})}function pe(o){Se[o?"unshift":"push"](()=>{c=o,t(6,c)})}function mt(o){Se[o?"unshift":"push"](()=>{m=o,t(9,m)})}function tt(o){Se[o?"unshift":"push"](()=>{p=o,t(7,p)})}function ze(o){Se[o?"unshift":"push"](()=>{we=o,t(17,we)})}const ve=o=>{const P=Z.has(o.id);Je(o.id),P?Jt.capture("cobenefit closed",{cobenefit:o.label}):Jt.capture("cobenefit opened",{cobenefit:o.label})};function lt(o,P){Se[o?"unshift":"push"](()=>{D[P.id]=o,t(1,D)})}function oe(o,P){Se[o?"unshift":"push"](()=>{k[P.id]=o,t(0,k)})}function _e(o){Se[o?"unshift":"push"](()=>{s=o,t(5,s)})}return a.$$set=o=>{"data"in o&&t(29,ye=o.data)},a.$$.update=()=>{a.$$.dirty[0]&1073741836&&t(4,l=W?g:T),a.$$.dirty[0]&8|a.$$.dirty[1]&3&&(r=W?b:B),a.$$.dirty[0]&16&&t(10,H=l?(El(l,o=>o.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),a.$$.dirty[0]&16&&t(36,J=l?Ql(l,o=>o.val):null),a.$$.dirty[1]&96&&t(11,y=J!=null&&ke?ke[J]??J:"N/A"),a.$$.dirty[0]&16&&t(34,x=l?Zl(l,o=>o.val):-1),a.$$.dirty[0]&16|a.$$.dirty[1]&8&&t(14,R=x!==-1&&l?l[x].Lookup_Value?.trim():"N/A"),a.$$.dirty[0]&16|a.$$.dirty[1]&8&&t(12,C=x!==-1&&l?(l[x].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),a.$$.dirty[0]&16&&t(35,re=l?$l(l,o=>o.val):-1),a.$$.dirty[0]&16|a.$$.dirty[1]&16&&t(15,Y=re!==-1&&l?l[re].Lookup_Value:"N/A"),a.$$.dirty[0]&16|a.$$.dirty[1]&16&&t(13,F=re!==-1&&l?(l[re].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),a.$$.dirty[0]&19|a.$$.dirty[1]&4&&(Object.values(k).forEach(o=>{o.firstChild?.remove()}),Object.values(D).forEach(o=>{o.firstChild?.remove()}),O&&l&&(Oe.includes(j)?(Qe(),_t(),$e()):(Ze(),he(),fe())))},t(37,ke=Ll[j]),[k,D,T,W,l,s,c,p,v,m,H,y,C,F,R,Y,se,we,Be,Z,Me,j,ue,vt,qe,ae,U,Je,Xe,ye,g,b,B,O,x,re,J,ke,et,pe,mt,tt,ze,ve,lt,oe,_e]}class _s extends jl{constructor(e){super(),Kl(this,e,Ya,qa,Rl,{data:29},null,[-1,-1,-1])}}export{_s as component};
