import{s as xl,a as E,e as f,t as A,g as D,c as d,b as _,p as le,d as L,f as r,q as u,v as ke,i as T,h as i,w as Hl,j as we,x as pl,y as jl,z as zl,n as Be,H as Ul,A as Wl,B as Se}from"../chunks/scheduler.Uo5vrMzy.js";import{S as Gl,i as Yl,c as vl,b as _l,m as ml,t as bl,a as gl,d as yl}from"../chunks/index.CfagcI6h.js";import{N as ql,e as wt}from"../chunks/NavigationBar.C20tItRD.js";import"../chunks/transform.BNP73y-7.js";import{ax as Jl,aq as Jt,ar as Kl,t as kl,av as Xl,T as El,ay as Dl,az as Ql,aA as Zl,S as Al,G as Ge,P as $l,K as Ye,J as ft,R as ea,H as Vt,Q as It}from"../chunks/index.JoTaYIke.js";import{f as Kt}from"../chunks/module.jBGXnV9S.js";import{b as ta}from"../chunks/paths.DsWfEoAb.js";import{M as la}from"../chunks/mapUK.CysOc_8R.js";import{l as aa,m as sa,n as ia,o as na,p as ra,q as oa,h as Ll,i as ht,d as Je,s as Tt,t as Xt,e as ca}from"../chunks/globals.B6l_bkCl.js";import{g as dt,o as ua,n as fa,x as da,y as ha,f as pa}from"../chunks/duckdb.gcxZ_qSO.js";import{p as Ct}from"../chunks/per_capita.COcMrZFY.js";import{F as va}from"../chunks/Footer.vUgKdTdA.js";import{n as _a}from"../chunks/nice.kBUTDe6n.js";import{t as ma,b as ba}from"../chunks/bin.BUPiur6H.js";import{d as qe}from"../chunks/dot.CeZCgq67.js";import{b as ga}from"../chunks/bar.CcxJAYDd.js";var ya=Array.prototype,ka=ya.slice;function Qt(l){return()=>l}function Sl(){var l=Jl,t=Jt,e=ma;function a(n){Array.isArray(n)||(n=Array.from(n));var s,c=n.length,v,p,b=new Array(c);for(s=0;s<c;++s)b[s]=l(n[s],s,n);var I=t(b),y=I[0],m=I[1],V=e(b,y,m);if(!Array.isArray(V)){const S=m,N=+V;if(t===Jt&&([y,m]=_a(y,m,N)),V=Kl(y,m,N),V[0]<=y&&(p=kl(y,m,N)),V[V.length-1]>=m)if(S>=m&&t===Jt){const B=kl(y,m,N);isFinite(B)&&(B>0?m=(Math.floor(m/B)+1)*B:B<0&&(m=(Math.ceil(m*-B)+1)/-B))}else V.pop()}for(var F=V.length,g=0,M=F;V[g]<=y;)++g;for(;V[M-1]>m;)--M;(g||M<F)&&(V=V.slice(g,M),F=M-g);var P=new Array(F+1),x;for(s=0;s<=F;++s)x=P[s]=[],x.x0=s>0?V[s-1]:y,x.x1=s<F?V[s]:m;if(isFinite(p)){if(p>0)for(s=0;s<c;++s)(v=b[s])!=null&&y<=v&&v<=m&&P[Math.min(F,Math.floor((v-y)/p))].push(n[s]);else if(p<0){for(s=0;s<c;++s)if((v=b[s])!=null&&y<=v&&v<=m){const S=Math.floor((y-v)*p);P[Math.min(F,S+(V[S]<=v))].push(n[s])}}}else for(s=0;s<c;++s)(v=b[s])!=null&&y<=v&&v<=m&&P[Xl(V,v,0,F)].push(n[s]);return P}return a.value=function(n){return arguments.length?(l=typeof n=="function"?n:Qt(n),a):l},a.domain=function(n){return arguments.length?(t=typeof n=="function"?n:Qt([n[0],n[1]]),a):t},a.thresholds=function(n){return arguments.length?(e=typeof n=="function"?n:Qt(Array.isArray(n)?ka.call(n):n),a):e},a}const Ea=""+new URL("../assets/negative.BhphYhmj.png",import.meta.url).href;function wl(l,t,e){const a=l.slice();return a[62]=t[e],a[63]=t,a[64]=e,a}function Vl(l,t,e){const a=l.slice();return a[62]=t[e],a}function Da(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),_(t).forEach(r),this.h()},h(){u(t,"class","plot svelte-1l3a9ub")},m(e,a){T(e,t,a),l[38](t)},p:Be,d(e){e&&r(t),l[38](null)}}}function Aa(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),_(t).forEach(r),this.h()},h(){u(t,"class","plot svelte-1l3a9ub")},m(e,a){T(e,t,a),l[37](t)},p:Be,d(e){e&&r(t),l[37](null)}}}function La(l){let t,e,a=Ve(l[12],l[24])+"",n,s,c,v;return{c(){t=A("Max value: "),e=f("strong"),n=A(a),s=A("("),c=A(l[14]),v=A(")")},l(p){t=L(p,"Max value: "),e=d(p,"STRONG",{});var b=_(e);n=L(b,a),b.forEach(r),s=L(p,"("),c=L(p,l[14]),v=L(p,")")},m(p,b){T(p,t,b),T(p,e,b),i(e,n),T(p,s,b),T(p,c,b),T(p,v,b)},p(p,b){b[0]&4096&&a!==(a=Ve(p[12],p[24])+"")&&we(n,a),b[0]&16384&&we(c,p[14])},d(p){p&&(r(t),r(e),r(s),r(c),r(v))}}}function Sa(l){let t;return{c(){t=A("-")},l(e){t=L(e,"-")},m(e,a){T(e,t,a)},p:Be,d(e){e&&r(t)}}}function wa(l){let t,e,a=Ve(l[10],l[24])+"",n;return{c(){t=A("Average value: "),e=f("strong"),n=A(a),this.h()},l(s){t=L(s,"Average value: "),e=d(s,"STRONG",{style:!0});var c=_(e);n=L(c,a),c.forEach(r),this.h()},h(){ke(e,"color","#BD210E")},m(s,c){T(s,t,c),T(s,e,c),i(e,n)},p(s,c){c[0]&1024&&a!==(a=Ve(s[10],s[24])+"")&&we(n,a)},d(s){s&&(r(t),r(e))}}}function Va(l){let t,e,a=Ve(l[11],l[24])+"",n;return{c(){t=A("Most common category: "),e=f("strong"),n=A(a),this.h()},l(s){t=L(s,"Most common category: "),e=d(s,"STRONG",{style:!0});var c=_(e);n=L(c,a),c.forEach(r),this.h()},h(){ke(e,"color","#BD210E")},m(s,c){T(s,t,c),T(s,e,c),i(e,n)},p(s,c){c[0]&2048&&a!==(a=Ve(s[11],s[24])+"")&&we(n,a)},d(s){s&&(r(t),r(e))}}}function Ia(l){let t,e,a=Ve(l[13],l[24])+"",n,s,c,v;return{c(){t=A("Min value: "),e=f("strong"),n=A(a),s=A("("),c=A(l[15]),v=A(")")},l(p){t=L(p,"Min value: "),e=d(p,"STRONG",{});var b=_(e);n=L(b,a),b.forEach(r),s=L(p,"("),c=L(p,l[15]),v=L(p,")")},m(p,b){T(p,t,b),T(p,e,b),i(e,n),T(p,s,b),T(p,c,b),T(p,v,b)},p(p,b){b[0]&8192&&a!==(a=Ve(p[13],p[24])+"")&&we(n,a),b[0]&32768&&we(c,p[15])},d(p){p&&(r(t),r(e),r(s),r(c),r(v))}}}function Ta(l){let t;return{c(){t=A("-")},l(e){t=L(e,"-")},m(e,a){T(e,t,a)},p:Be,d(e){e&&r(t)}}}function Il(l){let t,e,a,n,s;return{c(){t=f("div"),e=f("div"),a=f("span"),n=A(l[21]),s=A(" >>"),this.h()},l(c){t=d(c,"DIV",{class:!0});var v=_(t);e=d(v,"DIV",{class:!0});var p=_(e);a=d(p,"SPAN",{class:!0});var b=_(a);n=L(b,l[21]),s=L(b," >>"),b.forEach(r),p.forEach(r),v.forEach(r),this.h()},h(){u(a,"class","mini-header-text"),u(e,"class","mini-header-content"),u(t,"class","mini-header")},m(c,v){T(c,t,v),i(t,e),i(e,a),i(a,n),i(a,s)},p:Be,d(c){c&&r(t)}}}function Ca(l){let t;return{c(){t=A("LSOA.")},l(e){t=L(e,"LSOA.")},m(e,a){T(e,t,a)},d(e){e&&r(t)}}}function Ma(l){let t;return{c(){t=A("LAD.")},l(e){t=L(e,"LAD.")},m(e,a){T(e,t,a)},d(e){e&&r(t)}}}function Fa(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),_(t).forEach(r),this.h()},h(){u(t,"class","plot svelte-1l3a9ub")},m(e,a){T(e,t,a),l[40](t)},p:Be,d(e){e&&r(t),l[40](null)}}}function Ha(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),_(t).forEach(r),this.h()},h(){u(t,"class","plot svelte-1l3a9ub")},m(e,a){T(e,t,a),l[39](t)},p:Be,d(e){e&&r(t),l[39](null)}}}function Tl(l){let t,e,a=l[16].legend(l[25]).outerHTML+"";return{c(){t=f("div"),e=new Ul(!1),this.h()},l(n){t=d(n,"DIV",{id:!0});var s=_(t);e=Wl(s,!1),s.forEach(r),this.h()},h(){e.a=null,u(t,"id","legend")},m(n,s){T(n,t,s),e.m(a,t)},p(n,s){s[0]&65536&&a!==(a=n[16].legend(n[25]).outerHTML+"")&&e.p(a)},d(n){n&&r(t)}}}function Cl(l){let t,e,a,n,s=l[62].def+"",c,v,p,b,I,y,m,V="here",F,g,M=l[62].id.toLowerCase()+"",P,x,S;return{c(){t=f("div"),e=f("div"),a=f("div"),n=E(),c=A(s),v=E(),p=f("br"),b=E(),I=f("div"),y=A("Click "),m=f("a"),m.textContent=V,F=A(` for the 
                                `),g=f("span"),P=A(M),x=E(),S=A("report page."),this.h()},l(N){t=d(N,"DIV",{class:!0});var B=_(t);e=d(B,"DIV",{class:!0});var O=_(e);a=d(O,"DIV",{style:!0}),_(a).forEach(r),n=D(O),c=L(O,s),v=D(O),p=d(O,"BR",{}),b=D(O),I=d(O,"DIV",{class:!0});var q=_(I);y=L(q,"Click "),m=d(q,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0,"data-svelte-h":!0}),le(m)!=="svelte-gjrxnt"&&(m.textContent=V),F=L(q,` for the 
                                `),g=d(q,"SPAN",{style:!0});var z=_(g);P=L(z,M),x=D(z),z.forEach(r),S=L(q,"report page."),q.forEach(r),O.forEach(r),B.forEach(r),this.h()},h(){ke(a,"height","0.8em"),u(m,"class","link"),u(m,"href",ta+"/cobenefit?cobenefit="+l[62].id),u(m,"target","_blank"),u(m,"rel","noopener noreferrer"),ke(m,"color",ht(l[62].id)),ke(g,"color",ht(l[62].id)),u(I,"class","link-box svelte-1l3a9ub"),u(e,"class","legend-description svelte-1l3a9ub"),u(t,"class","legend-description-box svelte-1l3a9ub")},m(N,B){T(N,t,B),i(t,e),i(e,a),i(e,n),i(e,c),i(e,v),i(e,p),i(e,b),i(e,I),i(I,y),i(I,m),i(I,F),i(I,g),i(g,P),i(g,x),i(I,S)},d(N){N&&r(t)}}}function Ml(l){let t,e,a,n,s,c=l[62].label+"",v,p,b,I,y=l[19].has(l[62].id)?"▲":"▼",m,V,F=l[19].has(l[62].id),g,M,P;function x(){return l[42](l[62])}let S=F&&Cl(l);return{c(){t=f("div"),e=f("div"),a=f("span"),n=E(),s=f("span"),v=A(c),b=E(),I=f("span"),m=A(y),V=E(),S&&S.c(),g=E(),this.h()},l(N){t=d(N,"DIV",{class:!0});var B=_(t);e=d(B,"DIV",{class:!0,style:!0});var O=_(e);a=d(O,"SPAN",{class:!0,style:!0}),_(a).forEach(r),n=D(O),s=d(O,"SPAN",{class:!0});var q=_(s);v=L(q,c),q.forEach(r),b=D(O),I=d(O,"SPAN",{class:!0});var z=_(I);m=L(z,y),z.forEach(r),O.forEach(r),V=D(B),S&&S.l(B),g=D(B),B.forEach(r),this.h()},h(){u(a,"class","legend-color svelte-1l3a9ub"),ke(a,"background-color",ht(l[62].id)),u(s,"class",p="legend-text "+(l[19].has(l[62].id)?"expanded":"")+" svelte-1l3a9ub"),u(I,"class","toggle-icon svelte-1l3a9ub"),u(e,"class","legend-header svelte-1l3a9ub"),ke(e,"cursor","pointer"),u(t,"class","legend-item svelte-1l3a9ub")},m(N,B){T(N,t,B),i(t,e),i(e,a),i(e,n),i(e,s),i(s,v),i(e,b),i(e,I),i(I,m),i(t,V),S&&S.m(t,null),i(t,g),M||(P=Hl(e,"click",x),M=!0)},p(N,B){l=N,B[0]&524288&&p!==(p="legend-text "+(l[19].has(l[62].id)?"expanded":"")+" svelte-1l3a9ub")&&u(s,"class",p),B[0]&524288&&y!==(y=l[19].has(l[62].id)?"▲":"▼")&&we(m,y),B[0]&524288&&(F=l[19].has(l[62].id)),F?S||(S=Cl(l),S.c(),S.m(t,g)):S&&(S.d(1),S=null)},d(N){N&&r(t),S&&S.d(),M=!1,P()}}}function Ba(l){let t,e=`<img class="sm-icon svelte-1l3a9ub" src="${Ct}" alt="icon"/> <span class="tooltip-text">This chart use per capita values. i.e. show the cost/benefit per person in each area.</span>`;return{c(){t=f("div"),t.innerHTML=e,this.h()},l(a){t=d(a,"DIV",{class:!0,"data-svelte-h":!0}),le(t)!=="svelte-1ykpfra"&&(t.innerHTML=e),this.h()},h(){u(t,"class","tooltip-wrapper")},m(a,n){T(a,t,n)},d(a){a&&r(t)}}}function Pa(l){let t,e=`<img class="sm-icon svelte-1l3a9ub" src="${Ct}" alt="icon"/> <span class="tooltip-text">This chart use per capita values. i.e. show the cost/benefit per person in each area.</span>`,a,n,s=`<img class="sm-icon svelte-1l3a9ub" src="${Ea}" alt="icon"/> <span class="tooltip-text-neg svelte-1l3a9ub">This chart includes negative values.</span>`;return{c(){t=f("div"),t.innerHTML=e,a=E(),n=f("div"),n.innerHTML=s,this.h()},l(c){t=d(c,"DIV",{class:!0,"data-svelte-h":!0}),le(t)!=="svelte-14nr9ja"&&(t.innerHTML=e),a=D(c),n=d(c,"DIV",{class:!0,"data-svelte-h":!0}),le(n)!=="svelte-10ijo5a"&&(n.innerHTML=s),this.h()},h(){u(t,"class","tooltip-wrapper"),u(n,"class","tooltip-wrapper")},m(c,v){T(c,t,v),T(c,a,v),T(c,n,v)},d(c){c&&(r(t),r(a),r(n))}}}function Na(l){let t,e=l[62];const a=()=>l[44](t,e),n=()=>l[44](null,e);return{c(){t=f("div"),this.h()},l(s){t=d(s,"DIV",{class:!0}),_(t).forEach(r),this.h()},h(){u(t,"class","plot svelte-1l3a9ub")},m(s,c){T(s,t,c),a()},p(s,c){l=s,e!==l[62]&&(n(),e=l[62],a())},d(s){s&&r(t),n()}}}function Oa(l){let t,e=l[62];const a=()=>l[43](t,e),n=()=>l[43](null,e);return{c(){t=f("div"),this.h()},l(s){t=d(s,"DIV",{class:!0}),_(t).forEach(r),this.h()},h(){u(t,"class","plot svelte-1l3a9ub")},m(s,c){T(s,t,c),a()},p(s,c){l=s,e!==l[62]&&(n(),e=l[62],a())},d(s){s&&r(t),n()}}}function Fl(l){let t,e,a,n=l[62].label+"",s,c,v,p;function b(g,M){return g[62].id=="Hassle costs"||g[62].id=="Road repairs"||g[62].id=="Road safety"||g[62].id=="Congestion"||g[62].id=="Excess heat"?Pa:Ba}let y=b(l)(l);function m(g,M){return Je.includes(g[20])?Oa:Na}let F=m(l)(l);return{c(){t=f("div"),e=f("div"),a=f("h3"),s=A(n),c=E(),y.c(),v=E(),F.c(),p=E(),this.h()},l(g){t=d(g,"DIV",{class:!0});var M=_(t);e=d(M,"DIV",{class:!0});var P=_(e);a=d(P,"H3",{class:!0});var x=_(a);s=L(x,n),x.forEach(r),c=D(P),y.l(P),P.forEach(r),v=D(M),F.l(M),p=D(M),M.forEach(r),this.h()},h(){u(a,"class","component-chart-title svelte-1l3a9ub"),u(e,"class","component-chart-title-container svelte-1l3a9ub"),u(t,"class","plot-container svelte-1l3a9ub")},m(g,M){T(g,t,M),i(t,e),i(e,a),i(a,s),i(e,c),y.m(e,null),i(t,v),F.m(t,null),i(t,p)},p(g,M){F.p(g,M)},d(g){g&&r(t),y.d(),F.d()}}}function Ra(l){let t,e,a,n,s,c,v,p="SEF Report",b,I,y,m,V,F,g,M,P,x,S,N,B,O,q,z,Pe,$,ne=l[2]?"Switch to LAD level data":"Switch to LSOA level data",he,Ie,R,Z,oe,pe,pt='<p class="section-subtitle svelte-1l3a9ub">Overview</p>',Ke,U,J,ae,Ne,Oe,Xe,ee,Qe,Ze,ve,vt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Ct}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each area.</span></div>`,$e,et,W,_e,re,Re,tt,me,_t="Scroll for zooming in and out.",lt,be,mt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Ct}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each area.</span></div>`,at,xe,ge,o,H,k,ce='<p class="section-subtitle svelte-1l3a9ub">By Co-benefits</p>',j,ue,Q,Ee,Mt,Zt=l[21].toLowerCase()+"",Ft,Ht,Bt,Te,$t="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",Pt,Nt,Ot,te,je,el="Co-benefits:",Rt,xt,st,jt,zt,De,tl='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',Ut,Ce,Ae,bt,Me,it,Wt,ll;t=new ql({});function Bl(h,C){return Je.includes(h[20])?Aa:Da}let nt=Bl(l)(l);function Pl(h,C){return Je.includes(h[20])?Sa:La}let rt=Pl(l)(l);function Nl(h,C){return Je.includes(h[20])?Va:wa}let ot=Nl(l)(l);function Ol(h,C){return Je.includes(h[20])?Ta:Ia}let ct=Ol(l)(l),K=l[18]&&Il(l);function al(h,C){return h[3]==h[1]?Ma:Ca}let gt=al(l),ye=gt(l);function Rl(h,C){return Je.includes(h[20])?Ha:Fa}let ut=Rl(l)(l),X=l[16]&&Tl(l),ze=wt(Tt),G=[];for(let h=0;h<ze.length;h+=1)G[h]=Ml(Vl(l,ze,h));let Ue=wt(Tt),Y=[];for(let h=0;h<Ue.length;h+=1)Y[h]=Fl(wl(l,Ue,h));return Me=new va({}),{c(){vl(t.$$.fragment),e=E(),a=f("div"),n=f("div"),s=f("div"),c=f("div"),v=f("p"),v.textContent=p,b=E(),I=f("div"),y=f("h1"),m=A(l[23]),V=E(),F=f("p"),g=A(l[22]),M=E(),P=f("div"),nt.c(),x=E(),S=f("div"),N=f("p"),rt.c(),B=E(),O=f("p"),ot.c(),q=E(),z=f("p"),ct.c(),Pe=E(),$=f("button"),he=A(ne),Ie=E(),K&&K.c(),R=E(),Z=f("div"),oe=f("div"),pe=f("div"),pe.innerHTML=pt,Ke=E(),U=f("div"),J=f("div"),ae=f("h3"),Ne=A(l[21]),Oe=A(" against per capita co-benefit values (£, thousand)"),Xe=E(),ee=f("p"),Qe=A(`Each point in the chart below represents a UK 
                        `),ye.c(),Ze=E(),ve=f("div"),ve.innerHTML=vt,$e=E(),ut.c(),et=E(),W=f("div"),_e=f("h3"),re=A(l[21]),Re=A(" at LSOA level"),tt=E(),me=f("p"),me.textContent=_t,lt=E(),be=f("div"),be.innerHTML=mt,at=E(),X&&X.c(),xe=E(),ge=f("div"),o=E(),H=f("div"),k=f("div"),k.innerHTML=ce,j=E(),ue=f("div"),Q=f("div"),Ee=f("h3"),Mt=A(`Plotting 
                    
                    `),Ft=A(Zt),Ht=A(`
                
                against the gain/loss (£, thousand) per capita for each co-benefit`),Bt=E(),Te=f("p"),Te.textContent=$t,Pt=E(),Nt=f("br"),Ot=E(),te=f("div"),je=f("strong"),je.textContent=el,Rt=f("br"),xt=A(`Expand for detailed explanation
                    `),st=f("div"),jt=E();for(let h=0;h<G.length;h+=1)G[h].c();zt=E(),De=f("div"),De.innerHTML=tl,Ut=E(),Ce=f("div"),Ae=f("div");for(let h=0;h<Y.length;h+=1)Y[h].c();bt=E(),vl(Me.$$.fragment),this.h()},l(h){_l(t.$$.fragment,h),e=D(h),a=d(h,"DIV",{class:!0});var C=_(a);n=d(C,"DIV",{class:!0});var w=_(n);s=d(w,"DIV",{class:!0});var se=_(s);c=d(se,"DIV",{class:!0});var yt=_(c);v=d(yt,"P",{class:!0,"data-svelte-h":!0}),le(v)!=="svelte-3h7aqf"&&(v.textContent=p),b=D(yt),I=d(yt,"DIV",{class:!0});var kt=_(I);y=d(kt,"H1",{class:!0});var sl=_(y);m=L(sl,l[23]),sl.forEach(r),V=D(kt),F=d(kt,"P",{class:!0});var il=_(F);g=L(il,l[22]),il.forEach(r),kt.forEach(r),yt.forEach(r),M=D(se),P=d(se,"DIV",{class:!0});var nl=_(P);nt.l(nl),nl.forEach(r),x=D(se),S=d(se,"DIV",{class:!0});var We=_(S);N=d(We,"P",{class:!0});var rl=_(N);rt.l(rl),rl.forEach(r),B=D(We),O=d(We,"P",{class:!0});var ol=_(O);ot.l(ol),ol.forEach(r),q=D(We),z=d(We,"P",{class:!0});var cl=_(z);ct.l(cl),cl.forEach(r),We.forEach(r),se.forEach(r),w.forEach(r),Pe=D(C),$=d(C,"BUTTON",{});var ul=_($);he=L(ul,ne),ul.forEach(r),Ie=D(C),K&&K.l(C),R=D(C),Z=d(C,"DIV",{class:!0});var fl=_(Z);oe=d(fl,"DIV",{id:!0});var Et=_(oe);pe=d(Et,"DIV",{class:!0,"data-svelte-h":!0}),le(pe)!=="svelte-ll1i43"&&(pe.innerHTML=pt),Ke=D(Et),U=d(Et,"DIV",{id:!0,class:!0});var Dt=_(U);J=d(Dt,"DIV",{class:!0});var Le=_(J);ae=d(Le,"H3",{class:!0});var Gt=_(ae);Ne=L(Gt,l[21]),Oe=L(Gt," against per capita co-benefit values (£, thousand)"),Gt.forEach(r),Xe=D(Le),ee=d(Le,"P",{class:!0});var Yt=_(ee);Qe=L(Yt,`Each point in the chart below represents a UK 
                        `),ye.l(Yt),Yt.forEach(r),Ze=D(Le),ve=d(Le,"DIV",{class:!0,"data-svelte-h":!0}),le(ve)!=="svelte-tg5ofw"&&(ve.innerHTML=vt),$e=D(Le),ut.l(Le),Le.forEach(r),et=D(Dt),W=d(Dt,"DIV",{class:!0});var fe=_(W);_e=d(fe,"H3",{class:!0});var qt=_(_e);re=L(qt,l[21]),Re=L(qt," at LSOA level"),qt.forEach(r),tt=D(fe),me=d(fe,"P",{class:!0,"data-svelte-h":!0}),le(me)!=="svelte-1ask2se"&&(me.textContent=_t),lt=D(fe),be=d(fe,"DIV",{class:!0,"data-svelte-h":!0}),le(be)!=="svelte-7b2hds"&&(be.innerHTML=mt),at=D(fe),X&&X.l(fe),xe=D(fe),ge=d(fe,"DIV",{id:!0,class:!0}),_(ge).forEach(r),fe.forEach(r),Dt.forEach(r),Et.forEach(r),fl.forEach(r),o=D(C),H=d(C,"DIV",{id:!0});var At=_(H);k=d(At,"DIV",{class:!0,"data-svelte-h":!0}),le(k)!=="svelte-1av3fse"&&(k.innerHTML=ce),j=D(At),ue=d(At,"DIV",{id:!0,class:!0,style:!0});var Lt=_(ue);Q=d(Lt,"DIV",{id:!0,class:!0});var de=_(Q);Ee=d(de,"H3",{class:!0});var St=_(Ee);Mt=L(St,`Plotting 
                    
                    `),Ft=L(St,Zt),Ht=L(St,`
                
                against the gain/loss (£, thousand) per capita for each co-benefit`),St.forEach(r),Bt=D(de),Te=d(de,"P",{class:!0,"data-svelte-h":!0}),le(Te)!=="svelte-1h97e3k"&&(Te.textContent=$t),Pt=D(de),Nt=d(de,"BR",{}),Ot=D(de),te=d(de,"DIV",{id:!0,class:!0});var Fe=_(te);je=d(Fe,"STRONG",{"data-svelte-h":!0}),le(je)!=="svelte-1qu96kx"&&(je.textContent=el),Rt=d(Fe,"BR",{}),xt=L(Fe,`Expand for detailed explanation
                    `),st=d(Fe,"DIV",{style:!0}),_(st).forEach(r),jt=D(Fe);for(let He=0;He<G.length;He+=1)G[He].l(Fe);Fe.forEach(r),zt=D(de),De=d(de,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),le(De)!=="svelte-11g4vkg"&&(De.innerHTML=tl),de.forEach(r),Ut=D(Lt),Ce=d(Lt,"DIV",{id:!0,class:!0});var dl=_(Ce);Ae=d(dl,"DIV",{id:!0,class:!0});var hl=_(Ae);for(let He=0;He<Y.length;He+=1)Y[He].l(hl);hl.forEach(r),dl.forEach(r),Lt.forEach(r),At.forEach(r),C.forEach(r),bt=D(h),_l(Me.$$.fragment,h),this.h()},h(){u(v,"class","page-subtitle svelte-1l3a9ub"),u(y,"class","page-title svelte-1l3a9ub"),u(F,"class","definition"),u(I,"class","title-container"),u(c,"class","header-text svelte-1l3a9ub"),u(P,"class","header-vis svelte-1l3a9ub"),u(N,"class","definition-stat svelte-1l3a9ub"),u(O,"class","definition-stat svelte-1l3a9ub"),u(z,"class","definition-stat svelte-1l3a9ub"),u(S,"class","header-stats svelte-1l3a9ub"),u(s,"class","header-content svelte-1l3a9ub"),u(n,"class","section header svelte-1l3a9ub"),u(pe,"class","section-header"),u(ae,"class","component-title"),u(ee,"class","description"),u(ve,"class","aggregation-icon-container2 svelte-1l3a9ub"),u(J,"class","component column"),u(_e,"class","component-title"),u(me,"class","description"),u(be,"class","aggregation-icon-container2 svelte-1l3a9ub"),u(ge,"id","map"),u(ge,"class","svelte-1l3a9ub"),u(W,"class","component column"),u(U,"id","vis-block"),u(U,"class","svelte-1l3a9ub"),u(oe,"id","overview"),u(Z,"class","section"),u(k,"class","section-header"),u(Ee,"class","component-title"),u(Te,"class","explanation"),ke(st,"height","0.8em"),u(te,"id","main-legend"),u(te,"class","legend-box svelte-1l3a9ub"),u(De,"id","se-disclaimer"),u(De,"class","disclaimer-box svelte-1l3a9ub"),u(Q,"id","se-title"),u(Q,"class","svelte-1l3a9ub"),u(Ae,"id","multiple-plots"),u(Ae,"class","svelte-1l3a9ub"),u(Ce,"id","multiple-comp"),u(Ce,"class","svelte-1l3a9ub"),u(ue,"id","se-block"),u(ue,"class","component svelte-1l3a9ub"),ke(ue,"margin-left","1rem"),u(H,"id","compare"),u(a,"class","page-container")},m(h,C){ml(t,h,C),T(h,e,C),T(h,a,C),i(a,n),i(n,s),i(s,c),i(c,v),i(c,b),i(c,I),i(I,y),i(y,m),i(I,V),i(I,F),i(F,g),i(s,M),i(s,P),nt.m(P,null),i(s,x),i(s,S),i(S,N),rt.m(N,null),i(S,B),i(S,O),ot.m(O,null),i(S,q),i(S,z),ct.m(z,null),i(a,Pe),i(a,$),i($,he),i(a,Ie),K&&K.m(a,null),i(a,R),i(a,Z),i(Z,oe),i(oe,pe),i(oe,Ke),i(oe,U),i(U,J),i(J,ae),i(ae,Ne),i(ae,Oe),i(J,Xe),i(J,ee),i(ee,Qe),ye.m(ee,null),i(J,Ze),i(J,ve),i(J,$e),ut.m(J,null),i(U,et),i(U,W),i(W,_e),i(_e,re),i(_e,Re),i(W,tt),i(W,me),i(W,lt),i(W,be),i(W,at),X&&X.m(W,null),i(W,xe),i(W,ge),l[41](ge),i(a,o),i(a,H),i(H,k),i(H,j),i(H,ue),i(ue,Q),i(Q,Ee),i(Ee,Mt),i(Ee,Ft),i(Ee,Ht),i(Q,Bt),i(Q,Te),i(Q,Pt),i(Q,Nt),i(Q,Ot),i(Q,te),i(te,je),i(te,Rt),i(te,xt),i(te,st),i(te,jt);for(let w=0;w<G.length;w+=1)G[w]&&G[w].m(te,null);i(Q,zt),i(Q,De),i(ue,Ut),i(ue,Ce),i(Ce,Ae);for(let w=0;w<Y.length;w+=1)Y[w]&&Y[w].m(Ae,null);l[45](a),T(h,bt,C),ml(Me,h,C),it=!0,Wt||(ll=Hl($,"click",l[26]),Wt=!0)},p(h,C){if(nt.p(h,C),rt.p(h,C),ot.p(h,C),ct.p(h,C),(!it||C[0]&4)&&ne!==(ne=h[2]?"Switch to LAD level data":"Switch to LSOA level data")&&we(he,ne),h[18]?K?K.p(h,C):(K=Il(h),K.c(),K.m(a,R)):K&&(K.d(1),K=null),gt!==(gt=al(h))&&(ye.d(1),ye=gt(h),ye&&(ye.c(),ye.m(ee,null))),ut.p(h,C),h[16]?X?X.p(h,C):(X=Tl(h),X.c(),X.m(W,xe)):X&&(X.d(1),X=null),C[0]&134742016){ze=wt(Tt);let w;for(w=0;w<ze.length;w+=1){const se=Vl(h,ze,w);G[w]?G[w].p(se,C):(G[w]=Ml(se),G[w].c(),G[w].m(te,null))}for(;w<G.length;w+=1)G[w].d(1);G.length=ze.length}if(C[0]&1049089){Ue=wt(Tt);let w;for(w=0;w<Ue.length;w+=1){const se=wl(h,Ue,w);Y[w]?Y[w].p(se,C):(Y[w]=Fl(se),Y[w].c(),Y[w].m(Ae,null))}for(;w<Y.length;w+=1)Y[w].d(1);Y.length=Ue.length}},i(h){it||(bl(t.$$.fragment,h),bl(Me.$$.fragment,h),it=!0)},o(h){gl(t.$$.fragment,h),gl(Me.$$.fragment,h),it=!1},d(h){h&&(r(e),r(a),r(bt)),yl(t,h),nt.d(),rt.d(),ot.d(),ct.d(),K&&K.d(),ye.d(),ut.d(),X&&X.d(),l[41](null),pl(G,h),pl(Y,h),l[45](null),yl(Me,h),Wt=!1,ll()}}}let ie=400;function Ve(l,t){return t==="£"?`${t}${l}`:`${l} ${t}`}function xa(l,t,e){let a,n,s,c,v,p,b,I={},y={},m,V,F,g,M=!1,P,x=!1,S,N,B,O,q,z,Pe,$,ne,he,{data:Ie}=t;const R=Ie.SEF;console.log("SEF ",R);const Z=aa.find(o=>o.id===R)?.id??R,oe=sa.find(o=>o.id===R)?.label??R,pe=ia.find(o=>o.id===R)?.def??R,pt=na.find(o=>o.id===R)?.description??R,Ke=ra.find(o=>o.id===R)?.short_units??R,U=oa.find(o=>o.id===R)?.units??R;let J,ae,Ne=!1,Oe="";const Xe=["overview","compare"];function ee(){const o=window.scrollY;e(18,Ne=o>250);for(const H of Xe){const k=document.getElementById(H);if(!k)continue;const ce=k.getBoundingClientRect();if(ce.top<=150&&ce.bottom>=150){Oe!==H&&Kt.capture("section entered (sef)",{section_name:H}),Oe=H;break}}}jl(()=>(window.addEventListener("scroll",ee),ee(),()=>window.removeEventListener("scroll",ee))),zl(()=>{window.removeEventListener("scroll",ee)});async function Qe(){e(29,m=await dt(ua(R))),console.log("totals",m),e(1,g=await dt(fa(R))),console.log("LAD data 1 ",g),e(30,V=await dt(da(R))),console.log("by cobens",V),e(31,P=await dt(ha(R))),console.log("LADsef",P),F=await dt(pa()),console.log("per_capita_data",F),Xt.forEach(o=>{e(30,V[o]=+V[o],V)}),e(32,x=!0)}Qe().then(()=>{e(16,J=new la(m,"LSOA",ae,"val",!1,"Lookup_Value",!1)),J.initMap()});function Ze(){e(2,M=!M)}function ve(){const o=El(m,k=>k.val)??0,H=Al(Sl().thresholds(20).value(k=>k.val)(m),k=>k.length);e(5,c.innerHTML="",c),c?.append(Ge({height:ie/1.9,width:ie*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${U}`},y:{label:a===g?"No. of LADs":"No. of LSOAs",labelArrow:!1,domain:a===g?[0,100]:[0,1e4]},style:{fontSize:"16px"},marks:[$l(a,ba({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),Ye([o],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:o,label:"Average"}},tip:{format:{average:k=>`${k.toFixed(2)}`,x:!1}}}),qe(m,{x:{value:o,thresholds:20},y:H+.1*H,r:5,fill:"#BD210E"}),ft({label:`${U}`,labelArrow:!1,labelAnchor:"center"})]}))}function vt(){const o=Dl(m,j=>j.val)??0,H=Al(Sl().thresholds(20).value(j=>j.val)(m),j=>j.length),k=Ll[Z],ce=k?Object.keys(k).map(Number):m.filter(j=>j.SEFMAME==Z).map(j=>j.SE);p?.append(Ge({height:ie/1.9,width:ie*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:Z==="Typology"?80:50,x:{domain:ce,label:ca(Z),tickFormat:j=>k?.[j]??j,tickRotate:Z==="Typology"?-10:0},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[ga(m,ea({y:"count"},{x:"val",fill:"black",opacity:.5})),Ye([o],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:o,label:"Average"}},tip:{format:{average:j=>`${j.toFixed(2)}`,x:!1}}}),qe(m,{x:{value:o,thresholds:20},y:H+.1*H,r:5,fill:"#BD210E"})]}))}function $e(){e(6,v.innerHTML="",v),v?.append(Ge({height:ie*1.5,width:ie*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[Vt([0],{stroke:"#333",strokeWidth:1.25}),Ye([0],{stroke:"#333",strokeWidth:.75}),qe(a,{x:"val",y:o=>o.total_per_capita*1e3,fill:o=>o.total_per_capita<0?"#BD210E":"#242424",r:a===g?4:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${U}`},value:{value:o=>o.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),It({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),ft({label:`${U}`,labelArrow:!1,labelAnchor:"center"})]}))}function et(){const H=m.map(k=>({...k,jittered_val:k.val+(Math.random()-.5)*.2}));b?.append(Ge({height:ie*1.5,width:ie*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[Vt([0],{stroke:"#333",strokeWidth:1.25}),Ye([0],{stroke:"#333",strokeWidth:.75}),qe(H,{x:"jittered_val",y:k=>k.total_per_capita*1e3,fill:k=>k.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${U}`},value:{value:k=>k.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),It({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),ft({label:`${U}`,labelArrow:!1,labelAnchor:"center"})]}))}function W(){Xt.forEach(o=>{let H;H=Ge({height:ie,width:ie,marginLeft:60,marginTop:10,marginRight:10,marginBottom:60,x:{label:null},y:{label:null},style:{fontSize:"12px"},marks:[Vt([0],{stroke:"#333",strokeWidth:1.25}),Ye([0],{stroke:"#333",strokeWidth:.75}),qe(n.filter(k=>k.co_benefit_type==o),{x:"val",y:"total",fill:ht(o),fillOpacity:.5,r:n===P?3.5:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),It({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),ft({label:`${U}`,labelArrow:!1,labelAnchor:"center"})]}),I[o]?.append(H)})}function _e(){const H=V.map(k=>({...k,jittered_val:k.val+(Math.random()-.5)*.2}));Xt.forEach(k=>{let ce;ce=Ge({height:ie,width:ie,marginLeft:60,marginTop:10,marginRight:10,marginBottom:60,x:{label:null},y:{label:null},style:{fontSize:"12px"},marks:[Vt([0],{stroke:"#333",strokeWidth:1.25}),Ye([0],{stroke:"#333",strokeWidth:.75}),qe(H.filter(j=>j.co_benefit_type==k),{x:"jittered_val",y:"total",fill:ht(k),fillOpacity:.5,r:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),It({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),ft({label:`${U}`,labelArrow:!1,labelAnchor:"center"})]}),y[k]?.append(ce)})}let re=new Set;function Re(o){re.has(o)?re.delete(o):re.add(o),e(19,re=new Set(re))}function tt(o){Se[o?"unshift":"push"](()=>{p=o,e(7,p)})}function me(o){Se[o?"unshift":"push"](()=>{c=o,e(5,c)})}function _t(o){Se[o?"unshift":"push"](()=>{b=o,e(8,b)})}function lt(o){Se[o?"unshift":"push"](()=>{v=o,e(6,v)})}function be(o){Se[o?"unshift":"push"](()=>{ae=o,e(17,ae)})}const mt=o=>{const H=re.has(o.id);Re(o.id),H?Kt.capture("cobenefit closed",{cobenefit:o.label}):Kt.capture("cobenefit opened",{cobenefit:o.label})};function at(o,H){Se[o?"unshift":"push"](()=>{y[H.id]=o,e(9,y)})}function xe(o,H){Se[o?"unshift":"push"](()=>{I[H.id]=o,e(0,I)})}function ge(o){Se[o?"unshift":"push"](()=>{s=o,e(4,s)})}return l.$$set=o=>{"data"in o&&e(28,Ie=o.data)},l.$$.update=()=>{l.$$.dirty[0]&536870918&&e(3,a=M?m:g),l.$$.dirty[0]&1073741828|l.$$.dirty[1]&1&&(n=M?V:P),l.$$.dirty[0]&8&&e(10,S=a?(El(a,o=>o.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&8&&e(35,ne=a?Dl(a,o=>o.val):null),l.$$.dirty[1]&48&&e(11,N=ne!=null&&he?he[ne]??ne:"N/A"),l.$$.dirty[0]&8&&e(33,z=a?Ql(a,o=>o.val):-1),l.$$.dirty[0]&8|l.$$.dirty[1]&4&&e(14,q=z!==-1&&a?a[z].Lookup_Value:"N/A"),l.$$.dirty[0]&8|l.$$.dirty[1]&4&&e(12,B=z!==-1&&a?(a[z].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&8&&e(34,$=a?Zl(a,o=>o.val):-1),l.$$.dirty[0]&8|l.$$.dirty[1]&8&&e(15,Pe=$!==-1&&a?a[$].Lookup_Value:"N/A"),l.$$.dirty[0]&8|l.$$.dirty[1]&8&&e(13,O=$!==-1&&a?(a[$].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&9|l.$$.dirty[1]&2&&(Object.values(I).forEach(o=>{o.firstChild?.remove()}),x&&(ve(),et(),vt(),W(),_e()),x&&a&&$e())},e(36,he=Ll[Z]),[I,g,M,a,s,c,v,p,b,y,S,N,B,O,q,Pe,J,ae,Ne,re,Z,oe,pe,pt,Ke,U,Ze,Re,Ie,m,V,P,x,z,$,ne,he,tt,me,_t,lt,be,mt,at,xe,ge]}class os extends Gl{constructor(t){super(),Yl(this,t,xa,Ra,xl,{data:28},null,[-1,-1,-1])}}export{os as component};
