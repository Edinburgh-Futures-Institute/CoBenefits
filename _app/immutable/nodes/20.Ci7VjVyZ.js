import{s as wl,a as w,e as d,t as x,g as D,c as u,b as m,p as ie,d as S,f as r,q as f,B as ne,i as z,h as s,w as sl,r as Dl,Y as Al,n as Te,H as xl,E as Sl,y as Vl,j as Ce,A as Ae}from"../chunks/scheduler.C9ZL8GxQ.js";import{S as Ll,i as Il,c as zl,b as Cl,m as Tl,t as Ml,a as Pl,d as Fl}from"../chunks/index.vifww4_P.js";import{N as Bl,e as mt}from"../chunks/NavigationBar.zJC8Emop.js";import"../chunks/transform.BNP73y-7.js";import{Q as Nl,R as Ft,S as Hl,t as il,T as Rl,O as nl,U as ol,V as Ol,W as jl,X as rl,J as Ne,L as Wl,Y as He,Z as lt,_ as Ul,N as gt,$ as bt}from"../chunks/index.xKAkP9XD.js";import{b as Yl}from"../chunks/paths.RV0yv4sC.js";import{M as Gl}from"../chunks/mapUK.CdFeQu9i.js";import{f as ql,h as Jl,i as Xl,j as Kl,k as Ql,l as Zl,e as at,S as Oe,m as kt,n as Bt,a as cl,d as $l}from"../chunks/globals.DBm39SdH.js";import{g as Nt,i as ea,k as ta,l as la}from"../chunks/duckdb.xPhqaJuY.js";import{p as Ht}from"../chunks/per_capita.COcMrZFY.js";import{n as aa}from"../chunks/nice.BNODEgY4.js";import{t as sa,b as ia}from"../chunks/bin.CfZRpQ3l.js";import{d as Re}from"../chunks/dot.CIeIS7dg.js";import{a as na}from"../chunks/bar.D6_jcMRG.js";var oa=Array.prototype,ra=oa.slice;function Rt(l){return()=>l}function fl(){var l=Nl,t=Ft,e=sa;function i(n){Array.isArray(n)||(n=Array.from(n));var a,c=n.length,g,h,_=new Array(c);for(a=0;a<c;++a)_[a]=l(n[a],a,n);var v=t(_),b=v[0],k=v[1],L=e(_,b,k);if(!Array.isArray(L)){const E=k,T=+L;if(t===Ft&&([b,k]=aa(b,k,T)),L=Hl(b,k,T),L[0]<=b&&(h=il(b,k,T)),L[L.length-1]>=k)if(E>=k&&t===Ft){const V=il(b,k,T);isFinite(V)&&(V>0?k=(Math.floor(k/V)+1)*V:V<0&&(k=(Math.ceil(k*-V)+1)/-V))}else L.pop()}for(var C=L.length,F=0,H=C;L[F]<=b;)++F;for(;L[H-1]>k;)--H;(F||H<C)&&(L=L.slice(F,H),C=H-F);var N=new Array(C+1),q;for(a=0;a<=C;++a)q=N[a]=[],q.x0=a>0?L[a-1]:b,q.x1=a<C?L[a]:k;if(isFinite(h)){if(h>0)for(a=0;a<c;++a)(g=_[a])!=null&&b<=g&&g<=k&&N[Math.min(C,Math.floor((g-b)/h))].push(n[a]);else if(h<0){for(a=0;a<c;++a)if((g=_[a])!=null&&b<=g&&g<=k){const E=Math.floor((b-g)*h);N[Math.min(C,E+(L[E]<=g))].push(n[a])}}}else for(a=0;a<c;++a)(g=_[a])!=null&&b<=g&&g<=k&&N[Rl(L,g,0,C)].push(n[a]);return N}return i.value=function(n){return arguments.length?(l=typeof n=="function"?n:Rt(n),i):l},i.domain=function(n){return arguments.length?(t=typeof n=="function"?n:Rt([n[0],n[1]]),i):t},i.thresholds=function(n){return arguments.length?(e=typeof n=="function"?n:Rt(Array.isArray(n)?ra.call(n):n),i):e},i}function dl(l,t,e){const i=l.slice();return i[55]=t[e],i[56]=t,i[57]=e,i}function ul(l,t,e){const i=l.slice();return i[55]=t[e],i}function ca(l){let t;return{c(){t=d("div"),this.h()},l(e){t=u(e,"DIV",{class:!0}),m(t).forEach(r),this.h()},h(){f(t,"class","plot svelte-1w6xccz")},m(e,i){z(e,t,i),l[27](t)},p:Te,d(e){e&&r(t),l[27](null)}}}function fa(l){let t;return{c(){t=d("div"),this.h()},l(e){t=u(e,"DIV",{class:!0}),m(t).forEach(r),this.h()},h(){f(t,"class","plot svelte-1w6xccz")},m(e,i){z(e,t,i),l[26](t)},p:Te,d(e){e&&r(t),l[26](null)}}}function da(l){let t,e,i=xe(l[9],l[21])+"",n,a,c,g;return{c(){t=x("Max value: "),e=d("strong"),n=x(i),a=x("("),c=x(l[11]),g=x(")")},l(h){t=S(h,"Max value: "),e=u(h,"STRONG",{});var _=m(e);n=S(_,i),_.forEach(r),a=S(h,"("),c=S(h,l[11]),g=S(h,")")},m(h,_){z(h,t,_),z(h,e,_),s(e,n),z(h,a,_),z(h,c,_),z(h,g,_)},p(h,_){_[0]&512&&i!==(i=xe(h[9],h[21])+"")&&Ce(n,i),_[0]&2048&&Ce(c,h[11])},d(h){h&&(r(t),r(e),r(a),r(c),r(g))}}}function ua(l){let t;return{c(){t=x("-")},l(e){t=S(e,"-")},m(e,i){z(e,t,i)},p:Te,d(e){e&&r(t)}}}function ha(l){let t,e,i=xe(l[7],l[21])+"",n;return{c(){t=x("Average value: "),e=d("strong"),n=x(i),this.h()},l(a){t=S(a,"Average value: "),e=u(a,"STRONG",{style:!0});var c=m(e);n=S(c,i),c.forEach(r),this.h()},h(){ne(e,"color","#BD210E")},m(a,c){z(a,t,c),z(a,e,c),s(e,n)},p(a,c){c[0]&128&&i!==(i=xe(a[7],a[21])+"")&&Ce(n,i)},d(a){a&&(r(t),r(e))}}}function va(l){let t,e,i=xe(l[8],l[21])+"",n;return{c(){t=x("Most common category: "),e=d("strong"),n=x(i),this.h()},l(a){t=S(a,"Most common category: "),e=u(a,"STRONG",{style:!0});var c=m(e);n=S(c,i),c.forEach(r),this.h()},h(){ne(e,"color","#BD210E")},m(a,c){z(a,t,c),z(a,e,c),s(e,n)},p(a,c){c[0]&256&&i!==(i=xe(a[8],a[21])+"")&&Ce(n,i)},d(a){a&&(r(t),r(e))}}}function pa(l){let t,e,i=xe(l[10],l[21])+"",n,a,c,g;return{c(){t=x("Min value: "),e=d("strong"),n=x(i),a=x("("),c=x(l[12]),g=x(")")},l(h){t=S(h,"Min value: "),e=u(h,"STRONG",{});var _=m(e);n=S(_,i),_.forEach(r),a=S(h,"("),c=S(h,l[12]),g=S(h,")")},m(h,_){z(h,t,_),z(h,e,_),s(e,n),z(h,a,_),z(h,c,_),z(h,g,_)},p(h,_){_[0]&1024&&i!==(i=xe(h[10],h[21])+"")&&Ce(n,i),_[0]&4096&&Ce(c,h[12])},d(h){h&&(r(t),r(e),r(a),r(c),r(g))}}}function _a(l){let t;return{c(){t=x("-")},l(e){t=S(e,"-")},m(e,i){z(e,t,i)},p:Te,d(e){e&&r(t)}}}function hl(l){let t,e,i,n,a;return{c(){t=d("div"),e=d("div"),i=d("span"),n=x(l[18]),a=x(" >>"),this.h()},l(c){t=u(c,"DIV",{class:!0});var g=m(t);e=u(g,"DIV",{class:!0});var h=m(e);i=u(h,"SPAN",{class:!0});var _=m(i);n=S(_,l[18]),a=S(_," >>"),_.forEach(r),h.forEach(r),g.forEach(r),this.h()},h(){f(i,"class","mini-header-text"),f(e,"class","mini-header-content"),f(t,"class","mini-header")},m(c,g){z(c,t,g),s(t,e),s(e,i),s(i,n),s(i,a)},p:Te,d(c){c&&r(t)}}}function ma(l){let t;return{c(){t=d("div"),this.h()},l(e){t=u(e,"DIV",{class:!0}),m(t).forEach(r),this.h()},h(){f(t,"class","plot svelte-1w6xccz")},m(e,i){z(e,t,i),l[29](t)},p:Te,d(e){e&&r(t),l[29](null)}}}function ga(l){let t;return{c(){t=d("div"),this.h()},l(e){t=u(e,"DIV",{class:!0}),m(t).forEach(r),this.h()},h(){f(t,"class","plot svelte-1w6xccz")},m(e,i){z(e,t,i),l[28](t)},p:Te,d(e){e&&r(t),l[28](null)}}}function vl(l){let t,e,i=l[13].legend(l[22]).outerHTML+"";return{c(){t=d("div"),e=new xl(!1),this.h()},l(n){t=u(n,"DIV",{id:!0});var a=m(t);e=Sl(a,!1),a.forEach(r),this.h()},h(){e.a=null,f(t,"id","legend")},m(n,a){z(n,t,a),e.m(i,t)},p(n,a){a[0]&8192&&i!==(i=n[13].legend(n[22]).outerHTML+"")&&e.p(i)},d(n){n&&r(t)}}}function pl(l){let t,e,i,n,a=l[55].def+"",c,g,h,_,v,b,k,L="here",C,F,H=l[55].id.toLowerCase()+"",N,q,E;return{c(){t=d("div"),e=d("div"),i=d("div"),n=w(),c=x(a),g=w(),h=d("br"),_=w(),v=d("div"),b=x("Click "),k=d("a"),k.textContent=L,C=x(` for the 
                                `),F=d("span"),N=x(H),q=w(),E=x("report page."),this.h()},l(T){t=u(T,"DIV",{class:!0});var V=m(t);e=u(V,"DIV",{class:!0});var M=m(e);i=u(M,"DIV",{style:!0}),m(i).forEach(r),n=D(M),c=S(M,a),g=D(M),h=u(M,"BR",{}),_=D(M),v=u(M,"DIV",{class:!0});var J=m(v);b=S(J,"Click "),k=u(J,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0,"data-svelte-h":!0}),ie(k)!=="svelte-gjrxnt"&&(k.textContent=L),C=S(J,` for the 
                                `),F=u(J,"SPAN",{style:!0});var j=m(F);N=S(j,H),q=D(j),j.forEach(r),E=S(J,"report page."),J.forEach(r),M.forEach(r),V.forEach(r),this.h()},h(){ne(i,"height","0.8em"),f(k,"class","link"),f(k,"href",Yl+"/cobenefit?cobenefit="+l[55].id),f(k,"target","_blank"),f(k,"rel","noopener noreferrer"),ne(k,"color",at(l[55].id)),ne(F,"color",at(l[55].id)),f(v,"class","link-box svelte-1w6xccz"),f(e,"class","legend-description svelte-1w6xccz"),f(t,"class","legend-description-box svelte-1w6xccz")},m(T,V){z(T,t,V),s(t,e),s(e,i),s(e,n),s(e,c),s(e,g),s(e,h),s(e,_),s(e,v),s(v,b),s(v,k),s(v,C),s(v,F),s(F,N),s(F,q),s(v,E)},d(T){T&&r(t)}}}function _l(l){let t,e,i,n,a,c=l[55].label+"",g,h,_,v,b=l[16].has(l[55].id)?"▲":"▼",k,L,C=l[16].has(l[55].id),F,H,N;function q(){return l[31](l[55])}let E=C&&pl(l);return{c(){t=d("div"),e=d("div"),i=d("span"),n=w(),a=d("span"),g=x(c),_=w(),v=d("span"),k=x(b),L=w(),E&&E.c(),F=w(),this.h()},l(T){t=u(T,"DIV",{class:!0});var V=m(t);e=u(V,"DIV",{class:!0,style:!0});var M=m(e);i=u(M,"SPAN",{class:!0,style:!0}),m(i).forEach(r),n=D(M),a=u(M,"SPAN",{class:!0});var J=m(a);g=S(J,c),J.forEach(r),_=D(M),v=u(M,"SPAN",{class:!0});var j=m(v);k=S(j,b),j.forEach(r),M.forEach(r),L=D(V),E&&E.l(V),F=D(V),V.forEach(r),this.h()},h(){f(i,"class","legend-color svelte-1w6xccz"),ne(i,"background-color",at(l[55].id)),f(a,"class",h="legend-text "+(l[16].has(l[55].id)?"expanded":"")+" svelte-1w6xccz"),f(v,"class","toggle-icon svelte-1w6xccz"),f(e,"class","legend-header svelte-1w6xccz"),ne(e,"cursor","pointer"),f(t,"class","legend-item svelte-1w6xccz")},m(T,V){z(T,t,V),s(t,e),s(e,i),s(e,n),s(e,a),s(a,g),s(e,_),s(e,v),s(v,k),s(t,L),E&&E.m(t,null),s(t,F),H||(N=Vl(e,"click",q),H=!0)},p(T,V){l=T,V[0]&65536&&h!==(h="legend-text "+(l[16].has(l[55].id)?"expanded":"")+" svelte-1w6xccz")&&f(a,"class",h),V[0]&65536&&b!==(b=l[16].has(l[55].id)?"▲":"▼")&&Ce(k,b),V[0]&65536&&(C=l[16].has(l[55].id)),C?E||(E=pl(l),E.c(),E.m(t,F)):E&&(E.d(1),E=null)},d(T){T&&r(t),E&&E.d(),H=!1,N()}}}function ba(l){let t,e=l[55];const i=()=>l[33](t,e),n=()=>l[33](null,e);return{c(){t=d("div"),this.h()},l(a){t=u(a,"DIV",{class:!0}),m(t).forEach(r),this.h()},h(){f(t,"class","plot svelte-1w6xccz")},m(a,c){z(a,t,c),i()},p(a,c){l=a,e!==l[55]&&(n(),e=l[55],i())},d(a){a&&r(t),n()}}}function ka(l){let t,e=l[55];const i=()=>l[32](t,e),n=()=>l[32](null,e);return{c(){t=d("div"),this.h()},l(a){t=u(a,"DIV",{class:!0}),m(t).forEach(r),this.h()},h(){f(t,"class","plot svelte-1w6xccz")},m(a,c){z(a,t,c),i()},p(a,c){l=a,e!==l[55]&&(n(),e=l[55],i())},d(a){a&&r(t),n()}}}function ml(l){let t,e,i=l[55].label+"",n,a,c;function g(v,b){return Oe.includes(v[17])?ka:ba}let _=g(l)(l);return{c(){t=d("div"),e=d("h3"),n=x(i),a=w(),_.c(),c=w(),this.h()},l(v){t=u(v,"DIV",{class:!0});var b=m(t);e=u(b,"H3",{class:!0});var k=m(e);n=S(k,i),k.forEach(r),a=D(b),_.l(b),c=D(b),b.forEach(r),this.h()},h(){f(e,"class","component-chart-title svelte-1w6xccz"),f(t,"class","plot-container svelte-1w6xccz")},m(v,b){z(v,t,b),s(t,e),s(e,n),s(t,a),_.m(t,null),s(t,c)},p(v,b){_.p(v,b)},d(v){v&&r(t),_.d()}}}function Ea(l){let t,e,i,n,a,c,g,h="SEF Report",_,v,b,k,L,C,F,H,N,q,E,T,V,M,J,j,R,te,me,oe,ue,st='<p class="section-subtitle svelte-1w6xccz">Overview</p>',Z,$,W,re,je,ge,We,he,it="Each point in the chart below represents a UK data zone (LSOA).",Ue,ve,nt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Ht}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each AREA.</span></div>`,Ye,ce,O,be,Ge,qe,pe,ot="Scroll for zooming in and out.",Je,_e,rt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Ht}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,Xe,o,P,A,X,B,Ot='<p class="section-subtitle svelte-1w6xccz">By Co-benefits</p>',Et,fe,U,ke,yt,Ee,jt=l[18].toLowerCase()+"",wt,Dt,At,Se,Wt="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",xt,St,Vt,Ve,Ut=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Ht}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,Lt,ee,Me,Yt="Co-benefits:",It,zt,Ke,Ct,Tt,ye,Gt='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',Mt,Le,we,ct;t=new Bl({});function gl(p,I){return Oe.includes(p[17])?fa:ca}let Qe=gl(l)(l);function bl(p,I){return Oe.includes(p[17])?ua:da}let Ze=bl(l)(l);function kl(p,I){return Oe.includes(p[17])?va:ha}let $e=kl(l)(l);function El(p,I){return Oe.includes(p[17])?_a:pa}let et=El(l)(l),K=l[15]&&hl(l);function yl(p,I){return Oe.includes(p[17])?ga:ma}let tt=yl(l)(l),Q=l[13]&&vl(l),Pe=mt(kt),Y=[];for(let p=0;p<Pe.length;p+=1)Y[p]=_l(ul(l,Pe,p));let Fe=mt(kt),G=[];for(let p=0;p<Fe.length;p+=1)G[p]=ml(dl(l,Fe,p));return{c(){zl(t.$$.fragment),e=w(),i=d("div"),n=d("div"),a=d("div"),c=d("div"),g=d("p"),g.textContent=h,_=w(),v=d("div"),b=d("h1"),k=x(l[20]),L=w(),C=d("p"),F=x(l[19]),H=w(),N=d("div"),Qe.c(),q=w(),E=d("div"),T=d("p"),Ze.c(),V=w(),M=d("p"),$e.c(),J=w(),j=d("p"),et.c(),R=w(),K&&K.c(),te=w(),me=d("div"),oe=d("div"),ue=d("div"),ue.innerHTML=st,Z=w(),$=d("div"),W=d("div"),re=d("h3"),je=x(l[18]),ge=x(" against per capita co-benefit values (£, thousand)"),We=w(),he=d("p"),he.textContent=it,Ue=w(),ve=d("div"),ve.innerHTML=nt,Ye=w(),tt.c(),ce=w(),O=d("div"),be=d("h3"),Ge=x(l[18]),qe=w(),pe=d("p"),pe.textContent=ot,Je=w(),_e=d("div"),_e.innerHTML=rt,Xe=w(),Q&&Q.c(),o=w(),P=d("div"),A=w(),X=d("div"),B=d("div"),B.innerHTML=Ot,Et=w(),fe=d("div"),U=d("div"),ke=d("h3"),yt=x("Plotting "),Ee=d("span"),wt=x(jt),Dt=x(" against the gain/loss (£, thousand) per capita for each co-benefit"),At=w(),Se=d("p"),Se.textContent=Wt,xt=w(),St=d("br"),Vt=w(),Ve=d("div"),Ve.innerHTML=Ut,Lt=w(),ee=d("div"),Me=d("strong"),Me.textContent=Yt,It=d("br"),zt=x(`Expand for detailed explanation
                    `),Ke=d("div"),Ct=w();for(let p=0;p<Y.length;p+=1)Y[p].c();Tt=w(),ye=d("div"),ye.innerHTML=Gt,Mt=w(),Le=d("div"),we=d("div");for(let p=0;p<G.length;p+=1)G[p].c();this.h()},l(p){Cl(t.$$.fragment,p),e=D(p),i=u(p,"DIV",{class:!0});var I=m(i);n=u(I,"DIV",{class:!0});var y=m(n);a=u(y,"DIV",{class:!0});var le=m(a);c=u(le,"DIV",{class:!0});var ft=m(c);g=u(ft,"P",{class:!0,"data-svelte-h":!0}),ie(g)!=="svelte-3h7aqf"&&(g.textContent=h),_=D(ft),v=u(ft,"DIV",{class:!0});var dt=m(v);b=u(dt,"H1",{class:!0});var qt=m(b);k=S(qt,l[20]),qt.forEach(r),L=D(dt),C=u(dt,"P",{class:!0});var Jt=m(C);F=S(Jt,l[19]),Jt.forEach(r),dt.forEach(r),ft.forEach(r),H=D(le),N=u(le,"DIV",{class:!0});var Xt=m(N);Qe.l(Xt),Xt.forEach(r),q=D(le),E=u(le,"DIV",{class:!0});var Be=m(E);T=u(Be,"P",{class:!0});var Kt=m(T);Ze.l(Kt),Kt.forEach(r),V=D(Be),M=u(Be,"P",{class:!0});var Qt=m(M);$e.l(Qt),Qt.forEach(r),J=D(Be),j=u(Be,"P",{class:!0});var Zt=m(j);et.l(Zt),Zt.forEach(r),Be.forEach(r),le.forEach(r),y.forEach(r),R=D(I),K&&K.l(I),te=D(I),me=u(I,"DIV",{class:!0});var $t=m(me);oe=u($t,"DIV",{id:!0});var ut=m(oe);ue=u(ut,"DIV",{class:!0,"data-svelte-h":!0}),ie(ue)!=="svelte-ll1i43"&&(ue.innerHTML=st),Z=D(ut),$=u(ut,"DIV",{id:!0,class:!0});var ht=m($);W=u(ht,"DIV",{class:!0});var De=m(W);re=u(De,"H3",{class:!0});var Pt=m(re);je=S(Pt,l[18]),ge=S(Pt," against per capita co-benefit values (£, thousand)"),Pt.forEach(r),We=D(De),he=u(De,"P",{class:!0,"data-svelte-h":!0}),ie(he)!=="svelte-1ozkrs5"&&(he.textContent=it),Ue=D(De),ve=u(De,"DIV",{class:!0,"data-svelte-h":!0}),ie(ve)!=="svelte-xpsz06"&&(ve.innerHTML=nt),Ye=D(De),tt.l(De),De.forEach(r),ce=D(ht),O=u(ht,"DIV",{class:!0});var de=m(O);be=u(de,"H3",{class:!0});var el=m(be);Ge=S(el,l[18]),el.forEach(r),qe=D(de),pe=u(de,"P",{class:!0,"data-svelte-h":!0}),ie(pe)!=="svelte-1ask2se"&&(pe.textContent=ot),Je=D(de),_e=u(de,"DIV",{class:!0,"data-svelte-h":!0}),ie(_e)!=="svelte-1dxsuae"&&(_e.innerHTML=rt),Xe=D(de),Q&&Q.l(de),o=D(de),P=u(de,"DIV",{id:!0,class:!0}),m(P).forEach(r),de.forEach(r),ht.forEach(r),ut.forEach(r),$t.forEach(r),A=D(I),X=u(I,"DIV",{id:!0});var vt=m(X);B=u(vt,"DIV",{class:!0,"data-svelte-h":!0}),ie(B)!=="svelte-1av3fse"&&(B.innerHTML=Ot),Et=D(vt),fe=u(vt,"DIV",{id:!0,class:!0,style:!0});var pt=m(fe);U=u(pt,"DIV",{id:!0,class:!0});var ae=m(U);ke=u(ae,"H3",{class:!0});var _t=m(ke);yt=S(_t,"Plotting "),Ee=u(_t,"SPAN",{style:!0});var tl=m(Ee);wt=S(tl,jt),tl.forEach(r),Dt=S(_t," against the gain/loss (£, thousand) per capita for each co-benefit"),_t.forEach(r),At=D(ae),Se=u(ae,"P",{class:!0,"data-svelte-h":!0}),ie(Se)!=="svelte-1h97e3k"&&(Se.textContent=Wt),xt=D(ae),St=u(ae,"BR",{}),Vt=D(ae),Ve=u(ae,"DIV",{class:!0,"data-svelte-h":!0}),ie(Ve)!=="svelte-1ps2onq"&&(Ve.innerHTML=Ut),Lt=D(ae),ee=u(ae,"DIV",{id:!0,class:!0});var Ie=m(ee);Me=u(Ie,"STRONG",{"data-svelte-h":!0}),ie(Me)!=="svelte-1qu96kx"&&(Me.textContent=Yt),It=u(Ie,"BR",{}),zt=S(Ie,`Expand for detailed explanation
                    `),Ke=u(Ie,"DIV",{style:!0}),m(Ke).forEach(r),Ct=D(Ie);for(let ze=0;ze<Y.length;ze+=1)Y[ze].l(Ie);Ie.forEach(r),Tt=D(ae),ye=u(ae,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),ie(ye)!=="svelte-11g4vkg"&&(ye.innerHTML=Gt),ae.forEach(r),Mt=D(pt),Le=u(pt,"DIV",{id:!0,class:!0});var ll=m(Le);we=u(ll,"DIV",{id:!0,class:!0});var al=m(we);for(let ze=0;ze<G.length;ze+=1)G[ze].l(al);al.forEach(r),ll.forEach(r),pt.forEach(r),vt.forEach(r),I.forEach(r),this.h()},h(){f(g,"class","page-subtitle svelte-1w6xccz"),f(b,"class","page-title svelte-1w6xccz"),f(C,"class","definition"),f(v,"class","title-container"),f(c,"class","header-text svelte-1w6xccz"),f(N,"class","header-vis svelte-1w6xccz"),f(T,"class","definition-stat svelte-1w6xccz"),f(M,"class","definition-stat svelte-1w6xccz"),f(j,"class","definition-stat svelte-1w6xccz"),f(E,"class","header-stats svelte-1w6xccz"),f(a,"class","header-content svelte-1w6xccz"),f(n,"class","section header svelte-1w6xccz"),f(ue,"class","section-header"),f(re,"class","component-title"),f(he,"class","description"),f(ve,"class","aggregation-icon-container"),f(W,"class","component column"),f(be,"class","component-title"),f(pe,"class","description"),f(_e,"class","aggregation-icon-container2 svelte-1w6xccz"),f(P,"id","map"),f(P,"class","svelte-1w6xccz"),f(O,"class","component column"),f($,"id","vis-block"),f($,"class","svelte-1w6xccz"),f(oe,"id","overview"),f(me,"class","section"),f(B,"class","section-header"),ne(Ee,"background-color","#555"),ne(Ee,"padding","0 1px"),ne(Ee,"color","#f9f9f9"),f(ke,"class","component-title"),f(Se,"class","explanation"),f(Ve,"class","aggregation-icon-container2 svelte-1w6xccz"),ne(Ke,"height","0.8em"),f(ee,"id","main-legend"),f(ee,"class","legend-box svelte-1w6xccz"),f(ye,"id","se-disclaimer"),f(ye,"class","disclaimer-box svelte-1w6xccz"),f(U,"id","se-title"),f(U,"class","svelte-1w6xccz"),f(we,"id","multiple-plots"),f(we,"class","svelte-1w6xccz"),f(Le,"id","multiple-comp"),f(Le,"class","svelte-1w6xccz"),f(fe,"id","se-block"),f(fe,"class","component svelte-1w6xccz"),ne(fe,"margin-left","1rem"),f(X,"id","compare"),f(i,"class","page-container")},m(p,I){Tl(t,p,I),z(p,e,I),z(p,i,I),s(i,n),s(n,a),s(a,c),s(c,g),s(c,_),s(c,v),s(v,b),s(b,k),s(v,L),s(v,C),s(C,F),s(a,H),s(a,N),Qe.m(N,null),s(a,q),s(a,E),s(E,T),Ze.m(T,null),s(E,V),s(E,M),$e.m(M,null),s(E,J),s(E,j),et.m(j,null),s(i,R),K&&K.m(i,null),s(i,te),s(i,me),s(me,oe),s(oe,ue),s(oe,Z),s(oe,$),s($,W),s(W,re),s(re,je),s(re,ge),s(W,We),s(W,he),s(W,Ue),s(W,ve),s(W,Ye),tt.m(W,null),s($,ce),s($,O),s(O,be),s(be,Ge),s(O,qe),s(O,pe),s(O,Je),s(O,_e),s(O,Xe),Q&&Q.m(O,null),s(O,o),s(O,P),l[30](P),s(i,A),s(i,X),s(X,B),s(X,Et),s(X,fe),s(fe,U),s(U,ke),s(ke,yt),s(ke,Ee),s(Ee,wt),s(ke,Dt),s(U,At),s(U,Se),s(U,xt),s(U,St),s(U,Vt),s(U,Ve),s(U,Lt),s(U,ee),s(ee,Me),s(ee,It),s(ee,zt),s(ee,Ke),s(ee,Ct);for(let y=0;y<Y.length;y+=1)Y[y]&&Y[y].m(ee,null);s(U,Tt),s(U,ye),s(fe,Mt),s(fe,Le),s(Le,we);for(let y=0;y<G.length;y+=1)G[y]&&G[y].m(we,null);l[34](i),ct=!0},p(p,I){if(Qe.p(p,I),Ze.p(p,I),$e.p(p,I),et.p(p,I),p[15]?K?K.p(p,I):(K=hl(p),K.c(),K.m(i,te)):K&&(K.d(1),K=null),tt.p(p,I),p[13]?Q?Q.p(p,I):(Q=vl(p),Q.c(),Q.m(O,o)):Q&&(Q.d(1),Q=null),I[0]&8454144){Pe=mt(kt);let y;for(y=0;y<Pe.length;y+=1){const le=ul(p,Pe,y);Y[y]?Y[y].p(le,I):(Y[y]=_l(le),Y[y].c(),Y[y].m(ee,null))}for(;y<Y.length;y+=1)Y[y].d(1);Y.length=Pe.length}if(I[0]&131137){Fe=mt(kt);let y;for(y=0;y<Fe.length;y+=1){const le=dl(p,Fe,y);G[y]?G[y].p(le,I):(G[y]=ml(le),G[y].c(),G[y].m(we,null))}for(;y<G.length;y+=1)G[y].d(1);G.length=Fe.length}},i(p){ct||(Ml(t.$$.fragment,p),ct=!0)},o(p){Pl(t.$$.fragment,p),ct=!1},d(p){p&&(r(e),r(i)),Fl(t,p),Qe.d(),Ze.d(),$e.d(),et.d(),K&&K.d(),tt.d(),Q&&Q.d(),l[30](null),sl(Y,p),sl(G,p),l[34](null)}}}let se=400;function xe(l,t){return t==="£"?`${t}${l}`:`${l} ${t}`}function ya(l,t,e){let i,n,a,c,g,h={},_={},v,b,k,L=!1,C,F,H,N,q,E,T,V,M,J,{data:j}=t;const R=j.SEF;console.log("SEF ",R);const te=ql.find(o=>o.id===R)?.id??R,me=Jl.find(o=>o.id===R)?.label??R,oe=Xl.find(o=>o.id===R)?.def??R,ue=Kl.find(o=>o.id===R)?.description??R,st=Ql.find(o=>o.id===R)?.short_units??R,Z=Zl.find(o=>o.id===R)?.units??R;let $,W,re=!1;const je=["overview","compare"];function ge(){const o=window.scrollY;e(15,re=o>250);for(const P of je){const A=document.getElementById(P);if(!A)continue;const X=A.getBoundingClientRect();if(X.top<=150&&X.bottom>=150)break}}Dl(()=>(window.addEventListener("scroll",ge),ge(),()=>window.removeEventListener("scroll",ge))),Al(()=>{window.removeEventListener("scroll",ge)});async function We(){v=await Nt(ea(R)),console.log("totals",v),b=await Nt(ta(R)),console.log("by cobens",b),k=await Nt(la()),console.log("per_capita_data",k),e(7,C=(nl(v,o=>o.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),M=ol(v,o=>o.val),J=cl[te],e(8,F=J?.[M]??M??"N/A"),console.log("Average Value: ",C),E=Ol(v,o=>o.val),e(11,q=E!==-1?v[E].Lookup_Value:"N/A"),e(9,H=(v[E]?.val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),V=jl(v,o=>o.val),e(12,T=V!==-1?v[V].Lookup_Value:"N/A"),e(10,N=(v[V]?.val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),Bt.forEach(o=>{b[o]=+b[o]}),e(25,L=!0)}We().then(()=>{e(13,$=new Gl(v,"LSOA",W,"val",!1,"Lookup_Value",!1)),$.initMap()});function he(){const o=nl(v,A=>A.val)??0,P=rl(fl().thresholds(20).value(A=>A.val)(v),A=>A.length);n?.append(Ne({height:se/1.9,width:se*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${Z}`},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[Wl(v,ia({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),He([o],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:o,label:"Average"}},tip:{format:{average:A=>`${A.toFixed(2)}`,x:!1}}}),Re(v,{x:{value:o,thresholds:20},y:P+.1*P,r:5,fill:"#BD210E"}),lt({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}))}function it(){const o=ol(v,B=>B.val)??0,P=rl(fl().thresholds(20).value(B=>B.val)(v),B=>B.length),A=cl[te],X=A?Object.keys(A).map(Number):v.filter(B=>B.SEFMAME==te).map(B=>B.SE);c?.append(Ne({height:se/1.9,width:se*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:te==="Typology"?80:50,x:{domain:X,label:$l(te),tickFormat:B=>A?.[B]??B,tickRotate:te==="Typology"?-10:0},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[na(v,Ul({y:"count"},{x:"val",fill:"black",opacity:.5})),He([o],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:o,label:"Average"}},tip:{format:{average:B=>`${B.toFixed(2)}`,x:!1}}}),Re(v,{x:{value:o,thresholds:20},y:P+.1*P,r:5,fill:"#BD210E"})]}))}function Ue(){a?.append(Ne({height:se*1.5,width:se*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[gt([0],{stroke:"#333",strokeWidth:1.25}),He([0],{stroke:"#333",strokeWidth:.75}),Re(v,{x:"val",y:o=>o.total_per_capita*1e3,fill:o=>o.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${Z}`},value:{value:o=>o.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),bt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),lt({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}))}function ve(){const P=v.map(A=>({...A,jittered_val:A.val+(Math.random()-.5)*.2}));g?.append(Ne({height:se*1.5,width:se*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[gt([0],{stroke:"#333",strokeWidth:1.25}),He([0],{stroke:"#333",strokeWidth:.75}),Re(P,{x:"jittered_val",y:A=>A.total_per_capita*1e3,fill:A=>A.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${Z}`},value:{value:A=>A.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),bt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),lt({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}))}function nt(){Bt.forEach(o=>{let P;P=Ne({height:se,width:se,marginLeft:60,marginTop:10,marginRight:10,marginBottom:60,x:{label:null},y:{label:null},style:{fontSize:"12px"},marks:[gt([0],{stroke:"#333",strokeWidth:1.25}),He([0],{stroke:"#333",strokeWidth:.75}),Re(b.filter(A=>A.co_benefit_type==o),{x:"val",y:"total",fill:at(o),fillOpacity:.5,r:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),bt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),lt({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}),h[o]?.append(P)})}function Ye(){const P=b.map(A=>({...A,jittered_val:A.val+(Math.random()-.5)*.2}));Bt.forEach(A=>{let X;X=Ne({height:se,width:se,marginLeft:60,marginTop:10,marginRight:10,marginBottom:60,x:{label:null},y:{label:null},style:{fontSize:"12px"},marks:[gt([0],{stroke:"#333",strokeWidth:1.25}),He([0],{stroke:"#333",strokeWidth:.75}),Re(P.filter(B=>B.co_benefit_type==A),{x:"jittered_val",y:"total",fill:at(A),fillOpacity:.5,r:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),bt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),lt({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}),_[A]?.append(X)})}let ce=new Set;function O(o){ce.has(o)?ce.delete(o):ce.add(o),e(16,ce=new Set(ce))}function be(o){Ae[o?"unshift":"push"](()=>{c=o,e(4,c)})}function Ge(o){Ae[o?"unshift":"push"](()=>{n=o,e(2,n)})}function qe(o){Ae[o?"unshift":"push"](()=>{g=o,e(5,g)})}function pe(o){Ae[o?"unshift":"push"](()=>{a=o,e(3,a)})}function ot(o){Ae[o?"unshift":"push"](()=>{W=o,e(14,W)})}const Je=o=>O(o.id);function _e(o,P){Ae[o?"unshift":"push"](()=>{_[P.id]=o,e(6,_)})}function rt(o,P){Ae[o?"unshift":"push"](()=>{h[P.id]=o,e(0,h)})}function Xe(o){Ae[o?"unshift":"push"](()=>{i=o,e(1,i)})}return l.$$set=o=>{"data"in o&&e(24,j=o.data)},l.$$.update=()=>{l.$$.dirty[0]&33554433&&(Object.values(h).forEach(o=>{o.firstChild?.remove()}),L&&(he(),ve(),it(),Ue(),nt(),Ye()))},[h,i,n,a,c,g,_,C,F,H,N,q,T,$,W,re,ce,te,me,oe,ue,st,Z,O,j,L,be,Ge,qe,pe,ot,Je,_e,rt,Xe]}class ja extends Ll{constructor(t){super(),Il(this,t,ya,Ea,wl,{data:24},null,[-1,-1])}}export{ja as component};
