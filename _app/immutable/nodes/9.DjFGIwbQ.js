import{s as je,e as r,a as H,t as ae,c as f,b as v,g as L,d as ne,f as i,q as p,i as M,h as s,T as dt,y as He,n as ze,z as mt,U as Gt,w as Ge,j as ve,p as ee,x as De,B as Fe,V as Rt,r as Et,W as jt,K as Ut,X as Vt,Y as qt,v as Wt,Z as Kt,C as Dt,A as et}from"../chunks/scheduler.B9T0ItC_.js";import{S as rt,i as ft,c as tt,b as lt,m as at,t as nt,a as ot,d as st}from"../chunks/index.BVM93j1J.js";import{e as Be,N as Xt}from"../chunks/NavigationBar.CRF45Iqq.js";import{b as Re}from"../chunks/paths.BWl5fsg7.js";import{g as Yt}from"../chunks/entry.DCFTlXw9.js";import{U as it,_ as Zt,$ as kt}from"../chunks/index.CqwntdJ0.js";import{C as _t,c as Jt,d as Qt,e as xt,g as $t}from"../chunks/globals.Dux9G-f8.js";import{b as vt}from"../chunks/bar.DhIxBOxy.js";import{g as el,m as tl}from"../chunks/duckdb.BytYIbn2.js";function yt(a,e,t){const l=a.slice();return l[10]=e[t],l}function Bt(a){let e,t=Be(a[2]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Tt(yt(a,t,n));return{c(){e=r("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=f(n,"UL",{class:!0});var o=v(e);for(let c=0;c<l.length;c+=1)l[c].l(o);o.forEach(i),this.h()},h(){p(e,"class","suggestions svelte-1kj8esc")},m(n,o){M(n,e,o);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null)},p(n,o){if(o&12){t=Be(n[2]);let c;for(c=0;c<t.length;c+=1){const V=yt(n,t,c);l[c]?l[c].p(V,o):(l[c]=Tt(V),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=t.length}},d(n){n&&i(e),Ge(l,n)}}}function Tt(a){let e,t=a[10][1]+"",l,n,o;function c(){return a[7](a[10])}return{c(){e=r("li"),l=ae(t),this.h()},l(V){e=f(V,"LI",{class:!0});var b=v(e);l=ne(b,t),b.forEach(i),this.h()},h(){p(e,"class","svelte-1kj8esc")},m(V,b){M(V,e,b),s(e,l),n||(o=He(e,"click",c),n=!0)},p(V,b){a=V,b&4&&t!==(t=a[10][1]+"")&&ve(l,t)},d(V){V&&i(e),n=!1,o()}}}function ll(a){let e,t,l,n,o,c,V,b,g,T,h=a[2].length&&Bt(a);return{c(){e=r("div"),t=r("div"),l=r("input"),n=H(),o=r("button"),c=ae("See Report"),b=H(),h&&h.c(),this.h()},l(E){e=f(E,"DIV",{class:!0});var C=v(e);t=f(C,"DIV",{class:!0});var _=v(t);l=f(_,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,class:!0}),n=L(_),o=f(_,"BUTTON",{type:!0,class:!0});var P=v(o);c=ne(P,"See Report"),P.forEach(i),_.forEach(i),b=L(C),h&&h.l(C),C.forEach(i),this.h()},h(){p(l,"type","text"),p(l,"placeholder","Type local authority name to search..."),p(l,"autocomplete","off"),p(l,"class","svelte-1kj8esc"),p(o,"type","button"),p(o,"class","search-btn svelte-1kj8esc"),o.disabled=V=!a[1],p(t,"class","input-group svelte-1kj8esc"),p(e,"class","autocomplete svelte-1kj8esc")},m(E,C){M(E,e,C),s(e,t),s(t,l),dt(l,a[0]),s(t,n),s(t,o),s(o,c),s(e,b),h&&h.m(e,null),g||(T=[He(l,"input",a[6]),He(o,"click",a[4])],g=!0)},p(E,[C]){C&1&&l.value!==E[0]&&dt(l,E[0]),C&2&&V!==(V=!E[1])&&(o.disabled=V),E[2].length?h?h.p(E,C):(h=Bt(E),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:ze,o:ze,d(E){E&&i(e),h&&h.d(),g=!1,mt(T)}}}function al(a,e,t){let l;const n=Gt();let{items:o}=e,c="",V=null;const b=Object.entries(o);function g([C,_]){t(0,c=_),t(1,V=C),n("select",C)}function T(){V&&n("search",V)}function h(){c=this.value,t(0,c)}const E=C=>g(C);return a.$$set=C=>{"items"in C&&t(5,o=C.items)},a.$$.update=()=>{a.$$.dirty&1&&t(2,l=c?b.filter(([C,_])=>_.toLowerCase().includes(c.toLowerCase())).slice(0,10):[])},[c,V,l,g,T,o,h,E]}class nl extends rt{constructor(e){super(),ft(this,e,al,ll,je,{items:5})}}function wt(a,e,t){const l=a.slice();return l[11]=e[t],l}function At(a){let e,t=(a[6]==="total"?a[8](a[11].total_value,a[1],a[2],a[11].co_benefit_type,a[5]):a[8](a[11].value_per_capita,a[3],a[4],a[11].co_benefit_type,a[5]))+"",l;return{c(){e=new Rt(!1),l=Et(),this.h()},l(n){e=jt(n,!1),l=Et(),this.h()},h(){e.a=l},m(n,o){e.m(t,n,o),M(n,l,o)},p(n,o){o&127&&t!==(t=(n[6]==="total"?n[8](n[11].total_value,n[1],n[2],n[11].co_benefit_type,n[5]):n[8](n[11].value_per_capita,n[3],n[4],n[11].co_benefit_type,n[5]))+"")&&e.p(t)},d(n){n&&(i(l),e.d())}}}function ol(a){let e,t=a[11].value_per_capita.toFixed(3)+"",l;return{c(){e=r("span"),l=ae(t)},l(n){e=f(n,"SPAN",{});var o=v(e);l=ne(o,t),o.forEach(i)},m(n,o){M(n,e,o),s(e,l)},p(n,o){o&1&&t!==(t=n[11].value_per_capita.toFixed(3)+"")&&ve(l,t)},d(n){n&&i(e)}}}function sl(a){let e,t=a[11].total_value.toFixed(3)+"",l;return{c(){e=r("span"),l=ae(t)},l(n){e=f(n,"SPAN",{});var o=v(e);l=ne(o,t),o.forEach(i)},m(n,o){M(n,e,o),s(e,l)},p(n,o){o&1&&t!==(t=n[11].total_value.toFixed(3)+"")&&ve(l,t)},d(n){n&&i(e)}}}function Ht(a){let e,t,l,n=a[7](a[11].co_benefit_type)+"",o,c,V,b,g,T=a[6],h,E,C,_=At(a);function P(m,u){return m[6]==="total"?sl:ol}let A=P(a),D=A(a);return{c(){e=r("tr"),t=r("td"),l=r("a"),o=ae(n),V=H(),b=r("td"),g=r("div"),_.c(),h=H(),E=r("td"),D.c(),C=H(),this.h()},l(m){e=f(m,"TR",{});var u=v(e);t=f(u,"TD",{});var G=v(t);l=f(G,"A",{href:!0});var N=v(l);o=ne(N,n),N.forEach(i),G.forEach(i),V=L(u),b=f(u,"TD",{});var F=v(b);g=f(F,"DIV",{class:!0});var q=v(g);_.l(q),q.forEach(i),F.forEach(i),h=L(u),E=f(u,"TD",{});var Y=v(E);D.l(Y),Y.forEach(i),C=L(u),u.forEach(i),this.h()},h(){p(l,"href",c=Re+"/cobenefit?cobenefit="+a[11].co_benefit_type),p(g,"class","bar-cell")},m(m,u){M(m,e,u),s(e,t),s(t,l),s(l,o),s(e,V),s(e,b),s(b,g),_.m(g,null),s(e,h),s(e,E),D.m(E,null),s(e,C)},p(m,u){u&1&&n!==(n=m[7](m[11].co_benefit_type)+"")&&ve(o,n),u&1&&c!==(c=Re+"/cobenefit?cobenefit="+m[11].co_benefit_type)&&p(l,"href",c),u&64&&je(T,T=m[6])?(_.d(1),_=At(m),_.c(),_.m(g,null)):_.p(m,u),A===(A=P(m))&&D?D.p(m,u):(D.d(1),D=A(m),D&&(D.c(),D.m(E,null)))},d(m){m&&i(e),_.d(m),D.d()}}}function il(a){let e,t,l,n="Total",o,c,V="Per Capita",b,g,T,h,E,C="Name",_,P,A=a[6]==="total"?"Total":"Per Capita",D,m,u,G=a[6]==="total"?"£billion":"£thousand",N,F,q,Y,ie,te=Be(a[0]),S=[];for(let w=0;w<te.length;w+=1)S[w]=Ht(wt(a,te,w));return{c(){e=r("div"),t=r("div"),l=r("button"),l.textContent=n,o=H(),c=r("button"),c.textContent=V,b=H(),g=r("table"),T=r("thead"),h=r("tr"),E=r("th"),E.textContent=C,_=H(),P=r("th"),D=ae(A),m=H(),u=r("th"),N=ae(G),F=H(),q=r("tbody");for(let w=0;w<S.length;w+=1)S[w].c();this.h()},l(w){e=f(w,"DIV",{class:!0});var j=v(e);t=f(j,"DIV",{class:!0});var z=v(t);l=f(z,"BUTTON",{"data-svelte-h":!0}),ee(l)!=="svelte-15mf98g"&&(l.textContent=n),o=L(z),c=f(z,"BUTTON",{"data-svelte-h":!0}),ee(c)!=="svelte-1ts3a4f"&&(c.textContent=V),z.forEach(i),j.forEach(i),b=L(w),g=f(w,"TABLE",{class:!0});var Z=v(g);T=f(Z,"THEAD",{});var R=v(T);h=f(R,"TR",{});var X=v(h);E=f(X,"TH",{"data-svelte-h":!0}),ee(E)!=="svelte-13ju7y1"&&(E.textContent=C),_=L(X),P=f(X,"TH",{style:!0});var K=v(P);D=ne(K,A),K.forEach(i),m=L(X),u=f(X,"TH",{style:!0});var B=v(u);N=ne(B,G),B.forEach(i),X.forEach(i),R.forEach(i),F=L(Z),q=f(Z,"TBODY",{});var O=v(q);for(let y=0;y<S.length;y+=1)S[y].l(O);O.forEach(i),Z.forEach(i),this.h()},h(){De(l,"selected",a[6]==="total"),De(c,"selected",a[6]==="per_capita"),p(t,"class","button-group"),p(e,"class","controls"),Fe(P,"width","150px"),Fe(u,"width","80px"),p(g,"class","data-table")},m(w,j){M(w,e,j),s(e,t),s(t,l),s(t,o),s(t,c),M(w,b,j),M(w,g,j),s(g,T),s(T,h),s(h,E),s(h,_),s(h,P),s(P,D),s(h,m),s(h,u),s(u,N),s(g,F),s(g,q);for(let z=0;z<S.length;z+=1)S[z]&&S[z].m(q,null);Y||(ie=[He(l,"click",a[9]),He(c,"click",a[10])],Y=!0)},p(w,[j]){if(j&64&&De(l,"selected",w[6]==="total"),j&64&&De(c,"selected",w[6]==="per_capita"),j&64&&A!==(A=w[6]==="total"?"Total":"Per Capita")&&ve(D,A),j&64&&G!==(G=w[6]==="total"?"£billion":"£thousand")&&ve(N,G),j&511){te=Be(w[0]);let z;for(z=0;z<te.length;z+=1){const Z=wt(w,te,z);S[z]?S[z].p(Z,j):(S[z]=Ht(Z),S[z].c(),S[z].m(q,null))}for(;z<S.length;z+=1)S[z].d(1);S.length=te.length}},i:ze,o:ze,d(w){w&&(i(e),i(b),i(g)),Ge(S,w),Y=!1,mt(ie)}}}function rl(a,e,t){let{aggregationPerCapitaPerBenefit:l}=e,{minCoBenefValue:n}=e,{maxCoBenefValue:o}=e,{minHHCoBenefValue:c}=e,{maxHHCoBenefValue:V}=e,{COBENEFS_SCALE:b}=e;function g(_){return _t.find(P=>P.id===_)?.label??_}let T="total";function h(_,P,A,D,m){const u=m(D);return it({width:100,height:20,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,x:{domain:[P,A],axis:null},marks:[Zt([0],{stroke:"#3C3C3C"}),vt([_],{x:N=>N,y:0,fill:u})]}).outerHTML}const E=()=>t(6,T="total"),C=()=>t(6,T="per_capita");return a.$$set=_=>{"aggregationPerCapitaPerBenefit"in _&&t(0,l=_.aggregationPerCapitaPerBenefit),"minCoBenefValue"in _&&t(1,n=_.minCoBenefValue),"maxCoBenefValue"in _&&t(2,o=_.maxCoBenefValue),"minHHCoBenefValue"in _&&t(3,c=_.minHHCoBenefValue),"maxHHCoBenefValue"in _&&t(4,V=_.maxHHCoBenefValue),"COBENEFS_SCALE"in _&&t(5,b=_.COBENEFS_SCALE)},[l,n,o,c,V,b,T,g,h,E,C]}class fl extends rt{constructor(e){super(),ft(this,e,rl,il,je,{aggregationPerCapitaPerBenefit:0,minCoBenefValue:1,maxCoBenefValue:2,minHHCoBenefValue:3,maxHHCoBenefValue:4,COBENEFS_SCALE:5})}}function Lt(a,e,t){const l=a.slice();return l[16]=e[t],l}function It(a,e,t){const l=a.slice();return l[19]=e[t],l}function Nt(a){let e,t=a[19].label+"",l;return{c(){e=r("option"),l=ae(t),this.h()},l(n){e=f(n,"OPTION",{});var o=v(e);l=ne(o,t),o.forEach(i),this.h()},h(){e.__value=a[19].value,dt(e,e.__value)},m(n,o){M(n,e,o),s(e,l)},p:ze,d(n){n&&i(e)}}}function cl(a){let e,t=a[16].value_per_capita.toFixed(3)+"",l;return{c(){e=r("span"),l=ae(t)},l(n){e=f(n,"SPAN",{});var o=v(e);l=ne(o,t),o.forEach(i)},m(n,o){M(n,e,o),s(e,l)},p(n,o){o&2&&t!==(t=n[16].value_per_capita.toFixed(3)+"")&&ve(l,t)},d(n){n&&i(e)}}}function ul(a){let e,t=a[16].total_value.toFixed(3)+"",l;return{c(){e=r("span"),l=ae(t)},l(n){e=f(n,"SPAN",{});var o=v(e);l=ne(o,t),o.forEach(i)},m(n,o){M(n,e,o),s(e,l)},p(n,o){o&2&&t!==(t=n[16].total_value.toFixed(3)+"")&&ve(l,t)},d(n){n&&i(e)}}}function St(a){let e,t,l,n=(a[5][a[16].LAD]??a[16].LAD)+"",o,c,V,b,g,T,h=(a[2]==="total"?a[9](a[16].total_value,a[3]):a[10](a[16].value_per_capita,a[4]))+"",E,C,_;function P(m,u){return m[2]==="total"?ul:cl}let A=P(a),D=A(a);return{c(){e=r("tr"),t=r("td"),l=r("a"),o=ae(n),V=H(),b=r("td"),g=r("div"),T=new Rt(!1),E=H(),C=r("td"),D.c(),_=H(),this.h()},l(m){e=f(m,"TR",{});var u=v(e);t=f(u,"TD",{});var G=v(t);l=f(G,"A",{href:!0});var N=v(l);o=ne(N,n),N.forEach(i),G.forEach(i),V=L(u),b=f(u,"TD",{});var F=v(b);g=f(F,"DIV",{class:!0});var q=v(g);T=jt(q,!1),q.forEach(i),F.forEach(i),E=L(u),C=f(u,"TD",{});var Y=v(C);D.l(Y),Y.forEach(i),_=L(u),u.forEach(i),this.h()},h(){p(l,"href",c=Re+"/location?location="+a[16].LAD),T.a=null,p(g,"class","bar-cell")},m(m,u){M(m,e,u),s(e,t),s(t,l),s(l,o),s(e,V),s(e,b),s(b,g),T.m(h,g),s(e,E),s(e,C),D.m(C,null),s(e,_)},p(m,u){u&34&&n!==(n=(m[5][m[16].LAD]??m[16].LAD)+"")&&ve(o,n),u&2&&c!==(c=Re+"/location?location="+m[16].LAD)&&p(l,"href",c),u&30&&h!==(h=(m[2]==="total"?m[9](m[16].total_value,m[3]):m[10](m[16].value_per_capita,m[4]))+"")&&T.p(h),A===(A=P(m))&&D?D.p(m,u):(D.d(1),D=A(m),D&&(D.c(),D.m(C,null)))},d(m){m&&i(e),D.d()}}}function hl(a){let e,t,l="Nation:",n,o,c,V,b,g="Total",T,h,E="Per Capita",C,_,P,A,D,m="Name",u,G,N=a[2]==="total"?"Total":"Per Capita",F,q,Y,ie=a[2]==="total"?"£billion":"£thousand",te,S,w,j,z,Z=Be(a[7]),R=[];for(let B=0;B<Z.length;B+=1)R[B]=Nt(It(a,Z,B));let X=Be(a[1]),K=[];for(let B=0;B<X.length;B+=1)K[B]=St(Lt(a,X,B));return{c(){e=r("div"),t=r("label"),t.textContent=l,n=H(),o=r("select");for(let B=0;B<R.length;B+=1)R[B].c();c=H(),V=r("div"),b=r("button"),b.textContent=g,T=H(),h=r("button"),h.textContent=E,C=H(),_=r("table"),P=r("thead"),A=r("tr"),D=r("th"),D.textContent=m,u=H(),G=r("th"),F=ae(N),q=H(),Y=r("th"),te=ae(ie),S=H(),w=r("tbody");for(let B=0;B<K.length;B+=1)K[B].c();this.h()},l(B){e=f(B,"DIV",{class:!0});var O=v(e);t=f(O,"LABEL",{"data-svelte-h":!0}),ee(t)!=="svelte-1ecnfnj"&&(t.textContent=l),n=L(O),o=f(O,"SELECT",{});var y=v(o);for(let J=0;J<R.length;J+=1)R[J].l(y);y.forEach(i),c=L(O),V=f(O,"DIV",{class:!0});var $=v(V);b=f($,"BUTTON",{"data-svelte-h":!0}),ee(b)!=="svelte-2dev6e"&&(b.textContent=g),T=L($),h=f($,"BUTTON",{"data-svelte-h":!0}),ee(h)!=="svelte-1q4fgxf"&&(h.textContent=E),$.forEach(i),O.forEach(i),C=L(B),_=f(B,"TABLE",{class:!0});var ke=v(_);P=f(ke,"THEAD",{});var ye=v(P);A=f(ye,"TR",{});var ge=v(A);D=f(ge,"TH",{"data-svelte-h":!0}),ee(D)!=="svelte-13ju7y1"&&(D.textContent=m),u=L(ge),G=f(ge,"TH",{style:!0});var me=v(G);F=ne(me,N),me.forEach(i),q=L(ge),Y=f(ge,"TH",{style:!0});var Ee=v(Y);te=ne(Ee,ie),Ee.forEach(i),ge.forEach(i),ye.forEach(i),S=L(ke),w=f(ke,"TBODY",{});var k=v(w);for(let J=0;J<K.length;J+=1)K[J].l(k);k.forEach(i),ke.forEach(i),this.h()},h(){a[0]===void 0&&Ut(()=>a[13].call(o)),De(b,"selected",a[2]==="total"),De(h,"selected",a[2]==="per_capita"),p(V,"class","button-group"),p(e,"class","controls"),Fe(G,"width","120px"),Fe(Y,"width","80px"),p(_,"class","data-table")},m(B,O){M(B,e,O),s(e,t),s(e,n),s(e,o);for(let y=0;y<R.length;y+=1)R[y]&&R[y].m(o,null);Vt(o,a[0],!0),s(e,c),s(e,V),s(V,b),s(V,T),s(V,h),M(B,C,O),M(B,_,O),s(_,P),s(P,A),s(A,D),s(A,u),s(A,G),s(G,F),s(A,q),s(A,Y),s(Y,te),s(_,S),s(_,w);for(let y=0;y<K.length;y+=1)K[y]&&K[y].m(w,null);j||(z=[He(o,"change",a[13]),He(o,"change",a[8]),He(b,"click",a[14]),He(h,"click",a[15])],j=!0)},p(B,[O]){if(O&128){Z=Be(B[7]);let y;for(y=0;y<Z.length;y+=1){const $=It(B,Z,y);R[y]?R[y].p($,O):(R[y]=Nt($),R[y].c(),R[y].m(o,null))}for(;y<R.length;y+=1)R[y].d(1);R.length=Z.length}if(O&129&&Vt(o,B[0]),O&4&&De(b,"selected",B[2]==="total"),O&4&&De(h,"selected",B[2]==="per_capita"),O&4&&N!==(N=B[2]==="total"?"Total":"Per Capita")&&ve(F,N),O&4&&ie!==(ie=B[2]==="total"?"£billion":"£thousand")&&ve(te,ie),O&1598){X=Be(B[1]);let y;for(y=0;y<X.length;y+=1){const $=Lt(B,X,y);K[y]?K[y].p($,O):(K[y]=St($),K[y].c(),K[y].m(w,null))}for(;y<K.length;y+=1)K[y].d(1);K.length=X.length}},i:ze,o:ze,d(B){B&&(i(e),i(C),i(_)),Ge(R,B),Ge(K,B),j=!1,mt(z)}}}function dl(a,e,t){const l=Gt();let{ladData:n=[]}=e,{region:o}=e,{sortBy:c}=e,{maxLADValue:V}=e,{maxHHLADValue:b}=e,{LADToName:g={}}=e,{viewMode:T="total"}=e,{selectedRegion:h="All"}=e;const E=[{label:"All",value:"All"},{label:"England",value:"England"},{label:"Wales",value:"Wales"},{label:"Scotland",value:"Scotland"},{label:"Northern Ireland",value:"NI"}];function C(u){l("filterChange",{region:u.target.value,sortBy:c})}function _(u,G){return it({width:80,height:20,margin:0,x:{domain:[0,G],axis:null},marks:[vt([u],{x:F=>F,y:0,fill:"#ccc"})]}).outerHTML}function P(u,G){return it({width:80,height:20,margin:0,x:{domain:[0,G],axis:null},marks:[vt([u],{x:F=>F,y:0,fill:"#ccc"})]}).outerHTML}function A(){o=qt(this),t(0,o),t(7,E)}const D=()=>l("filterChange",{region:o,sortBy:"total"}),m=()=>l("filterChange",{region:o,sortBy:"per_capita"});return a.$$set=u=>{"ladData"in u&&t(1,n=u.ladData),"region"in u&&t(0,o=u.region),"sortBy"in u&&t(2,c=u.sortBy),"maxLADValue"in u&&t(3,V=u.maxLADValue),"maxHHLADValue"in u&&t(4,b=u.maxHHLADValue),"LADToName"in u&&t(5,g=u.LADToName),"viewMode"in u&&t(11,T=u.viewMode),"selectedRegion"in u&&t(12,h=u.selectedRegion)},[o,n,c,V,b,g,l,E,C,_,P,T,h,A,D,m]}class _l extends rt{constructor(e){super(),ft(this,e,dl,hl,je,{ladData:1,region:0,sortBy:2,maxLADValue:3,maxHHLADValue:4,LADToName:5,viewMode:11,selectedRegion:12})}}function zt(a,e,t){const l=a.slice();return l[42]=e[t],l[44]=t,l}function Pt(a){let e;return{c(){e=r("div"),this.h()},l(t){e=f(t,"DIV",{class:!0,style:!0}),v(e).forEach(i),this.h()},h(){p(e,"class","hero-slide svelte-1omrdz5"),Fe(e,"background-image","url("+a[42].image+")"),De(e,"active",a[44]===a[16]),De(e,"previous",a[44]===a[17])},m(t,l){M(t,e,l)},p(t,l){l[0]&8192&&Fe(e,"background-image","url("+t[42].image+")"),l[0]&65536&&De(e,"active",t[44]===t[16]),l[0]&131072&&De(e,"previous",t[44]===t[17])},d(t){t&&i(e)}}}function Mt(a){let e,t,l;return{c(){e=r("div"),t=r("img"),this.h()},l(n){e=f(n,"DIV",{class:!0});var o=v(e);t=f(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(i),this.h()},h(){Dt(t.src,l=a[12])||p(t,"src",l),p(t,"alt","Icon"),p(t,"class","svelte-1omrdz5"),p(e,"class","waffle-icon svelte-1omrdz5")},m(n,o){M(n,e,o),s(e,t)},p(n,o){o[0]&4096&&!Dt(t.src,l=n[12])&&p(t,"src",l)},d(n){n&&i(e)}}}function vl(a){let e,t="National costs";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-o12owz"&&(e.textContent=t),this.h()},h(){p(e,"class","waffle-caption svelte-1omrdz5")},m(l,n){M(l,e,n)},d(l){l&&i(e)}}}function ml(a){let e,t="National benefits";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-10ytukz"&&(e.textContent=t),this.h()},h(){p(e,"class","waffle-caption svelte-1omrdz5")},m(l,n){M(l,e,n)},d(l){l&&i(e)}}}function pl(a){let e,t="Per capita costs";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-6pmcl0"&&(e.textContent=t),this.h()},h(){p(e,"class","waffle-caption svelte-1omrdz5")},m(l,n){M(l,e,n)},d(l){l&&i(e)}}}function gl(a){let e,t="Per capita benefits";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-g1rvwk"&&(e.textContent=t),this.h()},h(){p(e,"class","waffle-caption svelte-1omrdz5")},m(l,n){M(l,e,n)},d(l){l&&i(e)}}}function Ft(a){let e,t,l,n,o,c,V="%",b,g,T="Contribution";return{c(){e=r("div"),t=r("div"),l=r("span"),n=ae(a[11]),o=H(),c=r("span"),c.textContent=V,b=H(),g=r("div"),g.textContent=T,this.h()},l(h){e=f(h,"DIV",{class:!0});var E=v(e);t=f(E,"DIV",{class:!0});var C=v(t);l=f(C,"SPAN",{class:!0});var _=v(l);n=ne(_,a[11]),_.forEach(i),o=L(C),c=f(C,"SPAN",{class:!0,"data-svelte-h":!0}),ee(c)!=="svelte-jxggz7"&&(c.textContent=V),C.forEach(i),b=L(E),g=f(E,"DIV",{class:!0,"data-svelte-h":!0}),ee(g)!=="svelte-1ahdmih"&&(g.textContent=T),E.forEach(i),this.h()},h(){p(l,"class","waffle-big svelte-1omrdz5"),p(c,"class","small svelte-1omrdz5"),p(t,"class","waffle-value svelte-1omrdz5"),p(g,"class","waffle-caption svelte-1omrdz5"),p(e,"class","waffle-stat svelte-1omrdz5")},m(h,E){M(h,e,E),s(e,t),s(t,l),s(l,n),s(t,o),s(t,c),s(e,b),s(e,g)},p(h,E){E[0]&2048&&ve(n,h[11])},d(h){h&&i(e)}}}function Ot(a){let e,t="GGGGGGGGG";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1hoodjr"&&(e.textContent=t),this.h()},h(){p(e,"class","spinner")},m(l,n){M(l,e,n)},d(l){l&&i(e)}}}function bl(a){let e,t,l,n,o,c,V='<h1 class="hero-title svelte-1omrdz5">The Co-Benefits of Reaching <br/> Net Zero in the UK</h1> <p class="hero-description svelte-1omrdz5">Climate actions lower greenhouse gas (GHG) emissions but the gains for society reach further. The CO-BENS project models 11 additional benefits based on actions recommended by the Climate Change Committee (CCC) in its Seventh Carbon Budget (2025) across 45,000 communities and regions within the UK.<br/></p> <p class="hero-description svelte-1omrdz5">Explore how, when and for whom benefits emerge to further understand connections between a wide range of social, economic and environmental priorities, and drive more effective decision-making.</p>',b,g,T,h,E,C,_,P,A,D,m,u,G,N,F,q,Y="billion",ie,te,S,w,j,z,Z,R,X,K="thousand",B,O,y,$,ke,ye,ge,me,Ee,k="Find My Place",J,Q,he,re,oe,W,be="Explore by Local Authority",Ve,de,I,x,Ce,Le="Explore by Co-Benefit",Oe,Te,Ie,pe,Ne;e=new Xt({});let Pe=Be(a[13]),se=[];for(let d=0;d<Pe.length;d+=1)se[d]=Pt(zt(a,Pe,d));let fe=a[12]&&Mt(a);function pt(d,U){return d[9]>0?ml:vl}let Ue=pt(a),we=Ue(a);function gt(d,U){return d[10]>0?gl:pl}let qe=gt(a),Ae=qe(a),ce=a[15]!==null&&Ft(a);Q=new nl({props:{items:a[20]}}),Q.$on("search",a[32]),de=new _l({props:{ladData:a[0],region:a[1],sortBy:a[2],maxLADValue:a[3],maxHHLADValue:a[4],LADToName:a[20]}}),de.$on("filterChange",a[21]),Te=new fl({props:{aggregationPerCapitaPerBenefit:a[19],minCoBenefValue:a[23],maxCoBenefValue:a[22],minHHCoBenefValue:a[24],maxHHCoBenefValue:a[25],COBENEFS_SCALE:Jt}});let _e=a[18]&&Ot();return{c(){tt(e.$$.fragment),t=H(),l=r("section");for(let d=0;d<se.length;d+=1)se[d].c();n=H(),o=r("div"),c=r("div"),c.innerHTML=V,b=H(),g=r("div"),T=r("div"),h=r("div"),fe&&fe.c(),E=H(),C=r("div"),_=ae(a[8]),P=H(),A=r("div"),D=r("div"),m=r("div"),u=r("span"),G=ae("£"),N=ae(a[9]),F=H(),q=r("span"),q.textContent=Y,ie=H(),we.c(),te=H(),S=r("div"),w=r("div"),j=r("span"),z=ae("£"),Z=ae(a[10]),R=H(),X=r("span"),X.textContent=K,B=H(),Ae.c(),O=H(),ce&&ce.c(),y=H(),$=r("div"),ke=H(),ye=r("div"),ge=H(),me=r("section"),Ee=r("h1"),Ee.textContent=k,J=H(),tt(Q.$$.fragment),he=H(),re=r("section"),oe=r("div"),W=r("h2"),W.textContent=be,Ve=H(),tt(de.$$.fragment),I=H(),x=r("div"),Ce=r("h2"),Ce.textContent=Le,Oe=H(),tt(Te.$$.fragment),Ie=H(),pe=r("main"),_e&&_e.c(),this.h()},l(d){lt(e.$$.fragment,d),t=L(d),l=f(d,"SECTION",{class:!0});var U=v(l);for(let ht=0;ht<se.length;ht+=1)se[ht].l(U);n=L(U),o=f(U,"DIV",{class:!0});var ue=v(o);c=f(ue,"DIV",{class:!0,"data-svelte-h":!0}),ee(c)!=="svelte-15n3ien"&&(c.innerHTML=V),b=L(ue),g=f(ue,"DIV",{class:!0});var le=v(g);T=f(le,"DIV",{class:!0});var Se=v(T);h=f(Se,"DIV",{class:!0});var We=v(h);fe&&fe.l(We),E=L(We),C=f(We,"DIV",{class:!0});var bt=v(C);_=ne(bt,a[8]),bt.forEach(i),We.forEach(i),P=L(Se),A=f(Se,"DIV",{class:!0});var Me=v(A);D=f(Me,"DIV",{class:!0});var Ke=v(D);m=f(Ke,"DIV",{class:!0});var Xe=v(m);u=f(Xe,"SPAN",{class:!0});var ct=v(u);G=ne(ct,"£"),N=ne(ct,a[9]),ct.forEach(i),F=L(Xe),q=f(Xe,"SPAN",{class:!0,"data-svelte-h":!0}),ee(q)!=="svelte-tlhydp"&&(q.textContent=Y),Xe.forEach(i),ie=L(Ke),we.l(Ke),Ke.forEach(i),te=L(Me),S=f(Me,"DIV",{class:!0});var Ye=v(S);w=f(Ye,"DIV",{class:!0});var Ze=v(w);j=f(Ze,"SPAN",{class:!0});var ut=v(j);z=ne(ut,"£"),Z=ne(ut,a[10]),ut.forEach(i),R=L(Ze),X=f(Ze,"SPAN",{class:!0,"data-svelte-h":!0}),ee(X)!=="svelte-ewwwhc"&&(X.textContent=K),Ze.forEach(i),B=L(Ye),Ae.l(Ye),Ye.forEach(i),O=L(Me),ce&&ce.l(Me),Me.forEach(i),Se.forEach(i),y=L(le),$=f(le,"DIV",{class:!0}),v($).forEach(i),ke=L(le),ye=f(le,"DIV",{}),v(ye).forEach(i),le.forEach(i),ue.forEach(i),U.forEach(i),ge=L(d),me=f(d,"SECTION",{class:!0});var Je=v(me);Ee=f(Je,"H1",{class:!0,"data-svelte-h":!0}),ee(Ee)!=="svelte-byubde"&&(Ee.textContent=k),J=L(Je),lt(Q.$$.fragment,Je),Je.forEach(i),he=L(d),re=f(d,"SECTION",{class:!0});var Qe=v(re);oe=f(Qe,"DIV",{class:!0});var xe=v(oe);W=f(xe,"H2",{class:!0,"data-svelte-h":!0}),ee(W)!=="svelte-pgup4c"&&(W.textContent=be),Ve=L(xe),lt(de.$$.fragment,xe),xe.forEach(i),I=L(Qe),x=f(Qe,"DIV",{class:!0});var $e=v(x);Ce=f($e,"H2",{class:!0,"data-svelte-h":!0}),ee(Ce)!=="svelte-9nk5va"&&(Ce.textContent=Le),Oe=L($e),lt(Te.$$.fragment,$e),$e.forEach(i),Qe.forEach(i),Ie=L(d),pe=f(d,"MAIN",{class:!0});var Ct=v(pe);_e&&_e.l(Ct),Ct.forEach(i),this.h()},h(){p(c,"class","hero-text svelte-1omrdz5"),p(C,"class","waffle-title svelte-1omrdz5"),p(h,"class","waffle-header svelte-1omrdz5"),p(u,"class","waffle-big svelte-1omrdz5"),p(q,"class","small svelte-1omrdz5"),p(m,"class","waffle-value svelte-1omrdz5"),p(D,"class","waffle-stat svelte-1omrdz5"),p(j,"class","waffle-big svelte-1omrdz5"),p(X,"class","small svelte-1omrdz5"),p(w,"class","waffle-value svelte-1omrdz5"),p(S,"class","waffle-stat svelte-1omrdz5"),p(A,"class","waffle-stats svelte-1omrdz5"),p(T,"class","waffle-label svelte-1omrdz5"),p($,"class","waffle-bg svelte-1omrdz5"),p(g,"class","waffle-overlay svelte-1omrdz5"),p(o,"class","hero-content svelte-1omrdz5"),p(l,"class","hero-container svelte-1omrdz5"),p(Ee,"class","svelte-1omrdz5"),p(me,"class","search-section svelte-1omrdz5"),p(W,"class","svelte-1omrdz5"),p(oe,"class","side-box svelte-1omrdz5"),p(Ce,"class","svelte-1omrdz5"),p(x,"class","side-box svelte-1omrdz5"),p(re,"class","side-by-side-section svelte-1omrdz5"),p(pe,"class","svelte-1omrdz5")},m(d,U){at(e,d,U),M(d,t,U),M(d,l,U);for(let ue=0;ue<se.length;ue+=1)se[ue]&&se[ue].m(l,null);s(l,n),s(l,o),s(o,c),s(o,b),s(o,g),s(g,T),s(T,h),fe&&fe.m(h,null),s(h,E),s(h,C),s(C,_),s(T,P),s(T,A),s(A,D),s(D,m),s(m,u),s(u,G),s(u,N),s(m,F),s(m,q),s(D,ie),we.m(D,null),s(A,te),s(A,S),s(S,w),s(w,j),s(j,z),s(j,Z),s(w,R),s(w,X),s(S,B),Ae.m(S,null),s(A,O),ce&&ce.m(A,null),a[28](T),s(g,y),s(g,$),a[29]($),s(g,ke),s(g,ye),a[30](ye),a[31](l),M(d,ge,U),M(d,me,U),s(me,Ee),s(me,J),at(Q,me,null),M(d,he,U),M(d,re,U),s(re,oe),s(oe,W),s(oe,Ve),at(de,oe,null),s(re,I),s(re,x),s(x,Ce),s(x,Oe),at(Te,x,null),M(d,Ie,U),M(d,pe,U),_e&&_e.m(pe,null),Ne=!0},p(d,U){if(U[0]&204800){Pe=Be(d[13]);let le;for(le=0;le<Pe.length;le+=1){const Se=zt(d,Pe,le);se[le]?se[le].p(Se,U):(se[le]=Pt(Se),se[le].c(),se[le].m(l,n))}for(;le<se.length;le+=1)se[le].d(1);se.length=Pe.length}d[12]?fe?fe.p(d,U):(fe=Mt(d),fe.c(),fe.m(h,E)):fe&&(fe.d(1),fe=null),(!Ne||U[0]&256)&&ve(_,d[8]),(!Ne||U[0]&512)&&ve(N,d[9]),Ue!==(Ue=pt(d))&&(we.d(1),we=Ue(d),we&&(we.c(),we.m(D,null))),(!Ne||U[0]&1024)&&ve(Z,d[10]),qe!==(qe=gt(d))&&(Ae.d(1),Ae=qe(d),Ae&&(Ae.c(),Ae.m(S,null))),d[15]!==null?ce?ce.p(d,U):(ce=Ft(d),ce.c(),ce.m(A,null)):ce&&(ce.d(1),ce=null);const ue={};U[0]&1&&(ue.ladData=d[0]),U[0]&2&&(ue.region=d[1]),U[0]&4&&(ue.sortBy=d[2]),U[0]&8&&(ue.maxLADValue=d[3]),U[0]&16&&(ue.maxHHLADValue=d[4]),de.$set(ue),d[18]?_e||(_e=Ot(),_e.c(),_e.m(pe,null)):_e&&(_e.d(1),_e=null)},i(d){Ne||(nt(e.$$.fragment,d),nt(Q.$$.fragment,d),nt(de.$$.fragment,d),nt(Te.$$.fragment,d),Ne=!0)},o(d){ot(e.$$.fragment,d),ot(Q.$$.fragment,d),ot(de.$$.fragment,d),ot(Te.$$.fragment,d),Ne=!1},d(d){d&&(i(t),i(l),i(ge),i(me),i(he),i(re),i(Ie),i(pe)),st(e,d),Ge(se,d),fe&&fe.d(),we.d(),Ae.d(),ce&&ce.d(),a[28](null),a[29](null),a[30](null),a[31](null),st(Q),st(de),st(Te),_e&&_e.d()}}}function Cl(a,e,t){let{data:l}=e,n=[...l.aggregationPerBenefit].sort((k,J)=>J.total-k.total),o=[...l.aggregationPerCapitaPerBenefit].sort((k,J)=>J.total_value-k.total_value);console.log("aggregationPerCapitaPerBenefit",o);let c=l.totalAggregation[0].total_value_per_capita,V=[],b="All",g="total",T=0,h=0,E=l.LADToName;async function C(){const k=tl({region:b,sortBy:g}),J=await el(k);t(0,V=J),t(3,T=Math.max(...J.map(Q=>Q.total_value))),t(4,h=Math.max(...J.map(Q=>Q.value_per_capita)))}function _(k){t(1,b=k.detail.region),t(2,g=k.detail.sortBy),C()}const P=Math.max(...o.map(k=>k.total_value)),A=Math.min(...o.map(k=>k.total_value)),D=Math.min(...o.map(k=>k.value_per_capita)),m=Math.max(...o.map(k=>k.value_per_capita));let u,G=[],N=null,F,q,Y,ie,te,S,w=null,j=[],z,Z=null,R=0,X=0,K;function B(k){const J=u.filter(W=>W.type!=="empty").map(W=>W.type),Q=Array.from(new Set(J)),he=n.reduce((W,be)=>W+be.total,0),re=[{type:null,label:"Total Co-Benefits",icon:null,totalValue:he.toFixed(3),perCapitaValue:c.toFixed(3),percentValue:"100%"},...Q.map(W=>{const Ve=_t.find(pe=>pe.id===W)?.label??W;let de=$t(W);const I=n.find(pe=>pe.co_benefit_type===W),x=o.find(pe=>pe.co_benefit_type===W),Ce=I?.total??0,Le=x?.value_per_capita??0,Oe=Ce.toFixed(3),Te=Le.toFixed(3),Ie=he>0?(Ce/he*100).toFixed(2):0;return console.log("percentage",W,Ce,he,Ie),{type:W,label:Ve,icon:de,totalValue:Oe,perCapitaValue:Te,percentValue:Ie}})];setInterval(()=>{t(17,X=R),t(16,R=(R+1)%re.length);const{type:W,label:be,icon:Ve,totalValue:de,perCapitaValue:I,percentValue:x}=re[R];t(15,Z=W),t(8,Y=be),t(9,ie=de),t(10,te=I),t(11,S=x),t(12,w=Ve),O(k,W)},5e3);const oe=re[0];t(15,Z=oe.type),t(8,Y=oe.label),t(9,ie=oe.totalValue),t(10,te=oe.perCapitaValue),t(11,S=oe.percentValue),O(k,oe.type),console.log("update display",j)}function O(k,J){if(!N)return;t(5,N.innerHTML="",N);const Q=20,he=15,re=Math.floor(k/Q),oe=he*re,W=n.reduce((I,x)=>I+x.total,0),be=[];for(const I of n){const x=Math.round(Math.abs(I.total)/W*oe),Ce=I.total<0;for(let Le=0;Le<x;Le++)be.push({type:I.co_benefit_type,negative:Ce})}for(;be.length<oe;)be.push({type:"empty"});be.sort((I,x)=>I.type==="empty"?1:x.type==="empty"?-1:I.negative&&!x.negative?1:!I.negative&&x.negative?-1:0),u=be.map((I,x)=>({x:x%he,y:Math.floor(x/he),...I})),G=Array.from(new Set(u.map(I=>I.type).filter(I=>I!=="empty"))),t(13,j=Qt(G));const Ve=J??null,de=it({width:Q*he,height:Q*re,margin:0,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:_t.map(I=>I.id),range:xt,unknown:"#eee",legend:!1},marks:[kt(u.filter(I=>!I.negative),{x:I=>I.x*Q,y:I=>I.y*Q,fill:"type",fillOpacity:I=>Ve&&I.type!==Ve?.15:1}),kt(u.filter(I=>I.negative),{x:I=>I.x*Q,y:I=>I.y*Q,stroke:"type",strokeOpacity:I=>Ve&&I.type!==Ve?.15:1,strokeWidth:1,fill:"none"})]});F&&(t(6,F.style.width=`${Q*he}px`,F),t(6,F.style.height=`${k}px`,F)),t(5,N.innerHTML="",N),N.append(de)}function y(k){Yt(`${Re}/location?location=${k}`)}let $=!0;Wt(()=>{C();const k=z.getBoundingClientRect().height;O(k),B(k)}),Kt(()=>{clearInterval(K)});function ke(k){et[k?"unshift":"push"](()=>{q=k,t(7,q)})}function ye(k){et[k?"unshift":"push"](()=>{F=k,t(6,F)})}function ge(k){et[k?"unshift":"push"](()=>{N=k,t(5,N)})}function me(k){et[k?"unshift":"push"](()=>{z=k,t(14,z)})}const Ee=k=>y(k.detail);return a.$$set=k=>{"data"in k&&t(27,l=k.data)},a.$$.update=()=>{a.$$.dirty[0]&134217728&&t(18,$=!l)},[V,b,g,T,h,N,F,q,Y,ie,te,S,w,j,z,Z,R,X,$,o,E,_,P,A,D,m,y,l,ke,ye,ge,me,Ee]}class Hl extends rt{constructor(e){super(),ft(this,e,Cl,bl,je,{data:27},null,[-1,-1])}}export{Hl as component};
