import{s as ts,a as _,e as o,t as D,g,c as r,b as p,p as T,f as u,d as k,q as n,C as Ua,B as zt,i as W,h as a,y as es,w as ls,r as Ca,Y as as,j as De,H as ss,E as ns,A as te}from"../chunks/scheduler.C9ZL8GxQ.js";import{S as is,i as os,c as rs,b as cs,m as fs,t as us,a as ds,d as hs}from"../chunks/index.vifww4_P.js";import{N as vs,e as Da}from"../chunks/NavigationBar.BGMdr-zL.js";import"../chunks/transform.BNP73y-7.js";import{av as Ul,aw as ps,ax as ms,ay as _s,az as gs,aA as bs,a3 as ws,ah as ka,aB as ys,aC as Es,aD as qs,a as Wa,aE as Sa,d as xs,aF as Cs,M as Ds,F as ks,l as Ss,n as Is,o as As,q as Ls,G as Ts,aG as Ns,X as Ya,aH as Vs,W as Ms,_ as Ka,aI as Ga,aJ as Bs,aK as Ps,J as Ce,N as Xe,Y as Fs,au as Ia,Z as Aa}from"../chunks/index.DsTuvus7.js";import{M as Os}from"../chunks/mapUK.Bfe54qF3.js";import{q as me,C as La,D as Hs,b as ee,s as Ta,c as Na,g as zs,T as Rs,S as Us,d as Wl,p as Ws,M as Ys,a as Ks}from"../chunks/globals.Bwfxw-lO.js";import{g as ve,o as Gs,p as js,l as Xs,k as Zs,q as Js,m as Qs}from"../chunks/duckdb.JsBt_f7_.js";import{p as $s}from"../chunks/per_capita.COcMrZFY.js";import{c as tn,b as en}from"../chunks/bin.B6e-y8I2.js";import{a as ja}from"../chunks/bar.DvBVuNpv.js";import{d as Kl}from"../chunks/dot.D5OFD_Dj.js";import{a as ln}from"../chunks/area.CZAlZ1fO.js";function Xa(s,t=Ul){if(typeof s[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let e=Array.from(s);const l=new Float64Array(e.length);t.length!==2&&(e=e.map(t),t=Ul);const i=(b,y)=>t(e[b],e[y]);let f,c;return s=Uint32Array.from(e,(b,y)=>y),s.sort(t===Ul?(b,y)=>ps(e[b],e[y]):ms(i)),s.forEach((b,y)=>{const E=i(b,f===void 0?b:f);E>=0?((f===void 0||E>0)&&(f=b,c=y),l[b]=c):l[b]=NaN}),l}function an(s={},t={}){const e=_s(t),l=Object.entries(s).map(([i,f])=>{const c=gs(i,t);if(c==null)throw new Error(`missing channel: ${i}`);const[b,y]=bs(c);return{key:i,input:c,output:b,setOutput:y,map:sn(f)}});return{...ws(t,(i,f)=>{const c=ka(i,e),b=l.map(({input:E})=>ka(i,E)),y=l.map(({setOutput:E})=>E(new Array(i.length)));for(const E of f)for(const m of c?ys(E,S=>c[S]).values():[E])l.forEach(({map:S},x)=>S.mapIndex(m,b[x],y[x]));return{data:i,facets:f}}),...Object.fromEntries(l.map(({key:i,output:f})=>[i,f]))}}function sn(s){if(s==null)throw new Error("missing map");if(typeof s.mapIndex=="function")return s;if(typeof s.map=="function"&&Es(s))return nn(s);if(typeof s=="function")return Yl(qs(s));switch(`${s}`.toLowerCase()){case"cumsum":return rn;case"rank":return Yl((t,e)=>Xa(t,l=>e[l]));case"quantile":return Yl((t,e)=>on(t,l=>e[l]))}throw new Error(`invalid map: ${s}`)}function nn(s){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:s.map.bind(s)}}function on(s,t){const e=tn(s,t)-1;return Xa(s,t).map(l=>l/e)}function Yl(s){return{mapIndex(t,e,l){const i=s(t,e);if(i.length!==t.length)throw new Error("map function returned a mismatched length");for(let f=0,c=t.length;f<c;++f)l[t[f]]=i[f]}}}const rn={mapIndex(s,t,e){let l=0;for(const i of s)e[i]=l+=t[i]}},cn={ariaLabel:"tick",fill:null,stroke:"currentColor"};class fn extends Ds{constructor(t,e,l){super(t,e,l,cn),ks(this,l)}render(t,e,l,i,f){return Ss("svg:g",f).call(Is,this,i,f).call(this._transform,this,e).call(c=>c.selectAll().data(t).enter().append("line").call(As,this).attr("x1",this._x1(e,l,i)).attr("x2",this._x2(e,l,i)).attr("y1",this._y1(e,l,i)).attr("y2",this._y2(e,l,i)).call(Ls,this,l).call(Ts,this,l,f)).node()}}class un extends fn{constructor(t,e={}){const{x:l,y:i,inset:f=0,insetRight:c=f,insetLeft:b=f}=e;super(t,{y:{value:i,scale:"y"},x:{value:l,scale:"x",type:"band",optional:!0}},e),this.insetRight=Sa(c),this.insetLeft=Sa(b)}_transform(t,e,{y:l}){t.call(xs,e,{y:l},0,Cs)}_x1({x:t},{x:e},{marginLeft:l}){const{insetLeft:i}=this;return e&&t?f=>e[f]+i:l+i}_x2({x:t},{x:e},{width:l,marginRight:i}){const{insetRight:f}=this;return e&&t?c=>e[c]+t.bandwidth()-f:l-i-f}_y1(t,{y:e}){return l=>e[l]}_y2(t,{y:e}){return l=>e[l]}}function dn(s,{y:t=Wa,...e}={}){return new un(s,{...e,y:t})}function hn(s,{y:t=Wa,x:e=null,r:l,fill:i="#ccc",fillOpacity:f,stroke:c="currentColor",strokeOpacity:b,strokeWidth:y=2,sort:E,...m}={}){const S=e!=null?Ga:Bs;return Ns(Ya(s,S({y1:Za,y2:Ja},{x:e,y:t,stroke:c,strokeOpacity:b,...m})),ja(s,S({y1:"p25",y2:"p75"},{x:e,y:t,fill:i,fillOpacity:f,...m})),dn(s,S({y:"p50"},{x:e,y:t,stroke:c,strokeOpacity:b,strokeWidth:y,sort:E,...m})),Kl(s,an({y:vn},{x:e,y:t,z:e,r:l,stroke:c,strokeOpacity:b,...m})))}function vn(s){const t=Za(s),e=Ja(s);return s.map(l=>l<t||l>e?l:NaN)}function Za(s){const t=Qa(s)*2.5-$a(s)*1.5;return Vs(s,e=>e>=t?e:NaN)}function Ja(s){const t=$a(s)*2.5-Qa(s)*1.5;return Ms(s,e=>e<=t?e:NaN)}function Qa(s){return Ka(s,.25)}function $a(s){return Ka(s,.75)}const pn=""+new URL("../assets/total.DNiyzZzC.png",import.meta.url).href;function Va(s,t,e){const l=s.slice();return l[47]=t[e],l[48]=t,l[49]=e,l}function Ma(s){let t,e,l=s[4].toLocaleString()+"",i;return{c(){t=o("span"),e=D("£"),i=D(l),this.h()},l(f){t=r(f,"SPAN",{class:!0});var c=p(t);e=k(c,"£"),i=k(c,l),c.forEach(u),this.h()},h(){n(t,"class","waffle-big svelte-x5qwqe")},m(f,c){W(f,t,c),a(t,e),a(t,i)},p(f,c){c[0]&16&&l!==(l=f[4].toLocaleString()+"")&&De(i,l)},d(f){f&&u(t)}}}function mn(s){let t,e="National costs";return{c(){t=o("div"),t.textContent=e,this.h()},l(l){t=r(l,"DIV",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-o12owz"&&(t.textContent=e),this.h()},h(){n(t,"class","waffle-caption svelte-x5qwqe")},m(l,i){W(l,t,i)},d(l){l&&u(t)}}}function _n(s){let t,e="National benefits";return{c(){t=o("div"),t.textContent=e,this.h()},l(l){t=r(l,"DIV",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-10ytukz"&&(t.textContent=e),this.h()},h(){n(t,"class","waffle-caption svelte-x5qwqe")},m(l,i){W(l,t,i)},d(l){l&&u(t)}}}function Ba(s){let t,e,l=s[6].toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",i;return{c(){t=o("span"),e=D("£"),i=D(l),this.h()},l(f){t=r(f,"SPAN",{class:!0});var c=p(t);e=k(c,"£"),i=k(c,l),c.forEach(u),this.h()},h(){n(t,"class","waffle-big svelte-x5qwqe")},m(f,c){W(f,t,c),a(t,e),a(t,i)},p(f,c){c[0]&64&&l!==(l=f[6].toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&De(i,l)},d(f){f&&u(t)}}}function gn(s){let t,e="Per capita costs";return{c(){t=o("div"),t.textContent=e,this.h()},l(l){t=r(l,"DIV",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-6pmcl0"&&(t.textContent=e),this.h()},h(){n(t,"class","waffle-caption svelte-x5qwqe")},m(l,i){W(l,t,i)},d(l){l&&u(t)}}}function bn(s){let t,e="Per capita benefits";return{c(){t=o("div"),t.textContent=e,this.h()},l(l){t=r(l,"DIV",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-g1rvwk"&&(t.textContent=e),this.h()},h(){n(t,"class","waffle-caption svelte-x5qwqe")},m(l,i){W(l,t,i)},d(l){l&&u(t)}}}function Pa(s){let t,e,l=(s[4]/s[5]*100).toFixed(2)+"",i,f,c,b="%";return{c(){t=o("div"),e=o("span"),i=D(l),f=_(),c=o("span"),c.textContent=b,this.h()},l(y){t=r(y,"DIV",{class:!0});var E=p(t);e=r(E,"SPAN",{class:!0});var m=p(e);i=k(m,l),m.forEach(u),f=g(E),c=r(E,"SPAN",{class:!0,"data-svelte-h":!0}),T(c)!=="svelte-jxggz7"&&(c.textContent=b),E.forEach(u),this.h()},h(){n(e,"class","waffle-big svelte-x5qwqe"),n(c,"class","small svelte-x5qwqe"),n(t,"class","waffle-value svelte-x5qwqe")},m(y,E){W(y,t,E),a(t,e),a(e,i),a(t,f),a(t,c)},p(y,E){E[0]&48&&l!==(l=(y[4]/y[5]*100).toFixed(2)+"")&&De(i,l)},d(y){y&&u(t)}}}function Fa(s){let t,e,l,i,f,c,b,y,E,m=Ra(s[10])+"",S,x=s[4]&&Oa(s);return{c(){t=o("div"),e=o("div"),l=o("img"),f=_(),c=o("span"),b=D(s[15]),y=_(),x&&x.c(),E=D(`\r
            >> `),S=D(m),this.h()},l(M){t=r(M,"DIV",{class:!0});var N=p(t);e=r(N,"DIV",{class:!0});var V=p(e);l=r(V,"IMG",{src:!0,alt:!0,class:!0}),f=g(V),c=r(V,"SPAN",{class:!0});var L=p(c);b=k(L,s[15]),y=g(L),x&&x.l(L),E=k(L,`\r
            >> `),S=k(L,m),L.forEach(u),V.forEach(u),N.forEach(u),this.h()},h(){Ua(l.src,i=s[17])||n(l,"src",i),n(l,"alt","Icon"),n(l,"class","mini-heading-icon"),n(c,"class","mini-header-text"),n(e,"class","mini-header-content"),n(t,"class","mini-header")},m(M,N){W(M,t,N),a(t,e),a(e,l),a(e,f),a(e,c),a(c,b),a(c,y),x&&x.m(c,null),a(c,E),a(c,S)},p(M,N){M[4]?x?x.p(M,N):(x=Oa(M),x.c(),x.m(c,E)):x&&(x.d(1),x=null),N[0]&1024&&m!==(m=Ra(M[10])+"")&&De(S,m)},d(M){M&&u(t),x&&x.d()}}}function Oa(s){let t,e,l,i;return{c(){t=o("span"),e=D("(UK total: £"),l=D(s[4]),i=D(" billion)"),this.h()},l(f){t=r(f,"SPAN",{class:!0});var c=p(t);e=k(c,"(UK total: £"),l=k(c,s[4]),i=k(c," billion)"),c.forEach(u),this.h()},h(){n(t,"class","mini-header-value")},m(f,c){W(f,t,c),a(t,e),a(t,l),a(t,i)},p(f,c){c[0]&16&&De(l,f[4])},d(f){f&&u(t)}}}function wn(s){let t,e="Each bar shows the total benefits or costs obtained in that period.";return{c(){t=o("p"),t.textContent=e,this.h()},l(l){t=r(l,"P",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-1ualj8m"&&(t.textContent=e),this.h()},h(){n(t,"class","description svelte-x5qwqe")},m(l,i){W(l,t,i)},d(l){l&&u(t)}}}function yn(s){let t,e="Each bar shows the total values obtained in that period.";return{c(){t=o("p"),t.textContent=e,this.h()},l(l){t=r(l,"P",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-19uixzb"&&(t.textContent=e),this.h()},h(){n(t,"class","description svelte-x5qwqe")},m(l,i){W(l,t,i)},d(l){l&&u(t)}}}function En(s){let t,e="Along the x-axis, see how many data zones (y-axis) lose/benefit how much.";return{c(){t=o("p"),t.textContent=e,this.h()},l(l){t=r(l,"P",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-wn292q"&&(t.textContent=e),this.h()},h(){n(t,"class","description svelte-x5qwqe")},m(l,i){W(l,t,i)},d(l){l&&u(t)}}}function qn(s){let t,e="Along the x-axis, see how many data zones (y-axis) benefit by how much.";return{c(){t=o("p"),t.textContent=e,this.h()},l(l){t=r(l,"P",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-10gpxc9"&&(t.textContent=e),this.h()},h(){n(t,"class","description svelte-x5qwqe")},m(l,i){W(l,t,i)},d(l){l&&u(t)}}}function Ha(s){let t,e,l=s[7].legend().outerHTML+"";return{c(){t=o("div"),e=new ss(!1),this.h()},l(i){t=r(i,"DIV",{id:!0});var f=p(t);e=ns(f,!1),f.forEach(u),this.h()},h(){e.a=null,n(t,"id","legend")},m(i,f){W(i,t,f),e.m(l,t)},p(i,f){f[0]&128&&l!==(l=i[7].legend().outerHTML+"")&&e.p(l)},d(i){i&&u(t)}}}function za(s){let t,e,l=s[47].label+"",i,f,c,b=s[47].def+"",y,E,m,S=s[47],x;const M=()=>s[28](m,S),N=()=>s[28](null,S);return{c(){t=o("div"),e=o("h3"),i=D(l),f=_(),c=o("p"),y=D(b),E=_(),m=o("div"),x=_(),this.h()},l(V){t=r(V,"DIV",{class:!0});var L=p(t);e=r(L,"H3",{class:!0});var et=p(e);i=k(et,l),et.forEach(u),f=g(L),c=r(L,"P",{class:!0});var ot=p(c);y=k(ot,b),ot.forEach(u),E=g(L),m=r(L,"DIV",{class:!0}),p(m).forEach(u),x=g(L),L.forEach(u),this.h()},h(){n(e,"class","component-chart-title svelte-x5qwqe"),n(c,"class","component-chart-caption svelte-x5qwqe"),n(m,"class","plot"),n(t,"class","plot-container svelte-x5qwqe")},m(V,L){W(V,t,L),a(t,e),a(e,i),a(t,f),a(t,c),a(c,y),a(t,E),a(t,m),M(),a(t,x)},p(V,L){s=V,S!==s[47]&&(N(),S=s[47],M())},d(V){V&&u(t),N()}}}function xn(s){let t,e,l,i,f,c,b,y="Co-Benefit Report",E,m,S,x,M,N,V,L,et,ot,yt,le,rt,ae,Et,Z,qt,lt,at,st,se,P,Rt="billion",_e,ct,F,vt,ge,be,ft,ne,pt,ke="Contribution to national benefits",we,xt,ye,Ct,Ee,v,d,C,w,nt='<p class="section-subtitle">Overview</p>',z,ut,I,dt,qe,q,Q=s[15].toLowerCase()+"",xe,ie,Ze,Se,Ut,Gl=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${pn}" alt="icon"/> <span class="tooltip-text">This chart uses total values. i.e. shows the total benefit/cost for all of the UK.</span></div>`,Je,oe,Qe,$e,tl,Dt,el,Wt,jl=s[15].toLowerCase()+"",ll,al,sl,Ie,kt,Xl="",nl,il,ol,$,St,rl,Yt,Zl=s[15].toLowerCase()+"",cl,fl,ul,Kt,Jl="Scroll for zooming in and out.",dl,Ae,mt,Ql="",hl,It,Gt,$l='<p class="section-subtitle">Socio-economic factors</p>',vl,ht,R,At,pl,jt,ta=s[15]?.toLowerCase()+"",ml,_l,gl,Xt,ea="Each plot shows the distribution of benefits or costs depending on a given socio-economic factor.",bl,Zt,la=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${$s}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,wl,yl,El,Lt,aa='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Discrete scales:</strong> The first set of socio-economic factors are using categorical values where the x-axis is non-linear:  EPC, Tenure, Typology, Fuel type, Gas flag, Number of cars.</p>',ql,tt,Jt,sa="Legend:",xl,Cl,Dl,re,na="The scatter points are coloured by nation. Click the buttons below to filter.",kl,O,Sl,Il,Tt,Al,Ll,Nt,Tl,Nl,Vt,Vl,Ml,Mt,Bl,Pl,Fl,Ol,Bt,ia="Reset",Hl,Qt,Pt,Ft,zl,oa;t=new vs({});let Y=s[4]&&Ma(s);function ra(h,A){return h[4]>0?_n:mn}let Le=ra(s),_t=Le(s),K=s[4]&&Ba(s);function ca(h,A){return h[4]>0?bn:gn}let Te=ca(s),gt=Te(s),G=s[4]&&Pa(s),j=s[9]&&Fa(s);function fa(h,A){return h[4]>0?yn:wn}let Ne=fa(s),bt=Ne(s);function ua(h,A){return h[4]>0?qn:En}let Ve=ua(s),wt=Ve(s),X=s[7]&&Ha(s),ce=Da(Na),U=[];for(let h=0;h<ce.length;h+=1)U[h]=za(Va(s,ce,h));return{c(){rs(t.$$.fragment),e=_(),l=o("div"),i=o("div"),f=o("div"),c=o("div"),b=o("p"),b.textContent=y,E=_(),m=o("div"),S=o("h1"),x=o("img"),N=_(),V=o("div"),L=_(),et=D(s[15]),ot=_(),yt=o("div"),le=_(),rt=o("p"),ae=D(s[16]),Et=_(),Z=o("div"),qt=o("div"),lt=o("div"),at=o("div"),st=o("div"),Y&&Y.c(),se=_(),P=o("span"),P.textContent=Rt,_e=_(),_t.c(),ct=_(),F=o("div"),vt=o("div"),K&&K.c(),ge=_(),gt.c(),be=_(),ft=o("div"),G&&G.c(),ne=_(),pt=o("div"),pt.textContent=ke,we=_(),xt=o("div"),ye=_(),Ct=o("div"),Ee=_(),j&&j.c(),v=_(),d=o("div"),C=o("div"),w=o("div"),w.innerHTML=nt,z=_(),ut=o("div"),I=o("div"),dt=o("h3"),qe=D("Total values (£, billion) for "),q=o("span"),xe=D(Q),ie=D(" over time"),Ze=_(),bt.c(),Se=_(),Ut=o("div"),Ut.innerHTML=Gl,Je=_(),oe=o("div"),Qe=_(),$e=o("br"),tl=_(),Dt=o("h3"),el=D("Distribution of values (£, billion) for "),Wt=o("span"),ll=D(jl),al=D(" by UK data zones"),sl=_(),wt.c(),Ie=_(),kt=o("div"),kt.innerHTML=Xl,nl=_(),il=o("br"),ol=_(),$=o("div"),St=o("h3"),rl=D("Total values (£, billion) for "),Yt=o("span"),cl=D(Zl),fl=D(" across the UK"),ul=_(),Kt=o("p"),Kt.textContent=Jl,dl=_(),X&&X.c(),Ae=_(),mt=o("div"),mt.innerHTML=Ql,hl=_(),It=o("div"),Gt=o("div"),Gt.innerHTML=$l,vl=_(),ht=o("div"),R=o("div"),At=o("h3"),pl=D("Mapping the impact of "),jt=o("span"),ml=D(ta),_l=D(" across UK local authorities according to socio-economic factors"),gl=_(),Xt=o("p"),Xt.textContent=ea,bl=_(),Zt=o("div"),Zt.innerHTML=la,wl=_(),yl=o("br"),El=_(),Lt=o("div"),Lt.innerHTML=aa,ql=_(),tt=o("div"),Jt=o("strong"),Jt.textContent=sa,xl=_(),Cl=o("br"),Dl=_(),re=o("span"),re.textContent=na,kl=_(),O=o("div"),Sl=o("br"),Il=_(),Tt=o("button"),Al=D("Scotland"),Ll=_(),Nt=o("button"),Tl=D("Northern Ireland"),Nl=_(),Vt=o("button"),Vl=D("England"),Ml=_(),Mt=o("button"),Bl=D("Wales"),Pl=_(),Fl=o("br"),Ol=_(),Bt=o("button"),Bt.textContent=ia,Hl=_(),Qt=o("div"),Pt=o("div");for(let h=0;h<U.length;h+=1)U[h].c();this.h()},l(h){cs(t.$$.fragment,h),e=g(h),l=r(h,"DIV",{class:!0});var A=p(l);i=r(A,"DIV",{class:!0});var B=p(i);f=r(B,"DIV",{class:!0});var $t=p(f);c=r($t,"DIV",{class:!0});var Me=p(c);b=r(Me,"P",{class:!0,"data-svelte-h":!0}),T(b)!=="svelte-1flv0v9"&&(b.textContent=y),E=g(Me),m=r(Me,"DIV",{class:!0});var fe=p(m);S=r(fe,"H1",{class:!0});var ue=p(S);x=r(ue,"IMG",{src:!0,alt:!0,class:!0}),N=g(ue),V=r(ue,"DIV",{style:!0}),p(V).forEach(u),L=g(ue),et=k(ue,s[15]),ue.forEach(u),ot=g(fe),yt=r(fe,"DIV",{style:!0}),p(yt).forEach(u),le=g(fe),rt=r(fe,"P",{class:!0});var da=p(rt);ae=k(da,s[16]),da.forEach(u),fe.forEach(u),Me.forEach(u),Et=g($t),Z=r($t,"DIV",{class:!0});var de=p(Z);qt=r(de,"DIV",{class:!0});var ha=p(qt);lt=r(ha,"DIV",{class:!0});var he=p(lt);at=r(he,"DIV",{class:!0});var Be=p(at);st=r(Be,"DIV",{class:!0});var Pe=p(st);Y&&Y.l(Pe),se=g(Pe),P=r(Pe,"SPAN",{class:!0,"data-svelte-h":!0}),T(P)!=="svelte-tlhydp"&&(P.textContent=Rt),Pe.forEach(u),_e=g(Be),_t.l(Be),Be.forEach(u),ct=g(he),F=r(he,"DIV",{class:!0});var Fe=p(F);vt=r(Fe,"DIV",{class:!0});var va=p(vt);K&&K.l(va),va.forEach(u),ge=g(Fe),gt.l(Fe),Fe.forEach(u),be=g(he),ft=r(he,"DIV",{class:!0});var Oe=p(ft);G&&G.l(Oe),ne=g(Oe),pt=r(Oe,"DIV",{class:!0,"data-svelte-h":!0}),T(pt)!=="svelte-1v3rfza"&&(pt.textContent=ke),Oe.forEach(u),he.forEach(u),ha.forEach(u),we=g(de),xt=r(de,"DIV",{class:!0}),p(xt).forEach(u),ye=g(de),Ct=r(de,"DIV",{class:!0}),p(Ct).forEach(u),de.forEach(u),$t.forEach(u),B.forEach(u),Ee=g(A),j&&j.l(A),v=g(A),d=r(A,"DIV",{class:!0});var He=p(d);C=r(He,"DIV",{id:!0});var ze=p(C);w=r(ze,"DIV",{class:!0,"data-svelte-h":!0}),T(w)!=="svelte-ll1i43"&&(w.innerHTML=nt),z=g(ze),ut=r(ze,"DIV",{id:!0,class:!0});var Re=p(ut);I=r(Re,"DIV",{class:!0});var H=p(I);dt=r(H,"H3",{class:!0});var Ue=p(dt);qe=k(Ue,"Total values (£, billion) for "),q=r(Ue,"SPAN",{style:!0});var pa=p(q);xe=k(pa,Q),pa.forEach(u),ie=k(Ue," over time"),Ue.forEach(u),Ze=g(H),bt.l(H),Se=g(H),Ut=r(H,"DIV",{class:!0,"data-svelte-h":!0}),T(Ut)!=="svelte-bj1j46"&&(Ut.innerHTML=Gl),Je=g(H),oe=r(H,"DIV",{class:!0}),p(oe).forEach(u),Qe=g(H),$e=r(H,"BR",{}),tl=g(H),Dt=r(H,"H3",{class:!0});var We=p(Dt);el=k(We,"Distribution of values (£, billion) for "),Wt=r(We,"SPAN",{style:!0});var ma=p(Wt);ll=k(ma,jl),ma.forEach(u),al=k(We," by UK data zones"),We.forEach(u),sl=g(H),wt.l(H),Ie=g(H),kt=r(H,"DIV",{class:!0,"data-svelte-h":!0}),T(kt)!=="svelte-1ta2xvp"&&(kt.innerHTML=Xl),nl=g(H),il=r(H,"BR",{}),H.forEach(u),ol=g(Re),$=r(Re,"DIV",{class:!0});var Ot=p($);St=r(Ot,"H3",{class:!0});var Ye=p(St);rl=k(Ye,"Total values (£, billion) for "),Yt=r(Ye,"SPAN",{style:!0});var _a=p(Yt);cl=k(_a,Zl),_a.forEach(u),fl=k(Ye," across the UK"),Ye.forEach(u),ul=g(Ot),Kt=r(Ot,"P",{class:!0,"data-svelte-h":!0}),T(Kt)!=="svelte-1ask2se"&&(Kt.textContent=Jl),dl=g(Ot),X&&X.l(Ot),Ae=g(Ot),mt=r(Ot,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),T(mt)!=="svelte-1bex1ev"&&(mt.innerHTML=Ql),Ot.forEach(u),Re.forEach(u),ze.forEach(u),hl=g(He),It=r(He,"DIV",{id:!0});var Ke=p(It);Gt=r(Ke,"DIV",{class:!0,"data-svelte-h":!0}),T(Gt)!=="svelte-dcew9z"&&(Gt.innerHTML=$l),vl=g(Ke),ht=r(Ke,"DIV",{id:!0,class:!0,style:!0});var Ge=p(ht);R=r(Ge,"DIV",{id:!0,class:!0});var it=p(R);At=r(it,"H3",{class:!0});var je=p(At);pl=k(je,"Mapping the impact of "),jt=r(je,"SPAN",{style:!0});var ga=p(jt);ml=k(ga,ta),ga.forEach(u),_l=k(je," across UK local authorities according to socio-economic factors"),je.forEach(u),gl=g(it),Xt=r(it,"P",{class:!0,"data-svelte-h":!0}),T(Xt)!=="svelte-hz97te"&&(Xt.textContent=ea),bl=g(it),Zt=r(it,"DIV",{class:!0,"data-svelte-h":!0}),T(Zt)!=="svelte-z8l5xy"&&(Zt.innerHTML=la),wl=g(it),yl=r(it,"BR",{}),El=g(it),Lt=r(it,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),T(Lt)!=="svelte-250g83"&&(Lt.innerHTML=aa),ql=g(it),tt=r(it,"DIV",{id:!0,class:!0});var Ht=p(tt);Jt=r(Ht,"STRONG",{style:!0,"data-svelte-h":!0}),T(Jt)!=="svelte-xb363n"&&(Jt.textContent=sa),xl=g(Ht),Cl=r(Ht,"BR",{}),Dl=g(Ht),re=r(Ht,"SPAN",{"data-svelte-h":!0}),T(re)!=="svelte-av8zq9"&&(re.textContent=na),kl=g(Ht),O=r(Ht,"DIV",{class:!0});var J=p(O);Sl=r(J,"BR",{}),Il=g(J),Tt=r(J,"BUTTON",{class:!0,"data-nation":!0,style:!0});var ba=p(Tt);Al=k(ba,"Scotland"),ba.forEach(u),Ll=g(J),Nt=r(J,"BUTTON",{class:!0,"data-nation":!0,style:!0});var wa=p(Nt);Tl=k(wa,"Northern Ireland"),wa.forEach(u),Nl=g(J),Vt=r(J,"BUTTON",{class:!0,"data-nation":!0,style:!0});var ya=p(Vt);Vl=k(ya,"England"),ya.forEach(u),Ml=g(J),Mt=r(J,"BUTTON",{class:!0,"data-nation":!0,style:!0});var Ea=p(Mt);Bl=k(Ea,"Wales"),Ea.forEach(u),Pl=g(J),Fl=r(J,"BR",{}),Ol=g(J),Bt=r(J,"BUTTON",{class:!0,"data-svelte-h":!0}),T(Bt)!=="svelte-2t5u5r"&&(Bt.textContent=ia),J.forEach(u),Ht.forEach(u),it.forEach(u),Hl=g(Ge),Qt=r(Ge,"DIV",{id:!0,class:!0});var qa=p(Qt);Pt=r(qa,"DIV",{id:!0,class:!0});var xa=p(Pt);for(let Rl=0;Rl<U.length;Rl+=1)U[Rl].l(xa);xa.forEach(u),qa.forEach(u),Ge.forEach(u),Ke.forEach(u),He.forEach(u),A.forEach(u),this.h()},h(){n(b,"class","page-subtitle svelte-x5qwqe"),Ua(x.src,M=s[17])||n(x,"src",M),n(x,"alt","Icon"),n(x,"class","heading-icon svelte-x5qwqe"),zt(V,"margin-top","10px"),n(S,"class","page-title svelte-x5qwqe"),zt(yt,"margin-top","14px"),n(rt,"class","definition svelte-x5qwqe"),n(m,"class","title-container"),n(c,"class","header-text svelte-x5qwqe"),n(P,"class","small svelte-x5qwqe"),n(st,"class","waffle-value svelte-x5qwqe"),n(at,"class","waffle-stat svelte-x5qwqe"),n(vt,"class","waffle-value svelte-x5qwqe"),n(F,"class","waffle-stat svelte-x5qwqe"),n(pt,"class","waffle-caption svelte-x5qwqe"),n(ft,"class","waffle-stat svelte-x5qwqe"),n(lt,"class","waffle-stats svelte-x5qwqe"),n(qt,"class","waffle-label svelte-x5qwqe"),n(xt,"class","waffle-el"),n(Ct,"class","waffle-bg svelte-x5qwqe"),n(Z,"class","header-waffle-wrapper svelte-x5qwqe"),n(f,"class","header-content svelte-x5qwqe"),n(i,"class","section header svelte-x5qwqe"),n(w,"class","section-header"),n(q,"style",s[13]),n(dt,"class","component-title"),n(Ut,"class","aggregation-icon-container"),n(oe,"class","plot-bar svelte-x5qwqe"),n(Wt,"style",s[13]),n(Dt,"class","component-title"),n(kt,"class","plot"),n(I,"class","component singlevis"),n(Yt,"style",s[13]),n(St,"class","component-title"),n(Kt,"class","description svelte-x5qwqe"),n(mt,"id","map"),n(mt,"class","svelte-x5qwqe"),n($,"class","component column"),n(ut,"id","vis-block"),n(ut,"class","svelte-x5qwqe"),n(C,"id","overview"),n(Gt,"class","section-header"),n(jt,"style",s[13]),n(At,"class","component-title"),n(Xt,"class","explanation"),n(Zt,"class","aggregation-icon-container2 svelte-x5qwqe"),n(Lt,"id","se-disclaimer"),n(Lt,"class","disclaimer-box svelte-x5qwqe"),zt(Jt,"margin-bottom","1rem"),n(Tt,"class","nation-button svelte-x5qwqe"),n(Tt,"data-nation","S"),zt(Tt,"background-color",me(s[14])[0]),n(Nt,"class","nation-button svelte-x5qwqe"),n(Nt,"data-nation","N"),zt(Nt,"background-color",me(s[14])[1]),n(Vt,"class","nation-button svelte-x5qwqe"),n(Vt,"data-nation","E"),zt(Vt,"background-color",me(s[14])[2]),n(Mt,"class","nation-button svelte-x5qwqe"),n(Mt,"data-nation","W"),zt(Mt,"background-color",me(s[14])[3]),n(Bt,"class","reset-button svelte-x5qwqe"),n(O,"class","legend-buttons svelte-x5qwqe"),n(tt,"id","se-legend"),n(tt,"class","legend-box svelte-x5qwqe"),n(R,"id","se-title"),n(R,"class","svelte-x5qwqe"),n(Pt,"id","multiple-plots"),n(Pt,"class","svelte-x5qwqe"),n(Qt,"id","multiple-comp"),n(Qt,"class","svelte-x5qwqe"),n(ht,"id","se-block"),n(ht,"class","component svelte-x5qwqe"),zt(ht,"margin-left","1rem"),n(It,"id","compare"),n(d,"class","section"),n(l,"class","page-container")},m(h,A){fs(t,h,A),W(h,e,A),W(h,l,A),a(l,i),a(i,f),a(f,c),a(c,b),a(c,E),a(c,m),a(m,S),a(S,x),a(S,N),a(S,V),a(S,L),a(S,et),a(m,ot),a(m,yt),a(m,le),a(m,rt),a(rt,ae),a(f,Et),a(f,Z),a(Z,qt),a(qt,lt),a(lt,at),a(at,st),Y&&Y.m(st,null),a(st,se),a(st,P),a(at,_e),_t.m(at,null),a(lt,ct),a(lt,F),a(F,vt),K&&K.m(vt,null),a(F,ge),gt.m(F,null),a(lt,be),a(lt,ft),G&&G.m(ft,null),a(ft,ne),a(ft,pt),a(Z,we),a(Z,xt),s[23](xt),a(Z,ye),a(Z,Ct),s[24](Ct),a(l,Ee),j&&j.m(l,null),a(l,v),a(l,d),a(d,C),a(C,w),a(C,z),a(C,ut),a(ut,I),a(I,dt),a(dt,qe),a(dt,q),a(q,xe),a(dt,ie),a(I,Ze),bt.m(I,null),a(I,Se),a(I,Ut),a(I,Je),a(I,oe),s[25](oe),a(I,Qe),a(I,$e),a(I,tl),a(I,Dt),a(Dt,el),a(Dt,Wt),a(Wt,ll),a(Dt,al),a(I,sl),wt.m(I,null),a(I,Ie),a(I,kt),s[26](kt),a(I,nl),a(I,il),a(ut,ol),a(ut,$),a($,St),a(St,rl),a(St,Yt),a(Yt,cl),a(St,fl),a($,ul),a($,Kt),a($,dl),X&&X.m($,null),a($,Ae),a($,mt),s[27](mt),a(d,hl),a(d,It),a(It,Gt),a(It,vl),a(It,ht),a(ht,R),a(R,At),a(At,pl),a(At,jt),a(jt,ml),a(At,_l),a(R,gl),a(R,Xt),a(R,bl),a(R,Zt),a(R,wl),a(R,yl),a(R,El),a(R,Lt),a(R,ql),a(R,tt),a(tt,Jt),a(tt,xl),a(tt,Cl),a(tt,Dl),a(tt,re),a(tt,kl),a(tt,O),a(O,Sl),a(O,Il),a(O,Tt),a(Tt,Al),a(O,Ll),a(O,Nt),a(Nt,Tl),a(O,Nl),a(O,Vt),a(Vt,Vl),a(O,Ml),a(O,Mt),a(Mt,Bl),a(O,Pl),a(O,Fl),a(O,Ol),a(O,Bt),a(ht,Hl),a(ht,Qt),a(Qt,Pt);for(let B=0;B<U.length;B+=1)U[B]&&U[B].m(Pt,null);s[29](l),Ft=!0,zl||(oa=es(Bt,"click",s[18]),zl=!0)},p(h,A){if(h[4]?Y?Y.p(h,A):(Y=Ma(h),Y.c(),Y.m(st,se)):Y&&(Y.d(1),Y=null),Le!==(Le=ra(h))&&(_t.d(1),_t=Le(h),_t&&(_t.c(),_t.m(at,null))),h[4]?K?K.p(h,A):(K=Ba(h),K.c(),K.m(vt,null)):K&&(K.d(1),K=null),Te!==(Te=ca(h))&&(gt.d(1),gt=Te(h),gt&&(gt.c(),gt.m(F,null))),h[4]?G?G.p(h,A):(G=Pa(h),G.c(),G.m(ft,ne)):G&&(G.d(1),G=null),h[9]?j?j.p(h,A):(j=Fa(h),j.c(),j.m(l,v)):j&&(j.d(1),j=null),(!Ft||A[0]&8192)&&n(q,"style",h[13]),Ne!==(Ne=fa(h))&&(bt.d(1),bt=Ne(h),bt&&(bt.c(),bt.m(I,Se))),(!Ft||A[0]&8192)&&n(Wt,"style",h[13]),Ve!==(Ve=ua(h))&&(wt.d(1),wt=Ve(h),wt&&(wt.c(),wt.m(I,Ie))),(!Ft||A[0]&8192)&&n(Yt,"style",h[13]),h[7]?X?X.p(h,A):(X=Ha(h),X.c(),X.m($,Ae)):X&&(X.d(1),X=null),(!Ft||A[0]&8192)&&n(jt,"style",h[13]),A[0]&2){ce=Da(Na);let B;for(B=0;B<ce.length;B+=1){const $t=Va(h,ce,B);U[B]?U[B].p($t,A):(U[B]=za($t),U[B].c(),U[B].m(Pt,null))}for(;B<U.length;B+=1)U[B].d(1);U.length=ce.length}},i(h){Ft||(us(t.$$.fragment,h),Ft=!0)},o(h){ds(t.$$.fragment,h),Ft=!1},d(h){h&&(u(e),u(l)),hs(t,h),Y&&Y.d(),_t.d(),K&&K.d(),gt.d(),G&&G.d(),s[23](null),s[24](null),j&&j.d(),bt.d(),s[25](null),wt.d(),s[26](null),X&&X.d(),s[27](null),ls(U,h),s[29](null),zl=!1,oa()}}}let pe=400;function Ra(s){return{overview:"Overview",compare:"Compare by socio-economic factor"}[s]||""}function Cn(s,t,e){let l,i,f,c,b,y={},{data:E}=t;const m=E.coBenefit,S=La.find(v=>v.id===m)?.label??m,x=Hs.find(v=>v.id===m)?.def??m;let M,N,V,L,et,ot,yt,le,rt=!1,ae,Et,Z,qt;_e().then(()=>{let v=JSON.parse(JSON.stringify(ee(m)));v.shift(),v=v.reverse(),e(7,Et=new Os(N,"LAD",Z,"total",!1,"LAD",!1,v)),Et.initMap();let d=Et.legend();qt.append(d)});let lt=zs(m),at=!1,st="";const se=["overview","compare"];let P=null;function Rt(){const v=window.scrollY;e(9,at=v>250);for(const d of se){const C=document.getElementById(d);if(!C)continue;const w=C.getBoundingClientRect();if(w.top<=150&&w.bottom>=150){e(10,st=d);break}}}Ca(()=>(window.addEventListener("scroll",Rt),Rt(),()=>window.removeEventListener("scroll",Rt))),as(()=>{window.removeEventListener("scroll",Rt)});async function _e(){M=await ve(Gs(m)),V=await ve(js(m)),et=await ve(Xs()),et=et.sort((d,C)=>C.total-d.total),ot=await ve(Zs()),ot=ot.sort((d,C)=>C.total_value-d.total_value);const v=ot.find(d=>d.co_benefit_type===m);e(6,ae=v?v.value_per_capita:null),N=await ve(Js(m)),console.log("data",N),yt=await ve(Qs()),e(5,le=yt[0].total_value),Ta.forEach(d=>{V[d]=+V[d]}),e(4,L=Ps(M,d=>d.total/1e3).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),e(20,rt=!0)}let ct,F;function vt(v,d){if(!ct)return;const C=20,w=15,nt=Math.floor(200/C),z=w*nt,ut=et.reduce((q,Q)=>q+Q.total,0),I=[];for(const q of et){const Q=Math.round(Math.abs(q.total)/ut*z),xe=q.total<0;for(let ie=0;ie<Q;ie++)I.push({type:q.co_benefit_type,negative:xe})}for(;I.length<z;)I.push({type:"empty"});I.sort((q,Q)=>q.type==="empty"?1:Q.type==="empty"?-1:q.negative&&!Q.negative?1:!q.negative&&Q.negative?-1:0);const dt=I.map((q,Q)=>({x:Q%w,y:Math.floor(Q/w),...q})),qe=Ce({width:C*w,height:C*nt,margin:0,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:La.map(q=>q.id),range:Ws,unknown:"#eee",legend:!1},marks:[Ia(dt.filter(q=>!q.negative),{x:q=>q.x*C,y:q=>q.y*C,fill:"type",fillOpacity:q=>d&&q.type!==d?.15:1}),Ia(dt.filter(q=>q.negative),{x:q=>q.x*C,y:q=>q.y*C,stroke:"type",strokeOpacity:q=>d&&q.type!==d?.15:1,strokeWidth:1,fill:"none"})]});F&&(e(12,F.style.width=`${C*w}px`,F),e(12,F.style.height=`${v-100}px`,F)),e(11,ct.innerHTML="",ct),ct.append(qe)}function ge(){c?.append(Ce({height:pe/1.5,...Ys,marginLeft:90,marginTop:40,marginRight:40,y:{label:"Number of Datazones",grid:!0},x:{label:"Total (£, billion)",labelArrow:"none",labelAnchor:"center"},style:{fontSize:"15px"},marks:[ln(N,en({y:"count"},{x:"total",fill:ee(m)[0],tip:!0,fillOpacity:.5,stroke:ee(m)[0],strokeWidth:2})),Aa({anchor:"left",label:"Number of datazones",labelArrow:"none",labelAnchor:"center"}),Xe([0],{stroke:"#333",strokeWidth:.75})]}))}function be(){let v=M.flatMap(d=>Rs.map(C=>({time:C,value:d[C],total:d.total,scenario:d.scenario})));b?.append(Ce({height:pe/1.5,marginLeft:80,marginRight:40,marginBottom:60,marginTop:40,style:{fontSize:"15px"},x:{type:"band",tickFormat:d=>d.replace(/^Y/,"").replace("_","-"),label:"Year Intervals"},y:{grid:!0,label:"Total (£, billion)"},marks:[ja(v,Ga({y:"sum"},{x:"time",y:d=>d.value/1e3,fill:ee(m)[0],tip:{format:{y:d=>`${d.toFixed(2)}`,x:!1}},fillOpacity:.8,insetLeft:15,insetRight:15})),Aa({anchor:"left",grid:!0,label:"Total (£, billion)",labelArrow:"none",labelAnchor:"center"}),Xe([0],{stroke:"#333",strokeWidth:.75})]}))}function ft(){const v=d=>d.LAD.startsWith("S")?"S":d.LAD.startsWith("N")?"N":d.LAD.startsWith("E")?"E":"W";Ta.forEach(d=>{let C;if(Us.includes(d)){const w=Ks[d],nt=w?Object.keys(w).map(Number):N.filter(z=>z.SEFMAME==d).map(z=>z.SE);C=Ce({style:{fontSize:"14px",textAnchor:"middle",fill:"#333"},height:pe/1.4,width:pe*1.2,marginLeft:70,marginBottom:d==="Typology"?80:60,marginRight:20,marginTop:30,x:{domain:nt,label:Wl(d),tickFormat:z=>w?.[z]??z,tickRotate:d==="Typology"?-20:0},y:{label:"£, thousand",labelArrow:"none"},color:{legend:!0},marks:[hn(N.filter(z=>z.SEFMAME==d),{x:"SE",y:z=>z.total*1e3,stroke:ee(m)[0],fill:ee(m)[0],r:2,fillOpacity:.3}),Xe([0],{stroke:"#333",strokeWidth:.75})]})}else C=Ce({style:{fontSize:"14px",textAnchor:"middle",fill:"#333"},height:pe/1.4,width:pe*1.2,marginLeft:70,marginBottom:60,marginRight:20,marginTop:30,x:{label:Wl(d),labelArrow:!1,labelAnchor:"center"},y:{label:"£, thousand",labelArrow:!1},color:{legend:!0},marks:[Kl(N.filter(w=>w.SEFMAME===d&&(P===null||v(w)!==P)),{x:w=>["Under_35","Over_65","Unemployment"].includes(d)?w.SE*100:w.SE,y:w=>w.total*1e3,fill:w=>{const nt=["S","N","E","W"].indexOf(v(w));return me(m)[nt]},r:2,fillOpacity:.1}),Kl(N.filter(w=>w.SEFMAME===d&&(P===null||v(w)===P)),{x:w=>["Under_35","Over_65","Unemployment"].includes(d)?w.SE*100:w.SE,y:w=>w.total*1e3,fill:w=>{const nt=["S","N","E","W"].indexOf(v(w));return me(m)[nt]},r:3.5,fillOpacity:1}),Fs({label:Wl(d),labelArrow:!1,labelAnchor:"center"}),Xe([0],{stroke:"#333",strokeWidth:.75}),Ya([0],{stroke:"#333",strokeWidth:.75})]});y[d]?.append(C)})}function ne(){e(21,P=null)}Ca(()=>{document.querySelectorAll(".nation-button").forEach(v=>{v.addEventListener("click",()=>{const d=v.getAttribute("data-nation");P===d?(e(21,P=null),v.classList.remove("active")):(e(21,P=d),document.querySelectorAll(".nation-button").forEach(C=>C.classList.remove("active")),v.classList.add("active"))})})});function pt(v){te[v?"unshift":"push"](()=>{ct=v,e(11,ct)})}function ke(v){te[v?"unshift":"push"](()=>{F=v,e(12,F)})}function we(v){te[v?"unshift":"push"](()=>{b=v,e(0,b)})}function xt(v){te[v?"unshift":"push"](()=>{c=v,e(3,c)})}function ye(v){te[v?"unshift":"push"](()=>{Z=v,e(8,Z)})}function Ct(v,d){te[v?"unshift":"push"](()=>{y[d.id]=v,e(1,y)})}function Ee(v){te[v?"unshift":"push"](()=>{f=v,e(2,f)})}return s.$$set=v=>{"data"in v&&e(19,E=v.data)},s.$$.update=()=>{s.$$.dirty[0]&1048577&&rt&&(b?.firstChild?.remove(),ge(),be(),vt(300,m)),s.$$.dirty[0]&3145730&&rt&&P!==void 0&&(Object.values(y).forEach(v=>{v.firstChild?.remove()}),ft()),s.$$.dirty[0]&4194304&&e(13,i=`color: ${l}; font-weight: bold; font-size: 22px;`)},e(22,l=ee(m)[0]),[b,y,f,c,L,le,ae,Et,Z,at,st,ct,F,i,m,S,x,lt,ne,E,rt,P,l,pt,ke,we,xt,ye,Ct,Ee]}class On extends is{constructor(t){super(),os(this,t,Cn,xn,ts,{data:19},null,[-1,-1])}}export{On as component};
