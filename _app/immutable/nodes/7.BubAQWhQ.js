import{s as Ft,d as It,n as yt,r as qt,o as At,e as $}from"../chunks/scheduler.tir__IPy.js";import{S as Ht,i as Vt,e as o,b as G,s as S,c as d,d as k,f as W,g as E,h as C,m as B,n as c,j as Tt,k as e,p as Bt,q as St,o as Pt}from"../chunks/index.bU9Y8Vjw.js";import{e as Ct}from"../chunks/each.-gASlQSi.js";import"../chunks/transform.Bxaw71Wc.js";import{p as tt,g as Mt,m as ct,d as kt,r as zt,a as wt}from"../chunks/index.C2v7JTs9.js";import{M as Rt}from"../chunks/map.DBG5qYZc.js";import{S as ut,a as jt}from"../chunks/globals.xEjTdJsR.js";import{b as Ot,a as ht,c as Xt}from"../chunks/bar.BQBIWyeb.js";import{l as Yt,a as xt}from"../chunks/link.TxI2aU3y.js";function Dt(a,n,l){const h=a.slice();return h[19]=n[l],h[20]=n,h[21]=l,h}function Lt(a){let n,l="",h=a[19];const g=()=>a[12](n,h),b=()=>a[12](null,h);return{c(){n=o("div"),n.innerHTML=l,this.h()},l(u){n=d(u,"DIV",{class:!0,"data-svelte-h":!0}),B(n)!=="svelte-18okkjt"&&(n.innerHTML=l),this.h()},h(){c(n,"class","plot")},m(u,p){Tt(u,n,p),g()},p(u,p){a=u,h!==a[19]&&(b(),h=a[19],g())},d(u){u&&E(n),b()}}}function Nt(a){let n,l,h,g,b,u,p,z,x,v,r,D,q,j,O,M,X,L,J="Barchart",Y,N,t,T,i,mt="Distribution",et,A,ft="",pt,at,H,P,vt="Map",nt,F,gt="",it,I,w,_t="Socio Economic Factors",lt,V,rt,bt,R=Ct(ut),m=[];for(let f=0;f<R.length;f+=1)m[f]=Lt(Dt(a,R,f));return{c(){n=o("div"),l=o("div"),h=o("h1"),g=G(a[5]),b=S(),u=o("p"),p=G(a[5]),z=G(" is ..."),x=S(),v=o("div"),r=o("div"),D=o("h3"),q=G(a[5]),j=G(" datazone distribution"),O=S(),M=o("input"),X=S(),L=o("label"),L.textContent=J,Y=o("br"),N=S(),t=o("input"),T=S(),i=o("label"),i.textContent=mt,et=S(),A=o("div"),A.innerHTML=ft,at=S(),H=o("div"),P=o("h3"),P.textContent=vt,nt=S(),F=o("div"),F.innerHTML=gt,it=S(),I=o("div"),w=o("h3"),w.textContent=_t,lt=S(),V=o("div");for(let f=0;f<m.length;f+=1)m[f].c();this.h()},l(f){n=d(f,"DIV",{class:!0});var y=k(n);l=d(y,"DIV",{class:!0});var s=k(l);h=d(s,"H1",{});var U=k(h);g=W(U,a[5]),U.forEach(E),b=C(s),u=d(s,"P",{});var st=k(u);p=W(st,a[5]),z=W(st," is ..."),st.forEach(E),s.forEach(E),x=C(y),v=d(y,"DIV",{id:!0,class:!0});var K=k(v);r=d(K,"DIV",{class:!0});var _=k(r);D=d(_,"H3",{});var ot=k(D);q=W(ot,a[5]),j=W(ot," datazone distribution"),ot.forEach(E),O=C(_),M=d(_,"INPUT",{type:!0,name:!0}),X=C(_),L=d(_,"LABEL",{for:!0,"data-svelte-h":!0}),B(L)!=="svelte-1hwbt9c"&&(L.textContent=J),Y=d(_,"BR",{}),N=C(_),t=d(_,"INPUT",{type:!0,name:!0}),T=C(_),i=d(_,"LABEL",{for:!0,"data-svelte-h":!0}),B(i)!=="svelte-27dm33"&&(i.textContent=mt),et=C(_),A=d(_,"DIV",{class:!0,"data-svelte-h":!0}),B(A)!=="svelte-111cum5"&&(A.innerHTML=ft),_.forEach(E),at=C(K),H=d(K,"DIV",{class:!0});var Q=k(H);P=d(Q,"H3",{"data-svelte-h":!0}),B(P)!=="svelte-vcuthw"&&(P.textContent=vt),nt=C(Q),F=d(Q,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),B(F)!=="svelte-1ej9vmv"&&(F.innerHTML=gt),Q.forEach(E),K.forEach(E),it=C(y),I=d(y,"DIV",{id:!0,class:!0});var Z=k(I);w=d(Z,"H3",{"data-svelte-h":!0}),B(w)!=="svelte-zqlelw"&&(w.textContent=_t),lt=C(Z),V=d(Z,"DIV",{id:!0,class:!0});var Et=k(V);for(let dt=0;dt<m.length;dt+=1)m[dt].l(Et);Et.forEach(E),Z.forEach(E),y.forEach(E),this.h()},h(){c(l,"class","component"),c(M,"type","radio"),c(M,"name","visType"),M.value="barchart",M.checked=!0,c(L,"for","html"),c(t,"type","radio"),c(t,"name","visType"),t.value="distribution",c(i,"for","javascript"),c(A,"class","plot"),c(r,"class","component column"),It(()=>a[10].call(r)),c(F,"id","map"),c(F,"class","svelte-1qzzqci"),c(H,"class","component column"),c(v,"id","vis-block"),c(v,"class","svelte-1qzzqci"),c(V,"id","multiple-plots"),c(V,"class","svelte-1qzzqci"),c(I,"id","multiple-comp"),c(I,"class","component svelte-1qzzqci"),c(n,"class","page-container")},m(f,y){Tt(f,n,y),e(n,l),e(l,h),e(h,g),e(l,b),e(l,u),e(u,p),e(u,z),e(n,x),e(n,v),e(v,r),e(r,D),e(D,q),e(D,j),e(r,O),e(r,M),e(r,X),e(r,L),e(r,Y),e(r,N),e(r,t),e(r,T),e(r,i),e(r,et),e(r,A),a[9](A),pt=Bt(r,a[10].bind(r)),e(v,at),e(v,H),e(H,P),e(H,nt),e(H,F),a[11](F),e(n,it),e(n,I),e(I,w),e(I,lt),e(I,V);for(let s=0;s<m.length;s+=1)m[s]&&m[s].m(V,null);a[13](n),rt||(bt=[St(M,"change",a[6]),St(t,"change",a[6])],rt=!0)},p(f,[y]){if(y&2){R=Ct(ut);let s;for(s=0;s<R.length;s+=1){const U=Dt(f,R,s);m[s]?m[s].p(U,y):(m[s]=Lt(U),m[s].c(),m[s].m(V,null))}for(;s<m.length;s+=1)m[s].d(1);m.length=R.length}},i:yt,o:yt,d(f){f&&E(n),a[9](null),pt(),a[11](null),Pt(m,f),a[13](null),rt=!1,qt(bt)}}}function Ut(a,n,l){let h,g,b={},u="barchart",p,{data:z}=n;const x=z.data,v=z.SEFData,r=z.coBenefit;let D,q;At(()=>{D=new Rt(x,"LSOA",q,"total"),D.initMap()});function j(){u=="barchart"?g?.append(tt({height:p/1.4,marginLeft:60,marginRight:60,marginBottom:60,y:{type:"band"},style:{fontSize:"18px"},marks:[Ot(x,Mt({x:"mean"},{x:"total",y:"scenario"})),Yt(x,Mt({x1:t=>ct(t)-kt(t),x2:t=>ct(t)+kt(t)},{x:"total",y:"scenario",stroke:"gray",strokeWidth:3}))]})):u=="distribution"&&g?.append(tt({height:p/1.4,marginLeft:60,marginRight:60,y:{label:"Datazones Frequency"},style:{fontSize:"18px"},facet:{data:x,y:"scenario"},marks:[xt(x,ht({y:"count"},{x:"total",tip:!0}))]}))}function O(){ut.forEach(t=>{let T;jt.includes(t)?T=tt({height:p/2,width:330,marginLeft:80,marginBottom:60,marginRight:30,marginTop:60,y:{grid:!0,label:"mean value (£)"},x:{grid:!0,label:t,type:"band",tickFormat:i=>Math.floor(i)},style:{fontSize:"18px"},color:{legend:!0},marks:[Xt(v.filter(i=>i.SEFMAME==t),ht({y:"mean"},{x:i=>Math.floor(i.SE).toString(),y:"total"}))]}):T=tt({height:p/2,width:330,marginLeft:80,marginBottom:60,marginRight:30,marginTop:60,y:{grid:!0,label:"mean value (£)"},x:{grid:!0,label:t},style:{fontSize:"18px"},color:{legend:!0},marks:[xt(v.filter(i=>i.SEFMAME==t),ht({y:"mean"},{x:"SE",y:"total"})),zt([ct(v.filter(i=>i.SEFMAME==t).map(i=>i.SE))],{stroke:"red"}),zt([wt(v.filter(i=>i.SEFMAME==t).map(i=>i.SE))],{stroke:"blue"})]}),b[t]?.append(T)})}function M(t){l(8,u=t.currentTarget.value)}function X(t){$[t?"unshift":"push"](()=>{g=t,l(0,g)})}function L(){p=this.clientHeight,l(2,p)}function J(t){$[t?"unshift":"push"](()=>{q=t,l(4,q)})}function Y(t,T){$[t?"unshift":"push"](()=>{b[T]=t,l(1,b)})}function N(t){$[t?"unshift":"push"](()=>{h=t,l(3,h)})}return a.$$set=t=>{"data"in t&&l(7,z=t.data)},a.$$.update=()=>{a.$$.dirty&263&&(g?.firstChild?.remove(),Object.values(b).forEach(t=>{t.firstChild?.remove()}),p&&(j(),O()))},[g,b,p,h,q,r,M,z,u,X,L,J,Y,N]}class ae extends Ht{constructor(n){super(),Vt(this,n,Ut,Nt,Ft,{data:7})}}export{ae as component};
