import{s as Ge,n as Pe,d as o,x as _t,W as ft,i as G,b as s,z as He,p as u,c,e as v,g as I,f as le,h as f,j as N,t as ae,X as Ot,w as Oe,a as _e,y as ye,C as at,q as ne,B as Ie,E as Gt,r as Ct,H as Ut,Y as yt,Q as Rt,Z as jt,v as qt,_ as Wt,A as Qe}from"../chunks/ChnDNINx.js";import{S as it,i as st,d as Je,t as xe,a as $e,m as et,c as tt,b as lt}from"../chunks/BjCzwqlE.js";import{e as Ve,N as zt}from"../chunks/32xf2dDW.js";import{b as Me}from"../chunks/lhRKLYoL.js";import{g as Xt}from"../chunks/DXheBm7C.js";import{T as nt,Z as Yt,_ as Dt}from"../chunks/D_9_qEkY.js";import{g as ut,C as ht,c as Zt,d as Kt,e as Qt}from"../chunks/DlsIlvjB.js";import{b as dt}from"../chunks/CybERLEZ.js";import{g as Jt,m as xt}from"../chunks/B6AVF3tt.js";function Et(a,e,t){const l=a.slice();return l[10]=e[t],l}function Vt(a){let e,t=Ve(a[2]),l=[];for(let n=0;n<t.length;n+=1)l[n]=kt(Et(a,t,n));return{c(){e=f("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=c(n,"UL",{class:!0});var i=v(e);for(let r=0;r<l.length;r+=1)l[r].l(i);i.forEach(o),this.h()},h(){u(e,"class","suggestions svelte-1kj8esc")},m(n,i){G(n,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(n,i){if(i&12){t=Ve(n[2]);let r;for(r=0;r<t.length;r+=1){const p=Et(n,t,r);l[r]?l[r].p(p,i):(l[r]=kt(p),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(n){n&&o(e),Oe(l,n)}}}function kt(a){let e,t=a[10][1]+"",l,n,i;function r(){return a[7](a[10])}return{c(){e=f("li"),l=ae(t),this.h()},l(p){e=c(p,"LI",{class:!0});var _=v(e);l=le(_,t),_.forEach(o),this.h()},h(){u(e,"class","svelte-1kj8esc")},m(p,_){G(p,e,_),s(e,l),n||(i=He(e,"click",r),n=!0)},p(p,_){a=p,_&4&&t!==(t=a[10][1]+"")&&_e(l,t)},d(p){p&&o(e),n=!1,i()}}}function $t(a){let e,t,l,n,i,r,p,_,d,B,h=a[2].length&&Vt(a);return{c(){e=f("div"),t=f("div"),l=f("input"),n=N(),i=f("button"),r=ae("See Report"),_=N(),h&&h.c(),this.h()},l(y){e=c(y,"DIV",{class:!0});var b=v(e);t=c(b,"DIV",{class:!0});var C=v(t);l=c(C,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,class:!0}),n=I(C),i=c(C,"BUTTON",{type:!0,class:!0});var M=v(i);r=le(M,"See Report"),M.forEach(o),C.forEach(o),_=I(b),h&&h.l(b),b.forEach(o),this.h()},h(){u(l,"type","text"),u(l,"placeholder","Type local authority name to search..."),u(l,"autocomplete","off"),u(l,"class","svelte-1kj8esc"),u(i,"type","button"),u(i,"class","search-btn svelte-1kj8esc"),i.disabled=p=!a[1],u(t,"class","input-group svelte-1kj8esc"),u(e,"class","autocomplete svelte-1kj8esc")},m(y,b){G(y,e,b),s(e,t),s(t,l),ft(l,a[0]),s(t,n),s(t,i),s(i,r),s(e,_),h&&h.m(e,null),d||(B=[He(l,"input",a[6]),He(i,"click",a[4])],d=!0)},p(y,[b]){b&1&&l.value!==y[0]&&ft(l,y[0]),b&2&&p!==(p=!y[1])&&(i.disabled=p),y[2].length?h?h.p(y,b):(h=Vt(y),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:Pe,o:Pe,d(y){y&&o(e),h&&h.d(),d=!1,_t(B)}}}function el(a,e,t){let l;const n=Ot();let{items:i}=e,r="",p=null;const _=Object.entries(i);function d([b,C]){t(0,r=C),t(1,p=b),n("select",b)}function B(){p&&n("search",p)}function h(){r=this.value,t(0,r)}const y=b=>d(b);return a.$$set=b=>{"items"in b&&t(5,i=b.items)},a.$$.update=()=>{a.$$.dirty&1&&t(2,l=r?_.filter(([b,C])=>C.toLowerCase().includes(r.toLowerCase())).slice(0,10):[])},[r,p,l,d,B,i,h,y]}class tl extends it{constructor(e){super(),st(this,e,el,$t,Ge,{items:5})}}function Bt(a,e,t){const l=a.slice();return l[11]=e[t],l}function Lt(a){let e,t=(a[6]==="total"?a[8](a[11].total_value,a[1],a[2],a[11].co_benefit_type,a[5]):a[8](a[11].value_per_capita,a[3],a[4],a[11].co_benefit_type,a[5]))+"",l;return{c(){e=new Ut(!1),l=Ct(),this.h()},l(n){e=Gt(n,!1),l=Ct(),this.h()},h(){e.a=l},m(n,i){e.m(t,n,i),G(n,l,i)},p(n,i){i&127&&t!==(t=(n[6]==="total"?n[8](n[11].total_value,n[1],n[2],n[11].co_benefit_type,n[5]):n[8](n[11].value_per_capita,n[3],n[4],n[11].co_benefit_type,n[5]))+"")&&e.p(t)},d(n){n&&(o(l),e.d())}}}function ll(a){let e,t=a[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=f("span"),l=ae(t)},l(n){e=c(n,"SPAN",{});var i=v(e);l=le(i,t),i.forEach(o)},m(n,i){G(n,e,i),s(e,l)},p(n,i){i&1&&t!==(t=n[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&_e(l,t)},d(n){n&&o(e)}}}function al(a){let e,t=a[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=f("span"),l=ae(t)},l(n){e=c(n,"SPAN",{});var i=v(e);l=le(i,t),i.forEach(o)},m(n,i){G(n,e,i),s(e,l)},p(n,i){i&1&&t!==(t=n[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&_e(l,t)},d(n){n&&o(e)}}}function Tt(a){let e,t,l,n,i,r,p,_=a[7](a[11].co_benefit_type)+"",d,B,h,y,b,C=a[6],M,w,H,D=Lt(a);function m(L,A){return L[6]==="total"?al:ll}let U=m(a),S=U(a);return{c(){e=f("tr"),t=f("td"),l=f("div"),n=f("img"),r=N(),p=f("a"),d=ae(_),h=N(),y=f("td"),b=f("div"),D.c(),M=N(),w=f("td"),S.c(),H=N(),this.h()},l(L){e=c(L,"TR",{});var A=v(e);t=c(A,"TD",{});var Z=v(t);l=c(Z,"DIV",{class:!0});var $=v(l);n=c($,"IMG",{src:!0,alt:!0,class:!0}),r=I($),p=c($,"A",{href:!0});var x=v(p);d=le(x,_),x.forEach(o),$.forEach(o),Z.forEach(o),h=I(A),y=c(A,"TD",{});var F=v(y);b=c(F,"DIV",{class:!0});var T=v(b);D.l(T),T.forEach(o),F.forEach(o),M=I(A),w=c(A,"TD",{});var R=v(w);S.l(R),R.forEach(o),H=I(A),A.forEach(o),this.h()},h(){Ie(n.src,i=ut(a[11].co_benefit_type))||u(n,"src",i),u(n,"alt","Icon"),u(n,"class","in-table-icon"),u(p,"href",B=Me+"/cobenefit?cobenefit="+a[11].co_benefit_type),u(l,"class","coben-content"),u(b,"class","bar-cell")},m(L,A){G(L,e,A),s(e,t),s(t,l),s(l,n),s(l,r),s(l,p),s(p,d),s(e,h),s(e,y),s(y,b),D.m(b,null),s(e,M),s(e,w),S.m(w,null),s(e,H)},p(L,A){A&1&&!Ie(n.src,i=ut(L[11].co_benefit_type))&&u(n,"src",i),A&1&&_!==(_=L[7](L[11].co_benefit_type)+"")&&_e(d,_),A&1&&B!==(B=Me+"/cobenefit?cobenefit="+L[11].co_benefit_type)&&u(p,"href",B),A&64&&Ge(C,C=L[6])?(D.d(1),D=Lt(L),D.c(),D.m(b,null)):D.p(L,A),U===(U=m(L))&&S?S.p(L,A):(S.d(1),S=U(L),S&&(S.c(),S.m(w,null)))},d(L){L&&o(e),D.d(L),S.d()}}}function nl(a){let e,t,l,n="Total",i,r,p="Per Capita",_,d,B,h,y,b="Name",C,M,w=a[6]==="total"?"Total":"Per Capita",H,D,m,U=a[6]==="total"?"£, billion":"£",S,L,A,Z,$,x=Ve(a[0]),F=[];for(let T=0;T<x.length;T+=1)F[T]=Tt(Bt(a,x,T));return{c(){e=f("div"),t=f("div"),l=f("button"),l.textContent=n,i=N(),r=f("button"),r.textContent=p,_=N(),d=f("table"),B=f("thead"),h=f("tr"),y=f("th"),y.textContent=b,C=N(),M=f("th"),H=ae(w),D=N(),m=f("th"),S=ae(U),L=N(),A=f("tbody");for(let T=0;T<F.length;T+=1)F[T].c();this.h()},l(T){e=c(T,"DIV",{class:!0});var R=v(e);t=c(R,"DIV",{class:!0});var O=v(t);l=c(O,"BUTTON",{"data-svelte-h":!0}),ne(l)!=="svelte-15mf98g"&&(l.textContent=n),i=I(O),r=c(O,"BUTTON",{"data-svelte-h":!0}),ne(r)!=="svelte-1ts3a4f"&&(r.textContent=p),O.forEach(o),R.forEach(o),_=I(T),d=c(T,"TABLE",{class:!0});var K=v(d);B=c(K,"THEAD",{});var q=v(B);h=c(q,"TR",{});var ee=v(h);y=c(ee,"TH",{"data-svelte-h":!0}),ne(y)!=="svelte-13ju7y1"&&(y.textContent=b),C=I(ee),M=c(ee,"TH",{style:!0});var Y=v(M);H=le(Y,w),Y.forEach(o),D=I(ee),m=c(ee,"TH",{style:!0});var V=v(m);S=le(V,U),V.forEach(o),ee.forEach(o),q.forEach(o),L=I(K),A=c(K,"TBODY",{});var j=v(A);for(let k=0;k<F.length;k+=1)F[k].l(j);j.forEach(o),K.forEach(o),this.h()},h(){ye(l,"selected",a[6]==="total"),ye(r,"selected",a[6]==="per_capita"),u(t,"class","button-group"),u(e,"class","controls"),at(M,"width","180px"),at(m,"width","80px"),u(d,"class","data-table")},m(T,R){G(T,e,R),s(e,t),s(t,l),s(t,i),s(t,r),G(T,_,R),G(T,d,R),s(d,B),s(B,h),s(h,y),s(h,C),s(h,M),s(M,H),s(h,D),s(h,m),s(m,S),s(d,L),s(d,A);for(let O=0;O<F.length;O+=1)F[O]&&F[O].m(A,null);Z||($=[He(l,"click",a[9]),He(r,"click",a[10])],Z=!0)},p(T,[R]){if(R&64&&ye(l,"selected",T[6]==="total"),R&64&&ye(r,"selected",T[6]==="per_capita"),R&64&&w!==(w=T[6]==="total"?"Total":"Per Capita")&&_e(H,w),R&64&&U!==(U=T[6]==="total"?"£, billion":"£")&&_e(S,U),R&511){x=Ve(T[0]);let O;for(O=0;O<x.length;O+=1){const K=Bt(T,x,O);F[O]?F[O].p(K,R):(F[O]=Tt(K),F[O].c(),F[O].m(A,null))}for(;O<F.length;O+=1)F[O].d(1);F.length=x.length}},i:Pe,o:Pe,d(T){T&&(o(e),o(_),o(d)),Oe(F,T),Z=!1,_t($)}}}function il(a,e,t){let{aggregationPerCapitaPerBenefit:l}=e,{minCoBenefValue:n}=e,{maxCoBenefValue:i}=e,{minHHCoBenefValue:r}=e,{maxHHCoBenefValue:p}=e,{COBENEFS_SCALE:_}=e;function d(C){return ht.find(M=>M.id===C)?.label??C}let B="total";function h(C,M,w,H,D){const m=D(H);return nt({width:100,height:20,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,x:{domain:[M,w],axis:null},marks:[Yt([0],{stroke:"#3C3C3C"}),dt([C],{x:S=>S,y:0,fill:m})]}).outerHTML}const y=()=>t(6,B="total"),b=()=>t(6,B="per_capita");return a.$$set=C=>{"aggregationPerCapitaPerBenefit"in C&&t(0,l=C.aggregationPerCapitaPerBenefit),"minCoBenefValue"in C&&t(1,n=C.minCoBenefValue),"maxCoBenefValue"in C&&t(2,i=C.maxCoBenefValue),"minHHCoBenefValue"in C&&t(3,r=C.minHHCoBenefValue),"maxHHCoBenefValue"in C&&t(4,p=C.maxHHCoBenefValue),"COBENEFS_SCALE"in C&&t(5,_=C.COBENEFS_SCALE)},[l,n,i,r,p,_,B,d,h,y,b]}class sl extends it{constructor(e){super(),st(this,e,il,nl,Ge,{aggregationPerCapitaPerBenefit:0,minCoBenefValue:1,maxCoBenefValue:2,minHHCoBenefValue:3,maxHHCoBenefValue:4,COBENEFS_SCALE:5})}}function wt(a,e,t){const l=a.slice();return l[16]=e[t],l}function St(a,e,t){const l=a.slice();return l[19]=e[t],l}function Ht(a){let e,t=a[19].label+"",l;return{c(){e=f("option"),l=ae(t),this.h()},l(n){e=c(n,"OPTION",{});var i=v(e);l=le(i,t),i.forEach(o),this.h()},h(){e.__value=a[19].value,ft(e,e.__value)},m(n,i){G(n,e,i),s(e,l)},p:Pe,d(n){n&&o(e)}}}function ol(a){let e,t=a[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=f("span"),l=ae(t)},l(n){e=c(n,"SPAN",{});var i=v(e);l=le(i,t),i.forEach(o)},m(n,i){G(n,e,i),s(e,l)},p(n,i){i&2&&t!==(t=n[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&_e(l,t)},d(n){n&&o(e)}}}function rl(a){let e,t=a[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=f("span"),l=ae(t)},l(n){e=c(n,"SPAN",{});var i=v(e);l=le(i,t),i.forEach(o)},m(n,i){G(n,e,i),s(e,l)},p(n,i){i&2&&t!==(t=n[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&_e(l,t)},d(n){n&&o(e)}}}function At(a){let e,t,l,n=(a[5][a[16].LAD]??a[16].LAD)+"",i,r,p,_,d,B,h=(a[2]==="total"?a[9](a[16].total_value,a[3]):a[10](a[16].value_per_capita,a[4]))+"",y,b,C;function M(D,m){return D[2]==="total"?rl:ol}let w=M(a),H=w(a);return{c(){e=f("tr"),t=f("td"),l=f("a"),i=ae(n),p=N(),_=f("td"),d=f("div"),B=new Ut(!1),y=N(),b=f("td"),H.c(),C=N(),this.h()},l(D){e=c(D,"TR",{});var m=v(e);t=c(m,"TD",{});var U=v(t);l=c(U,"A",{href:!0});var S=v(l);i=le(S,n),S.forEach(o),U.forEach(o),p=I(m),_=c(m,"TD",{});var L=v(_);d=c(L,"DIV",{class:!0});var A=v(d);B=Gt(A,!1),A.forEach(o),L.forEach(o),y=I(m),b=c(m,"TD",{});var Z=v(b);H.l(Z),Z.forEach(o),C=I(m),m.forEach(o),this.h()},h(){u(l,"href",r=Me+"/location?location="+a[16].LAD),B.a=null,u(d,"class","bar-cell")},m(D,m){G(D,e,m),s(e,t),s(t,l),s(l,i),s(e,p),s(e,_),s(_,d),B.m(h,d),s(e,y),s(e,b),H.m(b,null),s(e,C)},p(D,m){m&34&&n!==(n=(D[5][D[16].LAD]??D[16].LAD)+"")&&_e(i,n),m&2&&r!==(r=Me+"/location?location="+D[16].LAD)&&u(l,"href",r),m&30&&h!==(h=(D[2]==="total"?D[9](D[16].total_value,D[3]):D[10](D[16].value_per_capita,D[4]))+"")&&B.p(h),w===(w=M(D))&&H?H.p(D,m):(H.d(1),H=w(D),H&&(H.c(),H.m(b,null)))},d(D){D&&o(e),H.d()}}}function cl(a){let e,t,l="Nation:",n,i,r,p,_,d="Total",B,h,y="Per Capita",b,C,M,w,H,D="Name",m,U,S=a[2]==="total"?"Total":"Per Capita",L,A,Z,$=a[2]==="total"?"£, billion":"£",x,F,T,R,O,K=Ve(a[7]),q=[];for(let V=0;V<K.length;V+=1)q[V]=Ht(St(a,K,V));let ee=Ve(a[1]),Y=[];for(let V=0;V<ee.length;V+=1)Y[V]=At(wt(a,ee,V));return{c(){e=f("div"),t=f("label"),t.textContent=l,n=N(),i=f("select");for(let V=0;V<q.length;V+=1)q[V].c();r=N(),p=f("div"),_=f("button"),_.textContent=d,B=N(),h=f("button"),h.textContent=y,b=N(),C=f("table"),M=f("thead"),w=f("tr"),H=f("th"),H.textContent=D,m=N(),U=f("th"),L=ae(S),A=N(),Z=f("th"),x=ae($),F=N(),T=f("tbody");for(let V=0;V<Y.length;V+=1)Y[V].c();this.h()},l(V){e=c(V,"DIV",{class:!0});var j=v(e);t=c(j,"LABEL",{"data-svelte-h":!0}),ne(t)!=="svelte-1ecnfnj"&&(t.textContent=l),n=I(j),i=c(j,"SELECT",{});var k=v(i);for(let W=0;W<q.length;W+=1)q[W].l(k);k.forEach(o),r=I(j),p=c(j,"DIV",{class:!0});var ie=v(p);_=c(ie,"BUTTON",{"data-svelte-h":!0}),ne(_)!=="svelte-2dev6e"&&(_.textContent=d),B=I(ie),h=c(ie,"BUTTON",{"data-svelte-h":!0}),ne(h)!=="svelte-1q4fgxf"&&(h.textContent=y),ie.forEach(o),j.forEach(o),b=I(V),C=c(V,"TABLE",{class:!0});var ce=v(C);M=c(ce,"THEAD",{});var Ce=v(M);w=c(Ce,"TR",{});var De=v(w);H=c(De,"TH",{"data-svelte-h":!0}),ne(H)!=="svelte-13ju7y1"&&(H.textContent=D),m=I(De),U=c(De,"TH",{style:!0});var Ae=v(U);L=le(Ae,S),Ae.forEach(o),A=I(De),Z=c(De,"TH",{style:!0});var ge=v(Z);x=le(ge,$),ge.forEach(o),De.forEach(o),Ce.forEach(o),F=I(ce),T=c(ce,"TBODY",{});var E=v(T);for(let W=0;W<Y.length;W+=1)Y[W].l(E);E.forEach(o),ce.forEach(o),this.h()},h(){a[0]===void 0&&Rt(()=>a[13].call(i)),ye(_,"selected",a[2]==="total"),ye(h,"selected",a[2]==="per_capita"),u(p,"class","button-group"),u(e,"class","controls"),at(U,"width","120px"),at(Z,"width","80px"),u(C,"class","data-table")},m(V,j){G(V,e,j),s(e,t),s(e,n),s(e,i);for(let k=0;k<q.length;k+=1)q[k]&&q[k].m(i,null);yt(i,a[0],!0),s(e,r),s(e,p),s(p,_),s(p,B),s(p,h),G(V,b,j),G(V,C,j),s(C,M),s(M,w),s(w,H),s(w,m),s(w,U),s(U,L),s(w,A),s(w,Z),s(Z,x),s(C,F),s(C,T);for(let k=0;k<Y.length;k+=1)Y[k]&&Y[k].m(T,null);R||(O=[He(i,"change",a[13]),He(i,"change",a[8]),He(_,"click",a[14]),He(h,"click",a[15])],R=!0)},p(V,[j]){if(j&128){K=Ve(V[7]);let k;for(k=0;k<K.length;k+=1){const ie=St(V,K,k);q[k]?q[k].p(ie,j):(q[k]=Ht(ie),q[k].c(),q[k].m(i,null))}for(;k<q.length;k+=1)q[k].d(1);q.length=K.length}if(j&129&&yt(i,V[0]),j&4&&ye(_,"selected",V[2]==="total"),j&4&&ye(h,"selected",V[2]==="per_capita"),j&4&&S!==(S=V[2]==="total"?"Total":"Per Capita")&&_e(L,S),j&4&&$!==($=V[2]==="total"?"£, billion":"£")&&_e(x,$),j&1598){ee=Ve(V[1]);let k;for(k=0;k<ee.length;k+=1){const ie=wt(V,ee,k);Y[k]?Y[k].p(ie,j):(Y[k]=At(ie),Y[k].c(),Y[k].m(T,null))}for(;k<Y.length;k+=1)Y[k].d(1);Y.length=ee.length}},i:Pe,o:Pe,d(V){V&&(o(e),o(b),o(C)),Oe(q,V),Oe(Y,V),R=!1,_t(O)}}}function fl(a,e,t){const l=Ot();let{ladData:n=[]}=e,{region:i}=e,{sortBy:r}=e,{maxLADValue:p}=e,{maxHHLADValue:_}=e,{LADToName:d={}}=e,{viewMode:B="total"}=e,{selectedRegion:h="All"}=e;const y=[{label:"All",value:"All"},{label:"England",value:"England"},{label:"Wales",value:"Wales"},{label:"Scotland",value:"Scotland"},{label:"Northern Ireland",value:"NI"}];function b(m){l("filterChange",{region:m.target.value,sortBy:r})}function C(m,U){return nt({width:80,height:20,margin:0,x:{domain:[0,U],axis:null},marks:[dt([m],{x:L=>L,y:0,fill:"#ccc"})]}).outerHTML}function M(m,U){return nt({width:80,height:20,margin:0,x:{domain:[0,U],axis:null},marks:[dt([m],{x:L=>L,y:0,fill:"#ccc"})]}).outerHTML}function w(){i=jt(this),t(0,i),t(7,y)}const H=()=>l("filterChange",{region:i,sortBy:"total"}),D=()=>l("filterChange",{region:i,sortBy:"per_capita"});return a.$$set=m=>{"ladData"in m&&t(1,n=m.ladData),"region"in m&&t(0,i=m.region),"sortBy"in m&&t(2,r=m.sortBy),"maxLADValue"in m&&t(3,p=m.maxLADValue),"maxHHLADValue"in m&&t(4,_=m.maxHHLADValue),"LADToName"in m&&t(5,d=m.LADToName),"viewMode"in m&&t(11,B=m.viewMode),"selectedRegion"in m&&t(12,h=m.selectedRegion)},[i,n,r,p,_,d,l,y,b,C,M,B,h,w,H,D]}class ul extends it{constructor(e){super(),st(this,e,fl,cl,Ge,{ladData:1,region:0,sortBy:2,maxLADValue:3,maxHHLADValue:4,LADToName:5,viewMode:11,selectedRegion:12})}}function It(a,e,t){const l=a.slice();return l[42]=e[t],l[44]=t,l}function Nt(a){let e,t,l,n,i,r,p;return{c(){e=f("div"),t=f("img"),i=N(),r=f("img"),this.h()},l(_){e=c(_,"DIV",{class:!0});var d=v(e);t=c(d,"IMG",{class:!0,src:!0,alt:!0}),i=I(d),r=c(d,"IMG",{class:!0,src:!0,alt:!0}),d.forEach(o),this.h()},h(){u(t,"class","slide-image"),Ie(t.src,l=a[42].image)||u(t,"src",l),u(t,"alt",n=a[42].label),u(r,"class","slide-map svelte-60aegy"),Ie(r.src,p=a[42].mapImage)||u(r,"src",p),u(r,"alt","Map overlay"),u(e,"class","hero-slide svelte-60aegy"),ye(e,"active",a[44]===a[16]),ye(e,"previous",a[44]===a[17])},m(_,d){G(_,e,d),s(e,t),s(e,i),s(e,r)},p(_,d){d[0]&8192&&!Ie(t.src,l=_[42].image)&&u(t,"src",l),d[0]&8192&&n!==(n=_[42].label)&&u(t,"alt",n),d[0]&8192&&!Ie(r.src,p=_[42].mapImage)&&u(r,"src",p),d[0]&65536&&ye(e,"active",_[44]===_[16]),d[0]&131072&&ye(e,"previous",_[44]===_[17])},d(_){_&&o(e)}}}function Pt(a){let e,t,l;return{c(){e=f("div"),t=f("img"),this.h()},l(n){e=c(n,"DIV",{class:!0});var i=v(e);t=c(i,"IMG",{src:!0,alt:!0,class:!0}),i.forEach(o),this.h()},h(){Ie(t.src,l=a[12])||u(t,"src",l),u(t,"alt","Icon"),u(t,"class","svelte-60aegy"),u(e,"class","waffle-icon svelte-60aegy")},m(n,i){G(n,e,i),s(e,t)},p(n,i){i[0]&4096&&!Ie(t.src,l=n[12])&&u(t,"src",l)},d(n){n&&o(e)}}}function hl(a){let e,t="National costs";return{c(){e=f("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-o12owz"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-60aegy")},m(l,n){G(l,e,n)},d(l){l&&o(e)}}}function dl(a){let e,t="National benefits";return{c(){e=f("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-10ytukz"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-60aegy")},m(l,n){G(l,e,n)},d(l){l&&o(e)}}}function _l(a){let e,t="Per capita costs";return{c(){e=f("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-6pmcl0"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-60aegy")},m(l,n){G(l,e,n)},d(l){l&&o(e)}}}function ml(a){let e,t="Per capita benefits";return{c(){e=f("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-g1rvwk"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-60aegy")},m(l,n){G(l,e,n)},d(l){l&&o(e)}}}function Ft(a){let e,t,l,n,i,r,p="%",_,d,B="Contribution";return{c(){e=f("div"),t=f("div"),l=f("span"),n=ae(a[11]),i=N(),r=f("span"),r.textContent=p,_=N(),d=f("div"),d.textContent=B,this.h()},l(h){e=c(h,"DIV",{class:!0});var y=v(e);t=c(y,"DIV",{class:!0});var b=v(t);l=c(b,"SPAN",{class:!0});var C=v(l);n=le(C,a[11]),C.forEach(o),i=I(b),r=c(b,"SPAN",{class:!0,"data-svelte-h":!0}),ne(r)!=="svelte-jxggz7"&&(r.textContent=p),b.forEach(o),_=I(y),d=c(y,"DIV",{class:!0,"data-svelte-h":!0}),ne(d)!=="svelte-1ahdmih"&&(d.textContent=B),y.forEach(o),this.h()},h(){u(l,"class","waffle-big svelte-60aegy"),u(r,"class","small svelte-60aegy"),u(t,"class","waffle-value svelte-60aegy"),u(d,"class","waffle-caption svelte-60aegy"),u(e,"class","waffle-stat svelte-60aegy")},m(h,y){G(h,e,y),s(e,t),s(t,l),s(l,n),s(t,i),s(t,r),s(e,_),s(e,d)},p(h,y){y[0]&2048&&_e(n,h[11])},d(h){h&&o(e)}}}function Mt(a){let e,t="GGGGGGGGG";return{c(){e=f("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1hoodjr"&&(e.textContent=t),this.h()},h(){u(e,"class","spinner")},m(l,n){G(l,e,n)},d(l){l&&o(e)}}}function gl(a){let e,t,l,n,i,r,p=`<img src="${Me}/atlas-logos/logo-colored-waffle-png.png" alt="Logo" height="0px"/> <h1 class="hero-title svelte-60aegy">The Co-Benefits of Reaching <br/> Net Zero in the UK</h1> <p class="hero-description svelte-60aegy">Climate actions lower greenhouse gas (GHG) emissions but the gains for society reach further. The CO-BENS project models 11 additional benefits based on actions recommended by the Climate Change Committee (CCC) in its Seventh Carbon Budget (2025) across 45,000 communities and regions within the UK.<br/></p> <p class="hero-description svelte-60aegy">Explore how, when and for whom benefits emerge to further understand connections between a wide range of social, economic and environmental priorities, and drive more effective decision-making.</p> <p class="hero-description svelte-60aegy">To understand more about the analysis or if you would like bespoke co-benefit modelling please get in touch by emailing <a href="mailto:cobens@ed.ac.uk">cobens@ed.ac.uk</a></p>`,_,d,B,h,y,b,C,M,w,H,D,m,U,S,L,A,Z="billion",$,x,F,T,R,O,K,q,ee,Y,V,j,k,ie,ce,Ce,De="Find My Place",Ae,ge,E,W,Q,se,ke="Explore by Local Authority",ve,X,me,re,pe,P="Explore by Co-Benefit",oe,be,Be,Ee,Le;e=new zt({});let Te=Ve(a[13]),J=[];for(let g=0;g<Te.length;g+=1)J[g]=Nt(It(a,Te,g));let fe=a[12]&&Pt(a);function mt(g,z){return g[9]>0?dl:hl}let Ue=mt(a),we=Ue(a);function gt(g,z){return g[10]>0?ml:_l}let Re=gt(a),Se=Re(a),ue=a[15]!==null&&Ft(a);ge=new tl({props:{items:a[20]}}),ge.$on("search",a[32]),X=new ul({props:{ladData:a[0],region:a[1],sortBy:a[2],maxLADValue:a[3],maxHHLADValue:a[4],LADToName:a[20]}}),X.$on("filterChange",a[21]),be=new sl({props:{aggregationPerCapitaPerBenefit:a[19],minCoBenefValue:a[23],maxCoBenefValue:a[22],minHHCoBenefValue:a[24],maxHHCoBenefValue:a[25],COBENEFS_SCALE:Zt}});let de=a[18]&&Mt();return{c(){lt(e.$$.fragment),t=N(),l=f("section");for(let g=0;g<J.length;g+=1)J[g].c();n=N(),i=f("div"),r=f("div"),r.innerHTML=p,_=N(),d=f("div"),B=f("div"),h=f("div"),fe&&fe.c(),y=N(),b=f("div"),C=ae(a[8]),M=N(),w=f("div"),H=f("div"),D=f("div"),m=f("span"),U=ae("£"),S=ae(a[9]),L=N(),A=f("span"),A.textContent=Z,$=N(),we.c(),x=N(),F=f("div"),T=f("div"),R=f("span"),O=ae("£"),K=ae(a[10]),q=N(),Se.c(),ee=N(),ue&&ue.c(),Y=N(),V=f("div"),j=N(),k=f("div"),ie=N(),ce=f("section"),Ce=f("h1"),Ce.textContent=De,Ae=N(),lt(ge.$$.fragment),E=N(),W=f("section"),Q=f("div"),se=f("h2"),se.textContent=ke,ve=N(),lt(X.$$.fragment),me=N(),re=f("div"),pe=f("h2"),pe.textContent=P,oe=N(),lt(be.$$.fragment),Be=N(),Ee=f("main"),de&&de.c(),this.h()},l(g){tt(e.$$.fragment,g),t=I(g),l=c(g,"SECTION",{class:!0});var z=v(l);for(let ct=0;ct<J.length;ct+=1)J[ct].l(z);n=I(z),i=c(z,"DIV",{class:!0});var he=v(i);r=c(he,"DIV",{class:!0,"data-svelte-h":!0}),ne(r)!=="svelte-wan26l"&&(r.innerHTML=p),_=I(he),d=c(he,"DIV",{class:!0});var te=v(d);B=c(te,"DIV",{class:!0});var Ne=v(B);h=c(Ne,"DIV",{class:!0});var je=v(h);fe&&fe.l(je),y=I(je),b=c(je,"DIV",{class:!0});var vt=v(b);C=le(vt,a[8]),vt.forEach(o),je.forEach(o),M=I(Ne),w=c(Ne,"DIV",{class:!0});var Fe=v(w);H=c(Fe,"DIV",{class:!0});var qe=v(H);D=c(qe,"DIV",{class:!0});var We=v(D);m=c(We,"SPAN",{class:!0});var ot=v(m);U=le(ot,"£"),S=le(ot,a[9]),ot.forEach(o),L=I(We),A=c(We,"SPAN",{class:!0,"data-svelte-h":!0}),ne(A)!=="svelte-tlhydp"&&(A.textContent=Z),We.forEach(o),$=I(qe),we.l(qe),qe.forEach(o),x=I(Fe),F=c(Fe,"DIV",{class:!0});var ze=v(F);T=c(ze,"DIV",{class:!0});var pt=v(T);R=c(pt,"SPAN",{class:!0});var rt=v(R);O=le(rt,"£"),K=le(rt,a[10]),rt.forEach(o),pt.forEach(o),q=I(ze),Se.l(ze),ze.forEach(o),ee=I(Fe),ue&&ue.l(Fe),Fe.forEach(o),Ne.forEach(o),Y=I(te),V=c(te,"DIV",{class:!0}),v(V).forEach(o),j=I(te),k=c(te,"DIV",{}),v(k).forEach(o),te.forEach(o),he.forEach(o),z.forEach(o),ie=I(g),ce=c(g,"SECTION",{class:!0});var Xe=v(ce);Ce=c(Xe,"H1",{class:!0,"data-svelte-h":!0}),ne(Ce)!=="svelte-byubde"&&(Ce.textContent=De),Ae=I(Xe),tt(ge.$$.fragment,Xe),Xe.forEach(o),E=I(g),W=c(g,"SECTION",{class:!0});var Ye=v(W);Q=c(Ye,"DIV",{class:!0});var Ze=v(Q);se=c(Ze,"H2",{class:!0,"data-svelte-h":!0}),ne(se)!=="svelte-pgup4c"&&(se.textContent=ke),ve=I(Ze),tt(X.$$.fragment,Ze),Ze.forEach(o),me=I(Ye),re=c(Ye,"DIV",{class:!0});var Ke=v(re);pe=c(Ke,"H2",{class:!0,"data-svelte-h":!0}),ne(pe)!=="svelte-9nk5va"&&(pe.textContent=P),oe=I(Ke),tt(be.$$.fragment,Ke),Ke.forEach(o),Ye.forEach(o),Be=I(g),Ee=c(g,"MAIN",{class:!0});var bt=v(Ee);de&&de.l(bt),bt.forEach(o),this.h()},h(){u(r,"class","hero-text svelte-60aegy"),u(b,"class","waffle-title svelte-60aegy"),u(h,"class","waffle-header svelte-60aegy"),u(m,"class","waffle-big svelte-60aegy"),u(A,"class","small svelte-60aegy"),u(D,"class","waffle-value svelte-60aegy"),u(H,"class","waffle-stat svelte-60aegy"),u(R,"class","waffle-big svelte-60aegy"),u(T,"class","waffle-value svelte-60aegy"),u(F,"class","waffle-stat svelte-60aegy"),u(w,"class","waffle-stats svelte-60aegy"),u(B,"class","waffle-label svelte-60aegy"),u(V,"class","waffle-bg svelte-60aegy"),u(d,"class","waffle-overlay svelte-60aegy"),u(i,"class","hero-content svelte-60aegy"),u(l,"class","hero-container svelte-60aegy"),u(Ce,"class","svelte-60aegy"),u(ce,"class","search-section svelte-60aegy"),u(se,"class","svelte-60aegy"),u(Q,"class","side-box svelte-60aegy"),u(pe,"class","svelte-60aegy"),u(re,"class","side-box svelte-60aegy"),u(W,"class","side-by-side-section svelte-60aegy"),u(Ee,"class","svelte-60aegy")},m(g,z){et(e,g,z),G(g,t,z),G(g,l,z);for(let he=0;he<J.length;he+=1)J[he]&&J[he].m(l,null);s(l,n),s(l,i),s(i,r),s(i,_),s(i,d),s(d,B),s(B,h),fe&&fe.m(h,null),s(h,y),s(h,b),s(b,C),s(B,M),s(B,w),s(w,H),s(H,D),s(D,m),s(m,U),s(m,S),s(D,L),s(D,A),s(H,$),we.m(H,null),s(w,x),s(w,F),s(F,T),s(T,R),s(R,O),s(R,K),s(F,q),Se.m(F,null),s(w,ee),ue&&ue.m(w,null),a[28](B),s(d,Y),s(d,V),a[29](V),s(d,j),s(d,k),a[30](k),a[31](l),G(g,ie,z),G(g,ce,z),s(ce,Ce),s(ce,Ae),et(ge,ce,null),G(g,E,z),G(g,W,z),s(W,Q),s(Q,se),s(Q,ve),et(X,Q,null),s(W,me),s(W,re),s(re,pe),s(re,oe),et(be,re,null),G(g,Be,z),G(g,Ee,z),de&&de.m(Ee,null),Le=!0},p(g,z){if(z[0]&204800){Te=Ve(g[13]);let te;for(te=0;te<Te.length;te+=1){const Ne=It(g,Te,te);J[te]?J[te].p(Ne,z):(J[te]=Nt(Ne),J[te].c(),J[te].m(l,n))}for(;te<J.length;te+=1)J[te].d(1);J.length=Te.length}g[12]?fe?fe.p(g,z):(fe=Pt(g),fe.c(),fe.m(h,y)):fe&&(fe.d(1),fe=null),(!Le||z[0]&256)&&_e(C,g[8]),(!Le||z[0]&512)&&_e(S,g[9]),Ue!==(Ue=mt(g))&&(we.d(1),we=Ue(g),we&&(we.c(),we.m(H,null))),(!Le||z[0]&1024)&&_e(K,g[10]),Re!==(Re=gt(g))&&(Se.d(1),Se=Re(g),Se&&(Se.c(),Se.m(F,null))),g[15]!==null?ue?ue.p(g,z):(ue=Ft(g),ue.c(),ue.m(w,null)):ue&&(ue.d(1),ue=null);const he={};z[0]&1&&(he.ladData=g[0]),z[0]&2&&(he.region=g[1]),z[0]&4&&(he.sortBy=g[2]),z[0]&8&&(he.maxLADValue=g[3]),z[0]&16&&(he.maxHHLADValue=g[4]),X.$set(he),g[18]?de||(de=Mt(),de.c(),de.m(Ee,null)):de&&(de.d(1),de=null)},i(g){Le||($e(e.$$.fragment,g),$e(ge.$$.fragment,g),$e(X.$$.fragment,g),$e(be.$$.fragment,g),Le=!0)},o(g){xe(e.$$.fragment,g),xe(ge.$$.fragment,g),xe(X.$$.fragment,g),xe(be.$$.fragment,g),Le=!1},d(g){g&&(o(t),o(l),o(ie),o(ce),o(E),o(W),o(Be),o(Ee)),Je(e,g),Oe(J,g),fe&&fe.d(),we.d(),Se.d(),ue&&ue.d(),a[28](null),a[29](null),a[30](null),a[31](null),Je(ge),Je(X),Je(be),de&&de.d()}}}function vl(a,e,t){let{data:l}=e,n=[...l.aggregationPerBenefit].sort((E,W)=>W.total-E.total),i=[...l.aggregationPerCapitaPerBenefit].sort((E,W)=>W.total_value-E.total_value);console.log("aggregationPerCapitaPerBenefit",i);let r=l.totalAggregation[0].total_value_per_capita,p=[],_="All",d="total",B=0,h=0,y=l.LADToName;async function b(){const E=xt({region:_,sortBy:d}),W=await Jt(E);t(0,p=W),t(3,B=Math.max(...W.map(Q=>Q.total_value))),t(4,h=Math.max(...W.map(Q=>Q.value_per_capita)))}function C(E){t(1,_=E.detail.region),t(2,d=E.detail.sortBy),b()}const M=Math.max(...i.map(E=>E.total_value)),w=Math.min(...i.map(E=>E.total_value)),H=Math.min(...i.map(E=>E.value_per_capita)),D=Math.max(...i.map(E=>E.value_per_capita));let m,U=[],S=null,L,A,Z,$,x,F,T=null,R=[],O,K=null,q=0,ee=0,Y;function V(E){const W=m.filter(X=>X.type!=="empty").map(X=>X.type),Q=Array.from(new Set(W)),se=n.reduce((X,me)=>X+me.total,0),ke=[{type:null,label:"Total Co-Benefits",icon:null,totalValue:se.toFixed(2),perCapitaValue:r.toFixed(2),percentValue:"100%"},...Q.map(X=>{const re=ht.find(J=>J.id===X)?.label??X;let pe=ut(X);const P=n.find(J=>J.co_benefit_type===X),oe=i.find(J=>J.co_benefit_type===X),be=P?.total??0,Be=oe?.value_per_capita??0,Ee=be.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Le=Be.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Te=se>0?(be/se*100).toFixed(2):0;return console.log("percentage",X,be,se,Te),{type:X,label:re,icon:pe,totalValue:Ee,perCapitaValue:Le,percentValue:Te}})];setInterval(()=>{t(17,ee=q),t(16,q=(q+1)%ke.length);const{type:X,label:me,icon:re,totalValue:pe,perCapitaValue:P,percentValue:oe}=ke[q];t(15,K=X),t(8,Z=me),t(9,$=pe),t(10,x=P),t(11,F=oe),t(12,T=re),j(E,X)},5e3);const ve=ke[0];t(15,K=ve.type),t(8,Z=ve.label),t(9,$=ve.totalValue),t(10,x=ve.perCapitaValue),t(11,F=ve.percentValue),j(E,ve.type),console.log("update display",R)}function j(E,W){if(!S)return;t(5,S.innerHTML="",S);const Q=20,se=15,ke=Math.floor(E/Q),ve=se*ke,X=n.reduce((P,oe)=>P+oe.total,0),me=[];for(const P of n){const oe=Math.round(Math.abs(P.total)/X*ve),be=P.total<0;for(let Be=0;Be<oe;Be++)me.push({type:P.co_benefit_type,negative:be})}for(;me.length<ve;)me.push({type:"empty"});me.sort((P,oe)=>P.type==="empty"?1:oe.type==="empty"?-1:P.negative&&!oe.negative?1:!P.negative&&oe.negative?-1:0),m=me.map((P,oe)=>({x:oe%se,y:Math.floor(oe/se),...P})),U=Array.from(new Set(m.map(P=>P.type).filter(P=>P!=="empty"))),t(13,R=Kt(U));const re=W??null,pe=nt({width:Q*se,height:Q*ke,margin:0,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:ht.map(P=>P.id),range:Qt,unknown:"#eee",legend:!1},marks:[Dt(m.filter(P=>!P.negative),{x:P=>P.x*Q,y:P=>P.y*Q,fill:"type",fillOpacity:P=>re&&P.type!==re?.15:1}),Dt(m.filter(P=>P.negative),{x:P=>P.x*Q,y:P=>P.y*Q,stroke:"type",strokeOpacity:P=>re&&P.type!==re?.15:1,strokeWidth:1,fill:"none"})]});L&&(t(6,L.style.width=`${Q*se}px`,L),t(6,L.style.height=`${E}px`,L)),t(5,S.innerHTML="",S),S.append(pe)}function k(E){Xt(`${Me}/location?location=${E}`)}let ie=!0;qt(()=>{b();const E=O.getBoundingClientRect().height;j(E),V(E)}),Wt(()=>{clearInterval(Y)});function ce(E){Qe[E?"unshift":"push"](()=>{A=E,t(7,A)})}function Ce(E){Qe[E?"unshift":"push"](()=>{L=E,t(6,L)})}function De(E){Qe[E?"unshift":"push"](()=>{S=E,t(5,S)})}function Ae(E){Qe[E?"unshift":"push"](()=>{O=E,t(14,O)})}const ge=E=>k(E.detail);return a.$$set=E=>{"data"in E&&t(27,l=E.data)},a.$$.update=()=>{a.$$.dirty[0]&134217728&&t(18,ie=!l)},[p,_,d,B,h,S,L,A,Z,$,x,F,T,R,O,K,q,ee,ie,i,y,C,M,w,H,D,k,l,ce,Ce,De,Ae,ge]}class Ll extends it{constructor(e){super(),st(this,e,vl,gl,Ge,{data:27},null,[-1,-1])}}export{Ll as component};
