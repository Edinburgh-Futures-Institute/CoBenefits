import{s as Me,d as _,x as xe,y as ue,i as te,b as a,z as W,p as t,g as A,c as i,e as I,q as w,j as T,h as c,v as Ve,A as fe,w as De,n as Ue,f as Be,t as Ie,B as Ne,C as Pe}from"../chunks/ChnDNINx.js";import{S as Oe,i as we,d as He,t as Ge,a as je,m as Re,c as qe,b as ze}from"../chunks/BjCzwqlE.js";import{N as Ke,e as de}from"../chunks/Cnxn5IqA.js";import{i as Ye,o as Je}from"../chunks/F40_IDQw.js";import"../chunks/s0pE0-UL.js";import{M as Ze}from"../chunks/iwSBgbwq.js";import{g as re,d as Ee,e as ye,f as Qe,h as We,i as Xe}from"../chunks/Ch4WMqoK.js";import{C as ve,a as $e,S as Ce,g as Fe,b as be,c as Le,d as et}from"../chunks/CTwa2KJw.js";function Se(f,e,l){const n=f.slice();return n[32]=e[l],n}function Ae(f,e,l){const n=f.slice();return n[29]=e[l],n}function tt(f){let e,l,n="Social Economic Factor",h,C,S=de(Ce),r=[];for(let d=0;d<S.length;d+=1)r[d]=Te(Se(f,S,d));return{c(){e=c("div"),l=c("h2"),l.textContent=n,h=T(),C=c("div");for(let d=0;d<r.length;d+=1)r[d].c();this.h()},l(d){e=i(d,"DIV",{class:!0});var u=I(e);l=i(u,"H2",{"data-svelte-h":!0}),w(l)!=="svelte-1ld89ev"&&(l.textContent=n),h=A(u),C=i(u,"DIV",{id:!0,class:!0});var s=I(C);for(let v=0;v<r.length;v+=1)r[v].l(s);s.forEach(_),u.forEach(_),this.h()},h(){t(C,"id","time"),t(C,"class","svelte-1fc578l"),t(e,"class","tabcontent svelte-1fc578l")},m(d,u){te(d,e,u),a(e,l),a(e,h),a(e,C);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(C,null)},p(d,u){if(u[0]&514){S=de(Ce);let s;for(s=0;s<S.length;s+=1){const v=Se(d,S,s);r[s]?r[s].p(v,u):(r[s]=Te(v),r[s].c(),r[s].m(C,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=S.length}},d(d){d&&_(e),De(r,d)}}}function lt(f){let e,l,n,h="Co-Benefits",C,S,r,d,u="Time",s,v,x,k,M,E="Total",y,g,F,R,P="2025-2029",q,N,Y,J,H="2030-2034",ae,Z,D,U,o="2035-2039",b,O,z,G,se="2040-2044",ee,le,X,K,oe="2045-2049",ie,ce,Q=de(ve.concat({id:"total",label:"Total"})),m=[];for(let p=0;p<Q.length;p+=1)m[p]=ke(Ae(f,Q,p));return{c(){e=c("div"),l=c("div"),n=c("h2"),n.textContent=h,C=T();for(let p=0;p<m.length;p+=1)m[p].c();S=T(),r=c("div"),d=c("h2"),d.textContent=u,s=T(),v=c("div"),x=c("label"),k=c("input"),M=c("span"),M.textContent=E,y=T(),g=c("label"),F=c("input"),R=c("span"),R.textContent=P,q=T(),N=c("label"),Y=c("input"),J=c("span"),J.textContent=H,ae=T(),Z=c("label"),D=c("input"),U=c("span"),U.textContent=o,b=T(),O=c("label"),z=c("input"),G=c("span"),G.textContent=se,ee=T(),le=c("label"),X=c("input"),K=c("span"),K.textContent=oe,this.h()},l(p){e=i(p,"DIV",{class:!0});var B=I(e);l=i(B,"DIV",{class:!0});var L=I(l);n=i(L,"H2",{"data-svelte-h":!0}),w(n)!=="svelte-uglilz"&&(n.textContent=h),C=A(L);for(let ge=0;ge<m.length;ge+=1)m[ge].l(L);L.forEach(_),S=A(B),r=i(B,"DIV",{class:!0});var j=I(r);d=i(j,"H2",{"data-svelte-h":!0}),w(d)!=="svelte-hletp"&&(d.textContent=u),s=A(j),v=i(j,"DIV",{id:!0,class:!0});var V=I(v);x=i(V,"LABEL",{class:!0});var ne=I(x);k=i(ne,"INPUT",{type:!0,name:!0,class:!0}),M=i(ne,"SPAN",{class:!0,"data-svelte-h":!0}),w(M)!=="svelte-2fqrek"&&(M.textContent=E),ne.forEach(_),y=A(V),g=i(V,"LABEL",{class:!0});var $=I(g);F=i($,"INPUT",{type:!0,name:!0,class:!0}),R=i($,"SPAN",{class:!0,"data-svelte-h":!0}),w(R)!=="svelte-177152l"&&(R.textContent=P),$.forEach(_),q=A(V),N=i(V,"LABEL",{class:!0});var pe=I(N);Y=i(pe,"INPUT",{type:!0,name:!0,class:!0}),J=i(pe,"SPAN",{class:!0,"data-svelte-h":!0}),w(J)!=="svelte-sne3j9"&&(J.textContent=H),pe.forEach(_),ae=A(V),Z=i(V,"LABEL",{class:!0});var he=I(Z);D=i(he,"INPUT",{type:!0,name:!0,class:!0}),U=i(he,"SPAN",{class:!0,"data-svelte-h":!0}),w(U)!=="svelte-13ifhof"&&(U.textContent=o),he.forEach(_),b=A(V),O=i(V,"LABEL",{class:!0});var me=I(O);z=i(me,"INPUT",{type:!0,name:!0,class:!0}),G=i(me,"SPAN",{class:!0,"data-svelte-h":!0}),w(G)!=="svelte-1pug1mv"&&(G.textContent=se),me.forEach(_),ee=A(V),le=i(V,"LABEL",{class:!0});var _e=I(le);X=i(_e,"INPUT",{type:!0,name:!0,class:!0}),K=i(_e,"SPAN",{class:!0,"data-svelte-h":!0}),w(K)!=="svelte-3f05xd"&&(K.textContent=oe),_e.forEach(_),V.forEach(_),j.forEach(_),B.forEach(_),this.h()},h(){t(l,"class","component"),t(k,"type","radio"),t(k,"name","toggle"),k.value="total",k.checked=!0,t(k,"class","svelte-1fc578l"),t(M,"class","svelte-1fc578l"),t(x,"class","time-radio svelte-1fc578l"),t(F,"type","radio"),t(F,"name","toggle"),F.value="Y2025_2029",t(F,"class","svelte-1fc578l"),t(R,"class","svelte-1fc578l"),t(g,"class","time-radio svelte-1fc578l"),t(Y,"type","radio"),t(Y,"name","toggle"),Y.value="Y2030_2034",t(Y,"class","svelte-1fc578l"),t(J,"class","svelte-1fc578l"),t(N,"class","time-radio svelte-1fc578l"),t(D,"type","radio"),t(D,"name","toggle"),D.value="Y2035_2039",t(D,"class","svelte-1fc578l"),t(U,"class","svelte-1fc578l"),t(Z,"class","time-radio svelte-1fc578l"),t(z,"type","radio"),t(z,"name","toggle"),z.value="Y2040_2044",t(z,"class","svelte-1fc578l"),t(G,"class","svelte-1fc578l"),t(O,"class","time-radio svelte-1fc578l"),t(X,"type","radio"),t(X,"name","toggle"),X.value="Y2045_2049",t(X,"class","svelte-1fc578l"),t(K,"class","svelte-1fc578l"),t(le,"class","time-radio svelte-1fc578l"),t(v,"id","time"),t(v,"class","svelte-1fc578l"),t(r,"class","component"),t(e,"class","tabcontent svelte-1fc578l")},m(p,B){te(p,e,B),a(e,l),a(l,n),a(l,C);for(let L=0;L<m.length;L+=1)m[L]&&m[L].m(l,null);a(e,S),a(e,r),a(r,d),a(r,s),a(r,v),a(v,x),a(x,k),a(x,M),a(v,y),a(v,g),a(g,F),a(g,R),a(v,q),a(v,N),a(N,Y),a(N,J),a(v,ae),a(v,Z),a(Z,D),a(Z,U),a(v,b),a(v,O),a(O,z),a(O,G),a(v,ee),a(v,le),a(le,X),a(le,K),ie||(ce=[W(k,"change",f[7]),W(F,"change",f[7]),W(Y,"change",f[7]),W(D,"change",f[7]),W(z,"change",f[7]),W(X,"change",f[7])],ie=!0)},p(p,B){if(B[0]&64){Q=de(ve.concat({id:"total",label:"Total"}));let L;for(L=0;L<Q.length;L+=1){const j=Ae(p,Q,L);m[L]?m[L].p(j,B):(m[L]=ke(j),m[L].c(),m[L].m(l,null))}for(;L<m.length;L+=1)m[L].d(1);m.length=Q.length}},d(p){p&&_(e),De(m,p),ie=!1,xe(ce)}}}function Te(f){let e,l,n,h,C=f[32].label+"",S,r,d,u;return{c(){e=c("input"),n=T(),h=c("label"),S=Ie(C),r=c("br"),this.h()},l(s){e=i(s,"INPUT",{type:!0,id:!0,name:!0,class:!0}),n=A(s),h=i(s,"LABEL",{for:!0});var v=I(h);S=Be(v,C),v.forEach(_),r=i(s,"BR",{}),this.h()},h(){t(e,"type","radio"),t(e,"id","html"),t(e,"name","fav_language"),e.value=f[32].id,e.checked=l=f[32].id==f[1],t(e,"class","svelte-1fc578l"),t(h,"for","html")},m(s,v){te(s,e,v),te(s,n,v),te(s,h,v),a(h,S),te(s,r,v),d||(u=W(e,"change",f[9]),d=!0)},p(s,v){v[0]&2&&l!==(l=s[32].id==s[1])&&(e.checked=l)},d(s){s&&(_(e),_(n),_(h),_(r)),d=!1,u()}}}function at(f){let e,l;return{c(){e=c("img"),this.h()},l(n){e=i(n,"IMG",{style:!0,class:!0,src:!0}),this.h()},h(){Pe(e,"opacity","0"),t(e,"class","icon svelte-1fc578l"),Ne(e.src,l=Fe("Air quality"))||t(e,"src",l)},m(n,h){te(n,e,h)},d(n){n&&_(e)}}}function st(f){let e,l;return{c(){e=c("img"),this.h()},l(n){e=i(n,"IMG",{alt:!0,class:!0,src:!0}),this.h()},h(){t(e,"alt","cobenefit icon"),t(e,"class","icon svelte-1fc578l"),Ne(e.src,l=Fe(f[29].id))||t(e,"src",l)},m(n,h){te(n,e,h)},d(n){n&&_(e)}}}function ke(f){let e,l,n,h,C,S=f[29].label+"",r,d,u,s,v,x;function k(y,g){return y[29].id!="total"?st:at}let E=k(f)(f);return{c(){e=c("div"),E.c(),l=T(),n=c("input"),h=T(),C=c("label"),r=Ie(S),d=T(),u=c("br"),s=T(),this.h()},l(y){e=i(y,"DIV",{class:!0});var g=I(e);E.l(g),l=A(g),n=i(g,"INPUT",{type:!0,name:!0}),h=A(g),C=i(g,"LABEL",{for:!0});var F=I(C);r=Be(F,S),F.forEach(_),d=A(g),u=i(g,"BR",{}),s=A(g),g.forEach(_),this.h()},h(){t(n,"type","radio"),t(n,"name","cobenef"),n.value=f[29].id,n.checked=!0,t(C,"for","css"),t(e,"class","checkbox-div svelte-1fc578l")},m(y,g){te(y,e,g),E.m(e,null),a(e,l),a(e,n),a(e,h),a(e,C),a(C,r),a(e,d),a(e,u),a(e,s),v||(x=W(n,"change",f[6]),v=!0)},p:Ue,d(y){y&&_(e),E.d(),v=!1,x()}}}function nt(f){let e,l,n,h,C=`<h2>MapUK</h2> <p>This interactive map allows to explore both the co-benefit values and the socio-economic factors at the local
            authorities and datazones levels.</p>`,S,r,d,u,s="",v,x,k="",M,E,y="Export",g,F,R,P,q,N,Y="CoBenefits",J,H,ae=`Socio-Economic
                    Factors`,Z,D,U,o,b,O="Local Authorities",z,G,se,ee,le="Data Zones",X,K,oe,ie;e=new Ke({});function ce(p,B){if(p[0]=="Cobenefit")return lt;if(p[0]=="SEF")return tt}let Q=ce(f),m=Q&&Q(f);return{c(){ze(e.$$.fragment),l=T(),n=c("div"),h=c("div"),h.innerHTML=C,S=T(),r=c("div"),d=c("div"),u=c("div"),u.innerHTML=s,v=T(),x=c("div"),x.innerHTML=k,M=T(),E=c("button"),E.textContent=y,g=T(),F=c("div"),R=T(),P=c("div"),q=c("div"),N=c("button"),N.textContent=Y,J=T(),H=c("button"),H.textContent=ae,Z=T(),D=c("div"),U=c("input"),o=T(),b=c("label"),b.textContent=O,z=T(),G=c("input"),se=T(),ee=c("label"),ee.textContent=le,X=T(),m&&m.c(),this.h()},l(p){qe(e.$$.fragment,p),l=A(p),n=i(p,"DIV",{class:!0});var B=I(n);h=i(B,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),w(h)!=="svelte-1bpnvd7"&&(h.innerHTML=C),S=A(B),r=i(B,"DIV",{id:!0,class:!0});var L=I(r);d=i(L,"DIV",{class:!0,id:!0});var j=I(d);u=i(j,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),w(u)!=="svelte-1ej9vmv"&&(u.innerHTML=s),v=A(j),x=i(j,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),w(x)!=="svelte-1j653gg"&&(x.innerHTML=k),M=A(j),E=i(j,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),w(E)!=="svelte-zgluur"&&(E.textContent=y),g=A(j),F=i(j,"DIV",{id:!0,class:!0}),I(F).forEach(_),j.forEach(_),R=A(L),P=i(L,"DIV",{class:!0,id:!0});var V=I(P);q=i(V,"DIV",{class:!0});var ne=I(q);N=i(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),w(N)!=="svelte-14nmzoo"&&(N.textContent=Y),J=A(ne),H=i(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),w(H)!=="svelte-xxvynj"&&(H.textContent=ae),ne.forEach(_),Z=A(V),D=i(V,"DIV",{class:!0});var $=I(D);U=i($,"INPUT",{type:!0,name:!0}),o=A($),b=i($,"LABEL",{for:!0,"data-svelte-h":!0}),w(b)!=="svelte-p8irzv"&&(b.textContent=O),z=A($),G=i($,"INPUT",{type:!0,name:!0}),se=A($),ee=i($,"LABEL",{for:!0,"data-svelte-h":!0}),w(ee)!=="svelte-1ytveqc"&&(ee.textContent=le),$.forEach(_),X=A(V),m&&m.l(V),V.forEach(_),L.forEach(_),B.forEach(_),this.h()},h(){t(h,"class","component"),t(h,"id","heaser"),t(u,"id","map"),t(u,"class","svelte-1fc578l"),t(x,"id","map-legend"),t(x,"class","svelte-1fc578l"),t(E,"id","export-button"),t(E,"class","svelte-1fc578l"),t(F,"id","tooltip"),t(F,"class","tooltip svelte-1fc578l"),t(d,"class","component column svelte-1fc578l"),t(d,"id","mapComp"),t(N,"class","tablinks svelte-1fc578l"),N.value="Cobenefit",ue(N,"active",f[0]=="Cobenefit"),t(H,"class","tablinks svelte-1fc578l"),H.value="SEF",ue(H,"active",f[0]=="SEF"),t(q,"class","tab svelte-1fc578l"),t(U,"type","radio"),t(U,"name","granularity"),U.value="LAD",U.checked=!0,t(b,"for","LAD"),t(G,"type","radio"),t(G,"name","granularity"),G.value="LSOA",t(ee,"for","LSOA"),t(D,"class","component"),t(P,"class","component column svelte-1fc578l"),t(P,"id","control-panel"),t(r,"id","map-row"),t(r,"class","row svelte-1fc578l"),t(n,"class","page-container svelte-1fc578l")},m(p,B){Re(e,p,B),te(p,l,B),te(p,n,B),a(n,h),a(n,S),a(n,r),a(r,d),a(d,u),f[19](u),a(d,v),a(d,x),f[20](x),a(d,M),a(d,E),f[21](E),a(d,g),a(d,F),a(r,R),a(r,P),a(P,q),a(q,N),a(q,J),a(q,H),a(P,Z),a(P,D),a(D,U),a(D,o),a(D,b),a(D,z),a(D,G),a(D,se),a(D,ee),a(P,X),m&&m.m(P,null),f[22](n),K=!0,oe||(ie=[W(E,"click",rt),W(N,"click",f[8]),W(H,"click",f[8]),W(U,"change",f[10]),W(G,"change",f[10])],oe=!0)},p(p,B){(!K||B[0]&1)&&ue(N,"active",p[0]=="Cobenefit"),(!K||B[0]&1)&&ue(H,"active",p[0]=="SEF"),Q===(Q=ce(p))&&m?m.p(p,B):(m&&m.d(1),m=Q&&Q(p),m&&(m.c(),m.m(P,null)))},i(p){K||(je(e.$$.fragment,p),K=!0)},o(p){Ge(e.$$.fragment,p),K=!1},d(p){p&&(_(l),_(n)),He(e,p),f[19](null),f[20](null),f[21](null),m&&m.d(),f[22](null),oe=!1,xe(ie)}}}function rt(){const e=document.getElementsByClassName("maplibregl-canvas")[0].toDataURL("image/png");var l=document.createElement("a");l.download="map.png",l.href=e,l.dataset.downloadurl=["image/png",l.download,l.href].join(":"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function ot(f,e,l){let{data:n}=e,h,C,S,r,d,u,s="Cobenefit",v=!1,x="BNZ",k=ve.map(o=>o.id),M="total",E="LAD",y="EPC",g;function F(){if(u.makeColorScale(!1),s=="SEF"&&be.includes(y)){const o=Ye("white","black");let b=Object.values(Le[y]);const O=b.map((G,se)=>o(se/(b.length-1)));let z=Je().domain(b).range(O);u.setColorScale(z)}S=u.legend(R()),l(4,r.innerHTML="",r),r.append(S)}function R(){if(s=="SEF")return`${Ce.filter(o=>o.id==y)[0].label} (${et(y)})`;if(s=="Cobenefit")return"Cobenefits (£ per capita)"}Ve(async()=>{let o;E=="LAD"?o=await re(Ee(Array.from(k),"UK",M)):E=="LSOA"&&(o=await re(ye(Array.from(k),x,M))),o.forEach(b=>{b.value_per_capita=b.value_per_capita*1e6}),l(12,u=new Ze(o,E,C,"value_per_capita",!0,"Lookup_Value",!0)),u.initMap(),u.setTooltipCb(H),S=u.legend(R()),r.append(S)});const P=o=>{const b=o.currentTarget.value;b=="total"?l(15,k=ve.map(O=>O.id)):l(15,k=[b])},q=o=>{const b=o.currentTarget.value;l(16,M=b)};function N(o,b){l(0,s=o.currentTarget.value)}const Y=o=>{l(1,y=o.currentTarget.value)},J=o=>{u.removeLayers(),u.removeSources(),l(17,E=o.currentTarget.value),l(12,u.granularity=E,u),E=="LSOA"?l(12,u.border=!1,u):l(12,u.border=!0,u),l(13,v=!0)},H=o=>{if(s=="SEF")return be.includes(y)?`Mode value is ${Le[y][o]}`:`Mean value is ${o.toFixed(2)}`;if(s=="Cobenefit")return`${o.toFixed(2)}£ per capita.`};function ae(o){fe[o?"unshift":"push"](()=>{C=o,l(3,C)})}function Z(o){fe[o?"unshift":"push"](()=>{r=o,l(4,r)})}function D(o){fe[o?"unshift":"push"](()=>{d=o,l(5,d)})}function U(o){fe[o?"unshift":"push"](()=>{h=o,l(2,h)})}return f.$$set=o=>{"data"in o&&l(11,n=o.data)},f.$$.update=()=>{if(f.$$.dirty[0]&520195&&u?.loaded){if(s=="Cobenefit"){if(l(12,u.dataKey="value_per_capita",u),E=="LAD")l(18,g=re(Ee(Array.from(k),"UK",M)));else if(E=="LSOA"){let o;k.length==11?o=[]:o=k,l(18,g=re(ye(o,x,M)))}}else l(0,s="SEF")&&(l(12,u.dataKey="val",u),E=="LAD"?be.includes(y)?l(18,g=re(Qe(y))):l(18,g=re(We(y))):E=="LSOA"&&l(18,g=re(Xe(y))));g.then(o=>{s=="Cobenefit"&&o.forEach(O=>{O.value_per_capita=O.value_per_capita*1e6});let b;s=="Cobenefit"?k.length==1?(b=JSON.parse(JSON.stringify($e(k[0]))),b.shift(),b=b.reverse()):b=["red","white","black"]:b=["white","black"],u.update(o,s,v,b),F(),l(13,v=!1)})}},[s,y,h,C,r,d,P,q,N,Y,J,n,u,v,x,k,M,E,g,ae,Z,D,U]}class mt extends Oe{constructor(e){super(),we(this,e,ot,nt,Me,{data:11},null,[-1,-1])}}export{mt as component};
