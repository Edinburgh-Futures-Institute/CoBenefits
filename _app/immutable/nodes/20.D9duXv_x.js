import{s as Tl,a as D,e as f,t as I,g as A,c as d,b as _,p as re,d as L,f as n,q as u,v as ie,i as C,h as r,x as nl,y as Fl,z as Pl,n as Pe,H as Bl,A as xl,w as Hl,j as Fe,B as Ve,r as Wt}from"../chunks/scheduler.CM2kgFFE.js";import{S as Rl,i as Nl,c as ol,b as cl,m as ul,t as fl,a as dl,d as vl}from"../chunks/index.BdkIKoLm.js";import{N as Ol,e as bt}from"../chunks/NavigationBar.CFUb0EZO.js";import"../chunks/transform.BNP73y-7.js";import{aw as jl,ap as Nt,aq as zl,t as hl,au as Wl,X as pl,ax as _l,ay as Gl,az as Ul,aA as ml,G as Ne,P as Yl,K as Oe,J as at,R as ql,H as kt,Q as Et}from"../chunks/index.gHFfw6XA.js";import{b as Jl}from"../chunks/paths.xPwmG4u-.js";import{M as Xl}from"../chunks/mapUK.0-O1uRri.js";import{l as Kl,m as Ql,n as Zl,o as $l,p as ea,q as ta,i as st,d as ze,s as yt,t as Ot,h as gl,e as la}from"../chunks/globals.BMR0Okvs.js";import{g as jt,o as aa,r as sa,f as ra}from"../chunks/duckdb.Co2YYQIk.js";import{p as Dt}from"../chunks/per_capita.COcMrZFY.js";import{F as ia}from"../chunks/Footer.Bvl_pHdR.js";import{n as na}from"../chunks/nice.ZYjiKfzK.js";import{t as oa,b as ca}from"../chunks/bin.4FhIxFiV.js";import{d as je}from"../chunks/dot.CFFCJmC7.js";import{b as ua}from"../chunks/bar.DO1Cp6Am.js";var fa=Array.prototype,da=fa.slice;function zt(l){return()=>l}function bl(){var l=jl,e=Nt,t=oa;function s(i){Array.isArray(i)||(i=Array.from(i));var a,c=i.length,p,v,m=new Array(c);for(a=0;a<c;++a)m[a]=l(i[a],a,i);var g=e(m),k=g[0],b=g[1],T=t(m,k,b);if(!Array.isArray(T)){const y=b,B=+T;if(e===Nt&&([k,b]=na(k,b,B)),T=zl(k,b,B),T[0]<=k&&(v=hl(k,b,B)),T[T.length-1]>=b)if(y>=b&&e===Nt){const M=hl(k,b,B);isFinite(M)&&(M>0?b=(Math.floor(b/M)+1)*M:M<0&&(b=(Math.ceil(b*-M)+1)/-M))}else T.pop()}for(var w=T.length,E=0,F=w;T[E]<=k;)++E;for(;T[F-1]>b;)--F;(E||F<w)&&(T=T.slice(E,F),w=F-E);var x=new Array(w+1),O;for(a=0;a<=w;++a)O=x[a]=[],O.x0=a>0?T[a-1]:k,O.x1=a<w?T[a]:b;if(isFinite(v)){if(v>0)for(a=0;a<c;++a)(p=m[a])!=null&&k<=p&&p<=b&&x[Math.min(w,Math.floor((p-k)/v))].push(i[a]);else if(v<0){for(a=0;a<c;++a)if((p=m[a])!=null&&k<=p&&p<=b){const y=Math.floor((k-p)*v);x[Math.min(w,y+(T[y]<=p))].push(i[a])}}}else for(a=0;a<c;++a)(p=m[a])!=null&&k<=p&&p<=b&&x[Wl(T,p,0,w)].push(i[a]);return x}return s.value=function(i){return arguments.length?(l=typeof i=="function"?i:zt(i),s):l},s.domain=function(i){return arguments.length?(e=typeof i=="function"?i:zt([i[0],i[1]]),s):e},s.thresholds=function(i){return arguments.length?(t=typeof i=="function"?i:zt(Array.isArray(i)?da.call(i):i),s):t},s}const va=""+new URL("../assets/negative.BhphYhmj.png",import.meta.url).href;function kl(l,e,t){const s=l.slice();return s[55]=e[t],s[56]=e,s[57]=t,s}function El(l,e,t){const s=l.slice();return s[55]=e[t],s}function ha(l){let e;return{c(){e=f("div"),this.h()},l(t){e=d(t,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){u(e,"class","plot svelte-1v4er05")},m(t,s){C(t,e,s),l[27](e)},p:Pe,d(t){t&&n(e),l[27](null)}}}function pa(l){let e;return{c(){e=f("div"),this.h()},l(t){e=d(t,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){u(e,"class","plot svelte-1v4er05")},m(t,s){C(t,e,s),l[26](e)},p:Pe,d(t){t&&n(e),l[26](null)}}}function _a(l){let e,t,s=Se(l[9],l[21])+"",i,a,c,p;return{c(){e=I("Max value: "),t=f("strong"),i=I(s),a=I("("),c=I(l[11]),p=I(")")},l(v){e=L(v,"Max value: "),t=d(v,"STRONG",{});var m=_(t);i=L(m,s),m.forEach(n),a=L(v,"("),c=L(v,l[11]),p=L(v,")")},m(v,m){C(v,e,m),C(v,t,m),r(t,i),C(v,a,m),C(v,c,m),C(v,p,m)},p(v,m){m[0]&512&&s!==(s=Se(v[9],v[21])+"")&&Fe(i,s),m[0]&2048&&Fe(c,v[11])},d(v){v&&(n(e),n(t),n(a),n(c),n(p))}}}function ma(l){let e;return{c(){e=I("-")},l(t){e=L(t,"-")},m(t,s){C(t,e,s)},p:Pe,d(t){t&&n(e)}}}function ga(l){let e,t,s=Se(l[7],l[21])+"",i;return{c(){e=I("Average value: "),t=f("strong"),i=I(s),this.h()},l(a){e=L(a,"Average value: "),t=d(a,"STRONG",{style:!0});var c=_(t);i=L(c,s),c.forEach(n),this.h()},h(){ie(t,"color","#BD210E")},m(a,c){C(a,e,c),C(a,t,c),r(t,i)},p(a,c){c[0]&128&&s!==(s=Se(a[7],a[21])+"")&&Fe(i,s)},d(a){a&&(n(e),n(t))}}}function ba(l){let e,t,s=Se(l[8],l[21])+"",i;return{c(){e=I("Most common category: "),t=f("strong"),i=I(s),this.h()},l(a){e=L(a,"Most common category: "),t=d(a,"STRONG",{style:!0});var c=_(t);i=L(c,s),c.forEach(n),this.h()},h(){ie(t,"color","#BD210E")},m(a,c){C(a,e,c),C(a,t,c),r(t,i)},p(a,c){c[0]&256&&s!==(s=Se(a[8],a[21])+"")&&Fe(i,s)},d(a){a&&(n(e),n(t))}}}function ka(l){let e,t,s=Se(l[10],l[21])+"",i,a,c,p;return{c(){e=I("Min value: "),t=f("strong"),i=I(s),a=I("("),c=I(l[12]),p=I(")")},l(v){e=L(v,"Min value: "),t=d(v,"STRONG",{});var m=_(t);i=L(m,s),m.forEach(n),a=L(v,"("),c=L(v,l[12]),p=L(v,")")},m(v,m){C(v,e,m),C(v,t,m),r(t,i),C(v,a,m),C(v,c,m),C(v,p,m)},p(v,m){m[0]&1024&&s!==(s=Se(v[10],v[21])+"")&&Fe(i,s),m[0]&4096&&Fe(c,v[12])},d(v){v&&(n(e),n(t),n(a),n(c),n(p))}}}function Ea(l){let e;return{c(){e=I("-")},l(t){e=L(t,"-")},m(t,s){C(t,e,s)},p:Pe,d(t){t&&n(e)}}}function yl(l){let e,t,s,i,a;return{c(){e=f("div"),t=f("div"),s=f("span"),i=I(l[18]),a=I(" >>"),this.h()},l(c){e=d(c,"DIV",{class:!0});var p=_(e);t=d(p,"DIV",{class:!0});var v=_(t);s=d(v,"SPAN",{class:!0});var m=_(s);i=L(m,l[18]),a=L(m," >>"),m.forEach(n),v.forEach(n),p.forEach(n),this.h()},h(){u(s,"class","mini-header-text"),u(t,"class","mini-header-content"),u(e,"class","mini-header")},m(c,p){C(c,e,p),r(e,t),r(t,s),r(s,i),r(s,a)},p:Pe,d(c){c&&n(e)}}}function ya(l){let e;return{c(){e=f("div"),this.h()},l(t){e=d(t,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){u(e,"class","plot svelte-1v4er05")},m(t,s){C(t,e,s),l[29](e)},p:Pe,d(t){t&&n(e),l[29](null)}}}function Da(l){let e;return{c(){e=f("div"),this.h()},l(t){e=d(t,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){u(e,"class","plot svelte-1v4er05")},m(t,s){C(t,e,s),l[28](e)},p:Pe,d(t){t&&n(e),l[28](null)}}}function Dl(l){let e,t,s=l[13].legend(l[22]).outerHTML+"";return{c(){e=f("div"),t=new Bl(!1),this.h()},l(i){e=d(i,"DIV",{id:!0});var a=_(e);t=xl(a,!1),a.forEach(n),this.h()},h(){t.a=null,u(e,"id","legend")},m(i,a){C(i,e,a),t.m(s,e)},p(i,a){a[0]&8192&&s!==(s=i[13].legend(i[22]).outerHTML+"")&&t.p(s)},d(i){i&&n(e)}}}function Al(l){let e,t,s,i,a=l[55].def+"",c,p,v,m,g,k,b,T="here",w,E,F=l[55].id.toLowerCase()+"",x,O,y;return{c(){e=f("div"),t=f("div"),s=f("div"),i=D(),c=I(a),p=D(),v=f("br"),m=D(),g=f("div"),k=I("Click "),b=f("a"),b.textContent=T,w=I(` for the 
                                `),E=f("span"),x=I(F),O=D(),y=I("report page."),this.h()},l(B){e=d(B,"DIV",{class:!0});var M=_(e);t=d(M,"DIV",{class:!0});var H=_(t);s=d(H,"DIV",{style:!0}),_(s).forEach(n),i=A(H),c=L(H,a),p=A(H),v=d(H,"BR",{}),m=A(H),g=d(H,"DIV",{class:!0});var J=_(g);k=L(J,"Click "),b=d(J,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0,"data-svelte-h":!0}),re(b)!=="svelte-gjrxnt"&&(b.textContent=T),w=L(J,` for the 
                                `),E=d(J,"SPAN",{style:!0});var W=_(E);x=L(W,F),O=A(W),W.forEach(n),y=L(J,"report page."),J.forEach(n),H.forEach(n),M.forEach(n),this.h()},h(){ie(s,"height","0.8em"),u(b,"class","link"),u(b,"href",Jl+"/cobenefit?cobenefit="+l[55].id),u(b,"target","_blank"),u(b,"rel","noopener noreferrer"),ie(b,"color",st(l[55].id)),ie(E,"color",st(l[55].id)),u(g,"class","link-box svelte-1v4er05"),u(t,"class","legend-description svelte-1v4er05"),u(e,"class","legend-description-box svelte-1v4er05")},m(B,M){C(B,e,M),r(e,t),r(t,s),r(t,i),r(t,c),r(t,p),r(t,v),r(t,m),r(t,g),r(g,k),r(g,b),r(g,w),r(g,E),r(E,x),r(E,O),r(g,y)},d(B){B&&n(e)}}}function Vl(l){let e,t,s,i,a,c=l[55].label+"",p,v,m,g,k=l[16].has(l[55].id)?"▲":"▼",b,T,w=l[16].has(l[55].id),E,F,x;function O(){return l[31](l[55])}let y=w&&Al(l);return{c(){e=f("div"),t=f("div"),s=f("span"),i=D(),a=f("span"),p=I(c),m=D(),g=f("span"),b=I(k),T=D(),y&&y.c(),E=D(),this.h()},l(B){e=d(B,"DIV",{class:!0});var M=_(e);t=d(M,"DIV",{class:!0,style:!0});var H=_(t);s=d(H,"SPAN",{class:!0,style:!0}),_(s).forEach(n),i=A(H),a=d(H,"SPAN",{class:!0});var J=_(a);p=L(J,c),J.forEach(n),m=A(H),g=d(H,"SPAN",{class:!0});var W=_(g);b=L(W,k),W.forEach(n),H.forEach(n),T=A(M),y&&y.l(M),E=A(M),M.forEach(n),this.h()},h(){u(s,"class","legend-color svelte-1v4er05"),ie(s,"background-color",st(l[55].id)),u(a,"class",v="legend-text "+(l[16].has(l[55].id)?"expanded":"")+" svelte-1v4er05"),u(g,"class","toggle-icon svelte-1v4er05"),u(t,"class","legend-header svelte-1v4er05"),ie(t,"cursor","pointer"),u(e,"class","legend-item svelte-1v4er05")},m(B,M){C(B,e,M),r(e,t),r(t,s),r(t,i),r(t,a),r(a,p),r(t,m),r(t,g),r(g,b),r(e,T),y&&y.m(e,null),r(e,E),F||(x=Hl(t,"click",O),F=!0)},p(B,M){l=B,M[0]&65536&&v!==(v="legend-text "+(l[16].has(l[55].id)?"expanded":"")+" svelte-1v4er05")&&u(a,"class",v),M[0]&65536&&k!==(k=l[16].has(l[55].id)?"▲":"▼")&&Fe(b,k),M[0]&65536&&(w=l[16].has(l[55].id)),w?y||(y=Al(l),y.c(),y.m(e,E)):y&&(y.d(1),y=null)},d(B){B&&n(e),y&&y.d(),F=!1,x()}}}function Aa(l){let e,t;return{c(){e=f("img"),this.h()},l(s){e=d(s,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){u(e,"class","sm-icon svelte-1v4er05"),Wt(e.src,t=Dt)||u(e,"src",t),u(e,"alt","icon")},m(s,i){C(s,e,i)},d(s){s&&n(e)}}}function Va(l){let e,t,s,i,a;return{c(){e=f("img"),s=D(),i=f("img"),this.h()},l(c){e=d(c,"IMG",{class:!0,src:!0,alt:!0}),s=A(c),i=d(c,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){u(e,"class","sm-icon svelte-1v4er05"),Wt(e.src,t=Dt)||u(e,"src",t),u(e,"alt","icon"),u(i,"class","sm-icon svelte-1v4er05"),Wt(i.src,a=va)||u(i,"src",a),u(i,"alt","icon")},m(c,p){C(c,e,p),C(c,s,p),C(c,i,p)},d(c){c&&(n(e),n(s),n(i))}}}function Sa(l){let e,t=l[55];const s=()=>l[33](e,t),i=()=>l[33](null,t);return{c(){e=f("div"),this.h()},l(a){e=d(a,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){u(e,"class","plot svelte-1v4er05")},m(a,c){C(a,e,c),s()},p(a,c){l=a,t!==l[55]&&(i(),t=l[55],s())},d(a){a&&n(e),i()}}}function Ia(l){let e,t=l[55];const s=()=>l[32](e,t),i=()=>l[32](null,t);return{c(){e=f("div"),this.h()},l(a){e=d(a,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){u(e,"class","plot svelte-1v4er05")},m(a,c){C(a,e,c),s()},p(a,c){l=a,t!==l[55]&&(i(),t=l[55],s())},d(a){a&&n(e),i()}}}function Sl(l){let e,t,s,i=l[55].label+"",a,c,p,v;function m(E,F){return E[55].id=="Hassle costs"||E[55].id=="Road repairs"||E[55].id=="Road safety"||E[55].id=="Congestion"||E[55].id=="Excess heat"?Va:Aa}let k=m(l)(l);function b(E,F){return ze.includes(E[17])?Ia:Sa}let w=b(l)(l);return{c(){e=f("div"),t=f("div"),s=f("h3"),a=I(i),c=D(),k.c(),p=D(),w.c(),v=D(),this.h()},l(E){e=d(E,"DIV",{class:!0});var F=_(e);t=d(F,"DIV",{class:!0});var x=_(t);s=d(x,"H3",{class:!0});var O=_(s);a=L(O,i),O.forEach(n),c=A(x),k.l(x),x.forEach(n),p=A(F),w.l(F),v=A(F),F.forEach(n),this.h()},h(){u(s,"class","component-chart-title svelte-1v4er05"),u(t,"class","component-chart-title-container svelte-1v4er05"),u(e,"class","plot-container svelte-1v4er05")},m(E,F){C(E,e,F),r(e,t),r(t,s),r(s,a),r(t,c),k.m(t,null),r(e,p),w.m(e,null),r(e,v)},p(E,F){w.p(E,F)},d(E){E&&n(e),k.d(),w.d()}}}function La(l){let e,t,s,i,a,c,p,v="SEF Report",m,g,k,b,T,w,E,F,x,O,y,B,M,H,J,W,j,te,me,ne,de,rt='<p class="section-subtitle svelte-1v4er05">Overview</p>',Z,$,G,oe,We,ge,Ge,ve,it="Each point in the chart below represents a UK data zone (LSOA).",Ue,he,nt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Dt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each AREA.</span></div>`,Ye,ce,z,be,qe,Je,pe,ot="Scroll for zooming in and out.",Xe,_e,ct=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Dt}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,Ke,o,R,S,X,N,Gt='<p class="section-subtitle svelte-1v4er05">By Co-benefits</p>',At,ue,U,ke,Vt,Ee,Ut=l[18].toLowerCase()+"",St,It,Lt,Ie,Yt="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",wt,Ct,Mt,Le,qt='<div class="tooltip-wrapper"><span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>',Tt,ee,Be,Jt="Co-benefits:",Ft,Pt,Qe,Bt,xt,ye,Xt='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',Ht,we,De,ut,Ce,ft;e=new Ol({});function Il(h,P){return ze.includes(h[17])?pa:ha}let Ze=Il(l)(l);function Ll(h,P){return ze.includes(h[17])?ma:_a}let $e=Ll(l)(l);function wl(h,P){return ze.includes(h[17])?ba:ga}let et=wl(l)(l);function Cl(h,P){return ze.includes(h[17])?Ea:ka}let tt=Cl(l)(l),K=l[15]&&yl(l);function Ml(h,P){return ze.includes(h[17])?Da:ya}let lt=Ml(l)(l),Q=l[13]&&Dl(l),xe=bt(yt),Y=[];for(let h=0;h<xe.length;h+=1)Y[h]=Vl(El(l,xe,h));let He=bt(yt),q=[];for(let h=0;h<He.length;h+=1)q[h]=Sl(kl(l,He,h));return Ce=new ia({}),{c(){ol(e.$$.fragment),t=D(),s=f("div"),i=f("div"),a=f("div"),c=f("div"),p=f("p"),p.textContent=v,m=D(),g=f("div"),k=f("h1"),b=I(l[20]),T=D(),w=f("p"),E=I(l[19]),F=D(),x=f("div"),Ze.c(),O=D(),y=f("div"),B=f("p"),$e.c(),M=D(),H=f("p"),et.c(),J=D(),W=f("p"),tt.c(),j=D(),K&&K.c(),te=D(),me=f("div"),ne=f("div"),de=f("div"),de.innerHTML=rt,Z=D(),$=f("div"),G=f("div"),oe=f("h3"),We=I(l[18]),ge=I(" against per capita co-benefit values (£, thousand)"),Ge=D(),ve=f("p"),ve.textContent=it,Ue=D(),he=f("div"),he.innerHTML=nt,Ye=D(),lt.c(),ce=D(),z=f("div"),be=f("h3"),qe=I(l[18]),Je=D(),pe=f("p"),pe.textContent=ot,Xe=D(),_e=f("div"),_e.innerHTML=ct,Ke=D(),Q&&Q.c(),o=D(),R=f("div"),S=D(),X=f("div"),N=f("div"),N.innerHTML=Gt,At=D(),ue=f("div"),U=f("div"),ke=f("h3"),Vt=I("Plotting "),Ee=f("span"),St=I(Ut),It=I(" against the gain/loss (£, thousand) per capita for each co-benefit"),Lt=D(),Ie=f("p"),Ie.textContent=Yt,wt=D(),Ct=f("br"),Mt=D(),Le=f("div"),Le.innerHTML=qt,Tt=D(),ee=f("div"),Be=f("strong"),Be.textContent=Jt,Ft=f("br"),Pt=I(`Expand for detailed explanation
                    `),Qe=f("div"),Bt=D();for(let h=0;h<Y.length;h+=1)Y[h].c();xt=D(),ye=f("div"),ye.innerHTML=Xt,Ht=D(),we=f("div"),De=f("div");for(let h=0;h<q.length;h+=1)q[h].c();ut=D(),ol(Ce.$$.fragment),this.h()},l(h){cl(e.$$.fragment,h),t=A(h),s=d(h,"DIV",{class:!0});var P=_(s);i=d(P,"DIV",{class:!0});var V=_(i);a=d(V,"DIV",{class:!0});var le=_(a);c=d(le,"DIV",{class:!0});var dt=_(c);p=d(dt,"P",{class:!0,"data-svelte-h":!0}),re(p)!=="svelte-3h7aqf"&&(p.textContent=v),m=A(dt),g=d(dt,"DIV",{class:!0});var vt=_(g);k=d(vt,"H1",{class:!0});var Kt=_(k);b=L(Kt,l[20]),Kt.forEach(n),T=A(vt),w=d(vt,"P",{class:!0});var Qt=_(w);E=L(Qt,l[19]),Qt.forEach(n),vt.forEach(n),dt.forEach(n),F=A(le),x=d(le,"DIV",{class:!0});var Zt=_(x);Ze.l(Zt),Zt.forEach(n),O=A(le),y=d(le,"DIV",{class:!0});var Re=_(y);B=d(Re,"P",{class:!0});var $t=_(B);$e.l($t),$t.forEach(n),M=A(Re),H=d(Re,"P",{class:!0});var el=_(H);et.l(el),el.forEach(n),J=A(Re),W=d(Re,"P",{class:!0});var tl=_(W);tt.l(tl),tl.forEach(n),Re.forEach(n),le.forEach(n),V.forEach(n),j=A(P),K&&K.l(P),te=A(P),me=d(P,"DIV",{class:!0});var ll=_(me);ne=d(ll,"DIV",{id:!0});var ht=_(ne);de=d(ht,"DIV",{class:!0,"data-svelte-h":!0}),re(de)!=="svelte-ll1i43"&&(de.innerHTML=rt),Z=A(ht),$=d(ht,"DIV",{id:!0,class:!0});var pt=_($);G=d(pt,"DIV",{class:!0});var Ae=_(G);oe=d(Ae,"H3",{class:!0});var Rt=_(oe);We=L(Rt,l[18]),ge=L(Rt," against per capita co-benefit values (£, thousand)"),Rt.forEach(n),Ge=A(Ae),ve=d(Ae,"P",{class:!0,"data-svelte-h":!0}),re(ve)!=="svelte-1ozkrs5"&&(ve.textContent=it),Ue=A(Ae),he=d(Ae,"DIV",{class:!0,"data-svelte-h":!0}),re(he)!=="svelte-xpsz06"&&(he.innerHTML=nt),Ye=A(Ae),lt.l(Ae),Ae.forEach(n),ce=A(pt),z=d(pt,"DIV",{class:!0});var fe=_(z);be=d(fe,"H3",{class:!0});var al=_(be);qe=L(al,l[18]),al.forEach(n),Je=A(fe),pe=d(fe,"P",{class:!0,"data-svelte-h":!0}),re(pe)!=="svelte-1ask2se"&&(pe.textContent=ot),Xe=A(fe),_e=d(fe,"DIV",{class:!0,"data-svelte-h":!0}),re(_e)!=="svelte-1dxsuae"&&(_e.innerHTML=ct),Ke=A(fe),Q&&Q.l(fe),o=A(fe),R=d(fe,"DIV",{id:!0,class:!0}),_(R).forEach(n),fe.forEach(n),pt.forEach(n),ht.forEach(n),ll.forEach(n),S=A(P),X=d(P,"DIV",{id:!0});var _t=_(X);N=d(_t,"DIV",{class:!0,"data-svelte-h":!0}),re(N)!=="svelte-1av3fse"&&(N.innerHTML=Gt),At=A(_t),ue=d(_t,"DIV",{id:!0,class:!0,style:!0});var mt=_(ue);U=d(mt,"DIV",{id:!0,class:!0});var ae=_(U);ke=d(ae,"H3",{class:!0});var gt=_(ke);Vt=L(gt,"Plotting "),Ee=d(gt,"SPAN",{style:!0});var sl=_(Ee);St=L(sl,Ut),sl.forEach(n),It=L(gt," against the gain/loss (£, thousand) per capita for each co-benefit"),gt.forEach(n),Lt=A(ae),Ie=d(ae,"P",{class:!0,"data-svelte-h":!0}),re(Ie)!=="svelte-1h97e3k"&&(Ie.textContent=Yt),wt=A(ae),Ct=d(ae,"BR",{}),Mt=A(ae),Le=d(ae,"DIV",{class:!0,"data-svelte-h":!0}),re(Le)!=="svelte-nlkeox"&&(Le.innerHTML=qt),Tt=A(ae),ee=d(ae,"DIV",{id:!0,class:!0});var Me=_(ee);Be=d(Me,"STRONG",{"data-svelte-h":!0}),re(Be)!=="svelte-1qu96kx"&&(Be.textContent=Jt),Ft=d(Me,"BR",{}),Pt=L(Me,`Expand for detailed explanation
                    `),Qe=d(Me,"DIV",{style:!0}),_(Qe).forEach(n),Bt=A(Me);for(let Te=0;Te<Y.length;Te+=1)Y[Te].l(Me);Me.forEach(n),xt=A(ae),ye=d(ae,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),re(ye)!=="svelte-11g4vkg"&&(ye.innerHTML=Xt),ae.forEach(n),Ht=A(mt),we=d(mt,"DIV",{id:!0,class:!0});var rl=_(we);De=d(rl,"DIV",{id:!0,class:!0});var il=_(De);for(let Te=0;Te<q.length;Te+=1)q[Te].l(il);il.forEach(n),rl.forEach(n),mt.forEach(n),_t.forEach(n),P.forEach(n),ut=A(h),cl(Ce.$$.fragment,h),this.h()},h(){u(p,"class","page-subtitle svelte-1v4er05"),u(k,"class","page-title svelte-1v4er05"),u(w,"class","definition"),u(g,"class","title-container"),u(c,"class","header-text svelte-1v4er05"),u(x,"class","header-vis svelte-1v4er05"),u(B,"class","definition-stat svelte-1v4er05"),u(H,"class","definition-stat svelte-1v4er05"),u(W,"class","definition-stat svelte-1v4er05"),u(y,"class","header-stats svelte-1v4er05"),u(a,"class","header-content svelte-1v4er05"),u(i,"class","section header svelte-1v4er05"),u(de,"class","section-header"),u(oe,"class","component-title"),u(ve,"class","description"),u(he,"class","aggregation-icon-container"),u(G,"class","component column"),u(be,"class","component-title"),u(pe,"class","description"),u(_e,"class","aggregation-icon-container2 svelte-1v4er05"),u(R,"id","map"),u(R,"class","svelte-1v4er05"),u(z,"class","component column"),u($,"id","vis-block"),u($,"class","svelte-1v4er05"),u(ne,"id","overview"),u(me,"class","section"),u(N,"class","section-header"),ie(Ee,"background-color","#555"),ie(Ee,"padding","0 1px"),ie(Ee,"color","#f9f9f9"),u(ke,"class","component-title"),u(Ie,"class","explanation"),u(Le,"class","aggregation-icon-container2 svelte-1v4er05"),ie(Qe,"height","0.8em"),u(ee,"id","main-legend"),u(ee,"class","legend-box svelte-1v4er05"),u(ye,"id","se-disclaimer"),u(ye,"class","disclaimer-box svelte-1v4er05"),u(U,"id","se-title"),u(U,"class","svelte-1v4er05"),u(De,"id","multiple-plots"),u(De,"class","svelte-1v4er05"),u(we,"id","multiple-comp"),u(we,"class","svelte-1v4er05"),u(ue,"id","se-block"),u(ue,"class","component svelte-1v4er05"),ie(ue,"margin-left","1rem"),u(X,"id","compare"),u(s,"class","page-container")},m(h,P){ul(e,h,P),C(h,t,P),C(h,s,P),r(s,i),r(i,a),r(a,c),r(c,p),r(c,m),r(c,g),r(g,k),r(k,b),r(g,T),r(g,w),r(w,E),r(a,F),r(a,x),Ze.m(x,null),r(a,O),r(a,y),r(y,B),$e.m(B,null),r(y,M),r(y,H),et.m(H,null),r(y,J),r(y,W),tt.m(W,null),r(s,j),K&&K.m(s,null),r(s,te),r(s,me),r(me,ne),r(ne,de),r(ne,Z),r(ne,$),r($,G),r(G,oe),r(oe,We),r(oe,ge),r(G,Ge),r(G,ve),r(G,Ue),r(G,he),r(G,Ye),lt.m(G,null),r($,ce),r($,z),r(z,be),r(be,qe),r(z,Je),r(z,pe),r(z,Xe),r(z,_e),r(z,Ke),Q&&Q.m(z,null),r(z,o),r(z,R),l[30](R),r(s,S),r(s,X),r(X,N),r(X,At),r(X,ue),r(ue,U),r(U,ke),r(ke,Vt),r(ke,Ee),r(Ee,St),r(ke,It),r(U,Lt),r(U,Ie),r(U,wt),r(U,Ct),r(U,Mt),r(U,Le),r(U,Tt),r(U,ee),r(ee,Be),r(ee,Ft),r(ee,Pt),r(ee,Qe),r(ee,Bt);for(let V=0;V<Y.length;V+=1)Y[V]&&Y[V].m(ee,null);r(U,xt),r(U,ye),r(ue,Ht),r(ue,we),r(we,De);for(let V=0;V<q.length;V+=1)q[V]&&q[V].m(De,null);l[34](s),C(h,ut,P),ul(Ce,h,P),ft=!0},p(h,P){if(Ze.p(h,P),$e.p(h,P),et.p(h,P),tt.p(h,P),h[15]?K?K.p(h,P):(K=yl(h),K.c(),K.m(s,te)):K&&(K.d(1),K=null),lt.p(h,P),h[13]?Q?Q.p(h,P):(Q=Dl(h),Q.c(),Q.m(z,o)):Q&&(Q.d(1),Q=null),P[0]&8454144){xe=bt(yt);let V;for(V=0;V<xe.length;V+=1){const le=El(h,xe,V);Y[V]?Y[V].p(le,P):(Y[V]=Vl(le),Y[V].c(),Y[V].m(ee,null))}for(;V<Y.length;V+=1)Y[V].d(1);Y.length=xe.length}if(P[0]&131137){He=bt(yt);let V;for(V=0;V<He.length;V+=1){const le=kl(h,He,V);q[V]?q[V].p(le,P):(q[V]=Sl(le),q[V].c(),q[V].m(De,null))}for(;V<q.length;V+=1)q[V].d(1);q.length=He.length}},i(h){ft||(fl(e.$$.fragment,h),fl(Ce.$$.fragment,h),ft=!0)},o(h){dl(e.$$.fragment,h),dl(Ce.$$.fragment,h),ft=!1},d(h){h&&(n(t),n(s),n(ut)),vl(e,h),Ze.d(),$e.d(),et.d(),tt.d(),K&&K.d(),lt.d(),Q&&Q.d(),l[30](null),nl(Y,h),nl(q,h),l[34](null),vl(Ce,h)}}}let se=400;function Se(l,e){return e==="£"?`${e}${l}`:`${l} ${e}`}function wa(l,e,t){let s,i,a,c,p,v={},m={},g,k,b,T=!1,w,E,F,x,O,y,B,M,H,J,{data:W}=e;const j=W.SEF;console.log("SEF ",j);const te=Kl.find(o=>o.id===j)?.id??j,me=Ql.find(o=>o.id===j)?.label??j,ne=Zl.find(o=>o.id===j)?.def??j,de=$l.find(o=>o.id===j)?.description??j,rt=ea.find(o=>o.id===j)?.short_units??j,Z=ta.find(o=>o.id===j)?.units??j;let $,G,oe=!1;const We=["overview","compare"];function ge(){const o=window.scrollY;t(15,oe=o>250);for(const R of We){const S=document.getElementById(R);if(!S)continue;const X=S.getBoundingClientRect();if(X.top<=150&&X.bottom>=150)break}}Fl(()=>(window.addEventListener("scroll",ge),ge(),()=>window.removeEventListener("scroll",ge))),Pl(()=>{window.removeEventListener("scroll",ge)});async function Ge(){g=await jt(aa(j)),console.log("totals",g),k=await jt(sa(j)),console.log("by cobens",k),b=await jt(ra()),console.log("per_capita_data",b),t(7,w=(pl(g,o=>o.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),H=_l(g,o=>o.val),J=gl[te],t(8,E=J?.[H]??H??"N/A"),console.log("Average Value: ",w),y=Gl(g,o=>o.val),t(11,O=y!==-1?g[y].Lookup_Value:"N/A"),t(9,F=(g[y]?.val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),M=Ul(g,o=>o.val),t(12,B=M!==-1?g[M].Lookup_Value:"N/A"),t(10,x=(g[M]?.val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),Ot.forEach(o=>{k[o]=+k[o]}),t(25,T=!0)}Ge().then(()=>{t(13,$=new Xl(g,"LSOA",G,"val",!1,"Lookup_Value",!1)),$.initMap()});function ve(){const o=pl(g,S=>S.val)??0,R=ml(bl().thresholds(20).value(S=>S.val)(g),S=>S.length);i?.append(Ne({height:se/1.9,width:se*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${Z}`},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[Yl(g,ca({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),Oe([o],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:o,label:"Average"}},tip:{format:{average:S=>`${S.toFixed(2)}`,x:!1}}}),je(g,{x:{value:o,thresholds:20},y:R+.1*R,r:5,fill:"#BD210E"}),at({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}))}function it(){const o=_l(g,N=>N.val)??0,R=ml(bl().thresholds(20).value(N=>N.val)(g),N=>N.length),S=gl[te],X=S?Object.keys(S).map(Number):g.filter(N=>N.SEFMAME==te).map(N=>N.SE);c?.append(Ne({height:se/1.9,width:se*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:te==="Typology"?80:50,x:{domain:X,label:la(te),tickFormat:N=>S?.[N]??N,tickRotate:te==="Typology"?-10:0},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[ua(g,ql({y:"count"},{x:"val",fill:"black",opacity:.5})),Oe([o],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:o,label:"Average"}},tip:{format:{average:N=>`${N.toFixed(2)}`,x:!1}}}),je(g,{x:{value:o,thresholds:20},y:R+.1*R,r:5,fill:"#BD210E"})]}))}function Ue(){a?.append(Ne({height:se*1.5,width:se*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[kt([0],{stroke:"#333",strokeWidth:1.25}),Oe([0],{stroke:"#333",strokeWidth:.75}),je(g,{x:"val",y:o=>o.total_per_capita*1e3,fill:o=>o.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${Z}`},value:{value:o=>o.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),Et({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),at({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}))}function he(){const R=g.map(S=>({...S,jittered_val:S.val+(Math.random()-.5)*.2}));p?.append(Ne({height:se*1.5,width:se*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[kt([0],{stroke:"#333",strokeWidth:1.25}),Oe([0],{stroke:"#333",strokeWidth:.75}),je(R,{x:"jittered_val",y:S=>S.total_per_capita*1e3,fill:S=>S.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${Z}`},value:{value:S=>S.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),Et({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),at({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}))}function nt(){Ot.forEach(o=>{let R;R=Ne({height:se,width:se,marginLeft:60,marginTop:10,marginRight:10,marginBottom:60,x:{label:null},y:{label:null},style:{fontSize:"12px"},marks:[kt([0],{stroke:"#333",strokeWidth:1.25}),Oe([0],{stroke:"#333",strokeWidth:.75}),je(k.filter(S=>S.co_benefit_type==o),{x:"val",y:"total",fill:st(o),fillOpacity:.5,r:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),Et({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),at({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}),v[o]?.append(R)})}function Ye(){const R=k.map(S=>({...S,jittered_val:S.val+(Math.random()-.5)*.2}));Ot.forEach(S=>{let X;X=Ne({height:se,width:se,marginLeft:60,marginTop:10,marginRight:10,marginBottom:60,x:{label:null},y:{label:null},style:{fontSize:"12px"},marks:[kt([0],{stroke:"#333",strokeWidth:1.25}),Oe([0],{stroke:"#333",strokeWidth:.75}),je(R.filter(N=>N.co_benefit_type==S),{x:"jittered_val",y:"total",fill:st(S),fillOpacity:.5,r:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),Et({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),at({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}),m[S]?.append(X)})}let ce=new Set;function z(o){ce.has(o)?ce.delete(o):ce.add(o),t(16,ce=new Set(ce))}function be(o){Ve[o?"unshift":"push"](()=>{c=o,t(4,c)})}function qe(o){Ve[o?"unshift":"push"](()=>{i=o,t(2,i)})}function Je(o){Ve[o?"unshift":"push"](()=>{p=o,t(5,p)})}function pe(o){Ve[o?"unshift":"push"](()=>{a=o,t(3,a)})}function ot(o){Ve[o?"unshift":"push"](()=>{G=o,t(14,G)})}const Xe=o=>z(o.id);function _e(o,R){Ve[o?"unshift":"push"](()=>{m[R.id]=o,t(6,m)})}function ct(o,R){Ve[o?"unshift":"push"](()=>{v[R.id]=o,t(0,v)})}function Ke(o){Ve[o?"unshift":"push"](()=>{s=o,t(1,s)})}return l.$$set=o=>{"data"in o&&t(24,W=o.data)},l.$$.update=()=>{l.$$.dirty[0]&33554433&&(Object.values(v).forEach(o=>{o.firstChild?.remove()}),T&&(ve(),he(),it(),Ue(),nt(),Ye()))},[v,s,i,a,c,p,m,w,E,F,x,O,B,$,G,oe,ce,te,me,ne,de,rt,Z,z,W,T,be,qe,Je,pe,ot,Xe,_e,ct,Ke]}class Ka extends Rl{constructor(e){super(),Nl(this,e,wa,La,Tl,{data:24},null,[-1,-1])}}export{Ka as component};
