import{s as ct,e as o,a as y,t as se,c as r,b as m,g as B,d as ne,f as u,q as f,i as Z,h as n,M as Ft,w as Me,n as Ye,E as Gt,N as gl,x as rt,j as ve,p as J,D as Ee,v as Vt,r as Le,H as pl,C as Jt,A as bl,T as kl,a0 as Qt,a1 as Cl,y as Dl,z as El,B as at}from"../chunks/scheduler.Uo5vrMzy.js";import{S as yt,i as Bt,c as st,b as nt,m as it,t as Te,a as Ne,e as xt,d as ot,g as $t}from"../chunks/index.CfagcI6h.js";import{e as Ae,N as Vl}from"../chunks/NavigationBar.B3QJO3Gm.js";import{b as me}from"../chunks/paths.DJKGIykG.js";import"../chunks/entry.Hd-zyb3r.js";import{G as wt,K as wl,O as el}from"../chunks/index.JoTaYIke.js";import{g as Ot,a as Ut,i as yl,j as Bl,r as Tl,k as Ll,f as Hl}from"../chunks/globals.WnQBto9r.js";import{a as Rt}from"../chunks/bar.CcxJAYDd.js";import{p as Al,t as Sl}from"../chunks/percentage.Cu08Svdw.js";import{p as Il}from"../chunks/per_capita.COcMrZFY.js";import{g as Et,e as Pl,f as Nl,i as Ml,v as Fl}from"../chunks/duckdb.DNLO4Znk.js";import"../chunks/transform.BNP73y-7.js";import{F as Ol}from"../chunks/Footer.Bwy8iTmN.js";function tl(a,e,t){const l=a.slice();return l[10]=e[t],l}function ll(a){let e,t=Ae(a[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=al(tl(a,t,s));return{c(){e=o("ul");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=r(s,"UL",{class:!0});var i=m(e);for(let c=0;c<l.length;c+=1)l[c].l(i);i.forEach(u),this.h()},h(){f(e,"class","suggestions svelte-1kj8esc")},m(s,i){Z(s,e,i);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null)},p(s,i){if(i&12){t=Ae(s[2]);let c;for(c=0;c<t.length;c+=1){const d=tl(s,t,c);l[c]?l[c].p(d,i):(l[c]=al(d),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=t.length}},d(s){s&&u(e),rt(l,s)}}}function al(a){let e,t=a[10][1]+"",l,s,i;function c(){return a[7](a[10])}return{c(){e=o("li"),l=se(t),this.h()},l(d){e=r(d,"LI",{class:!0});var h=m(e);l=ne(h,t),h.forEach(u),this.h()},h(){f(e,"class","svelte-1kj8esc")},m(d,h){Z(d,e,h),n(e,l),s||(i=Me(e,"click",c),s=!0)},p(d,h){a=d,h&4&&t!==(t=a[10][1]+"")&&ve(l,t)},d(d){d&&u(e),s=!1,i()}}}function Ul(a){let e,t,l,s,i,c,d,h,k,E,_=a[2].length&&ll(a);return{c(){e=o("div"),t=o("div"),l=o("input"),s=y(),i=o("button"),c=se("See Report"),h=y(),_&&_.c(),this.h()},l(D){e=r(D,"DIV",{class:!0});var g=m(e);t=r(g,"DIV",{class:!0});var p=m(t);l=r(p,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,class:!0}),s=B(p),i=r(p,"BUTTON",{type:!0,class:!0});var I=m(i);c=ne(I,"See Report"),I.forEach(u),p.forEach(u),h=B(g),_&&_.l(g),g.forEach(u),this.h()},h(){f(l,"type","text"),f(l,"placeholder","Type local authority name to search..."),f(l,"autocomplete","off"),f(l,"class","svelte-1kj8esc"),f(i,"type","button"),f(i,"class","search-btn svelte-1kj8esc"),i.disabled=d=!a[1],f(t,"class","input-group svelte-1kj8esc"),f(e,"class","autocomplete svelte-1kj8esc")},m(D,g){Z(D,e,g),n(e,t),n(t,l),Ft(l,a[0]),n(t,s),n(t,i),n(i,c),n(e,h),_&&_.m(e,null),k||(E=[Me(l,"input",a[6]),Me(i,"click",a[4])],k=!0)},p(D,[g]){g&1&&l.value!==D[0]&&Ft(l,D[0]),g&2&&d!==(d=!D[1])&&(i.disabled=d),D[2].length?_?_.p(D,g):(_=ll(D),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},i:Ye,o:Ye,d(D){D&&u(e),_&&_.d(),k=!1,Gt(E)}}}function Rl(a,e,t){let l;const s=gl();let{items:i}=e,c="",d=null;const h=Object.entries(i);function k([g,p]){t(0,c=p),t(1,d=g),s("select",g)}function E(){d&&s("search",d)}function _(){c=this.value,t(0,c)}const D=g=>k(g);return a.$$set=g=>{"items"in g&&t(5,i=g.items)},a.$$.update=()=>{a.$$.dirty&1&&t(2,l=c?h.filter(([g,p])=>p.toLowerCase().includes(c.toLowerCase())).slice(0,10):[])},[c,d,l,k,E,i,_,D]}class Gl extends yt{constructor(e){super(),Bt(this,e,Rl,Ul,ct,{items:5})}}function sl(a,e,t){const l=a.slice();return l[11]=e[t],l}function nl(a){let e,t=(a[6]==="total"?a[8](a[11].total_value,a[1],a[2],a[11].co_benefit_type,a[5]):a[8](a[11].value_per_capita,a[3],a[4],a[11].co_benefit_type,a[5]))+"",l;return{c(){e=new pl(!1),l=Jt(),this.h()},l(s){e=bl(s,!1),l=Jt(),this.h()},h(){e.a=l},m(s,i){e.m(t,s,i),Z(s,l,i)},p(s,i){i&127&&t!==(t=(s[6]==="total"?s[8](s[11].total_value,s[1],s[2],s[11].co_benefit_type,s[5]):s[8](s[11].value_per_capita,s[3],s[4],s[11].co_benefit_type,s[5]))+"")&&e.p(t)},d(s){s&&(u(l),e.d())}}}function jl(a){let e,t=a[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=o("span"),l=se(t)},l(s){e=r(s,"SPAN",{});var i=m(e);l=ne(i,t),i.forEach(u)},m(s,i){Z(s,e,i),n(e,l)},p(s,i){i&1&&t!==(t=s[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&ve(l,t)},d(s){s&&u(e)}}}function zl(a){let e,t=a[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=o("span"),l=se(t)},l(s){e=r(s,"SPAN",{});var i=m(e);l=ne(i,t),i.forEach(u)},m(s,i){Z(s,e,i),n(e,l)},p(s,i){i&1&&t!==(t=s[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&ve(l,t)},d(s){s&&u(e)}}}function il(a){let e,t,l,s,i,c,d,h=a[7](a[11].co_benefit_type)+"",k,E,_,D,g,p=a[6],I,A,V,b=nl(a);function v(P,S){return P[6]==="total"?zl:jl}let M=v(a),F=M(a);return{c(){e=o("tr"),t=o("td"),l=o("div"),s=o("img"),c=y(),d=o("a"),k=se(h),_=y(),D=o("td"),g=o("div"),b.c(),I=y(),A=o("td"),F.c(),V=y(),this.h()},l(P){e=r(P,"TR",{});var S=m(e);t=r(S,"TD",{});var q=m(t);l=r(q,"DIV",{class:!0});var W=m(l);s=r(W,"IMG",{src:!0,alt:!0,class:!0}),c=B(W),d=r(W,"A",{href:!0,target:!0});var z=m(d);k=ne(z,h),z.forEach(u),W.forEach(u),q.forEach(u),_=B(S),D=r(S,"TD",{});var j=m(D);g=r(j,"DIV",{class:!0});var H=m(g);b.l(H),H.forEach(u),j.forEach(u),I=B(S),A=r(S,"TD",{});var K=m(A);F.l(K),K.forEach(u),V=B(S),S.forEach(u),this.h()},h(){Le(s.src,i=Ot(a[11].co_benefit_type))||f(s,"src",i),f(s,"alt","Icon"),f(s,"class","in-table-icon"),f(d,"href",E=me+"/cobenefit?cobenefit="+a[11].co_benefit_type),f(d,"target","_blank"),f(l,"class","coben-content"),f(g,"class","bar-cell")},m(P,S){Z(P,e,S),n(e,t),n(t,l),n(l,s),n(l,c),n(l,d),n(d,k),n(e,_),n(e,D),n(D,g),b.m(g,null),n(e,I),n(e,A),F.m(A,null),n(e,V)},p(P,S){S&1&&!Le(s.src,i=Ot(P[11].co_benefit_type))&&f(s,"src",i),S&1&&h!==(h=P[7](P[11].co_benefit_type)+"")&&ve(k,h),S&1&&E!==(E=me+"/cobenefit?cobenefit="+P[11].co_benefit_type)&&f(d,"href",E),S&64&&ct(p,p=P[6])?(b.d(1),b=nl(P),b.c(),b.m(g,null)):b.p(P,S),M===(M=v(P))&&F?F.p(P,S):(F.d(1),F=M(P),F&&(F.c(),F.m(A,null)))},d(P){P&&u(e),b.d(P),F.d()}}}function ql(a){let e,t,l,s="Total",i,c,d="Per Capita",h,k,E,_,D,g="Name",p,I,A=a[6]==="total"?"Total":"Per Capita",V,b,v,M=a[6]==="total"?"£, billion":"£",F,P,S,q,W,z=Ae(a[0]),j=[];for(let H=0;H<z.length;H+=1)j[H]=il(sl(a,z,H));return{c(){e=o("div"),t=o("div"),l=o("button"),l.textContent=s,i=y(),c=o("button"),c.textContent=d,h=y(),k=o("table"),E=o("thead"),_=o("tr"),D=o("th"),D.textContent=g,p=y(),I=o("th"),V=se(A),b=y(),v=o("th"),F=se(M),P=y(),S=o("tbody");for(let H=0;H<j.length;H+=1)j[H].c();this.h()},l(H){e=r(H,"DIV",{class:!0});var K=m(e);t=r(K,"DIV",{class:!0});var O=m(t);l=r(O,"BUTTON",{"data-svelte-h":!0}),J(l)!=="svelte-15mf98g"&&(l.textContent=s),i=B(O),c=r(O,"BUTTON",{"data-svelte-h":!0}),J(c)!=="svelte-1ts3a4f"&&(c.textContent=d),O.forEach(u),K.forEach(u),h=B(H),k=r(H,"TABLE",{class:!0});var Q=m(k);E=r(Q,"THEAD",{});var U=m(E);_=r(U,"TR",{});var X=m(_);D=r(X,"TH",{"data-svelte-h":!0}),J(D)!=="svelte-13ju7y1"&&(D.textContent=g),p=B(X),I=r(X,"TH",{style:!0});var R=m(I);V=ne(R,A),R.forEach(u),b=B(X),v=r(X,"TH",{style:!0});var T=m(v);F=ne(T,M),T.forEach(u),X.forEach(u),U.forEach(u),P=B(Q),S=r(Q,"TBODY",{});var G=m(S);for(let w=0;w<j.length;w+=1)j[w].l(G);G.forEach(u),Q.forEach(u),this.h()},h(){Ee(l,"selected",a[6]==="total"),Ee(c,"selected",a[6]==="per_capita"),f(t,"class","button-group"),f(e,"class","controls"),Vt(I,"width","180px"),Vt(v,"width","80px"),f(k,"class","data-table")},m(H,K){Z(H,e,K),n(e,t),n(t,l),n(t,i),n(t,c),Z(H,h,K),Z(H,k,K),n(k,E),n(E,_),n(_,D),n(_,p),n(_,I),n(I,V),n(_,b),n(_,v),n(v,F),n(k,P),n(k,S);for(let O=0;O<j.length;O+=1)j[O]&&j[O].m(S,null);q||(W=[Me(l,"click",a[9]),Me(c,"click",a[10])],q=!0)},p(H,[K]){if(K&64&&Ee(l,"selected",H[6]==="total"),K&64&&Ee(c,"selected",H[6]==="per_capita"),K&64&&A!==(A=H[6]==="total"?"Total":"Per Capita")&&ve(V,A),K&64&&M!==(M=H[6]==="total"?"£, billion":"£")&&ve(F,M),K&511){z=Ae(H[0]);let O;for(O=0;O<z.length;O+=1){const Q=sl(H,z,O);j[O]?j[O].p(Q,K):(j[O]=il(Q),j[O].c(),j[O].m(S,null))}for(;O<j.length;O+=1)j[O].d(1);j.length=z.length}},i:Ye,o:Ye,d(H){H&&(u(e),u(h),u(k)),rt(j,H),q=!1,Gt(W)}}}function Wl(a,e,t){let{aggregationPerCapitaPerBenefit:l}=e,{minCoBenefValue:s}=e,{maxCoBenefValue:i}=e,{minHHCoBenefValue:c}=e,{maxHHCoBenefValue:d}=e,{COBENEFS_SCALE:h}=e;function k(p){return Ut.find(I=>I.id===p)?.label??p}let E="total";function _(p,I,A,V,b){const v=b(V);return wt({width:100,height:20,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,x:{domain:[I,A],axis:null},marks:[wl([0],{stroke:"#3C3C3C"}),Rt([p],{x:F=>F,y:0,fill:v})]}).outerHTML}const D=()=>t(6,E="total"),g=()=>t(6,E="per_capita");return a.$$set=p=>{"aggregationPerCapitaPerBenefit"in p&&t(0,l=p.aggregationPerCapitaPerBenefit),"minCoBenefValue"in p&&t(1,s=p.minCoBenefValue),"maxCoBenefValue"in p&&t(2,i=p.maxCoBenefValue),"minHHCoBenefValue"in p&&t(3,c=p.minHHCoBenefValue),"maxHHCoBenefValue"in p&&t(4,d=p.maxHHCoBenefValue),"COBENEFS_SCALE"in p&&t(5,h=p.COBENEFS_SCALE)},[l,s,i,c,d,h,E,k,_,D,g]}class Kl extends yt{constructor(e){super(),Bt(this,e,Wl,ql,ct,{aggregationPerCapitaPerBenefit:0,minCoBenefValue:1,maxCoBenefValue:2,minHHCoBenefValue:3,maxHHCoBenefValue:4,COBENEFS_SCALE:5})}}function ol(a,e,t){const l=a.slice();return l[16]=e[t],l}function rl(a,e,t){const l=a.slice();return l[19]=e[t],l}function cl(a){let e,t=a[19].label+"",l;return{c(){e=o("option"),l=se(t),this.h()},l(s){e=r(s,"OPTION",{});var i=m(e);l=ne(i,t),i.forEach(u),this.h()},h(){e.__value=a[19].value,Ft(e,e.__value)},m(s,i){Z(s,e,i),n(e,l)},p:Ye,d(s){s&&u(e)}}}function Xl(a){let e,t=a[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=o("span"),l=se(t)},l(s){e=r(s,"SPAN",{});var i=m(e);l=ne(i,t),i.forEach(u)},m(s,i){Z(s,e,i),n(e,l)},p(s,i){i&2&&t!==(t=s[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&ve(l,t)},d(s){s&&u(e)}}}function Yl(a){let e,t=a[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=o("span"),l=se(t)},l(s){e=r(s,"SPAN",{});var i=m(e);l=ne(i,t),i.forEach(u)},m(s,i){Z(s,e,i),n(e,l)},p(s,i){i&2&&t!==(t=s[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&ve(l,t)},d(s){s&&u(e)}}}function fl(a){let e,t,l,s=(a[5][a[16].LAD]??a[16].LAD)+"",i,c,d,h,k,E,_=(a[2]==="total"?a[9](a[16].total_value,a[3]):a[10](a[16].value_per_capita,a[4]))+"",D,g,p;function I(b,v){return b[2]==="total"?Yl:Xl}let A=I(a),V=A(a);return{c(){e=o("tr"),t=o("td"),l=o("a"),i=se(s),d=y(),h=o("td"),k=o("div"),E=new pl(!1),D=y(),g=o("td"),V.c(),p=y(),this.h()},l(b){e=r(b,"TR",{});var v=m(e);t=r(v,"TD",{});var M=m(t);l=r(M,"A",{href:!0,target:!0});var F=m(l);i=ne(F,s),F.forEach(u),M.forEach(u),d=B(v),h=r(v,"TD",{});var P=m(h);k=r(P,"DIV",{class:!0});var S=m(k);E=bl(S,!1),S.forEach(u),P.forEach(u),D=B(v),g=r(v,"TD",{});var q=m(g);V.l(q),q.forEach(u),p=B(v),v.forEach(u),this.h()},h(){f(l,"href",c=me+"/location?location="+a[16].LAD),f(l,"target","_blank"),E.a=null,f(k,"class","bar-cell")},m(b,v){Z(b,e,v),n(e,t),n(t,l),n(l,i),n(e,d),n(e,h),n(h,k),E.m(_,k),n(e,D),n(e,g),V.m(g,null),n(e,p)},p(b,v){v&34&&s!==(s=(b[5][b[16].LAD]??b[16].LAD)+"")&&ve(i,s),v&2&&c!==(c=me+"/location?location="+b[16].LAD)&&f(l,"href",c),v&30&&_!==(_=(b[2]==="total"?b[9](b[16].total_value,b[3]):b[10](b[16].value_per_capita,b[4]))+"")&&E.p(_),A===(A=I(b))&&V?V.p(b,v):(V.d(1),V=A(b),V&&(V.c(),V.m(g,null)))},d(b){b&&u(e),V.d()}}}function Zl(a){let e,t,l="Nation:",s,i,c,d,h,k="Total",E,_,D="Per Capita",g,p,I,A,V,b='Name <span style="font-weight:300; color: #545454">(Top 12 in display)</span>',v,M,F=a[2]==="total"?"Total":"Per Capita",P,S,q,W=a[2]==="total"?"£, billion":"£",z,j,H,K,O,Q=Ae(a[7]),U=[];for(let T=0;T<Q.length;T+=1)U[T]=cl(rl(a,Q,T));let X=Ae(a[1]),R=[];for(let T=0;T<X.length;T+=1)R[T]=fl(ol(a,X,T));return{c(){e=o("div"),t=o("label"),t.textContent=l,s=y(),i=o("select");for(let T=0;T<U.length;T+=1)U[T].c();c=y(),d=o("div"),h=o("button"),h.textContent=k,E=y(),_=o("button"),_.textContent=D,g=y(),p=o("table"),I=o("thead"),A=o("tr"),V=o("th"),V.innerHTML=b,v=y(),M=o("th"),P=se(F),S=y(),q=o("th"),z=se(W),j=y(),H=o("tbody");for(let T=0;T<R.length;T+=1)R[T].c();this.h()},l(T){e=r(T,"DIV",{class:!0});var G=m(e);t=r(G,"LABEL",{"data-svelte-h":!0}),J(t)!=="svelte-1ecnfnj"&&(t.textContent=l),s=B(G),i=r(G,"SELECT",{});var w=m(i);for(let Ce=0;Ce<U.length;Ce+=1)U[Ce].l(w);w.forEach(u),c=B(G),d=r(G,"DIV",{class:!0});var ee=m(d);h=r(ee,"BUTTON",{"data-svelte-h":!0}),J(h)!=="svelte-2dev6e"&&(h.textContent=k),E=B(ee),_=r(ee,"BUTTON",{"data-svelte-h":!0}),J(_)!=="svelte-1q4fgxf"&&(_.textContent=D),ee.forEach(u),G.forEach(u),g=B(T),p=r(T,"TABLE",{class:!0});var He=m(p);I=r(He,"THEAD",{});var Ve=m(I);A=r(Ve,"TR",{});var ke=m(A);V=r(ke,"TH",{"data-svelte-h":!0}),J(V)!=="svelte-1homman"&&(V.innerHTML=b),v=B(ke),M=r(ke,"TH",{style:!0});var Fe=m(M);P=ne(Fe,F),Fe.forEach(u),S=B(ke),q=r(ke,"TH",{style:!0});var Oe=m(q);z=ne(Oe,W),Oe.forEach(u),ke.forEach(u),Ve.forEach(u),j=B(He),H=r(He,"TBODY",{});var we=m(H);for(let Ce=0;Ce<R.length;Ce+=1)R[Ce].l(we);we.forEach(u),He.forEach(u),this.h()},h(){a[0]===void 0&&kl(()=>a[13].call(i)),Ee(h,"selected",a[2]==="total"),Ee(_,"selected",a[2]==="per_capita"),f(d,"class","button-group"),f(e,"class","controls"),Vt(M,"width","120px"),Vt(q,"width","80px"),f(p,"class","data-table")},m(T,G){Z(T,e,G),n(e,t),n(e,s),n(e,i);for(let w=0;w<U.length;w+=1)U[w]&&U[w].m(i,null);Qt(i,a[0],!0),n(e,c),n(e,d),n(d,h),n(d,E),n(d,_),Z(T,g,G),Z(T,p,G),n(p,I),n(I,A),n(A,V),n(A,v),n(A,M),n(M,P),n(A,S),n(A,q),n(q,z),n(p,j),n(p,H);for(let w=0;w<R.length;w+=1)R[w]&&R[w].m(H,null);K||(O=[Me(i,"change",a[13]),Me(i,"change",a[8]),Me(h,"click",a[14]),Me(_,"click",a[15])],K=!0)},p(T,[G]){if(G&128){Q=Ae(T[7]);let w;for(w=0;w<Q.length;w+=1){const ee=rl(T,Q,w);U[w]?U[w].p(ee,G):(U[w]=cl(ee),U[w].c(),U[w].m(i,null))}for(;w<U.length;w+=1)U[w].d(1);U.length=Q.length}if(G&129&&Qt(i,T[0]),G&4&&Ee(h,"selected",T[2]==="total"),G&4&&Ee(_,"selected",T[2]==="per_capita"),G&4&&F!==(F=T[2]==="total"?"Total":"Per Capita")&&ve(P,F),G&4&&W!==(W=T[2]==="total"?"£, billion":"£")&&ve(z,W),G&1598){X=Ae(T[1]);let w;for(w=0;w<X.length;w+=1){const ee=ol(T,X,w);R[w]?R[w].p(ee,G):(R[w]=fl(ee),R[w].c(),R[w].m(H,null))}for(;w<R.length;w+=1)R[w].d(1);R.length=X.length}},i:Ye,o:Ye,d(T){T&&(u(e),u(g),u(p)),rt(U,T),rt(R,T),K=!1,Gt(O)}}}function Jl(a,e,t){const l=gl();let{ladData:s=[]}=e,{region:i}=e,{sortBy:c}=e,{maxLADValue:d}=e,{maxHHLADValue:h}=e,{LADToName:k={}}=e,{viewMode:E="total"}=e,{selectedRegion:_="All"}=e;const D=[{label:"All",value:"All"},{label:"England",value:"England"},{label:"Wales",value:"Wales"},{label:"Scotland",value:"Scotland"},{label:"Northern Ireland",value:"NI"}];function g(v){l("filterChange",{region:v.target.value,sortBy:c})}function p(v,M){return wt({width:80,height:20,margin:0,x:{domain:[0,M],axis:null},marks:[Rt([v],{x:P=>P,y:0,fill:"#ccc"})]}).outerHTML}function I(v,M){return wt({width:80,height:20,margin:0,x:{domain:[0,M],axis:null},marks:[Rt([v],{x:P=>P,y:0,fill:"#ccc"})]}).outerHTML}function A(){i=Cl(this),t(0,i),t(7,D)}const V=()=>l("filterChange",{region:i,sortBy:"total"}),b=()=>l("filterChange",{region:i,sortBy:"per_capita"});return a.$$set=v=>{"ladData"in v&&t(1,s=v.ladData),"region"in v&&t(0,i=v.region),"sortBy"in v&&t(2,c=v.sortBy),"maxLADValue"in v&&t(3,d=v.maxLADValue),"maxHHLADValue"in v&&t(4,h=v.maxHHLADValue),"LADToName"in v&&t(5,k=v.LADToName),"viewMode"in v&&t(11,E=v.viewMode),"selectedRegion"in v&&t(12,_=v.selectedRegion)},[i,s,c,d,h,k,l,D,g,p,I,E,_,A,V,b]}class Ql extends yt{constructor(e){super(),Bt(this,e,Jl,Zl,ct,{ladData:1,region:0,sortBy:2,maxLADValue:3,maxHHLADValue:4,LADToName:5,viewMode:11,selectedRegion:12})}}function ul(a,e,t){const l=a.slice();return l[47]=e[t],l[49]=t,l}function dl(a){let e,t,l,s,i,c,d;return{c(){e=o("div"),t=o("img"),i=y(),c=o("img"),this.h()},l(h){e=r(h,"DIV",{class:!0});var k=m(e);t=r(k,"IMG",{class:!0,src:!0,alt:!0}),i=B(k),c=r(k,"IMG",{class:!0,src:!0,alt:!0}),k.forEach(u),this.h()},h(){f(t,"class","slide-image"),Le(t.src,l=a[47].image)||f(t,"src",l),f(t,"alt",s=a[47].label),f(c,"class","slide-map svelte-12d0km7"),Le(c.src,d=a[47].mapImage)||f(c,"src",d),f(c,"alt","Map overlay"),f(e,"class","hero-slide svelte-12d0km7"),Ee(e,"active",a[49]===a[23]),Ee(e,"previous",a[49]===a[24])},m(h,k){Z(h,e,k),n(e,t),n(e,i),n(e,c)},p(h,k){k[0]&1048576&&!Le(t.src,l=h[47].image)&&f(t,"src",l),k[0]&1048576&&s!==(s=h[47].label)&&f(t,"alt",s),k[0]&1048576&&!Le(c.src,d=h[47].mapImage)&&f(c,"src",d),k[0]&8388608&&Ee(e,"active",h[49]===h[23]),k[0]&16777216&&Ee(e,"previous",h[49]===h[24])},d(h){h&&u(e)}}}function hl(a){let e,t,l;return{c(){e=o("div"),t=o("img"),this.h()},l(s){e=r(s,"DIV",{class:!0});var i=m(e);t=r(i,"IMG",{src:!0,alt:!0,class:!0}),i.forEach(u),this.h()},h(){Le(t.src,l=a[19])||f(t,"src",l),f(t,"alt","Icon"),f(t,"class","svelte-12d0km7"),f(e,"class","waffle-icon svelte-12d0km7")},m(s,i){Z(s,e,i),n(e,t)},p(s,i){i[0]&524288&&!Le(t.src,l=s[19])&&f(t,"src",l)},d(s){s&&u(e)}}}function xl(a){let e,t="National costs";return{c(){e=o("div"),e.textContent=t,this.h()},l(l){e=r(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-o12owz"&&(e.textContent=t),this.h()},h(){f(e,"class","waffle-caption svelte-12d0km7")},m(l,s){Z(l,e,s)},d(l){l&&u(e)}}}function $l(a){let e,t="National benefits";return{c(){e=o("div"),e.textContent=t,this.h()},l(l){e=r(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-10ytukz"&&(e.textContent=t),this.h()},h(){f(e,"class","waffle-caption svelte-12d0km7")},m(l,s){Z(l,e,s)},d(l){l&&u(e)}}}function ea(a){let e,t="Per capita costs";return{c(){e=o("div"),e.textContent=t,this.h()},l(l){e=r(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-6pmcl0"&&(e.textContent=t),this.h()},h(){f(e,"class","waffle-caption svelte-12d0km7")},m(l,s){Z(l,e,s)},d(l){l&&u(e)}}}function ta(a){let e,t="Per capita benefits";return{c(){e=o("div"),e.textContent=t,this.h()},l(l){e=r(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-g1rvwk"&&(e.textContent=t),this.h()},h(){f(e,"class","waffle-caption svelte-12d0km7")},m(l,s){Z(l,e,s)},d(l){l&&u(e)}}}function ml(a){let e,t,l,s,i,c,d,h,k,E,_="%",D,g,p="Contribution";return{c(){e=o("div"),t=o("div"),l=o("img"),i=y(),c=o("div"),d=o("span"),h=se(a[18]),k=y(),E=o("span"),E.textContent=_,D=y(),g=o("div"),g.textContent=p,this.h()},l(I){e=r(I,"DIV",{class:!0});var A=m(e);t=r(A,"DIV",{class:!0});var V=m(t);l=r(V,"IMG",{class:!0,src:!0,alt:!0}),i=B(V),c=r(V,"DIV",{class:!0});var b=m(c);d=r(b,"SPAN",{class:!0});var v=m(d);h=ne(v,a[18]),v.forEach(u),k=B(b),E=r(b,"SPAN",{class:!0,"data-svelte-h":!0}),J(E)!=="svelte-jxggz7"&&(E.textContent=_),b.forEach(u),V.forEach(u),D=B(A),g=r(A,"DIV",{class:!0,"data-svelte-h":!0}),J(g)!=="svelte-1ahdmih"&&(g.textContent=p),A.forEach(u),this.h()},h(){f(l,"class","aggregation-icon-small svelte-12d0km7"),Le(l.src,s=Al)||f(l,"src",s),f(l,"alt","icon"),f(d,"class","waffle-big svelte-12d0km7"),f(E,"class","small svelte-12d0km7"),f(c,"class","waffle-value svelte-12d0km7"),f(t,"class","waffle-value-container svelte-12d0km7"),f(g,"class","waffle-caption svelte-12d0km7"),f(e,"class","waffle-stat svelte-12d0km7")},m(I,A){Z(I,e,A),n(e,t),n(t,l),n(t,i),n(t,c),n(c,d),n(d,h),n(c,k),n(c,E),n(e,D),n(e,g)},p(I,A){A[0]&262144&&ve(h,I[18])},d(I){I&&u(e)}}}function vl(a){let e,t;return e=new Ql({props:{ladData:a[7],region:a[8],sortBy:a[9],maxLADValue:a[10],maxHHLADValue:a[11],LADToName:a[25]}}),e.$on("filterChange",a[26]),{c(){st(e.$$.fragment)},l(l){nt(e.$$.fragment,l)},m(l,s){it(e,l,s),t=!0},p(l,s){const i={};s[0]&128&&(i.ladData=l[7]),s[0]&256&&(i.region=l[8]),s[0]&512&&(i.sortBy=l[9]),s[0]&1024&&(i.maxLADValue=l[10]),s[0]&2048&&(i.maxHHLADValue=l[11]),e.$set(i)},i(l){t||(Te(e.$$.fragment,l),t=!0)},o(l){Ne(e.$$.fragment,l),t=!1},d(l){ot(e,l)}}}function _l(a){let e,t;return e=new Kl({props:{aggregationPerCapitaPerBenefit:a[1],minCoBenefValue:a[3],maxCoBenefValue:a[2],minHHCoBenefValue:a[4],maxHHCoBenefValue:a[5],COBENEFS_SCALE:yl}}),{c(){st(e.$$.fragment)},l(l){nt(e.$$.fragment,l)},m(l,s){it(e,l,s),t=!0},p(l,s){const i={};s[0]&2&&(i.aggregationPerCapitaPerBenefit=l[1]),s[0]&8&&(i.minCoBenefValue=l[3]),s[0]&4&&(i.maxCoBenefValue=l[2]),s[0]&16&&(i.minHHCoBenefValue=l[4]),s[0]&32&&(i.maxHHCoBenefValue=l[5]),e.$set(i)},i(l){t||(Te(e.$$.fragment,l),t=!0)},o(l){Ne(e.$$.fragment,l),t=!1},d(l){ot(e,l)}}}function la(a){let e,t,l,s,i,c,d,h=`<img src="${me}/atlas-logos/logo-colored-waffle-png.png" alt="Logo" height="0px"/> <h1 class="hero-title svelte-12d0km7">The Co-Benefits of Reaching <br/> Net Zero in the UK</h1> <p class="hero-description svelte-12d0km7">Climate actions lower greenhouse gas (GHG) emissions but the gains for society reach further. The
                    CO-BENS project models 11 additional benefits based on actions recommended by the Climate Change
                    Committee (CCC) in its Seventh Carbon Budget (2025) across 45,000 communities and regions within the
                    UK.<br/></p> <p class="hero-description svelte-12d0km7">Explore how, when and for whom benefits emerge to further understand connections between a wide
                    range of
                    social, economic and environmental priorities, and drive more effective decision-making.</p> <p class="hero-description svelte-12d0km7">To understand more about the analysis or if you would like bespoke co-benefit modelling please get
                    in
                    touch by emailing <a href="mailto:cobens@ed.ac.uk">cobens@ed.ac.uk</a></p>`,k,E,_,D,g,p,I,A,V,b,v,M,F,P,S,q,W,z,j,H,K="billion",O,Q,U,X,R,T,G,w,ee,He,Ve,ke,Fe,Oe,we,Ce,Re,lt,C,te,re="Explore the Atlas",_e,ie,ce,$=`<h2>Browse Report Pages</h2> <div class="explore-pages svelte-12d0km7"><a href="${me}/coben" class="svelte-12d0km7"><div class="explore-page svelte-12d0km7"><img class="page-teaser-img svelte-12d0km7" src="${me}/pages-teasers/coben.png"/> <h3 class="svelte-12d0km7">11 Co-Benefits Pages</h3> <p class="svelte-12d0km7">A Co-benefit page shows the spatial and temporal distribution of a given co-benefit, and
                                its relationship with socio-economic factors.</p></div></a> <a href="${me}/lad" class="svelte-12d0km7"><div class="explore-page svelte-12d0km7"><img class="page-teaser-img svelte-12d0km7" src="${me}/pages-teasers/location.png"/> <h3 class="svelte-12d0km7">382 Local Area Pages</h3> <p class="svelte-12d0km7">A Local Area page shows the different co-benefits in this area, temporal distributions,
                                and their relationships with local socio-economic distributions.</p></div></a> <a href="${me}/sefs" class="svelte-12d0km7"><div class="explore-page svelte-12d0km7"><img class="page-teaser-img svelte-12d0km7" src="${me}/pages-teasers/sef.png"/> <h3 class="svelte-12d0km7">17 Socio-Economic Factors Pages</h3> <p class="svelte-12d0km7">A Socio-Economic Factor Page shows the spatial distribution of a given factor and it&#39;s
                                relationships with the different co-benefits.</p></div></a> <a href="${me}/map" class="svelte-12d0km7"><div class="explore-page svelte-12d0km7"><img class="page-teaser-img svelte-12d0km7" src="${me}/pages-teasers/map.png"/> <h3 class="svelte-12d0km7">1 Interactive Map</h3> <p class="svelte-12d0km7">The interactive map enables exploring the spatial distributions of both the co-benefits
                                and the socio-economic factors at the datazones and local area levels.</p></div></a></div>`,ge,fe,De,N="Find My Place",oe,pe,Ue,Se,ft=`<h1>Read Stories and Analyses</h1> <div class="explore-pages svelte-12d0km7"><a href="${me}/stories/Derry_story.docx" download="story" class="svelte-12d0km7"><div class="story"><img class="story-teaser-img svelte-12d0km7" src="${me}/stories/Derry_picture.png"/> <h3>Accelerating climate financing in Derry City and Strabane District Council</h3></div></a></div>`,Ze,be,ye,Ge,jt="Explore by Local Authority",Tt,je,zt="Click to see local authority data report.",Lt,Ht,Be,ze,qt="Explore by Co-Benefit",At,qe,Wt="Click to see each co-benefit data report.",St,It,We,Ke;t=new Vl({});let Je=Ae(a[20]),ue=[];for(let L=0;L<Je.length;L+=1)ue[L]=dl(ul(a,Je,L));let de=a[19]&&hl(a);function Kt(L,Y){return L[16]>0?$l:xl}let ut=Kt(a),Ie=ut(a);function Xt(L,Y){return L[17]>0?ta:ea}let dt=Xt(a),Pe=dt(a),he=a[22]!==null&&ml(a);pe=new Gl({props:{items:a[25]}}),pe.$on("search",a[33]);let le=!a[6]&&vl(a),ae=!a[6]&&_l(a);return We=new Ol({}),{c(){e=o("div"),st(t.$$.fragment),l=y(),s=o("section");for(let L=0;L<ue.length;L+=1)ue[L].c();i=y(),c=o("div"),d=o("div"),d.innerHTML=h,k=y(),E=o("div"),_=o("div"),D=o("div"),de&&de.c(),g=y(),p=o("div"),I=se(a[15]),A=y(),V=o("div"),b=o("div"),v=o("div"),M=o("img"),P=y(),S=o("div"),q=o("span"),W=se("£"),z=se(a[16]),j=y(),H=o("span"),H.textContent=K,O=y(),Ie.c(),Q=y(),U=o("div"),X=o("div"),R=o("img"),G=y(),w=o("div"),ee=o("span"),He=se("£"),Ve=se(a[17]),ke=y(),Pe.c(),Fe=y(),he&&he.c(),Oe=y(),we=o("div"),Ce=y(),Re=o("div"),lt=y(),C=o("section"),te=o("h1"),te.textContent=re,_e=y(),ie=o("div"),ce=o("div"),ce.innerHTML=$,ge=y(),fe=o("div"),De=o("h1"),De.textContent=N,oe=y(),st(pe.$$.fragment),Ue=y(),Se=o("div"),Se.innerHTML=ft,Ze=y(),be=o("section"),ye=o("div"),Ge=o("h2"),Ge.textContent=jt,Tt=y(),je=o("p"),je.textContent=zt,Lt=y(),le&&le.c(),Ht=y(),Be=o("div"),ze=o("h2"),ze.textContent=qt,At=y(),qe=o("p"),qe.textContent=Wt,St=y(),ae&&ae.c(),It=y(),st(We.$$.fragment),this.h()},l(L){e=r(L,"DIV",{});var Y=m(e);nt(t.$$.fragment,Y),l=B(Y),s=r(Y,"SECTION",{class:!0});var x=m(s);for(let Mt=0;Mt<ue.length;Mt+=1)ue[Mt].l(x);i=B(x),c=r(x,"DIV",{class:!0});var Xe=m(c);d=r(Xe,"DIV",{class:!0,"data-svelte-h":!0}),J(d)!=="svelte-8289tn"&&(d.innerHTML=h),k=B(Xe),E=r(Xe,"DIV",{class:!0});var Qe=m(E);_=r(Qe,"DIV",{class:!0});var ht=m(_);D=r(ht,"DIV",{class:!0});var mt=m(D);de&&de.l(mt),g=B(mt),p=r(mt,"DIV",{class:!0});var Yt=m(p);I=ne(Yt,a[15]),Yt.forEach(u),mt.forEach(u),A=B(ht),V=r(ht,"DIV",{class:!0});var xe=m(V);b=r(xe,"DIV",{class:!0});var vt=m(b);v=r(vt,"DIV",{class:!0});var _t=m(v);M=r(_t,"IMG",{class:!0,src:!0,alt:!0}),P=B(_t),S=r(_t,"DIV",{class:!0});var gt=m(S);q=r(gt,"SPAN",{class:!0});var Pt=m(q);W=ne(Pt,"£"),z=ne(Pt,a[16]),Pt.forEach(u),j=B(gt),H=r(gt,"SPAN",{class:!0,"data-svelte-h":!0}),J(H)!=="svelte-tlhydp"&&(H.textContent=K),gt.forEach(u),_t.forEach(u),O=B(vt),Ie.l(vt),vt.forEach(u),Q=B(xe),U=r(xe,"DIV",{class:!0});var pt=m(U);X=r(pt,"DIV",{class:!0});var bt=m(X);R=r(bt,"IMG",{class:!0,src:!0,alt:!0}),G=B(bt),w=r(bt,"DIV",{class:!0});var Zt=m(w);ee=r(Zt,"SPAN",{class:!0});var Nt=m(ee);He=ne(Nt,"£"),Ve=ne(Nt,a[17]),Nt.forEach(u),Zt.forEach(u),bt.forEach(u),ke=B(pt),Pe.l(pt),pt.forEach(u),Fe=B(xe),he&&he.l(xe),xe.forEach(u),ht.forEach(u),Oe=B(Qe),we=r(Qe,"DIV",{class:!0}),m(we).forEach(u),Ce=B(Qe),Re=r(Qe,"DIV",{}),m(Re).forEach(u),Qe.forEach(u),Xe.forEach(u),x.forEach(u),lt=B(Y),C=r(Y,"SECTION",{id:!0,class:!0});var kt=m(C);te=r(kt,"H1",{id:!0,class:!0,"data-svelte-h":!0}),J(te)!=="svelte-157b9z3"&&(te.textContent=re),_e=B(kt),ie=r(kt,"DIV",{id:!0,class:!0});var $e=m(ie);ce=r($e,"DIV",{class:!0,"data-svelte-h":!0}),J(ce)!=="svelte-gkz4ya"&&(ce.innerHTML=$),ge=B($e),fe=r($e,"DIV",{class:!0});var Ct=m(fe);De=r(Ct,"H1",{class:!0,"data-svelte-h":!0}),J(De)!=="svelte-byubde"&&(De.textContent=N),oe=B(Ct),nt(pe.$$.fragment,Ct),Ct.forEach(u),Ue=B($e),Se=r($e,"DIV",{class:!0,"data-svelte-h":!0}),J(Se)!=="svelte-pw4ou5"&&(Se.innerHTML=ft),$e.forEach(u),kt.forEach(u),Ze=B(Y),be=r(Y,"SECTION",{class:!0});var Dt=m(be);ye=r(Dt,"DIV",{class:!0});var et=m(ye);Ge=r(et,"H2",{class:!0,"data-svelte-h":!0}),J(Ge)!=="svelte-pgup4c"&&(Ge.textContent=jt),Tt=B(et),je=r(et,"P",{class:!0,"data-svelte-h":!0}),J(je)!=="svelte-owmq24"&&(je.textContent=zt),Lt=B(et),le&&le.l(et),et.forEach(u),Ht=B(Dt),Be=r(Dt,"DIV",{class:!0});var tt=m(Be);ze=r(tt,"H2",{class:!0,"data-svelte-h":!0}),J(ze)!=="svelte-9nk5va"&&(ze.textContent=qt),At=B(tt),qe=r(tt,"P",{class:!0,"data-svelte-h":!0}),J(qe)!=="svelte-4140on"&&(qe.textContent=Wt),St=B(tt),ae&&ae.l(tt),tt.forEach(u),Dt.forEach(u),It=B(Y),nt(We.$$.fragment,Y),Y.forEach(u),this.h()},h(){f(d,"class","hero-text svelte-12d0km7"),f(p,"class","waffle-title svelte-12d0km7"),f(D,"class","waffle-header svelte-12d0km7"),f(M,"class","aggregation-icon-small svelte-12d0km7"),Le(M.src,F=Sl)||f(M,"src",F),f(M,"alt","icon"),f(q,"class","waffle-big svelte-12d0km7"),f(H,"class","small svelte-12d0km7"),f(S,"class","waffle-value svelte-12d0km7"),f(v,"class","waffle-value-container svelte-12d0km7"),f(b,"class","waffle-stat svelte-12d0km7"),f(R,"class","aggregation-icon-small svelte-12d0km7"),Le(R.src,T=Il)||f(R,"src",T),f(R,"alt","icon"),f(ee,"class","waffle-big svelte-12d0km7"),f(w,"class","waffle-value svelte-12d0km7"),f(X,"class","waffle-value-container svelte-12d0km7"),f(U,"class","waffle-stat svelte-12d0km7"),f(V,"class","waffle-stats svelte-12d0km7"),f(_,"class","waffle-label svelte-12d0km7"),f(we,"class","waffle-bg svelte-12d0km7"),f(E,"class","waffle-overlay svelte-12d0km7"),f(c,"class","hero-content svelte-12d0km7"),f(s,"class","hero-container svelte-12d0km7"),f(te,"id","explore-title"),f(te,"class","svelte-12d0km7"),f(ce,"class","explore-block svelte-12d0km7"),f(De,"class","svelte-12d0km7"),f(fe,"class","explore-block search-section svelte-12d0km7"),f(Se,"class","explore-block svelte-12d0km7"),f(ie,"id","explore-section-main"),f(ie,"class","svelte-12d0km7"),f(C,"id","explore-section"),f(C,"class","svelte-12d0km7"),f(Ge,"class","svelte-12d0km7"),f(je,"class","svelte-12d0km7"),f(ye,"class","side-box svelte-12d0km7"),f(ze,"class","svelte-12d0km7"),f(qe,"class","svelte-12d0km7"),f(Be,"class","side-box svelte-12d0km7"),f(be,"class","side-by-side-section svelte-12d0km7")},m(L,Y){Z(L,e,Y),it(t,e,null),n(e,l),n(e,s);for(let x=0;x<ue.length;x+=1)ue[x]&&ue[x].m(s,null);n(s,i),n(s,c),n(c,d),n(c,k),n(c,E),n(E,_),n(_,D),de&&de.m(D,null),n(D,g),n(D,p),n(p,I),n(_,A),n(_,V),n(V,b),n(b,v),n(v,M),n(v,P),n(v,S),n(S,q),n(q,W),n(q,z),n(S,j),n(S,H),n(b,O),Ie.m(b,null),n(V,Q),n(V,U),n(U,X),n(X,R),n(X,G),n(X,w),n(w,ee),n(ee,He),n(ee,Ve),n(U,ke),Pe.m(U,null),n(V,Fe),he&&he.m(V,null),a[29](_),n(E,Oe),n(E,we),a[30](we),n(E,Ce),n(E,Re),a[31](Re),a[32](s),n(e,lt),n(e,C),n(C,te),n(C,_e),n(C,ie),n(ie,ce),n(ie,ge),n(ie,fe),n(fe,De),n(fe,oe),it(pe,fe,null),n(ie,Ue),n(ie,Se),n(e,Ze),n(e,be),n(be,ye),n(ye,Ge),n(ye,Tt),n(ye,je),n(ye,Lt),le&&le.m(ye,null),n(be,Ht),n(be,Be),n(Be,ze),n(Be,At),n(Be,qe),n(Be,St),ae&&ae.m(Be,null),n(e,It),it(We,e,null),a[34](e),Ke=!0},p(L,Y){if(Y[0]&26214400){Je=Ae(L[20]);let x;for(x=0;x<Je.length;x+=1){const Xe=ul(L,Je,x);ue[x]?ue[x].p(Xe,Y):(ue[x]=dl(Xe),ue[x].c(),ue[x].m(s,i))}for(;x<ue.length;x+=1)ue[x].d(1);ue.length=Je.length}L[19]?de?de.p(L,Y):(de=hl(L),de.c(),de.m(D,g)):de&&(de.d(1),de=null),(!Ke||Y[0]&32768)&&ve(I,L[15]),(!Ke||Y[0]&65536)&&ve(z,L[16]),ut!==(ut=Kt(L))&&(Ie.d(1),Ie=ut(L),Ie&&(Ie.c(),Ie.m(b,null))),(!Ke||Y[0]&131072)&&ve(Ve,L[17]),dt!==(dt=Xt(L))&&(Pe.d(1),Pe=dt(L),Pe&&(Pe.c(),Pe.m(U,null))),L[22]!==null?he?he.p(L,Y):(he=ml(L),he.c(),he.m(V,null)):he&&(he.d(1),he=null),L[6]?le&&($t(),Ne(le,1,1,()=>{le=null}),xt()):le?(le.p(L,Y),Y[0]&64&&Te(le,1)):(le=vl(L),le.c(),Te(le,1),le.m(ye,null)),L[6]?ae&&($t(),Ne(ae,1,1,()=>{ae=null}),xt()):ae?(ae.p(L,Y),Y[0]&64&&Te(ae,1)):(ae=_l(L),ae.c(),Te(ae,1),ae.m(Be,null))},i(L){Ke||(Te(t.$$.fragment,L),Te(pe.$$.fragment,L),Te(le),Te(ae),Te(We.$$.fragment,L),Ke=!0)},o(L){Ne(t.$$.fragment,L),Ne(pe.$$.fragment,L),Ne(le),Ne(ae),Ne(We.$$.fragment,L),Ke=!1},d(L){L&&u(e),ot(t),rt(ue,L),de&&de.d(),Ie.d(),Pe.d(),he&&he.d(),a[29](null),a[30](null),a[31](null),a[32](null),ot(pe),le&&le.d(),ae&&ae.d(),ot(We),a[34](null)}}}function aa(a,e,t){let{data:l}=e,s=l.LADToName,i,c,d,h,k,E,_,D,g,p=!0;async function I(){c=await Et(Pl()),t(1,d=await Et(Nl())),h=await Et(Ml()),c=[...c].sort((C,te)=>te.total-C.total),t(1,d=[...d].sort((C,te)=>te.total_value-C.total_value)),console.log("aggregationPerCapitaPerBenefit",d),k=h[0].total_value_per_capita,t(2,E=Math.max(...d.map(C=>C.total_value))),t(3,_=Math.min(...d.map(C=>C.total_value))),t(4,D=Math.min(...d.map(C=>C.value_per_capita))),t(5,g=Math.max(...d.map(C=>C.value_per_capita))),t(6,p=!1)}let A=[],V="All",b="total",v=0,M=0;async function F(){const C=Fl({region:V,sortBy:b}),te=await Et(C);t(7,A=te),t(10,v=Math.max(...te.map(re=>re.total_value))),t(11,M=Math.max(...te.map(re=>re.value_per_capita)))}function P(C){t(8,V=C.detail.region),t(9,b=C.detail.sortBy),F()}let S,q=[],W=null,z,j,H,K,O="",Q,U=null,X=[],R,T=null,G=0,w=0,ee;function He(C){const te=S.filter($=>$.type!=="empty").map($=>$.type),re=Array.from(new Set(te)),_e=c.reduce(($,ge)=>$+ge.total,0),ie=[{type:null,label:"Total Co-Benefits",icon:null,totalValue:_e.toFixed(2),perCapitaValue:k.toFixed(2),percentValue:"100%"},...re.map($=>{const fe=Ut.find(be=>be.id===$)?.label??$;let De=Ot($);const N=c.find(be=>be.co_benefit_type===$),oe=d.find(be=>be.co_benefit_type===$),pe=N?.total??0,Ue=oe?.value_per_capita??0,Se=pe.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),ft=Ue.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Ze=_e>0?(pe/_e*100).toFixed(2):0;return console.log("percentage",$,pe,_e,Ze),{type:$,label:fe,icon:De,totalValue:Se,perCapitaValue:ft,percentValue:Ze}})];setInterval(()=>{t(24,w=G),t(23,G=(G+1)%ie.length);const{type:$,label:ge,icon:fe,totalValue:De,perCapitaValue:N,percentValue:oe}=ie[G];t(22,T=$),t(15,H=ge),t(16,K=De),t(17,O=N),t(18,Q=oe),t(19,U=fe),Ve(C,$)},5e3);const ce=ie[0];t(22,T=ce.type),t(15,H=ce.label),t(16,K=ce.totalValue),t(17,O=ce.perCapitaValue),t(18,Q=ce.percentValue),Ve(C,ce.type),console.log("update display",X)}function Ve(C,te){if(!W)return;t(12,W.innerHTML="",W);const re=20,_e=15,ie=Math.floor(C/re),ce=_e*ie,$=c.reduce((N,oe)=>N+oe.total,0),ge=[];for(const N of c){const oe=Math.round(Math.abs(N.total)/$*ce),pe=N.total<0;for(let Ue=0;Ue<oe;Ue++)ge.push({type:N.co_benefit_type,negative:pe})}for(;ge.length<ce;)ge.push({type:"empty"});ge.sort((N,oe)=>N.type==="empty"?1:oe.type==="empty"?-1:N.negative&&!oe.negative?1:!N.negative&&oe.negative?-1:0),S=ge.map((N,oe)=>({x:oe%_e,y:Math.floor(oe/_e),...N})),q=Array.from(new Set(S.map(N=>N.type).filter(N=>N!=="empty"))),t(20,X=Ll(q));const fe=te??null,De=wt({width:re*_e,height:re*ie,margin:0,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:Ut.map(N=>N.id),range:Hl,unknown:"#eee",legend:!1},marks:[el(S.filter(N=>!N.negative),{x:N=>N.x*re,y:N=>N.y*re,fill:"type",fillOpacity:N=>fe&&N.type!==fe?.15:1}),el(S.filter(N=>N.negative),{x:N=>N.x*re,y:N=>N.y*re,stroke:"type",strokeOpacity:N=>fe&&N.type!==fe?.15:1,strokeWidth:1,fill:"none"})]});z&&(t(13,z.style.width=`${re*_e}px`,z),t(13,z.style.height=`${C}px`,z)),t(12,W.innerHTML="",W),W.append(De)}function ke(C){window.open(`${me}/location?location=${C}`,"_blank")}Dl(()=>{Bl(i),I().then(()=>{F();const C=R.getBoundingClientRect().height;Ve(C),He(C),Tl(i)})}),El(()=>{clearInterval(ee)});function Fe(C){at[C?"unshift":"push"](()=>{j=C,t(14,j)})}function Oe(C){at[C?"unshift":"push"](()=>{z=C,t(13,z)})}function we(C){at[C?"unshift":"push"](()=>{W=C,t(12,W)})}function Ce(C){at[C?"unshift":"push"](()=>{R=C,t(21,R)})}const Re=C=>ke(C.detail);function lt(C){at[C?"unshift":"push"](()=>{i=C,t(0,i)})}return a.$$set=C=>{"data"in C&&t(28,l=C.data)},a.$$.update=()=>{a.$$.dirty[0]&268435456},[i,d,E,_,D,g,p,A,V,b,v,M,W,z,j,H,K,O,Q,U,X,R,T,G,w,s,P,ke,l,Fe,Oe,we,Ce,Re,lt]}class ga extends yt{constructor(e){super(),Bt(this,e,aa,la,ct,{data:28},null,[-1,-1])}}export{ga as component};
