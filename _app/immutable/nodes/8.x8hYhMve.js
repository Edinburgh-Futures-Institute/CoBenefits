import{s as Vn,o as Bn,d as gt}from"../chunks/scheduler.CYrT1uMS.js";import{S as Nn,i as Sn,q as Pn,s as B,e as _,t as pt,r as Hn,f as N,c as C,a as H,m as q,b as vt,d as T,n as M,v as Fn,g as Nt,h as v,o as Rn,k as On,l as jn,w as qn,p as Un}from"../chunks/index.E94wl68j.js";import{e as Qe}from"../chunks/each.-gASlQSi.js";import{n as Wn}from"../chunks/transform.Cz5Y6iUM.js";import{F as Yn,G as Ae,H as Xn,I as Zn,C as ue,J as wn,K as Ve,b as Kt,L as Se,M as $t,N as Kn,O as Gn,P as Qn,c as te,a as ee,d as Zt,Q as Jn,p as ce,e as Pe,R as $n,S as Je,T as $e,U as _n,V as tr,W as Cn,X as he,Y as de,m as Mn,Z as er,_ as Be,$ as nr,g as xn,h as fe,a0 as rr,a1 as or,a2 as sr,a3 as tn,a4 as ar,a5 as ir,a6 as kn,a7 as en,a8 as lr,f as cr,a9 as ur,aa as fr,ab as En,ac as hr,ad as dr,w as An,ae as Dn,af as pr,ag as Ln,j as Jt,n as vr,k as mr,ah as gr,ai as yr,i as st,aj as dt,s as at,ak as br,al as wr,l as nn,q as rn}from"../chunks/index.CbJWhmk4.js";import{M as _r,g as Cr}from"../chunks/map.C5IZ1oIR.js";import{S as Ne,M as it,a as on,b as Mr,T as De,V as xr,A as Ut,c as kr,C as Er,d as sn}from"../chunks/globals.5lHjyW26.js";import{N as Ar}from"../chunks/NavigationBar.CEf3R9H_.js";import{t as Dr,A as Lr,f as zn,m as zr,c as an,s as Tr,g as Ir,h as Vr,b as It,d as Le,a as ln,e as cn}from"../chunks/bar.Czf8fWyt.js";const Br=Nr(Sr);function Nr(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:s,width:o,height:l}=e;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((l=Math.floor(l!==void 0?l:s.length/o))>=0))throw new RangeError("invalid height");if(!o||!l||!n&&!r)return e;const u=n&&t(n),c=r&&t(r),i=s.slice();return u&&c?(Wt(u,i,s,o,l),Wt(u,s,i,o,l),Wt(u,i,s,o,l),Yt(c,s,i,o,l),Yt(c,i,s,o,l),Yt(c,s,i,o,l)):u?(Wt(u,s,i,o,l),Wt(u,i,s,o,l),Wt(u,s,i,o,l)):c&&(Yt(c,s,i,o,l),Yt(c,i,s,o,l),Yt(c,s,i,o,l)),e}}function Wt(t,e,n,r,s){for(let o=0,l=r*s;o<l;)t(e,n,o,o+=r,1)}function Yt(t,e,n,r,s){for(let o=0,l=r*s;o<r;++o)t(e,n,o,o+l,r)}function Sr(t){const e=Math.floor(t);if(e===t)return Pr(t);const n=t-e,r=2*t+1;return(s,o,l,u,c)=>{if(!((u-=c)>=l))return;let i=e*o[l];const a=c*e,d=a+c;for(let f=l,h=l+a;f<h;f+=c)i+=o[Math.min(u,f)];for(let f=l,h=u;f<=h;f+=c)i+=o[Math.min(u,f+a)],s[f]=(i+n*(o[Math.max(l,f-d)]+o[Math.min(u,f+d)]))/r,i-=o[Math.max(l,f-a)]}}function Pr(t){const e=2*t+1;return(n,r,s,o,l)=>{if(!((o-=l)>=s))return;let u=t*r[s];const c=l*t;for(let i=s,a=s+c;i<a;i+=l)u+=r[Math.min(o,i)];for(let i=s,a=o;i<=a;i+=l)u+=r[Math.min(o,i+c)],n[i]=u/e,u-=r[Math.max(s,i-c)]}}function Hr(t,e,n){let r;for(;;){const s=Yn(t,e,n);if(s===r||s===0||!isFinite(s))return[t,e];s>0?(t=Math.floor(t/s)*s,e=Math.ceil(e/s)*s):s<0&&(t=Math.ceil(t*s)/s,e=Math.floor(e*s)/s),r=s}}function Tn(t,e=Ae){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=Ae);const s=(u,c)=>e(n[u],n[c]);let o,l;return t=Uint32Array.from(n,(u,c)=>c),t.sort(e===Ae?(u,c)=>Xn(n[u],n[c]):Zn(s)),t.forEach((u,c)=>{const i=s(u,o===void 0?u:o);i>=0?((o===void 0||i>0)&&(o=u,l=c),r[u]=l):r[u]=NaN}),r}var Fr=Array.prototype,In=Fr.slice;function Rr(t,e){return t-e}function Or(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}const xt=t=>()=>t;function jr(t,e){for(var n=-1,r=e.length,s;++n<r;)if(s=qr(t,e[n]))return s;return 0}function qr(t,e){for(var n=e[0],r=e[1],s=-1,o=0,l=t.length,u=l-1;o<l;u=o++){var c=t[o],i=c[0],a=c[1],d=t[u],f=d[0],h=d[1];if(Ur(c,d,e))return 0;a>r!=h>r&&n<(f-i)*(r-a)/(h-a)+i&&(s=-s)}return s}function Ur(t,e,n){var r;return Wr(t,e,n)&&Yr(t[r=+(t[0]===e[0])],n[r],e[r])}function Wr(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function Yr(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function Xr(){}var yt=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function un(){var t=1,e=1,n=Dr,r=c;function s(i){var a=n(i);if(Array.isArray(a))a=a.slice().sort(Rr);else{const d=ue(i,Zr);for(a=wn(...Hr(d[0],d[1],a),a);a[a.length-1]>=d[1];)a.pop();for(;a[1]<d[0];)a.shift()}return a.map(d=>o(i,d))}function o(i,a){const d=a==null?NaN:+a;if(isNaN(d))throw new Error(`invalid value: ${a}`);var f=[],h=[];return l(i,d,function(g){r(g,i,d),Or(g)>0?f.push([g]):h.push(g)}),h.forEach(function(g){for(var w=0,b=f.length,A;w<b;++w)if(jr((A=f[w])[0],g)!==-1){A.push(g);return}}),{type:"MultiPolygon",value:a,coordinates:f}}function l(i,a,d){var f=new Array,h=new Array,g,w,b,A,p,k;for(g=w=-1,A=Vt(i[0],a),yt[A<<1].forEach(E);++g<t-1;)b=A,A=Vt(i[g+1],a),yt[b|A<<1].forEach(E);for(yt[A<<0].forEach(E);++w<e-1;){for(g=-1,A=Vt(i[w*t+t],a),p=Vt(i[w*t],a),yt[A<<1|p<<2].forEach(E);++g<t-1;)b=A,A=Vt(i[w*t+t+g+1],a),k=p,p=Vt(i[w*t+g+1],a),yt[b|A<<1|p<<2|k<<3].forEach(E);yt[A|p<<3].forEach(E)}for(g=-1,p=i[w*t]>=a,yt[p<<2].forEach(E);++g<t-1;)k=p,p=Vt(i[w*t+g+1],a),yt[p<<2|k<<3].forEach(E);yt[p<<3].forEach(E);function E(L){var y=[L[0][0]+g,L[0][1]+w],D=[L[1][0]+g,L[1][1]+w],z=u(y),S=u(D),x,V;(x=h[z])?(V=f[S])?(delete h[x.end],delete f[V.start],x===V?(x.ring.push(D),d(x.ring)):f[x.start]=h[V.end]={start:x.start,end:V.end,ring:x.ring.concat(V.ring)}):(delete h[x.end],x.ring.push(D),h[x.end=S]=x):(x=f[S])?(V=h[z])?(delete f[x.start],delete h[V.end],x===V?(x.ring.push(D),d(x.ring)):f[V.start]=h[x.end]={start:V.start,end:x.end,ring:V.ring.concat(x.ring)}):(delete f[x.start],x.ring.unshift(y),f[x.start=z]=x):f[z]=h[S]={start:z,end:S,ring:[y,D]}}}function u(i){return i[0]*2+i[1]*(t+1)*4}function c(i,a,d){i.forEach(function(f){var h=f[0],g=f[1],w=h|0,b=g|0,A=ze(a[b*t+w]);h>0&&h<t&&w===h&&(f[0]=fn(h,ze(a[b*t+w-1]),A,d)),g>0&&g<e&&b===g&&(f[1]=fn(g,ze(a[(b-1)*t+w]),A,d))})}return s.contour=o,s.size=function(i){if(!arguments.length)return[t,e];var a=Math.floor(i[0]),d=Math.floor(i[1]);if(!(a>=0&&d>=0))throw new Error("invalid size");return t=a,e=d,s},s.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Array.isArray(i)?xt(In.call(i)):xt(i),s):n},s.smooth=function(i){return arguments.length?(r=i?c:Xr,s):r===c},s}function Zr(t){return isFinite(t)?t:NaN}function Vt(t,e){return t==null?!1:+t>=e}function ze(t){return t==null||isNaN(t=+t)?-1/0:t}function fn(t,e,n,r){const s=r-e,o=n-e,l=isFinite(s)||isFinite(o)?s/o:Math.sign(s)/Math.sign(o);return isNaN(l)?t:t+l-.5}function Kr(t){return t[0]}function Gr(t){return t[1]}function Qr(){return 1}function Jr(){var t=Kr,e=Gr,n=Qr,r=960,s=500,o=20,l=2,u=o*3,c=r+u*2>>l,i=s+u*2>>l,a=xt(20);function d(p){var k=new Float32Array(c*i),E=Math.pow(2,-l),L=-1;for(const I of p){var y=(t(I,++L,p)+u)*E,D=(e(I,L,p)+u)*E,z=+n(I,L,p);if(z&&y>=0&&y<c&&D>=0&&D<i){var S=Math.floor(y),x=Math.floor(D),V=y-S-.5,W=D-x-.5;k[S+x*c]+=(1-V)*(1-W)*z,k[S+1+x*c]+=V*(1-W)*z,k[S+1+(x+1)*c]+=V*W*z,k[S+(x+1)*c]+=(1-V)*W*z}}return Br({data:k,width:c,height:i},o*E),k}function f(p){var k=d(p),E=a(k),L=Math.pow(2,2*l);return Array.isArray(E)||(E=wn(Number.MIN_VALUE,Ve(k)/L,E)),un().size([c,i]).thresholds(E.map(y=>y*L))(k).map((y,D)=>(y.value=+E[D],h(y)))}f.contours=function(p){var k=d(p),E=un().size([c,i]),L=Math.pow(2,2*l),y=D=>{D=+D;var z=h(E.contour(k,D*L));return z.value=D,z};return Object.defineProperty(y,"max",{get:()=>Ve(k)/L}),y};function h(p){return p.coordinates.forEach(g),p}function g(p){p.forEach(w)}function w(p){p.forEach(b)}function b(p){p[0]=p[0]*Math.pow(2,l)-u,p[1]=p[1]*Math.pow(2,l)-u}function A(){return u=o*3,c=r+u*2>>l,i=s+u*2>>l,f}return f.x=function(p){return arguments.length?(t=typeof p=="function"?p:xt(+p),f):t},f.y=function(p){return arguments.length?(e=typeof p=="function"?p:xt(+p),f):e},f.weight=function(p){return arguments.length?(n=typeof p=="function"?p:xt(+p),f):n},f.size=function(p){if(!arguments.length)return[r,s];var k=+p[0],E=+p[1];if(!(k>=0&&E>=0))throw new Error("invalid size");return r=k,s=E,A()},f.cellSize=function(p){if(!arguments.length)return 1<<l;if(!((p=+p)>=1))throw new Error("invalid cell size");return l=Math.floor(Math.log(p)/Math.LN2),A()},f.thresholds=function(p){return arguments.length?(a=typeof p=="function"?p:Array.isArray(p)?xt(In.call(p)):xt(p),f):a},f.bandwidth=function(p){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((p=+p)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*p*p+1)-1)/2,A()},f}const $r={ariaLabel:"cell"};class to extends Lr{constructor(e,{x:n,y:r,...s}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},s,$r)}_transform(e,n){e.call(Kt,n,{},0,0)}}function hn(t,{x:e,y:n,...r}={}){return[e,n]=Se(e,n),new to(t,{...r,x:e,y:n})}const eo={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function no(t){return t.sort===void 0&&t.reverse===void 0?$n({channel:"-r"},t):t}class ro extends $t{constructor(e,n={}){const{x:r,y:s,r:o,rotate:l,symbol:u=Je,frameAnchor:c}=n,[i,a]=$e(l,0),[d,f]=Kn(u),[h,g]=$e(o,d==null?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:s,scale:"y",optional:!0},r:{value:h,scale:"r",filter:Gn,optional:!0},rotate:{value:i,optional:!0},symbol:{value:d,scale:"auto",optional:!0}},no(n),eo),this.r=g,this.rotate=a,this.symbol=f,this.frameAnchor=Qn(c);const{channels:w}=this,{symbol:b}=w;if(b){const{fill:A,stroke:p}=w;b.hint={fill:A?A.value===b.value?"color":"currentColor":this.fill??"currentColor",stroke:p?p.value===b.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,r,s,o){const{x:l,y:u}=n,{x:c,y:i,r:a,rotate:d,symbol:f}=r,{r:h,rotate:g,symbol:w}=this,[b,A]=_n(this,s),p=w===Je,k=a?void 0:h*h*Math.PI;return tr(h)&&(e=[]),te("svg:g",o).call(ee,this,s,o).call(Kt,this,{x:c&&l,y:i&&u}).call(E=>E.selectAll().data(e).enter().append(p?"circle":"path").call(Zt,this).call(p?L=>{L.attr("cx",c?y=>c[y]:b).attr("cy",i?y=>i[y]:A).attr("r",a?y=>a[y]:h)}:L=>{L.attr("transform",Jn`translate(${c?y=>c[y]:b},${i?y=>i[y]:A})${d?y=>` rotate(${d[y]})`:g?` rotate(${g})`:""}`).attr("d",a&&f?y=>{const D=ce();return f[y].draw(D,a[y]*a[y]*Math.PI),D}:a?y=>{const D=ce();return w.draw(D,a[y]*a[y]*Math.PI),D}:f?y=>{const D=ce();return f[y].draw(D,k),D}:(()=>{const y=ce();return w.draw(y,k),y})())}).call(Pe,this,r)).node()}}function oo(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=Se(e,n)),new ro(t,{...r,x:e,y:n})}const so={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ao extends $t{constructor(e,n={}){const{x:r,y:s,z:o,curve:l,tension:u}=n;super(e,{x:{value:r,scale:"x"},y:{value:s,scale:"y"},z:{value:de(n),optional:!0}},n,so),this.z=o,this.curve=zr(l,u),Mn(this,n)}filter(e){return e}project(e,n,r){this.curve!==an&&super.project(e,n,r)}render(e,n,r,s,o){const{x:l,y:u}=r,{curve:c}=this;return te("svg:g",o).call(ee,this,s,o).call(Kt,this,n).call(i=>i.selectAll().data(er(e,[l,u],this,r)).enter().append("path").call(Zt,this).call(Be,this,r).call(nr,this,r,o).attr("d",c===an&&o.projection?io(o.projection,l,u):Tr().curve(c).defined(a=>a>=0).x(a=>l[a]).y(a=>u[a]))).node()}}function io(t,e,n){const r=xn(t);return e=fe(e),n=fe(n),s=>{let o=[];const l=[o];for(const u of s)u===-1?(o=[],l.push(o)):o.push([e[u],n[u]]);return r({type:"MultiLineString",coordinates:l})}}function lo(t,{x:e=Cn,y:n=he,...r}={}){return new ao(t,zn({...r,x:e,y:n}))}function co(t,e={}){let{y:n,y1:r,y2:s}=e;n===void 0&&r===void 0&&s===void 0&&(e={...e,y:n=he});const o={};return n!=null&&(o.y=t),r!=null&&(o.y1=t),s!=null&&(o.y2=t),uo(o,e)}function uo(t={},e={}){const n=de(e),r=Object.entries(t).map(([s,o])=>{const l=rr(s,e);if(l==null)throw new Error(`missing channel: ${s}`);const[u,c]=or(l);return{key:s,input:l,output:u,setOutput:c,map:fo(o)}});return{...sr(e,(s,o)=>{const l=tn(s,n),u=r.map(({input:i})=>tn(s,i)),c=r.map(({setOutput:i})=>i(new Array(s.length)));for(const i of o)for(const a of l?ar(i,d=>l[d]).values():[i])r.forEach(({map:d},f)=>d.mapIndex(a,u[f],c[f]));return{data:s,facets:o}}),...Object.fromEntries(r.map(({key:s,output:o})=>[s,o]))}}function fo(t){if(t==null)throw new Error("missing map");if(typeof t.mapIndex=="function")return t;if(typeof t.map=="function"&&ir(t))return ho(t);if(typeof t=="function")return Te(kn(t));switch(`${t}`.toLowerCase()){case"cumsum":return vo;case"rank":return Te((e,n)=>Tn(e,r=>n[r]));case"quantile":return Te((e,n)=>po(e,r=>n[r]))}throw new Error(`invalid map: ${t}`)}function ho(t){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:t.map.bind(t)}}function po(t,e){const n=Ir(t,e)-1;return Tn(t,e).map(r=>r/n)}function Te(t){return{mapIndex(e,n,r){const s=t(e,n);if(s.length!==e.length)throw new Error("map function returned a mismatched length");for(let o=0,l=e.length;o<l;++o)r[e[o]]=s[o]}}}const vo={mapIndex(t,e,n){let r=0;for(const s of t)n[s]=r+=e[s]}},mo={ariaLabel:"tick",fill:null,stroke:"currentColor"};class go extends $t{constructor(e,n,r){super(e,n,r,mo),Mn(this,r)}render(e,n,r,s,o){return te("svg:g",o).call(ee,this,s,o).call(this._transform,this,n).call(l=>l.selectAll().data(e).enter().append("line").call(Zt,this).attr("x1",this._x1(n,r,s)).attr("x2",this._x2(n,r,s)).attr("y1",this._y1(n,r,s)).attr("y2",this._y2(n,r,s)).call(Pe,this,r).call(cr,this,r,o)).node()}}class yo extends go{constructor(e,n={}){const{x:r,y:s,inset:o=0,insetTop:l=o,insetBottom:u=o}=n;super(e,{x:{value:r,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n),this.insetTop=en(l),this.insetBottom=en(u)}_transform(e,n,{x:r}){e.call(Kt,n,{x:r},lr,0)}_x1(e,{x:n}){return r=>n[r]}_x2(e,{x:n}){return r=>n[r]}_y1({y:e},{y:n},{marginTop:r}){const{insetTop:s}=this;return n&&e?o=>n[o]+s:r+s}_y2({y:e},{y:n},{height:r,marginBottom:s}){const{insetBottom:o}=this;return n&&e?l=>n[l]+e.bandwidth()-o:r-s-o}}function Ie(t,{x:e=he,...n}={}){return new yo(t,{...n,x:e})}const bo={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class wo extends $t{constructor(e,{x:n,y:r,z:s,weight:o,fill:l,stroke:u,...c}={}){const i=dn(l)&&(l="currentColor",!0),a=dn(u)&&(u="currentColor",!0);super(e,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:de({z:s,fill:l,stroke:u}),optional:!0},weight:{value:o,optional:!0}},Mo({...c,fill:l,stroke:u},i,a),bo),i&&(this.fill=void 0),a&&(this.stroke=void 0),this.z=s}filter(e){return e}render(e,n,r,s,o){const{contours:l}=r,u=xn();return te("svg:g",o).call(ee,this,s,o).call(Kt,this,{}).call(c=>c.selectAll().data(e).enter().append("path").call(Zt,this).call(Pe,this,r).attr("d",i=>u(l[i]))).node()}}function _o(t,{x:e,y:n,...r}={}){return[e,n]=Se(e,n),new wo(t,{...r,x:e,y:n})}const Co=new Set(["x","y","z","weight"]);function Mo(t,e,n){let{bandwidth:s,thresholds:o}=t;return s=s===void 0?20:+s,o=o===void 0?20:typeof o?.[Symbol.iterator]=="function"?fe(o):+o,ur(t,function(l,u,c,i,a,d){const f=c.weight?fe(c.weight.value):null,h=c.z?.value,{z:g}=this,[w,b]=_n(this,a),{width:A,height:p}=a,{x:k,y:E}=fr(c,i,d),L=Object.fromEntries(Object.entries(c).filter(([I])=>!Co.has(I)).map(([I,R])=>[I,{...R,value:[]}])),y=e&&[],D=n&&[],z=Jr().x(k?I=>k[I]:w).y(E?I=>E[I]:b).weight(f?I=>f[I]:1).size([A,p]).bandwidth(s),S=[];for(const I of u){const R=[];S.push(R);for(const K of h?En(I,h,g):[I]){const J=z.contours(K);R.push([K,J])}}let x=o;if(!(x instanceof hr)){let I=0;for(const R of S)for(const[,K]of R){const J=K.max;J>I&&(I=J)}x=Float64Array.from({length:o-1},(R,K)=>I*100*(K+1)/o)}const V=[],W=[];for(const I of S){const R=[];V.push(R);for(const[K,J]of I)for(const U of x){R.push(W.length),W.push(J(U/100)),y&&y.push(U),D&&D.push(U);for(const O in L)L[O].value.push(c[O].value[K[0]])}}return y&&y.push(0),D&&D.push(0),{data:l,facets:V,channels:{...L,...y&&{fill:{value:y,scale:"color"}},...D&&{stroke:{value:D,scale:"color"}},contours:{value:W}}}})}function dn(t){return/^density$/i.test(t)}function xo(t,e,n){var r=1e-8,s=e-1,o=n-1,l=0,u,c,i,a,d,f,h,g,w,b,A;if(t<=0)return 0;if(t>=1)return 1;for(e>=1&&n>=1?(i=t<.5?t:1-t,a=Math.sqrt(-2*Math.log(i)),h=(2.30753+a*.27061)/(1+a*(.99229+a*.04481))-a,t<.5&&(h=-h),g=(h*h-3)/6,w=2/(1/(2*e-1)+1/(2*n-1)),b=h*Math.sqrt(g+w)/w-(1/(2*n-1)-1/(2*e-1))*(g+5/6-2/(3*w)),h=e/(e+n*Math.exp(2*b))):(u=Math.log(e/(e+n)),c=Math.log(n/(e+n)),a=Math.exp(e*u)/e,d=Math.exp(n*c)/n,b=a+d,t<a/b?h=Math.pow(e*b*t,1/e):h=1-Math.pow(n*b*(1-t),1/n)),A=-Xt(e)-Xt(n)+Xt(e+n);l<10;l++){if(h===0||h===1)return h;if(f=ko(h,e,n)-t,a=Math.exp(s*Math.log(h)+o*Math.log(1-h)+A),d=f/a,h-=a=d/(1-.5*Math.min(1,d*(s/h-o/(1-h)))),h<=0&&(h=.5*(h+a)),h>=1&&(h=.5*(h+a+1)),Math.abs(a)<r*h&&l>0)break}return h}function ko(t,e,n){var r=t===0||t===1?0:Math.exp(Xt(e+n)-Xt(e)-Xt(n)+e*Math.log(t)+n*Math.log(1-t));return t<0||t>1?!1:t<(e+1)/(e+n+2)?r*pn(t,e,n)/e:1-r*pn(1-t,n,e)/n}function pn(t,e,n){var r=1e-30,s=1,o=e+n,l=e+1,u=e-1,c=1,i=1-o*t/l,a,d,f,h;for(Math.abs(i)<r&&(i=r),i=1/i,h=i;s<=100&&(a=2*s,d=s*(n-s)*t/((u+a)*(e+a)),i=1+d*i,Math.abs(i)<r&&(i=r),c=1+d/c,Math.abs(c)<r&&(c=r),i=1/i,h*=i*c,d=-(e+s)*(o+s)*t/((e+a)*(l+a)),i=1+d*i,Math.abs(i)<r&&(i=r),c=1+d/c,Math.abs(c)<r&&(c=r),i=1/i,f=i*c,h*=f,!(Math.abs(f-1)<3e-7));s++);return h}function Xt(t){var e=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,s,o,l;for(l=(o=s=t)+5.5,l-=(s+.5)*Math.log(l);e<6;e++)r+=n[e]/++o;return Math.log(2.506628274631*r/s)-l}function Eo(t,e){var n=xo(2*Math.min(t,1-t),.5*e,.5);return n=Math.sqrt(e*(1-n)/n),t>.5?n:-n}const Ao={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Do extends $t{constructor(e,n={}){const{x:r,y:s,z:o,ci:l=.95,precision:u=4}=n;if(super(e,{x:{value:r,scale:"x"},y:{value:s,scale:"y"},z:{value:de(n),optional:!0}},n,Ao),this.z=o,this.ci=+l,this.precision=+u,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${l}`);if(!(this.precision>0))throw new Error(`invalid precision: ${u}`)}render(e,n,r,s,o){const{x:l,y:u,z:c}=r,{ci:i}=this;return te("svg:g",o).call(ee,this,s,o).call(Kt,this,n).call(a=>a.selectAll().data(c?En(e,c,this.z):[e]).enter().call(d=>d.append("path").attr("fill","none").call(Zt,this).call(Be,this,{...r,fill:null,fillOpacity:null}).attr("d",f=>this._renderLine(f,l,u)).call(i&&!pr(this.fill)?f=>f.select(Lo).attr("stroke","none").call(Zt,this).call(Be,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",h=>this._renderBand(h,l,u)):()=>{}))).node()}}function Lo(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(Wn.svg,"path"),this)}class zo extends Do{constructor(e,n){super(e,n)}_renderBand(e,n,r){const{ci:s,precision:o}=this,[l,u]=ue(e,a=>n[a]),c=vn(e,n,r),i=Io(e,n,r,(1-s)/2,c);return Vr().x(a=>a).y0(a=>i(a,-1)).y1(a=>i(a,1))(An(l,u-o/2,o).concat(u))}_renderLine(e,n,r){const[s,o]=ue(e,u=>n[u]),l=vn(e,n,r);return`M${s},${l(s)}L${o},${l(o)}`}}function To(t,{x:e=Cn,y:n=he,stroke:r,fill:s=dr(r)?"currentColor":r,...o}={}){return new zo(t,zn({...o,x:e,y:n,fill:s,stroke:r}))}function vn(t,e,n){let r=0,s=0,o=0,l=0;for(const a of t){const d=e[a],f=n[a];r+=d,s+=f,o+=d*f,l+=d*d}const u=t.length,c=(u*o-r*s)/(u*l-r*r),i=(s-c*r)/u;return a=>c*a+i}function Io(t,e,n,r,s){const o=Dn(t,a=>e[a])/t.length;let l=0,u=0;for(const a of t)l+=(e[a]-o)**2,u+=(n[a]-s(e[a]))**2;const c=Math.sqrt(u/(t.length-2)),i=Eo(r,t.length-2);return(a,d)=>{const f=s(a),h=c*Math.sqrt(1/t.length+(a-o)**2/l);return f+d*i*h}}function mn(t,e){return arguments.length===1&&({basis:t,...e}=t),co(Vo(t),e)}function Vo(t){if(t===void 0)return gn;if(typeof t=="function")return pe(kn(t));if(/^p\d{2}$/i.test(t))return Gt(yr(t));switch(`${t}`.toLowerCase()){case"deviation":return So;case"first":return gn;case"last":return No;case"max":return Po;case"mean":return Ho;case"median":return Fo;case"min":return Ro;case"sum":return Oo;case"extent":return Bo}throw new Error(`invalid basis: ${t}`)}function pe(t){return{mapIndex(e,n,r){const s=+t(e,n);for(const o of e)r[o]=n[o]===null?NaN:n[o]/s}}}function Gt(t){return pe((e,n)=>t(e,r=>n[r]))}const Bo={mapIndex(t,e,n){const[r,s]=ue(t,l=>e[l]),o=s-r;for(const l of t)n[l]=e[l]===null?NaN:(e[l]-r)/o}},gn=pe((t,e)=>{for(let n=0;n<t.length;++n){const r=e[t[n]];if(Ln(r))return r}}),No=pe((t,e)=>{for(let n=t.length-1;n>=0;--n){const r=e[t[n]];if(Ln(r))return r}}),So={mapIndex(t,e,n){const r=Jt(t,o=>e[o]),s=vr(t,o=>e[o]);for(const o of t)n[o]=e[o]===null?NaN:s?(e[o]-r)/s:0}},Po=Gt(Ve),Ho=Gt(Jt),Fo=Gt(mr),Ro=Gt(gr),Oo=Gt(Dn);function yn(t,e,n){const r=t.slice();return r[42]=e[n],r[43]=e,r[44]=n,r}function jo(t){let e,n,r="Data Zones Distribution (vs. UK average)",s,o,l="Histogram shows the number of data zones distributed across different household social economic factors.",u,c,i="",a=t[42],d,f,h,g,w,b,A,p,k,E="Density plot refers to UK distribution while the scattered points refer to data zones in the local authority.",L,y,D="",z,S,x,V="";const W=()=>t[19](c,a),I=()=>t[19](null,a),R=()=>t[20](y,a),K=()=>t[20](null,a),J=()=>t[21](x,a),U=()=>t[21](null,a);return{c(){e=_("div"),n=_("h3"),n.textContent=r,s=B(),o=_("p"),o.textContent=l,u=B(),c=_("div"),c.innerHTML=i,d=B(),f=_("div"),h=_("div"),g=_("h3"),w=pt("Co-benefits Recieved by Data Zones across "),b=pt(t[42]),A=pt(" Values"),p=B(),k=_("p"),k.textContent=E,L=B(),y=_("div"),y.innerHTML=D,z=B(),S=_("div"),x=_("div"),x.innerHTML=V,this.h()},l(O){e=C(O,"DIV",{class:!0});var G=H(e);n=C(G,"H3",{class:!0,"data-svelte-h":!0}),q(n)!=="svelte-1d86f13"&&(n.textContent=r),s=N(G),o=C(G,"P",{class:!0,"data-svelte-h":!0}),q(o)!=="svelte-vl6og1"&&(o.textContent=l),u=N(G),c=C(G,"DIV",{class:!0,"data-svelte-h":!0}),q(c)!=="svelte-4mdt4"&&(c.innerHTML=i),G.forEach(T),d=N(O),f=C(O,"DIV",{class:!0});var ct=H(f);h=C(ct,"DIV",{});var et=H(h);g=C(et,"H3",{class:!0});var ut=H(g);w=vt(ut,"Co-benefits Recieved by Data Zones across "),b=vt(ut,t[42]),A=vt(ut," Values"),ut.forEach(T),p=N(et),k=C(et,"P",{class:!0,"data-svelte-h":!0}),q(k)!=="svelte-mjnso4"&&(k.textContent=E),L=N(et),y=C(et,"DIV",{class:!0,"data-svelte-h":!0}),q(y)!=="svelte-1kzougf"&&(y.innerHTML=D),et.forEach(T),z=N(ct),S=C(ct,"DIV",{});var nt=H(S);x=C(nt,"DIV",{class:!0,"data-svelte-h":!0}),q(x)!=="svelte-rk8pjt"&&(x.innerHTML=V),nt.forEach(T),ct.forEach(T),this.h()},h(){M(n,"class","component-title"),M(o,"class","description short"),M(c,"class","plot"),M(e,"class","component"),M(g,"class","component-title"),M(k,"class","description short"),M(y,"class","plot"),M(x,"class","plot"),M(f,"class","component")},m(O,G){Nt(O,e,G),v(e,n),v(e,s),v(e,o),v(e,u),v(e,c),W(),Nt(O,d,G),Nt(O,f,G),v(f,h),v(h,g),v(g,w),v(g,b),v(g,A),v(h,p),v(h,k),v(h,L),v(h,y),R(),v(f,z),v(f,S),v(S,x),J()},p(O,G){t=O,a!==t[42]&&(I(),a=t[42],W()),a!==t[42]&&(K(),a=t[42],R()),a!==t[42]&&(U(),a=t[42],J())},d(O){O&&(T(e),T(d),T(f)),I(),K(),U()}}}function qo(t){let e,n,r="",s=t[42];const o=()=>t[18](n,s),l=()=>t[18](null,s);return{c(){e=_("div"),n=_("div"),n.innerHTML=r,this.h()},l(u){e=C(u,"DIV",{class:!0});var c=H(e);n=C(c,"DIV",{class:!0,"data-svelte-h":!0}),q(n)!=="svelte-1shkadq"&&(n.innerHTML=r),c.forEach(T),this.h()},h(){M(n,"class","plot"),M(e,"class","component")},m(u,c){Nt(u,e,c),v(e,n),o()},p(u,c){t=u,s!==t[42]&&(l(),s=t[42],o())},d(u){u&&T(e),l()}}}function bn(t){let e,n,r,s,o,l;function u(a,d){return a[7]?qo:jo}let c=u(t),i=c(t);return{c(){e=_("div"),n=_("h2"),r=pt(t[42]),s=B(),o=_("div"),i.c(),l=B(),this.h()},l(a){e=C(a,"DIV",{});var d=H(e);n=C(d,"H2",{});var f=H(n);r=vt(f,t[42]),f.forEach(T),s=N(d),o=C(d,"DIV",{class:!0});var h=H(o);i.l(h),h.forEach(T),l=N(d),d.forEach(T),this.h()},h(){M(o,"class","row")},m(a,d){Nt(a,e,d),v(e,n),v(n,r),v(e,s),v(e,o),i.m(o,null),v(e,l)},p(a,d){c===(c=u(a))&&i?i.p(a,d):(i.d(1),i=c(a),i&&(i.c(),i.m(o,null)))},d(a){a&&T(e),i.d()}}}function Uo(t){let e,n,r,s,o,l="Data Report",u,c,i=t[10][t[9]]+"",a,d,f,h="Explore how this local authority will benefit from achieving Net Zero and general factors of their households.",g,w,b,A='<p class="section-subtitle">Overview</p> <h2 class="section-title">How much co-benefit values would this area recieve?</h2> <p class="description">We calculate and model 11 types of co-benefits across five different pathyways suggested by Climate Change Committee in the Sixth Carbon Budget from 2025-2050 on the level of data zones across UK.</p>',p,k,E,L,y="11 Types of Co-Benefits Values (vs. UK Average)",D,z,S,x=t[10][t[9]]+"",V,W,I,R,K="",J,U,O,G=t[10][t[9]]+"",ct,et,ut,nt,m="Scroll for zooming in and out.",F,$,mt="",Y,rt,X,ot='<p class="section-subtitle">Temporal Trends</p> <h2 class="section-title">How co-benefits change over time?</h2> <p class="description">Detailed breakdown of temporal trends for total co-benefits, types of co-benefits, and five pathways.</p>',St,ft,kt,He="Total Co-benefits Distribution from 2025-2050 (vs. UK Average)",ve,Pt,bt,Fe="",me,wt,Et,Re="11 Types of Co-benefits Distribution Following Balance Pathway from 2025-2050",ge,Ht,Ft,_t,Oe="",ye,Ct,tt,At,je="Households",be,Dt,qe="Social Economic Factors of Households",we,Lt,Ue="We describe the distribution of household economic factors aggregated on the data zone level and the different level of co-benefits recieved by those data zones.",_e,zt,Ce,Tt,We="Aggregate Plots",Me,Mt,ne,xe,Ye;e=new Ar({});let Rt=Qe(Ne),Z=[];for(let P=0;P<Rt.length;P+=1)Z[P]=bn(yn(t,Rt,P));return{c(){Pn(e.$$.fragment),n=B(),r=_("div"),s=_("div"),o=_("p"),o.textContent=l,u=B(),c=_("h1"),a=pt(i),d=B(),f=_("p"),f.textContent=h,g=B(),w=_("div"),b=_("div"),b.innerHTML=A,p=B(),k=_("div"),E=_("div"),L=_("h3"),L.textContent=y,D=B(),z=_("p"),S=pt("Co-benefits values in "),V=pt(x),W=pt(" verus average value across all local authorities in UK."),I=B(),R=_("div"),R.innerHTML=K,J=B(),U=_("div"),O=_("h3"),ct=pt(G),et=pt(" on UK Map"),ut=B(),nt=_("p"),nt.textContent=m,F=B(),$=_("div"),$.innerHTML=mt,Y=B(),rt=_("div"),X=_("div"),X.innerHTML=ot,St=B(),ft=_("div"),kt=_("h3"),kt.textContent=He,ve=B(),Pt=_("div"),bt=_("div"),bt.innerHTML=Fe,me=B(),wt=_("div"),Et=_("h3"),Et.textContent=Re,ge=B(),Ht=_("div"),Ft=_("div"),_t=_("div"),_t.innerHTML=Oe,ye=B(),Ct=_("div"),tt=_("div"),At=_("p"),At.textContent=je,be=B(),Dt=_("h2"),Dt.textContent=qe,we=B(),Lt=_("p"),Lt.textContent=Ue,_e=B(),zt=_("input"),Ce=B(),Tt=_("label"),Tt.textContent=We,Me=B(),Mt=_("div");for(let P=0;P<Z.length;P+=1)Z[P].c();this.h()},l(P){Hn(e.$$.fragment,P),n=N(P),r=C(P,"DIV",{class:!0});var Q=H(r);s=C(Q,"DIV",{class:!0});var j=H(s);o=C(j,"P",{class:!0,"data-svelte-h":!0}),q(o)!=="svelte-1gxb8h1"&&(o.textContent=l),u=N(j),c=C(j,"H1",{class:!0});var Qt=H(c);a=vt(Qt,i),Qt.forEach(T),d=N(j),f=C(j,"P",{class:!0,"data-svelte-h":!0}),q(f)!=="svelte-5qj0r2"&&(f.textContent=h),j.forEach(T),g=N(Q),w=C(Q,"DIV",{class:!0});var re=H(w);b=C(re,"DIV",{class:!0,"data-svelte-h":!0}),q(b)!=="svelte-42ok6n"&&(b.innerHTML=A),p=N(re),k=C(re,"DIV",{id:!0,class:!0});var oe=H(k);E=C(oe,"DIV",{class:!0});var Ot=H(E);L=C(Ot,"H3",{class:!0,"data-svelte-h":!0}),q(L)!=="svelte-1o9zf4n"&&(L.textContent=y),D=N(Ot),z=C(Ot,"P",{class:!0});var se=H(z);S=vt(se,"Co-benefits values in "),V=vt(se,x),W=vt(se," verus average value across all local authorities in UK."),se.forEach(T),I=N(Ot),R=C(Ot,"DIV",{class:!0,"data-svelte-h":!0}),q(R)!=="svelte-1qxob4b"&&(R.innerHTML=K),Ot.forEach(T),J=N(oe),U=C(oe,"DIV",{class:!0});var jt=H(U);O=C(jt,"H3",{class:!0});var ke=H(O);ct=vt(ke,G),et=vt(ke," on UK Map"),ke.forEach(T),ut=N(jt),nt=C(jt,"P",{class:!0,"data-svelte-h":!0}),q(nt)!=="svelte-1ask2se"&&(nt.textContent=m),F=N(jt),$=C(jt,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),q($)!=="svelte-1nhow06"&&($.innerHTML=mt),jt.forEach(T),oe.forEach(T),re.forEach(T),Y=N(Q),rt=C(Q,"DIV",{class:!0});var qt=H(rt);X=C(qt,"DIV",{class:!0,"data-svelte-h":!0}),q(X)!=="svelte-1ttf9zc"&&(X.innerHTML=ot),St=N(qt),ft=C(qt,"DIV",{class:!0});var ae=H(ft);kt=C(ae,"H3",{class:!0,"data-svelte-h":!0}),q(kt)!=="svelte-td9req"&&(kt.textContent=He),ve=N(ae),Pt=C(ae,"DIV",{class:!0});var Xe=H(Pt);bt=C(Xe,"DIV",{class:!0,"data-svelte-h":!0}),q(bt)!=="svelte-ghq0r3"&&(bt.innerHTML=Fe),Xe.forEach(T),ae.forEach(T),me=N(qt),wt=C(qt,"DIV",{class:!0});var ie=H(wt);Et=C(ie,"H3",{class:!0,"data-svelte-h":!0}),q(Et)!=="svelte-i61rsm"&&(Et.textContent=Re),ge=N(ie),Ht=C(ie,"DIV",{class:!0});var Ze=H(Ht);Ft=C(Ze,"DIV",{class:!0});var Ke=H(Ft);_t=C(Ke,"DIV",{class:!0,"data-svelte-h":!0}),q(_t)!=="svelte-m4szn7"&&(_t.innerHTML=Oe),Ke.forEach(T),Ze.forEach(T),ie.forEach(T),qt.forEach(T),ye=N(Q),Ct=C(Q,"DIV",{class:!0});var le=H(Ct);tt=C(le,"DIV",{class:!0});var ht=H(tt);At=C(ht,"P",{class:!0,"data-svelte-h":!0}),q(At)!=="svelte-ceroz1"&&(At.textContent=je),be=N(ht),Dt=C(ht,"H2",{class:!0,"data-svelte-h":!0}),q(Dt)!=="svelte-so6kne"&&(Dt.textContent=qe),we=N(ht),Lt=C(ht,"P",{class:!0,"data-svelte-h":!0}),q(Lt)!=="svelte-ep3r6m"&&(Lt.textContent=Ue),_e=N(ht),zt=C(ht,"INPUT",{type:!0}),Ce=N(ht),Tt=C(ht,"LABEL",{for:!0,"data-svelte-h":!0}),q(Tt)!=="svelte-1kwkdzm"&&(Tt.textContent=We),ht.forEach(T),Me=N(le),Mt=C(le,"DIV",{id:!0,class:!0});var Ge=H(Mt);for(let Ee=0;Ee<Z.length;Ee+=1)Z[Ee].l(Ge);Ge.forEach(T),le.forEach(T),Q.forEach(T),this.h()},h(){M(o,"class","page-subtitle"),M(c,"class","page-title"),M(f,"class","description"),M(s,"class","section header"),M(b,"class","section-header"),M(L,"class","component-title"),M(z,"class","description"),M(R,"class","plot"),M(E,"class","component column"),M(O,"class","component-title"),M(nt,"class","description"),M($,"id","map"),M($,"class","svelte-wd9p4b"),M(U,"class","component column"),M(k,"id","vis-block"),M(k,"class","svelte-wd9p4b"),M(w,"class","section"),M(X,"class","section-header"),M(kt,"class","component-title"),M(bt,"class","plot"),M(Pt,"class","row"),M(ft,"class","component singlevis"),M(Et,"class","component-title"),M(_t,"class","plot"),M(Ft,"class","row"),M(Ht,"class","row"),M(wt,"class","component singlevis"),M(rt,"class","section"),M(At,"class","section-subtitle"),M(Dt,"class","section-title"),M(Lt,"class","description"),M(zt,"type","checkbox"),M(Tt,"for","checkbox"),M(tt,"class","section-header"),M(Mt,"id","multiple-comp"),M(Mt,"class","svelte-wd9p4b"),M(Ct,"class","section"),M(r,"class","page-container")},m(P,Q){Fn(e,P,Q),Nt(P,n,Q),Nt(P,r,Q),v(r,s),v(s,o),v(s,u),v(s,c),v(c,a),v(s,d),v(s,f),v(r,g),v(r,w),v(w,b),v(w,p),v(w,k),v(k,E),v(E,L),v(E,D),v(E,z),v(z,S),v(z,V),v(z,W),v(E,I),v(E,R),t[13](R),v(k,J),v(k,U),v(U,O),v(O,ct),v(O,et),v(U,ut),v(U,nt),v(U,F),v(U,$),t[14]($),v(r,Y),v(r,rt),v(rt,X),v(rt,St),v(rt,ft),v(ft,kt),v(ft,ve),v(ft,Pt),v(Pt,bt),t[15](bt),v(rt,me),v(rt,wt),v(wt,Et),v(wt,ge),v(wt,Ht),v(Ht,Ft),v(Ft,_t),t[16](_t),v(r,ye),v(r,Ct),v(Ct,tt),v(tt,At),v(tt,be),v(tt,Dt),v(tt,we),v(tt,Lt),v(tt,_e),v(tt,zt),zt.checked=t[7],v(tt,Ce),v(tt,Tt),v(Ct,Me),v(Ct,Mt);for(let j=0;j<Z.length;j+=1)Z[j]&&Z[j].m(Mt,null);t[22](r),ne=!0,xe||(Ye=Rn(zt,"change",t[17]),xe=!0)},p(P,Q){if(Q[0]&128&&(zt.checked=P[7]),Q[0]&184){Rt=Qe(Ne);let j;for(j=0;j<Rt.length;j+=1){const Qt=yn(P,Rt,j);Z[j]?Z[j].p(Qt,Q):(Z[j]=bn(Qt),Z[j].c(),Z[j].m(Mt,null))}for(;j<Z.length;j+=1)Z[j].d(1);Z.length=Rt.length}},i(P){ne||(On(e.$$.fragment,P),ne=!0)},o(P){jn(e.$$.fragment,P),ne=!1},d(P){P&&(T(n),T(r)),qn(e,P),t[13](null),t[14](null),t[15](null),t[16](null),Un(Z,P),t[22](null),xe=!1,Ye()}}}let lt=400;function Bt(t){const e=t.querySelector("figure");e&&e.remove();const n=t.querySelector("svg");n&&n.remove()}function Wo(t,e,n){let r,s,o,l,u,c={},i={},a={},d={},f="barchart",h=!1,{data:g}=e;const w=g.LAD,b=g.oneLADData,A=g.oneLADAllCBs,p=g.totalCBAllZones;g.totalCBAllZones;const k=g.allCBAllLAD,E=g.totalCBAllLAD,L=g.allCBAllLADSUM,y=g.LADToName;let D,z;Bn(()=>{D=new _r(w,"LAD",z,"val",!0),D.initMap()});function S(){{let m=st({height:lt/1.4,...it,x:{type:"band"},style:{fontSize:"18px"},marks:[It(E,dt({y:"mean"},{y:"val",x:"scenario",fill:"lightblue",opacity:.7,dx:20})),It(b,dt({y:"sum"},{y:"total",x:"scenario",tip:!0}))]});setTimeout(()=>{console.log(23,at(s));const F=at(m).selectAll("g[aria-label='bar']"),$=at(F.nodes()[0]),mt=at(F.nodes()[1]);console.log(2323232323,$.node()),mt.selectAll("rect").each(function(){console.log(2,this)}),mt.remove()},1e3)}}function x(){o?.append(st({height:lt,width:811,MARGINS:it,x:{type:"band"},marks:[It(L,dt({y:"mean"},{y:"val",x:"co_benefit_type",dx:sn,fill:Ut,tip:!0})),It(A,dt({y:"sum"},{y:"total",x:"co_benefit_type",tip:!0}))]}))}function V(){Ne.forEach(m=>{let F;h?(on.includes(m)?F=st({height:lt/3,width:500*2,...it,style:{fontSize:"18px"},color:{legend:!0,scheme:"greys"},x:{domain:An(0,6),ticks:new Set(b.map(Y=>Y[m]))},marks:[hn(b,dt({fill:"count"},{x:m,stroke:"black"})),hn([Math.floor(Jt(p.map(Y=>Y[m])))],{x:Y=>Y,stroke:"red",fill:null,strokeWidth:2})]}):F=st({height:lt/3,width:500*2,...it,style:{fontSize:"18px"},color:{legend:!0},marks:[Ie(b,{x:m,tip:!0}),Ie([Jt(b.map(Y=>Y[m]))],{stroke:"blue",strokeWidth:2}),Ie([Jt(p.map(Y=>Y[m]))],{stroke:"red",strokeWidth:2})]}),c[m]?.append(F)):(on.includes(m)?F=st({height:lt/2,width:500,...it,marginLeft:100,x:{grid:!0,label:m,tickFormat:Y=>Math.floor(Y)},style:{fontSize:"18px"},color:{legend:!0},marks:[It(p,mn(dt({y:"count"},{x:m,dx:20,fill:Ut}))),It(b,mn(dt({y:"count"},{x:m})))]}):F=st({height:lt/2,...it,style:{fontSize:"18px"},marks:[Le(b,ln({y:"proportion"},{x:m,tip:!0,fill:Ut,stroke:Ut,fillOpacity:.2,strokeWidth:3})),Le(p,ln({y:"proportion"},{x:m,tip:!0,fill:"black",stroke:"black",fillOpacity:.2,strokeWidth:3}))]}),i[m]?.append(void 0),c[m]?.append(F));let mt=st({height:lt/2,...it,style:{fontSize:"18px"},color:{range:["rgb(227, 248, 255)","lightblue"]},marks:[_o(Cr(p,3e4),{x:m,y:"total",fill:"density",thresholds:10}),oo(b,{x:m,y:"total",fill:"black",r:2}),To(b,{x:m,y:"total"}),br(),wr({anchor:"bottom"})]});a[m]?.append(mt)})}function W(){for(let m of Mr){let F=st({height:lt,width:410,...it,marginRight:0,marginLeft:100,marks:[cn(k,nn({x:"mean"},{x:"val",y:"co_benefit_type",dy:-sn/2,fill:Ut,tip:!0})),cn(A,nn({x:"mean"},{x:"total",y:"co_benefit_type",tip:!0}))]});d[m]?.append(F)}}function I(){let m=b.flatMap(X=>De.map(ot=>({time:ot,value:X[ot],scenario:X.scenario,zone:"local"}))),F=p.flatMap(X=>De.map(ot=>({time:ot,value:X[ot],scenario:X.scenario,zone:"UK"}))),$=m.concat(F),mt=st({height:lt,width:800,...it,paddingLeft:200,marginRight:0,x:{tickSize:0,label:null,ticks:[]},color:{range:[xr,Ut]},marks:[It($,dt({y:"mean"},{x:"zone",y:"value",fx:"time",tip:!0,fill:"zone"}))]});l?.append(mt),at(l).select("g[aria-label='bar']").selectAll("g").each(function(X,ot){const St=at(this).selectAll("rect").nodes()[0],ft=at(St).attr("transform")||"";at(St).attr("transform",`${ft} translate(-20, 0)`),at(this).selectAll("rect").nodes()[0].getAttribute("height"),at(this).selectAll("rect").nodes()[1].getAttribute("height"),at(this).selectAll("rect")}),st({height:lt,width:800,...it,paddingLeft:200,marginRight:0,color:{legend:!0},marks:[lo($,dt({y:"mean"},{x:"time",y:"value",tip:!0,stroke:"scenario"}))]});let Y=A.flatMap(X=>De.map(ot=>({time:ot,value:X[ot],cobenefit:X.co_benefit_type}))),rt=st({height:lt,width:1e3,...it,paddingLeft:200,marginRight:0,insetLeft:10,insetRight:10,insetBottom:30,style:{fontSize:"10px"},y:{tickFormat:".2f",label:"Value (£)"},x:{label:"Year"},color:{legend:!0,range:kr,domain:Er},marks:[Le(Y,dt({y:"mean"},{x:"time",y:"value",tip:!0,fill:"cobenefit"})),rn([0],{strokeWidth:8,stroke:"white",opacity:1,strokeLinecap:"round"}),rn([0],{strokeWidth:2,stroke:"#333333",opacity:1,strokeLinecap:"round"})]});u?.append(rt)}function R(m){gt[m?"unshift":"push"](()=>{o=m,n(0,o)})}function K(m){gt[m?"unshift":"push"](()=>{z=m,n(8,z)})}function J(m){gt[m?"unshift":"push"](()=>{l=m,n(1,l)})}function U(m){gt[m?"unshift":"push"](()=>{u=m,n(2,u)})}function O(){h=this.checked,n(7,h)}function G(m,F){gt[m?"unshift":"push"](()=>{c[F]=m,n(3,c)})}function ct(m,F){gt[m?"unshift":"push"](()=>{c[F]=m,n(3,c)})}function et(m,F){gt[m?"unshift":"push"](()=>{i[F]=m,n(4,i)})}function ut(m,F){gt[m?"unshift":"push"](()=>{a[F]=m,n(5,a)})}function nt(m){gt[m?"unshift":"push"](()=>{r=m,n(6,r)})}return t.$$set=m=>{"data"in m&&n(11,g=m.data)},t.$$.update=()=>{t.$$.dirty[0]&4103&&(o&&Bt(o),l&&Bt(l),u&&Bt(u),S(),x(),I()),t.$$.dirty[0]&56&&(Object.values(c).forEach(m=>{m&&Bt(m)}),Object.values(i).forEach(m=>{m&&Bt(m)}),Object.values(a).forEach(m=>{m&&Bt(m)}),V())},Object.values(d).forEach(m=>{m&&Bt(m)}),W(),[o,l,u,c,i,a,r,h,z,w,y,g,f,R,K,J,U,O,G,ct,et,ut,nt]}class es extends Nn{constructor(e){super(),Sn(this,e,Wo,Uo,Vn,{data:11},null,[-1,-1])}}export{es as component};
