import{s as Ie,a as E,e as r,t as L,g as C,c as i,b as u,p as rt,d as T,f as d,q as l,A as Be,i as At,h as t,z as Me,x as Ve,j as Pe,B as ke,y as bt}from"../chunks/scheduler.NCp-wYW6.js";import{S as Fe,i as Ne,c as Oe,b as we,m as He,t as qe,a as ze,d as Re}from"../chunks/index.C55kfEDL.js";import{N as Ye,e as he}from"../chunks/NavigationBar.umLcDZa4.js";import"../chunks/transform.Cz5Y6iUM.js";import{t as je,u as We,a as Ge,v as Xe,w as Ke,x as ye,y as Ee,z as Ue,A as xe,B as St,C as pe,D as ve}from"../chunks/index.Bed_awgu.js";import{M as Ze}from"../chunks/map.Zo2QzpJN.js";import{S as Lt,a as R,g as Je,T as Qe,b as $e,M as me}from"../chunks/globals.CGdpDOex.js";import{g as Jt,h as tl,i as el,j as ll}from"../chunks/duckdb.CLqChu-O.js";import{d as Ce,m as al,t as sl}from"../chunks/tick.1wznNsnR.js";import{b as De}from"../chunks/bar.Cg4HY5ly.js";import{a as nl,b as rl}from"../chunks/area.CUloC0gn.js";function il(e,{y:a=Ge,x:s=null,r:c,fill:v="#ccc",fillOpacity:g,stroke:p="currentColor",strokeOpacity:h,strokeWidth:_=2,sort:V,...b}={}){const o=s!=null?Ee:Ue;return je(We(e,o({y1:Se,y2:Ae},{x:s,y:a,stroke:p,strokeOpacity:h,...b})),De(e,o({y1:"p25",y2:"p75"},{x:s,y:a,fill:v,fillOpacity:g,...b})),sl(e,o({y:"p50"},{x:s,y:a,stroke:p,strokeOpacity:h,strokeWidth:_,sort:V,...b})),Ce(e,al({y:ol},{x:s,y:a,z:s,r:c,stroke:p,strokeOpacity:h,...b})))}function ol(e){const a=Se(e),s=Ae(e);return e.map(c=>c<a||c>s?c:NaN)}function Se(e){const a=Le(e)*2.5-Te(e)*1.5;return Xe(e,s=>s>=a?s:NaN)}function Ae(e){const a=Te(e)*2.5-Le(e)*1.5;return Ke(e,s=>s<=a?s:NaN)}function Le(e){return ye(e,.25)}function Te(e){return ye(e,.75)}function ge(e,a,s){const c=e.slice();return c[28]=a[s],c[29]=a,c[30]=s,c}function _e(e){let a,s,c=e[4].toLocaleString()+"",v,g;return{c(){a=r("p"),s=L("Total Cost Benefit: £"),v=L(c),g=L(" million"),this.h()},l(p){a=i(p,"P",{class:!0});var h=u(a);s=T(h,"Total Cost Benefit: £"),v=T(h,c),g=T(h," million"),h.forEach(d),this.h()},h(){l(a,"class","total-value svelte-vh70br")},m(p,h){At(p,a,h),t(a,s),t(a,v),t(a,g)},p(p,h){h&16&&c!==(c=p[4].toLocaleString()+"")&&Pe(v,c)},d(p){p&&d(a)}}}function be(e){let a,s,c=e[28].replaceAll("_"," ")+"",v,g,p,h=e[28],_;const V=()=>e[16](p,h),b=()=>e[16](null,h);return{c(){a=r("div"),s=r("h3"),v=L(c),g=E(),p=r("div"),_=E(),this.h()},l(o){a=i(o,"DIV",{class:!0});var I=u(a);s=i(I,"H3",{class:!0,style:!0});var F=u(s);v=T(F,c),F.forEach(d),g=C(I),p=i(I,"DIV",{class:!0}),u(p).forEach(d),_=C(I),I.forEach(d),this.h()},h(){l(s,"class","component-title"),ke(s,"text-align","center"),l(p,"class","plot"),l(a,"class","plot-container")},m(o,I){At(o,a,I),t(a,s),t(s,v),t(a,g),t(a,p),V(),t(a,_)},p(o,I){e=o,h!==e[28]&&(b(),h=e[28],V())},d(o){o&&d(a),b()}}}function cl(e){let a,s,c,v,g,p="Co-Benefit Report",h,_,V,b,o,I,F,X,it,N,J,P,pt,H,vt,mt,gt,q,O,D,Y,j,_t,n,M,y,Qt="The total? cost benefit per capita for each 5 year interval.",Tt,ot,K,$t="",It,U,Bt,Q,Mt,Vt,Pt,$,te="The total cost benefit per capita for each LSOA.",kt,ct,x,ee="",Ft,z,tt,et,Nt,Ot,wt,lt,le="Scroll for zooming in and out.",Ht,W,ae="",qt,w,at,st,zt,Rt,Yt,jt,Wt,Z,G;a=new Ye({});let B=e[4]&&_e(e),ft=he(Lt),S=[];for(let f=0;f<ft.length;f+=1)S[f]=be(ge(e,ft,f));return{c(){Oe(a.$$.fragment),s=E(),c=r("div"),v=r("div"),g=r("p"),g.textContent=p,h=E(),_=r("div"),V=r("div"),b=r("h1"),o=r("img"),F=E(),X=L(e[7]),it=E(),N=r("div"),B&&B.c(),J=E(),P=r("p"),pt=L("Total cost benefit regarding "),H=r("span"),vt=L(e[7]),mt=L(":"),gt=E(),q=r("div"),O=r("div"),D=r("div"),Y=r("h3"),j=r("span"),_t=L(e[7]),n=L(" Total Cost Benefit Over Time"),M=E(),y=r("p"),y.textContent=Qt,Tt=E(),ot=r("div"),K=r("div"),K.innerHTML=$t,It=E(),U=r("h3"),Bt=L("Distribution of "),Q=r("span"),Mt=L(e[7]),Vt=L(` Total Cost
                    Benefit by LSOA`),Pt=E(),$=r("p"),$.textContent=te,kt=E(),ct=r("div"),x=r("div"),x.innerHTML=ee,Ft=E(),z=r("div"),tt=r("h3"),et=r("span"),Nt=L(e[7]),Ot=L(" on UK Map"),wt=E(),lt=r("p"),lt.textContent=le,Ht=E(),W=r("div"),W.innerHTML=ae,qt=E(),w=r("div"),at=r("h3"),st=r("span"),zt=L(e[7]),Rt=L(` Cost Benefit by Socio-Economic
                Factors`),Yt=E(),jt=r("br"),Wt=E(),Z=r("div");for(let f=0;f<S.length;f+=1)S[f].c();this.h()},l(f){we(a.$$.fragment,f),s=C(f),c=i(f,"DIV",{class:!0});var A=u(c);v=i(A,"DIV",{class:!0});var m=u(v);g=i(m,"P",{class:!0,"data-svelte-h":!0}),rt(g)!=="svelte-1flv0v9"&&(g.textContent=p),h=C(m),_=i(m,"DIV",{class:!0});var nt=u(_);V=i(nt,"DIV",{class:!0});var se=u(V);b=i(se,"H1",{class:!0});var yt=u(b);o=i(yt,"IMG",{src:!0,alt:!0,class:!0}),F=C(yt),X=T(yt,e[7]),yt.forEach(d),se.forEach(d),it=C(nt),N=i(nt,"DIV",{class:!0});var ne=u(N);B&&B.l(ne),ne.forEach(d),nt.forEach(d),J=C(m),P=i(m,"P",{class:!0});var Gt=u(P);pt=T(Gt,"Total cost benefit regarding "),H=i(Gt,"SPAN",{style:!0});var Xt=u(H);vt=T(Xt,e[7]),mt=T(Xt,":"),Xt.forEach(d),Gt.forEach(d),m.forEach(d),gt=C(A),q=i(A,"DIV",{class:!0});var Et=u(q);O=i(Et,"DIV",{id:!0,class:!0});var Ct=u(O);D=i(Ct,"DIV",{class:!0});var k=u(D);Y=i(k,"H3",{class:!0});var Kt=u(Y);j=i(Kt,"SPAN",{style:!0});var re=u(j);_t=T(re,e[7]),re.forEach(d),n=T(Kt," Total Cost Benefit Over Time"),Kt.forEach(d),M=C(k),y=i(k,"P",{class:!0,"data-svelte-h":!0}),rt(y)!=="svelte-p4didb"&&(y.textContent=Qt),Tt=C(k),ot=i(k,"DIV",{class:!0});var ie=u(ot);K=i(ie,"DIV",{class:!0,"data-svelte-h":!0}),rt(K)!=="svelte-l1ce0t"&&(K.innerHTML=$t),ie.forEach(d),It=C(k),U=i(k,"H3",{class:!0});var Dt=u(U);Bt=T(Dt,"Distribution of "),Q=i(Dt,"SPAN",{style:!0});var oe=u(Q);Mt=T(oe,e[7]),oe.forEach(d),Vt=T(Dt,` Total Cost
                    Benefit by LSOA`),Dt.forEach(d),Pt=C(k),$=i(k,"P",{class:!0,"data-svelte-h":!0}),rt($)!=="svelte-ae39jc"&&($.textContent=te),kt=C(k),ct=i(k,"DIV",{class:!0});var ce=u(ct);x=i(ce,"DIV",{class:!0,"data-svelte-h":!0}),rt(x)!=="svelte-4vto3d"&&(x.innerHTML=ee),ce.forEach(d),k.forEach(d),Ft=C(Ct),z=i(Ct,"DIV",{class:!0});var dt=u(z);tt=i(dt,"H3",{class:!0});var Ut=u(tt);et=i(Ut,"SPAN",{style:!0});var fe=u(et);Nt=T(fe,e[7]),fe.forEach(d),Ot=T(Ut," on UK Map"),Ut.forEach(d),wt=C(dt),lt=i(dt,"P",{class:!0,"data-svelte-h":!0}),rt(lt)!=="svelte-1ask2se"&&(lt.textContent=le),Ht=C(dt),W=i(dt,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),rt(W)!=="svelte-ipahrb"&&(W.innerHTML=ae),dt.forEach(d),Ct.forEach(d),qt=C(Et),w=i(Et,"DIV",{id:!0,class:!0});var ut=u(w);at=i(ut,"H3",{class:!0});var xt=u(at);st=i(xt,"SPAN",{style:!0});var de=u(st);zt=T(de,e[7]),de.forEach(d),Rt=T(xt,` Cost Benefit by Socio-Economic
                Factors`),xt.forEach(d),Yt=C(ut),jt=i(ut,"BR",{}),Wt=C(ut),Z=i(ut,"DIV",{id:!0,class:!0});var ue=u(Z);for(let Zt=0;Zt<S.length;Zt+=1)S[Zt].l(ue);ue.forEach(d),ut.forEach(d),Et.forEach(d),A.forEach(d),this.h()},h(){l(g,"class","page-subtitle"),Be(o.src,I=e[8])||l(o,"src",I),l(o,"alt","Icon"),l(o,"class","heading-icon svelte-vh70br"),l(b,"class","page-title"),l(V,"class","title-container svelte-vh70br"),l(N,"class","total-value-container svelte-vh70br"),l(_,"class","header-container svelte-vh70br"),l(H,"style",e[6]),l(P,"class","description"),l(v,"class","section header"),l(j,"style",e[6]),l(Y,"class","component-title"),l(y,"class","description"),l(K,"class","plot"),l(ot,"class","component row"),l(Q,"style",e[6]),l(U,"class","component-title"),l($,"class","description"),l(x,"class","plot"),l(ct,"class","component row"),l(D,"class","component singlevis"),l(et,"style",e[6]),l(tt,"class","component-title"),l(lt,"class","description"),l(W,"id","map"),l(W,"class","svelte-vh70br"),l(z,"class","component column"),l(O,"id","vis-block"),l(O,"class","svelte-vh70br"),l(st,"style",e[6]),l(at,"class","component-title"),l(Z,"id","multiple-plots"),l(Z,"class","svelte-vh70br"),l(w,"id","multiple-comp"),l(w,"class","component svelte-vh70br"),l(q,"class","section"),l(c,"class","page-container")},m(f,A){He(a,f,A),At(f,s,A),At(f,c,A),t(c,v),t(v,g),t(v,h),t(v,_),t(_,V),t(V,b),t(b,o),t(b,F),t(b,X),t(_,it),t(_,N),B&&B.m(N,null),t(v,J),t(v,P),t(P,pt),t(P,H),t(H,vt),t(H,mt),t(c,gt),t(c,q),t(q,O),t(O,D),t(D,Y),t(Y,j),t(j,_t),t(Y,n),t(D,M),t(D,y),t(D,Tt),t(D,ot),t(ot,K),e[13](K),t(D,It),t(D,U),t(U,Bt),t(U,Q),t(Q,Mt),t(U,Vt),t(D,Pt),t(D,$),t(D,kt),t(D,ct),t(ct,x),e[14](x),t(O,Ft),t(O,z),t(z,tt),t(tt,et),t(et,Nt),t(tt,Ot),t(z,wt),t(z,lt),t(z,Ht),t(z,W),e[15](W),t(q,qt),t(q,w),t(w,at),t(at,st),t(st,zt),t(at,Rt),t(w,Yt),t(w,jt),t(w,Wt),t(w,Z);for(let m=0;m<S.length;m+=1)S[m]&&S[m].m(Z,null);e[17](c),G=!0},p(f,[A]){if(f[4]?B?B.p(f,A):(B=_e(f),B.c(),B.m(N,null)):B&&(B.d(1),B=null),(!G||A&64)&&l(H,"style",f[6]),(!G||A&64)&&l(j,"style",f[6]),(!G||A&64)&&l(Q,"style",f[6]),(!G||A&64)&&l(et,"style",f[6]),(!G||A&64)&&l(st,"style",f[6]),A&2){ft=he(Lt);let m;for(m=0;m<ft.length;m+=1){const nt=ge(f,ft,m);S[m]?S[m].p(nt,A):(S[m]=be(nt),S[m].c(),S[m].m(Z,null))}for(;m<S.length;m+=1)S[m].d(1);S.length=ft.length}},i(f){G||(qe(a.$$.fragment,f),G=!0)},o(f){ze(a.$$.fragment,f),G=!1},d(f){f&&(d(s),d(c)),Re(a,f),B&&B.d(),e[13](null),e[14](null),e[15](null),Me(S,f),e[17](null)}}}let ht=400;function fl(e,a,s){let c,v,g,p,h,_={},V="barchart",{data:b}=a;const o=b.coBenefit;let I,F,X,it,N=!1,J,P,pt;vt().then(()=>{J=new Ze(F,"LAD",P,"total",!1,"LAD"),J.initMap();let n=J.legend();pt.append(n)});let H=Je(o);Ve(()=>{});async function vt(){I=await Jt(tl(o)),X=await Jt(el(o)),F=await Jt(ll(o)),console.log(22,F),Lt.forEach(n=>{X[n]=+X[n]}),s(4,it=Math.round(xe(I,n=>n.total))),s(11,N=!0)}function mt(){p?.append(St({height:ht/1.2,...me,marginLeft:60,marginRight:60,y:{label:"Datazones Frequency"},x:{label:"Cost Per Capita (£)"},style:{fontSize:"18px"},marks:[nl(I,rl({y:"count"},{x:"total",fill:R(o)[0],tip:!0,fillOpacity:.5,stroke:R(o)[0],strokeWidth:3}))]}))}function gt(){let n=I.flatMap(M=>Qe.map(y=>({time:y,value:M[y],total:M.total,scenario:M.scenario})));h?.append(St({height:ht/1.2,...me,style:{fontSize:"18px"},x:{type:"band",tickFormat:M=>M.replace(/^Y/,"").replace("_","-"),label:"Year Intervals"},y:{label:"Cost Benefit £/Capita",grid:!0},marks:[De(n,Ee({y:"sum"},{x:"time",y:"value",fill:R(o)[0],tip:!0,fillOpacity:.8,insetLeft:15,insetRight:15}))]}))}function q(){Lt.forEach(n=>{let M;$e.includes(n)?M=St({style:{fontSize:"16px",textAnchor:"middle",fill:"#333"},height:ht/1.4,width:ht/1.5,marginLeft:60,marginBottom:60,marginRight:10,marginTop:10,x:{grid:!0,label:null,type:"band",tickFormat:y=>Math.floor(y)},color:{legend:!0},marks:[il(X.filter(y=>y.SEFMAME==n),{x:"SE",y:"total",stroke:R(o)[0],fill:R(o)[4],r:1,strokeOpacity:.5,fillOpacity:.3}),pe({anchor:"left",grid:!0,label:"£/capita",labelArrow:"none",labelAnchor:"center"}),ve([0])]}):M=St({style:{fontSize:"16px",textAnchor:"middle",fill:"#333"},height:ht/1.4,width:ht/1.5,marginLeft:60,marginBottom:60,marginRight:10,marginTop:10,x:{grid:!0,label:null},color:{legend:!0},marks:[Ce(F.filter(y=>y.SEFMAME==n),{x:"SE",y:"total",fill:y=>y.LAD.startsWith("S")?R(o)[1]:y.LAD.startsWith("N")?R(o)[2]:y.LAD.startsWith("E")?R(o)[3]:R(o)[4],r:2,fillOpacity:1}),pe({anchor:"left",grid:!0,label:"£/capita",labelArrow:"none",labelAnchor:"center"}),ve([0])]}),_[n]?.append(M)})}function O(n){bt[n?"unshift":"push"](()=>{h=n,s(0,h)})}function D(n){bt[n?"unshift":"push"](()=>{p=n,s(3,p)})}function Y(n){bt[n?"unshift":"push"](()=>{P=n,s(5,P)})}function j(n,M){bt[n?"unshift":"push"](()=>{_[M]=n,s(1,_)})}function _t(n){bt[n?"unshift":"push"](()=>{g=n,s(2,g)})}return e.$$set=n=>{"data"in n&&s(9,b=n.data)},e.$$.update=()=>{e.$$.dirty&3075&&(h?.firstChild?.remove(),Object.values(_).forEach(n=>{n.firstChild?.remove()}),N&&(mt(),gt(),q())),e.$$.dirty&4096&&s(6,v=`color: ${c}; font-weight: bold; font-size: 22px;`)},s(12,c=R(o)[0]),[h,_,g,p,it,P,v,o,H,b,V,N,c,O,D,Y,j,_t]}class Cl extends Fe{constructor(a){super(),Ne(this,a,fl,cl,Ie,{data:9})}}export{Cl as component};
