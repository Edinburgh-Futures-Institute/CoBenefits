import{s as Me,a as A,e as i,g as T,c,b as I,p as w,f as _,q as t,x as ue,i as te,h as a,y as W,z as xe,v as Ve,A as fe,w as De,t as Be,d as Ie,n as Ue,B as Pe,C as Ne}from"../chunks/scheduler.GkBzG_tJ.js";import{S as Oe,i as we,c as He,b as Ge,m as Re,t as je,a as qe,d as ze}from"../chunks/index.puHNmHGV.js";import{N as Ke,e as de}from"../chunks/NavigationBar.Doaj7l7w.js";import{i as Ye,o as Je}from"../chunks/transform.BNP73y-7.js";import"../chunks/index.CHZ6sWj5.js";import{M as Ze}from"../chunks/mapUK.BVZ1RoDr.js";import{g as re,d as Ee,e as ye,f as Qe,h as We,i as Xe}from"../chunks/duckdb.n8_DZZ1A.js";import{C as ve,S as be,a as Le,b as $e,c as Ce,d as et,g as Fe}from"../chunks/globals.CIft0kKc.js";function Se(f,e,l){const n=f.slice();return n[32]=e[l],n}function Ae(f,e,l){const n=f.slice();return n[29]=e[l],n}function tt(f){let e,l,n="Social Economic Factor",h,C,S=de(Ce),r=[];for(let d=0;d<S.length;d+=1)r[d]=Te(Se(f,S,d));return{c(){e=i("div"),l=i("h2"),l.textContent=n,h=A(),C=i("div");for(let d=0;d<r.length;d+=1)r[d].c();this.h()},l(d){e=c(d,"DIV",{class:!0});var u=I(e);l=c(u,"H2",{"data-svelte-h":!0}),w(l)!=="svelte-1ld89ev"&&(l.textContent=n),h=T(u),C=c(u,"DIV",{id:!0,class:!0});var s=I(C);for(let v=0;v<r.length;v+=1)r[v].l(s);s.forEach(_),u.forEach(_),this.h()},h(){t(C,"id","time"),t(C,"class","svelte-1fc578l"),t(e,"class","tabcontent svelte-1fc578l")},m(d,u){te(d,e,u),a(e,l),a(e,h),a(e,C);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(C,null)},p(d,u){if(u[0]&514){S=de(Ce);let s;for(s=0;s<S.length;s+=1){const v=Se(d,S,s);r[s]?r[s].p(v,u):(r[s]=Te(v),r[s].c(),r[s].m(C,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=S.length}},d(d){d&&_(e),De(r,d)}}}function lt(f){let e,l,n,h="Co-Benefits",C,S,r,d,u="Time",s,v,x,k,M,E="Total",y,g,F,j,P="2025-2029",q,N,Y,J,H="2030-2034",ae,Z,D,U,o="2035-2039",b,O,z,G,se="2040-2044",ee,le,X,K,oe="2045-2049",ie,ce,Q=de(ve.concat({id:"total",label:"Total"})),m=[];for(let p=0;p<Q.length;p+=1)m[p]=ke(Ae(f,Q,p));return{c(){e=i("div"),l=i("div"),n=i("h2"),n.textContent=h,C=A();for(let p=0;p<m.length;p+=1)m[p].c();S=A(),r=i("div"),d=i("h2"),d.textContent=u,s=A(),v=i("div"),x=i("label"),k=i("input"),M=i("span"),M.textContent=E,y=A(),g=i("label"),F=i("input"),j=i("span"),j.textContent=P,q=A(),N=i("label"),Y=i("input"),J=i("span"),J.textContent=H,ae=A(),Z=i("label"),D=i("input"),U=i("span"),U.textContent=o,b=A(),O=i("label"),z=i("input"),G=i("span"),G.textContent=se,ee=A(),le=i("label"),X=i("input"),K=i("span"),K.textContent=oe,this.h()},l(p){e=c(p,"DIV",{class:!0});var B=I(e);l=c(B,"DIV",{class:!0});var L=I(l);n=c(L,"H2",{"data-svelte-h":!0}),w(n)!=="svelte-uglilz"&&(n.textContent=h),C=T(L);for(let ge=0;ge<m.length;ge+=1)m[ge].l(L);L.forEach(_),S=T(B),r=c(B,"DIV",{class:!0});var R=I(r);d=c(R,"H2",{"data-svelte-h":!0}),w(d)!=="svelte-hletp"&&(d.textContent=u),s=T(R),v=c(R,"DIV",{id:!0,class:!0});var V=I(v);x=c(V,"LABEL",{class:!0});var ne=I(x);k=c(ne,"INPUT",{type:!0,name:!0,class:!0}),M=c(ne,"SPAN",{class:!0,"data-svelte-h":!0}),w(M)!=="svelte-2fqrek"&&(M.textContent=E),ne.forEach(_),y=T(V),g=c(V,"LABEL",{class:!0});var $=I(g);F=c($,"INPUT",{type:!0,name:!0,class:!0}),j=c($,"SPAN",{class:!0,"data-svelte-h":!0}),w(j)!=="svelte-177152l"&&(j.textContent=P),$.forEach(_),q=T(V),N=c(V,"LABEL",{class:!0});var pe=I(N);Y=c(pe,"INPUT",{type:!0,name:!0,class:!0}),J=c(pe,"SPAN",{class:!0,"data-svelte-h":!0}),w(J)!=="svelte-sne3j9"&&(J.textContent=H),pe.forEach(_),ae=T(V),Z=c(V,"LABEL",{class:!0});var he=I(Z);D=c(he,"INPUT",{type:!0,name:!0,class:!0}),U=c(he,"SPAN",{class:!0,"data-svelte-h":!0}),w(U)!=="svelte-13ifhof"&&(U.textContent=o),he.forEach(_),b=T(V),O=c(V,"LABEL",{class:!0});var me=I(O);z=c(me,"INPUT",{type:!0,name:!0,class:!0}),G=c(me,"SPAN",{class:!0,"data-svelte-h":!0}),w(G)!=="svelte-1pug1mv"&&(G.textContent=se),me.forEach(_),ee=T(V),le=c(V,"LABEL",{class:!0});var _e=I(le);X=c(_e,"INPUT",{type:!0,name:!0,class:!0}),K=c(_e,"SPAN",{class:!0,"data-svelte-h":!0}),w(K)!=="svelte-3f05xd"&&(K.textContent=oe),_e.forEach(_),V.forEach(_),R.forEach(_),B.forEach(_),this.h()},h(){t(l,"class","component"),t(k,"type","radio"),t(k,"name","toggle"),k.value="total",k.checked=!0,t(k,"class","svelte-1fc578l"),t(M,"class","svelte-1fc578l"),t(x,"class","time-radio svelte-1fc578l"),t(F,"type","radio"),t(F,"name","toggle"),F.value="Y2025_2029",t(F,"class","svelte-1fc578l"),t(j,"class","svelte-1fc578l"),t(g,"class","time-radio svelte-1fc578l"),t(Y,"type","radio"),t(Y,"name","toggle"),Y.value="Y2030_2034",t(Y,"class","svelte-1fc578l"),t(J,"class","svelte-1fc578l"),t(N,"class","time-radio svelte-1fc578l"),t(D,"type","radio"),t(D,"name","toggle"),D.value="Y2035_2039",t(D,"class","svelte-1fc578l"),t(U,"class","svelte-1fc578l"),t(Z,"class","time-radio svelte-1fc578l"),t(z,"type","radio"),t(z,"name","toggle"),z.value="Y2040_2044",t(z,"class","svelte-1fc578l"),t(G,"class","svelte-1fc578l"),t(O,"class","time-radio svelte-1fc578l"),t(X,"type","radio"),t(X,"name","toggle"),X.value="Y2045_2049",t(X,"class","svelte-1fc578l"),t(K,"class","svelte-1fc578l"),t(le,"class","time-radio svelte-1fc578l"),t(v,"id","time"),t(v,"class","svelte-1fc578l"),t(r,"class","component"),t(e,"class","tabcontent svelte-1fc578l")},m(p,B){te(p,e,B),a(e,l),a(l,n),a(l,C);for(let L=0;L<m.length;L+=1)m[L]&&m[L].m(l,null);a(e,S),a(e,r),a(r,d),a(r,s),a(r,v),a(v,x),a(x,k),a(x,M),a(v,y),a(v,g),a(g,F),a(g,j),a(v,q),a(v,N),a(N,Y),a(N,J),a(v,ae),a(v,Z),a(Z,D),a(Z,U),a(v,b),a(v,O),a(O,z),a(O,G),a(v,ee),a(v,le),a(le,X),a(le,K),ie||(ce=[W(k,"change",f[7]),W(F,"change",f[7]),W(Y,"change",f[7]),W(D,"change",f[7]),W(z,"change",f[7]),W(X,"change",f[7])],ie=!0)},p(p,B){if(B[0]&64){Q=de(ve.concat({id:"total",label:"Total"}));let L;for(L=0;L<Q.length;L+=1){const R=Ae(p,Q,L);m[L]?m[L].p(R,B):(m[L]=ke(R),m[L].c(),m[L].m(l,null))}for(;L<m.length;L+=1)m[L].d(1);m.length=Q.length}},d(p){p&&_(e),De(m,p),ie=!1,xe(ce)}}}function Te(f){let e,l,n,h,C=f[32].label+"",S,r,d,u;return{c(){e=i("input"),n=A(),h=i("label"),S=Be(C),r=i("br"),this.h()},l(s){e=c(s,"INPUT",{type:!0,id:!0,name:!0,class:!0}),n=T(s),h=c(s,"LABEL",{for:!0});var v=I(h);S=Ie(v,C),v.forEach(_),r=c(s,"BR",{}),this.h()},h(){t(e,"type","radio"),t(e,"id","html"),t(e,"name","fav_language"),e.value=f[32].id,e.checked=l=f[32].id==f[1],t(e,"class","svelte-1fc578l"),t(h,"for","html")},m(s,v){te(s,e,v),te(s,n,v),te(s,h,v),a(h,S),te(s,r,v),d||(u=W(e,"change",f[9]),d=!0)},p(s,v){v[0]&2&&l!==(l=s[32].id==s[1])&&(e.checked=l)},d(s){s&&(_(e),_(n),_(h),_(r)),d=!1,u()}}}function at(f){let e,l;return{c(){e=i("img"),this.h()},l(n){e=c(n,"IMG",{style:!0,class:!0,src:!0}),this.h()},h(){Pe(e,"opacity","0"),t(e,"class","icon svelte-1fc578l"),Ne(e.src,l=Fe("Air quality"))||t(e,"src",l)},m(n,h){te(n,e,h)},d(n){n&&_(e)}}}function st(f){let e,l;return{c(){e=i("img"),this.h()},l(n){e=c(n,"IMG",{alt:!0,class:!0,src:!0}),this.h()},h(){t(e,"alt","cobenefit icon"),t(e,"class","icon svelte-1fc578l"),Ne(e.src,l=Fe(f[29].id))||t(e,"src",l)},m(n,h){te(n,e,h)},d(n){n&&_(e)}}}function ke(f){let e,l,n,h,C,S=f[29].label+"",r,d,u,s,v,x;function k(y,g){return y[29].id!="total"?st:at}let E=k(f)(f);return{c(){e=i("div"),E.c(),l=A(),n=i("input"),h=A(),C=i("label"),r=Be(S),d=A(),u=i("br"),s=A(),this.h()},l(y){e=c(y,"DIV",{class:!0});var g=I(e);E.l(g),l=T(g),n=c(g,"INPUT",{type:!0,name:!0}),h=T(g),C=c(g,"LABEL",{for:!0});var F=I(C);r=Ie(F,S),F.forEach(_),d=T(g),u=c(g,"BR",{}),s=T(g),g.forEach(_),this.h()},h(){t(n,"type","radio"),t(n,"name","cobenef"),n.value=f[29].id,n.checked=!0,t(C,"for","css"),t(e,"class","checkbox-div svelte-1fc578l")},m(y,g){te(y,e,g),E.m(e,null),a(e,l),a(e,n),a(e,h),a(e,C),a(C,r),a(e,d),a(e,u),a(e,s),v||(x=W(n,"change",f[6]),v=!0)},p:Ue,d(y){y&&_(e),E.d(),v=!1,x()}}}function nt(f){let e,l,n,h,C=`<h2>MapUK</h2> <p>This interactive map allows to explore both the co-benefit values and the socio-economic factors at the local
            authorities and datazones levels.</p>`,S,r,d,u,s="",v,x,k="",M,E,y="Export",g,F,j,P,q,N,Y="CoBenefits",J,H,ae=`Socio-Economic
                    Factors`,Z,D,U,o,b,O="Local Authorities",z,G,se,ee,le="Data Zones",X,K,oe,ie;e=new Ke({});function ce(p,B){if(p[0]=="Cobenefit")return lt;if(p[0]=="SEF")return tt}let Q=ce(f),m=Q&&Q(f);return{c(){He(e.$$.fragment),l=A(),n=i("div"),h=i("div"),h.innerHTML=C,S=A(),r=i("div"),d=i("div"),u=i("div"),u.innerHTML=s,v=A(),x=i("div"),x.innerHTML=k,M=A(),E=i("button"),E.textContent=y,g=A(),F=i("div"),j=A(),P=i("div"),q=i("div"),N=i("button"),N.textContent=Y,J=A(),H=i("button"),H.textContent=ae,Z=A(),D=i("div"),U=i("input"),o=A(),b=i("label"),b.textContent=O,z=A(),G=i("input"),se=A(),ee=i("label"),ee.textContent=le,X=A(),m&&m.c(),this.h()},l(p){Ge(e.$$.fragment,p),l=T(p),n=c(p,"DIV",{class:!0});var B=I(n);h=c(B,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),w(h)!=="svelte-1bpnvd7"&&(h.innerHTML=C),S=T(B),r=c(B,"DIV",{id:!0,class:!0});var L=I(r);d=c(L,"DIV",{class:!0,id:!0});var R=I(d);u=c(R,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),w(u)!=="svelte-1ej9vmv"&&(u.innerHTML=s),v=T(R),x=c(R,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),w(x)!=="svelte-1j653gg"&&(x.innerHTML=k),M=T(R),E=c(R,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),w(E)!=="svelte-zgluur"&&(E.textContent=y),g=T(R),F=c(R,"DIV",{id:!0,class:!0}),I(F).forEach(_),R.forEach(_),j=T(L),P=c(L,"DIV",{class:!0,id:!0});var V=I(P);q=c(V,"DIV",{class:!0});var ne=I(q);N=c(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),w(N)!=="svelte-14nmzoo"&&(N.textContent=Y),J=T(ne),H=c(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),w(H)!=="svelte-xxvynj"&&(H.textContent=ae),ne.forEach(_),Z=T(V),D=c(V,"DIV",{class:!0});var $=I(D);U=c($,"INPUT",{type:!0,name:!0}),o=T($),b=c($,"LABEL",{for:!0,"data-svelte-h":!0}),w(b)!=="svelte-p8irzv"&&(b.textContent=O),z=T($),G=c($,"INPUT",{type:!0,name:!0}),se=T($),ee=c($,"LABEL",{for:!0,"data-svelte-h":!0}),w(ee)!=="svelte-1ytveqc"&&(ee.textContent=le),$.forEach(_),X=T(V),m&&m.l(V),V.forEach(_),L.forEach(_),B.forEach(_),this.h()},h(){t(h,"class","component"),t(h,"id","heaser"),t(u,"id","map"),t(u,"class","svelte-1fc578l"),t(x,"id","map-legend"),t(x,"class","svelte-1fc578l"),t(E,"id","export-button"),t(E,"class","svelte-1fc578l"),t(F,"id","tooltip"),t(F,"class","tooltip svelte-1fc578l"),t(d,"class","component column svelte-1fc578l"),t(d,"id","mapComp"),t(N,"class","tablinks svelte-1fc578l"),N.value="Cobenefit",ue(N,"active",f[0]=="Cobenefit"),t(H,"class","tablinks svelte-1fc578l"),H.value="SEF",ue(H,"active",f[0]=="SEF"),t(q,"class","tab svelte-1fc578l"),t(U,"type","radio"),t(U,"name","granularity"),U.value="LAD",U.checked=!0,t(b,"for","LAD"),t(G,"type","radio"),t(G,"name","granularity"),G.value="LSOA",t(ee,"for","LSOA"),t(D,"class","component"),t(P,"class","component column svelte-1fc578l"),t(P,"id","control-panel"),t(r,"id","map-row"),t(r,"class","row svelte-1fc578l"),t(n,"class","page-container svelte-1fc578l")},m(p,B){Re(e,p,B),te(p,l,B),te(p,n,B),a(n,h),a(n,S),a(n,r),a(r,d),a(d,u),f[19](u),a(d,v),a(d,x),f[20](x),a(d,M),a(d,E),f[21](E),a(d,g),a(d,F),a(r,j),a(r,P),a(P,q),a(q,N),a(q,J),a(q,H),a(P,Z),a(P,D),a(D,U),a(D,o),a(D,b),a(D,z),a(D,G),a(D,se),a(D,ee),a(P,X),m&&m.m(P,null),f[22](n),K=!0,oe||(ie=[W(E,"click",rt),W(N,"click",f[8]),W(H,"click",f[8]),W(U,"change",f[10]),W(G,"change",f[10])],oe=!0)},p(p,B){(!K||B[0]&1)&&ue(N,"active",p[0]=="Cobenefit"),(!K||B[0]&1)&&ue(H,"active",p[0]=="SEF"),Q===(Q=ce(p))&&m?m.p(p,B):(m&&m.d(1),m=Q&&Q(p),m&&(m.c(),m.m(P,null)))},i(p){K||(je(e.$$.fragment,p),K=!0)},o(p){qe(e.$$.fragment,p),K=!1},d(p){p&&(_(l),_(n)),ze(e,p),f[19](null),f[20](null),f[21](null),m&&m.d(),f[22](null),oe=!1,xe(ie)}}}function rt(){const e=document.getElementsByClassName("maplibregl-canvas")[0].toDataURL("image/png");var l=document.createElement("a");l.download="map.png",l.href=e,l.dataset.downloadurl=["image/png",l.download,l.href].join(":"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function ot(f,e,l){let{data:n}=e,h,C,S,r,d,u,s="Cobenefit",v=!1,x="BNZ",k=ve.map(o=>o.id),M="total",E="LAD",y="EPC",g;function F(){if(u.makeColorScale(!1),s=="SEF"&&be.includes(y)){const o=Ye("white","black");let b=Object.values(Le[y]);const O=b.map((G,se)=>o(se/(b.length-1)));let z=Je().domain(b).range(O);u.setColorScale(z)}S=u.legend(j()),l(4,r.innerHTML="",r),r.append(S)}function j(){if(s=="SEF")return`${Ce.filter(o=>o.id==y)[0].label} (${et(y)})`;if(s=="Cobenefit")return"Cobenefits (£ per capita)"}Ve(async()=>{let o;E=="LAD"?o=await re(Ee(Array.from(k),"UK",M)):E=="LSOA"&&(o=await re(ye(Array.from(k),x,M))),o.forEach(b=>{b.value_per_capita=b.value_per_capita*1e6}),l(12,u=new Ze(o,E,C,"value_per_capita",!0,"Lookup_Value",!0)),u.initMap(),u.setTooltipCb(H),S=u.legend(j()),r.append(S)});const P=o=>{const b=o.currentTarget.value;b=="total"?l(15,k=ve.map(O=>O.id)):l(15,k=[b])},q=o=>{const b=o.currentTarget.value;l(16,M=b)};function N(o,b){l(0,s=o.currentTarget.value)}const Y=o=>{l(1,y=o.currentTarget.value)},J=o=>{u.removeLayers(),u.removeSources(),l(17,E=o.currentTarget.value),l(12,u.granularity=E,u),E=="LSOA"?l(12,u.border=!1,u):l(12,u.border=!0,u),l(13,v=!0)},H=o=>{if(s=="SEF")return be.includes(y)?`Mode value is ${Le[y][o]}`:`Mean value is ${o.toFixed(2)}`;if(s=="Cobenefit")return`${o.toFixed(2)}£ per capita.`};function ae(o){fe[o?"unshift":"push"](()=>{C=o,l(3,C)})}function Z(o){fe[o?"unshift":"push"](()=>{r=o,l(4,r)})}function D(o){fe[o?"unshift":"push"](()=>{d=o,l(5,d)})}function U(o){fe[o?"unshift":"push"](()=>{h=o,l(2,h)})}return f.$$set=o=>{"data"in o&&l(11,n=o.data)},f.$$.update=()=>{if(f.$$.dirty[0]&520195&&u?.loaded){if(s=="Cobenefit"){if(l(12,u.dataKey="value_per_capita",u),E=="LAD")l(18,g=re(Ee(Array.from(k),"UK",M)));else if(E=="LSOA"){let o;k.length==11?o=[]:o=k,l(18,g=re(ye(o,x,M)))}}else l(0,s="SEF")&&(l(12,u.dataKey="val",u),E=="LAD"?be.includes(y)?l(18,g=re(Qe(y))):l(18,g=re(We(y))):E=="LSOA"&&l(18,g=re(Xe(y))));g.then(o=>{s=="Cobenefit"&&o.forEach(O=>{O.value_per_capita=O.value_per_capita*1e6});let b;s=="Cobenefit"?k.length==1?(b=JSON.parse(JSON.stringify($e(k[0]))),b.shift(),b=b.reverse()):b=["red","white","black"]:b=["white","black"],u.update(o,s,v,b),F(),l(13,v=!1)})}},[s,y,h,C,r,d,P,q,N,Y,J,n,u,v,x,k,M,E,g,ae,Z,D,U]}class mt extends Oe{constructor(e){super(),we(this,e,ot,nt,Me,{data:11},null,[-1,-1])}}export{mt as component};
