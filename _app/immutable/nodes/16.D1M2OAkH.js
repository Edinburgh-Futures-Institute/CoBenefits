import{s as G,a as S,C as P,g as w,i as C,f as b,y as Z,e as A,c as L,b as E,p as M,q as N,h as v,x as R,n as z,t as k,d as y,j as q}from"../chunks/scheduler.Uo5vrMzy.js";import{S as H,i as U,c as V,b as Y,m as F,t as J,a as K,d as Q}from"../chunks/index.CfagcI6h.js";import{N as X,e as I}from"../chunks/NavigationBar.Deu5SNoe.js";import{b as $}from"../chunks/paths.BKRzFxJT.js";import{g as tt,j as et}from"../chunks/duckdb.DNuCoXEB.js";import"../chunks/transform.BNP73y-7.js";import{c as x}from"../chunks/dsv.XhNTmijJ.js";function T(m,t,e){const n=m.slice();return n[10]=t[e],n}function W(m,t,e){const n=m.slice();return n[13]=t[e],n}function at(m){let t,e,n="Browse local authorities",u,c,r="Open the tabs and then click on a local authority for detailed reports.",h,a=I(m[2]),l=[];for(let s=0;s<a.length;s+=1)l[s]=O(T(m,a,s));return{c(){t=A("main"),e=A("h1"),e.textContent=n,u=S(),c=A("p"),c.textContent=r,h=S();for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){t=L(s,"MAIN",{class:!0});var p=E(t);e=L(p,"H1",{"data-svelte-h":!0}),M(e)!=="svelte-1ieghi8"&&(e.textContent=n),u=w(p),c=L(p,"P",{"data-svelte-h":!0}),M(c)!=="svelte-xzip8x"&&(c.textContent=r),h=w(p);for(let o=0;o<l.length;o+=1)l[o].l(p);p.forEach(b),this.h()},h(){N(t,"class","svelte-gdt2b9")},m(s,p){C(s,t,p),v(t,e),v(t,u),v(t,c),v(t,h);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(t,null)},p(s,p){if(p&6){a=I(s[2]);let o;for(o=0;o<a.length;o+=1){const d=T(s,a,o);l[o]?l[o].p(d,p):(l[o]=O(d),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=a.length}},d(s){s&&b(t),R(l,s)}}}function lt(m){let t,e="Loading local authoritiesâ€¦";return{c(){t=A("p"),t.textContent=e},l(n){t=L(n,"P",{"data-svelte-h":!0}),M(t)!=="svelte-12l6vp8"&&(t.textContent=e)},m(n,u){C(n,t,u)},p:z,d(n){n&&b(t)}}}function j(m){let t,e=m[13].name+"",n,u;return{c(){t=A("a"),n=k(e),this.h()},l(c){t=L(c,"A",{class:!0,href:!0});var r=E(t);n=y(r,e),r.forEach(b),this.h()},h(){N(t,"class","lad-link svelte-gdt2b9"),N(t,"href",u=$+"/location?location="+m[13].code)},m(c,r){C(c,t,r),v(t,n)},p(c,r){r&2&&e!==(e=c[13].name+"")&&q(n,e),r&2&&u!==(u=$+"/location?location="+c[13].code)&&N(t,"href",u)},d(c){c&&b(t)}}}function O(m){let t,e,n=m[10]+"",u,c,r=m[1][m[10]].length+"",h,a,l,s,p,o=I(m[1][m[10]]),d=[];for(let _=0;_<o.length;_+=1)d[_]=j(W(m,o,_));return{c(){t=A("details"),e=A("summary"),u=k(n),c=k(" ("),h=k(r),a=k(")"),l=S(),s=A("div");for(let _=0;_<d.length;_+=1)d[_].c();p=S(),this.h()},l(_){t=L(_,"DETAILS",{class:!0});var g=E(t);e=L(g,"SUMMARY",{class:!0});var i=E(e);u=y(i,n),c=y(i," ("),h=y(i,r),a=y(i,")"),i.forEach(b),l=w(g),s=L(g,"DIV",{class:!0});var f=E(s);for(let D=0;D<d.length;D+=1)d[D].l(f);f.forEach(b),p=w(g),g.forEach(b),this.h()},h(){N(e,"class","svelte-gdt2b9"),N(s,"class","lad-grid svelte-gdt2b9"),N(t,"class","svelte-gdt2b9")},m(_,g){C(_,t,g),v(t,e),v(e,u),v(e,c),v(e,h),v(e,a),v(t,l),v(t,s);for(let i=0;i<d.length;i+=1)d[i]&&d[i].m(s,null);v(t,p)},p(_,g){if(g&2&&r!==(r=_[1][_[10]].length+"")&&q(h,r),g&6){o=I(_[1][_[10]]);let i;for(i=0;i<o.length;i+=1){const f=W(_,o,i);d[i]?d[i].p(f,g):(d[i]=j(f),d[i].c(),d[i].m(s,null))}for(;i<d.length;i+=1)d[i].d(1);d.length=o.length}},d(_){_&&b(t),R(d,_)}}}function nt(m){let t,e,n,u;t=new X({});function c(a,l){return a[0].length===0?lt:at}let r=c(m),h=r(m);return{c(){V(t.$$.fragment),e=S(),h.c(),n=P()},l(a){Y(t.$$.fragment,a),e=w(a),h.l(a),n=P()},m(a,l){F(t,a,l),C(a,e,l),h.m(a,l),C(a,n,l),u=!0},p(a,[l]){r===(r=c(a))&&h?h.p(a,l):(h.d(1),h=r(a),h&&(h.c(),h.m(n.parentNode,n)))},i(a){u||(J(t.$$.fragment,a),u=!0)},o(a){K(t.$$.fragment,a),u=!1},d(a){a&&(b(e),b(n)),Q(t,a),h.d(a)}}}function ot(m,t,e){const n=`${$}/LAD/Eng_Wales_LSOA_LADs.csv`,u=`${$}/LAD/NI_DZ_LAD.csv`,c=`${$}/LAD/Scotland_DZ_LA.csv`;let r={},h={},a=[],l={},s=["England","Wales","Northern Ireland","Scotland"];const p={NI:"Northern Ireland",England:"England",Wales:"Wales",Scotland:"Scotland"};async function o(){const d=await x(n);for(let f of d)r[f.LAD22CD]=f.LAD22NM;const _=await x(u);for(let f of _)r[f.LGD2014_code]=f.LGD2014_name;const g=await x(c);for(let f of g)r[f.LA_Code]=f.LA_Name;const i=await tt(et());for(let f of i){const D=p[f.Nation]||f.Nation;h[f.LAD]=D}e(0,a=Object.entries(r).map(([f,D])=>({code:f,name:D,nation:h[f]}))),e(1,l={});for(let f of s)e(1,l[f]=a.filter(D=>D.nation===f).sort((D,B)=>D.name.localeCompare(B.name)),l)}return Z(async()=>{await o()}),[a,l,s]}class mt extends H{constructor(t){super(),U(this,t,ot,nt,G,{})}}export{mt as component};
