import{s as yr,d as A,w as br,x as _r,a as De,i as $t,b as c,z as ue,C as Cr,q as v,g as L,c as y,e as N,p as O,f as G,j as z,h as b,t as Z,v as wr,A as Et}from"../chunks/CrcYK4S3.js";import{S as Er,i as Mr,d as Ar,t as xr,a as kr,m as Dr,c as Lr,b as zr}from"../chunks/CjO9S5jK.js";import{N as Tr,e as On}from"../chunks/PZEsZt2J.js";import{n as Br}from"../chunks/DRyxMU8n.js";import{ar as Nr,am as Le,as as ir,a5 as dn,g as Be,G as cr,i as ur,a as fr,M as mn,H as gn,S as Sr,l as yn,n as bn,at as Vr,o as ze,au as pn,av as Ir,U as Te,aw as Pr,q as Fr,a8 as Hr,B as Rr,a9 as Or,ax as hr,ay as jr,az as Ur,ah as dr,aA as Yr,ab as pr,N as qr,a4 as Wr,aB as Gr,X as ge,aC as vr,Y as Zr,aD as Xr,V as it,a2 as mt,ad as gt,aE as Kr,_ as Jr,ac as Qr,aF as $r,W as jn}from"../chunks/BzrjCcuE.js";import{M as ta,a as ea}from"../chunks/CHh-3C3n.js";import{h as na,S as vn,C as Un,r as ra,A as Qt,M as yt,i as aa,b as sa,T as cn,V as oa,d as la,e as Yn,f as qn,j as ia}from"../chunks/BKBYTH2a.js";import{g as bt,q as Wn,r as ca,s as Gn,d as ua,t as Zn,u as fa,v as ha}from"../chunks/bSPe4o60.js";import{A as da,a as Xt,b as Xn}from"../chunks/BiB0mgj8.js";import{t as pa,e as mr,m as va,a as Kn,s as ma,f as ga,b as un,d as Jn}from"../chunks/IzWRIZAE.js";import{a as ya,b as fn,d as ba}from"../chunks/BZk_VCiK.js";const _a=Ca(wa);function Ca(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:a,width:s,height:l}=e;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((l=Math.floor(l!==void 0?l:a.length/s))>=0))throw new RangeError("invalid height");if(!s||!l||!n&&!r)return e;const u=n&&t(n),f=r&&t(r),o=a.slice();return u&&f?(fe(u,o,a,s,l),fe(u,a,o,s,l),fe(u,o,a,s,l),he(f,a,o,s,l),he(f,o,a,s,l),he(f,a,o,s,l)):u?(fe(u,a,o,s,l),fe(u,o,a,s,l),fe(u,a,o,s,l)):f&&(he(f,a,o,s,l),he(f,o,a,s,l),he(f,a,o,s,l)),e}}function fe(t,e,n,r,a){for(let s=0,l=r*a;s<l;)t(e,n,s,s+=r,1)}function he(t,e,n,r,a){for(let s=0,l=r*a;s<r;++s)t(e,n,s,s+l,r)}function wa(t){const e=Math.floor(t);if(e===t)return Ea(t);const n=t-e,r=2*t+1;return(a,s,l,u,f)=>{if(!((u-=f)>=l))return;let o=e*s[l];const i=f*e,m=i+f;for(let h=l,g=l+i;h<g;h+=f)o+=s[Math.min(u,h)];for(let h=l,g=u;h<=g;h+=f)o+=s[Math.min(u,h+i)],a[h]=(o+n*(s[Math.max(l,h-m)]+s[Math.min(u,h+m)]))/r,o-=s[Math.max(l,h-i)]}}function Ea(t){const e=2*t+1;return(n,r,a,s,l)=>{if(!((s-=l)>=a))return;let u=t*r[a];const f=l*t;for(let o=a,i=a+f;o<i;o+=l)u+=r[Math.min(s,o)];for(let o=a,i=s;o<=i;o+=l)u+=r[Math.min(s,o+f)],n[o]=u/e,u-=r[Math.max(a,o-f)]}}function Ma(t,e,n){let r;for(;;){const a=Nr(t,e,n);if(a===r||a===0||!isFinite(a))return[t,e];a>0?(t=Math.floor(t/a)*a,e=Math.ceil(e/a)*a):a<0&&(t=Math.ceil(t*a)/a,e=Math.floor(e*a)/a),r=a}}var Aa=Array.prototype,gr=Aa.slice;function xa(t,e){return t-e}function ka(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}const Ft=t=>()=>t;function Da(t,e){for(var n=-1,r=e.length,a;++n<r;)if(a=La(t,e[n]))return a;return 0}function La(t,e){for(var n=e[0],r=e[1],a=-1,s=0,l=t.length,u=l-1;s<l;u=s++){var f=t[s],o=f[0],i=f[1],m=t[u],h=m[0],g=m[1];if(za(f,m,e))return 0;i>r!=g>r&&n<(h-o)*(r-i)/(g-i)+o&&(a=-a)}return a}function za(t,e,n){var r;return Ta(t,e,n)&&Ba(t[r=+(t[0]===e[0])],n[r],e[r])}function Ta(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function Ba(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function Na(){}var Mt=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Qn(){var t=1,e=1,n=pa,r=f;function a(o){var i=n(o);if(Array.isArray(i))i=i.slice().sort(xa);else{const m=Le(o,Sa);for(i=ir(...Ma(m[0],m[1],i),i);i[i.length-1]>=m[1];)i.pop();for(;i[1]<m[0];)i.shift()}return i.map(m=>s(o,m))}function s(o,i){const m=i==null?NaN:+i;if(isNaN(m))throw new Error(`invalid value: ${i}`);var h=[],g=[];return l(o,m,function(C){r(C,o,m),ka(C)>0?h.push([C]):g.push(C)}),g.forEach(function(C){for(var x=0,k=h.length,_;x<k;++x)if(Da((_=h[x])[0],C)!==-1){_.push(C);return}}),{type:"MultiPolygon",value:i,coordinates:h}}function l(o,i,m){var h=new Array,g=new Array,C,x,k,_,p,M;for(C=x=-1,_=Kt(o[0],i),Mt[_<<1].forEach(w);++C<t-1;)k=_,_=Kt(o[C+1],i),Mt[k|_<<1].forEach(w);for(Mt[_<<0].forEach(w);++x<e-1;){for(C=-1,_=Kt(o[x*t+t],i),p=Kt(o[x*t],i),Mt[_<<1|p<<2].forEach(w);++C<t-1;)k=_,_=Kt(o[x*t+t+C+1],i),M=p,p=Kt(o[x*t+C+1],i),Mt[k|_<<1|p<<2|M<<3].forEach(w);Mt[_|p<<3].forEach(w)}for(C=-1,p=o[x*t]>=i,Mt[p<<2].forEach(w);++C<t-1;)M=p,p=Kt(o[x*t+C+1],i),Mt[p<<2|M<<3].forEach(w);Mt[p<<3].forEach(w);function w(B){var D=[B[0][0]+C,B[0][1]+x],I=[B[1][0]+C,B[1][1]+x],H=u(D),S=u(I),E,V;(E=g[H])?(V=h[S])?(delete g[E.end],delete h[V.start],E===V?(E.ring.push(I),m(E.ring)):h[E.start]=g[V.end]={start:E.start,end:V.end,ring:E.ring.concat(V.ring)}):(delete g[E.end],E.ring.push(I),g[E.end=S]=E):(E=h[S])?(V=g[H])?(delete h[E.start],delete g[V.end],E===V?(E.ring.push(I),m(E.ring)):h[V.start]=g[E.end]={start:V.start,end:E.end,ring:V.ring.concat(E.ring)}):(delete h[E.start],E.ring.unshift(D),h[E.start=H]=E):h[H]=g[S]={start:H,end:S,ring:[D,I]}}}function u(o){return o[0]*2+o[1]*(t+1)*4}function f(o,i,m){o.forEach(function(h){var g=h[0],C=h[1],x=g|0,k=C|0,_=hn(i[k*t+x]);g>0&&g<t&&x===g&&(h[0]=$n(g,hn(i[k*t+x-1]),_,m)),C>0&&C<e&&k===C&&(h[1]=$n(C,hn(i[(k-1)*t+x]),_,m))})}return a.contour=s,a.size=function(o){if(!arguments.length)return[t,e];var i=Math.floor(o[0]),m=Math.floor(o[1]);if(!(i>=0&&m>=0))throw new Error("invalid size");return t=i,e=m,a},a.thresholds=function(o){return arguments.length?(n=typeof o=="function"?o:Array.isArray(o)?Ft(gr.call(o)):Ft(o),a):n},a.smooth=function(o){return arguments.length?(r=o?f:Na,a):r===f},a}function Sa(t){return isFinite(t)?t:NaN}function Kt(t,e){return t==null?!1:+t>=e}function hn(t){return t==null||isNaN(t=+t)?-1/0:t}function $n(t,e,n,r){const a=r-e,s=n-e,l=isFinite(a)||isFinite(s)?a/s:Math.sign(a)/Math.sign(s);return isNaN(l)?t:t+l-.5}function Va(t){return t[0]}function Ia(t){return t[1]}function Pa(){return 1}function Fa(){var t=Va,e=Ia,n=Pa,r=960,a=500,s=20,l=2,u=s*3,f=r+u*2>>l,o=a+u*2>>l,i=Ft(20);function m(p){var M=new Float32Array(f*o),w=Math.pow(2,-l),B=-1;for(const T of p){var D=(t(T,++B,p)+u)*w,I=(e(T,B,p)+u)*w,H=+n(T,B,p);if(H&&D>=0&&D<f&&I>=0&&I<o){var S=Math.floor(D),E=Math.floor(I),V=D-S-.5,X=I-E-.5;M[S+E*f]+=(1-V)*(1-X)*H,M[S+1+E*f]+=V*(1-X)*H,M[S+1+(E+1)*f]+=V*X*H,M[S+(E+1)*f]+=(1-V)*X*H}}return _a({data:M,width:f,height:o},s*w),M}function h(p){var M=m(p),w=i(M),B=Math.pow(2,2*l);return Array.isArray(w)||(w=ir(Number.MIN_VALUE,dn(M)/B,w)),Qn().size([f,o]).thresholds(w.map(D=>D*B))(M).map((D,I)=>(D.value=+w[I],g(D)))}h.contours=function(p){var M=m(p),w=Qn().size([f,o]),B=Math.pow(2,2*l),D=I=>{I=+I;var H=g(w.contour(M,I*B));return H.value=I,H};return Object.defineProperty(D,"max",{get:()=>dn(M)/B}),D};function g(p){return p.coordinates.forEach(C),p}function C(p){p.forEach(x)}function x(p){p.forEach(k)}function k(p){p[0]=p[0]*Math.pow(2,l)-u,p[1]=p[1]*Math.pow(2,l)-u}function _(){return u=s*3,f=r+u*2>>l,o=a+u*2>>l,h}return h.x=function(p){return arguments.length?(t=typeof p=="function"?p:Ft(+p),h):t},h.y=function(p){return arguments.length?(e=typeof p=="function"?p:Ft(+p),h):e},h.weight=function(p){return arguments.length?(n=typeof p=="function"?p:Ft(+p),h):n},h.size=function(p){if(!arguments.length)return[r,a];var M=+p[0],w=+p[1];if(!(M>=0&&w>=0))throw new Error("invalid size");return r=M,a=w,_()},h.cellSize=function(p){if(!arguments.length)return 1<<l;if(!((p=+p)>=1))throw new Error("invalid cell size");return l=Math.floor(Math.log(p)/Math.LN2),_()},h.thresholds=function(p){return arguments.length?(i=typeof p=="function"?p:Array.isArray(p)?Ft(gr.call(p)):Ft(p),h):i},h.bandwidth=function(p){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((p=+p)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*p*p+1)-1)/2,_()},h}const Ha={ariaLabel:"cell"};class Ra extends da{constructor(e,{x:n,y:r,...a}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},a,Ha)}_transform(e,n){e.call(Be,n,{},0,0)}}function tr(t,{x:e,y:n,...r}={}){return[e,n]=cr(e,n),new Ra(t,{...r,x:e,y:n})}const Oa={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ja extends mn{constructor(e,n={}){const{x:r,y:a,z:s,curve:l,tension:u}=n;super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y"},z:{value:gn(n),optional:!0}},n,Oa),this.z=s,this.curve=va(l,u),Sr(this,n)}filter(e){return e}project(e,n,r){this.curve!==Kn&&super.project(e,n,r)}render(e,n,r,a,s){const{x:l,y:u}=r,{curve:f}=this;return yn("svg:g",s).call(bn,this,a,s).call(Be,this,n).call(o=>o.selectAll().data(Vr(e,[l,u],this,r)).enter().append("path").call(ze,this).call(pn,this,r).call(Ir,this,r,s).attr("d",f===Kn&&s.projection?Ua(s.path(),l,u):ma().curve(f).defined(i=>i>=0).x(i=>l[i]).y(i=>u[i]))).node()}}function Ua(t,e,n){return e=Te(e),n=Te(n),r=>{let a=[];const s=[a];for(const l of r)l===-1?(a=[],s.push(a)):a.push([e[l],n[l]]);return t({type:"MultiLineString",coordinates:s})}}function Ya(t,{x:e=fr,y:n=ur,...r}={}){return new ja(t,mr({...r,x:e,y:n}))}const qa={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Wa extends mn{constructor(e,{x:n,y:r,z:a,weight:s,fill:l,stroke:u,...f}={}){const o=er(l)&&(l="currentColor",!0),i=er(u)&&(u="currentColor",!0);super(e,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:gn({z:a,fill:l,stroke:u}),optional:!0},weight:{value:s,optional:!0}},Xa({...f,fill:l,stroke:u},o,i),qa),o&&(this.fill=void 0),i&&(this.stroke=void 0),this.z=a}filter(e){return e}render(e,n,r,a,s){const{contours:l}=r,u=Pr();return yn("svg:g",s).call(bn,this,a,s).call(Be,this,{}).call(f=>f.selectAll().data(e).enter().append("path").call(ze,this).call(Fr,this,r).attr("d",o=>u(l[o]))).node()}}function Ga(t,{x:e,y:n,...r}={}){return[e,n]=cr(e,n),new Wa(t,{...r,x:e,y:n})}const Za=new Set(["x","y","z","weight"]);function Xa(t,e,n){let{bandwidth:a,thresholds:s}=t;return a=a===void 0?20:+a,s=s===void 0?20:typeof s?.[Symbol.iterator]=="function"?Te(s):+s,Hr(t,function(l,u,f,o,i,m){const h=f.weight?Te(f.weight.value):null,g=f.z?.value,{z:C}=this,[x,k]=Rr(this,i),{width:_,height:p}=i,{x:M,y:w}=Or(f,o,m),B=Object.fromEntries(Object.entries(f).filter(([T])=>!Za.has(T)).map(([T,K])=>[T,{...K,value:[]}])),D=e&&[],I=n&&[],H=Fa().x(M?T=>M[T]:x).y(w?T=>w[T]:k).weight(h?T=>h[T]:1).size([_,p]).bandwidth(a),S=[];for(const T of u){const K=[];S.push(K);for(const Y of g?hr(T,g,C):[T]){const nt=H.contours(Y);K.push([Y,nt])}}let E=s;if(!(E instanceof jr)){let T=0;for(const K of S)for(const[,Y]of K){const nt=Y.max;nt>T&&(T=nt)}E=Float64Array.from({length:s-1},(K,Y)=>T*100*(Y+1)/s)}const V=[],X=[];for(const T of S){const K=[];V.push(K);for(const[Y,nt]of T)for(const $ of E){K.push(X.length),X.push(nt($/100)),D&&D.push($),I&&I.push($);for(const ut in B)B[ut].value.push(f[ut].value[Y[0]])}}return D&&D.push(0),I&&I.push(0),{data:l,facets:V,channels:{...B,...D&&{fill:{value:D,scale:"color"}},...I&&{stroke:{value:I,scale:"color"}},contours:{value:X}}}})}function er(t){return/^density$/i.test(t)}function Ka(t,e,n){var r=1e-8,a=e-1,s=n-1,l=0,u,f,o,i,m,h,g,C;if(t<=0)return 0;if(t>=1)return 1;for(u=Math.log(e/(e+n)),f=Math.log(n/(e+n)),o=Math.exp(e*u)/e,i=Math.exp(n*f)/n,g=o+i,t<o/g?h=Math.pow(e*g*t,1/e):h=1-Math.pow(n*g*(1-t),1/n),C=-de(e)-de(n)+de(e+n);l<10;l++){if(h===0||h===1)return h;if(m=Ja(h,e,n)-t,o=Math.exp(a*Math.log(h)+s*Math.log(1-h)+C),i=m/o,h-=o=i/(1-.5*Math.min(1,i*(a/h-s/(1-h)))),h<=0&&(h=.5*(h+o)),h>=1&&(h=.5*(h+o+1)),Math.abs(o)<r*h&&l>0)break}return h}function Ja(t,e,n){var r=t===0||t===1?0:Math.exp(de(e+n)-de(e)-de(n)+e*Math.log(t)+n*Math.log(1-t));return t<0||t>1?!1:t<(e+1)/(e+n+2)?r*nr(t,e,n)/e:1-r*nr(1-t,n,e)/n}function nr(t,e,n){var r=1e-30,a=1,s=e+n,l=e+1,u=e-1,f=1,o=1-s*t/l,i,m,h,g;for(Math.abs(o)<r&&(o=r),o=1/o,g=o;a<=100&&(i=2*a,m=a*(n-a)*t/((u+i)*(e+i)),o=1+m*o,Math.abs(o)<r&&(o=r),f=1+m/f,Math.abs(f)<r&&(f=r),o=1/o,g*=o*f,m=-(e+a)*(s+a)*t/((e+i)*(l+i)),o=1+m*o,Math.abs(o)<r&&(o=r),f=1+m/f,Math.abs(f)<r&&(f=r),o=1/o,h=o*f,g*=h,!(Math.abs(h-1)<3e-7));a++);return g}function de(t){var e=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,a,s,l;for(l=(s=a=t)+5.5,l-=(a+.5)*Math.log(l);e<6;e++)r+=n[e]/++s;return Math.log(2.506628274631*r/a)-l}function Qa(t,e){var n=Ka(2*Math.min(t,1-t),.5*e,.5);return n=Math.sqrt(e*(1-n)/n),t>.5?n:-n}const $a={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ts extends mn{constructor(e,n={}){const{x:r,y:a,z:s,ci:l=.95,precision:u=4}=n;if(super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y"},z:{value:gn(n),optional:!0}},n,$a),this.z=s,this.ci=+l,this.precision=+u,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${l}`);if(!(this.precision>0))throw new Error(`invalid precision: ${u}`)}render(e,n,r,a,s){const{x:l,y:u,z:f}=r,{ci:o}=this;return yn("svg:g",s).call(bn,this,a,s).call(Be,this,n).call(i=>i.selectAll().data(f?hr(e,f,this.z):[e]).enter().call(m=>m.append("path").attr("fill","none").call(ze,this).call(pn,this,{...r,fill:null,fillOpacity:null}).attr("d",h=>this._renderLine(h,l,u)).call(o&&!Yr(this.fill)?h=>h.select(es).attr("stroke","none").call(ze,this).call(pn,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",g=>this._renderBand(g,l,u)):()=>{}))).node()}}function es(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(Br.svg,"path"),this)}class ns extends ts{constructor(e,n){super(e,n)}_renderBand(e,n,r){const{ci:a,precision:s}=this,[l,u]=Le(e,i=>n[i]),f=rr(e,n,r),o=as(e,n,r,(1-a)/2,f);return ga().x(i=>i).y0(i=>o(i,-1)).y1(i=>o(i,1))(dr(l,u-s/2,s).concat(u))}_renderLine(e,n,r){const[a,s]=Le(e,u=>n[u]),l=rr(e,n,r);return`M${a},${l(a)}L${s},${l(s)}`}}function rs(t,{x:e=fr,y:n=ur,stroke:r,fill:a=Ur(r)?"currentColor":r,...s}={}){return new ns(t,mr({...s,x:e,y:n,fill:a,stroke:r}))}function rr(t,e,n){let r=0,a=0,s=0,l=0;for(const i of t){const m=e[i],h=n[i];r+=m,a+=h,s+=m*h,l+=m*m}const u=t.length,f=(u*s-r*a)/(u*l-r*r),o=(a-f*r)/u;return i=>f*i+o}function as(t,e,n,r,a){const s=pr(t,i=>e[i])/t.length;let l=0,u=0;for(const i of t)l+=(e[i]-s)**2,u+=(n[i]-a(e[i]))**2;const f=Math.sqrt(u/(t.length-2)),o=Qa(r,t.length-2);return(i,m)=>{const h=a(i),g=f*Math.sqrt(1/t.length+(i-s)**2/l);return h+m*o*g}}function ar(t,e){return arguments.length===1&&({basis:t,...e}=t),ya(ss(t),e)}function ss(t){if(t===void 0)return sr;if(typeof t=="function")return Ne(qr(t));if(/^p\d{2}$/i.test(t))return pe(Xr(t));switch(`${t}`.toLowerCase()){case"deviation":return is;case"first":return sr;case"last":return ls;case"max":return cs;case"mean":return us;case"median":return fs;case"min":return hs;case"sum":return ds;case"extent":return os}throw new Error(`invalid basis: ${t}`)}function Ne(t){return{mapIndex(e,n,r){const a=+t(e,n);for(const s of e)r[s]=n[s]===null?NaN:n[s]/a}}}function pe(t){return Ne((e,n)=>t(e,r=>n[r]))}const os={mapIndex(t,e,n){const[r,a]=Le(t,l=>e[l]),s=a-r;for(const l of t)n[l]=e[l]===null?NaN:(e[l]-r)/s}},sr=Ne((t,e)=>{for(let n=0;n<t.length;++n){const r=e[t[n]];if(vr(r))return r}}),ls=Ne((t,e)=>{for(let n=t.length-1;n>=0;--n){const r=e[t[n]];if(vr(r))return r}}),is={mapIndex(t,e,n){const r=ge(t,s=>e[s]),a=Zr(t,s=>e[s]);for(const s of t)n[s]=e[s]===null?NaN:a?(e[s]-r)/a:0}},cs=pe(dn),us=pe(ge),fs=pe(Gr),hs=pe(Wr),ds=pe(pr);function or(t,e,n){const r=t.slice();return r[46]=e[n],r[47]=e,r[48]=n,r}function ps(t){let e,n,r,a,s,l,u,f,o=`Histogram shows the number of data zones distributed across
                                    different household social economic factors.`,i,m,h="",g=t[46],C,x,k,_,p,M,w,B,D,I=`Density plot refers to UK distribution while the
                                        scattered points refer to data zones in the local authority.`,H,S,E="",V,X,T,K="";const Y=()=>t[25](m,g),nt=()=>t[25](null,g),$=()=>t[26](S,g),ut=()=>t[26](null,g),At=()=>t[27](T,g),xt=()=>t[27](null,g);return{c(){e=b("div"),n=b("h3"),r=Z("Data Zones Distribution (vs. "),a=b("span"),s=Z(t[8]),l=Z(" average)"),u=z(),f=b("p"),f.textContent=o,i=z(),m=b("div"),m.innerHTML=h,C=z(),x=b("div"),k=b("div"),_=b("h3"),p=Z("Co-benefits Recieved by Data Zones across "),M=Z(t[46]),w=Z(`
                                        Values`),B=z(),D=b("p"),D.textContent=I,H=z(),S=b("div"),S.innerHTML=E,V=z(),X=b("div"),T=b("div"),T.innerHTML=K,this.h()},l(q){e=y(q,"DIV",{class:!0});var J=N(e);n=y(J,"H3",{class:!0});var rt=N(n);r=G(rt,"Data Zones Distribution (vs. "),a=y(rt,"SPAN",{class:!0});var Ht=N(a);s=G(Ht,t[8]),Ht.forEach(A),l=G(rt," average)"),rt.forEach(A),u=L(J),f=y(J,"P",{class:!0,"data-svelte-h":!0}),O(f)!=="svelte-xcsopb"&&(f.textContent=o),i=L(J),m=y(J,"DIV",{class:!0,"data-svelte-h":!0}),O(m)!=="svelte-1gvlz6w"&&(m.innerHTML=h),J.forEach(A),C=L(q),x=y(q,"DIV",{class:!0});var ft=N(x);k=y(ft,"DIV",{});var et=N(k);_=y(et,"H3",{class:!0});var d=N(_);p=G(d,"Co-benefits Recieved by Data Zones across "),M=G(d,t[46]),w=G(d,`
                                        Values`),d.forEach(A),B=L(et),D=y(et,"P",{class:!0,"data-svelte-h":!0}),O(D)!=="svelte-18bgpzu"&&(D.textContent=I),H=L(et),S=y(et,"DIV",{class:!0,"data-svelte-h":!0}),O(S)!=="svelte-aesnqn"&&(S.innerHTML=E),et.forEach(A),V=L(ft),X=y(ft,"DIV",{});var P=N(X);T=y(P,"DIV",{class:!0,"data-svelte-h":!0}),O(T)!=="svelte-xsgztl"&&(T.innerHTML=K),P.forEach(A),ft.forEach(A),this.h()},h(){v(a,"class","nation-label svelte-i61d1c"),v(n,"class","component-title"),v(f,"class","description short"),v(m,"class","plot"),v(e,"class","component"),v(_,"class","component-title"),v(D,"class","description short"),v(S,"class","plot"),v(T,"class","plot"),v(x,"class","component")},m(q,J){$t(q,e,J),c(e,n),c(n,r),c(n,a),c(a,s),c(n,l),c(e,u),c(e,f),c(e,i),c(e,m),Y(),$t(q,C,J),$t(q,x,J),c(x,k),c(k,_),c(_,p),c(_,M),c(_,w),c(k,B),c(k,D),c(k,H),c(k,S),$(),c(x,V),c(x,X),c(X,T),At()},p(q,J){t=q,J[0]&256&&De(s,t[8]),g!==t[46]&&(nt(),g=t[46],Y()),g!==t[46]&&(ut(),g=t[46],$()),g!==t[46]&&(xt(),g=t[46],At())},d(q){q&&(A(e),A(C),A(x)),nt(),ut(),xt()}}}function vs(t){let e,n,r="",a=t[46];const s=()=>t[24](n,a),l=()=>t[24](null,a);return{c(){e=b("div"),n=b("div"),n.innerHTML=r,this.h()},l(u){e=y(u,"DIV",{class:!0});var f=N(e);n=y(f,"DIV",{class:!0,"data-svelte-h":!0}),O(n)!=="svelte-1shkadq"&&(n.innerHTML=r),f.forEach(A),this.h()},h(){v(n,"class","plot"),v(e,"class","component")},m(u,f){$t(u,e,f),c(e,n),s()},p(u,f){t=u,a!==t[46]&&(l(),a=t[46],s())},d(u){u&&A(e),l()}}}function lr(t){let e,n,r,a,s,l;function u(i,m){return i[7]?vs:ps}let f=u(t),o=f(t);return{c(){e=b("div"),n=b("h2"),r=Z(t[46]),a=z(),s=b("div"),o.c(),l=z(),this.h()},l(i){e=y(i,"DIV",{});var m=N(e);n=y(m,"H2",{});var h=N(n);r=G(h,t[46]),h.forEach(A),a=L(m),s=y(m,"DIV",{class:!0});var g=N(s);o.l(g),g.forEach(A),l=L(m),m.forEach(A),this.h()},h(){v(s,"class","row")},m(i,m){$t(i,e,m),c(e,n),c(n,r),c(e,a),c(e,s),o.m(s,null),c(e,l)},p(i,m){f===(f=u(i))&&o?o.p(i,m):(o.d(1),o=f(i),o&&(o.c(),o.m(s,null)))},d(i){i&&A(e),o.d()}}}function ms(t){let e,n,r,a,s,l,u,f="Data Report",o,i,m=t[11][t[10]]+"",h,g,C,x=`Explore how this local authority will benefit from achieving Net Zero and general factors
            of their households.`,k,_,p,M,w,B,D="UK",I,H,S,E,V,X="England",T,K,Y,nt,$,ut="Wales",At,xt,q,J,rt,Ht="Scotland",ft,et,d,P,kt="Northern Ireland",ht,U,_t,Q=`<p class="section-subtitle">Overview</p> <h2 class="section-title">How much co-benefit values would this area recieve?</h2> <p class="description">We calculate and model 11 types of co-benefits across five different pathyways
                suggested by Climate Change Committee in the Sixth Carbon Budget from 2025-2050 on the level of data
                zones across UK.</p>`,st,ot,lt,Dt,Se,te,ye,Ve,Ie,Ct,Pe,_n=t[11][t[10]]+"",Fe,He,ee,be,Re,Lt,Cn="",Oe,dt,Rt,wn=t[11][t[10]]+"",je,Ue,Ye,Ot,En="Scroll for zooming in and out.",qe,wt,Mn="",We,pt,jt,An=`<p class="section-subtitle">Temporal Trends</p> <h2 class="section-title">How co-benefits change over time?</h2> <p class="description">Detailed breakdown of temporal trends for total co-benefits, types of co-benefits,
                and five pathways.</p>`,Ge,zt,Tt,Ze,ne,_e,Xe,Ke,re,Bt,xn="",Je,Nt,Ut,kn=`11 Types of Co-benefits Distribution Following Balance Pathway from
                2025-2050`,Qe,ae,se,St,Dn="",$e,Vt,at,Yt,Ln="Households",tn,qt,zn="Social Economic Factors of Households",en,Wt,Tn=`We describe the distribution of household economic factors aggregated on the data
                zone level and the different level of co-benefits recieved by those data zones.`,nn,Gt,rn,It,Bn="Aggregate Plots",an,Pt,Zt,sn,Nn;e=new Tr({});let oe=On(vn),tt=[];for(let F=0;F<oe.length;F+=1)tt[F]=lr(or(t,oe,F));return{c(){zr(e.$$.fragment),n=z(),r=b("div"),a=b("div"),s=z(),l=b("div"),u=b("p"),u.textContent=f,o=z(),i=b("h1"),h=Z(m),g=z(),C=b("p"),C.textContent=x,k=z(),_=b("div"),p=Z(`Compare the Local District Area with average of:
            `),M=b("input"),w=z(),B=b("label"),B.textContent=D,I=b("br"),H=z(),S=b("input"),E=z(),V=b("label"),V.textContent=X,T=b("br"),K=z(),Y=b("input"),nt=z(),$=b("label"),$.textContent=ut,At=b("br"),xt=z(),q=b("input"),J=z(),rt=b("label"),rt.textContent=Ht,ft=z(),et=b("input"),d=z(),P=b("label"),P.textContent=kt,ht=z(),U=b("div"),_t=b("div"),_t.innerHTML=Q,st=z(),ot=b("div"),lt=b("div"),Dt=b("h3"),Se=Z("11 Types of Co-Benefits Values (vs. "),te=b("span"),ye=Z(t[8]),Ve=Z(" Average)"),Ie=z(),Ct=b("p"),Pe=Z("Co-benefits values in "),Fe=Z(_n),He=Z(` verus average value across all local
                    authorities in `),ee=b("span"),be=Z(t[8]),Re=z(),Lt=b("div"),Lt.innerHTML=Cn,Oe=z(),dt=b("div"),Rt=b("h3"),je=Z(wn),Ue=Z(" on UK Map"),Ye=z(),Ot=b("p"),Ot.textContent=En,qe=z(),wt=b("div"),wt.innerHTML=Mn,We=z(),pt=b("div"),jt=b("div"),jt.innerHTML=An,Ge=z(),zt=b("div"),Tt=b("h3"),Ze=Z("Total Co-benefits Distribution from 2025-2050 (vs. "),ne=b("span"),_e=Z(t[8]),Xe=Z(" Average)"),Ke=z(),re=b("div"),Bt=b("div"),Bt.innerHTML=xn,Je=z(),Nt=b("div"),Ut=b("h3"),Ut.textContent=kn,Qe=z(),ae=b("div"),se=b("div"),St=b("div"),St.innerHTML=Dn,$e=z(),Vt=b("div"),at=b("div"),Yt=b("p"),Yt.textContent=Ln,tn=z(),qt=b("h2"),qt.textContent=zn,en=z(),Wt=b("p"),Wt.textContent=Tn,nn=z(),Gt=b("input"),rn=z(),It=b("label"),It.textContent=Bn,an=z(),Pt=b("div");for(let F=0;F<tt.length;F+=1)tt[F].c();this.h()},l(F){Lr(e.$$.fragment,F),n=L(F),r=y(F,"DIV",{class:!0});var W=N(r);a=y(W,"DIV",{style:!0}),N(a).forEach(A),s=L(W),l=y(W,"DIV",{class:!0});var R=N(l);u=y(R,"P",{class:!0,"data-svelte-h":!0}),O(u)!=="svelte-1gxb8h1"&&(u.textContent=f),o=L(R),i=y(R,"H1",{class:!0});var ve=N(i);h=G(ve,m),ve.forEach(A),g=L(R),C=y(R,"P",{class:!0,"data-svelte-h":!0}),O(C)!=="svelte-g7xah4"&&(C.textContent=x),k=L(R),_=y(R,"DIV",{class:!0});var j=N(_);p=G(j,`Compare the Local District Area with average of:
            `),M=y(j,"INPUT",{type:!0,name:!0}),w=L(j),B=y(j,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(B)!=="svelte-1yhxhao"&&(B.textContent=D),I=y(j,"BR",{}),H=L(j),S=y(j,"INPUT",{type:!0,name:!0}),E=L(j),V=y(j,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(V)!=="svelte-11zyrfp"&&(V.textContent=X),T=y(j,"BR",{}),K=L(j),Y=y(j,"INPUT",{type:!0,name:!0}),nt=L(j),$=y(j,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O($)!=="svelte-18hrmu4"&&($.textContent=ut),At=y(j,"BR",{}),xt=L(j),q=y(j,"INPUT",{type:!0,name:!0}),J=L(j),rt=y(j,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(rt)!=="svelte-16xf1ji"&&(rt.textContent=Ht),ft=L(j),et=y(j,"INPUT",{type:!0,name:!0}),d=L(j),P=y(j,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),O(P)!=="svelte-g19yfx"&&(P.textContent=kt),j.forEach(A),R.forEach(A),ht=L(W),U=y(W,"DIV",{class:!0});var Ce=N(U);_t=y(Ce,"DIV",{class:!0,"data-svelte-h":!0}),O(_t)!=="svelte-ppwlk3"&&(_t.innerHTML=Q),st=L(Ce),ot=y(Ce,"DIV",{id:!0,class:!0});var we=N(ot);lt=y(we,"DIV",{class:!0});var le=N(lt);Dt=y(le,"H3",{class:!0});var Ee=N(Dt);Se=G(Ee,"11 Types of Co-Benefits Values (vs. "),te=y(Ee,"SPAN",{class:!0});var Sn=N(te);ye=G(Sn,t[8]),Sn.forEach(A),Ve=G(Ee," Average)"),Ee.forEach(A),Ie=L(le),Ct=y(le,"P",{class:!0});var me=N(Ct);Pe=G(me,"Co-benefits values in "),Fe=G(me,_n),He=G(me,` verus average value across all local
                    authorities in `),ee=y(me,"SPAN",{class:!0});var Vn=N(ee);be=G(Vn,t[8]),Vn.forEach(A),me.forEach(A),Re=L(le),Lt=y(le,"DIV",{class:!0,"data-svelte-h":!0}),O(Lt)!=="svelte-1gmwtaj"&&(Lt.innerHTML=Cn),le.forEach(A),Oe=L(we),dt=y(we,"DIV",{class:!0});var ie=N(dt);Rt=y(ie,"H3",{class:!0});var on=N(Rt);je=G(on,wn),Ue=G(on," on UK Map"),on.forEach(A),Ye=L(ie),Ot=y(ie,"P",{class:!0,"data-svelte-h":!0}),O(Ot)!=="svelte-1ask2se"&&(Ot.textContent=En),qe=L(ie),wt=y(ie,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),O(wt)!=="svelte-13ehpmu"&&(wt.innerHTML=Mn),ie.forEach(A),we.forEach(A),Ce.forEach(A),We=L(W),pt=y(W,"DIV",{class:!0});var ce=N(pt);jt=y(ce,"DIV",{class:!0,"data-svelte-h":!0}),O(jt)!=="svelte-a3uzt2"&&(jt.innerHTML=An),Ge=L(ce),zt=y(ce,"DIV",{class:!0});var Me=N(zt);Tt=y(Me,"H3",{class:!0});var Ae=N(Tt);Ze=G(Ae,"Total Co-benefits Distribution from 2025-2050 (vs. "),ne=y(Ae,"SPAN",{class:!0});var In=N(ne);_e=G(In,t[8]),In.forEach(A),Xe=G(Ae," Average)"),Ae.forEach(A),Ke=L(Me),re=y(Me,"DIV",{class:!0});var Pn=N(re);Bt=y(Pn,"DIV",{class:!0,"data-svelte-h":!0}),O(Bt)!=="svelte-vuq0y7"&&(Bt.innerHTML=xn),Pn.forEach(A),Me.forEach(A),Je=L(ce),Nt=y(ce,"DIV",{class:!0});var xe=N(Nt);Ut=y(xe,"H3",{class:!0,"data-svelte-h":!0}),O(Ut)!=="svelte-199w57s"&&(Ut.textContent=kn),Qe=L(xe),ae=y(xe,"DIV",{class:!0});var Fn=N(ae);se=y(Fn,"DIV",{class:!0});var Hn=N(se);St=y(Hn,"DIV",{class:!0,"data-svelte-h":!0}),O(St)!=="svelte-18dxhf7"&&(St.innerHTML=Dn),Hn.forEach(A),Fn.forEach(A),xe.forEach(A),ce.forEach(A),$e=L(W),Vt=y(W,"DIV",{class:!0});var ke=N(Vt);at=y(ke,"DIV",{class:!0});var vt=N(at);Yt=y(vt,"P",{class:!0,"data-svelte-h":!0}),O(Yt)!=="svelte-ceroz1"&&(Yt.textContent=Ln),tn=L(vt),qt=y(vt,"H2",{class:!0,"data-svelte-h":!0}),O(qt)!=="svelte-so6kne"&&(qt.textContent=zn),en=L(vt),Wt=y(vt,"P",{class:!0,"data-svelte-h":!0}),O(Wt)!=="svelte-1u75598"&&(Wt.textContent=Tn),nn=L(vt),Gt=y(vt,"INPUT",{type:!0}),rn=L(vt),It=y(vt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(It)!=="svelte-1kwkdzm"&&(It.textContent=Bn),vt.forEach(A),an=L(ke),Pt=y(ke,"DIV",{id:!0,class:!0});var Rn=N(Pt);for(let ln=0;ln<tt.length;ln+=1)tt[ln].l(Rn);Rn.forEach(A),ke.forEach(A),W.forEach(A),this.h()},h(){Cr(a,"--color",Qt),v(u,"class","page-subtitle"),v(i,"class","page-title"),v(C,"class","description"),v(M,"type","radio"),v(M,"name","compare"),M.value="UK",M.checked=!0,v(B,"class","nation-label svelte-i61d1c"),v(B,"for","html"),v(S,"type","radio"),v(S,"name","compare"),S.value="England",v(V,"class","nation-label svelte-i61d1c"),v(V,"for","html"),v(Y,"type","radio"),v(Y,"name","compare"),Y.value="Wales",v($,"class","nation-label svelte-i61d1c"),v($,"for","html"),v(q,"type","radio"),v(q,"name","compare"),q.value="Scotland",v(rt,"class","nation-label svelte-i61d1c"),v(rt,"for","javascript"),v(et,"type","radio"),v(et,"name","compare"),et.value="NI",v(P,"class","nation-label svelte-i61d1c"),v(P,"for","javascript"),v(_,"class","radio-set"),v(l,"class","section header"),v(_t,"class","section-header"),v(te,"class","nation-label svelte-i61d1c"),v(Dt,"class","component-title"),v(ee,"class","nation-label svelte-i61d1c"),v(Ct,"class","description"),v(Lt,"class","plot"),v(lt,"class","component column"),v(Rt,"class","component-title"),v(Ot,"class","description"),v(wt,"id","map"),v(wt,"class","svelte-i61d1c"),v(dt,"class","component column"),v(ot,"id","vis-block"),v(ot,"class","svelte-i61d1c"),v(U,"class","section"),v(jt,"class","section-header"),v(ne,"class","nation-label svelte-i61d1c"),v(Tt,"class","component-title"),v(Bt,"class","plot"),v(re,"class","row"),v(zt,"class","component singlevis"),v(Ut,"class","component-title"),v(St,"class","plot"),v(se,"class","row"),v(ae,"class","row"),v(Nt,"class","component singlevis"),v(pt,"class","section"),v(Yt,"class","section-subtitle"),v(qt,"class","section-title"),v(Wt,"class","description"),v(Gt,"type","checkbox"),v(It,"for","checkbox"),v(It,"class","svelte-i61d1c"),v(at,"class","section-header"),v(Pt,"id","multiple-comp"),v(Pt,"class","svelte-i61d1c"),v(Vt,"class","section"),v(r,"class","page-container")},m(F,W){Dr(e,F,W),$t(F,n,W),$t(F,r,W),c(r,a),c(r,s),c(r,l),c(l,u),c(l,o),c(l,i),c(i,h),c(l,g),c(l,C),c(l,k),c(l,_),c(_,p),c(_,M),c(_,w),c(_,B),c(_,I),c(_,H),c(_,S),c(_,E),c(_,V),c(_,T),c(_,K),c(_,Y),c(_,nt),c(_,$),c(_,At),c(_,xt),c(_,q),c(_,J),c(_,rt),c(_,ft),c(_,et),c(_,d),c(_,P),c(r,ht),c(r,U),c(U,_t),c(U,st),c(U,ot),c(ot,lt),c(lt,Dt),c(Dt,Se),c(Dt,te),c(te,ye),c(Dt,Ve),c(lt,Ie),c(lt,Ct),c(Ct,Pe),c(Ct,Fe),c(Ct,He),c(Ct,ee),c(ee,be),c(lt,Re),c(lt,Lt),t[19](Lt),c(ot,Oe),c(ot,dt),c(dt,Rt),c(Rt,je),c(Rt,Ue),c(dt,Ye),c(dt,Ot),c(dt,qe),c(dt,wt),t[20](wt),c(r,We),c(r,pt),c(pt,jt),c(pt,Ge),c(pt,zt),c(zt,Tt),c(Tt,Ze),c(Tt,ne),c(ne,_e),c(Tt,Xe),c(zt,Ke),c(zt,re),c(re,Bt),t[21](Bt),c(pt,Je),c(pt,Nt),c(Nt,Ut),c(Nt,Qe),c(Nt,ae),c(ae,se),c(se,St),t[22](St),c(r,$e),c(r,Vt),c(Vt,at),c(at,Yt),c(at,tn),c(at,qt),c(at,en),c(at,Wt),c(at,nn),c(at,Gt),Gt.checked=t[7],c(at,rn),c(at,It),c(Vt,an),c(Vt,Pt);for(let R=0;R<tt.length;R+=1)tt[R]&&tt[R].m(Pt,null);t[28](r),Zt=!0,sn||(Nn=[ue(M,"change",t[12]),ue(S,"change",t[12]),ue(Y,"change",t[12]),ue(q,"change",t[12]),ue(et,"change",t[12]),ue(Gt,"change",t[23])],sn=!0)},p(F,W){if((!Zt||W[0]&256)&&De(ye,F[8]),(!Zt||W[0]&256)&&De(be,F[8]),(!Zt||W[0]&256)&&De(_e,F[8]),W[0]&128&&(Gt.checked=F[7]),W[0]&440){oe=On(vn);let R;for(R=0;R<oe.length;R+=1){const ve=or(F,oe,R);tt[R]?tt[R].p(ve,W):(tt[R]=lr(ve),tt[R].c(),tt[R].m(Pt,null))}for(;R<tt.length;R+=1)tt[R].d(1);tt.length=oe.length}},i(F){Zt||(kr(e.$$.fragment,F),Zt=!0)},o(F){xr(e.$$.fragment,F),Zt=!1},d(F){F&&(A(n),A(r)),Ar(e,F),t[19](null),t[20](null),t[21](null),t[22](null),br(tt,F),t[28](null),sn=!1,_r(Nn)}}}let ct=400;function Jt(t){const e=t.querySelector("figure");e&&e.remove();const n=t.querySelector("svg");n&&n.remove()}function gs(t,e,n){let r,a,s,l,u={},f={},o={},i={},m="barchart",h=!1,{data:g}=e;const C=g.LAD;let x="UK",k,_,p,M,w,B,D=!1;async function I(){n(15,k=await bt(Wn())),await bt(ca()),n(16,_=await bt(Gn([]))),p=await bt(ua(Un.map(d=>d.id))),n(17,M=await bt(Zn())),w=await bt(fa(C)),B=await bt(ha(C)),n(18,D=!0),ra(r)}I();const H=g.LADToName;let S,E;wr(()=>{na(r),S=new ta(C,"LAD",E,"val",!0),S.initMap()});function V(){{let d=it({height:ct/1.4,...yt,x:{type:"band"},style:{fontSize:"18px"},marks:[Xt(_,mt({y:"mean"},{y:"val",x:"scenario",fill:"lightblue",opacity:.7,dx:20})),Xt(w,mt({y:"sum"},{y:"total",x:"scenario",tip:!0}))]});setTimeout(()=>{const P=gt(d).selectAll("g[aria-label='bar']"),kt=gt(P.nodes()[0]),ht=gt(P.nodes()[1]);console.log(2323232323,kt.node()),ht.selectAll("rect").each(function(){console.log(2,this)}),ht.remove()},1e3)}}function X(){console.log(99,M),a?.append(it({height:ct,width:811,MARGINS:yt,x:{type:"band"},marks:[Xt(M,mt({y:"mean"},{y:"val",x:"co_benefit_type",dx:aa,fill:Qt,sort:{x:"y",reverse:!0},tip:!0})),Xt(B,mt({y:"sum"},{y:"total",x:"co_benefit_type",fill:d=>sa(d.co_benefit_type),tip:!0}))]}))}function T(){vn.forEach(d=>{let P;h?(Yn.includes(d)?P=it({height:ct/3,width:500*2,...yt,style:{fontSize:"18px"},color:{legend:!0,scheme:"greys"},x:{domain:dr(0,6),ticks:new Set(w.map(U=>U[d]))},marks:[tr(w,mt({fill:"count"},{x:d,stroke:"black"})),tr([Math.floor(ge(k.map(U=>U[d])))],{x:U=>U,stroke:"red",fill:null,strokeWidth:2})]}):P=it({height:ct/3,width:500*2,...yt,style:{fontSize:"18px"},color:{legend:!0},marks:[fn(w,{x:d,tip:!0}),fn([ge(w.map(U=>U[d]))],{stroke:"blue",strokeWidth:2}),fn([ge(k.map(U=>U[d]))],{stroke:"red",strokeWidth:2})]}),u[d]?.append(P)):(Yn.includes(d)?P=it({height:ct/2,width:500,...yt,marginLeft:100,x:{grid:!0,label:d,tickFormat:U=>Math.floor(U)},style:{fontSize:"18px"},color:{legend:!0},marks:[Xt(k,ar(mt({y:"count"},{x:d,dx:20,fill:Qt}))),Xt(w,ar(mt({y:"count"},{x:d})))]}):P=it({height:ct/2,...yt,x:{label:qn(d)},style:{fontSize:"18px"},marks:[un(w,Jn({y:"proportion"},{x:d,tip:!0,fill:Qt,stroke:Qt,fillOpacity:.2,strokeWidth:3})),un(k,Jn({y:"proportion"},{x:d,tip:!0,fill:"black",stroke:"black",fillOpacity:.2,strokeWidth:3}))]}),f[d]?.append(void 0),u[d]?.append(P));let ht=it({height:ct/2,...yt,x:{label:qn(d)},style:{fontSize:"18px"},color:{range:["rgb(227, 248, 255)","lightblue"]},marks:[Ga(ea(k,3e4),{x:d,y:"total",fill:"density",thresholds:10}),ba(w,{x:d,y:"total",fill:"black",r:2}),rs(w,{x:d,y:"total"}),Qr(),$r({anchor:"bottom"})]});o[d]?.append(ht)})}function K(){for(let d of ia){let P=it({height:ct,width:410,...yt,marginRight:0,marginLeft:100,marks:[Xn(p,jn({x:"mean"},{x:"val",y:"co_benefit_type",dy:-10,fill:Qt,tip:!0})),Xn(B,jn({x:"mean"},{x:"total",y:"co_benefit_type",tip:!0}))]});i[d]?.append(P)}}function Y(){let d=w.flatMap(Q=>cn.map(st=>({time:st,value:Q[st],scenario:Q.scenario,zone:"local"}))),P=k.flatMap(Q=>cn.map(st=>({time:st,value:Q[st],scenario:Q.scenario,zone:"UK"}))),kt=d.concat(P),ht=it({height:ct,width:800,...yt,marginRight:0,marginLeft:40,marginTop:40,style:{fontSize:"18px"},y:{label:"£"},x:{tickSize:0,label:null,ticks:[],padding:0},color:{range:[oa,Qt]},marks:[Xt(kt,mt({y:"mean"},{x:"zone",y:"value",fx:"time",tip:!0,fill:"zone"})),Kr({anchor:"bottom",tickFormat:Q=>Q.replace(/^Y/,"").replace("_","-"),offset:5,label:"Years"})]});s?.append(ht),gt(s).select("g[aria-label='bar']").selectAll("g").each(function(Q,st){const ot=gt(this).selectAll("rect").nodes()[0],lt=gt(ot).attr("transform")||"";gt(ot).attr("transform",`${lt} translate(-20, 0)`),gt(this).selectAll("rect").nodes()[0].getAttribute("height"),gt(this).selectAll("rect").nodes()[1].getAttribute("height"),gt(this).selectAll("rect")}),it({height:ct,width:800,...yt,paddingLeft:200,marginRight:0,color:{legend:!0},marks:[Ya(kt,mt({y:"mean"},{x:"time",y:"value",tip:!0,stroke:"scenario"}))]});let U=B.flatMap(Q=>cn.map(st=>({time:st,value:Q[st],cobenefit:Q.co_benefit_type})));console.log("debug",U);let _t=it({height:ct*1.5,width:1e3,marginRight:0,marginTop:40,marginLeft:60,marginBottom:60,style:{fontSize:"18px"},y:{tickFormat:".2f",label:"Value (£)"},x:{label:"Years",tickFormat:Q=>Q.replace(/^Y/,"").split("_")[1]},color:{legend:!0,range:la,domain:Un.map(Q=>Q.id)},marks:[un(U,mt({y:"mean"},{x:"time",y:"value",tip:!0,fill:"cobenefit",curve:"basis",order:["Road safety","Congestion","Air quality","Noise","Excess cold","Excess heat","Dampness","Road repairs","Physical activity","Diet change","Hassle costs"]})),Jr([0],{strokeWidth:2,stroke:"#333333",opacity:.5,strokeLinecap:"round"})]});l?.append(_t)}async function nt(d){n(8,x=d.currentTarget.value),n(17,M=await bt(Zn("total",x))),n(16,_=await bt(Gn([],x))),n(15,k=await bt(Wn(x)))}function $(d){Et[d?"unshift":"push"](()=>{a=d,n(0,a)})}function ut(d){Et[d?"unshift":"push"](()=>{E=d,n(9,E)})}function At(d){Et[d?"unshift":"push"](()=>{s=d,n(1,s)})}function xt(d){Et[d?"unshift":"push"](()=>{l=d,n(2,l)})}function q(){h=this.checked,n(7,h)}function J(d,P){Et[d?"unshift":"push"](()=>{u[P]=d,n(3,u)})}function rt(d,P){Et[d?"unshift":"push"](()=>{u[P]=d,n(3,u)})}function Ht(d,P){Et[d?"unshift":"push"](()=>{f[P]=d,n(4,f)})}function ft(d,P){Et[d?"unshift":"push"](()=>{o[P]=d,n(5,o)})}function et(d){Et[d?"unshift":"push"](()=>{r=d,n(6,r)})}return t.$$set=d=>{"data"in d&&n(13,g=d.data)},t.$$.update=()=>{t.$$.dirty[0]&507911&&(a&&Jt(a),s&&Jt(s),l&&Jt(l),D&&M&&_&&k&&(console.log("render"),V(),X(),Y())),t.$$.dirty[0]&262200&&(Object.values(u).forEach(d=>{d&&Jt(d)}),Object.values(f).forEach(d=>{d&&Jt(d)}),Object.values(o).forEach(d=>{d&&Jt(d)}),D&&T()),t.$$.dirty[0]&262144&&(Object.values(i).forEach(d=>{d&&Jt(d)}),D&&K())},[a,s,l,u,f,o,r,h,x,E,C,H,nt,g,m,k,_,M,D,$,ut,At,xt,q,J,rt,Ht,ft,et]}class Ls extends Er{constructor(e){super(),Mr(this,e,gs,ms,yr,{data:13},null,[-1,-1])}}export{Ls as component};
