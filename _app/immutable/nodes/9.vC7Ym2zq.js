import{s as We,e as c,a as S,t as ie,c as f,b as v,g as A,d as oe,f as r,q as u,i as K,h as o,W as ht,y as ye,n as Fe,z as vt,X as Rt,w as qe,j as he,p as re,x as we,B as tt,C as Ae,H as jt,r as bt,E as Gt,N as qt,Y as Ct,Z as Wt,v as zt,_ as Xt,A as Ge}from"../chunks/scheduler.GkBzG_tJ.js";import{S as st,i as rt,c as lt,b as at,m as nt,t as Be,a as Se,e as wt,d as it,g as Dt}from"../chunks/index.puHNmHGV.js";import{e as Te,N as Yt}from"../chunks/NavigationBar.Bw7CCNF6.js";import{b as Re}from"../chunks/paths.BEvuEMLL.js";import{g as Kt}from"../chunks/entry.BiQsyzbu.js";import{I as ot,P as Zt,Q as Et}from"../chunks/index.CHZ6sWj5.js";import{g as dt,C as _t,e as Qt,f as Jt,r as xt,h as $t,i as el}from"../chunks/globals.hXek6OLv.js";import{b as mt}from"../chunks/bar.B1iivFak.js";import{g as et,k as tl,l as ll,m as al,n as nl}from"../chunks/duckdb.CGvzhW_S.js";function Vt(a,e,t){const l=a.slice();return l[10]=e[t],l}function kt(a){let e,t=Te(a[2]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Bt(Vt(a,t,n));return{c(){e=c("ul");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=f(n,"UL",{class:!0});var i=v(e);for(let s=0;s<l.length;s+=1)l[s].l(i);i.forEach(r),this.h()},h(){u(e,"class","suggestions svelte-1kj8esc")},m(n,i){K(n,e,i);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null)},p(n,i){if(i&12){t=Te(n[2]);let s;for(s=0;s<t.length;s+=1){const d=Vt(n,t,s);l[s]?l[s].p(d,i):(l[s]=Bt(d),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){n&&r(e),qe(l,n)}}}function Bt(a){let e,t=a[10][1]+"",l,n,i;function s(){return a[7](a[10])}return{c(){e=c("li"),l=ie(t),this.h()},l(d){e=f(d,"LI",{class:!0});var _=v(e);l=oe(_,t),_.forEach(r),this.h()},h(){u(e,"class","svelte-1kj8esc")},m(d,_){K(d,e,_),o(e,l),n||(i=ye(e,"click",s),n=!0)},p(d,_){a=d,_&4&&t!==(t=a[10][1]+"")&&he(l,t)},d(d){d&&r(e),n=!1,i()}}}function il(a){let e,t,l,n,i,s,d,_,g,k,h=a[2].length&&kt(a);return{c(){e=c("div"),t=c("div"),l=c("input"),n=S(),i=c("button"),s=ie("See Report"),_=S(),h&&h.c(),this.h()},l(b){e=f(b,"DIV",{class:!0});var C=v(e);t=f(C,"DIV",{class:!0});var p=v(t);l=f(p,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,class:!0}),n=A(p),i=f(p,"BUTTON",{type:!0,class:!0});var N=v(i);s=oe(N,"See Report"),N.forEach(r),p.forEach(r),_=A(C),h&&h.l(C),C.forEach(r),this.h()},h(){u(l,"type","text"),u(l,"placeholder","Type local authority name to search..."),u(l,"autocomplete","off"),u(l,"class","svelte-1kj8esc"),u(i,"type","button"),u(i,"class","search-btn svelte-1kj8esc"),i.disabled=d=!a[1],u(t,"class","input-group svelte-1kj8esc"),u(e,"class","autocomplete svelte-1kj8esc")},m(b,C){K(b,e,C),o(e,t),o(t,l),ht(l,a[0]),o(t,n),o(t,i),o(i,s),o(e,_),h&&h.m(e,null),g||(k=[ye(l,"input",a[6]),ye(i,"click",a[4])],g=!0)},p(b,[C]){C&1&&l.value!==b[0]&&ht(l,b[0]),C&2&&d!==(d=!b[1])&&(i.disabled=d),b[2].length?h?h.p(b,C):(h=kt(b),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:Fe,o:Fe,d(b){b&&r(e),h&&h.d(),g=!1,vt(k)}}}function ol(a,e,t){let l;const n=Rt();let{items:i}=e,s="",d=null;const _=Object.entries(i);function g([C,p]){t(0,s=p),t(1,d=C),n("select",C)}function k(){d&&n("search",d)}function h(){s=this.value,t(0,s)}const b=C=>g(C);return a.$$set=C=>{"items"in C&&t(5,i=C.items)},a.$$.update=()=>{a.$$.dirty&1&&t(2,l=s?_.filter(([C,p])=>p.toLowerCase().includes(s.toLowerCase())).slice(0,10):[])},[s,d,l,g,k,i,h,b]}class sl extends st{constructor(e){super(),rt(this,e,ol,il,We,{items:5})}}function Tt(a,e,t){const l=a.slice();return l[11]=e[t],l}function Lt(a){let e,t=(a[6]==="total"?a[8](a[11].total_value,a[1],a[2],a[11].co_benefit_type,a[5]):a[8](a[11].value_per_capita,a[3],a[4],a[11].co_benefit_type,a[5]))+"",l;return{c(){e=new jt(!1),l=bt(),this.h()},l(n){e=Gt(n,!1),l=bt(),this.h()},h(){e.a=l},m(n,i){e.m(t,n,i),K(n,l,i)},p(n,i){i&127&&t!==(t=(n[6]==="total"?n[8](n[11].total_value,n[1],n[2],n[11].co_benefit_type,n[5]):n[8](n[11].value_per_capita,n[3],n[4],n[11].co_benefit_type,n[5]))+"")&&e.p(t)},d(n){n&&(r(l),e.d())}}}function rl(a){let e,t=a[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=c("span"),l=ie(t)},l(n){e=f(n,"SPAN",{});var i=v(e);l=oe(i,t),i.forEach(r)},m(n,i){K(n,e,i),o(e,l)},p(n,i){i&1&&t!==(t=n[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&he(l,t)},d(n){n&&r(e)}}}function cl(a){let e,t=a[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=c("span"),l=ie(t)},l(n){e=f(n,"SPAN",{});var i=v(e);l=oe(i,t),i.forEach(r)},m(n,i){K(n,e,i),o(e,l)},p(n,i){i&1&&t!==(t=n[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&he(l,t)},d(n){n&&r(e)}}}function yt(a){let e,t,l,n,i,s,d,_=a[7](a[11].co_benefit_type)+"",g,k,h,b,C,p=a[6],N,I,L,D=Lt(a);function m(y,P){return y[6]==="total"?cl:rl}let M=m(a),O=M(a);return{c(){e=c("tr"),t=c("td"),l=c("div"),n=c("img"),s=S(),d=c("a"),g=ie(_),h=S(),b=c("td"),C=c("div"),D.c(),N=S(),I=c("td"),O.c(),L=S(),this.h()},l(y){e=f(y,"TR",{});var P=v(e);t=f(P,"TD",{});var U=v(t);l=f(U,"DIV",{class:!0});var Y=v(l);n=f(Y,"IMG",{src:!0,alt:!0,class:!0}),s=A(Y),d=f(Y,"A",{href:!0});var Q=v(d);g=oe(Q,_),Q.forEach(r),Y.forEach(r),U.forEach(r),h=A(P),b=f(P,"TD",{});var j=v(b);C=f(j,"DIV",{class:!0});var V=v(C);D.l(V),V.forEach(r),j.forEach(r),N=A(P),I=f(P,"TD",{});var q=v(I);O.l(q),q.forEach(r),L=A(P),P.forEach(r),this.h()},h(){Ae(n.src,i=dt(a[11].co_benefit_type))||u(n,"src",i),u(n,"alt","Icon"),u(n,"class","in-table-icon"),u(d,"href",k=Re+"/cobenefit?cobenefit="+a[11].co_benefit_type),u(l,"class","coben-content"),u(C,"class","bar-cell")},m(y,P){K(y,e,P),o(e,t),o(t,l),o(l,n),o(l,s),o(l,d),o(d,g),o(e,h),o(e,b),o(b,C),D.m(C,null),o(e,N),o(e,I),O.m(I,null),o(e,L)},p(y,P){P&1&&!Ae(n.src,i=dt(y[11].co_benefit_type))&&u(n,"src",i),P&1&&_!==(_=y[7](y[11].co_benefit_type)+"")&&he(g,_),P&1&&k!==(k=Re+"/cobenefit?cobenefit="+y[11].co_benefit_type)&&u(d,"href",k),P&64&&We(p,p=y[6])?(D.d(1),D=Lt(y),D.c(),D.m(C,null)):D.p(y,P),M===(M=m(y))&&O?O.p(y,P):(O.d(1),O=M(y),O&&(O.c(),O.m(I,null)))},d(y){y&&r(e),D.d(y),O.d()}}}function fl(a){let e,t,l,n="Total",i,s,d="Per Capita",_,g,k,h,b,C="Name",p,N,I=a[6]==="total"?"Total":"Per Capita",L,D,m,M=a[6]==="total"?"£, billion":"£",O,y,P,U,Y,Q=Te(a[0]),j=[];for(let V=0;V<Q.length;V+=1)j[V]=yt(Tt(a,Q,V));return{c(){e=c("div"),t=c("div"),l=c("button"),l.textContent=n,i=S(),s=c("button"),s.textContent=d,_=S(),g=c("table"),k=c("thead"),h=c("tr"),b=c("th"),b.textContent=C,p=S(),N=c("th"),L=ie(I),D=S(),m=c("th"),O=ie(M),y=S(),P=c("tbody");for(let V=0;V<j.length;V+=1)j[V].c();this.h()},l(V){e=f(V,"DIV",{class:!0});var q=v(e);t=f(q,"DIV",{class:!0});var F=v(t);l=f(F,"BUTTON",{"data-svelte-h":!0}),re(l)!=="svelte-15mf98g"&&(l.textContent=n),i=A(F),s=f(F,"BUTTON",{"data-svelte-h":!0}),re(s)!=="svelte-1ts3a4f"&&(s.textContent=d),F.forEach(r),q.forEach(r),_=A(V),g=f(V,"TABLE",{class:!0});var ee=v(g);k=f(ee,"THEAD",{});var W=v(k);h=f(W,"TR",{});var J=v(h);b=f(J,"TH",{"data-svelte-h":!0}),re(b)!=="svelte-13ju7y1"&&(b.textContent=C),p=A(J),N=f(J,"TH",{style:!0});var z=v(N);L=oe(z,I),z.forEach(r),D=A(J),m=f(J,"TH",{style:!0});var E=v(m);O=oe(E,M),E.forEach(r),J.forEach(r),W.forEach(r),y=A(ee),P=f(ee,"TBODY",{});var R=v(P);for(let B=0;B<j.length;B+=1)j[B].l(R);R.forEach(r),ee.forEach(r),this.h()},h(){we(l,"selected",a[6]==="total"),we(s,"selected",a[6]==="per_capita"),u(t,"class","button-group"),u(e,"class","controls"),tt(N,"width","180px"),tt(m,"width","80px"),u(g,"class","data-table")},m(V,q){K(V,e,q),o(e,t),o(t,l),o(t,i),o(t,s),K(V,_,q),K(V,g,q),o(g,k),o(k,h),o(h,b),o(h,p),o(h,N),o(N,L),o(h,D),o(h,m),o(m,O),o(g,y),o(g,P);for(let F=0;F<j.length;F+=1)j[F]&&j[F].m(P,null);U||(Y=[ye(l,"click",a[9]),ye(s,"click",a[10])],U=!0)},p(V,[q]){if(q&64&&we(l,"selected",V[6]==="total"),q&64&&we(s,"selected",V[6]==="per_capita"),q&64&&I!==(I=V[6]==="total"?"Total":"Per Capita")&&he(L,I),q&64&&M!==(M=V[6]==="total"?"£, billion":"£")&&he(O,M),q&511){Q=Te(V[0]);let F;for(F=0;F<Q.length;F+=1){const ee=Tt(V,Q,F);j[F]?j[F].p(ee,q):(j[F]=yt(ee),j[F].c(),j[F].m(P,null))}for(;F<j.length;F+=1)j[F].d(1);j.length=Q.length}},i:Fe,o:Fe,d(V){V&&(r(e),r(_),r(g)),qe(j,V),U=!1,vt(Y)}}}function ul(a,e,t){let{aggregationPerCapitaPerBenefit:l}=e,{minCoBenefValue:n}=e,{maxCoBenefValue:i}=e,{minHHCoBenefValue:s}=e,{maxHHCoBenefValue:d}=e,{COBENEFS_SCALE:_}=e;function g(p){return _t.find(N=>N.id===p)?.label??p}let k="total";function h(p,N,I,L,D){const m=D(L);return ot({width:100,height:20,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,x:{domain:[N,I],axis:null},marks:[Zt([0],{stroke:"#3C3C3C"}),mt([p],{x:O=>O,y:0,fill:m})]}).outerHTML}const b=()=>t(6,k="total"),C=()=>t(6,k="per_capita");return a.$$set=p=>{"aggregationPerCapitaPerBenefit"in p&&t(0,l=p.aggregationPerCapitaPerBenefit),"minCoBenefValue"in p&&t(1,n=p.minCoBenefValue),"maxCoBenefValue"in p&&t(2,i=p.maxCoBenefValue),"minHHCoBenefValue"in p&&t(3,s=p.minHHCoBenefValue),"maxHHCoBenefValue"in p&&t(4,d=p.maxHHCoBenefValue),"COBENEFS_SCALE"in p&&t(5,_=p.COBENEFS_SCALE)},[l,n,i,s,d,_,k,g,h,b,C]}class hl extends st{constructor(e){super(),rt(this,e,ul,fl,We,{aggregationPerCapitaPerBenefit:0,minCoBenefValue:1,maxCoBenefValue:2,minHHCoBenefValue:3,maxHHCoBenefValue:4,COBENEFS_SCALE:5})}}function Ht(a,e,t){const l=a.slice();return l[16]=e[t],l}function St(a,e,t){const l=a.slice();return l[19]=e[t],l}function At(a){let e,t=a[19].label+"",l;return{c(){e=c("option"),l=ie(t),this.h()},l(n){e=f(n,"OPTION",{});var i=v(e);l=oe(i,t),i.forEach(r),this.h()},h(){e.__value=a[19].value,ht(e,e.__value)},m(n,i){K(n,e,i),o(e,l)},p:Fe,d(n){n&&r(e)}}}function dl(a){let e,t=a[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=c("span"),l=ie(t)},l(n){e=f(n,"SPAN",{});var i=v(e);l=oe(i,t),i.forEach(r)},m(n,i){K(n,e,i),o(e,l)},p(n,i){i&2&&t!==(t=n[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&he(l,t)},d(n){n&&r(e)}}}function _l(a){let e,t=a[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=c("span"),l=ie(t)},l(n){e=f(n,"SPAN",{});var i=v(e);l=oe(i,t),i.forEach(r)},m(n,i){K(n,e,i),o(e,l)},p(n,i){i&2&&t!==(t=n[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&he(l,t)},d(n){n&&r(e)}}}function It(a){let e,t,l,n=(a[5][a[16].LAD]??a[16].LAD)+"",i,s,d,_,g,k,h=(a[2]==="total"?a[9](a[16].total_value,a[3]):a[10](a[16].value_per_capita,a[4]))+"",b,C,p;function N(D,m){return D[2]==="total"?_l:dl}let I=N(a),L=I(a);return{c(){e=c("tr"),t=c("td"),l=c("a"),i=ie(n),d=S(),_=c("td"),g=c("div"),k=new jt(!1),b=S(),C=c("td"),L.c(),p=S(),this.h()},l(D){e=f(D,"TR",{});var m=v(e);t=f(m,"TD",{});var M=v(t);l=f(M,"A",{href:!0});var O=v(l);i=oe(O,n),O.forEach(r),M.forEach(r),d=A(m),_=f(m,"TD",{});var y=v(_);g=f(y,"DIV",{class:!0});var P=v(g);k=Gt(P,!1),P.forEach(r),y.forEach(r),b=A(m),C=f(m,"TD",{});var U=v(C);L.l(U),U.forEach(r),p=A(m),m.forEach(r),this.h()},h(){u(l,"href",s=Re+"/location?location="+a[16].LAD),k.a=null,u(g,"class","bar-cell")},m(D,m){K(D,e,m),o(e,t),o(t,l),o(l,i),o(e,d),o(e,_),o(_,g),k.m(h,g),o(e,b),o(e,C),L.m(C,null),o(e,p)},p(D,m){m&34&&n!==(n=(D[5][D[16].LAD]??D[16].LAD)+"")&&he(i,n),m&2&&s!==(s=Re+"/location?location="+D[16].LAD)&&u(l,"href",s),m&30&&h!==(h=(D[2]==="total"?D[9](D[16].total_value,D[3]):D[10](D[16].value_per_capita,D[4]))+"")&&k.p(h),I===(I=N(D))&&L?L.p(D,m):(L.d(1),L=I(D),L&&(L.c(),L.m(C,null)))},d(D){D&&r(e),L.d()}}}function ml(a){let e,t,l="Nation:",n,i,s,d,_,g="Total",k,h,b="Per Capita",C,p,N,I,L,D='Name <span style="font-weight:300; color: #545454">(Top 12 in display)</span>',m,M,O=a[2]==="total"?"Total":"Per Capita",y,P,U,Y=a[2]==="total"?"£, billion":"£",Q,j,V,q,F,ee=Te(a[7]),W=[];for(let E=0;E<ee.length;E+=1)W[E]=At(St(a,ee,E));let J=Te(a[1]),z=[];for(let E=0;E<J.length;E+=1)z[E]=It(Ht(a,J,E));return{c(){e=c("div"),t=c("label"),t.textContent=l,n=S(),i=c("select");for(let E=0;E<W.length;E+=1)W[E].c();s=S(),d=c("div"),_=c("button"),_.textContent=g,k=S(),h=c("button"),h.textContent=b,C=S(),p=c("table"),N=c("thead"),I=c("tr"),L=c("th"),L.innerHTML=D,m=S(),M=c("th"),y=ie(O),P=S(),U=c("th"),Q=ie(Y),j=S(),V=c("tbody");for(let E=0;E<z.length;E+=1)z[E].c();this.h()},l(E){e=f(E,"DIV",{class:!0});var R=v(e);t=f(R,"LABEL",{"data-svelte-h":!0}),re(t)!=="svelte-1ecnfnj"&&(t.textContent=l),n=A(R),i=f(R,"SELECT",{});var B=v(i);for(let ve=0;ve<W.length;ve+=1)W[ve].l(B);B.forEach(r),s=A(R),d=f(R,"DIV",{class:!0});var se=v(d);_=f(se,"BUTTON",{"data-svelte-h":!0}),re(_)!=="svelte-2dev6e"&&(_.textContent=g),k=A(se),h=f(se,"BUTTON",{"data-svelte-h":!0}),re(h)!=="svelte-1q4fgxf"&&(h.textContent=b),se.forEach(r),R.forEach(r),C=A(E),p=f(E,"TABLE",{class:!0});var be=v(p);N=f(be,"THEAD",{});var de=v(N);I=f(de,"TR",{});var fe=v(I);L=f(fe,"TH",{"data-svelte-h":!0}),re(L)!=="svelte-1homman"&&(L.innerHTML=D),m=A(fe),M=f(fe,"TH",{style:!0});var Ie=v(M);y=oe(Ie,O),Ie.forEach(r),P=A(fe),U=f(fe,"TH",{style:!0});var He=v(U);Q=oe(He,Y),He.forEach(r),fe.forEach(r),de.forEach(r),j=A(be),V=f(be,"TBODY",{});var me=v(V);for(let ve=0;ve<z.length;ve+=1)z[ve].l(me);me.forEach(r),be.forEach(r),this.h()},h(){a[0]===void 0&&qt(()=>a[13].call(i)),we(_,"selected",a[2]==="total"),we(h,"selected",a[2]==="per_capita"),u(d,"class","button-group"),u(e,"class","controls"),tt(M,"width","120px"),tt(U,"width","80px"),u(p,"class","data-table")},m(E,R){K(E,e,R),o(e,t),o(e,n),o(e,i);for(let B=0;B<W.length;B+=1)W[B]&&W[B].m(i,null);Ct(i,a[0],!0),o(e,s),o(e,d),o(d,_),o(d,k),o(d,h),K(E,C,R),K(E,p,R),o(p,N),o(N,I),o(I,L),o(I,m),o(I,M),o(M,y),o(I,P),o(I,U),o(U,Q),o(p,j),o(p,V);for(let B=0;B<z.length;B+=1)z[B]&&z[B].m(V,null);q||(F=[ye(i,"change",a[13]),ye(i,"change",a[8]),ye(_,"click",a[14]),ye(h,"click",a[15])],q=!0)},p(E,[R]){if(R&128){ee=Te(E[7]);let B;for(B=0;B<ee.length;B+=1){const se=St(E,ee,B);W[B]?W[B].p(se,R):(W[B]=At(se),W[B].c(),W[B].m(i,null))}for(;B<W.length;B+=1)W[B].d(1);W.length=ee.length}if(R&129&&Ct(i,E[0]),R&4&&we(_,"selected",E[2]==="total"),R&4&&we(h,"selected",E[2]==="per_capita"),R&4&&O!==(O=E[2]==="total"?"Total":"Per Capita")&&he(y,O),R&4&&Y!==(Y=E[2]==="total"?"£, billion":"£")&&he(Q,Y),R&1598){J=Te(E[1]);let B;for(B=0;B<J.length;B+=1){const se=Ht(E,J,B);z[B]?z[B].p(se,R):(z[B]=It(se),z[B].c(),z[B].m(V,null))}for(;B<z.length;B+=1)z[B].d(1);z.length=J.length}},i:Fe,o:Fe,d(E){E&&(r(e),r(C),r(p)),qe(W,E),qe(z,E),q=!1,vt(F)}}}function vl(a,e,t){const l=Rt();let{ladData:n=[]}=e,{region:i}=e,{sortBy:s}=e,{maxLADValue:d}=e,{maxHHLADValue:_}=e,{LADToName:g={}}=e,{viewMode:k="total"}=e,{selectedRegion:h="All"}=e;const b=[{label:"All",value:"All"},{label:"England",value:"England"},{label:"Wales",value:"Wales"},{label:"Scotland",value:"Scotland"},{label:"Northern Ireland",value:"NI"}];function C(m){l("filterChange",{region:m.target.value,sortBy:s})}function p(m,M){return ot({width:80,height:20,margin:0,x:{domain:[0,M],axis:null},marks:[mt([m],{x:y=>y,y:0,fill:"#ccc"})]}).outerHTML}function N(m,M){return ot({width:80,height:20,margin:0,x:{domain:[0,M],axis:null},marks:[mt([m],{x:y=>y,y:0,fill:"#ccc"})]}).outerHTML}function I(){i=Wt(this),t(0,i),t(7,b)}const L=()=>l("filterChange",{region:i,sortBy:"total"}),D=()=>l("filterChange",{region:i,sortBy:"per_capita"});return a.$$set=m=>{"ladData"in m&&t(1,n=m.ladData),"region"in m&&t(0,i=m.region),"sortBy"in m&&t(2,s=m.sortBy),"maxLADValue"in m&&t(3,d=m.maxLADValue),"maxHHLADValue"in m&&t(4,_=m.maxHHLADValue),"LADToName"in m&&t(5,g=m.LADToName),"viewMode"in m&&t(11,k=m.viewMode),"selectedRegion"in m&&t(12,h=m.selectedRegion)},[i,n,s,d,_,g,l,b,C,p,N,k,h,I,L,D]}class gl extends st{constructor(e){super(),rt(this,e,vl,ml,We,{ladData:1,region:0,sortBy:2,maxLADValue:3,maxHHLADValue:4,LADToName:5,viewMode:11,selectedRegion:12})}}function Pt(a,e,t){const l=a.slice();return l[47]=e[t],l[49]=t,l}function Nt(a){let e,t,l,n,i,s,d;return{c(){e=c("div"),t=c("img"),i=S(),s=c("img"),this.h()},l(_){e=f(_,"DIV",{class:!0});var g=v(e);t=f(g,"IMG",{class:!0,src:!0,alt:!0}),i=A(g),s=f(g,"IMG",{class:!0,src:!0,alt:!0}),g.forEach(r),this.h()},h(){u(t,"class","slide-image"),Ae(t.src,l=a[47].image)||u(t,"src",l),u(t,"alt",n=a[47].label),u(s,"class","slide-map svelte-d5cw6v"),Ae(s.src,d=a[47].mapImage)||u(s,"src",d),u(s,"alt","Map overlay"),u(e,"class","hero-slide svelte-d5cw6v"),we(e,"active",a[49]===a[23]),we(e,"previous",a[49]===a[24])},m(_,g){K(_,e,g),o(e,t),o(e,i),o(e,s)},p(_,g){g[0]&1048576&&!Ae(t.src,l=_[47].image)&&u(t,"src",l),g[0]&1048576&&n!==(n=_[47].label)&&u(t,"alt",n),g[0]&1048576&&!Ae(s.src,d=_[47].mapImage)&&u(s,"src",d),g[0]&8388608&&we(e,"active",_[49]===_[23]),g[0]&16777216&&we(e,"previous",_[49]===_[24])},d(_){_&&r(e)}}}function Ft(a){let e,t,l;return{c(){e=c("div"),t=c("img"),this.h()},l(n){e=f(n,"DIV",{class:!0});var i=v(e);t=f(i,"IMG",{src:!0,alt:!0,class:!0}),i.forEach(r),this.h()},h(){Ae(t.src,l=a[19])||u(t,"src",l),u(t,"alt","Icon"),u(t,"class","svelte-d5cw6v"),u(e,"class","waffle-icon svelte-d5cw6v")},m(n,i){K(n,e,i),o(e,t)},p(n,i){i[0]&524288&&!Ae(t.src,l=n[19])&&u(t,"src",l)},d(n){n&&r(e)}}}function pl(a){let e,t="National costs";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-o12owz"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-d5cw6v")},m(l,n){K(l,e,n)},d(l){l&&r(e)}}}function bl(a){let e,t="National benefits";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-10ytukz"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-d5cw6v")},m(l,n){K(l,e,n)},d(l){l&&r(e)}}}function Cl(a){let e,t="Per capita costs";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-6pmcl0"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-d5cw6v")},m(l,n){K(l,e,n)},d(l){l&&r(e)}}}function wl(a){let e,t="Per capita benefits";return{c(){e=c("div"),e.textContent=t,this.h()},l(l){e=f(l,"DIV",{class:!0,"data-svelte-h":!0}),re(e)!=="svelte-g1rvwk"&&(e.textContent=t),this.h()},h(){u(e,"class","waffle-caption svelte-d5cw6v")},m(l,n){K(l,e,n)},d(l){l&&r(e)}}}function Mt(a){let e,t,l,n,i,s,d="%",_,g,k="Contribution";return{c(){e=c("div"),t=c("div"),l=c("span"),n=ie(a[18]),i=S(),s=c("span"),s.textContent=d,_=S(),g=c("div"),g.textContent=k,this.h()},l(h){e=f(h,"DIV",{class:!0});var b=v(e);t=f(b,"DIV",{class:!0});var C=v(t);l=f(C,"SPAN",{class:!0});var p=v(l);n=oe(p,a[18]),p.forEach(r),i=A(C),s=f(C,"SPAN",{class:!0,"data-svelte-h":!0}),re(s)!=="svelte-jxggz7"&&(s.textContent=d),C.forEach(r),_=A(b),g=f(b,"DIV",{class:!0,"data-svelte-h":!0}),re(g)!=="svelte-1ahdmih"&&(g.textContent=k),b.forEach(r),this.h()},h(){u(l,"class","waffle-big svelte-d5cw6v"),u(s,"class","small svelte-d5cw6v"),u(t,"class","waffle-value svelte-d5cw6v"),u(g,"class","waffle-caption svelte-d5cw6v"),u(e,"class","waffle-stat svelte-d5cw6v")},m(h,b){K(h,e,b),o(e,t),o(t,l),o(l,n),o(t,i),o(t,s),o(e,_),o(e,g)},p(h,b){b[0]&262144&&he(n,h[18])},d(h){h&&r(e)}}}function Ot(a){let e,t;return e=new gl({props:{ladData:a[7],region:a[8],sortBy:a[9],maxLADValue:a[10],maxHHLADValue:a[11],LADToName:a[25]}}),e.$on("filterChange",a[26]),{c(){lt(e.$$.fragment)},l(l){at(e.$$.fragment,l)},m(l,n){nt(e,l,n),t=!0},p(l,n){const i={};n[0]&128&&(i.ladData=l[7]),n[0]&256&&(i.region=l[8]),n[0]&512&&(i.sortBy=l[9]),n[0]&1024&&(i.maxLADValue=l[10]),n[0]&2048&&(i.maxHHLADValue=l[11]),e.$set(i)},i(l){t||(Be(e.$$.fragment,l),t=!0)},o(l){Se(e.$$.fragment,l),t=!1},d(l){it(e,l)}}}function Ut(a){let e,t;return e=new hl({props:{aggregationPerCapitaPerBenefit:a[1],minCoBenefValue:a[3],maxCoBenefValue:a[2],minHHCoBenefValue:a[4],maxHHCoBenefValue:a[5],COBENEFS_SCALE:Qt}}),{c(){lt(e.$$.fragment)},l(l){at(e.$$.fragment,l)},m(l,n){nt(e,l,n),t=!0},p(l,n){const i={};n[0]&2&&(i.aggregationPerCapitaPerBenefit=l[1]),n[0]&8&&(i.minCoBenefValue=l[3]),n[0]&4&&(i.maxCoBenefValue=l[2]),n[0]&16&&(i.minHHCoBenefValue=l[4]),n[0]&32&&(i.maxHHCoBenefValue=l[5]),e.$set(i)},i(l){t||(Be(e.$$.fragment,l),t=!0)},o(l){Se(e.$$.fragment,l),t=!1},d(l){it(e,l)}}}function Dl(a){let e,t,l,n,i,s,d,_=`<img src="${Re}/atlas-logos/logo-colored-waffle-png.png" alt="Logo" height="0px"/> <h1 class="hero-title svelte-d5cw6v">The Co-Benefits of Reaching <br/> Net Zero in the UK</h1> <p class="hero-description svelte-d5cw6v">Climate actions lower greenhouse gas (GHG) emissions but the gains for society reach further. The
                CO-BENS project models 11 additional benefits based on actions recommended by the Climate Change
                Committee (CCC) in its Seventh Carbon Budget (2025) across 45,000 communities and regions within the UK.<br/></p> <p class="hero-description svelte-d5cw6v">Explore how, when and for whom benefits emerge to further understand connections between a wide range of
                social, economic and environmental priorities, and drive more effective decision-making.</p> <p class="hero-description svelte-d5cw6v">To understand more about the analysis or if you would like bespoke co-benefit modelling please get in
                touch by emailing <a href="mailto:cobens@ed.ac.uk">cobens@ed.ac.uk</a></p>`,g,k,h,b,C,p,N,I,L,D,m,M,O,y,P,U,Y="billion",Q,j,V,q,F,ee,W,J,z,E,R,B,se,be,de,fe,Ie="Find My Place",He,me,ve,Ee,w,ae,ce="Explore by Local Authority",_e,Ve,ne,X,ge="Explore by Co-Benefit",Ce,pe;t=new Yt({});let H=Te(a[20]),G=[];for(let T=0;T<H.length;T+=1)G[T]=Nt(Pt(a,H,T));let x=a[19]&&Ft(a);function Pe(T,Z){return T[16]>0?bl:pl}let Me=Pe(a),De=Me(a);function je(T,Z){return T[17]>0?wl:Cl}let ke=je(a),Le=ke(a),ue=a[22]!==null&&Mt(a);me=new sl({props:{items:a[25]}}),me.$on("search",a[33]);let te=!a[6]&&Ot(a),le=!a[6]&&Ut(a);return{c(){e=c("div"),lt(t.$$.fragment),l=S(),n=c("section");for(let T=0;T<G.length;T+=1)G[T].c();i=S(),s=c("div"),d=c("div"),d.innerHTML=_,g=S(),k=c("div"),h=c("div"),b=c("div"),x&&x.c(),C=S(),p=c("div"),N=ie(a[15]),I=S(),L=c("div"),D=c("div"),m=c("div"),M=c("span"),O=ie("£"),y=ie(a[16]),P=S(),U=c("span"),U.textContent=Y,Q=S(),De.c(),j=S(),V=c("div"),q=c("div"),F=c("span"),ee=ie("£"),W=ie(a[17]),J=S(),Le.c(),z=S(),ue&&ue.c(),E=S(),R=c("div"),B=S(),se=c("div"),be=S(),de=c("section"),fe=c("h1"),fe.textContent=Ie,He=S(),lt(me.$$.fragment),ve=S(),Ee=c("section"),w=c("div"),ae=c("h2"),ae.textContent=ce,_e=S(),te&&te.c(),Ve=S(),ne=c("div"),X=c("h2"),X.textContent=ge,Ce=S(),le&&le.c(),this.h()},l(T){e=f(T,"DIV",{});var Z=v(e);at(t.$$.fragment,Z),l=A(Z),n=f(Z,"SECTION",{class:!0});var $=v(n);for(let ut=0;ut<G.length;ut+=1)G[ut].l($);i=A($),s=f($,"DIV",{class:!0});var Ne=v(s);d=f(Ne,"DIV",{class:!0,"data-svelte-h":!0}),re(d)!=="svelte-105p7kl"&&(d.innerHTML=_),g=A(Ne),k=f(Ne,"DIV",{class:!0});var Oe=v(k);h=f(Oe,"DIV",{class:!0});var ze=v(h);b=f(ze,"DIV",{class:!0});var Xe=v(b);x&&x.l(Xe),C=A(Xe),p=f(Xe,"DIV",{class:!0});var gt=v(p);N=oe(gt,a[15]),gt.forEach(r),Xe.forEach(r),I=A(ze),L=f(ze,"DIV",{class:!0});var Ue=v(L);D=f(Ue,"DIV",{class:!0});var Ye=v(D);m=f(Ye,"DIV",{class:!0});var Ke=v(m);M=f(Ke,"SPAN",{class:!0});var ct=v(M);O=oe(ct,"£"),y=oe(ct,a[16]),ct.forEach(r),P=A(Ke),U=f(Ke,"SPAN",{class:!0,"data-svelte-h":!0}),re(U)!=="svelte-tlhydp"&&(U.textContent=Y),Ke.forEach(r),Q=A(Ye),De.l(Ye),Ye.forEach(r),j=A(Ue),V=f(Ue,"DIV",{class:!0});var Ze=v(V);q=f(Ze,"DIV",{class:!0});var pt=v(q);F=f(pt,"SPAN",{class:!0});var ft=v(F);ee=oe(ft,"£"),W=oe(ft,a[17]),ft.forEach(r),pt.forEach(r),J=A(Ze),Le.l(Ze),Ze.forEach(r),z=A(Ue),ue&&ue.l(Ue),Ue.forEach(r),ze.forEach(r),E=A(Oe),R=f(Oe,"DIV",{class:!0}),v(R).forEach(r),B=A(Oe),se=f(Oe,"DIV",{}),v(se).forEach(r),Oe.forEach(r),Ne.forEach(r),$.forEach(r),be=A(Z),de=f(Z,"SECTION",{class:!0});var Qe=v(de);fe=f(Qe,"H1",{class:!0,"data-svelte-h":!0}),re(fe)!=="svelte-byubde"&&(fe.textContent=Ie),He=A(Qe),at(me.$$.fragment,Qe),Qe.forEach(r),ve=A(Z),Ee=f(Z,"SECTION",{class:!0});var Je=v(Ee);w=f(Je,"DIV",{class:!0});var xe=v(w);ae=f(xe,"H2",{class:!0,"data-svelte-h":!0}),re(ae)!=="svelte-pgup4c"&&(ae.textContent=ce),_e=A(xe),te&&te.l(xe),xe.forEach(r),Ve=A(Je),ne=f(Je,"DIV",{class:!0});var $e=v(ne);X=f($e,"H2",{class:!0,"data-svelte-h":!0}),re(X)!=="svelte-9nk5va"&&(X.textContent=ge),Ce=A($e),le&&le.l($e),$e.forEach(r),Je.forEach(r),Z.forEach(r),this.h()},h(){u(d,"class","hero-text svelte-d5cw6v"),u(p,"class","waffle-title svelte-d5cw6v"),u(b,"class","waffle-header svelte-d5cw6v"),u(M,"class","waffle-big svelte-d5cw6v"),u(U,"class","small svelte-d5cw6v"),u(m,"class","waffle-value svelte-d5cw6v"),u(D,"class","waffle-stat svelte-d5cw6v"),u(F,"class","waffle-big svelte-d5cw6v"),u(q,"class","waffle-value svelte-d5cw6v"),u(V,"class","waffle-stat svelte-d5cw6v"),u(L,"class","waffle-stats svelte-d5cw6v"),u(h,"class","waffle-label svelte-d5cw6v"),u(R,"class","waffle-bg svelte-d5cw6v"),u(k,"class","waffle-overlay svelte-d5cw6v"),u(s,"class","hero-content svelte-d5cw6v"),u(n,"class","hero-container svelte-d5cw6v"),u(fe,"class","svelte-d5cw6v"),u(de,"class","search-section svelte-d5cw6v"),u(ae,"class","svelte-d5cw6v"),u(w,"class","side-box svelte-d5cw6v"),u(X,"class","svelte-d5cw6v"),u(ne,"class","side-box svelte-d5cw6v"),u(Ee,"class","side-by-side-section svelte-d5cw6v")},m(T,Z){K(T,e,Z),nt(t,e,null),o(e,l),o(e,n);for(let $=0;$<G.length;$+=1)G[$]&&G[$].m(n,null);o(n,i),o(n,s),o(s,d),o(s,g),o(s,k),o(k,h),o(h,b),x&&x.m(b,null),o(b,C),o(b,p),o(p,N),o(h,I),o(h,L),o(L,D),o(D,m),o(m,M),o(M,O),o(M,y),o(m,P),o(m,U),o(D,Q),De.m(D,null),o(L,j),o(L,V),o(V,q),o(q,F),o(F,ee),o(F,W),o(V,J),Le.m(V,null),o(L,z),ue&&ue.m(L,null),a[29](h),o(k,E),o(k,R),a[30](R),o(k,B),o(k,se),a[31](se),a[32](n),o(e,be),o(e,de),o(de,fe),o(de,He),nt(me,de,null),o(e,ve),o(e,Ee),o(Ee,w),o(w,ae),o(w,_e),te&&te.m(w,null),o(Ee,Ve),o(Ee,ne),o(ne,X),o(ne,Ce),le&&le.m(ne,null),a[34](e),pe=!0},p(T,Z){if(Z[0]&26214400){H=Te(T[20]);let $;for($=0;$<H.length;$+=1){const Ne=Pt(T,H,$);G[$]?G[$].p(Ne,Z):(G[$]=Nt(Ne),G[$].c(),G[$].m(n,i))}for(;$<G.length;$+=1)G[$].d(1);G.length=H.length}T[19]?x?x.p(T,Z):(x=Ft(T),x.c(),x.m(b,C)):x&&(x.d(1),x=null),(!pe||Z[0]&32768)&&he(N,T[15]),(!pe||Z[0]&65536)&&he(y,T[16]),Me!==(Me=Pe(T))&&(De.d(1),De=Me(T),De&&(De.c(),De.m(D,null))),(!pe||Z[0]&131072)&&he(W,T[17]),ke!==(ke=je(T))&&(Le.d(1),Le=ke(T),Le&&(Le.c(),Le.m(V,null))),T[22]!==null?ue?ue.p(T,Z):(ue=Mt(T),ue.c(),ue.m(L,null)):ue&&(ue.d(1),ue=null),T[6]?te&&(Dt(),Se(te,1,1,()=>{te=null}),wt()):te?(te.p(T,Z),Z[0]&64&&Be(te,1)):(te=Ot(T),te.c(),Be(te,1),te.m(w,null)),T[6]?le&&(Dt(),Se(le,1,1,()=>{le=null}),wt()):le?(le.p(T,Z),Z[0]&64&&Be(le,1)):(le=Ut(T),le.c(),Be(le,1),le.m(ne,null))},i(T){pe||(Be(t.$$.fragment,T),Be(me.$$.fragment,T),Be(te),Be(le),pe=!0)},o(T){Se(t.$$.fragment,T),Se(me.$$.fragment,T),Se(te),Se(le),pe=!1},d(T){T&&r(e),it(t),qe(G,T),x&&x.d(),De.d(),Le.d(),ue&&ue.d(),a[29](null),a[30](null),a[31](null),a[32](null),it(me),te&&te.d(),le&&le.d(),a[34](null)}}}function El(a,e,t){let{data:l}=e,n,i,s,d,_,g,k,h,b=!0;async function C(){i=await et(tl()),t(1,s=await et(ll())),await et(al()),i=[...l.aggregationPerBenefit].sort((w,ae)=>ae.total-w.total),t(1,s=[...l.aggregationPerCapitaPerBenefit].sort((w,ae)=>ae.total_value-w.total_value)),console.log("aggregationPerCapitaPerBenefit",s),d=l.totalAggregation[0].total_value_per_capita,t(2,_=Math.max(...s.map(w=>w.total_value))),t(3,g=Math.min(...s.map(w=>w.total_value))),t(4,k=Math.min(...s.map(w=>w.value_per_capita))),t(5,h=Math.max(...s.map(w=>w.value_per_capita))),t(6,b=!1)}let p=[],N="All",I="total",L=0,D=0,m=l.LADToName;async function M(){const w=nl({region:N,sortBy:I}),ae=await et(w);t(7,p=ae),t(10,L=Math.max(...ae.map(ce=>ce.total_value))),t(11,D=Math.max(...ae.map(ce=>ce.value_per_capita)))}function O(w){t(8,N=w.detail.region),t(9,I=w.detail.sortBy),M()}let y,P=[],U=null,Y,Q,j,V,q,F,ee=null,W=[],J,z=null,E=0,R=0,B;function se(w){const ae=y.filter(X=>X.type!=="empty").map(X=>X.type),ce=Array.from(new Set(ae)),_e=i.reduce((X,ge)=>X+ge.total,0),Ve=[{type:null,label:"Total Co-Benefits",icon:null,totalValue:_e.toFixed(2),perCapitaValue:d.toFixed(2),percentValue:"100%"},...ce.map(X=>{const Ce=_t.find(ke=>ke.id===X)?.label??X;let pe=dt(X);const H=i.find(ke=>ke.co_benefit_type===X),G=s.find(ke=>ke.co_benefit_type===X),x=H?.total??0,Pe=G?.value_per_capita??0,Me=x.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),De=Pe.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),je=_e>0?(x/_e*100).toFixed(2):0;return console.log("percentage",X,x,_e,je),{type:X,label:Ce,icon:pe,totalValue:Me,perCapitaValue:De,percentValue:je}})];setInterval(()=>{t(24,R=E),t(23,E=(E+1)%Ve.length);const{type:X,label:ge,icon:Ce,totalValue:pe,perCapitaValue:H,percentValue:G}=Ve[E];t(22,z=X),t(15,j=ge),t(16,V=pe),t(17,q=H),t(18,F=G),t(19,ee=Ce),be(w,X)},5e3);const ne=Ve[0];t(22,z=ne.type),t(15,j=ne.label),t(16,V=ne.totalValue),t(17,q=ne.perCapitaValue),t(18,F=ne.percentValue),be(w,ne.type),console.log("update display",W)}function be(w,ae){if(!U)return;t(12,U.innerHTML="",U);const ce=20,_e=15,Ve=Math.floor(w/ce),ne=_e*Ve,X=i.reduce((H,G)=>H+G.total,0),ge=[];for(const H of i){const G=Math.round(Math.abs(H.total)/X*ne),x=H.total<0;for(let Pe=0;Pe<G;Pe++)ge.push({type:H.co_benefit_type,negative:x})}for(;ge.length<ne;)ge.push({type:"empty"});ge.sort((H,G)=>H.type==="empty"?1:G.type==="empty"?-1:H.negative&&!G.negative?1:!H.negative&&G.negative?-1:0),y=ge.map((H,G)=>({x:G%_e,y:Math.floor(G/_e),...H})),P=Array.from(new Set(y.map(H=>H.type).filter(H=>H!=="empty"))),t(20,W=$t(P));const Ce=ae??null,pe=ot({width:ce*_e,height:ce*Ve,margin:0,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:_t.map(H=>H.id),range:el,unknown:"#eee",legend:!1},marks:[Et(y.filter(H=>!H.negative),{x:H=>H.x*ce,y:H=>H.y*ce,fill:"type",fillOpacity:H=>Ce&&H.type!==Ce?.15:1}),Et(y.filter(H=>H.negative),{x:H=>H.x*ce,y:H=>H.y*ce,stroke:"type",strokeOpacity:H=>Ce&&H.type!==Ce?.15:1,strokeWidth:1,fill:"none"})]});Y&&(t(13,Y.style.width=`${ce*_e}px`,Y),t(13,Y.style.height=`${w}px`,Y)),t(12,U.innerHTML="",U),U.append(pe)}function de(w){Kt(`${Re}/location?location=${w}`)}zt(()=>{Jt(n),C().then(()=>{M();const w=J.getBoundingClientRect().height;be(w),se(w),xt(n)})}),Xt(()=>{clearInterval(B)});function fe(w){Ge[w?"unshift":"push"](()=>{Q=w,t(14,Q)})}function Ie(w){Ge[w?"unshift":"push"](()=>{Y=w,t(13,Y)})}function He(w){Ge[w?"unshift":"push"](()=>{U=w,t(12,U)})}function me(w){Ge[w?"unshift":"push"](()=>{J=w,t(21,J)})}const ve=w=>de(w.detail);function Ee(w){Ge[w?"unshift":"push"](()=>{n=w,t(0,n)})}return a.$$set=w=>{"data"in w&&t(28,l=w.data)},a.$$.update=()=>{a.$$.dirty[0]&268435456},[n,s,_,g,k,h,b,p,N,I,L,D,U,Y,Q,j,V,q,F,ee,W,J,z,E,R,m,O,de,l,fe,Ie,He,me,ve,Ee]}class Il extends st{constructor(e){super(),rt(this,e,El,Dl,We,{data:28},null,[-1,-1])}}export{Il as component};
