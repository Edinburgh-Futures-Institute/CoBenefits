import{s as Bl,a as y,e as u,t as S,g as D,c as f,b as m,p as $,d as w,f as o,q as d,v as se,i as C,h as i,w as Cl,j as we,x as fl,y as Rl,z as Nl,n as xe,H as Ol,A as jl,B as Se}from"../chunks/scheduler.Uo5vrMzy.js";import{S as zl,i as Ul,c as dl,b as hl,m as pl,t as vl,a as _l,d as ml}from"../chunks/index.CfagcI6h.js";import{N as Wl,e as Dt}from"../chunks/NavigationBar.c5brCwSx.js";import"../chunks/transform.BNP73y-7.js";import{ax as Yl,aq as Wt,ar as Gl,t as bl,av as ql,T as gl,ay as kl,az as Jl,aA as Xl,S as El,G as Ue,P as Kl,K as We,J as ct,R as Ql,H as At,Q as Lt}from"../chunks/index.JoTaYIke.js";import{f as Yt}from"../chunks/module.jBGXnV9S.js";import{b as Zl}from"../chunks/paths.DmwFzNrM.js";import{M as $l}from"../chunks/mapUK.DDeySEPW.js";import{l as ea,m as ta,n as la,o as aa,p as sa,q as ia,i as ut,d as Ge,s as St,t as Gt,h as yl,e as na}from"../chunks/globals.DA4hliAb.js";import{g as wt,o as oa,x as ra,f as ca,n as ua}from"../chunks/duckdb.BTd8qxV_.js";import{p as Vt}from"../chunks/per_capita.COcMrZFY.js";import{F as fa}from"../chunks/Footer.5oI1ffhN.js";import{n as da}from"../chunks/nice.kBUTDe6n.js";import{t as ha,b as pa}from"../chunks/bin.BUPiur6H.js";import{d as Ye}from"../chunks/dot.CeZCgq67.js";import{b as va}from"../chunks/bar.CcxJAYDd.js";var _a=Array.prototype,ma=_a.slice;function qt(l){return()=>l}function Dl(){var l=Yl,e=Wt,t=ha;function a(n){Array.isArray(n)||(n=Array.from(n));var s,c=n.length,_,h,b=new Array(c);for(s=0;s<c;++s)b[s]=l(n[s],s,n);var V=e(b),v=V[0],g=V[1],F=t(b,v,g);if(!Array.isArray(F)){const A=g,x=+F;if(e===Wt&&([v,g]=da(v,g,x)),F=Gl(v,g,x),F[0]<=v&&(h=bl(v,g,x)),F[F.length-1]>=g)if(A>=g&&e===Wt){const H=bl(v,g,x);isFinite(H)&&(H>0?g=(Math.floor(g/H)+1)*H:H<0&&(g=(Math.ceil(g*-H)+1)/-H))}else F.pop()}for(var I=F.length,k=0,M=I;F[k]<=v;)++k;for(;F[M-1]>g;)--M;(k||M<I)&&(F=F.slice(k,M),I=M-k);var P=new Array(I+1),z;for(s=0;s<=I;++s)z=P[s]=[],z.x0=s>0?F[s-1]:v,z.x1=s<I?F[s]:g;if(isFinite(h)){if(h>0)for(s=0;s<c;++s)(_=b[s])!=null&&v<=_&&_<=g&&P[Math.min(I,Math.floor((_-v)/h))].push(n[s]);else if(h<0){for(s=0;s<c;++s)if((_=b[s])!=null&&v<=_&&_<=g){const A=Math.floor((v-_)*h);P[Math.min(I,A+(F[A]<=_))].push(n[s])}}}else for(s=0;s<c;++s)(_=b[s])!=null&&v<=_&&_<=g&&P[ql(F,_,0,I)].push(n[s]);return P}return a.value=function(n){return arguments.length?(l=typeof n=="function"?n:qt(n),a):l},a.domain=function(n){return arguments.length?(e=typeof n=="function"?n:qt([n[0],n[1]]),a):e},a.thresholds=function(n){return arguments.length?(t=typeof n=="function"?n:qt(Array.isArray(n)?ma.call(n):n),a):t},a}const ba=""+new URL("../assets/negative.BhphYhmj.png",import.meta.url).href;function Al(l,e,t){const a=l.slice();return a[60]=e[t],a[61]=e,a[62]=t,a}function Ll(l,e,t){const a=l.slice();return a[60]=e[t],a}function ga(l){let e;return{c(){e=u("div"),this.h()},l(t){e=f(t,"DIV",{class:!0}),m(e).forEach(o),this.h()},h(){d(e,"class","plot svelte-1l3a9ub")},m(t,a){C(t,e,a),l[32](e)},p:xe,d(t){t&&o(e),l[32](null)}}}function ka(l){let e;return{c(){e=u("div"),this.h()},l(t){e=f(t,"DIV",{class:!0}),m(e).forEach(o),this.h()},h(){d(e,"class","plot svelte-1l3a9ub")},m(t,a){C(t,e,a),l[31](e)},p:xe,d(t){t&&o(e),l[31](null)}}}function Ea(l){let e,t,a=Ve(l[10],l[22])+"",n,s,c,_;return{c(){e=S("Max value: "),t=u("strong"),n=S(a),s=S("("),c=S(l[12]),_=S(")")},l(h){e=w(h,"Max value: "),t=f(h,"STRONG",{});var b=m(t);n=w(b,a),b.forEach(o),s=w(h,"("),c=w(h,l[12]),_=w(h,")")},m(h,b){C(h,e,b),C(h,t,b),i(t,n),C(h,s,b),C(h,c,b),C(h,_,b)},p(h,b){b[0]&1024&&a!==(a=Ve(h[10],h[22])+"")&&we(n,a),b[0]&4096&&we(c,h[12])},d(h){h&&(o(e),o(t),o(s),o(c),o(_))}}}function ya(l){let e;return{c(){e=S("-")},l(t){e=w(t,"-")},m(t,a){C(t,e,a)},p:xe,d(t){t&&o(e)}}}function Da(l){let e,t,a=Ve(l[8],l[22])+"",n;return{c(){e=S("Average value: "),t=u("strong"),n=S(a),this.h()},l(s){e=w(s,"Average value: "),t=f(s,"STRONG",{style:!0});var c=m(t);n=w(c,a),c.forEach(o),this.h()},h(){se(t,"color","#BD210E")},m(s,c){C(s,e,c),C(s,t,c),i(t,n)},p(s,c){c[0]&256&&a!==(a=Ve(s[8],s[22])+"")&&we(n,a)},d(s){s&&(o(e),o(t))}}}function Aa(l){let e,t,a=Ve(l[9],l[22])+"",n;return{c(){e=S("Most common category: "),t=u("strong"),n=S(a),this.h()},l(s){e=w(s,"Most common category: "),t=f(s,"STRONG",{style:!0});var c=m(t);n=w(c,a),c.forEach(o),this.h()},h(){se(t,"color","#BD210E")},m(s,c){C(s,e,c),C(s,t,c),i(t,n)},p(s,c){c[0]&512&&a!==(a=Ve(s[9],s[22])+"")&&we(n,a)},d(s){s&&(o(e),o(t))}}}function La(l){let e,t,a=Ve(l[11],l[22])+"",n,s,c,_;return{c(){e=S("Min value: "),t=u("strong"),n=S(a),s=S("("),c=S(l[13]),_=S(")")},l(h){e=w(h,"Min value: "),t=f(h,"STRONG",{});var b=m(t);n=w(b,a),b.forEach(o),s=w(h,"("),c=w(h,l[13]),_=w(h,")")},m(h,b){C(h,e,b),C(h,t,b),i(t,n),C(h,s,b),C(h,c,b),C(h,_,b)},p(h,b){b[0]&2048&&a!==(a=Ve(h[11],h[22])+"")&&we(n,a),b[0]&8192&&we(c,h[13])},d(h){h&&(o(e),o(t),o(s),o(c),o(_))}}}function Sa(l){let e;return{c(){e=S("-")},l(t){e=w(t,"-")},m(t,a){C(t,e,a)},p:xe,d(t){t&&o(e)}}}function Sl(l){let e,t,a,n,s;return{c(){e=u("div"),t=u("div"),a=u("span"),n=S(l[19]),s=S(" >>"),this.h()},l(c){e=f(c,"DIV",{class:!0});var _=m(e);t=f(_,"DIV",{class:!0});var h=m(t);a=f(h,"SPAN",{class:!0});var b=m(a);n=w(b,l[19]),s=w(b," >>"),b.forEach(o),h.forEach(o),_.forEach(o),this.h()},h(){d(a,"class","mini-header-text"),d(t,"class","mini-header-content"),d(e,"class","mini-header")},m(c,_){C(c,e,_),i(e,t),i(t,a),i(a,n),i(a,s)},p:xe,d(c){c&&o(e)}}}function wa(l){let e;return{c(){e=u("div"),this.h()},l(t){e=f(t,"DIV",{class:!0}),m(e).forEach(o),this.h()},h(){d(e,"class","plot svelte-1l3a9ub")},m(t,a){C(t,e,a),l[34](e)},p:xe,d(t){t&&o(e),l[34](null)}}}function Va(l){let e;return{c(){e=u("div"),this.h()},l(t){e=f(t,"DIV",{class:!0}),m(e).forEach(o),this.h()},h(){d(e,"class","plot svelte-1l3a9ub")},m(t,a){C(t,e,a),l[33](e)},p:xe,d(t){t&&o(e),l[33](null)}}}function wl(l){let e,t,a=l[14].legend(l[23]).outerHTML+"";return{c(){e=u("div"),t=new Ol(!1),this.h()},l(n){e=f(n,"DIV",{id:!0});var s=m(e);t=jl(s,!1),s.forEach(o),this.h()},h(){t.a=null,d(e,"id","legend")},m(n,s){C(n,e,s),t.m(a,e)},p(n,s){s[0]&16384&&a!==(a=n[14].legend(n[23]).outerHTML+"")&&t.p(a)},d(n){n&&o(e)}}}function Vl(l){let e,t,a,n,s=l[60].def+"",c,_,h,b,V,v,g,F="here",I,k,M=l[60].id.toLowerCase()+"",P,z,A;return{c(){e=u("div"),t=u("div"),a=u("div"),n=y(),c=S(s),_=y(),h=u("br"),b=y(),V=u("div"),v=S("Click "),g=u("a"),g.textContent=F,I=S(` for the 
                                `),k=u("span"),P=S(M),z=y(),A=S("report page."),this.h()},l(x){e=f(x,"DIV",{class:!0});var H=m(e);t=f(H,"DIV",{class:!0});var B=m(t);a=f(B,"DIV",{style:!0}),m(a).forEach(o),n=D(B),c=w(B,s),_=D(B),h=f(B,"BR",{}),b=D(B),V=f(B,"DIV",{class:!0});var G=m(V);v=w(G,"Click "),g=f(G,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0,"data-svelte-h":!0}),$(g)!=="svelte-gjrxnt"&&(g.textContent=F),I=w(G,` for the 
                                `),k=f(G,"SPAN",{style:!0});var U=m(k);P=w(U,M),z=D(U),U.forEach(o),A=w(G,"report page."),G.forEach(o),B.forEach(o),H.forEach(o),this.h()},h(){se(a,"height","0.8em"),d(g,"class","link"),d(g,"href",Zl+"/cobenefit?cobenefit="+l[60].id),d(g,"target","_blank"),d(g,"rel","noopener noreferrer"),se(g,"color",ut(l[60].id)),se(k,"color",ut(l[60].id)),d(V,"class","link-box svelte-1l3a9ub"),d(t,"class","legend-description svelte-1l3a9ub"),d(e,"class","legend-description-box svelte-1l3a9ub")},m(x,H){C(x,e,H),i(e,t),i(t,a),i(t,n),i(t,c),i(t,_),i(t,h),i(t,b),i(t,V),i(V,v),i(V,g),i(V,I),i(V,k),i(k,P),i(k,z),i(V,A)},d(x){x&&o(e)}}}function Il(l){let e,t,a,n,s,c=l[60].label+"",_,h,b,V,v=l[17].has(l[60].id)?"▲":"▼",g,F,I=l[17].has(l[60].id),k,M,P;function z(){return l[36](l[60])}let A=I&&Vl(l);return{c(){e=u("div"),t=u("div"),a=u("span"),n=y(),s=u("span"),_=S(c),b=y(),V=u("span"),g=S(v),F=y(),A&&A.c(),k=y(),this.h()},l(x){e=f(x,"DIV",{class:!0});var H=m(e);t=f(H,"DIV",{class:!0,style:!0});var B=m(t);a=f(B,"SPAN",{class:!0,style:!0}),m(a).forEach(o),n=D(B),s=f(B,"SPAN",{class:!0});var G=m(s);_=w(G,c),G.forEach(o),b=D(B),V=f(B,"SPAN",{class:!0});var U=m(V);g=w(U,v),U.forEach(o),B.forEach(o),F=D(H),A&&A.l(H),k=D(H),H.forEach(o),this.h()},h(){d(a,"class","legend-color svelte-1l3a9ub"),se(a,"background-color",ut(l[60].id)),d(s,"class",h="legend-text "+(l[17].has(l[60].id)?"expanded":"")+" svelte-1l3a9ub"),d(V,"class","toggle-icon svelte-1l3a9ub"),d(t,"class","legend-header svelte-1l3a9ub"),se(t,"cursor","pointer"),d(e,"class","legend-item svelte-1l3a9ub")},m(x,H){C(x,e,H),i(e,t),i(t,a),i(t,n),i(t,s),i(s,_),i(t,b),i(t,V),i(V,g),i(e,F),A&&A.m(e,null),i(e,k),M||(P=Cl(t,"click",z),M=!0)},p(x,H){l=x,H[0]&131072&&h!==(h="legend-text "+(l[17].has(l[60].id)?"expanded":"")+" svelte-1l3a9ub")&&d(s,"class",h),H[0]&131072&&v!==(v=l[17].has(l[60].id)?"▲":"▼")&&we(g,v),H[0]&131072&&(I=l[17].has(l[60].id)),I?A||(A=Vl(l),A.c(),A.m(e,k)):A&&(A.d(1),A=null)},d(x){x&&o(e),A&&A.d(),M=!1,P()}}}function Ia(l){let e,t=`<img class="sm-icon svelte-1l3a9ub" src="${Vt}" alt="icon"/> <span class="tooltip-text">This chart use per capita values. i.e. show the cost/benefit per person in each LAD.</span>`;return{c(){e=u("div"),e.innerHTML=t,this.h()},l(a){e=f(a,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-10kgrx0"&&(e.innerHTML=t),this.h()},h(){d(e,"class","tooltip-wrapper")},m(a,n){C(a,e,n)},d(a){a&&o(e)}}}function Ta(l){let e,t=`<img class="sm-icon svelte-1l3a9ub" src="${Vt}" alt="icon"/> <span class="tooltip-text">This chart use per capita values. i.e. show the cost/benefit per person in each LAD.</span>`,a,n,s=`<img class="sm-icon svelte-1l3a9ub" src="${ba}" alt="icon"/> <span class="tooltip-text-neg svelte-1l3a9ub">This chart include some/all negative values.</span>`;return{c(){e=u("div"),e.innerHTML=t,a=y(),n=u("div"),n.innerHTML=s,this.h()},l(c){e=f(c,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-s9jtjo"&&(e.innerHTML=t),a=D(c),n=f(c,"DIV",{class:!0,"data-svelte-h":!0}),$(n)!=="svelte-8054p3"&&(n.innerHTML=s),this.h()},h(){d(e,"class","tooltip-wrapper"),d(n,"class","tooltip-wrapper")},m(c,_){C(c,e,_),C(c,a,_),C(c,n,_)},d(c){c&&(o(e),o(a),o(n))}}}function Ca(l){let e,t=l[60];const a=()=>l[38](e,t),n=()=>l[38](null,t);return{c(){e=u("div"),this.h()},l(s){e=f(s,"DIV",{class:!0}),m(e).forEach(o),this.h()},h(){d(e,"class","plot svelte-1l3a9ub")},m(s,c){C(s,e,c),a()},p(s,c){l=s,t!==l[60]&&(n(),t=l[60],a())},d(s){s&&o(e),n()}}}function Ma(l){let e,t=l[60];const a=()=>l[37](e,t),n=()=>l[37](null,t);return{c(){e=u("div"),this.h()},l(s){e=f(s,"DIV",{class:!0}),m(e).forEach(o),this.h()},h(){d(e,"class","plot svelte-1l3a9ub")},m(s,c){C(s,e,c),a()},p(s,c){l=s,t!==l[60]&&(n(),t=l[60],a())},d(s){s&&o(e),n()}}}function Tl(l){let e,t,a,n=l[60].label+"",s,c,_,h;function b(k,M){return k[60].id=="Hassle costs"||k[60].id=="Road repairs"||k[60].id=="Road safety"||k[60].id=="Congestion"||k[60].id=="Excess heat"?Ta:Ia}let v=b(l)(l);function g(k,M){return Ge.includes(k[18])?Ma:Ca}let I=g(l)(l);return{c(){e=u("div"),t=u("div"),a=u("h3"),s=S(n),c=y(),v.c(),_=y(),I.c(),h=y(),this.h()},l(k){e=f(k,"DIV",{class:!0});var M=m(e);t=f(M,"DIV",{class:!0});var P=m(t);a=f(P,"H3",{class:!0});var z=m(a);s=w(z,n),z.forEach(o),c=D(P),v.l(P),P.forEach(o),_=D(M),I.l(M),h=D(M),M.forEach(o),this.h()},h(){d(a,"class","component-chart-title svelte-1l3a9ub"),d(t,"class","component-chart-title-container svelte-1l3a9ub"),d(e,"class","plot-container svelte-1l3a9ub")},m(k,M){C(k,e,M),i(e,t),i(t,a),i(a,s),i(t,c),v.m(t,null),i(e,_),I.m(e,null),i(e,h)},p(k,M){I.p(k,M)},d(k){k&&o(e),v.d(),I.d()}}}function Fa(l){let e,t,a,n,s,c,_,h="SEF Report",b,V,v,g,F,I,k,M,P,z,A,x,H,B,G,U,Ie,fe,de=l[1]?"Switch to LAD level data":"Switch to LSOA level data",O,ie,Be,ge,ne,he,te='<p class="section-subtitle svelte-1l3a9ub">Overview</p>',Te,Z,X,oe,qe,ke,Je,pe,ft="Each point in the chart below represents a UK data zone (LSOA).",Xe,ve,dt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Vt}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each AREA.</span></div>`,Ke,Qe,N,_e,Ze,$e,me,ht="Scroll for zooming in and out.",et,be,pt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Vt}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,tt,Re,r,R,E,K,j='<p class="section-subtitle svelte-1l3a9ub">By Co-benefits</p>',It,re,Q,Ee,Tt,ye,Jt=l[19].toLowerCase()+"",Ct,Mt,Ft,Ce,Xt="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",Ht,Pt,xt,ee,Ne,Kt="Co-benefits:",Bt,Rt,lt,Nt,Ot,De,Qt='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',jt,Me,Ae,vt,Fe,at,zt,Zt;e=new Wl({});function Ml(p,T){return Ge.includes(p[18])?ka:ga}let st=Ml(l)(l);function Fl(p,T){return Ge.includes(p[18])?ya:Ea}let it=Fl(l)(l);function Hl(p,T){return Ge.includes(p[18])?Aa:Da}let nt=Hl(l)(l);function Pl(p,T){return Ge.includes(p[18])?Sa:La}let ot=Pl(l)(l),q=l[16]&&Sl(l);function xl(p,T){return Ge.includes(p[18])?Va:wa}let rt=xl(l)(l),J=l[14]&&wl(l),Oe=Dt(St),W=[];for(let p=0;p<Oe.length;p+=1)W[p]=Il(Ll(l,Oe,p));let je=Dt(St),Y=[];for(let p=0;p<je.length;p+=1)Y[p]=Tl(Al(l,je,p));return Fe=new fa({}),{c(){dl(e.$$.fragment),t=y(),a=u("div"),n=u("div"),s=u("div"),c=u("div"),_=u("p"),_.textContent=h,b=y(),V=u("div"),v=u("h1"),g=S(l[21]),F=y(),I=u("p"),k=S(l[20]),M=y(),P=u("div"),st.c(),z=y(),A=u("div"),x=u("p"),it.c(),H=y(),B=u("p"),nt.c(),G=y(),U=u("p"),ot.c(),Ie=y(),fe=u("button"),O=S(de),ie=y(),q&&q.c(),Be=y(),ge=u("div"),ne=u("div"),he=u("div"),he.innerHTML=te,Te=y(),Z=u("div"),X=u("div"),oe=u("h3"),qe=S(l[19]),ke=S(" against per capita co-benefit values (£, thousand)"),Je=y(),pe=u("p"),pe.textContent=ft,Xe=y(),ve=u("div"),ve.innerHTML=dt,Ke=y(),rt.c(),Qe=y(),N=u("div"),_e=u("h3"),Ze=S(l[19]),$e=y(),me=u("p"),me.textContent=ht,et=y(),be=u("div"),be.innerHTML=pt,tt=y(),J&&J.c(),Re=y(),r=u("div"),R=y(),E=u("div"),K=u("div"),K.innerHTML=j,It=y(),re=u("div"),Q=u("div"),Ee=u("h3"),Tt=S("Plotting "),ye=u("span"),Ct=S(Jt),Mt=S(" against the gain/loss (£, thousand) per capita for each co-benefit"),Ft=y(),Ce=u("p"),Ce.textContent=Xt,Ht=y(),Pt=u("br"),xt=y(),ee=u("div"),Ne=u("strong"),Ne.textContent=Kt,Bt=u("br"),Rt=S(`Expand for detailed explanation
                    `),lt=u("div"),Nt=y();for(let p=0;p<W.length;p+=1)W[p].c();Ot=y(),De=u("div"),De.innerHTML=Qt,jt=y(),Me=u("div"),Ae=u("div");for(let p=0;p<Y.length;p+=1)Y[p].c();vt=y(),dl(Fe.$$.fragment),this.h()},l(p){hl(e.$$.fragment,p),t=D(p),a=f(p,"DIV",{class:!0});var T=m(a);n=f(T,"DIV",{class:!0});var L=m(n);s=f(L,"DIV",{class:!0});var le=m(s);c=f(le,"DIV",{class:!0});var _t=m(c);_=f(_t,"P",{class:!0,"data-svelte-h":!0}),$(_)!=="svelte-3h7aqf"&&(_.textContent=h),b=D(_t),V=f(_t,"DIV",{class:!0});var mt=m(V);v=f(mt,"H1",{class:!0});var $t=m(v);g=w($t,l[21]),$t.forEach(o),F=D(mt),I=f(mt,"P",{class:!0});var el=m(I);k=w(el,l[20]),el.forEach(o),mt.forEach(o),_t.forEach(o),M=D(le),P=f(le,"DIV",{class:!0});var tl=m(P);st.l(tl),tl.forEach(o),z=D(le),A=f(le,"DIV",{class:!0});var ze=m(A);x=f(ze,"P",{class:!0});var ll=m(x);it.l(ll),ll.forEach(o),H=D(ze),B=f(ze,"P",{class:!0});var al=m(B);nt.l(al),al.forEach(o),G=D(ze),U=f(ze,"P",{class:!0});var sl=m(U);ot.l(sl),sl.forEach(o),ze.forEach(o),le.forEach(o),L.forEach(o),Ie=D(T),fe=f(T,"BUTTON",{});var il=m(fe);O=w(il,de),il.forEach(o),ie=D(T),q&&q.l(T),Be=D(T),ge=f(T,"DIV",{class:!0});var nl=m(ge);ne=f(nl,"DIV",{id:!0});var bt=m(ne);he=f(bt,"DIV",{class:!0,"data-svelte-h":!0}),$(he)!=="svelte-ll1i43"&&(he.innerHTML=te),Te=D(bt),Z=f(bt,"DIV",{id:!0,class:!0});var gt=m(Z);X=f(gt,"DIV",{class:!0});var Le=m(X);oe=f(Le,"H3",{class:!0});var Ut=m(oe);qe=w(Ut,l[19]),ke=w(Ut," against per capita co-benefit values (£, thousand)"),Ut.forEach(o),Je=D(Le),pe=f(Le,"P",{class:!0,"data-svelte-h":!0}),$(pe)!=="svelte-1ozkrs5"&&(pe.textContent=ft),Xe=D(Le),ve=f(Le,"DIV",{class:!0,"data-svelte-h":!0}),$(ve)!=="svelte-gst1ks"&&(ve.innerHTML=dt),Ke=D(Le),rt.l(Le),Le.forEach(o),Qe=D(gt),N=f(gt,"DIV",{class:!0});var ce=m(N);_e=f(ce,"H3",{class:!0});var ol=m(_e);Ze=w(ol,l[19]),ol.forEach(o),$e=D(ce),me=f(ce,"P",{class:!0,"data-svelte-h":!0}),$(me)!=="svelte-1ask2se"&&(me.textContent=ht),et=D(ce),be=f(ce,"DIV",{class:!0,"data-svelte-h":!0}),$(be)!=="svelte-1dxsuae"&&(be.innerHTML=pt),tt=D(ce),J&&J.l(ce),Re=D(ce),r=f(ce,"DIV",{id:!0,class:!0}),m(r).forEach(o),ce.forEach(o),gt.forEach(o),bt.forEach(o),nl.forEach(o),R=D(T),E=f(T,"DIV",{id:!0});var kt=m(E);K=f(kt,"DIV",{class:!0,"data-svelte-h":!0}),$(K)!=="svelte-1av3fse"&&(K.innerHTML=j),It=D(kt),re=f(kt,"DIV",{id:!0,class:!0,style:!0});var Et=m(re);Q=f(Et,"DIV",{id:!0,class:!0});var ue=m(Q);Ee=f(ue,"H3",{class:!0});var yt=m(Ee);Tt=w(yt,"Plotting "),ye=f(yt,"SPAN",{style:!0});var rl=m(ye);Ct=w(rl,Jt),rl.forEach(o),Mt=w(yt," against the gain/loss (£, thousand) per capita for each co-benefit"),yt.forEach(o),Ft=D(ue),Ce=f(ue,"P",{class:!0,"data-svelte-h":!0}),$(Ce)!=="svelte-1h97e3k"&&(Ce.textContent=Xt),Ht=D(ue),Pt=f(ue,"BR",{}),xt=D(ue),ee=f(ue,"DIV",{id:!0,class:!0});var He=m(ee);Ne=f(He,"STRONG",{"data-svelte-h":!0}),$(Ne)!=="svelte-1qu96kx"&&(Ne.textContent=Kt),Bt=f(He,"BR",{}),Rt=w(He,`Expand for detailed explanation
                    `),lt=f(He,"DIV",{style:!0}),m(lt).forEach(o),Nt=D(He);for(let Pe=0;Pe<W.length;Pe+=1)W[Pe].l(He);He.forEach(o),Ot=D(ue),De=f(ue,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),$(De)!=="svelte-11g4vkg"&&(De.innerHTML=Qt),ue.forEach(o),jt=D(Et),Me=f(Et,"DIV",{id:!0,class:!0});var cl=m(Me);Ae=f(cl,"DIV",{id:!0,class:!0});var ul=m(Ae);for(let Pe=0;Pe<Y.length;Pe+=1)Y[Pe].l(ul);ul.forEach(o),cl.forEach(o),Et.forEach(o),kt.forEach(o),T.forEach(o),vt=D(p),hl(Fe.$$.fragment,p),this.h()},h(){d(_,"class","page-subtitle svelte-1l3a9ub"),d(v,"class","page-title svelte-1l3a9ub"),d(I,"class","definition"),d(V,"class","title-container"),d(c,"class","header-text svelte-1l3a9ub"),d(P,"class","header-vis svelte-1l3a9ub"),d(x,"class","definition-stat svelte-1l3a9ub"),d(B,"class","definition-stat svelte-1l3a9ub"),d(U,"class","definition-stat svelte-1l3a9ub"),d(A,"class","header-stats svelte-1l3a9ub"),d(s,"class","header-content svelte-1l3a9ub"),d(n,"class","section header svelte-1l3a9ub"),d(he,"class","section-header"),d(oe,"class","component-title"),d(pe,"class","description"),d(ve,"class","aggregation-icon-container2 svelte-1l3a9ub"),d(X,"class","component column"),d(_e,"class","component-title"),d(me,"class","description"),d(be,"class","aggregation-icon-container2 svelte-1l3a9ub"),d(r,"id","map"),d(r,"class","svelte-1l3a9ub"),d(N,"class","component column"),d(Z,"id","vis-block"),d(Z,"class","svelte-1l3a9ub"),d(ne,"id","overview"),d(ge,"class","section"),d(K,"class","section-header"),se(ye,"background-color","#555"),se(ye,"padding","0 1px"),se(ye,"color","#f9f9f9"),d(Ee,"class","component-title"),d(Ce,"class","explanation"),se(lt,"height","0.8em"),d(ee,"id","main-legend"),d(ee,"class","legend-box svelte-1l3a9ub"),d(De,"id","se-disclaimer"),d(De,"class","disclaimer-box svelte-1l3a9ub"),d(Q,"id","se-title"),d(Q,"class","svelte-1l3a9ub"),d(Ae,"id","multiple-plots"),d(Ae,"class","svelte-1l3a9ub"),d(Me,"id","multiple-comp"),d(Me,"class","svelte-1l3a9ub"),d(re,"id","se-block"),d(re,"class","component svelte-1l3a9ub"),se(re,"margin-left","1rem"),d(E,"id","compare"),d(a,"class","page-container")},m(p,T){pl(e,p,T),C(p,t,T),C(p,a,T),i(a,n),i(n,s),i(s,c),i(c,_),i(c,b),i(c,V),i(V,v),i(v,g),i(V,F),i(V,I),i(I,k),i(s,M),i(s,P),st.m(P,null),i(s,z),i(s,A),i(A,x),it.m(x,null),i(A,H),i(A,B),nt.m(B,null),i(A,G),i(A,U),ot.m(U,null),i(a,Ie),i(a,fe),i(fe,O),i(a,ie),q&&q.m(a,null),i(a,Be),i(a,ge),i(ge,ne),i(ne,he),i(ne,Te),i(ne,Z),i(Z,X),i(X,oe),i(oe,qe),i(oe,ke),i(X,Je),i(X,pe),i(X,Xe),i(X,ve),i(X,Ke),rt.m(X,null),i(Z,Qe),i(Z,N),i(N,_e),i(_e,Ze),i(N,$e),i(N,me),i(N,et),i(N,be),i(N,tt),J&&J.m(N,null),i(N,Re),i(N,r),l[35](r),i(a,R),i(a,E),i(E,K),i(E,It),i(E,re),i(re,Q),i(Q,Ee),i(Ee,Tt),i(Ee,ye),i(ye,Ct),i(Ee,Mt),i(Q,Ft),i(Q,Ce),i(Q,Ht),i(Q,Pt),i(Q,xt),i(Q,ee),i(ee,Ne),i(ee,Bt),i(ee,Rt),i(ee,lt),i(ee,Nt);for(let L=0;L<W.length;L+=1)W[L]&&W[L].m(ee,null);i(Q,Ot),i(Q,De),i(re,jt),i(re,Me),i(Me,Ae);for(let L=0;L<Y.length;L+=1)Y[L]&&Y[L].m(Ae,null);l[39](a),C(p,vt,T),pl(Fe,p,T),at=!0,zt||(Zt=Cl(fe,"click",l[24]),zt=!0)},p(p,T){if(st.p(p,T),it.p(p,T),nt.p(p,T),ot.p(p,T),(!at||T[0]&2)&&de!==(de=p[1]?"Switch to LAD level data":"Switch to LSOA level data")&&we(O,de),p[16]?q?q.p(p,T):(q=Sl(p),q.c(),q.m(a,Be)):q&&(q.d(1),q=null),rt.p(p,T),p[14]?J?J.p(p,T):(J=wl(p),J.c(),J.m(N,Re)):J&&(J.d(1),J=null),T[0]&33685504){Oe=Dt(St);let L;for(L=0;L<Oe.length;L+=1){const le=Ll(p,Oe,L);W[L]?W[L].p(le,T):(W[L]=Il(le),W[L].c(),W[L].m(ee,null))}for(;L<W.length;L+=1)W[L].d(1);W.length=Oe.length}if(T[0]&262273){je=Dt(St);let L;for(L=0;L<je.length;L+=1){const le=Al(p,je,L);Y[L]?Y[L].p(le,T):(Y[L]=Tl(le),Y[L].c(),Y[L].m(Ae,null))}for(;L<Y.length;L+=1)Y[L].d(1);Y.length=je.length}},i(p){at||(vl(e.$$.fragment,p),vl(Fe.$$.fragment,p),at=!0)},o(p){_l(e.$$.fragment,p),_l(Fe.$$.fragment,p),at=!1},d(p){p&&(o(t),o(a),o(vt)),ml(e,p),st.d(),it.d(),nt.d(),ot.d(),q&&q.d(),rt.d(),J&&J.d(),l[35](null),fl(W,p),fl(Y,p),l[39](null),ml(Fe,p),zt=!1,Zt()}}}let ae=400;function Ve(l,e){return e==="£"?`${e}${l}`:`${l} ${e}`}function Ha(l,e,t){let a,n,s,c,_,h,b={},V={},v,g,F,I,k=!1,M=!1,P,z,A,x,H,B,G,U,Ie,fe,{data:de}=e;const O=de.SEF;console.log("SEF ",O);const ie=ea.find(r=>r.id===O)?.id??O,Be=ta.find(r=>r.id===O)?.label??O,ge=la.find(r=>r.id===O)?.def??O,ne=aa.find(r=>r.id===O)?.description??O,he=sa.find(r=>r.id===O)?.short_units??O,te=ia.find(r=>r.id===O)?.units??O;let Te,Z,X=!1,oe="";const qe=["overview","compare"];function ke(){const r=window.scrollY;t(16,X=r>250);for(const R of qe){const E=document.getElementById(R);if(!E)continue;const K=E.getBoundingClientRect();if(K.top<=150&&K.bottom>=150){oe!==R&&Yt.capture("section entered (sef)",{section_name:R}),oe=R;break}}}Rl(()=>(window.addEventListener("scroll",ke),ke(),()=>window.removeEventListener("scroll",ke))),Nl(()=>{window.removeEventListener("scroll",ke)});async function Je(){t(27,v=await wt(oa(O))),console.log("totals",v),g=await wt(ra(O)),console.log("by cobens",g),F=await wt(ca()),console.log("per_capita_data",F),t(28,I=await wt(ua(O))),console.log("LAD data 1 ",I),t(8,P=(gl(v,r=>r.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),Ie=kl(v,r=>r.val),fe=yl[ie],t(9,z=fe?.[Ie]??Ie??"N/A"),console.log("Average Value: ",P),B=Jl(v,r=>r.val),t(12,H=B!==-1?v[B].Lookup_Value:"N/A"),t(10,A=(v[B]?.val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),U=Xl(v,r=>r.val),t(13,G=U!==-1?v[U].Lookup_Value:"N/A"),t(11,x=(v[U]?.val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),Gt.forEach(r=>{g[r]=+g[r]}),t(29,M=!0)}Je().then(()=>{t(14,Te=new $l(v,"LSOA",Z,"val",!1,"Lookup_Value",!1)),Te.initMap()});function pe(){t(1,k=!k)}function ft(){const r=gl(v,E=>E.val)??0,R=El(Dl().thresholds(20).value(E=>E.val)(v),E=>E.length);t(3,s.innerHTML="",s),s?.append(Ue({height:ae/1.9,width:ae*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${te}`},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[Kl(a,pa({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),We([r],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:r,label:"Average"}},tip:{format:{average:E=>`${E.toFixed(2)}`,x:!1}}}),Ye(v,{x:{value:r,thresholds:20},y:R+.1*R,r:5,fill:"#BD210E"}),ct({label:`${te}`,labelArrow:!1,labelAnchor:"center"})]}))}function Xe(){const r=kl(v,j=>j.val)??0,R=El(Dl().thresholds(20).value(j=>j.val)(v),j=>j.length),E=yl[ie],K=E?Object.keys(E).map(Number):v.filter(j=>j.SEFMAME==ie).map(j=>j.SE);_?.append(Ue({height:ae/1.9,width:ae*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:ie==="Typology"?80:50,x:{domain:K,label:na(ie),tickFormat:j=>E?.[j]??j,tickRotate:ie==="Typology"?-10:0},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[va(v,Ql({y:"count"},{x:"val",fill:"black",opacity:.5})),We([r],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:r,label:"Average"}},tip:{format:{average:j=>`${j.toFixed(2)}`,x:!1}}}),Ye(v,{x:{value:r,thresholds:20},y:R+.1*R,r:5,fill:"#BD210E"})]}))}function ve(){t(4,c.innerHTML="",c),c?.append(Ue({height:ae*1.5,width:ae*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[At([0],{stroke:"#333",strokeWidth:1.25}),We([0],{stroke:"#333",strokeWidth:.75}),Ye(a,{x:"val",y:r=>r.total_per_capita*1e3,fill:r=>r.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${te}`},value:{value:r=>r.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),Lt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),ct({label:`${te}`,labelArrow:!1,labelAnchor:"center"})]}))}function dt(){const R=v.map(E=>({...E,jittered_val:E.val+(Math.random()-.5)*.2}));h?.append(Ue({height:ae*1.5,width:ae*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[At([0],{stroke:"#333",strokeWidth:1.25}),We([0],{stroke:"#333",strokeWidth:.75}),Ye(R,{x:"jittered_val",y:E=>E.total_per_capita*1e3,fill:E=>E.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${te}`},value:{value:E=>E.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),Lt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),ct({label:`${te}`,labelArrow:!1,labelAnchor:"center"})]}))}function Ke(){Gt.forEach(r=>{let R;R=Ue({height:ae,width:ae,marginLeft:60,marginTop:10,marginRight:10,marginBottom:60,x:{label:null},y:{label:null},style:{fontSize:"12px"},marks:[At([0],{stroke:"#333",strokeWidth:1.25}),We([0],{stroke:"#333",strokeWidth:.75}),Ye(g.filter(E=>E.co_benefit_type==r),{x:"val",y:"total",fill:ut(r),fillOpacity:.5,r:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),Lt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),ct({label:`${te}`,labelArrow:!1,labelAnchor:"center"})]}),b[r]?.append(R)})}function Qe(){const R=g.map(E=>({...E,jittered_val:E.val+(Math.random()-.5)*.2}));Gt.forEach(E=>{let K;K=Ue({height:ae,width:ae,marginLeft:60,marginTop:10,marginRight:10,marginBottom:60,x:{label:null},y:{label:null},style:{fontSize:"12px"},marks:[At([0],{stroke:"#333",strokeWidth:1.25}),We([0],{stroke:"#333",strokeWidth:.75}),Ye(R.filter(j=>j.co_benefit_type==E),{x:"jittered_val",y:"total",fill:ut(E),fillOpacity:.5,r:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),Lt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),ct({label:`${te}`,labelArrow:!1,labelAnchor:"center"})]}),V[E]?.append(K)})}let N=new Set;function _e(r){N.has(r)?N.delete(r):N.add(r),t(17,N=new Set(N))}function Ze(r){Se[r?"unshift":"push"](()=>{_=r,t(5,_)})}function $e(r){Se[r?"unshift":"push"](()=>{s=r,t(3,s)})}function me(r){Se[r?"unshift":"push"](()=>{h=r,t(6,h)})}function ht(r){Se[r?"unshift":"push"](()=>{c=r,t(4,c)})}function et(r){Se[r?"unshift":"push"](()=>{Z=r,t(15,Z)})}const be=r=>{const R=N.has(r.id);_e(r.id),R?Yt.capture("cobenefit closed",{cobenefit:r.label}):Yt.capture("cobenefit opened",{cobenefit:r.label})};function pt(r,R){Se[r?"unshift":"push"](()=>{V[R.id]=r,t(7,V)})}function tt(r,R){Se[r?"unshift":"push"](()=>{b[R.id]=r,t(0,b)})}function Re(r){Se[r?"unshift":"push"](()=>{n=r,t(2,n)})}return l.$$set=r=>{"data"in r&&t(26,de=r.data)},l.$$.update=()=>{l.$$.dirty[0]&402653186&&t(30,a=k?I:v),l.$$.dirty[0]&1610612737&&(Object.values(b).forEach(r=>{r.firstChild?.remove()}),M&&(ft(),dt(),Xe(),Ke(),Qe()),M&&a&&ve())},[b,k,n,s,c,_,h,V,P,z,A,x,H,G,Te,Z,X,N,ie,Be,ge,ne,he,te,pe,_e,de,v,I,M,a,Ze,$e,me,ht,et,be,pt,tt,Re]}class ls extends zl{constructor(e){super(),Ul(this,e,Ha,Fa,Bl,{data:26},null,[-1,-1,-1])}}export{ls as component};
