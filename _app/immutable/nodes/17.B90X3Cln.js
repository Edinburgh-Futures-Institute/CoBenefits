import{s as Fe,d as m,x as ke,y as oe,i as $,b as a,z as Z,p as t,g as T,c as u,e as F,q as H,j as k,h as d,r as Me,A as ce,w as xe,n as Ue,f as De,t as Be,B as Ie,C as Ve}from"../chunks/BevTp-kf.js";import{S as Pe,i as Oe,d as we,t as He,a as Ge,m as je,c as Re,b as ze}from"../chunks/C7e0BwVj.js";import{N as Ke,e as ue}from"../chunks/YlWUd1ax.js";import{i as Ye,o as Je}from"../chunks/F40_IDQw.js";import"../chunks/lkIfnYzw.js";import{M as Ze}from"../chunks/BGA8T-Qu.js";import{g as ie,d as Ee,e as ye,f as Qe,h as We,i as Xe}from"../chunks/Dd5EerOu.js";import{C as de,a as $e,S as Ce,g as Ne,b as be,c as Le,d as et}from"../chunks/wS4nFbpC.js";function Se(r,e,l){const n=r.slice();return n[32]=e[l],n}function Ae(r,e,l){const n=r.slice();return n[29]=e[l],n}function tt(r){let e,l,n="Social Economic Factor",p,_,S=ue(Ce),i=[];for(let f=0;f<S.length;f+=1)i[f]=qe(Se(r,S,f));return{c(){e=d("div"),l=d("h2"),l.textContent=n,p=k(),_=d("div");for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l(f){e=u(f,"DIV",{class:!0});var o=F(e);l=u(o,"H2",{"data-svelte-h":!0}),H(l)!=="svelte-1ld89ev"&&(l.textContent=n),p=T(o),_=u(o,"DIV",{id:!0,class:!0});var s=F(_);for(let v=0;v<i.length;v+=1)i[v].l(s);s.forEach(m),o.forEach(m),this.h()},h(){t(_,"id","time"),t(_,"class","svelte-1qs88ie"),t(e,"class","tabcontent svelte-1qs88ie")},m(f,o){$(f,e,o),a(e,l),a(e,p),a(e,_);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(_,null)},p(f,o){if(o[0]&514){S=ue(Ce);let s;for(s=0;s<S.length;s+=1){const v=Se(f,S,s);i[s]?i[s].p(v,o):(i[s]=qe(v),i[s].c(),i[s].m(_,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=S.length}},d(f){f&&m(e),xe(i,f)}}}function lt(r){let e,l,n,p="Co-Benefits",_,S,i,f,o="Time",s,v,x,q,M,b="Total",L,h,A,U,G="2025-2029",le,J,D,Q,ae="2030-2034",P,O,z,w,c="2035-2039",y,B,K,j,se="2040-2044",ne,Y,W,ee,re="2045-2049",te,V,C=ue(de.concat({id:"total",label:"Total"})),g=[];for(let I=0;I<C.length;I+=1)g[I]=Te(Ae(r,C,I));return{c(){e=d("div"),l=d("div"),n=d("h2"),n.textContent=p,_=k();for(let I=0;I<g.length;I+=1)g[I].c();S=k(),i=d("div"),f=d("h2"),f.textContent=o,s=k(),v=d("div"),x=d("label"),q=d("input"),M=d("span"),M.textContent=b,L=k(),h=d("label"),A=d("input"),U=d("span"),U.textContent=G,le=k(),J=d("label"),D=d("input"),Q=d("span"),Q.textContent=ae,P=k(),O=d("label"),z=d("input"),w=d("span"),w.textContent=c,y=k(),B=d("label"),K=d("input"),j=d("span"),j.textContent=se,ne=k(),Y=d("label"),W=d("input"),ee=d("span"),ee.textContent=re,this.h()},l(I){e=u(I,"DIV",{class:!0});var R=F(e);l=u(R,"DIV",{class:!0});var E=F(l);n=u(E,"H2",{"data-svelte-h":!0}),H(n)!=="svelte-uglilz"&&(n.textContent=p),_=T(E);for(let ge=0;ge<g.length;ge+=1)g[ge].l(E);E.forEach(m),S=T(R),i=u(R,"DIV",{class:!0});var X=F(i);f=u(X,"H2",{"data-svelte-h":!0}),H(f)!=="svelte-hletp"&&(f.textContent=o),s=T(X),v=u(X,"DIV",{id:!0,class:!0});var N=F(v);x=u(N,"LABEL",{class:!0});var fe=F(x);q=u(fe,"INPUT",{type:!0,name:!0,class:!0}),M=u(fe,"SPAN",{class:!0,"data-svelte-h":!0}),H(M)!=="svelte-2fqrek"&&(M.textContent=b),fe.forEach(m),L=T(N),h=u(N,"LABEL",{class:!0});var ve=F(h);A=u(ve,"INPUT",{type:!0,name:!0,class:!0}),U=u(ve,"SPAN",{class:!0,"data-svelte-h":!0}),H(U)!=="svelte-177152l"&&(U.textContent=G),ve.forEach(m),le=T(N),J=u(N,"LABEL",{class:!0});var pe=F(J);D=u(pe,"INPUT",{type:!0,name:!0,class:!0}),Q=u(pe,"SPAN",{class:!0,"data-svelte-h":!0}),H(Q)!=="svelte-sne3j9"&&(Q.textContent=ae),pe.forEach(m),P=T(N),O=u(N,"LABEL",{class:!0});var he=F(O);z=u(he,"INPUT",{type:!0,name:!0,class:!0}),w=u(he,"SPAN",{class:!0,"data-svelte-h":!0}),H(w)!=="svelte-13ifhof"&&(w.textContent=c),he.forEach(m),y=T(N),B=u(N,"LABEL",{class:!0});var me=F(B);K=u(me,"INPUT",{type:!0,name:!0,class:!0}),j=u(me,"SPAN",{class:!0,"data-svelte-h":!0}),H(j)!=="svelte-1pug1mv"&&(j.textContent=se),me.forEach(m),ne=T(N),Y=u(N,"LABEL",{class:!0});var _e=F(Y);W=u(_e,"INPUT",{type:!0,name:!0,class:!0}),ee=u(_e,"SPAN",{class:!0,"data-svelte-h":!0}),H(ee)!=="svelte-3f05xd"&&(ee.textContent=re),_e.forEach(m),N.forEach(m),X.forEach(m),R.forEach(m),this.h()},h(){t(l,"class","component"),t(q,"type","radio"),t(q,"name","toggle"),q.value="total",q.checked=!0,t(q,"class","svelte-1qs88ie"),t(M,"class","svelte-1qs88ie"),t(x,"class","time-radio svelte-1qs88ie"),t(A,"type","radio"),t(A,"name","toggle"),A.value="Y2025_2029",t(A,"class","svelte-1qs88ie"),t(U,"class","svelte-1qs88ie"),t(h,"class","time-radio svelte-1qs88ie"),t(D,"type","radio"),t(D,"name","toggle"),D.value="Y2030_2034",t(D,"class","svelte-1qs88ie"),t(Q,"class","svelte-1qs88ie"),t(J,"class","time-radio svelte-1qs88ie"),t(z,"type","radio"),t(z,"name","toggle"),z.value="Y2035_2039",t(z,"class","svelte-1qs88ie"),t(w,"class","svelte-1qs88ie"),t(O,"class","time-radio svelte-1qs88ie"),t(K,"type","radio"),t(K,"name","toggle"),K.value="Y2040_2044",t(K,"class","svelte-1qs88ie"),t(j,"class","svelte-1qs88ie"),t(B,"class","time-radio svelte-1qs88ie"),t(W,"type","radio"),t(W,"name","toggle"),W.value="Y2045_2049",t(W,"class","svelte-1qs88ie"),t(ee,"class","svelte-1qs88ie"),t(Y,"class","time-radio svelte-1qs88ie"),t(v,"id","time"),t(v,"class","svelte-1qs88ie"),t(i,"class","component"),t(e,"class","tabcontent svelte-1qs88ie")},m(I,R){$(I,e,R),a(e,l),a(l,n),a(l,_);for(let E=0;E<g.length;E+=1)g[E]&&g[E].m(l,null);a(e,S),a(e,i),a(i,f),a(i,s),a(i,v),a(v,x),a(x,q),a(x,M),a(v,L),a(v,h),a(h,A),a(h,U),a(v,le),a(v,J),a(J,D),a(J,Q),a(v,P),a(v,O),a(O,z),a(O,w),a(v,y),a(v,B),a(B,K),a(B,j),a(v,ne),a(v,Y),a(Y,W),a(Y,ee),te||(V=[Z(q,"change",r[7]),Z(A,"change",r[7]),Z(D,"change",r[7]),Z(z,"change",r[7]),Z(K,"change",r[7]),Z(W,"change",r[7])],te=!0)},p(I,R){if(R[0]&64){C=ue(de.concat({id:"total",label:"Total"}));let E;for(E=0;E<C.length;E+=1){const X=Ae(I,C,E);g[E]?g[E].p(X,R):(g[E]=Te(X),g[E].c(),g[E].m(l,null))}for(;E<g.length;E+=1)g[E].d(1);g.length=C.length}},d(I){I&&m(e),xe(g,I),te=!1,ke(V)}}}function qe(r){let e,l,n,p,_=r[32].label+"",S,i,f,o;return{c(){e=d("input"),n=k(),p=d("label"),S=Be(_),i=d("br"),this.h()},l(s){e=u(s,"INPUT",{type:!0,id:!0,name:!0,class:!0}),n=T(s),p=u(s,"LABEL",{for:!0});var v=F(p);S=De(v,_),v.forEach(m),i=u(s,"BR",{}),this.h()},h(){t(e,"type","radio"),t(e,"id","html"),t(e,"name","fav_language"),e.value=r[32].id,e.checked=l=r[32].id==r[1],t(e,"class","svelte-1qs88ie"),t(p,"for","html")},m(s,v){$(s,e,v),$(s,n,v),$(s,p,v),a(p,S),$(s,i,v),f||(o=Z(e,"change",r[9]),f=!0)},p(s,v){v[0]&2&&l!==(l=s[32].id==s[1])&&(e.checked=l)},d(s){s&&(m(e),m(n),m(p),m(i)),f=!1,o()}}}function at(r){let e,l;return{c(){e=d("img"),this.h()},l(n){e=u(n,"IMG",{style:!0,class:!0,src:!0}),this.h()},h(){Ve(e,"opacity","0"),t(e,"class","icon svelte-1qs88ie"),Ie(e.src,l=Ne("Air quality"))||t(e,"src",l)},m(n,p){$(n,e,p)},d(n){n&&m(e)}}}function st(r){let e,l;return{c(){e=d("img"),this.h()},l(n){e=u(n,"IMG",{alt:!0,class:!0,src:!0}),this.h()},h(){t(e,"alt","cobenefit icon"),t(e,"class","icon svelte-1qs88ie"),Ie(e.src,l=Ne(r[29].id))||t(e,"src",l)},m(n,p){$(n,e,p)},d(n){n&&m(e)}}}function Te(r){let e,l,n,p,_,S=r[29].label+"",i,f,o,s,v,x;function q(L,h){return L[29].id!="total"?st:at}let b=q(r)(r);return{c(){e=d("div"),b.c(),l=k(),n=d("input"),p=k(),_=d("a"),i=Be(S),f=k(),o=d("br"),s=k(),this.h()},l(L){e=u(L,"DIV",{class:!0});var h=F(e);b.l(h),l=T(h),n=u(h,"INPUT",{type:!0,name:!0}),p=T(h),_=u(h,"A",{class:!0,href:!0});var A=F(_);i=De(A,S),A.forEach(m),f=T(h),o=u(h,"BR",{}),s=T(h),h.forEach(m),this.h()},h(){t(n,"type","radio"),t(n,"name","cobenef"),n.value=r[29].id,n.checked=!0,t(_,"class","link svelte-1qs88ie"),t(_,"href","/cobenefit?cobenefit="+r[29].id),t(e,"class","checkbox-div svelte-1qs88ie")},m(L,h){$(L,e,h),b.m(e,null),a(e,l),a(e,n),a(e,p),a(e,_),a(_,i),a(e,f),a(e,o),a(e,s),v||(x=Z(n,"change",r[6]),v=!0)},p:Ue,d(L){L&&m(e),b.d(),v=!1,x()}}}function nt(r){let e,l,n,p,_=`<h2>MapUK</h2> <p>This interactive map allows to explore both the co-benefit values and the socio-economic factors at the local
            authorities and datazones levels.</p>`,S,i,f,o,s="",v,x,q="",M,b,L="Export",h,A,U,G,le="CoBenefits",J,D,Q=`Socio-Economic
                    Factors`,ae,P,O,z,w,c="Local Authorities",y,B,K,j,se="Data Zones",ne,Y,W,ee;e=new Ke({});function re(C,g){if(C[0]=="Cobenefit")return lt;if(C[0]=="SEF")return tt}let te=re(r),V=te&&te(r);return{c(){ze(e.$$.fragment),l=k(),n=d("div"),p=d("div"),p.innerHTML=_,S=k(),i=d("div"),f=d("div"),o=d("div"),o.innerHTML=s,v=k(),x=d("div"),x.innerHTML=q,M=k(),b=d("button"),b.textContent=L,h=k(),A=d("div"),U=d("div"),G=d("button"),G.textContent=le,J=k(),D=d("button"),D.textContent=Q,ae=k(),P=d("div"),O=d("input"),z=k(),w=d("label"),w.textContent=c,y=k(),B=d("input"),K=k(),j=d("label"),j.textContent=se,ne=k(),V&&V.c(),this.h()},l(C){Re(e.$$.fragment,C),l=T(C),n=u(C,"DIV",{class:!0});var g=F(n);p=u(g,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),H(p)!=="svelte-1bpnvd7"&&(p.innerHTML=_),S=T(g),i=u(g,"DIV",{id:!0,class:!0});var I=F(i);f=u(I,"DIV",{class:!0,id:!0});var R=F(f);o=u(R,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),H(o)!=="svelte-1ej9vmv"&&(o.innerHTML=s),v=T(R),x=u(R,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),H(x)!=="svelte-1j653gg"&&(x.innerHTML=q),M=T(R),b=u(R,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),H(b)!=="svelte-zgluur"&&(b.textContent=L),R.forEach(m),h=T(I),A=u(I,"DIV",{class:!0,id:!0});var E=F(A);U=u(E,"DIV",{class:!0});var X=F(U);G=u(X,"BUTTON",{class:!0,"data-svelte-h":!0}),H(G)!=="svelte-14nmzoo"&&(G.textContent=le),J=T(X),D=u(X,"BUTTON",{class:!0,"data-svelte-h":!0}),H(D)!=="svelte-xxvynj"&&(D.textContent=Q),X.forEach(m),ae=T(E),P=u(E,"DIV",{class:!0});var N=F(P);O=u(N,"INPUT",{type:!0,name:!0}),z=T(N),w=u(N,"LABEL",{for:!0,"data-svelte-h":!0}),H(w)!=="svelte-p8irzv"&&(w.textContent=c),y=T(N),B=u(N,"INPUT",{type:!0,name:!0}),K=T(N),j=u(N,"LABEL",{for:!0,"data-svelte-h":!0}),H(j)!=="svelte-1ytveqc"&&(j.textContent=se),N.forEach(m),ne=T(E),V&&V.l(E),E.forEach(m),I.forEach(m),g.forEach(m),this.h()},h(){t(p,"class","component"),t(p,"id","heaser"),t(o,"id","map"),t(o,"class","svelte-1qs88ie"),t(x,"id","map-legend"),t(x,"class","svelte-1qs88ie"),t(b,"id","export-button"),t(b,"class","svelte-1qs88ie"),t(f,"class","component column svelte-1qs88ie"),t(f,"id","mapComp"),t(G,"class","tablinks svelte-1qs88ie"),G.value="Cobenefit",oe(G,"active",r[0]=="Cobenefit"),t(D,"class","tablinks svelte-1qs88ie"),D.value="SEF",oe(D,"active",r[0]=="SEF"),t(U,"class","tab svelte-1qs88ie"),t(O,"type","radio"),t(O,"name","granularity"),O.value="LAD",O.checked=!0,t(w,"for","LAD"),t(B,"type","radio"),t(B,"name","granularity"),B.value="LSOA",t(j,"for","LSOA"),t(P,"class","component"),t(A,"class","component column svelte-1qs88ie"),t(A,"id","control-panel"),t(i,"id","map-row"),t(i,"class","row svelte-1qs88ie"),t(n,"class","page-container svelte-1qs88ie")},m(C,g){je(e,C,g),$(C,l,g),$(C,n,g),a(n,p),a(n,S),a(n,i),a(i,f),a(f,o),r[19](o),a(f,v),a(f,x),r[20](x),a(f,M),a(f,b),r[21](b),a(i,h),a(i,A),a(A,U),a(U,G),a(U,J),a(U,D),a(A,ae),a(A,P),a(P,O),a(P,z),a(P,w),a(P,y),a(P,B),a(P,K),a(P,j),a(A,ne),V&&V.m(A,null),r[22](n),Y=!0,W||(ee=[Z(b,"click",it),Z(G,"click",r[8]),Z(D,"click",r[8]),Z(O,"change",r[10]),Z(B,"change",r[10])],W=!0)},p(C,g){(!Y||g[0]&1)&&oe(G,"active",C[0]=="Cobenefit"),(!Y||g[0]&1)&&oe(D,"active",C[0]=="SEF"),te===(te=re(C))&&V?V.p(C,g):(V&&V.d(1),V=te&&te(C),V&&(V.c(),V.m(A,null)))},i(C){Y||(Ge(e.$$.fragment,C),Y=!0)},o(C){He(e.$$.fragment,C),Y=!1},d(C){C&&(m(l),m(n)),we(e,C),r[19](null),r[20](null),r[21](null),V&&V.d(),r[22](null),W=!1,ke(ee)}}}function it(){const e=document.getElementsByClassName("maplibregl-canvas")[0].toDataURL("image/png");var l=document.createElement("a");l.download="map.png",l.href=e,l.dataset.downloadurl=["image/png",l.download,l.href].join(":"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function rt(r,e,l){let{data:n}=e,p,_,S,i,f,o,s="Cobenefit",v=!1,x="BNZ",q=de.map(c=>c.id),M="total",b="LAD",L="EPC",h;function A(){if(o.makeColorScale(!1),s=="SEF"&&be.includes(L)){const c=Ye("white","black");let y=Object.values(Le[L]);const B=y.map((j,se)=>c(se/(y.length-1)));let K=Je().domain(y).range(B);o.setColorScale(K)}S=o.legend(U()),l(4,i.innerHTML="",i),i.append(S)}function U(){if(s=="SEF")return`${Ce.filter(c=>c.id==L)[0].label} (${et(L)})`;if(s=="Cobenefit")return"Cobenefits (£ per capita)"}Me(async()=>{let c;b=="LAD"?c=await ie(Ee(Array.from(q),"UK",M)):b=="LSOA"&&(c=await ie(ye(Array.from(q),x,M))),c.forEach(y=>{y.value_per_capita=y.value_per_capita*1e6}),l(12,o=new Ze(c,b,_,"value_per_capita",!0,"Lookup_Value",!0)),o.initMap(),o.setTooltipCb(ae),S=o.legend(U()),i.append(S)});const G=c=>{const y=c.currentTarget.value;y=="total"?l(15,q=de.map(B=>B.id)):l(15,q=[y])},le=c=>{const y=c.currentTarget.value;l(16,M=y)};function J(c,y){l(0,s=c.currentTarget.value)}const D=c=>{l(1,L=c.currentTarget.value)},Q=c=>{o.removeLayers(),o.removeSources(),l(17,b=c.currentTarget.value),l(12,o.granularity=b,o),b=="LSOA"?l(12,o.border=!1,o):l(12,o.border=!0,o),l(13,v=!0)},ae=c=>{if(s=="SEF")return be.includes(L)?`Mode value is ${Le[L][c]}`:`Mean value is ${c.toFixed(2)}`;if(s=="Cobenefit")return`£${c.toFixed(2)} per capita.`};function P(c){ce[c?"unshift":"push"](()=>{_=c,l(3,_)})}function O(c){ce[c?"unshift":"push"](()=>{i=c,l(4,i)})}function z(c){ce[c?"unshift":"push"](()=>{f=c,l(5,f)})}function w(c){ce[c?"unshift":"push"](()=>{p=c,l(2,p)})}return r.$$set=c=>{"data"in c&&l(11,n=c.data)},r.$$.update=()=>{if(r.$$.dirty[0]&520195&&o?.loaded){if(s=="Cobenefit"){if(l(12,o.dataKey="value_per_capita",o),b=="LAD")l(18,h=ie(Ee(Array.from(q),"UK",M)));else if(b=="LSOA"){let c;q.length==11?c=[]:c=q,l(18,h=ie(ye(c,x,M)))}}else l(0,s="SEF")&&(l(12,o.dataKey="val",o),b=="LAD"?be.includes(L)?l(18,h=ie(Qe(L))):l(18,h=ie(We(L))):b=="LSOA"&&l(18,h=ie(Xe(L))));h.then(c=>{s=="Cobenefit"&&c.forEach(B=>{B.value_per_capita=B.value_per_capita*1e6});let y;s=="Cobenefit"?q.length==1?(y=JSON.parse(JSON.stringify($e(q[0]))),y.shift(),y=y.reverse()):y=["red","white","black"]:y=["white","black"],o.update(c,s,v,y),A(),l(13,v=!1)})}},[s,L,p,_,i,f,G,le,J,D,Q,n,o,v,x,q,M,b,h,P,O,z,w]}class mt extends Pe{constructor(e){super(),Oe(this,e,rt,nt,Fe,{data:11},null,[-1,-1])}}export{mt as component};
