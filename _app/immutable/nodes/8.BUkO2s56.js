import{s as ls,d as cs,n as vr,r as us,o as ds,e as it}from"../chunks/scheduler.tir__IPy.js";import{S as fs,i as hs,e as y,s as L,b as X,c as b,d as V,m as R,h as D,f as G,g as A,n as g,j as se,k as c,p as ps,q as Ke,o as mr}from"../chunks/index.bU9Y8Vjw.js";import{e as Xe}from"../chunks/each.-gASlQSi.js";import{n as vs}from"../chunks/transform.Cz5Y6iUM.js";import{a8 as ms,av as Bn,aw as gs,ax as ys,C as tn,a9 as Sr,ay as en,b as ae,az as jn,M as Te,aA as bs,aB as _s,aC as Cs,c as Be,a as Ie,d as we,aD as ws,p as Ge,e as Wn,aE as xs,aF as gr,aG as yr,aH as Nr,aI as ks,ak as Fr,Y as xe,ah as sn,m as Or,ai as Ms,aj as Nn,aJ as Es,g as Ur,h as nn,aK as Ls,aL as Ds,K as As,$ as br,aM as zs,aN as Ts,aO as qr,aP as rn,aQ as jr,f as Bs,aR as Is,r as Wr,aS as Yr,x as Zr,aT as lt,aU as Vs,aV as Ps,aW as Rs,aX as Kr,aY as Hs,aZ as Ss,w as Xr,a_ as Gr,a$ as Ns,b0 as Qr,k as ze,l as Fs,n as Os,b1 as Us,i as rt,b2 as qs,b3 as js,j as In,s as Ht,q as _r,b4 as Cr}from"../chunks/index.k7kIJoxZ.js";import{M as Ws,g as Ys}from"../chunks/map.enz91-zQ.js";import{b as Fn,S as On,a as wr,M as st,T as Vn,V as Zs,A as ye,c as Ks,C as Xs,d as Qe}from"../chunks/globals.CkVBXOP0.js";import{t as Gs,A as Qs,f as Jr,m as Js,c as xr,s as $s,g as ta,e as St,h as ea,a as Je,d as Pn,b as kr}from"../chunks/bar.CJQCvPcf.js";const na=ra(sa);function ra(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:a,width:s,height:i}=e;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((i=Math.floor(i!==void 0?i:a.length/s))>=0))throw new RangeError("invalid height");if(!s||!i||!n&&!r)return e;const u=n&&t(n),d=r&&t(r),l=a.slice();return u&&d?(be(u,l,a,s,i),be(u,a,l,s,i),be(u,l,a,s,i),_e(d,a,l,s,i),_e(d,l,a,s,i),_e(d,a,l,s,i)):u?(be(u,a,l,s,i),be(u,l,a,s,i),be(u,a,l,s,i)):d&&(_e(d,a,l,s,i),_e(d,l,a,s,i),_e(d,a,l,s,i)),e}}function be(t,e,n,r,a){for(let s=0,i=r*a;s<i;)t(e,n,s,s+=r,1)}function _e(t,e,n,r,a){for(let s=0,i=r*a;s<r;++s)t(e,n,s,s+i,r)}function sa(t){const e=Math.floor(t);if(e===t)return aa(t);const n=t-e,r=2*t+1;return(a,s,i,u,d)=>{if(!((u-=d)>=i))return;let l=e*s[i];const o=d*e,v=o+d;for(let p=i,f=i+o;p<f;p+=d)l+=s[Math.min(u,p)];for(let p=i,f=u;p<=f;p+=d)l+=s[Math.min(u,p+o)],a[p]=(l+n*(s[Math.max(i,p-v)]+s[Math.min(u,p+v)]))/r,l-=s[Math.max(i,p-o)]}}function aa(t){const e=2*t+1;return(n,r,a,s,i)=>{if(!((s-=i)>=a))return;let u=t*r[a];const d=i*t;for(let l=a,o=a+d;l<o;l+=i)u+=r[Math.min(s,l)];for(let l=a,o=s;l<=o;l+=i)u+=r[Math.min(s,l+d)],n[l]=u/e,u-=r[Math.max(a,l-d)]}}function oa(t,e,n){let r;for(;;){const a=ms(t,e,n);if(a===r||a===0||!isFinite(a))return[t,e];a>0?(t=Math.floor(t/a)*a,e=Math.ceil(e/a)*a):a<0&&(t=Math.ceil(t*a)/a,e=Math.floor(e*a)/a),r=a}}function $r(t,e=Bn){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=Bn);const a=(u,d)=>e(n[u],n[d]);let s,i;return t=Uint32Array.from(n,(u,d)=>d),t.sort(e===Bn?(u,d)=>gs(n[u],n[d]):ys(a)),t.forEach((u,d)=>{const l=a(u,s===void 0?u:s);l>=0?((s===void 0||l>0)&&(s=u,i=d),r[u]=i):r[u]=NaN}),r}var ia=Array.prototype,ts=ia.slice;function la(t,e){return t-e}function ca(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}const Nt=t=>()=>t;function ua(t,e){for(var n=-1,r=e.length,a;++n<r;)if(a=da(t,e[n]))return a;return 0}function da(t,e){for(var n=e[0],r=e[1],a=-1,s=0,i=t.length,u=i-1;s<i;u=s++){var d=t[s],l=d[0],o=d[1],v=t[u],p=v[0],f=v[1];if(fa(d,v,e))return 0;o>r!=f>r&&n<(p-l)*(r-o)/(f-o)+l&&(a=-a)}return a}function fa(t,e,n){var r;return ha(t,e,n)&&pa(t[r=+(t[0]===e[0])],n[r],e[r])}function ha(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function pa(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function va(){}var wt=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Mr(){var t=1,e=1,n=Gs,r=d;function a(l){var o=n(l);if(Array.isArray(o))o=o.slice().sort(la);else{const v=tn(l,ma);for(o=Sr(...oa(v[0],v[1],o),o);o[o.length-1]>=v[1];)o.pop();for(;o[1]<v[0];)o.shift()}return o.map(v=>s(l,v))}function s(l,o){const v=o==null?NaN:+o;if(isNaN(v))throw new Error(`invalid value: ${o}`);var p=[],f=[];return i(l,v,function(w){r(w,l,v),ca(w)>0?p.push([w]):f.push(w)}),f.forEach(function(w){for(var M=0,k=p.length,_;M<k;++M)if(ua((_=p[M])[0],w)!==-1){_.push(w);return}}),{type:"MultiPolygon",value:o,coordinates:p}}function i(l,o,v){var p=new Array,f=new Array,w,M,k,_,h,x;for(w=M=-1,_=re(l[0],o),wt[_<<1].forEach(z);++w<t-1;)k=_,_=re(l[w+1],o),wt[k|_<<1].forEach(z);for(wt[_<<0].forEach(z);++M<e-1;){for(w=-1,_=re(l[M*t+t],o),h=re(l[M*t],o),wt[_<<1|h<<2].forEach(z);++w<t-1;)k=_,_=re(l[M*t+t+w+1],o),x=h,h=re(l[M*t+w+1],o),wt[k|_<<1|h<<2|x<<3].forEach(z);wt[_|h<<3].forEach(z)}for(w=-1,h=l[M*t]>=o,wt[h<<2].forEach(z);++w<t-1;)x=h,h=re(l[M*t+w+1],o),wt[h<<2|x<<3].forEach(z);wt[h<<3].forEach(z);function z(I){var C=[I[0][0]+w,I[0][1]+M],T=[I[1][0]+w,I[1][1]+M],U=u(C),O=u(T),E,H;(E=f[U])?(H=p[O])?(delete f[E.end],delete p[H.start],E===H?(E.ring.push(T),v(E.ring)):p[E.start]=f[H.end]={start:E.start,end:H.end,ring:E.ring.concat(H.ring)}):(delete f[E.end],E.ring.push(T),f[E.end=O]=E):(E=p[O])?(H=f[U])?(delete p[E.start],delete f[H.end],E===H?(E.ring.push(T),v(E.ring)):p[H.start]=f[E.end]={start:H.start,end:E.end,ring:H.ring.concat(E.ring)}):(delete p[E.start],E.ring.unshift(C),p[E.start=U]=E):p[U]=f[O]={start:U,end:O,ring:[C,T]}}}function u(l){return l[0]*2+l[1]*(t+1)*4}function d(l,o,v){l.forEach(function(p){var f=p[0],w=p[1],M=f|0,k=w|0,_=Rn(o[k*t+M]);f>0&&f<t&&M===f&&(p[0]=Er(f,Rn(o[k*t+M-1]),_,v)),w>0&&w<e&&k===w&&(p[1]=Er(w,Rn(o[(k-1)*t+M]),_,v))})}return a.contour=s,a.size=function(l){if(!arguments.length)return[t,e];var o=Math.floor(l[0]),v=Math.floor(l[1]);if(!(o>=0&&v>=0))throw new Error("invalid size");return t=o,e=v,a},a.thresholds=function(l){return arguments.length?(n=typeof l=="function"?l:Array.isArray(l)?Nt(ts.call(l)):Nt(l),a):n},a.smooth=function(l){return arguments.length?(r=l?d:va,a):r===d},a}function ma(t){return isFinite(t)?t:NaN}function re(t,e){return t==null?!1:+t>=e}function Rn(t){return t==null||isNaN(t=+t)?-1/0:t}function Er(t,e,n,r){const a=r-e,s=n-e,i=isFinite(a)||isFinite(s)?a/s:Math.sign(a)/Math.sign(s);return isNaN(i)?t:t+i-.5}function ga(t){return t[0]}function ya(t){return t[1]}function ba(){return 1}function _a(){var t=ga,e=ya,n=ba,r=960,a=500,s=20,i=2,u=s*3,d=r+u*2>>i,l=a+u*2>>i,o=Nt(20);function v(h){var x=new Float32Array(d*l),z=Math.pow(2,-i),I=-1;for(const P of h){var C=(t(P,++I,h)+u)*z,T=(e(P,I,h)+u)*z,U=+n(P,I,h);if(U&&C>=0&&C<d&&T>=0&&T<l){var O=Math.floor(C),E=Math.floor(T),H=C-O-.5,S=T-E-.5;x[O+E*d]+=(1-H)*(1-S)*U,x[O+1+E*d]+=H*(1-S)*U,x[O+1+(E+1)*d]+=H*S*U,x[O+(E+1)*d]+=(1-H)*S*U}}return na({data:x,width:d,height:l},s*z),x}function p(h){var x=v(h),z=o(x),I=Math.pow(2,2*i);return Array.isArray(z)||(z=Sr(Number.MIN_VALUE,en(x)/I,z)),Mr().size([d,l]).thresholds(z.map(C=>C*I))(x).map((C,T)=>(C.value=+z[T],f(C)))}p.contours=function(h){var x=v(h),z=Mr().size([d,l]),I=Math.pow(2,2*i),C=T=>{T=+T;var U=f(z.contour(x,T*I));return U.value=T,U};return Object.defineProperty(C,"max",{get:()=>en(x)/I}),C};function f(h){return h.coordinates.forEach(w),h}function w(h){h.forEach(M)}function M(h){h.forEach(k)}function k(h){h[0]=h[0]*Math.pow(2,i)-u,h[1]=h[1]*Math.pow(2,i)-u}function _(){return u=s*3,d=r+u*2>>i,l=a+u*2>>i,p}return p.x=function(h){return arguments.length?(t=typeof h=="function"?h:Nt(+h),p):t},p.y=function(h){return arguments.length?(e=typeof h=="function"?h:Nt(+h),p):e},p.weight=function(h){return arguments.length?(n=typeof h=="function"?h:Nt(+h),p):n},p.size=function(h){if(!arguments.length)return[r,a];var x=+h[0],z=+h[1];if(!(x>=0&&z>=0))throw new Error("invalid size");return r=x,a=z,_()},p.cellSize=function(h){if(!arguments.length)return 1<<i;if(!((h=+h)>=1))throw new Error("invalid cell size");return i=Math.floor(Math.log(h)/Math.LN2),_()},p.thresholds=function(h){return arguments.length?(o=typeof h=="function"?h:Array.isArray(h)?Nt(ts.call(h)):Nt(h),p):o},p.bandwidth=function(h){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((h=+h)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*h*h+1)-1)/2,_()},p}const Ca={ariaLabel:"cell"};class wa extends Qs{constructor(e,{x:n,y:r,...a}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},a,Ca)}_transform(e,n){e.call(ae,n,{},0,0)}}function $e(t,{x:e,y:n,...r}={}){return[e,n]=jn(e,n),new wa(t,{...r,x:e,y:n})}const xa={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function ka(t){return t.sort===void 0&&t.reverse===void 0?xs({channel:"-r"},t):t}class Ma extends Te{constructor(e,n={}){const{x:r,y:a,r:s,rotate:i,symbol:u=gr,frameAnchor:d}=n,[l,o]=yr(i,0),[v,p]=bs(u),[f,w]=yr(s,v==null?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:a,scale:"y",optional:!0},r:{value:f,scale:"r",filter:_s,optional:!0},rotate:{value:l,optional:!0},symbol:{value:v,scale:"auto",optional:!0}},ka(n),xa),this.r=w,this.rotate=o,this.symbol=p,this.frameAnchor=Cs(d);const{channels:M}=this,{symbol:k}=M;if(k){const{fill:_,stroke:h}=M;k.hint={fill:_?_.value===k.value?"color":"currentColor":this.fill??"currentColor",stroke:h?h.value===k.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,r,a,s){const{x:i,y:u}=n,{x:d,y:l,r:o,rotate:v,symbol:p}=r,{r:f,rotate:w,symbol:M}=this,[k,_]=Nr(this,a),h=M===gr,x=o?void 0:f*f*Math.PI;return ks(f)&&(e=[]),Be("svg:g",s).call(Ie,this,a,s).call(ae,this,{x:d&&i,y:l&&u}).call(z=>z.selectAll().data(e).enter().append(h?"circle":"path").call(we,this).call(h?I=>{I.attr("cx",d?C=>d[C]:k).attr("cy",l?C=>l[C]:_).attr("r",o?C=>o[C]:f)}:I=>{I.attr("transform",ws`translate(${d?C=>d[C]:k},${l?C=>l[C]:_})${v?C=>` rotate(${v[C]})`:w?` rotate(${w})`:""}`).attr("d",o&&p?C=>{const T=Ge();return p[C].draw(T,o[C]*o[C]*Math.PI),T}:o?C=>{const T=Ge();return M.draw(T,o[C]*o[C]*Math.PI),T}:p?C=>{const T=Ge();return p[C].draw(T,x),T}:(()=>{const C=Ge();return M.draw(C,x),C})())}).call(Wn,this,r)).node()}}function es(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=jn(e,n)),new Ma(t,{...r,x:e,y:n})}const Ea={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class La extends Te{constructor(e,n={}){const{x:r,y:a,z:s,curve:i,tension:u}=n;super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y"},z:{value:sn(n),optional:!0}},n,Ea),this.z=s,this.curve=Js(i,u),Or(this,n)}filter(e){return e}project(e,n,r){this.curve!==xr&&super.project(e,n,r)}render(e,n,r,a,s){const{x:i,y:u}=r,{curve:d}=this;return Be("svg:g",s).call(Ie,this,a,s).call(ae,this,n).call(l=>l.selectAll().data(Ms(e,[i,u],this,r)).enter().append("path").call(we,this).call(Nn,this,r).call(Es,this,r,s).attr("d",d===xr&&s.projection?Da(s.projection,i,u):$s().curve(d).defined(o=>o>=0).x(o=>i[o]).y(o=>u[o]))).node()}}function Da(t,e,n){const r=Ur(t);return e=nn(e),n=nn(n),a=>{let s=[];const i=[s];for(const u of a)u===-1?(s=[],i.push(s)):s.push([e[u],n[u]]);return r({type:"MultiLineString",coordinates:i})}}function Aa(t,{x:e=Fr,y:n=xe,...r}={}){return new La(t,Jr({...r,x:e,y:n}))}function za(t,e={}){let{y:n,y1:r,y2:a}=e;n===void 0&&r===void 0&&a===void 0&&(e={...e,y:n=xe});const s={};return n!=null&&(s.y=t),r!=null&&(s.y1=t),a!=null&&(s.y2=t),ns(s,e)}function ns(t={},e={}){const n=sn(e),r=Object.entries(t).map(([a,s])=>{const i=Ls(a,e);if(i==null)throw new Error(`missing channel: ${a}`);const[u,d]=Ds(i);return{key:a,input:i,output:u,setOutput:d,map:Ta(s)}});return{...As(e,(a,s)=>{const i=br(a,n),u=r.map(({input:l})=>br(a,l)),d=r.map(({setOutput:l})=>l(new Array(a.length)));for(const l of s)for(const o of i?zs(l,v=>i[v]).values():[l])r.forEach(({map:v},p)=>v.mapIndex(o,u[p],d[p]));return{data:a,facets:s}}),...Object.fromEntries(r.map(({key:a,output:s})=>[a,s]))}}function Ta(t){if(t==null)throw new Error("missing map");if(typeof t.mapIndex=="function")return t;if(typeof t.map=="function"&&Ts(t))return Ba(t);if(typeof t=="function")return Hn(qr(t));switch(`${t}`.toLowerCase()){case"cumsum":return Va;case"rank":return Hn((e,n)=>$r(e,r=>n[r]));case"quantile":return Hn((e,n)=>Ia(e,r=>n[r]))}throw new Error(`invalid map: ${t}`)}function Ba(t){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:t.map.bind(t)}}function Ia(t,e){const n=ta(t,e)-1;return $r(t,e).map(r=>r/n)}function Hn(t){return{mapIndex(e,n,r){const a=t(e,n);if(a.length!==e.length)throw new Error("map function returned a mismatched length");for(let s=0,i=e.length;s<i;++s)r[e[s]]=a[s]}}}const Va={mapIndex(t,e,n){let r=0;for(const a of t)n[a]=r+=e[a]}},Pa={ariaLabel:"tick",fill:null,stroke:"currentColor"};class rs extends Te{constructor(e,n,r){super(e,n,r,Pa),Or(this,r)}render(e,n,r,a,s){return Be("svg:g",s).call(Ie,this,a,s).call(this._transform,this,n).call(i=>i.selectAll().data(e).enter().append("line").call(we,this).attr("x1",this._x1(n,r,a)).attr("x2",this._x2(n,r,a)).attr("y1",this._y1(n,r,a)).attr("y2",this._y2(n,r,a)).call(Wn,this,r).call(Bs,this,r,s)).node()}}class Ra extends rs{constructor(e,n={}){const{x:r,y:a,inset:s=0,insetTop:i=s,insetBottom:u=s}=n;super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y",type:"band",optional:!0}},n),this.insetTop=rn(i),this.insetBottom=rn(u)}_transform(e,n,{x:r}){e.call(ae,n,{x:r},jr,0)}_x1(e,{x:n}){return r=>n[r]}_x2(e,{x:n}){return r=>n[r]}_y1({y:e},{y:n},{marginTop:r}){const{insetTop:a}=this;return n&&e?s=>n[s]+a:r+a}_y2({y:e},{y:n},{height:r,marginBottom:a}){const{insetBottom:s}=this;return n&&e?i=>n[i]+e.bandwidth()-s:r-a-s}}class Ha extends rs{constructor(e,n={}){const{x:r,y:a,inset:s=0,insetRight:i=s,insetLeft:u=s}=n;super(e,{y:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=rn(i),this.insetLeft=rn(u)}_transform(e,n,{y:r}){e.call(ae,n,{y:r},0,jr)}_x1({x:e},{x:n},{marginLeft:r}){const{insetLeft:a}=this;return n&&e?s=>n[s]+a:r+a}_x2({x:e},{x:n},{width:r,marginRight:a}){const{insetRight:s}=this;return n&&e?i=>n[i]+e.bandwidth()-s:r-a-s}_y1(e,{y:n}){return r=>n[r]}_y2(e,{y:n}){return r=>n[r]}}function Sn(t,{x:e=xe,...n}={}){return new Ra(t,{...n,x:e})}function Un(t,{y:e=xe,...n}={}){return new Ha(t,{...n,y:e})}function Sa(t,{y:e=xe,x:n=null,r,fill:a="#ccc",fillOpacity:s,stroke:i="currentColor",strokeOpacity:u,strokeWidth:d=2,sort:l,...o}={}){const v=n!=null?lt:Vs;return Is(Wr(t,v({y1:ss,y2:as},{x:n,y:e,stroke:i,strokeOpacity:u,...o})),St(t,v({y1:"p25",y2:"p75"},{x:n,y:e,fill:a,fillOpacity:s,...o})),Un(t,v({y:"p50"},{x:n,y:e,stroke:i,strokeOpacity:u,strokeWidth:d,sort:l,...o})),es(t,ns({y:Na},{x:n,y:e,z:n,r,stroke:i,strokeOpacity:u,...o})))}function Na(t){const e=ss(t),n=as(t);return t.map(r=>r<e||r>n?r:NaN)}function ss(t){const e=os(t)*2.5-is(t)*1.5;return Yr(t,n=>n>=e?n:NaN)}function as(t){const e=is(t)*2.5-os(t)*1.5;return en(t,n=>n<=e?n:NaN)}function os(t){return Zr(t,.25)}function is(t){return Zr(t,.75)}const Fa={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Oa extends Te{constructor(e,{x:n,y:r,z:a,weight:s,fill:i,stroke:u,...d}={}){const l=Lr(i)&&(i="currentColor",!0),o=Lr(u)&&(u="currentColor",!0);super(e,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:sn({z:a,fill:i,stroke:u}),optional:!0},weight:{value:s,optional:!0}},ja({...d,fill:i,stroke:u},l,o),Fa),l&&(this.fill=void 0),o&&(this.stroke=void 0),this.z=a}filter(e){return e}render(e,n,r,a,s){const{contours:i}=r,u=Ur();return Be("svg:g",s).call(Ie,this,a,s).call(ae,this,{}).call(d=>d.selectAll().data(e).enter().append("path").call(we,this).call(Wn,this,r).attr("d",l=>u(i[l]))).node()}}function Ua(t,{x:e,y:n,...r}={}){return[e,n]=jn(e,n),new Oa(t,{...r,x:e,y:n})}const qa=new Set(["x","y","z","weight"]);function ja(t,e,n){let{bandwidth:a,thresholds:s}=t;return a=a===void 0?20:+a,s=s===void 0?20:typeof s?.[Symbol.iterator]=="function"?nn(s):+s,Ps(t,function(i,u,d,l,o,v){const p=d.weight?nn(d.weight.value):null,f=d.z?.value,{z:w}=this,[M,k]=Nr(this,o),{width:_,height:h}=o,{x,y:z}=Rs(d,l,v),I=Object.fromEntries(Object.entries(d).filter(([P])=>!qa.has(P)).map(([P,Z])=>[P,{...Z,value:[]}])),C=e&&[],T=n&&[],U=_a().x(x?P=>x[P]:M).y(z?P=>z[P]:k).weight(p?P=>p[P]:1).size([_,h]).bandwidth(a),O=[];for(const P of u){const Z=[];O.push(Z);for(const j of f?Kr(P,f,w):[P]){const tt=U.contours(j);Z.push([j,tt])}}let E=s;if(!(E instanceof Hs)){let P=0;for(const Z of O)for(const[,j]of Z){const tt=j.max;tt>P&&(P=tt)}E=Float64Array.from({length:s-1},(Z,j)=>P*100*(j+1)/s)}const H=[],S=[];for(const P of O){const Z=[];H.push(Z);for(const[j,tt]of P)for(const ct of E){Z.push(S.length),S.push(tt(ct/100)),C&&C.push(ct),T&&T.push(ct);for(const Y in I)I[Y].value.push(d[Y].value[j[0]])}}return C&&C.push(0),T&&T.push(0),{data:i,facets:H,channels:{...I,...C&&{fill:{value:C,scale:"color"}},...T&&{stroke:{value:T,scale:"color"}},contours:{value:S}}}})}function Lr(t){return/^density$/i.test(t)}function Wa(t,e,n){var r=1e-8,a=e-1,s=n-1,i=0,u,d,l,o,v,p,f,w,M,k,_;if(t<=0)return 0;if(t>=1)return 1;for(e>=1&&n>=1?(l=t<.5?t:1-t,o=Math.sqrt(-2*Math.log(l)),f=(2.30753+o*.27061)/(1+o*(.99229+o*.04481))-o,t<.5&&(f=-f),w=(f*f-3)/6,M=2/(1/(2*e-1)+1/(2*n-1)),k=f*Math.sqrt(w+M)/M-(1/(2*n-1)-1/(2*e-1))*(w+5/6-2/(3*M)),f=e/(e+n*Math.exp(2*k))):(u=Math.log(e/(e+n)),d=Math.log(n/(e+n)),o=Math.exp(e*u)/e,v=Math.exp(n*d)/n,k=o+v,t<o/k?f=Math.pow(e*k*t,1/e):f=1-Math.pow(n*k*(1-t),1/n)),_=-Ce(e)-Ce(n)+Ce(e+n);i<10;i++){if(f===0||f===1)return f;if(p=Ya(f,e,n)-t,o=Math.exp(a*Math.log(f)+s*Math.log(1-f)+_),v=p/o,f-=o=v/(1-.5*Math.min(1,v*(a/f-s/(1-f)))),f<=0&&(f=.5*(f+o)),f>=1&&(f=.5*(f+o+1)),Math.abs(o)<r*f&&i>0)break}return f}function Ya(t,e,n){var r=t===0||t===1?0:Math.exp(Ce(e+n)-Ce(e)-Ce(n)+e*Math.log(t)+n*Math.log(1-t));return t<0||t>1?!1:t<(e+1)/(e+n+2)?r*Dr(t,e,n)/e:1-r*Dr(1-t,n,e)/n}function Dr(t,e,n){var r=1e-30,a=1,s=e+n,i=e+1,u=e-1,d=1,l=1-s*t/i,o,v,p,f;for(Math.abs(l)<r&&(l=r),l=1/l,f=l;a<=100&&(o=2*a,v=a*(n-a)*t/((u+o)*(e+o)),l=1+v*l,Math.abs(l)<r&&(l=r),d=1+v/d,Math.abs(d)<r&&(d=r),l=1/l,f*=l*d,v=-(e+a)*(s+a)*t/((e+o)*(i+o)),l=1+v*l,Math.abs(l)<r&&(l=r),d=1+v/d,Math.abs(d)<r&&(d=r),l=1/l,p=l*d,f*=p,!(Math.abs(p-1)<3e-7));a++);return f}function Ce(t){var e=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,a,s,i;for(i=(s=a=t)+5.5,i-=(a+.5)*Math.log(i);e<6;e++)r+=n[e]/++s;return Math.log(2.506628274631*r/a)-i}function Za(t,e){var n=Wa(2*Math.min(t,1-t),.5*e,.5);return n=Math.sqrt(e*(1-n)/n),t>.5?n:-n}const Ka={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Xa extends Te{constructor(e,n={}){const{x:r,y:a,z:s,ci:i=.95,precision:u=4}=n;if(super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y"},z:{value:sn(n),optional:!0}},n,Ka),this.z=s,this.ci=+i,this.precision=+u,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${i}`);if(!(this.precision>0))throw new Error(`invalid precision: ${u}`)}render(e,n,r,a,s){const{x:i,y:u,z:d}=r,{ci:l}=this;return Be("svg:g",s).call(Ie,this,a,s).call(ae,this,n).call(o=>o.selectAll().data(d?Kr(e,d,this.z):[e]).enter().call(v=>v.append("path").attr("fill","none").call(we,this).call(Nn,this,{...r,fill:null,fillOpacity:null}).attr("d",p=>this._renderLine(p,i,u)).call(l&&!Ns(this.fill)?p=>p.select(Ga).attr("stroke","none").call(we,this).call(Nn,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",f=>this._renderBand(f,i,u)):()=>{}))).node()}}function Ga(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(vs.svg,"path"),this)}class Qa extends Xa{constructor(e,n){super(e,n)}_renderBand(e,n,r){const{ci:a,precision:s}=this,[i,u]=tn(e,o=>n[o]),d=Ar(e,n,r),l=$a(e,n,r,(1-a)/2,d);return ea().x(o=>o).y0(o=>l(o,-1)).y1(o=>l(o,1))(Xr(i,u-s/2,s).concat(u))}_renderLine(e,n,r){const[a,s]=tn(e,u=>n[u]),i=Ar(e,n,r);return`M${a},${i(a)}L${s},${i(s)}`}}function Ja(t,{x:e=Fr,y:n=xe,stroke:r,fill:a=Ss(r)?"currentColor":r,...s}={}){return new Qa(t,Jr({...s,x:e,y:n,fill:a,stroke:r}))}function Ar(t,e,n){let r=0,a=0,s=0,i=0;for(const o of t){const v=e[o],p=n[o];r+=v,a+=p,s+=v*p,i+=v*v}const u=t.length,d=(u*s-r*a)/(u*i-r*r),l=(a-d*r)/u;return o=>d*o+l}function $a(t,e,n,r,a){const s=Gr(t,o=>e[o])/t.length;let i=0,u=0;for(const o of t)i+=(e[o]-s)**2,u+=(n[o]-a(e[o]))**2;const d=Math.sqrt(u/(t.length-2)),l=Za(r,t.length-2);return(o,v)=>{const p=a(o),f=d*Math.sqrt(1/t.length+(o-s)**2/i);return p+v*l*f}}function zr(t,e){return arguments.length===1&&({basis:t,...e}=t),za(to(t),e)}function to(t){if(t===void 0)return Tr;if(typeof t=="function")return an(qr(t));if(/^p\d{2}$/i.test(t))return ke(Us(t));switch(`${t}`.toLowerCase()){case"deviation":return ro;case"first":return Tr;case"last":return no;case"max":return so;case"mean":return ao;case"median":return oo;case"min":return io;case"sum":return lo;case"extent":return eo}throw new Error(`invalid basis: ${t}`)}function an(t){return{mapIndex(e,n,r){const a=+t(e,n);for(const s of e)r[s]=n[s]===null?NaN:n[s]/a}}}function ke(t){return an((e,n)=>t(e,r=>n[r]))}const eo={mapIndex(t,e,n){const[r,a]=tn(t,i=>e[i]),s=a-r;for(const i of t)n[i]=e[i]===null?NaN:(e[i]-r)/s}},Tr=an((t,e)=>{for(let n=0;n<t.length;++n){const r=e[t[n]];if(Qr(r))return r}}),no=an((t,e)=>{for(let n=t.length-1;n>=0;--n){const r=e[t[n]];if(Qr(r))return r}}),ro={mapIndex(t,e,n){const r=ze(t,s=>e[s]),a=Fs(t,s=>e[s]);for(const s of t)n[s]=e[s]===null?NaN:a?(e[s]-r)/a:0}},so=ke(en),ao=ke(ze),oo=ke(Os),io=ke(Yr),lo=ke(Gr),co=""+new URL("../assets/Truncatedaxis.B0X-Oi6z.png",import.meta.url).href,uo=""+new URL("../assets/(Can) contain overlapping visual marks.COyQpe2-.png",import.meta.url).href,fo=""+new URL("../assets/Mouse Over.CFjZId9Z.png",import.meta.url).href,ho=""+new URL("../assets/Rounding.B9aYSzLs.png",import.meta.url).href,qn=""+new URL("../assets/Aggregated data.DKno-3YF.png",import.meta.url).href,po=""+new URL("../assets/Zoom.98CF1xXK.png",import.meta.url).href,vo=""+new URL("../assets/Data normalized.CL6tJ0W5.png",import.meta.url).href,Br=""+new URL("../assets/Contains predictions.CIVvrZlR.png",import.meta.url).href,mo=""+new URL("../assets/Contains Multiple Data Sources Full.DD8dTume.png",import.meta.url).href,Ir=""+new URL("../assets/Contains modeled data.DkmqjOEl.png",import.meta.url).href,go=""+new URL("../assets/Binning applied.B1wzFhkQ.png",import.meta.url).href;function Vr(t,e,n){const r=t.slice();return r[48]=e[n],r[49]=e,r[50]=n,r}function Pr(t,e,n){const r=t.slice();return r[51]=e[n],r[52]=e,r[53]=n,r}function Rr(t){let e,n,r,a,s,i,u,d,l,o,v,p=`<div class="badge-container"><img class="badge" src="${ho}"/> <img class="badge" src="${qn}"/></div>`,f=t[51],w;const M=()=>t[24](v,f),k=()=>t[24](null,f);return{c(){e=y("div"),n=y("h3"),r=X("Pathway: "),a=X(t[51]),s=L(),i=y("p"),u=X("Please refer to CCC website on definitions of "),d=X(t[51]),l=X("."),o=L(),v=y("div"),v.innerHTML=p,w=L(),this.h()},l(_){e=b(_,"DIV",{class:!0});var h=V(e);n=b(h,"H3",{class:!0});var x=V(n);r=G(x,"Pathway: "),a=G(x,t[51]),x.forEach(A),s=D(h),i=b(h,"P",{class:!0});var z=V(i);u=G(z,"Please refer to CCC website on definitions of "),d=G(z,t[51]),l=G(z,"."),z.forEach(A),o=D(h),v=b(h,"DIV",{class:!0,"data-svelte-h":!0}),R(v)!=="svelte-etsx2f"&&(v.innerHTML=p),w=D(h),h.forEach(A),this.h()},h(){g(n,"class","component-title"),g(i,"class","description"),g(v,"class","plot"),g(e,"class","component")},m(_,h){se(_,e,h),c(e,n),c(n,r),c(n,a),c(e,s),c(e,i),c(i,u),c(i,d),c(i,l),c(e,o),c(e,v),M(),c(e,w)},p(_,h){t=_,f!==t[51]&&(k(),f=t[51],M())},d(_){_&&A(e),k()}}}function yo(t){let e,n,r="Data Zones Distribution (vs. UK average)",a,s,i="Histogram shows the number of data zones distributed across different household social economic factors.",u,d,l=`<div class="badge-container"><img class="badge" src="${vo}"/> <img class="badge" src="${Ir}"/> <img class="badge" src="${go}"/></div>`,o=t[48],v,p,f,w,M,k,_,h,x,z="Density plot refers to UK distribution while the scattered points refer to data zones in the local authority.",I,C,T="",U,O,E,H=`<div class="badge-container"><img class="badge" src="${uo}"/> <img class="badge" src="${mo}"/> <img class="badge" src="${Ir}"/></div>`;const S=()=>t[30](d,o),P=()=>t[30](null,o),Z=()=>t[31](C,o),j=()=>t[31](null,o),tt=()=>t[32](E,o),ct=()=>t[32](null,o);return{c(){e=y("div"),n=y("h3"),n.textContent=r,a=L(),s=y("p"),s.textContent=i,u=L(),d=y("div"),d.innerHTML=l,v=L(),p=y("div"),f=y("div"),w=y("h3"),M=X("Co-benefits Recieved by Data Zones across "),k=X(t[48]),_=X(" Values"),h=L(),x=y("p"),x.textContent=z,I=L(),C=y("div"),C.innerHTML=T,U=L(),O=y("div"),E=y("div"),E.innerHTML=H,this.h()},l(Y){e=b(Y,"DIV",{class:!0});var W=V(e);n=b(W,"H3",{class:!0,"data-svelte-h":!0}),R(n)!=="svelte-1d86f13"&&(n.textContent=r),a=D(W),s=b(W,"P",{class:!0,"data-svelte-h":!0}),R(s)!=="svelte-vl6og1"&&(s.textContent=i),u=D(W),d=b(W,"DIV",{class:!0,"data-svelte-h":!0}),R(d)!=="svelte-1obds0n"&&(d.innerHTML=l),W.forEach(A),v=D(Y),p=b(Y,"DIV",{class:!0});var ft=V(p);f=b(ft,"DIV",{});var $=V(f);w=b($,"H3",{class:!0});var gt=V(w);M=G(gt,"Co-benefits Recieved by Data Zones across "),k=G(gt,t[48]),_=G(gt," Values"),gt.forEach(A),h=D($),x=b($,"P",{class:!0,"data-svelte-h":!0}),R(x)!=="svelte-mjnso4"&&(x.textContent=z),I=D($),C=b($,"DIV",{class:!0,"data-svelte-h":!0}),R(C)!=="svelte-1kzougf"&&(C.innerHTML=T),$.forEach(A),U=D(ft),O=b(ft,"DIV",{});var kt=V(O);E=b(kt,"DIV",{class:!0,"data-svelte-h":!0}),R(E)!=="svelte-1piy8ha"&&(E.innerHTML=H),kt.forEach(A),ft.forEach(A),this.h()},h(){g(n,"class","component-title"),g(s,"class","description short"),g(d,"class","plot"),g(e,"class","component"),g(w,"class","component-title"),g(x,"class","description short"),g(C,"class","plot"),g(E,"class","plot"),g(p,"class","component")},m(Y,W){se(Y,e,W),c(e,n),c(e,a),c(e,s),c(e,u),c(e,d),S(),se(Y,v,W),se(Y,p,W),c(p,f),c(f,w),c(w,M),c(w,k),c(w,_),c(f,h),c(f,x),c(f,I),c(f,C),Z(),c(p,U),c(p,O),c(O,E),tt()},p(Y,W){t=Y,o!==t[48]&&(P(),o=t[48],S()),o!==t[48]&&(j(),o=t[48],Z()),o!==t[48]&&(ct(),o=t[48],tt())},d(Y){Y&&(A(e),A(v),A(p)),P(),j(),ct()}}}function bo(t){let e,n,r="",a=t[48];const s=()=>t[29](n,a),i=()=>t[29](null,a);return{c(){e=y("div"),n=y("div"),n.innerHTML=r,this.h()},l(u){e=b(u,"DIV",{class:!0});var d=V(e);n=b(d,"DIV",{class:!0,"data-svelte-h":!0}),R(n)!=="svelte-1shkadq"&&(n.innerHTML=r),d.forEach(A),this.h()},h(){g(n,"class","plot"),g(e,"class","component")},m(u,d){se(u,e,d),c(e,n),s()},p(u,d){t=u,a!==t[48]&&(i(),a=t[48],s())},d(u){u&&A(e),i()}}}function Hr(t){let e,n,r,a,s,i;function u(o,v){return o[11]?bo:yo}let d=u(t),l=d(t);return{c(){e=y("div"),n=y("h2"),r=X(t[48]),a=L(),s=y("div"),l.c(),i=L(),this.h()},l(o){e=b(o,"DIV",{});var v=V(e);n=b(v,"H2",{});var p=V(n);r=G(p,t[48]),p.forEach(A),a=D(v),s=b(v,"DIV",{class:!0});var f=V(s);l.l(f),f.forEach(A),i=D(v),v.forEach(A),this.h()},h(){g(s,"class","row")},m(o,v){se(o,e,v),c(e,n),c(n,r),c(e,a),c(e,s),l.m(s,null),c(e,i)},p(o,v){d===(d=u(o))&&l?l.p(o,v):(l.d(1),l=d(o),l&&(l.c(),l.m(s,null)))},d(o){o&&A(e),l.d()}}}function _o(t){let e,n,r,a="Data Report",s,i,u=t[15][t[14]]+"",d,l,o,v="Explore how this local authority will benefit from achieving Net Zero and general factors of their households.",p,f,w,M='<p class="section-subtitle">Overview</p> <h2 class="section-title">How much co-benefit values would this area recieve?</h2> <p class="description">We calculate and model 11 types of co-benefits across five different pathyways suggested by Climate Change Committee in the Sixth Carbon Budget from 2025-2050 on the level of data zones across UK.</p>',k,_,h,x,z="Total Co-benefits Values Across Five Pathways (vs. UK Average)",I,C,T,U=t[15][t[14]]+"",O,E,H,S,P,Z,j,tt="Barchart",ct,Y,W,ft,$,gt="Boxplot",kt,Me,yt,Ee,bt,Ve="Distribution",Le,ht,Pe=`<div class="badge-container"><img class="badge" src="${fo}"/> <img class="badge" src="${qn}"/></div>`,Re,De,m,F,Ft="11 Types of Co-Benefits Values (vs. UK Average)",Ot,q,Ae,He=t[15][t[14]]+"",at,ot,oe,pt,on=`<div class="badge-container"><img class="badge" src="${qn}"/></div>`,Se,ut,Ut,Yn=t[15][t[14]]+"",ln,cn,un,qt,Zn="Scroll for zooming in and out.",dn,_t,Kn=`<div class="badge-container"><img class="badge" src="${po}"/></div>`,fn,Mt,jt,Xn='<p class="section-subtitle">Breakdown</p> <h2 class="section-title">How would the co-benefit results vary if we take different pathways?</h2> <p class="description">We break down the modeled co-benefit values in different pathways towards achieving Net Zero. All Results are compared with the average value across all local authorities in UK.</p>',hn,Ct,vt,Wt,Gn="Five Pathways and their 11 Co-benefits",pn,Yt,Qn="Scroll for zooming in and out.",vn,ie,mn,gn,dt,Zt,Jn='<p class="section-subtitle">Temporal Trends</p> <h2 class="section-title">How co-benefits change over time?</h2> <p class="description">Detailed breakdown of temporal trends for total co-benefits, types of co-benefits, and five pathways.</p>',yn,Et,Kt,$n="Total Co-benefits Distribution from 2025-2050 (vs. UK Average)",bn,le,Lt,tr=`<div class="badge-container"><img class="badge" src="${Br}"/></div>`,_n,Dt,Xt,er="11 Types of Co-benefits Distribution Following Balance Pathway from 2025-2050",Cn,ce,ue,At,nr=`<div class="badge-container"><img class="badge" src="${Br}"/></div>`,wn,zt,Gt,rr="Total Co-benefits Distribution Across Five Scenarios from 2025-2050",xn,de,Tt,sr=`<div class="badge-container"><img class="badge" src="${co}"/></div>`,kn,Bt,et,Qt,ar="Households",Mn,Jt,or="Social Economic Factors of Households",En,$t,ir="We describe the distribution of household economic factors aggregated on the data zone level and the different level of co-benefits recieved by those data zones.",Ln,te,Dn,ee,lr="Aggregate Plots",An,It,zn,cr,fe=Xe(Fn),Q=[];for(let N=0;N<fe.length;N+=1)Q[N]=Rr(Pr(t,fe,N));let he=Xe(On),J=[];for(let N=0;N<he.length;N+=1)J[N]=Hr(Vr(t,he,N));return{c(){e=y("div"),n=y("div"),r=y("p"),r.textContent=a,s=L(),i=y("h1"),d=X(u),l=L(),o=y("p"),o.textContent=v,p=L(),f=y("div"),w=y("div"),w.innerHTML=M,k=L(),_=y("div"),h=y("div"),x=y("h3"),x.textContent=z,I=L(),C=y("p"),T=X("Aggregated values from 2025-2050 in "),O=X(U),E=X(" verus average value of benefits recieved across all local authorities in UK."),H=L(),S=y("div"),P=y("input"),Z=L(),j=y("label"),j.textContent=tt,ct=y("br"),Y=L(),W=y("input"),ft=L(),$=y("label"),$.textContent=gt,kt=y("br"),Me=L(),yt=y("input"),Ee=L(),bt=y("label"),bt.textContent=Ve,Le=L(),ht=y("div"),ht.innerHTML=Pe,De=L(),m=y("div"),F=y("h3"),F.textContent=Ft,Ot=L(),q=y("p"),Ae=X("Co-benefits values in "),at=X(He),ot=X(" verus average value across all local authorities in UK."),oe=L(),pt=y("div"),pt.innerHTML=on,Se=L(),ut=y("div"),Ut=y("h3"),ln=X(Yn),cn=X(" on UK Map"),un=L(),qt=y("p"),qt.textContent=Zn,dn=L(),_t=y("div"),_t.innerHTML=Kn,fn=L(),Mt=y("div"),jt=y("div"),jt.innerHTML=Xn,hn=L(),Ct=y("div"),vt=y("div"),Wt=y("h3"),Wt.textContent=Gn,pn=L(),Yt=y("p"),Yt.textContent=Qn,vn=L(),ie=y("div"),mn=L();for(let N=0;N<Q.length;N+=1)Q[N].c();gn=L(),dt=y("div"),Zt=y("div"),Zt.innerHTML=Jn,yn=L(),Et=y("div"),Kt=y("h3"),Kt.textContent=$n,bn=L(),le=y("div"),Lt=y("div"),Lt.innerHTML=tr,_n=L(),Dt=y("div"),Xt=y("h3"),Xt.textContent=er,Cn=L(),ce=y("div"),ue=y("div"),At=y("div"),At.innerHTML=nr,wn=L(),zt=y("div"),Gt=y("h3"),Gt.textContent=rr,xn=L(),de=y("div"),Tt=y("div"),Tt.innerHTML=sr,kn=L(),Bt=y("div"),et=y("div"),Qt=y("p"),Qt.textContent=ar,Mn=L(),Jt=y("h2"),Jt.textContent=or,En=L(),$t=y("p"),$t.textContent=ir,Ln=L(),te=y("input"),Dn=L(),ee=y("label"),ee.textContent=lr,An=L(),It=y("div");for(let N=0;N<J.length;N+=1)J[N].c();this.h()},l(N){e=b(N,"DIV",{class:!0});var K=V(e);n=b(K,"DIV",{class:!0});var B=V(n);r=b(B,"P",{class:!0,"data-svelte-h":!0}),R(r)!=="svelte-1gxb8h1"&&(r.textContent=a),s=D(B),i=b(B,"H1",{class:!0});var Vt=V(i);d=G(Vt,u),Vt.forEach(A),l=D(B),o=b(B,"P",{class:!0,"data-svelte-h":!0}),R(o)!=="svelte-5qj0r2"&&(o.textContent=v),B.forEach(A),p=D(K),f=b(K,"DIV",{class:!0});var Ne=V(f);w=b(Ne,"DIV",{class:!0,"data-svelte-h":!0}),R(w)!=="svelte-42ok6n"&&(w.innerHTML=M),k=D(Ne),_=b(Ne,"DIV",{id:!0,class:!0});var pe=V(_);h=b(pe,"DIV",{class:!0});var Pt=V(h);x=b(Pt,"H3",{class:!0,"data-svelte-h":!0}),R(x)!=="svelte-ov02fv"&&(x.textContent=z),I=D(Pt),C=b(Pt,"P",{class:!0});var Fe=V(C);T=G(Fe,"Aggregated values from 2025-2050 in "),O=G(Fe,U),E=G(Fe," verus average value of benefits recieved across all local authorities in UK."),Fe.forEach(A),H=D(Pt),S=b(Pt,"DIV",{class:!0});var nt=V(S);P=b(nt,"INPUT",{type:!0,name:!0}),Z=D(nt),j=b(nt,"LABEL",{for:!0,"data-svelte-h":!0}),R(j)!=="svelte-1hwbt9c"&&(j.textContent=tt),ct=b(nt,"BR",{}),Y=D(nt),W=b(nt,"INPUT",{type:!0,name:!0}),ft=D(nt),$=b(nt,"LABEL",{for:!0,"data-svelte-h":!0}),R($)!=="svelte-1bcp6t5"&&($.textContent=gt),kt=b(nt,"BR",{}),Me=D(nt),yt=b(nt,"INPUT",{type:!0,name:!0}),Ee=D(nt),bt=b(nt,"LABEL",{for:!0,"data-svelte-h":!0}),R(bt)!=="svelte-27dm33"&&(bt.textContent=Ve),nt.forEach(A),Le=D(Pt),ht=b(Pt,"DIV",{class:!0,"data-svelte-h":!0}),R(ht)!=="svelte-188r0xz"&&(ht.innerHTML=Pe),Pt.forEach(A),De=D(pe),m=b(pe,"DIV",{class:!0});var ve=V(m);F=b(ve,"H3",{class:!0,"data-svelte-h":!0}),R(F)!=="svelte-1o9zf4n"&&(F.textContent=Ft),Ot=D(ve),q=b(ve,"P",{class:!0});var Oe=V(q);Ae=G(Oe,"Co-benefits values in "),at=G(Oe,He),ot=G(Oe," verus average value across all local authorities in UK."),Oe.forEach(A),oe=D(ve),pt=b(ve,"DIV",{class:!0,"data-svelte-h":!0}),R(pt)!=="svelte-1rwx3ei"&&(pt.innerHTML=on),ve.forEach(A),Se=D(pe),ut=b(pe,"DIV",{class:!0});var me=V(ut);Ut=b(me,"H3",{class:!0});var Tn=V(Ut);ln=G(Tn,Yn),cn=G(Tn," on UK Map"),Tn.forEach(A),un=D(me),qt=b(me,"P",{class:!0,"data-svelte-h":!0}),R(qt)!=="svelte-1ask2se"&&(qt.textContent=Zn),dn=D(me),_t=b(me,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),R(_t)!=="svelte-uun6i9"&&(_t.innerHTML=Kn),me.forEach(A),pe.forEach(A),Ne.forEach(A),fn=D(K),Mt=b(K,"DIV",{class:!0});var Ue=V(Mt);jt=b(Ue,"DIV",{class:!0,"data-svelte-h":!0}),R(jt)!=="svelte-kw1tcg"&&(jt.innerHTML=Xn),hn=D(Ue),Ct=b(Ue,"DIV",{class:!0});var qe=V(Ct);vt=b(qe,"DIV",{class:!0});var ge=V(vt);Wt=b(ge,"H3",{class:!0,"data-svelte-h":!0}),R(Wt)!=="svelte-dq9uga"&&(Wt.textContent=Gn),pn=D(ge),Yt=b(ge,"P",{class:!0,"data-svelte-h":!0}),R(Yt)!=="svelte-1ask2se"&&(Yt.textContent=Qn),vn=D(ge),ie=b(ge,"DIV",{class:!0}),V(ie).forEach(A),ge.forEach(A),mn=D(qe);for(let ne=0;ne<Q.length;ne+=1)Q[ne].l(qe);qe.forEach(A),Ue.forEach(A),gn=D(K),dt=b(K,"DIV",{class:!0});var Rt=V(dt);Zt=b(Rt,"DIV",{class:!0,"data-svelte-h":!0}),R(Zt)!=="svelte-1ttf9zc"&&(Zt.innerHTML=Jn),yn=D(Rt),Et=b(Rt,"DIV",{class:!0});var je=V(Et);Kt=b(je,"H3",{class:!0,"data-svelte-h":!0}),R(Kt)!=="svelte-td9req"&&(Kt.textContent=$n),bn=D(je),le=b(je,"DIV",{class:!0});var ur=V(le);Lt=b(ur,"DIV",{class:!0,"data-svelte-h":!0}),R(Lt)!=="svelte-q6h9gs"&&(Lt.innerHTML=tr),ur.forEach(A),je.forEach(A),_n=D(Rt),Dt=b(Rt,"DIV",{class:!0});var We=V(Dt);Xt=b(We,"H3",{class:!0,"data-svelte-h":!0}),R(Xt)!=="svelte-i61rsm"&&(Xt.textContent=er),Cn=D(We),ce=b(We,"DIV",{class:!0});var dr=V(ce);ue=b(dr,"DIV",{class:!0});var fr=V(ue);At=b(fr,"DIV",{class:!0,"data-svelte-h":!0}),R(At)!=="svelte-sn0et6"&&(At.innerHTML=nr),fr.forEach(A),dr.forEach(A),We.forEach(A),wn=D(Rt),zt=b(Rt,"DIV",{class:!0});var Ye=V(zt);Gt=b(Ye,"H3",{class:!0,"data-svelte-h":!0}),R(Gt)!=="svelte-z821kd"&&(Gt.textContent=rr),xn=D(Ye),de=b(Ye,"DIV",{class:!0});var hr=V(de);Tt=b(hr,"DIV",{class:!0,"data-svelte-h":!0}),R(Tt)!=="svelte-1cmh3ws"&&(Tt.innerHTML=sr),hr.forEach(A),Ye.forEach(A),Rt.forEach(A),kn=D(K),Bt=b(K,"DIV",{class:!0});var Ze=V(Bt);et=b(Ze,"DIV",{class:!0});var mt=V(et);Qt=b(mt,"P",{class:!0,"data-svelte-h":!0}),R(Qt)!=="svelte-ceroz1"&&(Qt.textContent=ar),Mn=D(mt),Jt=b(mt,"H2",{class:!0,"data-svelte-h":!0}),R(Jt)!=="svelte-so6kne"&&(Jt.textContent=or),En=D(mt),$t=b(mt,"P",{class:!0,"data-svelte-h":!0}),R($t)!=="svelte-ep3r6m"&&($t.textContent=ir),Ln=D(mt),te=b(mt,"INPUT",{type:!0}),Dn=D(mt),ee=b(mt,"LABEL",{for:!0,"data-svelte-h":!0}),R(ee)!=="svelte-1kwkdzm"&&(ee.textContent=lr),mt.forEach(A),An=D(Ze),It=b(Ze,"DIV",{id:!0,class:!0});var pr=V(It);for(let ne=0;ne<J.length;ne+=1)J[ne].l(pr);pr.forEach(A),Ze.forEach(A),K.forEach(A),this.h()},h(){g(r,"class","page-subtitle"),g(i,"class","page-title"),g(o,"class","description"),g(n,"class","section header"),g(w,"class","section-header"),g(x,"class","component-title"),g(C,"class","description"),g(P,"type","radio"),g(P,"name","visType"),P.value="barchart",P.checked=!0,g(j,"for","html"),g(W,"type","radio"),g(W,"name","visType"),W.value="boxplot",g($,"for","css"),g(yt,"type","radio"),g(yt,"name","visType"),yt.value="distribution",g(bt,"for","javascript"),g(S,"class","radio-set"),g(ht,"class","plot"),g(h,"class","component column"),cs(()=>t[20].call(h)),g(F,"class","component-title"),g(q,"class","description"),g(pt,"class","plot"),g(m,"class","component column"),g(Ut,"class","component-title"),g(qt,"class","description"),g(_t,"id","map"),g(_t,"class","svelte-wd9p4b"),g(ut,"class","component column"),g(_,"id","vis-block"),g(_,"class","svelte-wd9p4b"),g(f,"class","section"),g(jt,"class","section-header"),g(Wt,"class","component-title"),g(Yt,"class","description"),g(ie,"class","plot"),g(vt,"class","component"),g(Ct,"class","row"),g(Mt,"class","section"),g(Zt,"class","section-header"),g(Kt,"class","component-title"),g(Lt,"class","plot"),g(le,"class","row"),g(Et,"class","component singlevis"),g(Xt,"class","component-title"),g(At,"class","plot"),g(ue,"class","row"),g(ce,"class","row"),g(Dt,"class","component singlevis"),g(Gt,"class","component-title"),g(Tt,"class","plot"),g(de,"class","row"),g(zt,"class","component singlevis"),g(dt,"class","section"),g(Qt,"class","section-subtitle"),g(Jt,"class","section-title"),g($t,"class","description"),g(te,"type","checkbox"),g(ee,"for","checkbox"),g(et,"class","section-header"),g(It,"id","multiple-comp"),g(It,"class","svelte-wd9p4b"),g(Bt,"class","section"),g(e,"class","page-container")},m(N,K){se(N,e,K),c(e,n),c(n,r),c(n,s),c(n,i),c(i,d),c(n,l),c(n,o),c(e,p),c(e,f),c(f,w),c(f,k),c(f,_),c(_,h),c(h,x),c(h,I),c(h,C),c(C,T),c(C,O),c(C,E),c(h,H),c(h,S),c(S,P),c(S,Z),c(S,j),c(S,ct),c(S,Y),c(S,W),c(S,ft),c(S,$),c(S,kt),c(S,Me),c(S,yt),c(S,Ee),c(S,bt),c(h,Le),c(h,ht),t[19](ht),Re=ps(h,t[20].bind(h)),c(_,De),c(_,m),c(m,F),c(m,Ot),c(m,q),c(q,Ae),c(q,at),c(q,ot),c(m,oe),c(m,pt),t[21](pt),c(_,Se),c(_,ut),c(ut,Ut),c(Ut,ln),c(Ut,cn),c(ut,un),c(ut,qt),c(ut,dn),c(ut,_t),t[22](_t),c(e,fn),c(e,Mt),c(Mt,jt),c(Mt,hn),c(Mt,Ct),c(Ct,vt),c(vt,Wt),c(vt,pn),c(vt,Yt),c(vt,vn),c(vt,ie),t[23](ie),c(Ct,mn);for(let B=0;B<Q.length;B+=1)Q[B]&&Q[B].m(Ct,null);c(e,gn),c(e,dt),c(dt,Zt),c(dt,yn),c(dt,Et),c(Et,Kt),c(Et,bn),c(Et,le),c(le,Lt),t[25](Lt),c(dt,_n),c(dt,Dt),c(Dt,Xt),c(Dt,Cn),c(Dt,ce),c(ce,ue),c(ue,At),t[26](At),c(dt,wn),c(dt,zt),c(zt,Gt),c(zt,xn),c(zt,de),c(de,Tt),t[27](Tt),c(e,kn),c(e,Bt),c(Bt,et),c(et,Qt),c(et,Mn),c(et,Jt),c(et,En),c(et,$t),c(et,Ln),c(et,te),te.checked=t[11],c(et,Dn),c(et,ee),c(Bt,An),c(Bt,It);for(let B=0;B<J.length;B+=1)J[B]&&J[B].m(It,null);t[33](e),zn||(cr=[Ke(P,"change",t[16]),Ke(W,"change",t[16]),Ke(yt,"change",t[16]),Ke(te,"change",t[28])],zn=!0)},p(N,K){if(K[0]&512){fe=Xe(Fn);let B;for(B=0;B<fe.length;B+=1){const Vt=Pr(N,fe,B);Q[B]?Q[B].p(Vt,K):(Q[B]=Rr(Vt),Q[B].c(),Q[B].m(Ct,null))}for(;B<Q.length;B+=1)Q[B].d(1);Q.length=fe.length}if(K[0]&2048&&(te.checked=N[11]),K[0]&2496){he=Xe(On);let B;for(B=0;B<he.length;B+=1){const Vt=Vr(N,he,B);J[B]?J[B].p(Vt,K):(J[B]=Hr(Vt),J[B].c(),J[B].m(It,null))}for(;B<J.length;B+=1)J[B].d(1);J.length=he.length}},i:vr,o:vr,d(N){N&&A(e),t[19](null),Re(),t[21](null),t[22](null),t[23](null),mr(Q,N),t[25](null),t[26](null),t[27](null),mr(J,N),t[33](null),zn=!1,us(cr)}}}function xt(t){const e=t.querySelector("figure");e&&e.remove();const n=t.querySelector("svg");n&&n.remove()}function Co(t,e,n){let r,a,s,i,u,d,l,o={},v={},p={},f={},w="barchart",M=!1,k=300,{data:_}=e;const h=_.LAD,x=_.oneLADData,z=_.oneLADAllCBs,I=_.totalCBAllZones;_.totalCBAllZones;const C=_.allCBAllLAD,T=_.totalCBAllLAD,U=_.allCBAllLADSUM;console.log(9876,T);const O=_.LADToName;let E,H;ds(()=>{E=new Ws(h,"LAD",H,"val",!0),E.initMap()});function S(){w=="boxplot"?a?.append(rt({height:k/1.4,...st,x:{type:"band"},style:{fontSize:"18px"},marks:[Sa(x,{y:"total",x:"scenario",tip:!0}),Un(I,lt({y:"median"},{y:"total",x:"scenario",stroke:"blue",strokeWidth:2})),Un(I,lt({y:"mean"},{y:"total",x:"scenario",stroke:"red",strokeWidth:2}))]})):w=="barchart"?a?.append(rt({height:k/1.4,...st,x:{type:"band"},style:{fontSize:"18px"},marks:[St(T,lt({y:"mean"},{y:"val",x:"scenario",fill:"lightblue",opacity:.7,dx:20})),St(x,lt({y:"sum"},{y:"total",x:"scenario",tip:!0}))]})):w=="distribution"&&a?.append(rt({height:k/1.4,...st,y:{label:"Datazones Frequency"},style:{fontSize:"18px"},facet:{data:I,y:"scenario"},marks:[Je(x,Pn({y:"count"},{x:"total",tip:!0})),Wr(I,In({x:"median"},{x:"total",y1:0,y2:1500,fy:"scenario",stroke:"blue",strokeWidth:3}))]}))}function P(){s?.append(rt({height:k,MARGINS:st,x:{type:"band"},marks:[St(U,lt({y:"mean"},{y:"val",x:"co_benefit_type",dx:Qe,fill:ye,tip:!0})),St(z,lt({y:"sum"},{y:"total",x:"co_benefit_type",tip:!0}))]}))}function Z(){On.forEach(m=>{let F;M?(wr.includes(m)?F=rt({height:k/3,width:500*2,...st,style:{fontSize:"18px"},color:{legend:!0,scheme:"greys"},x:{domain:Xr(0,6),ticks:new Set(x.map(q=>q[m]))},marks:[$e(x,lt({fill:"count"},{x:m,stroke:"black"})),$e([Math.floor(ze(I.map(q=>q[m])))],{x:q=>q,stroke:"red",fill:null,strokeWidth:2})]}):F=rt({height:k/3,width:500*2,...st,style:{fontSize:"18px"},color:{legend:!0},marks:[Sn(x,{x:m,tip:!0}),Sn([ze(x.map(q=>q[m]))],{stroke:"blue",strokeWidth:2}),Sn([ze(I.map(q=>q[m]))],{stroke:"red",strokeWidth:2})]}),o[m]?.append(F)):(wr.includes(m)?F=rt({height:k/2,width:500,...st,marginLeft:100,x:{grid:!0,label:m,tickFormat:q=>Math.floor(q)},style:{fontSize:"18px"},color:{legend:!0},marks:[St(I,zr(lt({y:"count"},{x:m,dx:20,fill:ye}))),St(x,zr(lt({y:"count"},{x:m})))]}):F=rt({height:k/2,...st,style:{fontSize:"18px"},marks:[Je(x,Pn({y:"proportion"},{x:m,tip:!0,fill:ye,stroke:ye,fillOpacity:.2,strokeWidth:3})),Je(I,Pn({y:"proportion"},{x:m,tip:!0,fill:"black",stroke:"black",fillOpacity:.2,strokeWidth:3}))]}),v[m]?.append(void 0),o[m]?.append(F));let Ot=rt({height:k/2,...st,style:{fontSize:"18px"},color:{range:["rgb(227, 248, 255)","lightblue"]},marks:[Ua(Ys(I,3e4),{x:m,y:"total",fill:"density",thresholds:10}),es(x,{x:m,y:"total",fill:"black",r:2}),Ja(x,{x:m,y:"total"}),qs(),js({anchor:"bottom"})]});p[m]?.append(Ot)})}function j(){i?.append(rt({...st,marginLeft:100,height:k,width:300,grid:!0,color:{type:"linear",scheme:"greys",legend:!0},marks:[$e(C,Cr({fill:"mean"},{x:"scenario",y:"co_benefit_type",fill:"val",stroke:"black",dx:Qe/2,dy:-Qe/2,inset:.5})),$e(z,Cr({fill:"mean"},{x:"scenario",y:"co_benefit_type",fill:"total",stroke:"black",inset:.5}))]}))}function tt(){for(let m of Fn){let F=rt({height:k,width:410,...st,marginRight:0,marginLeft:100,marks:[kr(C,In({x:"mean"},{x:"val",y:"co_benefit_type",dy:-Qe/2,fill:ye,tip:!0})),kr(z,In({x:"mean"},{x:"total",y:"co_benefit_type",tip:!0}))]});f[m]?.append(F)}}function ct(){let m=x.flatMap(at=>Vn.map(ot=>({time:ot,value:at[ot],scenario:at.scenario,zone:"local"}))),F=I.flatMap(at=>Vn.map(ot=>({time:ot,value:at[ot],scenario:at.scenario,zone:"UK"}))),Ft=m.concat(F);console.log(Ft[20]);let Ot=rt({height:k,width:800,...st,paddingLeft:200,marginRight:0,x:{tickSize:0,label:null,ticks:[]},color:{range:[Zs,ye]},marks:[St(Ft,lt({y:"mean"},{x:"zone",y:"value",fx:"time",tip:!0,fill:"zone"}))]});u?.append(Ot),Ht(u).select("g[aria-label='bar']").selectAll("g").each(function(at,ot){const oe=Ht(this).selectAll("rect").nodes()[0],pt=Ht(oe).attr("transform")||"";Ht(oe).attr("transform",`${pt} translate(-20, 0)`),Ht(this).selectAll("rect").nodes()[0].getAttribute("height"),Ht(this).selectAll("rect").nodes()[1].getAttribute("height"),Ht(this).selectAll("rect").each(function(Se,ut){ut==0&&Ht(this).raise()})});let q=rt({height:k,width:800,...st,paddingLeft:200,marginRight:0,color:{legend:!0},marks:[Aa(Ft,lt({y:"mean"},{x:"time",y:"value",tip:!0,stroke:"scenario"}))]});d?.append(q);let Ae=z.flatMap(at=>Vn.map(ot=>({time:ot,value:at[ot],cobenefit:at.co_benefit_type}))),He=rt({height:k,width:1e3,...st,paddingLeft:200,marginRight:0,insetLeft:10,insetRight:10,insetBottom:30,style:{fontSize:"10px"},y:{tickFormat:".2f",label:"Value (£)"},x:{label:"Year"},color:{legend:!0,range:Ks,domain:Xs},marks:[Je(Ae,lt({y:"mean"},{x:"time",y:"value",tip:!0,fill:"cobenefit"})),_r([0],{strokeWidth:8,stroke:"white",opacity:1,strokeLinecap:"round"}),_r([0],{strokeWidth:2,stroke:"#333333",opacity:1,strokeLinecap:"round"})]});l?.append(He)}function Y(m){n(18,w=m.currentTarget.value)}function W(m){it[m?"unshift":"push"](()=>{a=m,n(0,a)})}function ft(){k=this.clientHeight,n(12,k)}function $(m){it[m?"unshift":"push"](()=>{s=m,n(1,s)})}function gt(m){it[m?"unshift":"push"](()=>{H=m,n(13,H)})}function kt(m){it[m?"unshift":"push"](()=>{i=m,n(2,i)})}function Me(m,F){it[m?"unshift":"push"](()=>{f[F]=m,n(9,f)})}function yt(m){it[m?"unshift":"push"](()=>{u=m,n(3,u)})}function Ee(m){it[m?"unshift":"push"](()=>{l=m,n(5,l)})}function bt(m){it[m?"unshift":"push"](()=>{d=m,n(4,d)})}function Ve(){M=this.checked,n(11,M)}function Le(m,F){it[m?"unshift":"push"](()=>{o[F]=m,n(6,o)})}function ht(m,F){it[m?"unshift":"push"](()=>{o[F]=m,n(6,o)})}function Pe(m,F){it[m?"unshift":"push"](()=>{v[F]=m,n(7,v)})}function Re(m,F){it[m?"unshift":"push"](()=>{p[F]=m,n(8,p)})}function De(m){it[m?"unshift":"push"](()=>{r=m,n(10,r)})}return t.$$set=m=>{"data"in m&&n(17,_=m.data)},t.$$.update=()=>{t.$$.dirty[0]&262203&&(a&&(console.log("REM"),xt(a)),s&&xt(s),u&&xt(u),d&&xt(d),l&&xt(l),S(),P(),ct()),t.$$.dirty[0]&448&&(Object.values(o).forEach(m=>{m&&xt(m)}),Object.values(v).forEach(m=>{m&&xt(m)}),Object.values(p).forEach(m=>{m&&xt(m)}),Z()),t.$$.dirty[0]&516&&(i?.firstChild?.remove(),Object.values(f).forEach(m=>{m&&xt(m)}),j(),tt())},[a,s,i,u,d,l,o,v,p,f,r,M,k,H,h,O,Y,_,w,W,ft,$,gt,kt,Me,yt,Ee,bt,Ve,Le,ht,Pe,Re,De]}class zo extends fs{constructor(e){super(),hs(this,e,Co,_o,ls,{data:17},null,[-1,-1])}}export{zo as component};
