import{s as Rs,a as p,e as r,t as D,g as m,c as i,b,p as A,f as d,d as S,q as n,B as Fe,A as Xt,i as W,h as e,x as Ea,v as qs,y as Ws,r as rs,F as Ks,j as He,H as Ys,D as Gs,z as pe}from"../chunks/scheduler.BVm0POKv.js";import{S as js,i as Xs,c as is,b as os,m as cs,t as fs,a as ds,d as us}from"../chunks/index.C_bTuQvQ.js";import{N as Zs,e as vs}from"../chunks/NavigationBar.Dy1MZ6A0.js";import"../chunks/transform.Db-NgJu-.js";import{ae as Js,af as Qs,ag as $s,N as tn,a0 as hs,ah as en,ai as ln,aj as an,Z as Vs,ak as ps,d as sn,al as nn,M as rn,B as on,c as cn,b as fn,e as dn,g as un,C as vn,am as hn,x as Ns,u as Ms,y as Bs,an as pn,l as mn,q as Pe,z as pl,ao as ms,w as bn,ap as gn,ad as bs,G as _n,v as gs}from"../chunks/index.DrA8R0kw.js";import{b as yn}from"../chunks/paths.BMOWNvJN.js";import{C as En}from"../chunks/module.DmLNZ4W0.js";import{M as wn}from"../chunks/mapUK.dFtHOa0v.js";import{k as xe,C as _s,D as Cn,b as Oe,l as ys,c as Es,g as Dn,r as Sn,T as kn,S as An,d as ma,e as In,m as xn,n as Ln,o as Tn,f as Vn,h as Nn,M as Mn,a as Bn}from"../chunks/globals.Dyz3DRdf.js";import{g as Ae,t as Pn,u as On,q as Fn,r as Hn,v as Un,s as zn}from"../chunks/duckdb.DE5jd6Eb.js";import{t as ba,p as Rn}from"../chunks/percentage.Cu08Svdw.js";import{p as ga}from"../chunks/per_capita.COcMrZFY.js";import{F as qn}from"../chunks/Footer.BTK65yPV.js";import{c as _a,d as Wn,f as Kn,g as Yn,m as Gn,q as Ps,s as ws}from"../chunks/linear.DZfyr4Dt.js";import{c as jn,b as Xn}from"../chunks/bin.CLltLqji.js";import{d as wa}from"../chunks/dot.BXu9dTF1.js";function Os(s,t=_a){if(typeof s[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let l=Array.from(s);const a=new Float64Array(l.length);t.length!==2&&(l=l.map(t),t=_a);const o=(_,y)=>t(l[_],l[y]);let c,f;return s=Uint32Array.from(l,(_,y)=>y),s.sort(t===_a?(_,y)=>Wn(l[_],l[y]):Kn(o)),s.forEach((_,y)=>{const w=o(_,c===void 0?_:c);w>=0?((c===void 0||w>0)&&(c=_,f=y),a[_]=f):a[_]=NaN}),a}function Zn(s={},t={}){const l=Js(t),a=Object.entries(s).map(([o,c])=>{const f=Qs(o,t);if(f==null)throw new Error(`missing channel: ${o}`);const[_,y]=$s(f);return{key:o,input:f,output:_,setOutput:y,map:Jn(c)}});return{...tn(t,(o,c)=>{const f=hs(o,l),_=a.map(({input:w})=>hs(o,w)),y=a.map(({setOutput:w})=>w(new Array(o.length)));for(const w of c)for(const g of f?en(w,k=>f[k]).values():[w])a.forEach(({map:k},tt)=>k.mapIndex(g,_[tt],y[tt]));return{data:o,facets:c}}),...Object.fromEntries(a.map(({key:o,output:c})=>[o,c]))}}function Jn(s){if(s==null)throw new Error("missing map");if(typeof s.mapIndex=="function")return s;if(typeof s.map=="function"&&ln(s))return Qn(s);if(typeof s=="function")return ya(an(s));switch(`${s}`.toLowerCase()){case"cumsum":return tr;case"rank":return ya((t,l)=>Os(t,a=>l[a]));case"quantile":return ya((t,l)=>$n(t,a=>l[a]))}throw new Error(`invalid map: ${s}`)}function Qn(s){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:s.map.bind(s)}}function $n(s,t){const l=jn(s,t)-1;return Os(s,t).map(a=>a/l)}function ya(s){return{mapIndex(t,l,a){const o=s(t,l);if(o.length!==t.length)throw new Error("map function returned a mismatched length");for(let c=0,f=t.length;c<f;++c)a[t[c]]=o[c]}}}const tr={mapIndex(s,t,l){let a=0;for(const o of s)l[o]=a+=t[o]}},er={ariaLabel:"tick",fill:null,stroke:"currentColor"};class lr extends rn{constructor(t,l,a){super(t,l,a,er),on(this,a)}render(t,l,a,o,c){return cn("svg:g",c).call(fn,this,o,c).call(this._transform,this,l).call(f=>f.selectAll().data(t).enter().append("line").call(dn,this).attr("x1",this._x1(l,a,o)).attr("x2",this._x2(l,a,o)).attr("y1",this._y1(l,a,o)).attr("y2",this._y2(l,a,o)).call(un,this,a).call(vn,this,a,c)).node()}}class ar extends lr{constructor(t,l={}){const{x:a,y:o,inset:c=0,insetRight:f=c,insetLeft:_=c}=l;super(t,{y:{value:o,scale:"y"},x:{value:a,scale:"x",type:"band",optional:!0}},l),this.insetRight=ps(f),this.insetLeft=ps(_)}_transform(t,l,{y:a}){t.call(sn,l,{y:a},0,nn)}_x1({x:t},{x:l},{marginLeft:a}){const{insetLeft:o}=this;return l&&t?c=>l[c]+o:a+o}_x2({x:t},{x:l},{width:a,marginRight:o}){const{insetRight:c}=this;return l&&t?f=>l[f]+t.bandwidth()-c:a-o-c}_y1(t,{y:l}){return a=>l[a]}_y2(t,{y:l}){return a=>l[a]}}function sr(s,{y:t=Vs,...l}={}){return new ar(s,{...l,y:t})}function nr(s,{y:t=Vs,x:l=null,r:a,fill:o="#ccc",fillOpacity:c,stroke:f="currentColor",strokeOpacity:_,strokeWidth:y=2,sort:w,...g}={}){const k=l!=null?Bs:pn;return hn(Ms(s,k({y1:Fs,y2:Hs},{x:l,y:t,stroke:f,strokeOpacity:_,...g})),Ns(s,k({y1:"p25",y2:"p75"},{x:l,y:t,fill:o,fillOpacity:c,...g})),sr(s,k({y:"p50"},{x:l,y:t,stroke:f,strokeOpacity:_,strokeWidth:y,sort:w,...g})),wa(s,Zn({y:rr},{x:l,y:t,z:l,r:a,stroke:f,strokeOpacity:_,...g})))}function rr(s){const t=Fs(s),l=Hs(s);return s.map(a=>a<t||a>l?a:NaN)}function Fs(s){const t=Us(s)*2.5-zs(s)*1.5;return Yn(s,l=>l>=t?l:NaN)}function Hs(s){const t=zs(s)*2.5-Us(s)*1.5;return Gn(s,l=>l<=t?l:NaN)}function Us(s){return Ps(s,.25)}function zs(s){return Ps(s,.75)}function Cs(s,t,l){const a=s.slice();return a[48]=t[l],a[49]=t,a[50]=l,a}function Ds(s){let t,l,a=s[4].toLocaleString()+"",o;return{c(){t=r("span"),l=D("£"),o=D(a),this.h()},l(c){t=i(c,"SPAN",{class:!0});var f=b(t);l=S(f,"£"),o=S(f,a),f.forEach(d),this.h()},h(){n(t,"class","waffle-big svelte-b9v0tr")},m(c,f){W(c,t,f),e(t,l),e(t,o)},p(c,f){f[0]&16&&a!==(a=c[4].toLocaleString()+"")&&He(o,a)},d(c){c&&d(t)}}}function ir(s){let t,l="National costs";return{c(){t=r("div"),t.textContent=l,this.h()},l(a){t=i(a,"DIV",{class:!0,"data-svelte-h":!0}),A(t)!=="svelte-o12owz"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-b9v0tr")},m(a,o){W(a,t,o)},d(a){a&&d(t)}}}function or(s){let t,l="National benefits";return{c(){t=r("div"),t.textContent=l,this.h()},l(a){t=i(a,"DIV",{class:!0,"data-svelte-h":!0}),A(t)!=="svelte-10ytukz"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-b9v0tr")},m(a,o){W(a,t,o)},d(a){a&&d(t)}}}function Ss(s){let t,l,a=s[6].toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",o;return{c(){t=r("span"),l=D("£"),o=D(a),this.h()},l(c){t=i(c,"SPAN",{class:!0});var f=b(t);l=S(f,"£"),o=S(f,a),f.forEach(d),this.h()},h(){n(t,"class","waffle-big svelte-b9v0tr")},m(c,f){W(c,t,f),e(t,l),e(t,o)},p(c,f){f[0]&64&&a!==(a=c[6].toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&He(o,a)},d(c){c&&d(t)}}}function cr(s){let t,l="Per capita costs";return{c(){t=r("div"),t.textContent=l,this.h()},l(a){t=i(a,"DIV",{class:!0,"data-svelte-h":!0}),A(t)!=="svelte-6pmcl0"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-b9v0tr")},m(a,o){W(a,t,o)},d(a){a&&d(t)}}}function fr(s){let t,l="Per capita benefits";return{c(){t=r("div"),t.textContent=l,this.h()},l(a){t=i(a,"DIV",{class:!0,"data-svelte-h":!0}),A(t)!=="svelte-g1rvwk"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-b9v0tr")},m(a,o){W(a,t,o)},d(a){a&&d(t)}}}function ks(s){let t,l,a=(s[4]/s[5]*100).toFixed(2)+"",o,c,f,_="%";return{c(){t=r("div"),l=r("span"),o=D(a),c=p(),f=r("span"),f.textContent=_,this.h()},l(y){t=i(y,"DIV",{class:!0});var w=b(t);l=i(w,"SPAN",{class:!0});var g=b(l);o=S(g,a),g.forEach(d),c=m(w),f=i(w,"SPAN",{class:!0,"data-svelte-h":!0}),A(f)!=="svelte-jxggz7"&&(f.textContent=_),w.forEach(d),this.h()},h(){n(l,"class","waffle-big svelte-b9v0tr"),n(f,"class","small svelte-b9v0tr"),n(t,"class","waffle-value svelte-b9v0tr")},m(y,w){W(y,t,w),e(t,l),e(l,o),e(t,c),e(t,f)},p(y,w){w[0]&48&&a!==(a=(y[4]/y[5]*100).toFixed(2)+"")&&He(o,a)},d(y){y&&d(t)}}}function As(s){let t,l,a,o,c,f,_,y,w,g=Ts(s[10])+"",k,tt,F,N="Download Page Data",T,M,I=s[4]&&Is(s);return{c(){t=r("div"),l=r("div"),a=r("img"),c=p(),f=r("span"),_=D(s[15]),y=p(),I&&I.c(),w=D(`\r
                    >> `),k=D(g),tt=p(),F=r("button"),F.textContent=N,this.h()},l(O){t=i(O,"DIV",{class:!0});var z=b(t);l=i(z,"DIV",{class:!0});var ft=b(l);a=i(ft,"IMG",{src:!0,alt:!0,class:!0}),c=m(ft),f=i(ft,"SPAN",{class:!0});var et=b(f);_=S(et,s[15]),y=m(et),I&&I.l(et),w=S(et,`\r
                    >> `),k=S(et,g),et.forEach(d),ft.forEach(d),tt=m(z),F=i(z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),A(F)!=="svelte-vn9rs8"&&(F.textContent=N),z.forEach(d),this.h()},h(){Fe(a.src,o=s[17])||n(a,"src",o),n(a,"alt","Icon"),n(a,"class","mini-heading-icon"),n(f,"class","mini-header-text"),n(l,"class","mini-header-content"),n(F,"type","button"),n(F,"class","data-btn-sticky"),n(t,"class","mini-header")},m(O,z){W(O,t,z),e(t,l),e(l,a),e(l,c),e(l,f),e(f,_),e(f,y),I&&I.m(f,null),e(f,w),e(f,k),e(t,tt),e(t,F),T||(M=Ea(F,"click",s[19]),T=!0)},p(O,z){O[4]?I?I.p(O,z):(I=Is(O),I.c(),I.m(f,w)):I&&(I.d(1),I=null),z[0]&1024&&g!==(g=Ts(O[10])+"")&&He(k,g)},d(O){O&&d(t),I&&I.d(),T=!1,M()}}}function Is(s){let t,l,a,o;return{c(){t=r("span"),l=D("(UK total: £"),a=D(s[4]),o=D(" billion)"),this.h()},l(c){t=i(c,"SPAN",{class:!0});var f=b(t);l=S(f,"(UK total: £"),a=S(f,s[4]),o=S(f," billion)"),f.forEach(d),this.h()},h(){n(t,"class","mini-header-value")},m(c,f){W(c,t,f),e(t,l),e(t,a),e(t,o)},p(c,f){f[0]&16&&He(a,c[4])},d(c){c&&d(t)}}}function dr(s){let t,l=`Each bar shows the predicted total costs in billion pounds for each\r
                            five-year periods for all of UK.`;return{c(){t=r("p"),t.textContent=l,this.h()},l(a){t=i(a,"P",{class:!0,"data-svelte-h":!0}),A(t)!=="svelte-1v08yjw"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-b9v0tr")},m(a,o){W(a,t,o)},d(a){a&&d(t)}}}function ur(s){let t,l=`Each bar shows the predicted total benefits in billion pounds for each\r
                            five-year periods for all of UK.`;return{c(){t=r("p"),t.textContent=l,this.h()},l(a){t=i(a,"P",{class:!0,"data-svelte-h":!0}),A(t)!=="svelte-3v1xr6"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-b9v0tr")},m(a,o){W(a,t,o)},d(a){a&&d(t)}}}function vr(s){let t,l=`The x-axis represents the value of costs, while the y-axis shows the\r
                            number of data zones falling within each benefit range.`;return{c(){t=r("p"),t.textContent=l,this.h()},l(a){t=i(a,"P",{class:!0,"data-svelte-h":!0}),A(t)!=="svelte-92e6ig"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-b9v0tr")},m(a,o){W(a,t,o)},d(a){a&&d(t)}}}function hr(s){let t,l=`The x-axis represents the predicted value of benefits, measured in\r
                            billion pounds, while the y-axis shows the number of data zones falling within each benefit\r
                            range.`;return{c(){t=r("p"),t.textContent=l,this.h()},l(a){t=i(a,"P",{class:!0,"data-svelte-h":!0}),A(t)!=="svelte-flkfm5"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-b9v0tr")},m(a,o){W(a,t,o)},d(a){a&&d(t)}}}function xs(s){let t,l,a=s[7].legend().outerHTML+"";return{c(){t=r("div"),l=new Ys(!1),this.h()},l(o){t=i(o,"DIV",{id:!0});var c=b(t);l=Gs(c,!1),c.forEach(d),this.h()},h(){l.a=null,n(t,"id","legend")},m(o,c){W(o,t,c),l.m(a,t)},p(o,c){c[0]&128&&a!==(a=o[7].legend().outerHTML+"")&&l.p(a)},d(o){o&&d(t)}}}function Ls(s){let t,l,a=s[48].label+"",o,c,f,_=s[48].def+"",y,w,g,k=s[48],tt;const F=()=>s[29](g,k),N=()=>s[29](null,k);return{c(){t=r("div"),l=r("h3"),o=D(a),c=p(),f=r("p"),y=D(_),w=p(),g=r("div"),tt=p(),this.h()},l(T){t=i(T,"DIV",{class:!0});var M=b(t);l=i(M,"H3",{class:!0});var I=b(l);o=S(I,a),I.forEach(d),c=m(M),f=i(M,"P",{class:!0});var O=b(f);y=S(O,_),O.forEach(d),w=m(M),g=i(M,"DIV",{class:!0}),b(g).forEach(d),tt=m(M),M.forEach(d),this.h()},h(){n(l,"class","component-chart-title svelte-b9v0tr"),n(f,"class","component-chart-caption svelte-b9v0tr"),n(g,"class","plot"),n(t,"class","plot-container svelte-b9v0tr")},m(T,M){W(T,t,M),e(t,l),e(l,o),e(t,c),e(t,f),e(f,y),e(t,w),e(t,g),F(),e(t,tt)},p(T,M){s=T,k!==s[48]&&(N(),k=s[48],F())},d(T){T&&d(t),N()}}}function pr(s){let t,l,a,o,c,f,_,y,w="Co-Benefit Report",g,k,tt="Download Page Data",F,N,T,M,I,O,z,ft,et,me,_t,Lt,Tt,be,Zt,rt,lt,at,dt,Y,G,Ue,Le,ut,ge,yt,ze="billion",Te,Ve,vt,pt,Et,Re,Ne,v,h,x,B,P,j,E,R,Jt,ht,C="Contribution to national benefits",it,wt,Me="Share of total benefits",ml,_e,bl,ye,gl,qe,Vt,Nt,Qt,Ca='<p class="section-subtitle">Overview</p>',_l,Ct,V,Mt,yl,$t,Da=s[15].toLowerCase()+"",El,wl,Cl,We,te,Sa=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${ba}" alt="icon"/> <span class="tooltip-text">This chart uses total values. i.e. shows the total benefit/cost for all of the UK.</span></div>`,Dl,Ee,Sl,kl,Al,Dt,Il,ee,ka=s[15].toLowerCase()+"",xl,Ll,le,Aa=`data zones
                                <span class="tooltip-txt">Data zones are standard statitical geographies in UK that  comprise between 400 and 1200 households.</span>`,Tl,Ke,ae,Ia=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${ba}" alt="icon"/> <span class="tooltip-text">This chart uses total values. i.e. shows the total benefit/cost for all of the UK.</span></div>`,Vl,Bt,xa="",Nl,Ml,Bl,st,Pt,Pl,se,La=s[15].toLowerCase()+"",Ol,Fl,Hl,ne,Ta=`Each local authority is coloured by the predicted per capita benefits/cost,\r
                        showing regional variation in how benefits/cost are distributed. Scroll for zooming in and\r
                        out.`,Ul,re,Va=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${ga}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,zl,Ye,St,Na="",Rl,Ot,ie,Ma='<p class="section-subtitle">Socio-economic factors</p>',ql,mt,ct,Ft,Wl,oe,Ba=s[15]?.toLowerCase()+"",Kl,Yl,Gl,ce,Pa=`Each chart shows how benefits or costs are distributed across UK local\r
                        authorities in correlation with a specific household social-economic factor.`,jl,nt,fe,Oa=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${ga}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,Xl,de,Fa="Legend:",Zl,Jl,Ql,we,Ha="The scatter points are coloured by nation. Click the buttons below to filter.",$l,q,ta,ea,Ht,la,aa,Ut,sa,na,zt,ra,ia,Rt,oa,ca,fa,da,qt,Ua="Reset",ua,Wt,za=`<p style="margin: 0 0 0.5rem 0;"><strong>Discrete scales:</strong> The first set of
                            socio-economic factors are using categorical values where the x-axis is non-linear.</p> <p style="margin: 0 0 0.5rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots
                            represent modelled associations and should not be interpreted as direct causal
                            relationships.</p> <p style="margin: 0 0 0.5rem 0;"><strong>Aggregated data:</strong> Each socio-economic factor
                            for a given local authority is aggregated from the data zones within its boundary.</p>`,va,ue,Kt,Ge,ve,Yt,ha,Ra;t=new Zs({});let X=s[4]&&Ds(s);function qa(u,L){return u[4]>0?or:ir}let je=qa(s),kt=je(s),Z=s[4]&&Ss(s);function Wa(u,L){return u[4]>0?fr:cr}let Xe=Wa(s),At=Xe(s),J=s[4]&&ks(s),Q=s[9]&&As(s);function Ka(u,L){return u[4]>0?ur:dr}let Ze=Ka(s),It=Ze(s);function Ya(u,L){return u[4]>0?hr:vr}let Je=Ya(s),xt=Je(s),$=s[7]&&xs(s),Ce=vs(Es),K=[];for(let u=0;u<Ce.length;u+=1)K[u]=Ls(Cs(s,Ce,u));return ve=new qn({}),{c(){is(t.$$.fragment),l=p(),a=r("div"),o=r("div"),c=r("div"),f=r("div"),_=r("div"),y=r("p"),y.textContent=w,g=p(),k=r("button"),k.textContent=tt,F=p(),N=r("div"),T=r("h1"),M=r("img"),O=p(),z=r("div"),ft=p(),et=D(s[15]),me=p(),_t=r("div"),Lt=p(),Tt=r("p"),be=D(s[16]),Zt=p(),rt=r("div"),lt=r("div"),at=r("div"),dt=r("div"),Y=r("div"),G=r("img"),Le=p(),ut=r("div"),X&&X.c(),ge=p(),yt=r("span"),yt.textContent=ze,Te=p(),kt.c(),Ve=p(),vt=r("div"),pt=r("div"),Et=r("img"),Ne=p(),v=r("div"),Z&&Z.c(),h=p(),At.c(),x=p(),B=r("div"),P=r("div"),j=r("img"),R=p(),J&&J.c(),Jt=p(),ht=r("div"),ht.textContent=C,it=p(),wt=r("h3"),wt.textContent=Me,ml=p(),_e=r("div"),bl=p(),ye=r("div"),gl=p(),Q&&Q.c(),qe=p(),Vt=r("div"),Nt=r("div"),Qt=r("div"),Qt.innerHTML=Ca,_l=p(),Ct=r("div"),V=r("div"),Mt=r("h3"),yl=D("Total "),$t=r("span"),El=D(Da),wl=D(" over time 2025-2050"),Cl=p(),It.c(),We=p(),te=r("div"),te.innerHTML=Sa,Dl=p(),Ee=r("div"),Sl=p(),kl=r("br"),Al=p(),Dt=r("h3"),Il=D("Distribution of "),ee=r("span"),xl=D(ka),Ll=D(` across UK\r
                        \r
\r
                        `),le=r("span"),le.innerHTML=Aa,Tl=p(),xt.c(),Ke=p(),ae=r("div"),ae.innerHTML=Ia,Vl=p(),Bt=r("div"),Bt.innerHTML=xa,Nl=p(),Ml=r("br"),Bl=p(),st=r("div"),Pt=r("h3"),Pl=D("Per Capita "),se=r("span"),Ol=D(La),Fl=D(" by UK local authorities"),Hl=p(),ne=r("p"),ne.textContent=Ta,Ul=p(),re=r("div"),re.innerHTML=Va,zl=p(),$&&$.c(),Ye=p(),St=r("div"),St.innerHTML=Na,Rl=p(),Ot=r("div"),ie=r("div"),ie.innerHTML=Ma,ql=p(),mt=r("div"),ct=r("div"),Ft=r("h3"),Wl=D("How "),oe=r("span"),Kl=D(Ba),Yl=D(` vary by household social-economic\r
                        factors`),Gl=p(),ce=r("p"),ce.textContent=Pa,jl=p(),nt=r("div"),fe=r("div"),fe.innerHTML=Oa,Xl=p(),de=r("strong"),de.textContent=Fa,Zl=p(),Jl=r("br"),Ql=p(),we=r("span"),we.textContent=Ha,$l=p(),q=r("div"),ta=r("br"),ea=p(),Ht=r("button"),la=D("Scotland"),aa=p(),Ut=r("button"),sa=D("Northern Ireland"),na=p(),zt=r("button"),ra=D("England"),ia=p(),Rt=r("button"),oa=D("Wales"),ca=p(),fa=r("br"),da=p(),qt=r("button"),qt.textContent=Ua,ua=p(),Wt=r("div"),Wt.innerHTML=za,va=p(),ue=r("div"),Kt=r("div");for(let u=0;u<K.length;u+=1)K[u].c();Ge=p(),is(ve.$$.fragment),this.h()},l(u){os(t.$$.fragment,u),l=m(u),a=i(u,"DIV",{class:!0});var L=b(a);o=i(L,"DIV",{class:!0});var H=b(o);c=i(H,"DIV",{class:!0});var he=b(c);f=i(he,"DIV",{class:!0});var Qe=b(f);_=i(Qe,"DIV",{class:!0});var $e=b(_);y=i($e,"P",{class:!0,"data-svelte-h":!0}),A(y)!=="svelte-1flv0v9"&&(y.textContent=w),g=m($e),k=i($e,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),A(k)!=="svelte-1d58oxe"&&(k.textContent=tt),$e.forEach(d),F=m(Qe),N=i(Qe,"DIV",{class:!0});var De=b(N);T=i(De,"H1",{class:!0});var Se=b(T);M=i(Se,"IMG",{src:!0,alt:!0,class:!0}),O=m(Se),z=i(Se,"DIV",{style:!0}),b(z).forEach(d),ft=m(Se),et=S(Se,s[15]),Se.forEach(d),me=m(De),_t=i(De,"DIV",{style:!0}),b(_t).forEach(d),Lt=m(De),Tt=i(De,"P",{class:!0});var Ga=b(Tt);be=S(Ga,s[16]),Ga.forEach(d),De.forEach(d),Qe.forEach(d),Zt=m(he),rt=i(he,"DIV",{class:!0});var Gt=b(rt);lt=i(Gt,"DIV",{class:!0});var ja=b(lt);at=i(ja,"DIV",{class:!0});var ke=b(at);dt=i(ke,"DIV",{class:!0});var tl=b(dt);Y=i(tl,"DIV",{class:!0});var el=b(Y);G=i(el,"IMG",{class:!0,src:!0,alt:!0}),Le=m(el),ut=i(el,"DIV",{class:!0});var ll=b(ut);X&&X.l(ll),ge=m(ll),yt=i(ll,"SPAN",{class:!0,"data-svelte-h":!0}),A(yt)!=="svelte-tlhydp"&&(yt.textContent=ze),ll.forEach(d),el.forEach(d),Te=m(tl),kt.l(tl),tl.forEach(d),Ve=m(ke),vt=i(ke,"DIV",{class:!0});var al=b(vt);pt=i(al,"DIV",{class:!0});var sl=b(pt);Et=i(sl,"IMG",{class:!0,src:!0,alt:!0}),Ne=m(sl),v=i(sl,"DIV",{class:!0});var Xa=b(v);Z&&Z.l(Xa),Xa.forEach(d),sl.forEach(d),h=m(al),At.l(al),al.forEach(d),x=m(ke),B=i(ke,"DIV",{class:!0});var nl=b(B);P=i(nl,"DIV",{class:!0});var rl=b(P);j=i(rl,"IMG",{class:!0,src:!0,alt:!0}),R=m(rl),J&&J.l(rl),rl.forEach(d),Jt=m(nl),ht=i(nl,"DIV",{class:!0,"data-svelte-h":!0}),A(ht)!=="svelte-1v3rfza"&&(ht.textContent=C),nl.forEach(d),ke.forEach(d),ja.forEach(d),it=m(Gt),wt=i(Gt,"H3",{class:!0,"data-svelte-h":!0}),A(wt)!=="svelte-1vkchgj"&&(wt.textContent=Me),ml=m(Gt),_e=i(Gt,"DIV",{class:!0}),b(_e).forEach(d),bl=m(Gt),ye=i(Gt,"DIV",{class:!0}),b(ye).forEach(d),Gt.forEach(d),he.forEach(d),H.forEach(d),gl=m(L),Q&&Q.l(L),qe=m(L),Vt=i(L,"DIV",{class:!0});var il=b(Vt);Nt=i(il,"DIV",{id:!0});var ol=b(Nt);Qt=i(ol,"DIV",{class:!0,"data-svelte-h":!0}),A(Qt)!=="svelte-ll1i43"&&(Qt.innerHTML=Ca),_l=m(ol),Ct=i(ol,"DIV",{id:!0,class:!0});var cl=b(Ct);V=i(cl,"DIV",{class:!0});var U=b(V);Mt=i(U,"H3",{class:!0});var fl=b(Mt);yl=S(fl,"Total "),$t=i(fl,"SPAN",{style:!0});var Za=b($t);El=S(Za,Da),Za.forEach(d),wl=S(fl," over time 2025-2050"),fl.forEach(d),Cl=m(U),It.l(U),We=m(U),te=i(U,"DIV",{class:!0,"data-svelte-h":!0}),A(te)!=="svelte-1yzemw8"&&(te.innerHTML=Sa),Dl=m(U),Ee=i(U,"DIV",{class:!0}),b(Ee).forEach(d),Sl=m(U),kl=i(U,"BR",{}),Al=m(U),Dt=i(U,"H3",{class:!0});var Be=b(Dt);Il=S(Be,"Distribution of "),ee=i(Be,"SPAN",{style:!0});var Ja=b(ee);xl=S(Ja,ka),Ja.forEach(d),Ll=S(Be,` across UK\r
                        \r
\r
                        `),le=i(Be,"SPAN",{class:!0,"data-svelte-h":!0}),A(le)!=="svelte-7glovi"&&(le.innerHTML=Aa),Be.forEach(d),Tl=m(U),xt.l(U),Ke=m(U),ae=i(U,"DIV",{class:!0,"data-svelte-h":!0}),A(ae)!=="svelte-1yzemw8"&&(ae.innerHTML=Ia),Vl=m(U),Bt=i(U,"DIV",{class:!0,"data-svelte-h":!0}),A(Bt)!=="svelte-17463th"&&(Bt.innerHTML=xa),Nl=m(U),Ml=i(U,"BR",{}),U.forEach(d),Bl=m(cl),st=i(cl,"DIV",{class:!0});var bt=b(st);Pt=i(bt,"H3",{class:!0});var dl=b(Pt);Pl=S(dl,"Per Capita "),se=i(dl,"SPAN",{style:!0});var Qa=b(se);Ol=S(Qa,La),Qa.forEach(d),Fl=S(dl," by UK local authorities"),dl.forEach(d),Hl=m(bt),ne=i(bt,"P",{class:!0,"data-svelte-h":!0}),A(ne)!=="svelte-32j67s"&&(ne.textContent=Ta),Ul=m(bt),re=i(bt,"DIV",{class:!0,"data-svelte-h":!0}),A(re)!=="svelte-1pbiq4x"&&(re.innerHTML=Va),zl=m(bt),$&&$.l(bt),Ye=m(bt),St=i(bt,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),A(St)!=="svelte-1bex1ev"&&(St.innerHTML=Na),bt.forEach(d),cl.forEach(d),ol.forEach(d),Rl=m(il),Ot=i(il,"DIV",{id:!0});var ul=b(Ot);ie=i(ul,"DIV",{class:!0,"data-svelte-h":!0}),A(ie)!=="svelte-1l51yw7"&&(ie.innerHTML=Ma),ql=m(ul),mt=i(ul,"DIV",{id:!0,class:!0,style:!0});var vl=b(mt);ct=i(vl,"DIV",{id:!0,class:!0});var jt=b(ct);Ft=i(jt,"H3",{class:!0});var hl=b(Ft);Wl=S(hl,"How "),oe=i(hl,"SPAN",{style:!0});var $a=b(oe);Kl=S($a,Ba),$a.forEach(d),Yl=S(hl,` vary by household social-economic\r
                        factors`),hl.forEach(d),Gl=m(jt),ce=i(jt,"P",{class:!0,"data-svelte-h":!0}),A(ce)!=="svelte-r5sqj1"&&(ce.textContent=Pa),jl=m(jt),nt=i(jt,"DIV",{id:!0,class:!0});var gt=b(nt);fe=i(gt,"DIV",{class:!0,"data-svelte-h":!0}),A(fe)!=="svelte-131efpe"&&(fe.innerHTML=Oa),Xl=m(gt),de=i(gt,"STRONG",{style:!0,"data-svelte-h":!0}),A(de)!=="svelte-1s0qlts"&&(de.textContent=Fa),Zl=m(gt),Jl=i(gt,"BR",{}),Ql=m(gt),we=i(gt,"SPAN",{"data-svelte-h":!0}),A(we)!=="svelte-av8zq9"&&(we.textContent=Ha),$l=m(gt),q=i(gt,"DIV",{class:!0});var ot=b(q);ta=i(ot,"BR",{}),ea=m(ot),Ht=i(ot,"BUTTON",{class:!0,"data-nation":!0,style:!0});var ts=b(Ht);la=S(ts,"Scotland"),ts.forEach(d),aa=m(ot),Ut=i(ot,"BUTTON",{class:!0,"data-nation":!0,style:!0});var es=b(Ut);sa=S(es,"Northern Ireland"),es.forEach(d),na=m(ot),zt=i(ot,"BUTTON",{class:!0,"data-nation":!0,style:!0});var ls=b(zt);ra=S(ls,"England"),ls.forEach(d),ia=m(ot),Rt=i(ot,"BUTTON",{class:!0,"data-nation":!0,style:!0});var as=b(Rt);oa=S(as,"Wales"),as.forEach(d),ca=m(ot),fa=i(ot,"BR",{}),da=m(ot),qt=i(ot,"BUTTON",{class:!0,"data-svelte-h":!0}),A(qt)!=="svelte-2t5u5r"&&(qt.textContent=Ua),ot.forEach(d),gt.forEach(d),ua=m(jt),Wt=i(jt,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),A(Wt)!=="svelte-p1d3q2"&&(Wt.innerHTML=za),jt.forEach(d),va=m(vl),ue=i(vl,"DIV",{id:!0,class:!0});var ss=b(ue);Kt=i(ss,"DIV",{id:!0,class:!0});var ns=b(Kt);for(let pa=0;pa<K.length;pa+=1)K[pa].l(ns);ns.forEach(d),ss.forEach(d),vl.forEach(d),ul.forEach(d),il.forEach(d),L.forEach(d),Ge=m(u),os(ve.$$.fragment,u),this.h()},h(){n(y,"class","page-subtitle svelte-b9v0tr"),n(k,"type","button"),n(k,"class","data-btn"),n(_,"class","header-bar"),Fe(M.src,I=s[17])||n(M,"src",I),n(M,"alt","Icon"),n(M,"class","heading-icon svelte-b9v0tr"),Xt(z,"margin-top","10px"),n(T,"class","page-title svelte-b9v0tr"),Xt(_t,"margin-top","14px"),n(Tt,"class","definition svelte-b9v0tr"),n(N,"class","title-container"),n(f,"class","header-text svelte-b9v0tr"),n(G,"class","aggregation-icon-small svelte-b9v0tr"),Fe(G.src,Ue=ba)||n(G,"src",Ue),n(G,"alt","icon"),n(yt,"class","small svelte-b9v0tr"),n(ut,"class","waffle-value svelte-b9v0tr"),n(Y,"class","waffle-value-container svelte-b9v0tr"),n(dt,"class","waffle-stat svelte-b9v0tr"),n(Et,"class","aggregation-icon-small svelte-b9v0tr"),Fe(Et.src,Re=ga)||n(Et,"src",Re),n(Et,"alt","icon"),n(v,"class","waffle-value svelte-b9v0tr"),n(pt,"class","waffle-value-container svelte-b9v0tr"),n(vt,"class","waffle-stat svelte-b9v0tr"),n(j,"class","aggregation-icon-small svelte-b9v0tr"),Fe(j.src,E=Rn)||n(j,"src",E),n(j,"alt","icon"),n(P,"class","waffle-value-container svelte-b9v0tr"),n(ht,"class","waffle-caption svelte-b9v0tr"),n(B,"class","waffle-stat svelte-b9v0tr"),n(at,"class","waffle-stats svelte-b9v0tr"),n(lt,"class","waffle-label svelte-b9v0tr"),n(wt,"class","component-title"),n(_e,"class","waffle-el"),n(ye,"class","waffle-bg svelte-b9v0tr"),n(rt,"class","header-waffle-wrapper svelte-b9v0tr"),n(c,"class","header-content svelte-b9v0tr"),n(o,"class","section header svelte-b9v0tr"),n(Qt,"class","section-header"),n($t,"style",s[13]),n(Mt,"class","component-title"),n(te,"class","aggregation-icon-container"),n(Ee,"class","plot-bar svelte-b9v0tr"),n(ee,"style",s[13]),n(le,"class","tooltip-term"),n(Dt,"class","component-title"),n(ae,"class","aggregation-icon-container"),n(Bt,"class","plot-bar svelte-b9v0tr"),n(V,"class","component singlevis"),n(se,"style",s[13]),n(Pt,"class","component-title"),n(ne,"class","description svelte-b9v0tr"),n(re,"class","aggregation-icon-container2 svelte-b9v0tr"),n(St,"id","map"),n(St,"class","svelte-b9v0tr"),n(st,"class","component column"),n(Ct,"id","vis-block"),n(Ct,"class","svelte-b9v0tr"),n(Nt,"id","overview"),n(ie,"class","section-header"),n(oe,"style",s[13]),n(Ft,"class","component-title"),n(ce,"class","explanation"),n(fe,"class","aggregation-icon-container2 svelte-b9v0tr"),Xt(de,"margin-bottom","0.8rem"),n(Ht,"class","nation-button svelte-b9v0tr"),n(Ht,"data-nation","S"),Xt(Ht,"background-color",xe(s[14])[0]),n(Ut,"class","nation-button svelte-b9v0tr"),n(Ut,"data-nation","N"),Xt(Ut,"background-color",xe(s[14])[1]),n(zt,"class","nation-button svelte-b9v0tr"),n(zt,"data-nation","E"),Xt(zt,"background-color",xe(s[14])[2]),n(Rt,"class","nation-button svelte-b9v0tr"),n(Rt,"data-nation","W"),Xt(Rt,"background-color",xe(s[14])[3]),n(qt,"class","reset-button svelte-b9v0tr"),n(q,"class","legend-buttons svelte-b9v0tr"),n(nt,"id","se-legend"),n(nt,"class","legend-box svelte-b9v0tr"),n(Wt,"id","se-disclaimer"),n(Wt,"class","disclaimer-box svelte-b9v0tr"),n(ct,"id","se-title"),n(ct,"class","svelte-b9v0tr"),n(Kt,"id","multiple-plots"),n(Kt,"class","svelte-b9v0tr"),n(ue,"id","multiple-comp"),n(ue,"class","svelte-b9v0tr"),n(mt,"id","se-block"),n(mt,"class","component svelte-b9v0tr"),Xt(mt,"margin-left","1rem"),n(Ot,"id","compare"),n(Vt,"class","section"),n(a,"class","page-container")},m(u,L){cs(t,u,L),W(u,l,L),W(u,a,L),e(a,o),e(o,c),e(c,f),e(f,_),e(_,y),e(_,g),e(_,k),e(f,F),e(f,N),e(N,T),e(T,M),e(T,O),e(T,z),e(T,ft),e(T,et),e(N,me),e(N,_t),e(N,Lt),e(N,Tt),e(Tt,be),e(c,Zt),e(c,rt),e(rt,lt),e(lt,at),e(at,dt),e(dt,Y),e(Y,G),e(Y,Le),e(Y,ut),X&&X.m(ut,null),e(ut,ge),e(ut,yt),e(dt,Te),kt.m(dt,null),e(at,Ve),e(at,vt),e(vt,pt),e(pt,Et),e(pt,Ne),e(pt,v),Z&&Z.m(v,null),e(vt,h),At.m(vt,null),e(at,x),e(at,B),e(B,P),e(P,j),e(P,R),J&&J.m(P,null),e(B,Jt),e(B,ht),e(rt,it),e(rt,wt),e(rt,ml),e(rt,_e),s[24](_e),e(rt,bl),e(rt,ye),s[25](ye),e(a,gl),Q&&Q.m(a,null),e(a,qe),e(a,Vt),e(Vt,Nt),e(Nt,Qt),e(Nt,_l),e(Nt,Ct),e(Ct,V),e(V,Mt),e(Mt,yl),e(Mt,$t),e($t,El),e(Mt,wl),e(V,Cl),It.m(V,null),e(V,We),e(V,te),e(V,Dl),e(V,Ee),s[26](Ee),e(V,Sl),e(V,kl),e(V,Al),e(V,Dt),e(Dt,Il),e(Dt,ee),e(ee,xl),e(Dt,Ll),e(Dt,le),e(V,Tl),xt.m(V,null),e(V,Ke),e(V,ae),e(V,Vl),e(V,Bt),s[27](Bt),e(V,Nl),e(V,Ml),e(Ct,Bl),e(Ct,st),e(st,Pt),e(Pt,Pl),e(Pt,se),e(se,Ol),e(Pt,Fl),e(st,Hl),e(st,ne),e(st,Ul),e(st,re),e(st,zl),$&&$.m(st,null),e(st,Ye),e(st,St),s[28](St),e(Vt,Rl),e(Vt,Ot),e(Ot,ie),e(Ot,ql),e(Ot,mt),e(mt,ct),e(ct,Ft),e(Ft,Wl),e(Ft,oe),e(oe,Kl),e(Ft,Yl),e(ct,Gl),e(ct,ce),e(ct,jl),e(ct,nt),e(nt,fe),e(nt,Xl),e(nt,de),e(nt,Zl),e(nt,Jl),e(nt,Ql),e(nt,we),e(nt,$l),e(nt,q),e(q,ta),e(q,ea),e(q,Ht),e(Ht,la),e(q,aa),e(q,Ut),e(Ut,sa),e(q,na),e(q,zt),e(zt,ra),e(q,ia),e(q,Rt),e(Rt,oa),e(q,ca),e(q,fa),e(q,da),e(q,qt),e(ct,ua),e(ct,Wt),e(mt,va),e(mt,ue),e(ue,Kt);for(let H=0;H<K.length;H+=1)K[H]&&K[H].m(Kt,null);s[30](a),W(u,Ge,L),cs(ve,u,L),Yt=!0,ha||(Ra=[Ea(k,"click",s[19]),Ea(qt,"click",s[18])],ha=!0)},p(u,L){if(u[4]?X?X.p(u,L):(X=Ds(u),X.c(),X.m(ut,ge)):X&&(X.d(1),X=null),je!==(je=qa(u))&&(kt.d(1),kt=je(u),kt&&(kt.c(),kt.m(dt,null))),u[4]?Z?Z.p(u,L):(Z=Ss(u),Z.c(),Z.m(v,null)):Z&&(Z.d(1),Z=null),Xe!==(Xe=Wa(u))&&(At.d(1),At=Xe(u),At&&(At.c(),At.m(vt,null))),u[4]?J?J.p(u,L):(J=ks(u),J.c(),J.m(P,null)):J&&(J.d(1),J=null),u[9]?Q?Q.p(u,L):(Q=As(u),Q.c(),Q.m(a,qe)):Q&&(Q.d(1),Q=null),(!Yt||L[0]&8192)&&n($t,"style",u[13]),Ze!==(Ze=Ka(u))&&(It.d(1),It=Ze(u),It&&(It.c(),It.m(V,We))),(!Yt||L[0]&8192)&&n(ee,"style",u[13]),Je!==(Je=Ya(u))&&(xt.d(1),xt=Je(u),xt&&(xt.c(),xt.m(V,Ke))),(!Yt||L[0]&8192)&&n(se,"style",u[13]),u[7]?$?$.p(u,L):($=xs(u),$.c(),$.m(st,Ye)):$&&($.d(1),$=null),(!Yt||L[0]&8192)&&n(oe,"style",u[13]),L[0]&2){Ce=vs(Es);let H;for(H=0;H<Ce.length;H+=1){const he=Cs(u,Ce,H);K[H]?K[H].p(he,L):(K[H]=Ls(he),K[H].c(),K[H].m(Kt,null))}for(;H<K.length;H+=1)K[H].d(1);K.length=Ce.length}},i(u){Yt||(fs(t.$$.fragment,u),fs(ve.$$.fragment,u),Yt=!0)},o(u){ds(t.$$.fragment,u),ds(ve.$$.fragment,u),Yt=!1},d(u){u&&(d(l),d(a),d(Ge)),us(t,u),X&&X.d(),kt.d(),Z&&Z.d(),At.d(),J&&J.d(),s[24](null),s[25](null),Q&&Q.d(),It.d(),s[26](null),xt.d(),s[27](null),$&&$.d(),s[28](null),qs(K,u),s[30](null),us(ve,u),ha=!1,Ws(Ra)}}}let Ie=400;function Ts(s){return{overview:"Overview",compare:"Compare by socio-economic factor"}[s]||""}function mr(s,t,l){let a,o,c,f,_,y={},{data:w}=t;const g=w.coBenefit,k=_s.find(v=>v.id===g)?.label??g,tt=Cn.find(v=>v.id===g)?.def??g;let F,N,T,M,I,O,z,ft,et=!1,me,_t,Lt;dt().then(()=>{let v=JSON.parse(JSON.stringify(Oe(g)));v.shift(),v=v.reverse(),l(7,_t=new wn(N,"LAD",Lt,"total",!0,"LAD",!1,v)),_t.initMap()});let Tt=Dn(g),be=!1,Zt="";const rt=["overview","compare"];let lt=null;function at(){const v=window.scrollY;l(9,be=v>250);for(const h of rt){const x=document.getElementById(h);if(!x)continue;const B=x.getBoundingClientRect();if(B.top<=150&&B.bottom>=150){Zt!==h&&En.capture("section entered (coben)",{section_name:h}),l(10,Zt=h);break}}}rs(()=>(window.addEventListener("scroll",at),at(),()=>window.removeEventListener("scroll",at))),Ks(()=>{window.removeEventListener("scroll",at)});async function dt(){F=await Ae(Pn(g)),T=await Ae(On(g)),I=await Ae(Fn()),I=I.sort((h,x)=>x.total-h.total),O=await Ae(Hn()),O=O.sort((h,x)=>x.total_value-h.total_value);const v=O.find(h=>h.co_benefit_type===g);l(6,me=v?v.value_per_capita:null),N=await Ae(Un(g)),console.log("data",N),z=await Ae(zn()),l(5,ft=z[0].total_value),ys.forEach(h=>{T[h]=+T[h]}),l(4,M=mn(F,h=>h.total/1e3).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),l(21,et=!0),Sn(c)}let Y,G;function Ue(v,h){if(!Y)return;const x=20,B=15,P=Math.floor(200/x),j=B*P,E=I.reduce((C,it)=>C+it.total,0),R=[];for(const C of I){const it=Math.round(Math.abs(C.total)/E*j),wt=C.total<0;for(let Me=0;Me<it;Me++)R.push({type:C.co_benefit_type,negative:wt})}for(;R.length<j;)R.push({type:"empty"});R.sort((C,it)=>C.type==="empty"?1:it.type==="empty"?-1:C.negative&&!it.negative?1:!C.negative&&it.negative?-1:0);const Jt=R.map((C,it)=>({x:it%B,y:Math.floor(it/B),...C})),ht=Pe({width:x*B,height:x*P,margin:0,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:_s.map(C=>C.id),range:Nn,unknown:"#eee",legend:!1},marks:[bs(Jt.filter(C=>!C.negative),{x:C=>C.x*x,y:C=>C.y*x,fill:"type",fillOpacity:C=>h&&C.type!==h?.15:1}),bs(Jt.filter(C=>C.negative),{x:C=>C.x*x,y:C=>C.y*x,stroke:"type",strokeOpacity:C=>h&&C.type!==h?.15:1,strokeWidth:1,fill:"none"})]});G&&(l(12,G.style.width=`${x*B}px`,G),l(12,G.style.height=`${v-100}px`,G)),l(11,Y.innerHTML="",Y),Y.append(ht)}function Le(){f?.append(Pe({height:Ie/1.5,...Mn,marginLeft:90,marginTop:40,marginRight:40,y:{label:"Number of Datazones",grid:!0},x:{label:"Total co-benefit value (£, billion)",labelArrow:"none",labelAnchor:"center"},style:{fontSize:"15px"},marks:[_n(N,Xn({y:"count"},{x:v=>v.total*1e3,fill:Oe(g)[0],tip:!0,fillOpacity:.5,stroke:Oe(g)[0],strokeWidth:2})),gs({anchor:"left",label:"Number of datazones",labelArrow:"none",labelAnchor:"center"}),pl([0],{stroke:"#333",strokeWidth:.75})]}))}function ut(){let v=F.flatMap(h=>kn.map(x=>({time:x,value:h[x],total:h.total,scenario:h.scenario})));_?.append(Pe({height:Ie/1.5,marginLeft:80,marginRight:40,marginBottom:60,marginTop:40,style:{fontSize:"15px"},x:{type:"band",tickFormat:h=>h.replace(/^Y/,"").replace("_","-"),label:"Year Intervals"},y:{grid:!0,label:"Total (£, billion)"},marks:[Ns(v,Bs({y:"sum"},{x:"time",y:h=>h.value/1e3,fill:Oe(g)[0],tip:{format:{y:h=>`${h.toFixed(2)}`,x:!1}},fillOpacity:.8,insetLeft:15,insetRight:15})),gs({anchor:"left",grid:!0,label:"Total co-benefit value (£, billion)",labelArrow:"none",labelAnchor:"center"}),pl([0],{stroke:"#333",strokeWidth:.75})]}))}function ge(){const v=h=>h.LAD.startsWith("S")?"S":h.LAD.startsWith("N")?"N":h.LAD.startsWith("E")?"E":"W";ys.forEach((h,x)=>{let B;if(An.includes(h)){const P=Bn[h],j=P?Object.keys(P).map(Number):N.filter(E=>E.SEFMAME==h).map(E=>E.SE);B=Pe({style:{fontSize:"14px",textAnchor:"middle",fill:"#333"},height:Ie/1.4,width:Ie*1.2,marginLeft:70,marginBottom:h==="Typology"?80:60,marginRight:20,marginTop:30,x:{domain:j,label:ma(h),tickFormat:E=>P?.[E]??E,tickRotate:h==="Typology"?-20:0},y:{label:"£, thousand",labelArrow:"none"},color:{legend:!0},marks:[nr(N.filter(E=>E.SEFMAME==h),{x:"SE",y:E=>E.total*1e3,r:1.8,fillOpacity:.7,fill:In(g)}),pl([0],{stroke:"#333",strokeWidth:.75})]})}else{let P=N.filter(E=>E.SEFMAME===h&&(lt===null||v(E)==lt)),j=P.reduce(function(E,R){return E.SE<R.SE?E:R});B=Pe({style:{fontSize:"14px",textAnchor:"middle",fill:"#333"},height:Ie/1.4,width:Ie*1.2,marginLeft:70,marginBottom:60,marginRight:20,marginTop:30,x:{label:ma(h),labelArrow:!1,labelAnchor:"center"},y:{label:"£, thousand",labelArrow:!1},color:{legend:!0},marks:[x==6?ms(["Each dot represents a Local Authority District (LAD)."],{x:["Under_35","Over_65","Unemployment"].includes(h)?j.SE*100:j.SE,y:j.total*1e3,textPadding:6,opacity:.5,lineWidth:12}):[],wa(P,{x:E=>["Under_35","Over_65","Unemployment"].includes(h)?E.SE*100:E.SE,y:E=>E.total*1e3,fill:E=>{const R=["S","N","E","W"].indexOf(v(E));return xe(g)[R]},r:2,fillOpacity:.1,channels:{LAD:"LAD"}}),wa(P,{x:E=>["Under_35","Over_65","Unemployment"].includes(h)?E.SE*100:E.SE,y:E=>E.total*1e3,fill:E=>{const R=["S","N","E","W"].indexOf(v(E));return xe(g)[R]},r:3.5,fillOpacity:1}),bn({label:ma(h),labelArrow:!1,labelAnchor:"center"}),pl([0],{stroke:"#333",strokeWidth:.75}),Ms([0],{stroke:"#333",strokeWidth:.75}),ms(P,gn({x:E=>["Under_35","Over_65","Unemployment"].includes(h)?E.SE*100:E.SE,y:E=>E.total*1e3,title:E=>[`LAD: ${E.LAD}`,"Click to navigate to page."].join(`
`)}))]}),console.log(ws(B).select('g[aria-label="dot"]').selectAll("circle")),ws(B).selectAll('g[aria-label="dot"]').selectAll("circle").style("cursor","pointer").on("click",(E,R,Jt)=>{let ht=P[R].LAD;window.open(`${yn}/location?location=${ht}`,"_blank").focus()})}y[h]?.append(B)})}function yt(){l(22,lt=null)}function ze(){let v=F;v.forEach(x=>{delete x.scenario});const h=xn(v);Ln(h,`cobenefits_${k}.csv`),Tn("/Scotland_co-benefits_CB7_2045.pdf","readme.pdf")}rs(()=>{Vn(c),document.querySelectorAll(".nation-button").forEach(v=>{v.addEventListener("click",()=>{const h=v.getAttribute("data-nation");lt===h?(l(22,lt=null),v.classList.remove("active")):(l(22,lt=h),document.querySelectorAll(".nation-button").forEach(x=>x.classList.remove("active")),v.classList.add("active"))})})});function Te(v){pe[v?"unshift":"push"](()=>{Y=v,l(11,Y)})}function Ve(v){pe[v?"unshift":"push"](()=>{G=v,l(12,G)})}function vt(v){pe[v?"unshift":"push"](()=>{_=v,l(0,_)})}function pt(v){pe[v?"unshift":"push"](()=>{f=v,l(3,f)})}function Et(v){pe[v?"unshift":"push"](()=>{Lt=v,l(8,Lt)})}function Re(v,h){pe[v?"unshift":"push"](()=>{y[h.id]=v,l(1,y)})}function Ne(v){pe[v?"unshift":"push"](()=>{c=v,l(2,c)})}return s.$$set=v=>{"data"in v&&l(20,w=v.data)},s.$$.update=()=>{s.$$.dirty[0]&2097153&&et&&(_?.firstChild?.remove(),Le(),ut(),Ue(300,g)),s.$$.dirty[0]&6291458&&et&&lt!==void 0&&(Object.values(y).forEach(v=>{v.firstChild?.remove()}),ge()),s.$$.dirty[0]&8388608&&l(13,o=`color: ${a}; font-weight: bold; font-size: 22px;`)},l(23,a=Oe(g)[0]),[_,y,c,f,M,ft,me,_t,Lt,be,Zt,Y,G,o,g,k,tt,Tt,yt,ze,w,et,lt,a,Te,Ve,vt,pt,Et,Re,Ne]}class Nr extends js{constructor(t){super(),Xs(this,t,mr,pr,Rs,{data:20},null,[-1,-1])}}export{Nr as component};
