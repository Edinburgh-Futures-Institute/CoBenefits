import{s as Al,a as D,e as f,t as I,g as A,c as d,b as _,p as re,d as L,f as n,q as u,v as ie,i as M,h as r,x as rl,y as Vl,z as Sl,n as Pe,H as Il,A as Ll,w as wl,j as Te,B as Ve,r as jt}from"../chunks/scheduler.CM2kgFFE.js";import{S as Cl,i as Ml,c as Tl,b as Pl,m as Bl,t as Fl,a as xl,d as Hl}from"../chunks/index.BdkIKoLm.js";import{N as Rl,e as mt}from"../chunks/NavigationBar.wfWUH9cH.js";import"../chunks/transform.BNP73y-7.js";import{aw as Nl,ap as Ht,aq as Ol,t as il,au as jl,X as nl,ax as ol,ay as zl,az as Wl,aA as cl,G as Re,P as Gl,K as Ne,J as lt,R as Ul,H as gt,Q as bt}from"../chunks/index.gHFfw6XA.js";import{b as Yl}from"../chunks/paths.D_GsmK_s.js";import{M as ql}from"../chunks/mapUK.BsL-1tB-.js";import{l as Jl,m as Xl,n as Kl,o as Ql,p as Zl,q as $l,i as at,d as je,s as kt,t as Rt,h as ul,e as ea}from"../chunks/globals.BaB0XPZ2.js";import{g as Nt,o as ta,r as la,f as aa}from"../chunks/duckdb.BvMxQizY.js";import{p as Et}from"../chunks/per_capita.COcMrZFY.js";import{n as sa}from"../chunks/nice.ZYjiKfzK.js";import{t as ra,b as ia}from"../chunks/bin.4FhIxFiV.js";import{d as Oe}from"../chunks/dot.CFFCJmC7.js";import{b as na}from"../chunks/bar.DO1Cp6Am.js";var oa=Array.prototype,ca=oa.slice;function Ot(l){return()=>l}function fl(){var l=Nl,e=Ht,t=ra;function s(i){Array.isArray(i)||(i=Array.from(i));var a,c=i.length,p,v,m=new Array(c);for(a=0;a<c;++a)m[a]=l(i[a],a,i);var g=e(m),k=g[0],b=g[1],T=t(m,k,b);if(!Array.isArray(T)){const y=b,F=+T;if(e===Ht&&([k,b]=sa(k,b,F)),T=Ol(k,b,F),T[0]<=k&&(v=il(k,b,F)),T[T.length-1]>=b)if(y>=b&&e===Ht){const C=il(k,b,F);isFinite(C)&&(C>0?b=(Math.floor(b/C)+1)*C:C<0&&(b=(Math.ceil(b*-C)+1)/-C))}else T.pop()}for(var w=T.length,E=0,P=w;T[E]<=k;)++E;for(;T[P-1]>b;)--P;(E||P<w)&&(T=T.slice(E,P),w=P-E);var x=new Array(w+1),O;for(a=0;a<=w;++a)O=x[a]=[],O.x0=a>0?T[a-1]:k,O.x1=a<w?T[a]:b;if(isFinite(v)){if(v>0)for(a=0;a<c;++a)(p=m[a])!=null&&k<=p&&p<=b&&x[Math.min(w,Math.floor((p-k)/v))].push(i[a]);else if(v<0){for(a=0;a<c;++a)if((p=m[a])!=null&&k<=p&&p<=b){const y=Math.floor((k-p)*v);x[Math.min(w,y+(T[y]<=p))].push(i[a])}}}else for(a=0;a<c;++a)(p=m[a])!=null&&k<=p&&p<=b&&x[jl(T,p,0,w)].push(i[a]);return x}return s.value=function(i){return arguments.length?(l=typeof i=="function"?i:Ot(i),s):l},s.domain=function(i){return arguments.length?(e=typeof i=="function"?i:Ot([i[0],i[1]]),s):e},s.thresholds=function(i){return arguments.length?(t=typeof i=="function"?i:Ot(Array.isArray(i)?ca.call(i):i),s):t},s}const ua=""+new URL("../assets/negative.BhphYhmj.png",import.meta.url).href;function dl(l,e,t){const s=l.slice();return s[55]=e[t],s[56]=e,s[57]=t,s}function vl(l,e,t){const s=l.slice();return s[55]=e[t],s}function fa(l){let e;return{c(){e=f("div"),this.h()},l(t){e=d(t,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){u(e,"class","plot svelte-1v4er05")},m(t,s){M(t,e,s),l[27](e)},p:Pe,d(t){t&&n(e),l[27](null)}}}function da(l){let e;return{c(){e=f("div"),this.h()},l(t){e=d(t,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){u(e,"class","plot svelte-1v4er05")},m(t,s){M(t,e,s),l[26](e)},p:Pe,d(t){t&&n(e),l[26](null)}}}function va(l){let e,t,s=Se(l[9],l[21])+"",i,a,c,p;return{c(){e=I("Max value: "),t=f("strong"),i=I(s),a=I("("),c=I(l[11]),p=I(")")},l(v){e=L(v,"Max value: "),t=d(v,"STRONG",{});var m=_(t);i=L(m,s),m.forEach(n),a=L(v,"("),c=L(v,l[11]),p=L(v,")")},m(v,m){M(v,e,m),M(v,t,m),r(t,i),M(v,a,m),M(v,c,m),M(v,p,m)},p(v,m){m[0]&512&&s!==(s=Se(v[9],v[21])+"")&&Te(i,s),m[0]&2048&&Te(c,v[11])},d(v){v&&(n(e),n(t),n(a),n(c),n(p))}}}function ha(l){let e;return{c(){e=I("-")},l(t){e=L(t,"-")},m(t,s){M(t,e,s)},p:Pe,d(t){t&&n(e)}}}function pa(l){let e,t,s=Se(l[7],l[21])+"",i;return{c(){e=I("Average value: "),t=f("strong"),i=I(s),this.h()},l(a){e=L(a,"Average value: "),t=d(a,"STRONG",{style:!0});var c=_(t);i=L(c,s),c.forEach(n),this.h()},h(){ie(t,"color","#BD210E")},m(a,c){M(a,e,c),M(a,t,c),r(t,i)},p(a,c){c[0]&128&&s!==(s=Se(a[7],a[21])+"")&&Te(i,s)},d(a){a&&(n(e),n(t))}}}function _a(l){let e,t,s=Se(l[8],l[21])+"",i;return{c(){e=I("Most common category: "),t=f("strong"),i=I(s),this.h()},l(a){e=L(a,"Most common category: "),t=d(a,"STRONG",{style:!0});var c=_(t);i=L(c,s),c.forEach(n),this.h()},h(){ie(t,"color","#BD210E")},m(a,c){M(a,e,c),M(a,t,c),r(t,i)},p(a,c){c[0]&256&&s!==(s=Se(a[8],a[21])+"")&&Te(i,s)},d(a){a&&(n(e),n(t))}}}function ma(l){let e,t,s=Se(l[10],l[21])+"",i,a,c,p;return{c(){e=I("Min value: "),t=f("strong"),i=I(s),a=I("("),c=I(l[12]),p=I(")")},l(v){e=L(v,"Min value: "),t=d(v,"STRONG",{});var m=_(t);i=L(m,s),m.forEach(n),a=L(v,"("),c=L(v,l[12]),p=L(v,")")},m(v,m){M(v,e,m),M(v,t,m),r(t,i),M(v,a,m),M(v,c,m),M(v,p,m)},p(v,m){m[0]&1024&&s!==(s=Se(v[10],v[21])+"")&&Te(i,s),m[0]&4096&&Te(c,v[12])},d(v){v&&(n(e),n(t),n(a),n(c),n(p))}}}function ga(l){let e;return{c(){e=I("-")},l(t){e=L(t,"-")},m(t,s){M(t,e,s)},p:Pe,d(t){t&&n(e)}}}function hl(l){let e,t,s,i,a;return{c(){e=f("div"),t=f("div"),s=f("span"),i=I(l[18]),a=I(" >>"),this.h()},l(c){e=d(c,"DIV",{class:!0});var p=_(e);t=d(p,"DIV",{class:!0});var v=_(t);s=d(v,"SPAN",{class:!0});var m=_(s);i=L(m,l[18]),a=L(m," >>"),m.forEach(n),v.forEach(n),p.forEach(n),this.h()},h(){u(s,"class","mini-header-text"),u(t,"class","mini-header-content"),u(e,"class","mini-header")},m(c,p){M(c,e,p),r(e,t),r(t,s),r(s,i),r(s,a)},p:Pe,d(c){c&&n(e)}}}function ba(l){let e;return{c(){e=f("div"),this.h()},l(t){e=d(t,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){u(e,"class","plot svelte-1v4er05")},m(t,s){M(t,e,s),l[29](e)},p:Pe,d(t){t&&n(e),l[29](null)}}}function ka(l){let e;return{c(){e=f("div"),this.h()},l(t){e=d(t,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){u(e,"class","plot svelte-1v4er05")},m(t,s){M(t,e,s),l[28](e)},p:Pe,d(t){t&&n(e),l[28](null)}}}function pl(l){let e,t,s=l[13].legend(l[22]).outerHTML+"";return{c(){e=f("div"),t=new Il(!1),this.h()},l(i){e=d(i,"DIV",{id:!0});var a=_(e);t=Ll(a,!1),a.forEach(n),this.h()},h(){t.a=null,u(e,"id","legend")},m(i,a){M(i,e,a),t.m(s,e)},p(i,a){a[0]&8192&&s!==(s=i[13].legend(i[22]).outerHTML+"")&&t.p(s)},d(i){i&&n(e)}}}function _l(l){let e,t,s,i,a=l[55].def+"",c,p,v,m,g,k,b,T="here",w,E,P=l[55].id.toLowerCase()+"",x,O,y;return{c(){e=f("div"),t=f("div"),s=f("div"),i=D(),c=I(a),p=D(),v=f("br"),m=D(),g=f("div"),k=I("Click "),b=f("a"),b.textContent=T,w=I(` for the \r
                                `),E=f("span"),x=I(P),O=D(),y=I("report page."),this.h()},l(F){e=d(F,"DIV",{class:!0});var C=_(e);t=d(C,"DIV",{class:!0});var H=_(t);s=d(H,"DIV",{style:!0}),_(s).forEach(n),i=A(H),c=L(H,a),p=A(H),v=d(H,"BR",{}),m=A(H),g=d(H,"DIV",{class:!0});var J=_(g);k=L(J,"Click "),b=d(J,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0,"data-svelte-h":!0}),re(b)!=="svelte-gjrxnt"&&(b.textContent=T),w=L(J,` for the \r
                                `),E=d(J,"SPAN",{style:!0});var W=_(E);x=L(W,P),O=A(W),W.forEach(n),y=L(J,"report page."),J.forEach(n),H.forEach(n),C.forEach(n),this.h()},h(){ie(s,"height","0.8em"),u(b,"class","link"),u(b,"href",Yl+"/cobenefit?cobenefit="+l[55].id),u(b,"target","_blank"),u(b,"rel","noopener noreferrer"),ie(b,"color",at(l[55].id)),ie(E,"color",at(l[55].id)),u(g,"class","link-box svelte-1v4er05"),u(t,"class","legend-description svelte-1v4er05"),u(e,"class","legend-description-box svelte-1v4er05")},m(F,C){M(F,e,C),r(e,t),r(t,s),r(t,i),r(t,c),r(t,p),r(t,v),r(t,m),r(t,g),r(g,k),r(g,b),r(g,w),r(g,E),r(E,x),r(E,O),r(g,y)},d(F){F&&n(e)}}}function ml(l){let e,t,s,i,a,c=l[55].label+"",p,v,m,g,k=l[16].has(l[55].id)?"▲":"▼",b,T,w=l[16].has(l[55].id),E,P,x;function O(){return l[31](l[55])}let y=w&&_l(l);return{c(){e=f("div"),t=f("div"),s=f("span"),i=D(),a=f("span"),p=I(c),m=D(),g=f("span"),b=I(k),T=D(),y&&y.c(),E=D(),this.h()},l(F){e=d(F,"DIV",{class:!0});var C=_(e);t=d(C,"DIV",{class:!0,style:!0});var H=_(t);s=d(H,"SPAN",{class:!0,style:!0}),_(s).forEach(n),i=A(H),a=d(H,"SPAN",{class:!0});var J=_(a);p=L(J,c),J.forEach(n),m=A(H),g=d(H,"SPAN",{class:!0});var W=_(g);b=L(W,k),W.forEach(n),H.forEach(n),T=A(C),y&&y.l(C),E=A(C),C.forEach(n),this.h()},h(){u(s,"class","legend-color svelte-1v4er05"),ie(s,"background-color",at(l[55].id)),u(a,"class",v="legend-text "+(l[16].has(l[55].id)?"expanded":"")+" svelte-1v4er05"),u(g,"class","toggle-icon svelte-1v4er05"),u(t,"class","legend-header svelte-1v4er05"),ie(t,"cursor","pointer"),u(e,"class","legend-item svelte-1v4er05")},m(F,C){M(F,e,C),r(e,t),r(t,s),r(t,i),r(t,a),r(a,p),r(t,m),r(t,g),r(g,b),r(e,T),y&&y.m(e,null),r(e,E),P||(x=wl(t,"click",O),P=!0)},p(F,C){l=F,C[0]&65536&&v!==(v="legend-text "+(l[16].has(l[55].id)?"expanded":"")+" svelte-1v4er05")&&u(a,"class",v),C[0]&65536&&k!==(k=l[16].has(l[55].id)?"▲":"▼")&&Te(b,k),C[0]&65536&&(w=l[16].has(l[55].id)),w?y||(y=_l(l),y.c(),y.m(e,E)):y&&(y.d(1),y=null)},d(F){F&&n(e),y&&y.d(),P=!1,x()}}}function Ea(l){let e,t;return{c(){e=f("img"),this.h()},l(s){e=d(s,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){u(e,"class","sm-icon svelte-1v4er05"),jt(e.src,t=Et)||u(e,"src",t),u(e,"alt","icon")},m(s,i){M(s,e,i)},d(s){s&&n(e)}}}function ya(l){let e,t,s,i,a;return{c(){e=f("img"),s=D(),i=f("img"),this.h()},l(c){e=d(c,"IMG",{class:!0,src:!0,alt:!0}),s=A(c),i=d(c,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){u(e,"class","sm-icon svelte-1v4er05"),jt(e.src,t=Et)||u(e,"src",t),u(e,"alt","icon"),u(i,"class","sm-icon svelte-1v4er05"),jt(i.src,a=ua)||u(i,"src",a),u(i,"alt","icon")},m(c,p){M(c,e,p),M(c,s,p),M(c,i,p)},d(c){c&&(n(e),n(s),n(i))}}}function Da(l){let e,t=l[55];const s=()=>l[33](e,t),i=()=>l[33](null,t);return{c(){e=f("div"),this.h()},l(a){e=d(a,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){u(e,"class","plot svelte-1v4er05")},m(a,c){M(a,e,c),s()},p(a,c){l=a,t!==l[55]&&(i(),t=l[55],s())},d(a){a&&n(e),i()}}}function Aa(l){let e,t=l[55];const s=()=>l[32](e,t),i=()=>l[32](null,t);return{c(){e=f("div"),this.h()},l(a){e=d(a,"DIV",{class:!0}),_(e).forEach(n),this.h()},h(){u(e,"class","plot svelte-1v4er05")},m(a,c){M(a,e,c),s()},p(a,c){l=a,t!==l[55]&&(i(),t=l[55],s())},d(a){a&&n(e),i()}}}function gl(l){let e,t,s,i=l[55].label+"",a,c,p,v;function m(E,P){return E[55].id=="Hassle costs"||E[55].id=="Road repairs"||E[55].id=="Road safety"||E[55].id=="Congestion"||E[55].id=="Excess heat"?ya:Ea}let k=m(l)(l);function b(E,P){return je.includes(E[17])?Aa:Da}let w=b(l)(l);return{c(){e=f("div"),t=f("div"),s=f("h3"),a=I(i),c=D(),k.c(),p=D(),w.c(),v=D(),this.h()},l(E){e=d(E,"DIV",{class:!0});var P=_(e);t=d(P,"DIV",{class:!0});var x=_(t);s=d(x,"H3",{class:!0});var O=_(s);a=L(O,i),O.forEach(n),c=A(x),k.l(x),x.forEach(n),p=A(P),w.l(P),v=A(P),P.forEach(n),this.h()},h(){u(s,"class","component-chart-title svelte-1v4er05"),u(t,"class","component-chart-title-container svelte-1v4er05"),u(e,"class","plot-container svelte-1v4er05")},m(E,P){M(E,e,P),r(e,t),r(t,s),r(s,a),r(t,c),k.m(t,null),r(e,p),w.m(e,null),r(e,v)},p(E,P){w.p(E,P)},d(E){E&&n(e),k.d(),w.d()}}}function Va(l){let e,t,s,i,a,c,p,v="SEF Report",m,g,k,b,T,w,E,P,x,O,y,F,C,H,J,W,j,te,me,ne,de,st='<p class="section-subtitle svelte-1v4er05">Overview</p>',Z,$,G,oe,ze,ge,We,ve,rt="Each point in the chart below represents a UK data zone (LSOA).",Ge,he,it=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Et}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each AREA.</span></div>`,Ue,ce,z,be,Ye,qe,pe,nt="Scroll for zooming in and out.",Je,_e,ot=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Et}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,Xe,o,R,S,X,N,zt='<p class="section-subtitle svelte-1v4er05">By Co-benefits</p>',yt,ue,U,ke,Dt,Ee,Wt=l[18].toLowerCase()+"",At,Vt,St,Ie,Gt="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",It,Lt,wt,Le,Ut='<div class="tooltip-wrapper"><span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>',Ct,ee,Be,Yt="Co-benefits:",Mt,Tt,Ke,Pt,Bt,ye,qt='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',Ft,we,De,ct;e=new Rl({});function bl(h,B){return je.includes(h[17])?da:fa}let Qe=bl(l)(l);function kl(h,B){return je.includes(h[17])?ha:va}let Ze=kl(l)(l);function El(h,B){return je.includes(h[17])?_a:pa}let $e=El(l)(l);function yl(h,B){return je.includes(h[17])?ga:ma}let et=yl(l)(l),K=l[15]&&hl(l);function Dl(h,B){return je.includes(h[17])?ka:ba}let tt=Dl(l)(l),Q=l[13]&&pl(l),Fe=mt(kt),Y=[];for(let h=0;h<Fe.length;h+=1)Y[h]=ml(vl(l,Fe,h));let xe=mt(kt),q=[];for(let h=0;h<xe.length;h+=1)q[h]=gl(dl(l,xe,h));return{c(){Tl(e.$$.fragment),t=D(),s=f("div"),i=f("div"),a=f("div"),c=f("div"),p=f("p"),p.textContent=v,m=D(),g=f("div"),k=f("h1"),b=I(l[20]),T=D(),w=f("p"),E=I(l[19]),P=D(),x=f("div"),Qe.c(),O=D(),y=f("div"),F=f("p"),Ze.c(),C=D(),H=f("p"),$e.c(),J=D(),W=f("p"),et.c(),j=D(),K&&K.c(),te=D(),me=f("div"),ne=f("div"),de=f("div"),de.innerHTML=st,Z=D(),$=f("div"),G=f("div"),oe=f("h3"),ze=I(l[18]),ge=I(" against per capita co-benefit values (£, thousand)"),We=D(),ve=f("p"),ve.textContent=rt,Ge=D(),he=f("div"),he.innerHTML=it,Ue=D(),tt.c(),ce=D(),z=f("div"),be=f("h3"),Ye=I(l[18]),qe=D(),pe=f("p"),pe.textContent=nt,Je=D(),_e=f("div"),_e.innerHTML=ot,Xe=D(),Q&&Q.c(),o=D(),R=f("div"),S=D(),X=f("div"),N=f("div"),N.innerHTML=zt,yt=D(),ue=f("div"),U=f("div"),ke=f("h3"),Dt=I("Plotting "),Ee=f("span"),At=I(Wt),Vt=I(" against the gain/loss (£, thousand) per capita for each co-benefit"),St=D(),Ie=f("p"),Ie.textContent=Gt,It=D(),Lt=f("br"),wt=D(),Le=f("div"),Le.innerHTML=Ut,Ct=D(),ee=f("div"),Be=f("strong"),Be.textContent=Yt,Mt=f("br"),Tt=I(`Expand for detailed explanation\r
                    `),Ke=f("div"),Pt=D();for(let h=0;h<Y.length;h+=1)Y[h].c();Bt=D(),ye=f("div"),ye.innerHTML=qt,Ft=D(),we=f("div"),De=f("div");for(let h=0;h<q.length;h+=1)q[h].c();this.h()},l(h){Pl(e.$$.fragment,h),t=A(h),s=d(h,"DIV",{class:!0});var B=_(s);i=d(B,"DIV",{class:!0});var V=_(i);a=d(V,"DIV",{class:!0});var le=_(a);c=d(le,"DIV",{class:!0});var ut=_(c);p=d(ut,"P",{class:!0,"data-svelte-h":!0}),re(p)!=="svelte-3h7aqf"&&(p.textContent=v),m=A(ut),g=d(ut,"DIV",{class:!0});var ft=_(g);k=d(ft,"H1",{class:!0});var Jt=_(k);b=L(Jt,l[20]),Jt.forEach(n),T=A(ft),w=d(ft,"P",{class:!0});var Xt=_(w);E=L(Xt,l[19]),Xt.forEach(n),ft.forEach(n),ut.forEach(n),P=A(le),x=d(le,"DIV",{class:!0});var Kt=_(x);Qe.l(Kt),Kt.forEach(n),O=A(le),y=d(le,"DIV",{class:!0});var He=_(y);F=d(He,"P",{class:!0});var Qt=_(F);Ze.l(Qt),Qt.forEach(n),C=A(He),H=d(He,"P",{class:!0});var Zt=_(H);$e.l(Zt),Zt.forEach(n),J=A(He),W=d(He,"P",{class:!0});var $t=_(W);et.l($t),$t.forEach(n),He.forEach(n),le.forEach(n),V.forEach(n),j=A(B),K&&K.l(B),te=A(B),me=d(B,"DIV",{class:!0});var el=_(me);ne=d(el,"DIV",{id:!0});var dt=_(ne);de=d(dt,"DIV",{class:!0,"data-svelte-h":!0}),re(de)!=="svelte-ll1i43"&&(de.innerHTML=st),Z=A(dt),$=d(dt,"DIV",{id:!0,class:!0});var vt=_($);G=d(vt,"DIV",{class:!0});var Ae=_(G);oe=d(Ae,"H3",{class:!0});var xt=_(oe);ze=L(xt,l[18]),ge=L(xt," against per capita co-benefit values (£, thousand)"),xt.forEach(n),We=A(Ae),ve=d(Ae,"P",{class:!0,"data-svelte-h":!0}),re(ve)!=="svelte-1ozkrs5"&&(ve.textContent=rt),Ge=A(Ae),he=d(Ae,"DIV",{class:!0,"data-svelte-h":!0}),re(he)!=="svelte-xpsz06"&&(he.innerHTML=it),Ue=A(Ae),tt.l(Ae),Ae.forEach(n),ce=A(vt),z=d(vt,"DIV",{class:!0});var fe=_(z);be=d(fe,"H3",{class:!0});var tl=_(be);Ye=L(tl,l[18]),tl.forEach(n),qe=A(fe),pe=d(fe,"P",{class:!0,"data-svelte-h":!0}),re(pe)!=="svelte-1ask2se"&&(pe.textContent=nt),Je=A(fe),_e=d(fe,"DIV",{class:!0,"data-svelte-h":!0}),re(_e)!=="svelte-1dxsuae"&&(_e.innerHTML=ot),Xe=A(fe),Q&&Q.l(fe),o=A(fe),R=d(fe,"DIV",{id:!0,class:!0}),_(R).forEach(n),fe.forEach(n),vt.forEach(n),dt.forEach(n),el.forEach(n),S=A(B),X=d(B,"DIV",{id:!0});var ht=_(X);N=d(ht,"DIV",{class:!0,"data-svelte-h":!0}),re(N)!=="svelte-1av3fse"&&(N.innerHTML=zt),yt=A(ht),ue=d(ht,"DIV",{id:!0,class:!0,style:!0});var pt=_(ue);U=d(pt,"DIV",{id:!0,class:!0});var ae=_(U);ke=d(ae,"H3",{class:!0});var _t=_(ke);Dt=L(_t,"Plotting "),Ee=d(_t,"SPAN",{style:!0});var ll=_(Ee);At=L(ll,Wt),ll.forEach(n),Vt=L(_t," against the gain/loss (£, thousand) per capita for each co-benefit"),_t.forEach(n),St=A(ae),Ie=d(ae,"P",{class:!0,"data-svelte-h":!0}),re(Ie)!=="svelte-1h97e3k"&&(Ie.textContent=Gt),It=A(ae),Lt=d(ae,"BR",{}),wt=A(ae),Le=d(ae,"DIV",{class:!0,"data-svelte-h":!0}),re(Le)!=="svelte-nlkeox"&&(Le.innerHTML=Ut),Ct=A(ae),ee=d(ae,"DIV",{id:!0,class:!0});var Ce=_(ee);Be=d(Ce,"STRONG",{"data-svelte-h":!0}),re(Be)!=="svelte-1qu96kx"&&(Be.textContent=Yt),Mt=d(Ce,"BR",{}),Tt=L(Ce,`Expand for detailed explanation\r
                    `),Ke=d(Ce,"DIV",{style:!0}),_(Ke).forEach(n),Pt=A(Ce);for(let Me=0;Me<Y.length;Me+=1)Y[Me].l(Ce);Ce.forEach(n),Bt=A(ae),ye=d(ae,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),re(ye)!=="svelte-11g4vkg"&&(ye.innerHTML=qt),ae.forEach(n),Ft=A(pt),we=d(pt,"DIV",{id:!0,class:!0});var al=_(we);De=d(al,"DIV",{id:!0,class:!0});var sl=_(De);for(let Me=0;Me<q.length;Me+=1)q[Me].l(sl);sl.forEach(n),al.forEach(n),pt.forEach(n),ht.forEach(n),B.forEach(n),this.h()},h(){u(p,"class","page-subtitle svelte-1v4er05"),u(k,"class","page-title svelte-1v4er05"),u(w,"class","definition"),u(g,"class","title-container"),u(c,"class","header-text svelte-1v4er05"),u(x,"class","header-vis svelte-1v4er05"),u(F,"class","definition-stat svelte-1v4er05"),u(H,"class","definition-stat svelte-1v4er05"),u(W,"class","definition-stat svelte-1v4er05"),u(y,"class","header-stats svelte-1v4er05"),u(a,"class","header-content svelte-1v4er05"),u(i,"class","section header svelte-1v4er05"),u(de,"class","section-header"),u(oe,"class","component-title"),u(ve,"class","description"),u(he,"class","aggregation-icon-container"),u(G,"class","component column"),u(be,"class","component-title"),u(pe,"class","description"),u(_e,"class","aggregation-icon-container2 svelte-1v4er05"),u(R,"id","map"),u(R,"class","svelte-1v4er05"),u(z,"class","component column"),u($,"id","vis-block"),u($,"class","svelte-1v4er05"),u(ne,"id","overview"),u(me,"class","section"),u(N,"class","section-header"),ie(Ee,"background-color","#555"),ie(Ee,"padding","0 1px"),ie(Ee,"color","#f9f9f9"),u(ke,"class","component-title"),u(Ie,"class","explanation"),u(Le,"class","aggregation-icon-container2 svelte-1v4er05"),ie(Ke,"height","0.8em"),u(ee,"id","main-legend"),u(ee,"class","legend-box svelte-1v4er05"),u(ye,"id","se-disclaimer"),u(ye,"class","disclaimer-box svelte-1v4er05"),u(U,"id","se-title"),u(U,"class","svelte-1v4er05"),u(De,"id","multiple-plots"),u(De,"class","svelte-1v4er05"),u(we,"id","multiple-comp"),u(we,"class","svelte-1v4er05"),u(ue,"id","se-block"),u(ue,"class","component svelte-1v4er05"),ie(ue,"margin-left","1rem"),u(X,"id","compare"),u(s,"class","page-container")},m(h,B){Bl(e,h,B),M(h,t,B),M(h,s,B),r(s,i),r(i,a),r(a,c),r(c,p),r(c,m),r(c,g),r(g,k),r(k,b),r(g,T),r(g,w),r(w,E),r(a,P),r(a,x),Qe.m(x,null),r(a,O),r(a,y),r(y,F),Ze.m(F,null),r(y,C),r(y,H),$e.m(H,null),r(y,J),r(y,W),et.m(W,null),r(s,j),K&&K.m(s,null),r(s,te),r(s,me),r(me,ne),r(ne,de),r(ne,Z),r(ne,$),r($,G),r(G,oe),r(oe,ze),r(oe,ge),r(G,We),r(G,ve),r(G,Ge),r(G,he),r(G,Ue),tt.m(G,null),r($,ce),r($,z),r(z,be),r(be,Ye),r(z,qe),r(z,pe),r(z,Je),r(z,_e),r(z,Xe),Q&&Q.m(z,null),r(z,o),r(z,R),l[30](R),r(s,S),r(s,X),r(X,N),r(X,yt),r(X,ue),r(ue,U),r(U,ke),r(ke,Dt),r(ke,Ee),r(Ee,At),r(ke,Vt),r(U,St),r(U,Ie),r(U,It),r(U,Lt),r(U,wt),r(U,Le),r(U,Ct),r(U,ee),r(ee,Be),r(ee,Mt),r(ee,Tt),r(ee,Ke),r(ee,Pt);for(let V=0;V<Y.length;V+=1)Y[V]&&Y[V].m(ee,null);r(U,Bt),r(U,ye),r(ue,Ft),r(ue,we),r(we,De);for(let V=0;V<q.length;V+=1)q[V]&&q[V].m(De,null);l[34](s),ct=!0},p(h,B){if(Qe.p(h,B),Ze.p(h,B),$e.p(h,B),et.p(h,B),h[15]?K?K.p(h,B):(K=hl(h),K.c(),K.m(s,te)):K&&(K.d(1),K=null),tt.p(h,B),h[13]?Q?Q.p(h,B):(Q=pl(h),Q.c(),Q.m(z,o)):Q&&(Q.d(1),Q=null),B[0]&8454144){Fe=mt(kt);let V;for(V=0;V<Fe.length;V+=1){const le=vl(h,Fe,V);Y[V]?Y[V].p(le,B):(Y[V]=ml(le),Y[V].c(),Y[V].m(ee,null))}for(;V<Y.length;V+=1)Y[V].d(1);Y.length=Fe.length}if(B[0]&131137){xe=mt(kt);let V;for(V=0;V<xe.length;V+=1){const le=dl(h,xe,V);q[V]?q[V].p(le,B):(q[V]=gl(le),q[V].c(),q[V].m(De,null))}for(;V<q.length;V+=1)q[V].d(1);q.length=xe.length}},i(h){ct||(Fl(e.$$.fragment,h),ct=!0)},o(h){xl(e.$$.fragment,h),ct=!1},d(h){h&&(n(t),n(s)),Hl(e,h),Qe.d(),Ze.d(),$e.d(),et.d(),K&&K.d(),tt.d(),Q&&Q.d(),l[30](null),rl(Y,h),rl(q,h),l[34](null)}}}let se=400;function Se(l,e){return e==="£"?`${e}${l}`:`${l} ${e}`}function Sa(l,e,t){let s,i,a,c,p,v={},m={},g,k,b,T=!1,w,E,P,x,O,y,F,C,H,J,{data:W}=e;const j=W.SEF;console.log("SEF ",j);const te=Jl.find(o=>o.id===j)?.id??j,me=Xl.find(o=>o.id===j)?.label??j,ne=Kl.find(o=>o.id===j)?.def??j,de=Ql.find(o=>o.id===j)?.description??j,st=Zl.find(o=>o.id===j)?.short_units??j,Z=$l.find(o=>o.id===j)?.units??j;let $,G,oe=!1;const ze=["overview","compare"];function ge(){const o=window.scrollY;t(15,oe=o>250);for(const R of ze){const S=document.getElementById(R);if(!S)continue;const X=S.getBoundingClientRect();if(X.top<=150&&X.bottom>=150)break}}Vl(()=>(window.addEventListener("scroll",ge),ge(),()=>window.removeEventListener("scroll",ge))),Sl(()=>{window.removeEventListener("scroll",ge)});async function We(){g=await Nt(ta(j)),console.log("totals",g),k=await Nt(la(j)),console.log("by cobens",k),b=await Nt(aa()),console.log("per_capita_data",b),t(7,w=(nl(g,o=>o.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),H=ol(g,o=>o.val),J=ul[te],t(8,E=J?.[H]??H??"N/A"),console.log("Average Value: ",w),y=zl(g,o=>o.val),t(11,O=y!==-1?g[y].Lookup_Value:"N/A"),t(9,P=(g[y]?.val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),C=Wl(g,o=>o.val),t(12,F=C!==-1?g[C].Lookup_Value:"N/A"),t(10,x=(g[C]?.val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),Rt.forEach(o=>{k[o]=+k[o]}),t(25,T=!0)}We().then(()=>{t(13,$=new ql(g,"LSOA",G,"val",!1,"Lookup_Value",!1)),$.initMap()});function ve(){const o=nl(g,S=>S.val)??0,R=cl(fl().thresholds(20).value(S=>S.val)(g),S=>S.length);i?.append(Re({height:se/1.9,width:se*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${Z}`},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[Gl(g,ia({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),Ne([o],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:o,label:"Average"}},tip:{format:{average:S=>`${S.toFixed(2)}`,x:!1}}}),Oe(g,{x:{value:o,thresholds:20},y:R+.1*R,r:5,fill:"#BD210E"}),lt({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}))}function rt(){const o=ol(g,N=>N.val)??0,R=cl(fl().thresholds(20).value(N=>N.val)(g),N=>N.length),S=ul[te],X=S?Object.keys(S).map(Number):g.filter(N=>N.SEFMAME==te).map(N=>N.SE);c?.append(Re({height:se/1.9,width:se*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:te==="Typology"?80:50,x:{domain:X,label:ea(te),tickFormat:N=>S?.[N]??N,tickRotate:te==="Typology"?-10:0},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[na(g,Ul({y:"count"},{x:"val",fill:"black",opacity:.5})),Ne([o],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:o,label:"Average"}},tip:{format:{average:N=>`${N.toFixed(2)}`,x:!1}}}),Oe(g,{x:{value:o,thresholds:20},y:R+.1*R,r:5,fill:"#BD210E"})]}))}function Ge(){a?.append(Re({height:se*1.5,width:se*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[gt([0],{stroke:"#333",strokeWidth:1.25}),Ne([0],{stroke:"#333",strokeWidth:.75}),Oe(g,{x:"val",y:o=>o.total_per_capita*1e3,fill:o=>o.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${Z}`},value:{value:o=>o.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),bt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),lt({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}))}function he(){const R=g.map(S=>({...S,jittered_val:S.val+(Math.random()-.5)*.2}));p?.append(Re({height:se*1.5,width:se*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[gt([0],{stroke:"#333",strokeWidth:1.25}),Ne([0],{stroke:"#333",strokeWidth:.75}),Oe(R,{x:"jittered_val",y:S=>S.total_per_capita*1e3,fill:S=>S.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${Z}`},value:{value:S=>S.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),bt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),lt({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}))}function it(){Rt.forEach(o=>{let R;R=Re({height:se,width:se,marginLeft:60,marginTop:10,marginRight:10,marginBottom:60,x:{label:null},y:{label:null},style:{fontSize:"12px"},marks:[gt([0],{stroke:"#333",strokeWidth:1.25}),Ne([0],{stroke:"#333",strokeWidth:.75}),Oe(k.filter(S=>S.co_benefit_type==o),{x:"val",y:"total",fill:at(o),fillOpacity:.5,r:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),bt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),lt({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}),v[o]?.append(R)})}function Ue(){const R=k.map(S=>({...S,jittered_val:S.val+(Math.random()-.5)*.2}));Rt.forEach(S=>{let X;X=Re({height:se,width:se,marginLeft:60,marginTop:10,marginRight:10,marginBottom:60,x:{label:null},y:{label:null},style:{fontSize:"12px"},marks:[gt([0],{stroke:"#333",strokeWidth:1.25}),Ne([0],{stroke:"#333",strokeWidth:.75}),Oe(R.filter(N=>N.co_benefit_type==S),{x:"jittered_val",y:"total",fill:at(S),fillOpacity:.5,r:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),bt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),lt({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}),m[S]?.append(X)})}let ce=new Set;function z(o){ce.has(o)?ce.delete(o):ce.add(o),t(16,ce=new Set(ce))}function be(o){Ve[o?"unshift":"push"](()=>{c=o,t(4,c)})}function Ye(o){Ve[o?"unshift":"push"](()=>{i=o,t(2,i)})}function qe(o){Ve[o?"unshift":"push"](()=>{p=o,t(5,p)})}function pe(o){Ve[o?"unshift":"push"](()=>{a=o,t(3,a)})}function nt(o){Ve[o?"unshift":"push"](()=>{G=o,t(14,G)})}const Je=o=>z(o.id);function _e(o,R){Ve[o?"unshift":"push"](()=>{m[R.id]=o,t(6,m)})}function ot(o,R){Ve[o?"unshift":"push"](()=>{v[R.id]=o,t(0,v)})}function Xe(o){Ve[o?"unshift":"push"](()=>{s=o,t(1,s)})}return l.$$set=o=>{"data"in o&&t(24,W=o.data)},l.$$.update=()=>{l.$$.dirty[0]&33554433&&(Object.values(v).forEach(o=>{o.firstChild?.remove()}),T&&(ve(),he(),rt(),Ge(),it(),Ue()))},[v,s,i,a,c,p,m,w,E,P,x,O,F,$,G,oe,ce,te,me,ne,de,st,Z,z,W,T,be,Ye,qe,pe,nt,Je,_e,ot,Xe]}class Ya extends Cl{constructor(e){super(),Ml(this,e,Sa,Va,Al,{data:24},null,[-1,-1])}}export{Ya as component};
