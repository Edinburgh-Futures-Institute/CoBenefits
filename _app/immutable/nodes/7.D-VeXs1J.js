import{s as qt,d as At,n as Ct,r as Ht,o as Vt,e as Q}from"../chunks/scheduler.tir__IPy.js";import{S as Bt,i as Pt,e as s,b as Z,s as y,c as o,d as M,f as $,g as b,h as S,m as w,n as d,j as Ft,k as e,p as wt,q as Mt,o as Rt}from"../chunks/index.bU9Y8Vjw.js";import{e as kt}from"../chunks/each.-gASlQSi.js";import"../chunks/transform.Bxaw71Wc.js";import{p as nt,g as zt,m as mt,d as Dt,r as Lt,a as jt}from"../chunks/index.C2v7JTs9.js";import{M as Ot}from"../chunks/map.DBG5qYZc.js";import{S as pt,a as Xt}from"../chunks/globals.xEjTdJsR.js";import{b as Yt,a as ft,c as Nt}from"../chunks/bar.BQBIWyeb.js";import{l as Ut,a as xt}from"../chunks/link.TxI2aU3y.js";function Tt(a,n,i){const c=a.slice();return c[21]=n[i],c[22]=n,c[23]=i,c}function It(a){let n,i="",c=a[21];const g=()=>a[14](n,c),E=()=>a[14](null,c);return{c(){n=s("div"),n.innerHTML=i,this.h()},l(h){n=o(h,"DIV",{class:!0,"data-svelte-h":!0}),w(n)!=="svelte-18okkjt"&&(n.innerHTML=i),this.h()},h(){d(n,"class","plot")},m(h,p){Ft(h,n,p),g()},p(h,p){a=h,c!==a[21]&&(E(),c=a[21],g())},d(h){h&&b(n),E()}}}function Gt(a){let n,i,c,g,E,h,p,L,x,v,l,k,A,H,N,z,U,T,tt="Barchart",G,W,I,J,t,V="Distribution",u,B,vt="",gt,it,D,R,_t="Map",lt,j,rt,F,bt="",st,q,O,Et="Socio Economic Factors",ot,P,dt,yt,X=kt(pt),m=[];for(let f=0;f<X.length;f+=1)m[f]=It(Tt(a,X,f));return{c(){n=s("div"),i=s("div"),c=s("h1"),g=Z(a[6]),E=y(),h=s("p"),p=Z(a[6]),L=Z(" is ..."),x=y(),v=s("div"),l=s("div"),k=s("h3"),A=Z(a[6]),H=Z(" datazone distribution"),N=y(),z=s("input"),U=y(),T=s("label"),T.textContent=tt,G=s("br"),W=y(),I=s("input"),J=y(),t=s("label"),t.textContent=V,u=y(),B=s("div"),B.innerHTML=vt,it=y(),D=s("div"),R=s("h3"),R.textContent=_t,lt=y(),j=s("div"),rt=y(),F=s("div"),F.innerHTML=bt,st=y(),q=s("div"),O=s("h3"),O.textContent=Et,ot=y(),P=s("div");for(let f=0;f<m.length;f+=1)m[f].c();this.h()},l(f){n=o(f,"DIV",{class:!0});var C=M(n);i=o(C,"DIV",{class:!0});var r=M(i);c=o(r,"H1",{});var K=M(c);g=$(K,a[6]),K.forEach(b),E=S(r),h=o(r,"P",{});var ct=M(h);p=$(ct,a[6]),L=$(ct," is ..."),ct.forEach(b),r.forEach(b),x=S(C),v=o(C,"DIV",{id:!0,class:!0});var et=M(v);l=o(et,"DIV",{class:!0});var _=M(l);k=o(_,"H3",{});var ht=M(k);A=$(ht,a[6]),H=$(ht," datazone distribution"),ht.forEach(b),N=S(_),z=o(_,"INPUT",{type:!0,name:!0}),U=S(_),T=o(_,"LABEL",{for:!0,"data-svelte-h":!0}),w(T)!=="svelte-1hwbt9c"&&(T.textContent=tt),G=o(_,"BR",{}),W=S(_),I=o(_,"INPUT",{type:!0,name:!0}),J=S(_),t=o(_,"LABEL",{for:!0,"data-svelte-h":!0}),w(t)!=="svelte-27dm33"&&(t.textContent=V),u=S(_),B=o(_,"DIV",{class:!0,"data-svelte-h":!0}),w(B)!=="svelte-111cum5"&&(B.innerHTML=vt),_.forEach(b),it=S(et),D=o(et,"DIV",{class:!0});var Y=M(D);R=o(Y,"H3",{"data-svelte-h":!0}),w(R)!=="svelte-vcuthw"&&(R.textContent=_t),lt=S(Y),j=o(Y,"DIV",{id:!0}),M(j).forEach(b),rt=S(Y),F=o(Y,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),w(F)!=="svelte-1ej9vmv"&&(F.innerHTML=bt),Y.forEach(b),et.forEach(b),st=S(C),q=o(C,"DIV",{id:!0,class:!0});var at=M(q);O=o(at,"H3",{"data-svelte-h":!0}),w(O)!=="svelte-zqlelw"&&(O.textContent=Et),ot=S(at),P=o(at,"DIV",{id:!0,class:!0});var St=M(P);for(let ut=0;ut<m.length;ut+=1)m[ut].l(St);St.forEach(b),at.forEach(b),C.forEach(b),this.h()},h(){d(i,"class","component"),d(z,"type","radio"),d(z,"name","visType"),z.value="barchart",z.checked=!0,d(T,"for","html"),d(I,"type","radio"),d(I,"name","visType"),I.value="distribution",d(t,"for","javascript"),d(B,"class","plot"),d(l,"class","component column"),At(()=>a[11].call(l)),d(j,"id","map-legend"),d(F,"id","map"),d(F,"class","svelte-1qzzqci"),d(D,"class","component column"),d(v,"id","vis-block"),d(v,"class","svelte-1qzzqci"),d(P,"id","multiple-plots"),d(P,"class","svelte-1qzzqci"),d(q,"id","multiple-comp"),d(q,"class","component svelte-1qzzqci"),d(n,"class","page-container")},m(f,C){Ft(f,n,C),e(n,i),e(i,c),e(c,g),e(i,E),e(i,h),e(h,p),e(h,L),e(n,x),e(n,v),e(v,l),e(l,k),e(k,A),e(k,H),e(l,N),e(l,z),e(l,U),e(l,T),e(l,G),e(l,W),e(l,I),e(l,J),e(l,t),e(l,u),e(l,B),a[10](B),gt=wt(l,a[11].bind(l)),e(v,it),e(v,D),e(D,R),e(D,lt),e(D,j),a[12](j),e(D,rt),e(D,F),a[13](F),e(n,st),e(n,q),e(q,O),e(q,ot),e(q,P);for(let r=0;r<m.length;r+=1)m[r]&&m[r].m(P,null);a[15](n),dt||(yt=[Mt(z,"change",a[7]),Mt(I,"change",a[7])],dt=!0)},p(f,[C]){if(C&2){X=kt(pt);let r;for(r=0;r<X.length;r+=1){const K=Tt(f,X,r);m[r]?m[r].p(K,C):(m[r]=It(K),m[r].c(),m[r].m(P,null))}for(;r<m.length;r+=1)m[r].d(1);m.length=X.length}},i:Ct,o:Ct,d(f){f&&b(n),a[10](null),gt(),a[12](null),a[13](null),Rt(m,f),a[15](null),dt=!1,Ht(yt)}}}function Wt(a,n,i){let c,g,E={},h="barchart",p,{data:L}=n;const x=L.data,v=L.SEFData,l=L.coBenefit;let k,A,H;Vt(()=>{k=new Ot(x,"LSOA",A,"total"),k.initMap();let t=k.legend();H.append(t)});function N(){h=="barchart"?g?.append(nt({height:p/1.4,marginLeft:60,marginRight:60,marginBottom:60,y:{type:"band"},style:{fontSize:"18px"},marks:[Yt(x,zt({x:"mean"},{x:"total",y:"scenario"})),Ut(x,zt({x1:t=>mt(t)-Dt(t),x2:t=>mt(t)+Dt(t)},{x:"total",y:"scenario",stroke:"gray",strokeWidth:3}))]})):h=="distribution"&&g?.append(nt({height:p/1.4,marginLeft:60,marginRight:60,y:{label:"Datazones Frequency"},style:{fontSize:"18px"},facet:{data:x,y:"scenario"},marks:[xt(x,ft({y:"count"},{x:"total",tip:!0}))]}))}function z(){pt.forEach(t=>{let V;Xt.includes(t)?V=nt({height:p/2,width:330,marginLeft:80,marginBottom:60,marginRight:30,marginTop:60,y:{grid:!0,label:"mean value (£)"},x:{grid:!0,label:t,type:"band",tickFormat:u=>Math.floor(u)},style:{fontSize:"18px"},color:{legend:!0},marks:[Nt(v.filter(u=>u.SEFMAME==t),ft({y:"mean"},{x:u=>Math.floor(u.SE).toString(),y:"total"}))]}):V=nt({height:p/2,width:330,marginLeft:80,marginBottom:60,marginRight:30,marginTop:60,y:{grid:!0,label:"mean value (£)"},x:{grid:!0,label:t},style:{fontSize:"18px"},color:{legend:!0},marks:[xt(v.filter(u=>u.SEFMAME==t),ft({y:"mean"},{x:"SE",y:"total"})),Lt([mt(v.filter(u=>u.SEFMAME==t).map(u=>u.SE))],{stroke:"red"}),Lt([jt(v.filter(u=>u.SEFMAME==t).map(u=>u.SE))],{stroke:"blue"})]}),E[t]?.append(V)})}function U(t){i(9,h=t.currentTarget.value)}function T(t){Q[t?"unshift":"push"](()=>{g=t,i(0,g)})}function tt(){p=this.clientHeight,i(2,p)}function G(t){Q[t?"unshift":"push"](()=>{H=t,i(5,H)})}function W(t){Q[t?"unshift":"push"](()=>{A=t,i(4,A)})}function I(t,V){Q[t?"unshift":"push"](()=>{E[V]=t,i(1,E)})}function J(t){Q[t?"unshift":"push"](()=>{c=t,i(3,c)})}return a.$$set=t=>{"data"in t&&i(8,L=t.data)},a.$$.update=()=>{a.$$.dirty&519&&(g?.firstChild?.remove(),Object.values(E).forEach(t=>{t.firstChild?.remove()}),p&&(N(),z()))},[g,E,p,c,A,H,l,U,L,h,T,tt,G,W,I,J]}class ie extends Bt{constructor(n){super(),Pt(this,n,Wt,Gt,qt,{data:8})}}export{ie as component};
