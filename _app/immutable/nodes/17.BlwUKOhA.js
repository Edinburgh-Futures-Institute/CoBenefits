import{s as Fe,a as T,e as u,g as k,c as d,b as F,p as H,f as m,q as t,x as oe,i as $,h as a,y as Z,z as ke,r as Me,A as ce,w as xe,t as De,d as Be,n as Ue,B as Ve,C as Ie}from"../chunks/scheduler.C9ZL8GxQ.js";import{S as Pe,i as Oe,c as we,b as He,m as Ge,t as Re,a as je,d as ze}from"../chunks/index.vifww4_P.js";import{N as Ke,e as ue}from"../chunks/NavigationBar.DIR3r4ky.js";import{i as Ye,o as Je}from"../chunks/transform.BNP73y-7.js";import"../chunks/index.DsTuvus7.js";import{M as Ze}from"../chunks/mapUK.BWdkPha7.js";import{g as ie,d as Ee,e as ye,f as Qe,h as We,i as Xe}from"../chunks/duckdb.CVV-1lrt.js";import{C as de,S as be,a as Le,b as $e,c as Ce,d as et,g as Ne}from"../chunks/globals.BMB5lA47.js";function Se(r,e,l){const n=r.slice();return n[32]=e[l],n}function Ae(r,e,l){const n=r.slice();return n[29]=e[l],n}function tt(r){let e,l,n="Social Economic Factor",p,_,S=ue(Ce),i=[];for(let f=0;f<S.length;f+=1)i[f]=qe(Se(r,S,f));return{c(){e=u("div"),l=u("h2"),l.textContent=n,p=T(),_=u("div");for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l(f){e=d(f,"DIV",{class:!0});var o=F(e);l=d(o,"H2",{"data-svelte-h":!0}),H(l)!=="svelte-1ld89ev"&&(l.textContent=n),p=k(o),_=d(o,"DIV",{id:!0,class:!0});var s=F(_);for(let v=0;v<i.length;v+=1)i[v].l(s);s.forEach(m),o.forEach(m),this.h()},h(){t(_,"id","time"),t(_,"class","svelte-1qs88ie"),t(e,"class","tabcontent svelte-1qs88ie")},m(f,o){$(f,e,o),a(e,l),a(e,p),a(e,_);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(_,null)},p(f,o){if(o[0]&514){S=ue(Ce);let s;for(s=0;s<S.length;s+=1){const v=Se(f,S,s);i[s]?i[s].p(v,o):(i[s]=qe(v),i[s].c(),i[s].m(_,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=S.length}},d(f){f&&m(e),xe(i,f)}}}function lt(r){let e,l,n,p="Co-Benefits",_,S,i,f,o="Time",s,v,x,q,M,b="Total",L,h,A,U,G="2025-2029",le,J,D,Q,ae="2030-2034",P,O,z,w,c="2035-2039",y,B,K,R,se="2040-2044",ne,Y,W,ee,re="2045-2049",te,V,C=ue(de.concat({id:"total",label:"Total"})),g=[];for(let I=0;I<C.length;I+=1)g[I]=Te(Ae(r,C,I));return{c(){e=u("div"),l=u("div"),n=u("h2"),n.textContent=p,_=T();for(let I=0;I<g.length;I+=1)g[I].c();S=T(),i=u("div"),f=u("h2"),f.textContent=o,s=T(),v=u("div"),x=u("label"),q=u("input"),M=u("span"),M.textContent=b,L=T(),h=u("label"),A=u("input"),U=u("span"),U.textContent=G,le=T(),J=u("label"),D=u("input"),Q=u("span"),Q.textContent=ae,P=T(),O=u("label"),z=u("input"),w=u("span"),w.textContent=c,y=T(),B=u("label"),K=u("input"),R=u("span"),R.textContent=se,ne=T(),Y=u("label"),W=u("input"),ee=u("span"),ee.textContent=re,this.h()},l(I){e=d(I,"DIV",{class:!0});var j=F(e);l=d(j,"DIV",{class:!0});var E=F(l);n=d(E,"H2",{"data-svelte-h":!0}),H(n)!=="svelte-uglilz"&&(n.textContent=p),_=k(E);for(let ge=0;ge<g.length;ge+=1)g[ge].l(E);E.forEach(m),S=k(j),i=d(j,"DIV",{class:!0});var X=F(i);f=d(X,"H2",{"data-svelte-h":!0}),H(f)!=="svelte-hletp"&&(f.textContent=o),s=k(X),v=d(X,"DIV",{id:!0,class:!0});var N=F(v);x=d(N,"LABEL",{class:!0});var fe=F(x);q=d(fe,"INPUT",{type:!0,name:!0,class:!0}),M=d(fe,"SPAN",{class:!0,"data-svelte-h":!0}),H(M)!=="svelte-2fqrek"&&(M.textContent=b),fe.forEach(m),L=k(N),h=d(N,"LABEL",{class:!0});var ve=F(h);A=d(ve,"INPUT",{type:!0,name:!0,class:!0}),U=d(ve,"SPAN",{class:!0,"data-svelte-h":!0}),H(U)!=="svelte-177152l"&&(U.textContent=G),ve.forEach(m),le=k(N),J=d(N,"LABEL",{class:!0});var pe=F(J);D=d(pe,"INPUT",{type:!0,name:!0,class:!0}),Q=d(pe,"SPAN",{class:!0,"data-svelte-h":!0}),H(Q)!=="svelte-sne3j9"&&(Q.textContent=ae),pe.forEach(m),P=k(N),O=d(N,"LABEL",{class:!0});var he=F(O);z=d(he,"INPUT",{type:!0,name:!0,class:!0}),w=d(he,"SPAN",{class:!0,"data-svelte-h":!0}),H(w)!=="svelte-13ifhof"&&(w.textContent=c),he.forEach(m),y=k(N),B=d(N,"LABEL",{class:!0});var me=F(B);K=d(me,"INPUT",{type:!0,name:!0,class:!0}),R=d(me,"SPAN",{class:!0,"data-svelte-h":!0}),H(R)!=="svelte-1pug1mv"&&(R.textContent=se),me.forEach(m),ne=k(N),Y=d(N,"LABEL",{class:!0});var _e=F(Y);W=d(_e,"INPUT",{type:!0,name:!0,class:!0}),ee=d(_e,"SPAN",{class:!0,"data-svelte-h":!0}),H(ee)!=="svelte-3f05xd"&&(ee.textContent=re),_e.forEach(m),N.forEach(m),X.forEach(m),j.forEach(m),this.h()},h(){t(l,"class","component"),t(q,"type","radio"),t(q,"name","toggle"),q.value="total",q.checked=!0,t(q,"class","svelte-1qs88ie"),t(M,"class","svelte-1qs88ie"),t(x,"class","time-radio svelte-1qs88ie"),t(A,"type","radio"),t(A,"name","toggle"),A.value="Y2025_2029",t(A,"class","svelte-1qs88ie"),t(U,"class","svelte-1qs88ie"),t(h,"class","time-radio svelte-1qs88ie"),t(D,"type","radio"),t(D,"name","toggle"),D.value="Y2030_2034",t(D,"class","svelte-1qs88ie"),t(Q,"class","svelte-1qs88ie"),t(J,"class","time-radio svelte-1qs88ie"),t(z,"type","radio"),t(z,"name","toggle"),z.value="Y2035_2039",t(z,"class","svelte-1qs88ie"),t(w,"class","svelte-1qs88ie"),t(O,"class","time-radio svelte-1qs88ie"),t(K,"type","radio"),t(K,"name","toggle"),K.value="Y2040_2044",t(K,"class","svelte-1qs88ie"),t(R,"class","svelte-1qs88ie"),t(B,"class","time-radio svelte-1qs88ie"),t(W,"type","radio"),t(W,"name","toggle"),W.value="Y2045_2049",t(W,"class","svelte-1qs88ie"),t(ee,"class","svelte-1qs88ie"),t(Y,"class","time-radio svelte-1qs88ie"),t(v,"id","time"),t(v,"class","svelte-1qs88ie"),t(i,"class","component"),t(e,"class","tabcontent svelte-1qs88ie")},m(I,j){$(I,e,j),a(e,l),a(l,n),a(l,_);for(let E=0;E<g.length;E+=1)g[E]&&g[E].m(l,null);a(e,S),a(e,i),a(i,f),a(i,s),a(i,v),a(v,x),a(x,q),a(x,M),a(v,L),a(v,h),a(h,A),a(h,U),a(v,le),a(v,J),a(J,D),a(J,Q),a(v,P),a(v,O),a(O,z),a(O,w),a(v,y),a(v,B),a(B,K),a(B,R),a(v,ne),a(v,Y),a(Y,W),a(Y,ee),te||(V=[Z(q,"change",r[7]),Z(A,"change",r[7]),Z(D,"change",r[7]),Z(z,"change",r[7]),Z(K,"change",r[7]),Z(W,"change",r[7])],te=!0)},p(I,j){if(j[0]&64){C=ue(de.concat({id:"total",label:"Total"}));let E;for(E=0;E<C.length;E+=1){const X=Ae(I,C,E);g[E]?g[E].p(X,j):(g[E]=Te(X),g[E].c(),g[E].m(l,null))}for(;E<g.length;E+=1)g[E].d(1);g.length=C.length}},d(I){I&&m(e),xe(g,I),te=!1,ke(V)}}}function qe(r){let e,l,n,p,_=r[32].label+"",S,i,f,o;return{c(){e=u("input"),n=T(),p=u("label"),S=De(_),i=u("br"),this.h()},l(s){e=d(s,"INPUT",{type:!0,id:!0,name:!0,class:!0}),n=k(s),p=d(s,"LABEL",{for:!0});var v=F(p);S=Be(v,_),v.forEach(m),i=d(s,"BR",{}),this.h()},h(){t(e,"type","radio"),t(e,"id","html"),t(e,"name","fav_language"),e.value=r[32].id,e.checked=l=r[32].id==r[1],t(e,"class","svelte-1qs88ie"),t(p,"for","html")},m(s,v){$(s,e,v),$(s,n,v),$(s,p,v),a(p,S),$(s,i,v),f||(o=Z(e,"change",r[9]),f=!0)},p(s,v){v[0]&2&&l!==(l=s[32].id==s[1])&&(e.checked=l)},d(s){s&&(m(e),m(n),m(p),m(i)),f=!1,o()}}}function at(r){let e,l;return{c(){e=u("img"),this.h()},l(n){e=d(n,"IMG",{style:!0,class:!0,src:!0}),this.h()},h(){Ve(e,"opacity","0"),t(e,"class","icon svelte-1qs88ie"),Ie(e.src,l=Ne("Air quality"))||t(e,"src",l)},m(n,p){$(n,e,p)},d(n){n&&m(e)}}}function st(r){let e,l;return{c(){e=u("img"),this.h()},l(n){e=d(n,"IMG",{alt:!0,class:!0,src:!0}),this.h()},h(){t(e,"alt","cobenefit icon"),t(e,"class","icon svelte-1qs88ie"),Ie(e.src,l=Ne(r[29].id))||t(e,"src",l)},m(n,p){$(n,e,p)},d(n){n&&m(e)}}}function Te(r){let e,l,n,p,_,S=r[29].label+"",i,f,o,s,v,x;function q(L,h){return L[29].id!="total"?st:at}let b=q(r)(r);return{c(){e=u("div"),b.c(),l=T(),n=u("input"),p=T(),_=u("a"),i=De(S),f=T(),o=u("br"),s=T(),this.h()},l(L){e=d(L,"DIV",{class:!0});var h=F(e);b.l(h),l=k(h),n=d(h,"INPUT",{type:!0,name:!0}),p=k(h),_=d(h,"A",{class:!0,href:!0});var A=F(_);i=Be(A,S),A.forEach(m),f=k(h),o=d(h,"BR",{}),s=k(h),h.forEach(m),this.h()},h(){t(n,"type","radio"),t(n,"name","cobenef"),n.value=r[29].id,n.checked=!0,t(_,"class","link svelte-1qs88ie"),t(_,"href","/cobenefit?cobenefit="+r[29].id),t(e,"class","checkbox-div svelte-1qs88ie")},m(L,h){$(L,e,h),b.m(e,null),a(e,l),a(e,n),a(e,p),a(e,_),a(_,i),a(e,f),a(e,o),a(e,s),v||(x=Z(n,"change",r[6]),v=!0)},p:Ue,d(L){L&&m(e),b.d(),v=!1,x()}}}function nt(r){let e,l,n,p,_=`<h2>MapUK</h2> <p>This interactive map allows to explore both the co-benefit values and the socio-economic factors at the local
            authorities and datazones levels.</p>`,S,i,f,o,s="",v,x,q="",M,b,L="Export",h,A,U,G,le="CoBenefits",J,D,Q=`Socio-Economic\r
                    Factors`,ae,P,O,z,w,c="Local Authorities",y,B,K,R,se="Data Zones",ne,Y,W,ee;e=new Ke({});function re(C,g){if(C[0]=="Cobenefit")return lt;if(C[0]=="SEF")return tt}let te=re(r),V=te&&te(r);return{c(){we(e.$$.fragment),l=T(),n=u("div"),p=u("div"),p.innerHTML=_,S=T(),i=u("div"),f=u("div"),o=u("div"),o.innerHTML=s,v=T(),x=u("div"),x.innerHTML=q,M=T(),b=u("button"),b.textContent=L,h=T(),A=u("div"),U=u("div"),G=u("button"),G.textContent=le,J=T(),D=u("button"),D.textContent=Q,ae=T(),P=u("div"),O=u("input"),z=T(),w=u("label"),w.textContent=c,y=T(),B=u("input"),K=T(),R=u("label"),R.textContent=se,ne=T(),V&&V.c(),this.h()},l(C){He(e.$$.fragment,C),l=k(C),n=d(C,"DIV",{class:!0});var g=F(n);p=d(g,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),H(p)!=="svelte-1bpnvd7"&&(p.innerHTML=_),S=k(g),i=d(g,"DIV",{id:!0,class:!0});var I=F(i);f=d(I,"DIV",{class:!0,id:!0});var j=F(f);o=d(j,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),H(o)!=="svelte-1ej9vmv"&&(o.innerHTML=s),v=k(j),x=d(j,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),H(x)!=="svelte-1j653gg"&&(x.innerHTML=q),M=k(j),b=d(j,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),H(b)!=="svelte-zgluur"&&(b.textContent=L),j.forEach(m),h=k(I),A=d(I,"DIV",{class:!0,id:!0});var E=F(A);U=d(E,"DIV",{class:!0});var X=F(U);G=d(X,"BUTTON",{class:!0,"data-svelte-h":!0}),H(G)!=="svelte-14nmzoo"&&(G.textContent=le),J=k(X),D=d(X,"BUTTON",{class:!0,"data-svelte-h":!0}),H(D)!=="svelte-xxvynj"&&(D.textContent=Q),X.forEach(m),ae=k(E),P=d(E,"DIV",{class:!0});var N=F(P);O=d(N,"INPUT",{type:!0,name:!0}),z=k(N),w=d(N,"LABEL",{for:!0,"data-svelte-h":!0}),H(w)!=="svelte-p8irzv"&&(w.textContent=c),y=k(N),B=d(N,"INPUT",{type:!0,name:!0}),K=k(N),R=d(N,"LABEL",{for:!0,"data-svelte-h":!0}),H(R)!=="svelte-1ytveqc"&&(R.textContent=se),N.forEach(m),ne=k(E),V&&V.l(E),E.forEach(m),I.forEach(m),g.forEach(m),this.h()},h(){t(p,"class","component"),t(p,"id","heaser"),t(o,"id","map"),t(o,"class","svelte-1qs88ie"),t(x,"id","map-legend"),t(x,"class","svelte-1qs88ie"),t(b,"id","export-button"),t(b,"class","svelte-1qs88ie"),t(f,"class","component column svelte-1qs88ie"),t(f,"id","mapComp"),t(G,"class","tablinks svelte-1qs88ie"),G.value="Cobenefit",oe(G,"active",r[0]=="Cobenefit"),t(D,"class","tablinks svelte-1qs88ie"),D.value="SEF",oe(D,"active",r[0]=="SEF"),t(U,"class","tab svelte-1qs88ie"),t(O,"type","radio"),t(O,"name","granularity"),O.value="LAD",O.checked=!0,t(w,"for","LAD"),t(B,"type","radio"),t(B,"name","granularity"),B.value="LSOA",t(R,"for","LSOA"),t(P,"class","component"),t(A,"class","component column svelte-1qs88ie"),t(A,"id","control-panel"),t(i,"id","map-row"),t(i,"class","row svelte-1qs88ie"),t(n,"class","page-container svelte-1qs88ie")},m(C,g){Ge(e,C,g),$(C,l,g),$(C,n,g),a(n,p),a(n,S),a(n,i),a(i,f),a(f,o),r[19](o),a(f,v),a(f,x),r[20](x),a(f,M),a(f,b),r[21](b),a(i,h),a(i,A),a(A,U),a(U,G),a(U,J),a(U,D),a(A,ae),a(A,P),a(P,O),a(P,z),a(P,w),a(P,y),a(P,B),a(P,K),a(P,R),a(A,ne),V&&V.m(A,null),r[22](n),Y=!0,W||(ee=[Z(b,"click",it),Z(G,"click",r[8]),Z(D,"click",r[8]),Z(O,"change",r[10]),Z(B,"change",r[10])],W=!0)},p(C,g){(!Y||g[0]&1)&&oe(G,"active",C[0]=="Cobenefit"),(!Y||g[0]&1)&&oe(D,"active",C[0]=="SEF"),te===(te=re(C))&&V?V.p(C,g):(V&&V.d(1),V=te&&te(C),V&&(V.c(),V.m(A,null)))},i(C){Y||(Re(e.$$.fragment,C),Y=!0)},o(C){je(e.$$.fragment,C),Y=!1},d(C){C&&(m(l),m(n)),ze(e,C),r[19](null),r[20](null),r[21](null),V&&V.d(),r[22](null),W=!1,ke(ee)}}}function it(){const e=document.getElementsByClassName("maplibregl-canvas")[0].toDataURL("image/png");var l=document.createElement("a");l.download="map.png",l.href=e,l.dataset.downloadurl=["image/png",l.download,l.href].join(":"),document.body.appendChild(l),l.click(),document.body.removeChild(l)}function rt(r,e,l){let{data:n}=e,p,_,S,i,f,o,s="Cobenefit",v=!1,x="BNZ",q=de.map(c=>c.id),M="total",b="LAD",L="EPC",h;function A(){if(o.makeColorScale(!1),s=="SEF"&&be.includes(L)){const c=Ye("white","black");let y=Object.values(Le[L]);const B=y.map((R,se)=>c(se/(y.length-1)));let K=Je().domain(y).range(B);o.setColorScale(K)}S=o.legend(U()),l(4,i.innerHTML="",i),i.append(S)}function U(){if(s=="SEF")return`${Ce.filter(c=>c.id==L)[0].label} (${et(L)})`;if(s=="Cobenefit")return"Cobenefits (£ per capita)"}Me(async()=>{let c;b=="LAD"?c=await ie(Ee(Array.from(q),"UK",M)):b=="LSOA"&&(c=await ie(ye(Array.from(q),x,M))),c.forEach(y=>{y.value_per_capita=y.value_per_capita*1e6}),l(12,o=new Ze(c,b,_,"value_per_capita",!0,"Lookup_Value",!0)),o.initMap(),o.setTooltipCb(ae),S=o.legend(U()),i.append(S)});const G=c=>{const y=c.currentTarget.value;y=="total"?l(15,q=de.map(B=>B.id)):l(15,q=[y])},le=c=>{const y=c.currentTarget.value;l(16,M=y)};function J(c,y){l(0,s=c.currentTarget.value)}const D=c=>{l(1,L=c.currentTarget.value)},Q=c=>{o.removeLayers(),o.removeSources(),l(17,b=c.currentTarget.value),l(12,o.granularity=b,o),b=="LSOA"?l(12,o.border=!1,o):l(12,o.border=!0,o),l(13,v=!0)},ae=c=>{if(s=="SEF")return be.includes(L)?`Mode value is ${Le[L][c]}`:`Mean value is ${c.toFixed(2)}`;if(s=="Cobenefit")return`£${c.toFixed(2)} per capita.`};function P(c){ce[c?"unshift":"push"](()=>{_=c,l(3,_)})}function O(c){ce[c?"unshift":"push"](()=>{i=c,l(4,i)})}function z(c){ce[c?"unshift":"push"](()=>{f=c,l(5,f)})}function w(c){ce[c?"unshift":"push"](()=>{p=c,l(2,p)})}return r.$$set=c=>{"data"in c&&l(11,n=c.data)},r.$$.update=()=>{if(r.$$.dirty[0]&520195&&o?.loaded){if(s=="Cobenefit"){if(l(12,o.dataKey="value_per_capita",o),b=="LAD")l(18,h=ie(Ee(Array.from(q),"UK",M)));else if(b=="LSOA"){let c;q.length==11?c=[]:c=q,l(18,h=ie(ye(c,x,M)))}}else l(0,s="SEF")&&(l(12,o.dataKey="val",o),b=="LAD"?be.includes(L)?l(18,h=ie(Qe(L))):l(18,h=ie(We(L))):b=="LSOA"&&l(18,h=ie(Xe(L))));h.then(c=>{s=="Cobenefit"&&c.forEach(B=>{B.value_per_capita=B.value_per_capita*1e6});let y;s=="Cobenefit"?q.length==1?(y=JSON.parse(JSON.stringify($e(q[0]))),y.shift(),y=y.reverse()):y=["red","white","black"]:y=["white","black"],o.update(c,s,v,y),A(),l(13,v=!1)})}},[s,L,p,_,i,f,G,le,J,D,Q,n,o,v,x,q,M,b,h,P,O,z,w]}class mt extends Pe{constructor(e){super(),Oe(this,e,rt,nt,Fe,{data:11},null,[-1,-1])}}export{mt as component};
