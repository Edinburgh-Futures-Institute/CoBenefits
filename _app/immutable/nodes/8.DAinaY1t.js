import{s as Dn,o as zn,e as pt}from"../chunks/scheduler.BeRBkMKz.js";import{S as Tn,i as Vn,q as In,s as B,e as y,t as ft,r as Bn,f as N,c as b,a as F,m as j,b as ht,d as D,n as w,v as Nn,g as It,h as d,o as Sn,k as Hn,l as Fn,w as Pn,p as On}from"../chunks/index.Bcj7SUoL.js";import{e as Xe}from"../chunks/each.-gASlQSi.js";import{n as Rn}from"../chunks/transform.Cz5Y6iUM.js";import{R as qn,S as Ee,T as jn,U as Un,L as ie,V as vn,W as Ve,d as Jt,h as mn,X as gn,Y as le,M as ce,Z as ue,q as yn,c as fe,b as he,_ as Wn,e as Qt,$ as Ie,a0 as Yn,u as bn,v as ae,a1 as Zn,a2 as Xn,a3 as Kn,a4 as Ke,a5 as Gn,a6 as Qn,a7 as _n,a8 as Ge,a9 as Jn,g as wn,r as $n,aa as tr,ab as er,ac as Mn,ad as nr,k as rr,ae as or,F as Cn,af as xn,ag as sr,ah as kn,z as Gt,A as ir,ai as ar,aj as lr,ak as cr,l as rt,o as ct,B as ut,al as ur,am as fr,w as Qe,y as Je}from"../chunks/index.CQsWoii3.js";import{M as hr,g as dr}from"../chunks/map.C0kQpGCl.js";import{S as Be,M as ot,a as $e,b as pr,T as Ae,V as vr,c as Rt,d as mr,C as gr,e as tn}from"../chunks/globals.Duo7gXU0.js";import{N as yr}from"../chunks/NavigationBar.D-a5nHmZ.js";import{t as br,A as _r,f as En,m as wr,d as en,s as Mr,g as Cr,h as xr,b as zt,a as Le,c as nn,e as rn}from"../chunks/bar.BWslpL73.js";import{d as kr}from"../chunks/dot.CRQ6A7ih.js";const Er=Ar(Lr);function Ar(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:s,width:o,height:i}=e;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((i=Math.floor(i!==void 0?i:s.length/o))>=0))throw new RangeError("invalid height");if(!o||!i||!n&&!r)return e;const c=n&&t(n),u=r&&t(r),a=s.slice();return c&&u?(qt(c,a,s,o,i),qt(c,s,a,o,i),qt(c,a,s,o,i),jt(u,s,a,o,i),jt(u,a,s,o,i),jt(u,s,a,o,i)):c?(qt(c,s,a,o,i),qt(c,a,s,o,i),qt(c,s,a,o,i)):u&&(jt(u,s,a,o,i),jt(u,a,s,o,i),jt(u,s,a,o,i)),e}}function qt(t,e,n,r,s){for(let o=0,i=r*s;o<i;)t(e,n,o,o+=r,1)}function jt(t,e,n,r,s){for(let o=0,i=r*s;o<r;++o)t(e,n,o,o+i,r)}function Lr(t){const e=Math.floor(t);if(e===t)return Dr(t);const n=t-e,r=2*t+1;return(s,o,i,c,u)=>{if(!((c-=u)>=i))return;let a=e*o[i];const l=u*e,p=l+u;for(let f=i,h=i+l;f<h;f+=u)a+=o[Math.min(c,f)];for(let f=i,h=c;f<=h;f+=u)a+=o[Math.min(c,f+l)],s[f]=(a+n*(o[Math.max(i,f-p)]+o[Math.min(c,f+p)]))/r,a-=o[Math.max(i,f-l)]}}function Dr(t){const e=2*t+1;return(n,r,s,o,i)=>{if(!((o-=i)>=s))return;let c=t*r[s];const u=i*t;for(let a=s,l=s+u;a<l;a+=i)c+=r[Math.min(o,a)];for(let a=s,l=o;a<=l;a+=i)c+=r[Math.min(o,a+u)],n[a]=c/e,c-=r[Math.max(s,a-u)]}}function zr(t,e,n){let r;for(;;){const s=qn(t,e,n);if(s===r||s===0||!isFinite(s))return[t,e];s>0?(t=Math.floor(t/s)*s,e=Math.ceil(e/s)*s):s<0&&(t=Math.ceil(t*s)/s,e=Math.floor(e*s)/s),r=s}}function An(t,e=Ee){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=Ee);const s=(c,u)=>e(n[c],n[u]);let o,i;return t=Uint32Array.from(n,(c,u)=>u),t.sort(e===Ee?(c,u)=>jn(n[c],n[u]):Un(s)),t.forEach((c,u)=>{const a=s(c,o===void 0?c:o);a>=0?((o===void 0||a>0)&&(o=c,i=u),r[c]=i):r[c]=NaN}),r}var Tr=Array.prototype,Ln=Tr.slice;function Vr(t,e){return t-e}function Ir(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}const Mt=t=>()=>t;function Br(t,e){for(var n=-1,r=e.length,s;++n<r;)if(s=Nr(t,e[n]))return s;return 0}function Nr(t,e){for(var n=e[0],r=e[1],s=-1,o=0,i=t.length,c=i-1;o<i;c=o++){var u=t[o],a=u[0],l=u[1],p=t[c],f=p[0],h=p[1];if(Sr(u,p,e))return 0;l>r!=h>r&&n<(f-a)*(r-l)/(h-l)+a&&(s=-s)}return s}function Sr(t,e,n){var r;return Hr(t,e,n)&&Fr(t[r=+(t[0]===e[0])],n[r],e[r])}function Hr(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function Fr(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function Pr(){}var vt=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function on(){var t=1,e=1,n=br,r=u;function s(a){var l=n(a);if(Array.isArray(l))l=l.slice().sort(Vr);else{const p=ie(a,Or);for(l=vn(...zr(p[0],p[1],l),l);l[l.length-1]>=p[1];)l.pop();for(;l[1]<p[0];)l.shift()}return l.map(p=>o(a,p))}function o(a,l){const p=l==null?NaN:+l;if(isNaN(p))throw new Error(`invalid value: ${l}`);var f=[],h=[];return i(a,p,function(_){r(_,a,p),Ir(_)>0?f.push([_]):h.push(_)}),h.forEach(function(_){for(var g=0,E=f.length,k;g<E;++g)if(Br((k=f[g])[0],_)!==-1){k.push(_);return}}),{type:"MultiPolygon",value:l,coordinates:f}}function i(a,l,p){var f=new Array,h=new Array,_,g,E,k,m,C;for(_=g=-1,k=Tt(a[0],l),vt[k<<1].forEach(x);++_<t-1;)E=k,k=Tt(a[_+1],l),vt[E|k<<1].forEach(x);for(vt[k<<0].forEach(x);++g<e-1;){for(_=-1,k=Tt(a[g*t+t],l),m=Tt(a[g*t],l),vt[k<<1|m<<2].forEach(x);++_<t-1;)E=k,k=Tt(a[g*t+t+_+1],l),C=m,m=Tt(a[g*t+_+1],l),vt[E|k<<1|m<<2|C<<3].forEach(x);vt[k|m<<3].forEach(x)}for(_=-1,m=a[g*t]>=l,vt[m<<2].forEach(x);++_<t-1;)C=m,m=Tt(a[g*t+_+1],l),vt[m<<2|C<<3].forEach(x);vt[m<<3].forEach(x);function x(z){var A=[z[0][0]+_,z[0][1]+g],L=[z[1][0]+_,z[1][1]+g],T=c(A),S=c(L),M,I;(M=h[T])?(I=f[S])?(delete h[M.end],delete f[I.start],M===I?(M.ring.push(L),p(M.ring)):f[M.start]=h[I.end]={start:M.start,end:I.end,ring:M.ring.concat(I.ring)}):(delete h[M.end],M.ring.push(L),h[M.end=S]=M):(M=f[S])?(I=h[T])?(delete f[M.start],delete h[I.end],M===I?(M.ring.push(L),p(M.ring)):f[I.start]=h[M.end]={start:I.start,end:M.end,ring:I.ring.concat(M.ring)}):(delete f[M.start],M.ring.unshift(A),f[M.start=T]=M):f[T]=h[S]={start:T,end:S,ring:[A,L]}}}function c(a){return a[0]*2+a[1]*(t+1)*4}function u(a,l,p){a.forEach(function(f){var h=f[0],_=f[1],g=h|0,E=_|0,k=De(l[E*t+g]);h>0&&h<t&&g===h&&(f[0]=sn(h,De(l[E*t+g-1]),k,p)),_>0&&_<e&&E===_&&(f[1]=sn(_,De(l[(E-1)*t+g]),k,p))})}return s.contour=o,s.size=function(a){if(!arguments.length)return[t,e];var l=Math.floor(a[0]),p=Math.floor(a[1]);if(!(l>=0&&p>=0))throw new Error("invalid size");return t=l,e=p,s},s.thresholds=function(a){return arguments.length?(n=typeof a=="function"?a:Array.isArray(a)?Mt(Ln.call(a)):Mt(a),s):n},s.smooth=function(a){return arguments.length?(r=a?u:Pr,s):r===u},s}function Or(t){return isFinite(t)?t:NaN}function Tt(t,e){return t==null?!1:+t>=e}function De(t){return t==null||isNaN(t=+t)?-1/0:t}function sn(t,e,n,r){const s=r-e,o=n-e,i=isFinite(s)||isFinite(o)?s/o:Math.sign(s)/Math.sign(o);return isNaN(i)?t:t+i-.5}function Rr(t){return t[0]}function qr(t){return t[1]}function jr(){return 1}function Ur(){var t=Rr,e=qr,n=jr,r=960,s=500,o=20,i=2,c=o*3,u=r+c*2>>i,a=s+c*2>>i,l=Mt(20);function p(m){var C=new Float32Array(u*a),x=Math.pow(2,-i),z=-1;for(const V of m){var A=(t(V,++z,m)+c)*x,L=(e(V,z,m)+c)*x,T=+n(V,z,m);if(T&&A>=0&&A<u&&L>=0&&L<a){var S=Math.floor(A),M=Math.floor(L),I=A-S-.5,Y=L-M-.5;C[S+M*u]+=(1-I)*(1-Y)*T,C[S+1+M*u]+=I*(1-Y)*T,C[S+1+(M+1)*u]+=I*Y*T,C[S+(M+1)*u]+=(1-I)*Y*T}}return Er({data:C,width:u,height:a},o*x),C}function f(m){var C=p(m),x=l(C),z=Math.pow(2,2*i);return Array.isArray(x)||(x=vn(Number.MIN_VALUE,Ve(C)/z,x)),on().size([u,a]).thresholds(x.map(A=>A*z))(C).map((A,L)=>(A.value=+x[L],h(A)))}f.contours=function(m){var C=p(m),x=on().size([u,a]),z=Math.pow(2,2*i),A=L=>{L=+L;var T=h(x.contour(C,L*z));return T.value=L,T};return Object.defineProperty(A,"max",{get:()=>Ve(C)/z}),A};function h(m){return m.coordinates.forEach(_),m}function _(m){m.forEach(g)}function g(m){m.forEach(E)}function E(m){m[0]=m[0]*Math.pow(2,i)-c,m[1]=m[1]*Math.pow(2,i)-c}function k(){return c=o*3,u=r+c*2>>i,a=s+c*2>>i,f}return f.x=function(m){return arguments.length?(t=typeof m=="function"?m:Mt(+m),f):t},f.y=function(m){return arguments.length?(e=typeof m=="function"?m:Mt(+m),f):e},f.weight=function(m){return arguments.length?(n=typeof m=="function"?m:Mt(+m),f):n},f.size=function(m){if(!arguments.length)return[r,s];var C=+m[0],x=+m[1];if(!(C>=0&&x>=0))throw new Error("invalid size");return r=C,s=x,k()},f.cellSize=function(m){if(!arguments.length)return 1<<i;if(!((m=+m)>=1))throw new Error("invalid cell size");return i=Math.floor(Math.log(m)/Math.LN2),k()},f.thresholds=function(m){return arguments.length?(l=typeof m=="function"?m:Array.isArray(m)?Mt(Ln.call(m)):Mt(m),f):l},f.bandwidth=function(m){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((m=+m)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*m*m+1)-1)/2,k()},f}const Wr={ariaLabel:"cell"};class Yr extends _r{constructor(e,{x:n,y:r,...s}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},s,Wr)}_transform(e,n){e.call(Jt,n,{},0,0)}}function an(t,{x:e,y:n,...r}={}){return[e,n]=mn(e,n),new Yr(t,{...r,x:e,y:n})}const Zr={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Xr extends ce{constructor(e,n={}){const{x:r,y:s,z:o,curve:i,tension:c}=n;super(e,{x:{value:r,scale:"x"},y:{value:s,scale:"y"},z:{value:ue(n),optional:!0}},n,Zr),this.z=o,this.curve=wr(i,c),yn(this,n)}filter(e){return e}project(e,n,r){this.curve!==en&&super.project(e,n,r)}render(e,n,r,s,o){const{x:i,y:c}=r,{curve:u}=this;return fe("svg:g",o).call(he,this,s,o).call(Jt,this,n).call(a=>a.selectAll().data(Wn(e,[i,c],this,r)).enter().append("path").call(Qt,this).call(Ie,this,r).call(Yn,this,r,o).attr("d",u===en&&o.projection?Kr(o.projection,i,c):Mr().curve(u).defined(l=>l>=0).x(l=>i[l]).y(l=>c[l]))).node()}}function Kr(t,e,n){const r=bn(t);return e=ae(e),n=ae(n),s=>{let o=[];const i=[o];for(const c of s)c===-1?(o=[],i.push(o)):o.push([e[c],n[c]]);return r({type:"MultiLineString",coordinates:i})}}function Gr(t,{x:e=gn,y:n=le,...r}={}){return new Xr(t,En({...r,x:e,y:n}))}function Qr(t,e={}){let{y:n,y1:r,y2:s}=e;n===void 0&&r===void 0&&s===void 0&&(e={...e,y:n=le});const o={};return n!=null&&(o.y=t),r!=null&&(o.y1=t),s!=null&&(o.y2=t),Jr(o,e)}function Jr(t={},e={}){const n=ue(e),r=Object.entries(t).map(([s,o])=>{const i=Zn(s,e);if(i==null)throw new Error(`missing channel: ${s}`);const[c,u]=Xn(i);return{key:s,input:i,output:c,setOutput:u,map:$r(o)}});return{...Kn(e,(s,o)=>{const i=Ke(s,n),c=r.map(({input:a})=>Ke(s,a)),u=r.map(({setOutput:a})=>a(new Array(s.length)));for(const a of o)for(const l of i?Gn(a,p=>i[p]).values():[a])r.forEach(({map:p},f)=>p.mapIndex(l,c[f],u[f]));return{data:s,facets:o}}),...Object.fromEntries(r.map(({key:s,output:o})=>[s,o]))}}function $r(t){if(t==null)throw new Error("missing map");if(typeof t.mapIndex=="function")return t;if(typeof t.map=="function"&&Qn(t))return to(t);if(typeof t=="function")return ze(_n(t));switch(`${t}`.toLowerCase()){case"cumsum":return no;case"rank":return ze((e,n)=>An(e,r=>n[r]));case"quantile":return ze((e,n)=>eo(e,r=>n[r]))}throw new Error(`invalid map: ${t}`)}function to(t){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:t.map.bind(t)}}function eo(t,e){const n=Cr(t,e)-1;return An(t,e).map(r=>r/n)}function ze(t){return{mapIndex(e,n,r){const s=t(e,n);if(s.length!==e.length)throw new Error("map function returned a mismatched length");for(let o=0,i=e.length;o<i;++o)r[e[o]]=s[o]}}}const no={mapIndex(t,e,n){let r=0;for(const s of t)n[s]=r+=e[s]}},ro={ariaLabel:"tick",fill:null,stroke:"currentColor"};class oo extends ce{constructor(e,n,r){super(e,n,r,ro),yn(this,r)}render(e,n,r,s,o){return fe("svg:g",o).call(he,this,s,o).call(this._transform,this,n).call(i=>i.selectAll().data(e).enter().append("line").call(Qt,this).attr("x1",this._x1(n,r,s)).attr("x2",this._x2(n,r,s)).attr("y1",this._y1(n,r,s)).attr("y2",this._y2(n,r,s)).call(wn,this,r).call($n,this,r,o)).node()}}class so extends oo{constructor(e,n={}){const{x:r,y:s,inset:o=0,insetTop:i=o,insetBottom:c=o}=n;super(e,{x:{value:r,scale:"x"},y:{value:s,scale:"y",type:"band",optional:!0}},n),this.insetTop=Ge(i),this.insetBottom=Ge(c)}_transform(e,n,{x:r}){e.call(Jt,n,{x:r},Jn,0)}_x1(e,{x:n}){return r=>n[r]}_x2(e,{x:n}){return r=>n[r]}_y1({y:e},{y:n},{marginTop:r}){const{insetTop:s}=this;return n&&e?o=>n[o]+s:r+s}_y2({y:e},{y:n},{height:r,marginBottom:s}){const{insetBottom:o}=this;return n&&e?i=>n[i]+e.bandwidth()-o:r-s-o}}function Te(t,{x:e=le,...n}={}){return new so(t,{...n,x:e})}const io={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class ao extends ce{constructor(e,{x:n,y:r,z:s,weight:o,fill:i,stroke:c,...u}={}){const a=ln(i)&&(i="currentColor",!0),l=ln(c)&&(c="currentColor",!0);super(e,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:ue({z:s,fill:i,stroke:c}),optional:!0},weight:{value:o,optional:!0}},uo({...u,fill:i,stroke:c},a,l),io),a&&(this.fill=void 0),l&&(this.stroke=void 0),this.z=s}filter(e){return e}render(e,n,r,s,o){const{contours:i}=r,c=bn();return fe("svg:g",o).call(he,this,s,o).call(Jt,this,{}).call(u=>u.selectAll().data(e).enter().append("path").call(Qt,this).call(wn,this,r).attr("d",a=>c(i[a]))).node()}}function lo(t,{x:e,y:n,...r}={}){return[e,n]=mn(e,n),new ao(t,{...r,x:e,y:n})}const co=new Set(["x","y","z","weight"]);function uo(t,e,n){let{bandwidth:s,thresholds:o}=t;return s=s===void 0?20:+s,o=o===void 0?20:typeof o?.[Symbol.iterator]=="function"?ae(o):+o,tr(t,function(i,c,u,a,l,p){const f=u.weight?ae(u.weight.value):null,h=u.z?.value,{z:_}=this,[g,E]=rr(this,l),{width:k,height:m}=l,{x:C,y:x}=er(u,a,p),z=Object.fromEntries(Object.entries(u).filter(([V])=>!co.has(V)).map(([V,P])=>[V,{...P,value:[]}])),A=e&&[],L=n&&[],T=Ur().x(C?V=>C[V]:g).y(x?V=>x[V]:E).weight(f?V=>f[V]:1).size([k,m]).bandwidth(s),S=[];for(const V of c){const P=[];S.push(P);for(const K of h?Mn(V,h,_):[V]){const tt=T.contours(K);P.push([K,tt])}}let M=o;if(!(M instanceof nr)){let V=0;for(const P of S)for(const[,K]of P){const tt=K.max;tt>V&&(V=tt)}M=Float64Array.from({length:o-1},(P,K)=>V*100*(K+1)/o)}const I=[],Y=[];for(const V of S){const P=[];I.push(P);for(const[K,tt]of V)for(const W of M){P.push(Y.length),Y.push(tt(W/100)),A&&A.push(W),L&&L.push(W);for(const O in z)z[O].value.push(u[O].value[K[0]])}}return A&&A.push(0),L&&L.push(0),{data:i,facets:I,channels:{...z,...A&&{fill:{value:A,scale:"color"}},...L&&{stroke:{value:L,scale:"color"}},contours:{value:Y}}}})}function ln(t){return/^density$/i.test(t)}function fo(t,e,n){var r=1e-8,s=e-1,o=n-1,i=0,c,u,a,l,p,f,h,_,g,E,k;if(t<=0)return 0;if(t>=1)return 1;for(e>=1&&n>=1?(a=t<.5?t:1-t,l=Math.sqrt(-2*Math.log(a)),h=(2.30753+l*.27061)/(1+l*(.99229+l*.04481))-l,t<.5&&(h=-h),_=(h*h-3)/6,g=2/(1/(2*e-1)+1/(2*n-1)),E=h*Math.sqrt(_+g)/g-(1/(2*n-1)-1/(2*e-1))*(_+5/6-2/(3*g)),h=e/(e+n*Math.exp(2*E))):(c=Math.log(e/(e+n)),u=Math.log(n/(e+n)),l=Math.exp(e*c)/e,p=Math.exp(n*u)/n,E=l+p,t<l/E?h=Math.pow(e*E*t,1/e):h=1-Math.pow(n*E*(1-t),1/n)),k=-Ut(e)-Ut(n)+Ut(e+n);i<10;i++){if(h===0||h===1)return h;if(f=ho(h,e,n)-t,l=Math.exp(s*Math.log(h)+o*Math.log(1-h)+k),p=f/l,h-=l=p/(1-.5*Math.min(1,p*(s/h-o/(1-h)))),h<=0&&(h=.5*(h+l)),h>=1&&(h=.5*(h+l+1)),Math.abs(l)<r*h&&i>0)break}return h}function ho(t,e,n){var r=t===0||t===1?0:Math.exp(Ut(e+n)-Ut(e)-Ut(n)+e*Math.log(t)+n*Math.log(1-t));return t<0||t>1?!1:t<(e+1)/(e+n+2)?r*cn(t,e,n)/e:1-r*cn(1-t,n,e)/n}function cn(t,e,n){var r=1e-30,s=1,o=e+n,i=e+1,c=e-1,u=1,a=1-o*t/i,l,p,f,h;for(Math.abs(a)<r&&(a=r),a=1/a,h=a;s<=100&&(l=2*s,p=s*(n-s)*t/((c+l)*(e+l)),a=1+p*a,Math.abs(a)<r&&(a=r),u=1+p/u,Math.abs(u)<r&&(u=r),a=1/a,h*=a*u,p=-(e+s)*(o+s)*t/((e+l)*(i+l)),a=1+p*a,Math.abs(a)<r&&(a=r),u=1+p/u,Math.abs(u)<r&&(u=r),a=1/a,f=a*u,h*=f,!(Math.abs(f-1)<3e-7));s++);return h}function Ut(t){var e=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,s,o,i;for(i=(o=s=t)+5.5,i-=(s+.5)*Math.log(i);e<6;e++)r+=n[e]/++o;return Math.log(2.506628274631*r/s)-i}function po(t,e){var n=fo(2*Math.min(t,1-t),.5*e,.5);return n=Math.sqrt(e*(1-n)/n),t>.5?n:-n}const vo={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class mo extends ce{constructor(e,n={}){const{x:r,y:s,z:o,ci:i=.95,precision:c=4}=n;if(super(e,{x:{value:r,scale:"x"},y:{value:s,scale:"y"},z:{value:ue(n),optional:!0}},n,vo),this.z=o,this.ci=+i,this.precision=+c,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${i}`);if(!(this.precision>0))throw new Error(`invalid precision: ${c}`)}render(e,n,r,s,o){const{x:i,y:c,z:u}=r,{ci:a}=this;return fe("svg:g",o).call(he,this,s,o).call(Jt,this,n).call(l=>l.selectAll().data(u?Mn(e,u,this.z):[e]).enter().call(p=>p.append("path").attr("fill","none").call(Qt,this).call(Ie,this,{...r,fill:null,fillOpacity:null}).attr("d",f=>this._renderLine(f,i,c)).call(a&&!sr(this.fill)?f=>f.select(go).attr("stroke","none").call(Qt,this).call(Ie,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",h=>this._renderBand(h,i,c)):()=>{}))).node()}}function go(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(Rn.svg,"path"),this)}class yo extends mo{constructor(e,n){super(e,n)}_renderBand(e,n,r){const{ci:s,precision:o}=this,[i,c]=ie(e,l=>n[l]),u=un(e,n,r),a=_o(e,n,r,(1-s)/2,u);return xr().x(l=>l).y0(l=>a(l,-1)).y1(l=>a(l,1))(Cn(i,c-o/2,o).concat(c))}_renderLine(e,n,r){const[s,o]=ie(e,c=>n[c]),i=un(e,n,r);return`M${s},${i(s)}L${o},${i(o)}`}}function bo(t,{x:e=gn,y:n=le,stroke:r,fill:s=or(r)?"currentColor":r,...o}={}){return new yo(t,En({...o,x:e,y:n,fill:s,stroke:r}))}function un(t,e,n){let r=0,s=0,o=0,i=0;for(const l of t){const p=e[l],f=n[l];r+=p,s+=f,o+=p*f,i+=p*p}const c=t.length,u=(c*o-r*s)/(c*i-r*r),a=(s-u*r)/c;return l=>u*l+a}function _o(t,e,n,r,s){const o=xn(t,l=>e[l])/t.length;let i=0,c=0;for(const l of t)i+=(e[l]-o)**2,c+=(n[l]-s(e[l]))**2;const u=Math.sqrt(c/(t.length-2)),a=po(r,t.length-2);return(l,p)=>{const f=s(l),h=u*Math.sqrt(1/t.length+(l-o)**2/i);return f+p*a*h}}function fn(t,e){return arguments.length===1&&({basis:t,...e}=t),Qr(wo(t),e)}function wo(t){if(t===void 0)return hn;if(typeof t=="function")return de(_n(t));if(/^p\d{2}$/i.test(t))return Wt(cr(t));switch(`${t}`.toLowerCase()){case"deviation":return xo;case"first":return hn;case"last":return Co;case"max":return ko;case"mean":return Eo;case"median":return Ao;case"min":return Lo;case"sum":return Do;case"extent":return Mo}throw new Error(`invalid basis: ${t}`)}function de(t){return{mapIndex(e,n,r){const s=+t(e,n);for(const o of e)r[o]=n[o]===null?NaN:n[o]/s}}}function Wt(t){return de((e,n)=>t(e,r=>n[r]))}const Mo={mapIndex(t,e,n){const[r,s]=ie(t,i=>e[i]),o=s-r;for(const i of t)n[i]=e[i]===null?NaN:(e[i]-r)/o}},hn=de((t,e)=>{for(let n=0;n<t.length;++n){const r=e[t[n]];if(kn(r))return r}}),Co=de((t,e)=>{for(let n=t.length-1;n>=0;--n){const r=e[t[n]];if(kn(r))return r}}),xo={mapIndex(t,e,n){const r=Gt(t,o=>e[o]),s=ir(t,o=>e[o]);for(const o of t)n[o]=e[o]===null?NaN:s?(e[o]-r)/s:0}},ko=Wt(Ve),Eo=Wt(Gt),Ao=Wt(ar),Lo=Wt(lr),Do=Wt(xn);function dn(t,e,n){const r=t.slice();return r[42]=e[n],r[43]=e,r[44]=n,r}function zo(t){let e,n,r="Data Zones Distribution (vs. UK average)",s,o,i="Histogram shows the number of data zones distributed across different household social economic factors.",c,u,a="",l=t[42],p,f,h,_,g,E,k,m,C,x="Density plot refers to UK distribution while the scattered points refer to data zones in the local authority.",z,A,L="",T,S,M,I="";const Y=()=>t[19](u,l),V=()=>t[19](null,l),P=()=>t[20](A,l),K=()=>t[20](null,l),tt=()=>t[21](M,l),W=()=>t[21](null,l);return{c(){e=y("div"),n=y("h3"),n.textContent=r,s=B(),o=y("p"),o.textContent=i,c=B(),u=y("div"),u.innerHTML=a,p=B(),f=y("div"),h=y("div"),_=y("h3"),g=ft("Co-benefits Recieved by Data Zones across "),E=ft(t[42]),k=ft(" Values"),m=B(),C=y("p"),C.textContent=x,z=B(),A=y("div"),A.innerHTML=L,T=B(),S=y("div"),M=y("div"),M.innerHTML=I,this.h()},l(O){e=b(O,"DIV",{class:!0});var G=F(e);n=b(G,"H3",{class:!0,"data-svelte-h":!0}),j(n)!=="svelte-1d86f13"&&(n.textContent=r),s=N(G),o=b(G,"P",{class:!0,"data-svelte-h":!0}),j(o)!=="svelte-vl6og1"&&(o.textContent=i),c=N(G),u=b(G,"DIV",{class:!0,"data-svelte-h":!0}),j(u)!=="svelte-4mdt4"&&(u.innerHTML=a),G.forEach(D),p=N(O),f=b(O,"DIV",{class:!0});var it=F(f);h=b(it,"DIV",{});var nt=F(h);_=b(nt,"H3",{class:!0});var at=F(_);g=ht(at,"Co-benefits Recieved by Data Zones across "),E=ht(at,t[42]),k=ht(at," Values"),at.forEach(D),m=N(nt),C=b(nt,"P",{class:!0,"data-svelte-h":!0}),j(C)!=="svelte-mjnso4"&&(C.textContent=x),z=N(nt),A=b(nt,"DIV",{class:!0,"data-svelte-h":!0}),j(A)!=="svelte-1kzougf"&&(A.innerHTML=L),nt.forEach(D),T=N(it),S=b(it,"DIV",{});var v=F(S);M=b(v,"DIV",{class:!0,"data-svelte-h":!0}),j(M)!=="svelte-rk8pjt"&&(M.innerHTML=I),v.forEach(D),it.forEach(D),this.h()},h(){w(n,"class","component-title"),w(o,"class","description short"),w(u,"class","plot"),w(e,"class","component"),w(_,"class","component-title"),w(C,"class","description short"),w(A,"class","plot"),w(M,"class","plot"),w(f,"class","component")},m(O,G){It(O,e,G),d(e,n),d(e,s),d(e,o),d(e,c),d(e,u),Y(),It(O,p,G),It(O,f,G),d(f,h),d(h,_),d(_,g),d(_,E),d(_,k),d(h,m),d(h,C),d(h,z),d(h,A),P(),d(f,T),d(f,S),d(S,M),tt()},p(O,G){t=O,l!==t[42]&&(V(),l=t[42],Y()),l!==t[42]&&(K(),l=t[42],P()),l!==t[42]&&(W(),l=t[42],tt())},d(O){O&&(D(e),D(p),D(f)),V(),K(),W()}}}function To(t){let e,n,r="",s=t[42];const o=()=>t[18](n,s),i=()=>t[18](null,s);return{c(){e=y("div"),n=y("div"),n.innerHTML=r,this.h()},l(c){e=b(c,"DIV",{class:!0});var u=F(e);n=b(u,"DIV",{class:!0,"data-svelte-h":!0}),j(n)!=="svelte-1shkadq"&&(n.innerHTML=r),u.forEach(D),this.h()},h(){w(n,"class","plot"),w(e,"class","component")},m(c,u){It(c,e,u),d(e,n),o()},p(c,u){t=c,s!==t[42]&&(i(),s=t[42],o())},d(c){c&&D(e),i()}}}function pn(t){let e,n,r,s,o,i;function c(l,p){return l[7]?To:zo}let u=c(t),a=u(t);return{c(){e=y("div"),n=y("h2"),r=ft(t[42]),s=B(),o=y("div"),a.c(),i=B(),this.h()},l(l){e=b(l,"DIV",{});var p=F(e);n=b(p,"H2",{});var f=F(n);r=ht(f,t[42]),f.forEach(D),s=N(p),o=b(p,"DIV",{class:!0});var h=F(o);a.l(h),h.forEach(D),i=N(p),p.forEach(D),this.h()},h(){w(o,"class","row")},m(l,p){It(l,e,p),d(e,n),d(n,r),d(e,s),d(e,o),a.m(o,null),d(e,i)},p(l,p){u===(u=c(l))&&a?a.p(l,p):(a.d(1),a=u(l),a&&(a.c(),a.m(o,null)))},d(l){l&&D(e),a.d()}}}function Vo(t){let e,n,r,s,o,i="Data Report",c,u,a=t[10][t[9]]+"",l,p,f,h="Explore how this local authority will benefit from achieving Net Zero and general factors of their households.",_,g,E,k='<p class="section-subtitle">Overview</p> <h2 class="section-title">How much co-benefit values would this area recieve?</h2> <p class="description">We calculate and model 11 types of co-benefits across five different pathyways suggested by Climate Change Committee in the Sixth Carbon Budget from 2025-2050 on the level of data zones across UK.</p>',m,C,x,z,A="11 Types of Co-Benefits Values (vs. UK Average)",L,T,S,M=t[10][t[9]]+"",I,Y,V,P,K="",tt,W,O,G=t[10][t[9]]+"",it,nt,at,v,R="Scroll for zooming in and out.",dt,Q,J="",Yt,U,Z,Zt='<p class="section-subtitle">Temporal Trends</p> <h2 class="section-title">How co-benefits change over time?</h2> <p class="description">Detailed breakdown of temporal trends for total co-benefits, types of co-benefits, and five pathways.</p>',Xt,mt,Ct,Ne="Total Co-benefits Distribution from 2025-2050 (vs. UK Average)",pe,Bt,gt,Se="",ve,yt,xt,He="11 Types of Co-benefits Distribution Following Balance Pathway from 2025-2050",me,Nt,St,bt,Fe="",ge,_t,et,kt,Pe="Households",ye,Et,Oe="Social Economic Factors of Households",be,At,Re="We describe the distribution of household economic factors aggregated on the data zone level and the different level of co-benefits recieved by those data zones.",_e,Lt,we,Dt,qe="Aggregate Plots",Me,wt,$t,Ce,je;e=new yr({});let Ht=Xe(Be),X=[];for(let H=0;H<Ht.length;H+=1)X[H]=pn(dn(t,Ht,H));return{c(){In(e.$$.fragment),n=B(),r=y("div"),s=y("div"),o=y("p"),o.textContent=i,c=B(),u=y("h1"),l=ft(a),p=B(),f=y("p"),f.textContent=h,_=B(),g=y("div"),E=y("div"),E.innerHTML=k,m=B(),C=y("div"),x=y("div"),z=y("h3"),z.textContent=A,L=B(),T=y("p"),S=ft("Co-benefits values in "),I=ft(M),Y=ft(" verus average value across all local authorities in UK."),V=B(),P=y("div"),P.innerHTML=K,tt=B(),W=y("div"),O=y("h3"),it=ft(G),nt=ft(" on UK Map"),at=B(),v=y("p"),v.textContent=R,dt=B(),Q=y("div"),Q.innerHTML=J,Yt=B(),U=y("div"),Z=y("div"),Z.innerHTML=Zt,Xt=B(),mt=y("div"),Ct=y("h3"),Ct.textContent=Ne,pe=B(),Bt=y("div"),gt=y("div"),gt.innerHTML=Se,ve=B(),yt=y("div"),xt=y("h3"),xt.textContent=He,me=B(),Nt=y("div"),St=y("div"),bt=y("div"),bt.innerHTML=Fe,ge=B(),_t=y("div"),et=y("div"),kt=y("p"),kt.textContent=Pe,ye=B(),Et=y("h2"),Et.textContent=Oe,be=B(),At=y("p"),At.textContent=Re,_e=B(),Lt=y("input"),we=B(),Dt=y("label"),Dt.textContent=qe,Me=B(),wt=y("div");for(let H=0;H<X.length;H+=1)X[H].c();this.h()},l(H){Bn(e.$$.fragment,H),n=N(H),r=b(H,"DIV",{class:!0});var $=F(r);s=b($,"DIV",{class:!0});var q=F(s);o=b(q,"P",{class:!0,"data-svelte-h":!0}),j(o)!=="svelte-1gxb8h1"&&(o.textContent=i),c=N(q),u=b(q,"H1",{class:!0});var Kt=F(u);l=ht(Kt,a),Kt.forEach(D),p=N(q),f=b(q,"P",{class:!0,"data-svelte-h":!0}),j(f)!=="svelte-5qj0r2"&&(f.textContent=h),q.forEach(D),_=N($),g=b($,"DIV",{class:!0});var te=F(g);E=b(te,"DIV",{class:!0,"data-svelte-h":!0}),j(E)!=="svelte-42ok6n"&&(E.innerHTML=k),m=N(te),C=b(te,"DIV",{id:!0,class:!0});var ee=F(C);x=b(ee,"DIV",{class:!0});var Ft=F(x);z=b(Ft,"H3",{class:!0,"data-svelte-h":!0}),j(z)!=="svelte-1o9zf4n"&&(z.textContent=A),L=N(Ft),T=b(Ft,"P",{class:!0});var ne=F(T);S=ht(ne,"Co-benefits values in "),I=ht(ne,M),Y=ht(ne," verus average value across all local authorities in UK."),ne.forEach(D),V=N(Ft),P=b(Ft,"DIV",{class:!0,"data-svelte-h":!0}),j(P)!=="svelte-1qxob4b"&&(P.innerHTML=K),Ft.forEach(D),tt=N(ee),W=b(ee,"DIV",{class:!0});var Pt=F(W);O=b(Pt,"H3",{class:!0});var xe=F(O);it=ht(xe,G),nt=ht(xe," on UK Map"),xe.forEach(D),at=N(Pt),v=b(Pt,"P",{class:!0,"data-svelte-h":!0}),j(v)!=="svelte-1ask2se"&&(v.textContent=R),dt=N(Pt),Q=b(Pt,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),j(Q)!=="svelte-1nhow06"&&(Q.innerHTML=J),Pt.forEach(D),ee.forEach(D),te.forEach(D),Yt=N($),U=b($,"DIV",{class:!0});var Ot=F(U);Z=b(Ot,"DIV",{class:!0,"data-svelte-h":!0}),j(Z)!=="svelte-1ttf9zc"&&(Z.innerHTML=Zt),Xt=N(Ot),mt=b(Ot,"DIV",{class:!0});var re=F(mt);Ct=b(re,"H3",{class:!0,"data-svelte-h":!0}),j(Ct)!=="svelte-td9req"&&(Ct.textContent=Ne),pe=N(re),Bt=b(re,"DIV",{class:!0});var Ue=F(Bt);gt=b(Ue,"DIV",{class:!0,"data-svelte-h":!0}),j(gt)!=="svelte-ghq0r3"&&(gt.innerHTML=Se),Ue.forEach(D),re.forEach(D),ve=N(Ot),yt=b(Ot,"DIV",{class:!0});var oe=F(yt);xt=b(oe,"H3",{class:!0,"data-svelte-h":!0}),j(xt)!=="svelte-i61rsm"&&(xt.textContent=He),me=N(oe),Nt=b(oe,"DIV",{class:!0});var We=F(Nt);St=b(We,"DIV",{class:!0});var Ye=F(St);bt=b(Ye,"DIV",{class:!0,"data-svelte-h":!0}),j(bt)!=="svelte-m4szn7"&&(bt.innerHTML=Fe),Ye.forEach(D),We.forEach(D),oe.forEach(D),Ot.forEach(D),ge=N($),_t=b($,"DIV",{class:!0});var se=F(_t);et=b(se,"DIV",{class:!0});var lt=F(et);kt=b(lt,"P",{class:!0,"data-svelte-h":!0}),j(kt)!=="svelte-ceroz1"&&(kt.textContent=Pe),ye=N(lt),Et=b(lt,"H2",{class:!0,"data-svelte-h":!0}),j(Et)!=="svelte-so6kne"&&(Et.textContent=Oe),be=N(lt),At=b(lt,"P",{class:!0,"data-svelte-h":!0}),j(At)!=="svelte-ep3r6m"&&(At.textContent=Re),_e=N(lt),Lt=b(lt,"INPUT",{type:!0}),we=N(lt),Dt=b(lt,"LABEL",{for:!0,"data-svelte-h":!0}),j(Dt)!=="svelte-1kwkdzm"&&(Dt.textContent=qe),lt.forEach(D),Me=N(se),wt=b(se,"DIV",{id:!0,class:!0});var Ze=F(wt);for(let ke=0;ke<X.length;ke+=1)X[ke].l(Ze);Ze.forEach(D),se.forEach(D),$.forEach(D),this.h()},h(){w(o,"class","page-subtitle"),w(u,"class","page-title"),w(f,"class","description"),w(s,"class","section header"),w(E,"class","section-header"),w(z,"class","component-title"),w(T,"class","description"),w(P,"class","plot"),w(x,"class","component column"),w(O,"class","component-title"),w(v,"class","description"),w(Q,"id","map"),w(Q,"class","svelte-wd9p4b"),w(W,"class","component column"),w(C,"id","vis-block"),w(C,"class","svelte-wd9p4b"),w(g,"class","section"),w(Z,"class","section-header"),w(Ct,"class","component-title"),w(gt,"class","plot"),w(Bt,"class","row"),w(mt,"class","component singlevis"),w(xt,"class","component-title"),w(bt,"class","plot"),w(St,"class","row"),w(Nt,"class","row"),w(yt,"class","component singlevis"),w(U,"class","section"),w(kt,"class","section-subtitle"),w(Et,"class","section-title"),w(At,"class","description"),w(Lt,"type","checkbox"),w(Dt,"for","checkbox"),w(et,"class","section-header"),w(wt,"id","multiple-comp"),w(wt,"class","svelte-wd9p4b"),w(_t,"class","section"),w(r,"class","page-container")},m(H,$){Nn(e,H,$),It(H,n,$),It(H,r,$),d(r,s),d(s,o),d(s,c),d(s,u),d(u,l),d(s,p),d(s,f),d(r,_),d(r,g),d(g,E),d(g,m),d(g,C),d(C,x),d(x,z),d(x,L),d(x,T),d(T,S),d(T,I),d(T,Y),d(x,V),d(x,P),t[13](P),d(C,tt),d(C,W),d(W,O),d(O,it),d(O,nt),d(W,at),d(W,v),d(W,dt),d(W,Q),t[14](Q),d(r,Yt),d(r,U),d(U,Z),d(U,Xt),d(U,mt),d(mt,Ct),d(mt,pe),d(mt,Bt),d(Bt,gt),t[15](gt),d(U,ve),d(U,yt),d(yt,xt),d(yt,me),d(yt,Nt),d(Nt,St),d(St,bt),t[16](bt),d(r,ge),d(r,_t),d(_t,et),d(et,kt),d(et,ye),d(et,Et),d(et,be),d(et,At),d(et,_e),d(et,Lt),Lt.checked=t[7],d(et,we),d(et,Dt),d(_t,Me),d(_t,wt);for(let q=0;q<X.length;q+=1)X[q]&&X[q].m(wt,null);t[22](r),$t=!0,Ce||(je=Sn(Lt,"change",t[17]),Ce=!0)},p(H,$){if($[0]&128&&(Lt.checked=H[7]),$[0]&184){Ht=Xe(Be);let q;for(q=0;q<Ht.length;q+=1){const Kt=dn(H,Ht,q);X[q]?X[q].p(Kt,$):(X[q]=pn(Kt),X[q].c(),X[q].m(wt,null))}for(;q<X.length;q+=1)X[q].d(1);X.length=Ht.length}},i(H){$t||(Hn(e.$$.fragment,H),$t=!0)},o(H){Fn(e.$$.fragment,H),$t=!1},d(H){H&&(D(n),D(r)),Pn(e,H),t[13](null),t[14](null),t[15](null),t[16](null),On(X,H),t[22](null),Ce=!1,je()}}}let st=400;function Vt(t){const e=t.querySelector("figure");e&&e.remove();const n=t.querySelector("svg");n&&n.remove()}function Io(t,e,n){let r,s,o,i,c={},u={},a={},l={},p="barchart",f=!1,{data:h}=e;const _=h.LAD,g=h.oneLADData,E=h.oneLADAllCBs,k=h.totalCBAllZones;h.totalCBAllZones;const m=h.allCBAllLAD,C=h.totalCBAllLAD,x=h.allCBAllLADSUM,z=h.LADToName;let A,L;zn(()=>{A=new hr(_,"LAD",L,"val",!0),A.initMap()});function T(){{let v=rt({height:st/1.4,...ot,x:{type:"band"},style:{fontSize:"18px"},marks:[zt(C,ct({y:"mean"},{y:"val",x:"scenario",fill:"lightblue",opacity:.7,dx:20})),zt(g,ct({y:"sum"},{y:"total",x:"scenario",tip:!0}))]});setTimeout(()=>{const R=ut(v).selectAll("g[aria-label='bar']"),dt=ut(R.nodes()[0]),Q=ut(R.nodes()[1]);console.log(2323232323,dt.node()),Q.selectAll("rect").each(function(){console.log(2,this)}),Q.remove()},1e3)}}function S(){s?.append(rt({height:st,width:811,MARGINS:ot,x:{type:"band"},marks:[zt(x,ct({y:"mean"},{y:"val",x:"co_benefit_type",dx:tn,fill:Rt,tip:!0})),zt(E,ct({y:"sum"},{y:"total",x:"co_benefit_type",tip:!0}))]}))}function M(){Be.forEach(v=>{let R;f?($e.includes(v)?R=rt({height:st/3,width:500*2,...ot,style:{fontSize:"18px"},color:{legend:!0,scheme:"greys"},x:{domain:Cn(0,6),ticks:new Set(g.map(J=>J[v]))},marks:[an(g,ct({fill:"count"},{x:v,stroke:"black"})),an([Math.floor(Gt(k.map(J=>J[v])))],{x:J=>J,stroke:"red",fill:null,strokeWidth:2})]}):R=rt({height:st/3,width:500*2,...ot,style:{fontSize:"18px"},color:{legend:!0},marks:[Te(g,{x:v,tip:!0}),Te([Gt(g.map(J=>J[v]))],{stroke:"blue",strokeWidth:2}),Te([Gt(k.map(J=>J[v]))],{stroke:"red",strokeWidth:2})]}),c[v]?.append(R)):($e.includes(v)?R=rt({height:st/2,width:500,...ot,marginLeft:100,x:{grid:!0,label:v,tickFormat:J=>Math.floor(J)},style:{fontSize:"18px"},color:{legend:!0},marks:[zt(k,fn(ct({y:"count"},{x:v,dx:20,fill:Rt}))),zt(g,fn(ct({y:"count"},{x:v})))]}):R=rt({height:st/2,...ot,style:{fontSize:"18px"},marks:[Le(g,nn({y:"proportion"},{x:v,tip:!0,fill:Rt,stroke:Rt,fillOpacity:.2,strokeWidth:3})),Le(k,nn({y:"proportion"},{x:v,tip:!0,fill:"black",stroke:"black",fillOpacity:.2,strokeWidth:3}))]}),u[v]?.append(void 0),c[v]?.append(R));let Q=rt({height:st/2,...ot,style:{fontSize:"18px"},color:{range:["rgb(227, 248, 255)","lightblue"]},marks:[lo(dr(k,3e4),{x:v,y:"total",fill:"density",thresholds:10}),kr(g,{x:v,y:"total",fill:"black",r:2}),bo(g,{x:v,y:"total"}),ur(),fr({anchor:"bottom"})]});a[v]?.append(Q)})}function I(){for(let v of pr){let R=rt({height:st,width:410,...ot,marginRight:0,marginLeft:100,marks:[rn(m,Qe({x:"mean"},{x:"val",y:"co_benefit_type",dy:-tn/2,fill:Rt,tip:!0})),rn(E,Qe({x:"mean"},{x:"total",y:"co_benefit_type",tip:!0}))]});l[v]?.append(R)}}function Y(){let v=g.flatMap(U=>Ae.map(Z=>({time:Z,value:U[Z],scenario:U.scenario,zone:"local"}))),R=k.flatMap(U=>Ae.map(Z=>({time:Z,value:U[Z],scenario:U.scenario,zone:"UK"}))),dt=v.concat(R),Q=rt({height:st,width:800,...ot,paddingLeft:200,marginRight:0,x:{tickSize:0,label:null,ticks:[]},color:{range:[vr,Rt]},marks:[zt(dt,ct({y:"mean"},{x:"zone",y:"value",fx:"time",tip:!0,fill:"zone"}))]});o?.append(Q),ut(o).select("g[aria-label='bar']").selectAll("g").each(function(U,Z){const Zt=ut(this).selectAll("rect").nodes()[0],Xt=ut(Zt).attr("transform")||"";ut(Zt).attr("transform",`${Xt} translate(-20, 0)`),ut(this).selectAll("rect").nodes()[0].getAttribute("height"),ut(this).selectAll("rect").nodes()[1].getAttribute("height"),ut(this).selectAll("rect")}),rt({height:st,width:800,...ot,paddingLeft:200,marginRight:0,color:{legend:!0},marks:[Gr(dt,ct({y:"mean"},{x:"time",y:"value",tip:!0,stroke:"scenario"}))]});let J=E.flatMap(U=>Ae.map(Z=>({time:Z,value:U[Z],cobenefit:U.co_benefit_type}))),Yt=rt({height:st,width:1e3,...ot,paddingLeft:200,marginRight:0,insetLeft:10,insetRight:10,insetBottom:30,style:{fontSize:"10px"},y:{tickFormat:".2f",label:"Value (£)"},x:{label:"Year"},color:{legend:!0,range:mr,domain:gr},marks:[Le(J,ct({y:"mean"},{x:"time",y:"value",tip:!0,fill:"cobenefit"})),Je([0],{strokeWidth:8,stroke:"white",opacity:1,strokeLinecap:"round"}),Je([0],{strokeWidth:2,stroke:"#333333",opacity:1,strokeLinecap:"round"})]});i?.append(Yt)}function V(v){pt[v?"unshift":"push"](()=>{s=v,n(0,s)})}function P(v){pt[v?"unshift":"push"](()=>{L=v,n(8,L)})}function K(v){pt[v?"unshift":"push"](()=>{o=v,n(1,o)})}function tt(v){pt[v?"unshift":"push"](()=>{i=v,n(2,i)})}function W(){f=this.checked,n(7,f)}function O(v,R){pt[v?"unshift":"push"](()=>{c[R]=v,n(3,c)})}function G(v,R){pt[v?"unshift":"push"](()=>{c[R]=v,n(3,c)})}function it(v,R){pt[v?"unshift":"push"](()=>{u[R]=v,n(4,u)})}function nt(v,R){pt[v?"unshift":"push"](()=>{a[R]=v,n(5,a)})}function at(v){pt[v?"unshift":"push"](()=>{r=v,n(6,r)})}return t.$$set=v=>{"data"in v&&n(11,h=v.data)},t.$$.update=()=>{t.$$.dirty[0]&4103&&(s&&Vt(s),o&&Vt(o),i&&Vt(i),T(),S(),Y()),t.$$.dirty[0]&56&&(Object.values(c).forEach(v=>{v&&Vt(v)}),Object.values(u).forEach(v=>{v&&Vt(v)}),Object.values(a).forEach(v=>{v&&Vt(v)}),M())},Object.values(l).forEach(v=>{v&&Vt(v)}),I(),[s,o,i,c,u,a,r,f,L,_,z,h,p,V,P,K,tt,W,O,G,it,nt,at]}class Uo extends Tn{constructor(e){super(),Vn(this,e,Io,Vo,Dn,{data:11},null,[-1,-1])}}export{Uo as component};
