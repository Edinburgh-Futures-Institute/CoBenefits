import{s as ft,e as r,a as B,t as ie,c,b as m,g as T,d as oe,f as u,q as f,i as Z,h as n,M as Mt,w as Me,n as Ze,E as Gt,N as gl,x as ct,j as he,p as x,D as De,v as Vt,r as Be,H as pl,C as Jt,A as bl,T as kl,a0 as Qt,a1 as Cl,y as Dl,z as El,B as st}from"../chunks/scheduler.Uo5vrMzy.js";import{S as yt,i as Bt,c as nt,b as it,m as ot,t as ye,a as Fe,e as xt,d as rt,g as $t}from"../chunks/index.CfagcI6h.js";import{e as He,N as Vl}from"../chunks/NavigationBar.C20tItRD.js";import{b as de}from"../chunks/paths.DsWfEoAb.js";import"../chunks/entry.HMEu11_-.js";import{G as wt,K as wl,F as yl,O as el}from"../chunks/index.JoTaYIke.js";import{g as Ot,a as Ut,i as Bl,j as Tl,r as Ll,k as Hl,f as Al}from"../chunks/globals.B6l_bkCl.js";import{a as Rt}from"../chunks/bar.CcxJAYDd.js";import{p as Sl,t as Il}from"../chunks/percentage.Cu08Svdw.js";import{p as Pl}from"../chunks/per_capita.COcMrZFY.js";import{g as Et,e as Nl,f as Fl,i as Ml,v as Ol}from"../chunks/duckdb.gcxZ_qSO.js";import"../chunks/transform.BNP73y-7.js";import{F as Ul}from"../chunks/Footer.vUgKdTdA.js";function tl(a,e,t){const l=a.slice();return l[10]=e[t],l}function ll(a){let e,t=He(a[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=al(tl(a,t,s));return{c(){e=r("ul");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=c(s,"UL",{class:!0});var i=m(e);for(let o=0;o<l.length;o+=1)l[o].l(i);i.forEach(u),this.h()},h(){f(e,"class","suggestions svelte-1kj8esc")},m(s,i){Z(s,e,i);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(s,i){if(i&12){t=He(s[2]);let o;for(o=0;o<t.length;o+=1){const d=tl(s,t,o);l[o]?l[o].p(d,i):(l[o]=al(d),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},d(s){s&&u(e),ct(l,s)}}}function al(a){let e,t=a[10][1]+"",l,s,i;function o(){return a[7](a[10])}return{c(){e=r("li"),l=ie(t),this.h()},l(d){e=c(d,"LI",{class:!0});var h=m(e);l=oe(h,t),h.forEach(u),this.h()},h(){f(e,"class","svelte-1kj8esc")},m(d,h){Z(d,e,h),n(e,l),s||(i=Me(e,"click",o),s=!0)},p(d,h){a=d,h&4&&t!==(t=a[10][1]+"")&&he(l,t)},d(d){d&&u(e),s=!1,i()}}}function Rl(a){let e,t,l,s,i,o,d,h,k,D,_=a[2].length&&ll(a);return{c(){e=r("div"),t=r("div"),l=r("input"),s=B(),i=r("button"),o=ie("See Report"),h=B(),_&&_.c(),this.h()},l(C){e=c(C,"DIV",{class:!0});var g=m(e);t=c(g,"DIV",{class:!0});var p=m(t);l=c(p,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,class:!0}),s=T(p),i=c(p,"BUTTON",{type:!0,class:!0});var P=m(i);o=oe(P,"See Report"),P.forEach(u),p.forEach(u),h=T(g),_&&_.l(g),g.forEach(u),this.h()},h(){f(l,"type","text"),f(l,"placeholder","Type local authority name to search..."),f(l,"autocomplete","off"),f(l,"class","svelte-1kj8esc"),f(i,"type","button"),f(i,"class","search-btn svelte-1kj8esc"),i.disabled=d=!a[1],f(t,"class","input-group svelte-1kj8esc"),f(e,"class","autocomplete svelte-1kj8esc")},m(C,g){Z(C,e,g),n(e,t),n(t,l),Mt(l,a[0]),n(t,s),n(t,i),n(i,o),n(e,h),_&&_.m(e,null),k||(D=[Me(l,"input",a[6]),Me(i,"click",a[4])],k=!0)},p(C,[g]){g&1&&l.value!==C[0]&&Mt(l,C[0]),g&2&&d!==(d=!C[1])&&(i.disabled=d),C[2].length?_?_.p(C,g):(_=ll(C),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},i:Ze,o:Ze,d(C){C&&u(e),_&&_.d(),k=!1,Gt(D)}}}function Gl(a,e,t){let l;const s=gl();let{items:i}=e,o="",d=null;const h=Object.entries(i);function k([g,p]){t(0,o=p),t(1,d=g),s("select",g)}function D(){d&&s("search",d)}function _(){o=this.value,t(0,o)}const C=g=>k(g);return a.$$set=g=>{"items"in g&&t(5,i=g.items)},a.$$.update=()=>{a.$$.dirty&1&&t(2,l=o?h.filter(([g,p])=>p.toLowerCase().includes(o.toLowerCase())).slice(0,10):[])},[o,d,l,k,D,i,_,C]}class jl extends yt{constructor(e){super(),Bt(this,e,Gl,Rl,ft,{items:5})}}function sl(a,e,t){const l=a.slice();return l[11]=e[t],l}function nl(a){let e,t=(a[6]==="total"?a[8](a[11].total_value,a[1],a[2],a[11].co_benefit_type,a[5]):a[8](a[11].value_per_capita,a[3],a[4],a[11].co_benefit_type,a[5]))+"",l;return{c(){e=new pl(!1),l=Jt(),this.h()},l(s){e=bl(s,!1),l=Jt(),this.h()},h(){e.a=l},m(s,i){e.m(t,s,i),Z(s,l,i)},p(s,i){i&127&&t!==(t=(s[6]==="total"?s[8](s[11].total_value,s[1],s[2],s[11].co_benefit_type,s[5]):s[8](s[11].value_per_capita,s[3],s[4],s[11].co_benefit_type,s[5]))+"")&&e.p(t)},d(s){s&&(u(l),e.d())}}}function zl(a){let e,t=a[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=r("span"),l=ie(t)},l(s){e=c(s,"SPAN",{});var i=m(e);l=oe(i,t),i.forEach(u)},m(s,i){Z(s,e,i),n(e,l)},p(s,i){i&1&&t!==(t=s[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&he(l,t)},d(s){s&&u(e)}}}function ql(a){let e,t=a[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=r("span"),l=ie(t)},l(s){e=c(s,"SPAN",{});var i=m(e);l=oe(i,t),i.forEach(u)},m(s,i){Z(s,e,i),n(e,l)},p(s,i){i&1&&t!==(t=s[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&he(l,t)},d(s){s&&u(e)}}}function il(a){let e,t,l,s,i,o,d,h=a[7](a[11].co_benefit_type)+"",k,D,_,C,g,p=a[6],P,H,V,b=nl(a);function v(S,N){return S[6]==="total"?ql:zl}let F=v(a),M=F(a);return{c(){e=r("tr"),t=r("td"),l=r("div"),s=r("img"),o=B(),d=r("a"),k=ie(h),_=B(),C=r("td"),g=r("div"),b.c(),P=B(),H=r("td"),M.c(),V=B(),this.h()},l(S){e=c(S,"TR",{});var N=m(e);t=c(N,"TD",{});var O=m(t);l=c(O,"DIV",{class:!0});var K=m(l);s=c(K,"IMG",{src:!0,alt:!0,class:!0}),o=T(K),d=c(K,"A",{href:!0,target:!0});var J=m(d);k=oe(J,h),J.forEach(u),K.forEach(u),O.forEach(u),_=T(N),C=c(N,"TD",{});var G=m(C);g=c(G,"DIV",{class:!0});var A=m(g);b.l(A),A.forEach(u),G.forEach(u),P=T(N),H=c(N,"TD",{});var q=m(H);M.l(q),q.forEach(u),V=T(N),N.forEach(u),this.h()},h(){Be(s.src,i=Ot(a[11].co_benefit_type))||f(s,"src",i),f(s,"alt","Icon"),f(s,"class","in-table-icon"),f(d,"href",D=de+"/cobenefit?cobenefit="+a[11].co_benefit_type),f(d,"target","_blank"),f(l,"class","coben-content"),f(g,"class","bar-cell")},m(S,N){Z(S,e,N),n(e,t),n(t,l),n(l,s),n(l,o),n(l,d),n(d,k),n(e,_),n(e,C),n(C,g),b.m(g,null),n(e,P),n(e,H),M.m(H,null),n(e,V)},p(S,N){N&1&&!Be(s.src,i=Ot(S[11].co_benefit_type))&&f(s,"src",i),N&1&&h!==(h=S[7](S[11].co_benefit_type)+"")&&he(k,h),N&1&&D!==(D=de+"/cobenefit?cobenefit="+S[11].co_benefit_type)&&f(d,"href",D),N&64&&ft(p,p=S[6])?(b.d(1),b=nl(S),b.c(),b.m(g,null)):b.p(S,N),F===(F=v(S))&&M?M.p(S,N):(M.d(1),M=F(S),M&&(M.c(),M.m(H,null)))},d(S){S&&u(e),b.d(S),M.d()}}}function Wl(a){let e,t,l,s="Total",i,o,d="Per Capita",h,k,D,_,C,g="Name",p,P,H=a[6]==="total"?"Total":"Per Capita",V,b,v,F=a[6]==="total"?"£, billion":"£",M,S,N,O,K,J=He(a[0]),G=[];for(let A=0;A<J.length;A+=1)G[A]=il(sl(a,J,A));return{c(){e=r("div"),t=r("div"),l=r("button"),l.textContent=s,i=B(),o=r("button"),o.textContent=d,h=B(),k=r("table"),D=r("thead"),_=r("tr"),C=r("th"),C.textContent=g,p=B(),P=r("th"),V=ie(H),b=B(),v=r("th"),M=ie(F),S=B(),N=r("tbody");for(let A=0;A<G.length;A+=1)G[A].c();this.h()},l(A){e=c(A,"DIV",{class:!0});var q=m(e);t=c(q,"DIV",{class:!0});var R=m(t);l=c(R,"BUTTON",{"data-svelte-h":!0}),x(l)!=="svelte-15mf98g"&&(l.textContent=s),i=T(R),o=c(R,"BUTTON",{"data-svelte-h":!0}),x(o)!=="svelte-1ts3a4f"&&(o.textContent=d),R.forEach(u),q.forEach(u),h=T(A),k=c(A,"TABLE",{class:!0});var ee=m(k);D=c(ee,"THEAD",{});var U=m(D);_=c(U,"TR",{});var W=m(_);C=c(W,"TH",{"data-svelte-h":!0}),x(C)!=="svelte-13ju7y1"&&(C.textContent=g),p=T(W),P=c(W,"TH",{style:!0});var j=m(P);V=oe(j,H),j.forEach(u),b=T(W),v=c(W,"TH",{style:!0});var w=m(v);M=oe(w,F),w.forEach(u),W.forEach(u),U.forEach(u),S=T(ee),N=c(ee,"TBODY",{});var z=m(N);for(let y=0;y<G.length;y+=1)G[y].l(z);z.forEach(u),ee.forEach(u),this.h()},h(){De(l,"selected",a[6]==="total"),De(o,"selected",a[6]==="per_capita"),f(t,"class","button-group"),f(e,"class","controls"),Vt(P,"width","180px"),Vt(v,"width","80px"),f(k,"class","data-table")},m(A,q){Z(A,e,q),n(e,t),n(t,l),n(t,i),n(t,o),Z(A,h,q),Z(A,k,q),n(k,D),n(D,_),n(_,C),n(_,p),n(_,P),n(P,V),n(_,b),n(_,v),n(v,M),n(k,S),n(k,N);for(let R=0;R<G.length;R+=1)G[R]&&G[R].m(N,null);O||(K=[Me(l,"click",a[9]),Me(o,"click",a[10])],O=!0)},p(A,[q]){if(q&64&&De(l,"selected",A[6]==="total"),q&64&&De(o,"selected",A[6]==="per_capita"),q&64&&H!==(H=A[6]==="total"?"Total":"Per Capita")&&he(V,H),q&64&&F!==(F=A[6]==="total"?"£, billion":"£")&&he(M,F),q&511){J=He(A[0]);let R;for(R=0;R<J.length;R+=1){const ee=sl(A,J,R);G[R]?G[R].p(ee,q):(G[R]=il(ee),G[R].c(),G[R].m(N,null))}for(;R<G.length;R+=1)G[R].d(1);G.length=J.length}},i:Ze,o:Ze,d(A){A&&(u(e),u(h),u(k)),ct(G,A),O=!1,Gt(K)}}}function Kl(a,e,t){let{aggregationPerCapitaPerBenefit:l}=e,{minCoBenefValue:s}=e,{maxCoBenefValue:i}=e,{minHHCoBenefValue:o}=e,{maxHHCoBenefValue:d}=e,{COBENEFS_SCALE:h}=e;function k(p){return Ut.find(P=>P.id===p)?.label??p}let D="total";function _(p,P,H,V,b){const v=b(V);return wt({width:100,height:20,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,x:{domain:[P,H],axis:null},marks:[wl([0],{stroke:"#3C3C3C"}),Rt([p],{x:M=>M,y:0,fill:v})]}).outerHTML}const C=()=>t(6,D="total"),g=()=>t(6,D="per_capita");return a.$$set=p=>{"aggregationPerCapitaPerBenefit"in p&&t(0,l=p.aggregationPerCapitaPerBenefit),"minCoBenefValue"in p&&t(1,s=p.minCoBenefValue),"maxCoBenefValue"in p&&t(2,i=p.maxCoBenefValue),"minHHCoBenefValue"in p&&t(3,o=p.minHHCoBenefValue),"maxHHCoBenefValue"in p&&t(4,d=p.maxHHCoBenefValue),"COBENEFS_SCALE"in p&&t(5,h=p.COBENEFS_SCALE)},[l,s,i,o,d,h,D,k,_,C,g]}class Xl extends yt{constructor(e){super(),Bt(this,e,Kl,Wl,ft,{aggregationPerCapitaPerBenefit:0,minCoBenefValue:1,maxCoBenefValue:2,minHHCoBenefValue:3,maxHHCoBenefValue:4,COBENEFS_SCALE:5})}}function ol(a,e,t){const l=a.slice();return l[16]=e[t],l}function rl(a,e,t){const l=a.slice();return l[19]=e[t],l}function cl(a){let e,t=a[19].label+"",l;return{c(){e=r("option"),l=ie(t),this.h()},l(s){e=c(s,"OPTION",{});var i=m(e);l=oe(i,t),i.forEach(u),this.h()},h(){e.__value=a[19].value,Mt(e,e.__value)},m(s,i){Z(s,e,i),n(e,l)},p:Ze,d(s){s&&u(e)}}}function Yl(a){let e,t=a[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=r("span"),l=ie(t)},l(s){e=c(s,"SPAN",{});var i=m(e);l=oe(i,t),i.forEach(u)},m(s,i){Z(s,e,i),n(e,l)},p(s,i){i&2&&t!==(t=s[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&he(l,t)},d(s){s&&u(e)}}}function Zl(a){let e,t=a[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=r("span"),l=ie(t)},l(s){e=c(s,"SPAN",{});var i=m(e);l=oe(i,t),i.forEach(u)},m(s,i){Z(s,e,i),n(e,l)},p(s,i){i&2&&t!==(t=s[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&he(l,t)},d(s){s&&u(e)}}}function fl(a){let e,t,l,s=(a[5][a[16].LAD]??a[16].LAD)+"",i,o,d,h,k,D,_=(a[2]==="total"?a[9](a[16].total_value,a[3]):a[10](a[16].value_per_capita,a[4]))+"",C,g,p;function P(b,v){return b[2]==="total"?Zl:Yl}let H=P(a),V=H(a);return{c(){e=r("tr"),t=r("td"),l=r("a"),i=ie(s),d=B(),h=r("td"),k=r("div"),D=new pl(!1),C=B(),g=r("td"),V.c(),p=B(),this.h()},l(b){e=c(b,"TR",{});var v=m(e);t=c(v,"TD",{});var F=m(t);l=c(F,"A",{href:!0,target:!0});var M=m(l);i=oe(M,s),M.forEach(u),F.forEach(u),d=T(v),h=c(v,"TD",{});var S=m(h);k=c(S,"DIV",{class:!0});var N=m(k);D=bl(N,!1),N.forEach(u),S.forEach(u),C=T(v),g=c(v,"TD",{});var O=m(g);V.l(O),O.forEach(u),p=T(v),v.forEach(u),this.h()},h(){f(l,"href",o=de+"/location?location="+a[16].LAD),f(l,"target","_blank"),D.a=null,f(k,"class","bar-cell")},m(b,v){Z(b,e,v),n(e,t),n(t,l),n(l,i),n(e,d),n(e,h),n(h,k),D.m(_,k),n(e,C),n(e,g),V.m(g,null),n(e,p)},p(b,v){v&34&&s!==(s=(b[5][b[16].LAD]??b[16].LAD)+"")&&he(i,s),v&2&&o!==(o=de+"/location?location="+b[16].LAD)&&f(l,"href",o),v&30&&_!==(_=(b[2]==="total"?b[9](b[16].total_value,b[3]):b[10](b[16].value_per_capita,b[4]))+"")&&D.p(_),H===(H=P(b))&&V?V.p(b,v):(V.d(1),V=H(b),V&&(V.c(),V.m(g,null)))},d(b){b&&u(e),V.d()}}}function Jl(a){let e,t,l="Nation:",s,i,o,d,h,k="Total",D,_,C="Per Capita",g,p,P,H,V,b='Name <span style="font-weight:300; color: #545454">(Top 12 in display)</span>',v,F,M=a[2]==="total"?"Total":"Per Capita",S,N,O,K=a[2]==="total"?"£, billion":"£",J,G,A,q,R,ee=He(a[7]),U=[];for(let w=0;w<ee.length;w+=1)U[w]=cl(rl(a,ee,w));let W=He(a[1]),j=[];for(let w=0;w<W.length;w+=1)j[w]=fl(ol(a,W,w));return{c(){e=r("div"),t=r("label"),t.textContent=l,s=B(),i=r("select");for(let w=0;w<U.length;w+=1)U[w].c();o=B(),d=r("div"),h=r("button"),h.textContent=k,D=B(),_=r("button"),_.textContent=C,g=B(),p=r("table"),P=r("thead"),H=r("tr"),V=r("th"),V.innerHTML=b,v=B(),F=r("th"),S=ie(M),N=B(),O=r("th"),J=ie(K),G=B(),A=r("tbody");for(let w=0;w<j.length;w+=1)j[w].c();this.h()},l(w){e=c(w,"DIV",{class:!0});var z=m(e);t=c(z,"LABEL",{"data-svelte-h":!0}),x(t)!=="svelte-1ecnfnj"&&(t.textContent=l),s=T(z),i=c(z,"SELECT",{});var y=m(i);for(let ve=0;ve<U.length;ve+=1)U[ve].l(y);y.forEach(u),o=T(z),d=c(z,"DIV",{class:!0});var ae=m(d);h=c(ae,"BUTTON",{"data-svelte-h":!0}),x(h)!=="svelte-2dev6e"&&(h.textContent=k),D=T(ae),_=c(ae,"BUTTON",{"data-svelte-h":!0}),x(_)!=="svelte-1q4fgxf"&&(_.textContent=C),ae.forEach(u),z.forEach(u),g=T(w),p=c(w,"TABLE",{class:!0});var be=m(p);P=c(be,"THEAD",{});var Te=m(P);H=c(Te,"TR",{});var ke=m(H);V=c(ke,"TH",{"data-svelte-h":!0}),x(V)!=="svelte-1homman"&&(V.innerHTML=b),v=T(ke),F=c(ke,"TH",{style:!0});var Oe=m(F);S=oe(Oe,M),Oe.forEach(u),N=T(ke),O=c(ke,"TH",{style:!0});var Ue=m(O);J=oe(Ue,K),Ue.forEach(u),ke.forEach(u),Te.forEach(u),G=T(be),A=c(be,"TBODY",{});var Ee=m(A);for(let ve=0;ve<j.length;ve+=1)j[ve].l(Ee);Ee.forEach(u),be.forEach(u),this.h()},h(){a[0]===void 0&&kl(()=>a[13].call(i)),De(h,"selected",a[2]==="total"),De(_,"selected",a[2]==="per_capita"),f(d,"class","button-group"),f(e,"class","controls"),Vt(F,"width","120px"),Vt(O,"width","80px"),f(p,"class","data-table")},m(w,z){Z(w,e,z),n(e,t),n(e,s),n(e,i);for(let y=0;y<U.length;y+=1)U[y]&&U[y].m(i,null);Qt(i,a[0],!0),n(e,o),n(e,d),n(d,h),n(d,D),n(d,_),Z(w,g,z),Z(w,p,z),n(p,P),n(P,H),n(H,V),n(H,v),n(H,F),n(F,S),n(H,N),n(H,O),n(O,J),n(p,G),n(p,A);for(let y=0;y<j.length;y+=1)j[y]&&j[y].m(A,null);q||(R=[Me(i,"change",a[13]),Me(i,"change",a[8]),Me(h,"click",a[14]),Me(_,"click",a[15])],q=!0)},p(w,[z]){if(z&128){ee=He(w[7]);let y;for(y=0;y<ee.length;y+=1){const ae=rl(w,ee,y);U[y]?U[y].p(ae,z):(U[y]=cl(ae),U[y].c(),U[y].m(i,null))}for(;y<U.length;y+=1)U[y].d(1);U.length=ee.length}if(z&129&&Qt(i,w[0]),z&4&&De(h,"selected",w[2]==="total"),z&4&&De(_,"selected",w[2]==="per_capita"),z&4&&M!==(M=w[2]==="total"?"Total":"Per Capita")&&he(S,M),z&4&&K!==(K=w[2]==="total"?"£, billion":"£")&&he(J,K),z&1598){W=He(w[1]);let y;for(y=0;y<W.length;y+=1){const ae=ol(w,W,y);j[y]?j[y].p(ae,z):(j[y]=fl(ae),j[y].c(),j[y].m(A,null))}for(;y<j.length;y+=1)j[y].d(1);j.length=W.length}},i:Ze,o:Ze,d(w){w&&(u(e),u(g),u(p)),ct(U,w),ct(j,w),q=!1,Gt(R)}}}function Ql(a,e,t){const l=gl();let{ladData:s=[]}=e,{region:i}=e,{sortBy:o}=e,{maxLADValue:d}=e,{maxHHLADValue:h}=e,{LADToName:k={}}=e,{viewMode:D="total"}=e,{selectedRegion:_="All"}=e;const C=[{label:"All",value:"All"},{label:"England",value:"England"},{label:"Wales",value:"Wales"},{label:"Scotland",value:"Scotland"},{label:"Northern Ireland",value:"NI"}];function g(v){l("filterChange",{region:v.target.value,sortBy:o})}function p(v,F){return wt({width:80,height:20,margin:0,x:{domain:[0,F],axis:null},marks:[Rt([v],{x:S=>S,y:0,fill:"#ccc"})]}).outerHTML}function P(v,F){return wt({width:80,height:20,margin:0,x:{domain:[0,F],axis:null},marks:[Rt([v],{x:S=>S,y:0,fill:"#ccc"})]}).outerHTML}function H(){i=Cl(this),t(0,i),t(7,C)}const V=()=>l("filterChange",{region:i,sortBy:"total"}),b=()=>l("filterChange",{region:i,sortBy:"per_capita"});return a.$$set=v=>{"ladData"in v&&t(1,s=v.ladData),"region"in v&&t(0,i=v.region),"sortBy"in v&&t(2,o=v.sortBy),"maxLADValue"in v&&t(3,d=v.maxLADValue),"maxHHLADValue"in v&&t(4,h=v.maxHHLADValue),"LADToName"in v&&t(5,k=v.LADToName),"viewMode"in v&&t(11,D=v.viewMode),"selectedRegion"in v&&t(12,_=v.selectedRegion)},[i,s,o,d,h,k,l,C,g,p,P,D,_,H,V,b]}class xl extends yt{constructor(e){super(),Bt(this,e,Ql,Jl,ft,{ladData:1,region:0,sortBy:2,maxLADValue:3,maxHHLADValue:4,LADToName:5,viewMode:11,selectedRegion:12})}}function ul(a,e,t){const l=a.slice();return l[47]=e[t],l[49]=t,l}function dl(a){let e,t,l,s,i,o,d;return{c(){e=r("div"),t=r("img"),i=B(),o=r("img"),this.h()},l(h){e=c(h,"DIV",{class:!0});var k=m(e);t=c(k,"IMG",{class:!0,src:!0,alt:!0}),i=T(k),o=c(k,"IMG",{class:!0,src:!0,alt:!0}),k.forEach(u),this.h()},h(){f(t,"class","slide-image"),Be(t.src,l=a[47].image)||f(t,"src",l),f(t,"alt",s=a[47].label),f(o,"class","slide-map svelte-12d0km7"),Be(o.src,d=a[47].mapImage)||f(o,"src",d),f(o,"alt","Map overlay"),f(e,"class","hero-slide svelte-12d0km7"),De(e,"active",a[49]===a[23]),De(e,"previous",a[49]===a[24])},m(h,k){Z(h,e,k),n(e,t),n(e,i),n(e,o)},p(h,k){k[0]&1048576&&!Be(t.src,l=h[47].image)&&f(t,"src",l),k[0]&1048576&&s!==(s=h[47].label)&&f(t,"alt",s),k[0]&1048576&&!Be(o.src,d=h[47].mapImage)&&f(o,"src",d),k[0]&8388608&&De(e,"active",h[49]===h[23]),k[0]&16777216&&De(e,"previous",h[49]===h[24])},d(h){h&&u(e)}}}function hl(a){let e,t,l;return{c(){e=r("div"),t=r("img"),this.h()},l(s){e=c(s,"DIV",{class:!0});var i=m(e);t=c(i,"IMG",{src:!0,alt:!0,class:!0}),i.forEach(u),this.h()},h(){Be(t.src,l=a[19])||f(t,"src",l),f(t,"alt","Icon"),f(t,"class","svelte-12d0km7"),f(e,"class","waffle-icon svelte-12d0km7")},m(s,i){Z(s,e,i),n(e,t)},p(s,i){i[0]&524288&&!Be(t.src,l=s[19])&&f(t,"src",l)},d(s){s&&u(e)}}}function $l(a){let e,t="National costs";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-o12owz"&&(e.textContent=t),this.h()},h(){f(e,"class","waffle-caption svelte-12d0km7")},m(l,s){Z(l,e,s)},d(l){l&&u(e)}}}function ea(a){let e,t="National benefits";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-10ytukz"&&(e.textContent=t),this.h()},h(){f(e,"class","waffle-caption svelte-12d0km7")},m(l,s){Z(l,e,s)},d(l){l&&u(e)}}}function ta(a){let e,t="Per capita costs";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-6pmcl0"&&(e.textContent=t),this.h()},h(){f(e,"class","waffle-caption svelte-12d0km7")},m(l,s){Z(l,e,s)},d(l){l&&u(e)}}}function la(a){let e,t="Per capita benefits";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-g1rvwk"&&(e.textContent=t),this.h()},h(){f(e,"class","waffle-caption svelte-12d0km7")},m(l,s){Z(l,e,s)},d(l){l&&u(e)}}}function ml(a){let e,t,l,s,i,o,d,h,k,D,_="%",C,g,p="Contribution";return{c(){e=r("div"),t=r("div"),l=r("img"),i=B(),o=r("div"),d=r("span"),h=ie(a[18]),k=B(),D=r("span"),D.textContent=_,C=B(),g=r("div"),g.textContent=p,this.h()},l(P){e=c(P,"DIV",{class:!0});var H=m(e);t=c(H,"DIV",{class:!0});var V=m(t);l=c(V,"IMG",{class:!0,src:!0,alt:!0}),i=T(V),o=c(V,"DIV",{class:!0});var b=m(o);d=c(b,"SPAN",{class:!0});var v=m(d);h=oe(v,a[18]),v.forEach(u),k=T(b),D=c(b,"SPAN",{class:!0,"data-svelte-h":!0}),x(D)!=="svelte-jxggz7"&&(D.textContent=_),b.forEach(u),V.forEach(u),C=T(H),g=c(H,"DIV",{class:!0,"data-svelte-h":!0}),x(g)!=="svelte-1ahdmih"&&(g.textContent=p),H.forEach(u),this.h()},h(){f(l,"class","aggregation-icon-small svelte-12d0km7"),Be(l.src,s=Sl)||f(l,"src",s),f(l,"alt","icon"),f(d,"class","waffle-big svelte-12d0km7"),f(D,"class","small svelte-12d0km7"),f(o,"class","waffle-value svelte-12d0km7"),f(t,"class","waffle-value-container svelte-12d0km7"),f(g,"class","waffle-caption svelte-12d0km7"),f(e,"class","waffle-stat svelte-12d0km7")},m(P,H){Z(P,e,H),n(e,t),n(t,l),n(t,i),n(t,o),n(o,d),n(d,h),n(o,k),n(o,D),n(e,C),n(e,g)},p(P,H){H[0]&262144&&he(h,P[18])},d(P){P&&u(e)}}}function vl(a){let e,t;return e=new xl({props:{ladData:a[7],region:a[8],sortBy:a[9],maxLADValue:a[10],maxHHLADValue:a[11],LADToName:a[25]}}),e.$on("filterChange",a[26]),{c(){nt(e.$$.fragment)},l(l){it(e.$$.fragment,l)},m(l,s){ot(e,l,s),t=!0},p(l,s){const i={};s[0]&128&&(i.ladData=l[7]),s[0]&256&&(i.region=l[8]),s[0]&512&&(i.sortBy=l[9]),s[0]&1024&&(i.maxLADValue=l[10]),s[0]&2048&&(i.maxHHLADValue=l[11]),e.$set(i)},i(l){t||(ye(e.$$.fragment,l),t=!0)},o(l){Fe(e.$$.fragment,l),t=!1},d(l){rt(e,l)}}}function _l(a){let e,t;return e=new Xl({props:{aggregationPerCapitaPerBenefit:a[1],minCoBenefValue:a[3],maxCoBenefValue:a[2],minHHCoBenefValue:a[4],maxHHCoBenefValue:a[5],COBENEFS_SCALE:Bl}}),{c(){nt(e.$$.fragment)},l(l){it(e.$$.fragment,l)},m(l,s){ot(e,l,s),t=!0},p(l,s){const i={};s[0]&2&&(i.aggregationPerCapitaPerBenefit=l[1]),s[0]&8&&(i.minCoBenefValue=l[3]),s[0]&4&&(i.maxCoBenefValue=l[2]),s[0]&16&&(i.minHHCoBenefValue=l[4]),s[0]&32&&(i.maxHHCoBenefValue=l[5]),e.$set(i)},i(l){t||(ye(e.$$.fragment,l),t=!0)},o(l){Fe(e.$$.fragment,l),t=!1},d(l){rt(e,l)}}}function aa(a){let e,t,l,s,i,o,d,h=`<img src="${de}/atlas-logos/logo-colored-waffle-png.png" alt="Logo" height="0px"/> <h1 class="hero-title svelte-12d0km7">The Co-Benefits of Reaching <br/> Net Zero in the UK</h1> <p class="hero-description svelte-12d0km7">Climate actions lower greenhouse gas (GHG) emissions but the gains for society reach further. The
                    CO-BENS project models 11 additional benefits based on actions recommended by the Climate Change
                    Committee (CCC) in its Seventh Carbon Budget (2025) across 45,000 communities and regions within the
                    UK.<br/></p> <p class="hero-description svelte-12d0km7">Explore how, when and for whom benefits emerge to further understand connections between a wide
                    range of
                    social, economic and environmental priorities, and drive more effective decision-making.</p> <p class="hero-description svelte-12d0km7">To understand more about the analysis or if you would like bespoke co-benefit modelling please get
                    in
                    touch by emailing <a href="mailto:cobens@ed.ac.uk">cobens@ed.ac.uk</a></p>`,k,D,_,C,g,p,P,H,V,b,v,F,M,S,N,O,K,J,G,A,q="billion",R,ee,U,W,j,w,z,y,ae,be,Te,ke,Oe,Ue,Ee,ve,Ge,E,te,Q,_e="Explore the Atlas",Le,le,X,ge=`<h2>Browse Report Pages</h2> <div class="explore-pages svelte-12d0km7"><a href="${de}/coben" class="svelte-12d0km7"><div class="explore-page svelte-12d0km7"><img class="page-teaser-img svelte-12d0km7" src="${de}/pages-teasers/coben.png"/> <h3 class="svelte-12d0km7">11 Co-Benefits Pages</h3> <p class="svelte-12d0km7">A Co-benefit page shows the spatial and temporal distribution of a given co-benefit, and
                                its relationship with socio-economic factors.</p></div></a> <a href="${de}/lad" class="svelte-12d0km7"><div class="explore-page svelte-12d0km7"><img class="page-teaser-img svelte-12d0km7" src="${de}/pages-teasers/location.png"/> <h3 class="svelte-12d0km7">382 Local Area Pages</h3> <p class="svelte-12d0km7">A Local Area page shows the different co-benefits in this area, temporal distributions,
                                and their relationships with local socio-economic distributions.</p></div></a> <a href="${de}/sefs" class="svelte-12d0km7"><div class="explore-page svelte-12d0km7"><img class="page-teaser-img svelte-12d0km7" src="${de}/pages-teasers/sef.png"/> <h3 class="svelte-12d0km7">17 Socio-Economic Factors Pages</h3> <p class="svelte-12d0km7">A Socio-Economic Factor Page shows the spatial distribution of a given factor and it&#39;s
                                relationships with the different co-benefits.</p></div></a> <a href="${de}/map" class="svelte-12d0km7"><div class="explore-page svelte-12d0km7"><img class="page-teaser-img svelte-12d0km7" src="${de}/pages-teasers/map.png"/> <h3 class="svelte-12d0km7">1 Interactive Map</h3> <p class="svelte-12d0km7">The interactive map enables exploring the spatial distributions of both the co-benefits
                                and the socio-economic factors at the datazones and local area levels.</p></div></a></div>`,Ce,me,I,re="Find My Place",Ae,pe,lt,Se,at=`<h1>Read Stories and Analyses</h1> <div class="explore-pages svelte-12d0km7"><a href="${de}/stories/Derry_story.docx" download="story" class="svelte-12d0km7"><div class="story"><img class="story-teaser-img svelte-12d0km7" src="${de}/stories/Derry_picture.png"/> <h3>Accelerating climate financing in Derry City and Strabane District Council</h3></div></a></div>`,Ie,Re,Ve,je,jt="Explore by Local Authority",Tt,ze,zt="Click to see local authority data report.",Lt,Ht,we,qe,qt="Explore by Co-Benefit",At,We,Wt="Click to see each co-benefit data report.",St,It,Ke,Xe;t=new Vl({});let Je=He(a[20]),ce=[];for(let L=0;L<Je.length;L+=1)ce[L]=dl(ul(a,Je,L));let fe=a[19]&&hl(a);function Kt(L,Y){return L[16]>0?ea:$l}let ut=Kt(a),Pe=ut(a);function Xt(L,Y){return L[17]>0?la:ta}let dt=Xt(a),Ne=dt(a),ue=a[22]!==null&&ml(a);pe=new jl({props:{items:a[25]}}),pe.$on("search",a[33]);let se=!a[6]&&vl(a),ne=!a[6]&&_l(a);return Ke=new Ul({}),{c(){e=r("div"),nt(t.$$.fragment),l=B(),s=r("section");for(let L=0;L<ce.length;L+=1)ce[L].c();i=B(),o=r("div"),d=r("div"),d.innerHTML=h,k=B(),D=r("div"),_=r("div"),C=r("div"),fe&&fe.c(),g=B(),p=r("div"),P=ie(a[15]),H=B(),V=r("div"),b=r("div"),v=r("div"),F=r("img"),S=B(),N=r("div"),O=r("span"),K=ie("£"),J=ie(a[16]),G=B(),A=r("span"),A.textContent=q,R=B(),Pe.c(),ee=B(),U=r("div"),W=r("div"),j=r("img"),z=B(),y=r("div"),ae=r("span"),be=ie("£"),Te=ie(a[17]),ke=B(),Ne.c(),Oe=B(),ue&&ue.c(),Ue=B(),Ee=r("div"),ve=B(),Ge=r("div"),E=B(),te=r("section"),Q=r("h1"),Q.textContent=_e,Le=B(),le=r("div"),X=r("div"),X.innerHTML=ge,Ce=B(),me=r("div"),I=r("h1"),I.textContent=re,Ae=B(),nt(pe.$$.fragment),lt=B(),Se=r("div"),Se.innerHTML=at,Ie=B(),Re=r("section"),Ve=r("div"),je=r("h2"),je.textContent=jt,Tt=B(),ze=r("p"),ze.textContent=zt,Lt=B(),se&&se.c(),Ht=B(),we=r("div"),qe=r("h2"),qe.textContent=qt,At=B(),We=r("p"),We.textContent=Wt,St=B(),ne&&ne.c(),It=B(),nt(Ke.$$.fragment),this.h()},l(L){e=c(L,"DIV",{});var Y=m(e);it(t.$$.fragment,Y),l=T(Y),s=c(Y,"SECTION",{class:!0});var $=m(s);for(let Ft=0;Ft<ce.length;Ft+=1)ce[Ft].l($);i=T($),o=c($,"DIV",{class:!0});var Ye=m(o);d=c(Ye,"DIV",{class:!0,"data-svelte-h":!0}),x(d)!=="svelte-8289tn"&&(d.innerHTML=h),k=T(Ye),D=c(Ye,"DIV",{class:!0});var Qe=m(D);_=c(Qe,"DIV",{class:!0});var ht=m(_);C=c(ht,"DIV",{class:!0});var mt=m(C);fe&&fe.l(mt),g=T(mt),p=c(mt,"DIV",{class:!0});var Yt=m(p);P=oe(Yt,a[15]),Yt.forEach(u),mt.forEach(u),H=T(ht),V=c(ht,"DIV",{class:!0});var xe=m(V);b=c(xe,"DIV",{class:!0});var vt=m(b);v=c(vt,"DIV",{class:!0});var _t=m(v);F=c(_t,"IMG",{class:!0,src:!0,alt:!0}),S=T(_t),N=c(_t,"DIV",{class:!0});var gt=m(N);O=c(gt,"SPAN",{class:!0});var Pt=m(O);K=oe(Pt,"£"),J=oe(Pt,a[16]),Pt.forEach(u),G=T(gt),A=c(gt,"SPAN",{class:!0,"data-svelte-h":!0}),x(A)!=="svelte-tlhydp"&&(A.textContent=q),gt.forEach(u),_t.forEach(u),R=T(vt),Pe.l(vt),vt.forEach(u),ee=T(xe),U=c(xe,"DIV",{class:!0});var pt=m(U);W=c(pt,"DIV",{class:!0});var bt=m(W);j=c(bt,"IMG",{class:!0,src:!0,alt:!0}),z=T(bt),y=c(bt,"DIV",{class:!0});var Zt=m(y);ae=c(Zt,"SPAN",{class:!0});var Nt=m(ae);be=oe(Nt,"£"),Te=oe(Nt,a[17]),Nt.forEach(u),Zt.forEach(u),bt.forEach(u),ke=T(pt),Ne.l(pt),pt.forEach(u),Oe=T(xe),ue&&ue.l(xe),xe.forEach(u),ht.forEach(u),Ue=T(Qe),Ee=c(Qe,"DIV",{class:!0}),m(Ee).forEach(u),ve=T(Qe),Ge=c(Qe,"DIV",{}),m(Ge).forEach(u),Qe.forEach(u),Ye.forEach(u),$.forEach(u),E=T(Y),te=c(Y,"SECTION",{id:!0,class:!0});var kt=m(te);Q=c(kt,"H1",{id:!0,class:!0,"data-svelte-h":!0}),x(Q)!=="svelte-157b9z3"&&(Q.textContent=_e),Le=T(kt),le=c(kt,"DIV",{id:!0,class:!0});var $e=m(le);X=c($e,"DIV",{class:!0,"data-svelte-h":!0}),x(X)!=="svelte-gkz4ya"&&(X.innerHTML=ge),Ce=T($e),me=c($e,"DIV",{class:!0});var Ct=m(me);I=c(Ct,"H1",{class:!0,"data-svelte-h":!0}),x(I)!=="svelte-byubde"&&(I.textContent=re),Ae=T(Ct),it(pe.$$.fragment,Ct),Ct.forEach(u),lt=T($e),Se=c($e,"DIV",{class:!0,"data-svelte-h":!0}),x(Se)!=="svelte-pw4ou5"&&(Se.innerHTML=at),$e.forEach(u),kt.forEach(u),Ie=T(Y),Re=c(Y,"SECTION",{class:!0});var Dt=m(Re);Ve=c(Dt,"DIV",{class:!0});var et=m(Ve);je=c(et,"H2",{class:!0,"data-svelte-h":!0}),x(je)!=="svelte-pgup4c"&&(je.textContent=jt),Tt=T(et),ze=c(et,"P",{class:!0,"data-svelte-h":!0}),x(ze)!=="svelte-owmq24"&&(ze.textContent=zt),Lt=T(et),se&&se.l(et),et.forEach(u),Ht=T(Dt),we=c(Dt,"DIV",{class:!0});var tt=m(we);qe=c(tt,"H2",{class:!0,"data-svelte-h":!0}),x(qe)!=="svelte-9nk5va"&&(qe.textContent=qt),At=T(tt),We=c(tt,"P",{class:!0,"data-svelte-h":!0}),x(We)!=="svelte-4140on"&&(We.textContent=Wt),St=T(tt),ne&&ne.l(tt),tt.forEach(u),Dt.forEach(u),It=T(Y),it(Ke.$$.fragment,Y),Y.forEach(u),this.h()},h(){f(d,"class","hero-text svelte-12d0km7"),f(p,"class","waffle-title svelte-12d0km7"),f(C,"class","waffle-header svelte-12d0km7"),f(F,"class","aggregation-icon-small svelte-12d0km7"),Be(F.src,M=Il)||f(F,"src",M),f(F,"alt","icon"),f(O,"class","waffle-big svelte-12d0km7"),f(A,"class","small svelte-12d0km7"),f(N,"class","waffle-value svelte-12d0km7"),f(v,"class","waffle-value-container svelte-12d0km7"),f(b,"class","waffle-stat svelte-12d0km7"),f(j,"class","aggregation-icon-small svelte-12d0km7"),Be(j.src,w=Pl)||f(j,"src",w),f(j,"alt","icon"),f(ae,"class","waffle-big svelte-12d0km7"),f(y,"class","waffle-value svelte-12d0km7"),f(W,"class","waffle-value-container svelte-12d0km7"),f(U,"class","waffle-stat svelte-12d0km7"),f(V,"class","waffle-stats svelte-12d0km7"),f(_,"class","waffle-label svelte-12d0km7"),f(Ee,"class","waffle-bg svelte-12d0km7"),f(D,"class","waffle-overlay svelte-12d0km7"),f(o,"class","hero-content svelte-12d0km7"),f(s,"class","hero-container svelte-12d0km7"),f(Q,"id","explore-title"),f(Q,"class","svelte-12d0km7"),f(X,"class","explore-block svelte-12d0km7"),f(I,"class","svelte-12d0km7"),f(me,"class","explore-block search-section svelte-12d0km7"),f(Se,"class","explore-block svelte-12d0km7"),f(le,"id","explore-section-main"),f(le,"class","svelte-12d0km7"),f(te,"id","explore-section"),f(te,"class","svelte-12d0km7"),f(je,"class","svelte-12d0km7"),f(ze,"class","svelte-12d0km7"),f(Ve,"class","side-box svelte-12d0km7"),f(qe,"class","svelte-12d0km7"),f(We,"class","svelte-12d0km7"),f(we,"class","side-box svelte-12d0km7"),f(Re,"class","side-by-side-section svelte-12d0km7")},m(L,Y){Z(L,e,Y),ot(t,e,null),n(e,l),n(e,s);for(let $=0;$<ce.length;$+=1)ce[$]&&ce[$].m(s,null);n(s,i),n(s,o),n(o,d),n(o,k),n(o,D),n(D,_),n(_,C),fe&&fe.m(C,null),n(C,g),n(C,p),n(p,P),n(_,H),n(_,V),n(V,b),n(b,v),n(v,F),n(v,S),n(v,N),n(N,O),n(O,K),n(O,J),n(N,G),n(N,A),n(b,R),Pe.m(b,null),n(V,ee),n(V,U),n(U,W),n(W,j),n(W,z),n(W,y),n(y,ae),n(ae,be),n(ae,Te),n(U,ke),Ne.m(U,null),n(V,Oe),ue&&ue.m(V,null),a[29](_),n(D,Ue),n(D,Ee),a[30](Ee),n(D,ve),n(D,Ge),a[31](Ge),a[32](s),n(e,E),n(e,te),n(te,Q),n(te,Le),n(te,le),n(le,X),n(le,Ce),n(le,me),n(me,I),n(me,Ae),ot(pe,me,null),n(le,lt),n(le,Se),n(e,Ie),n(e,Re),n(Re,Ve),n(Ve,je),n(Ve,Tt),n(Ve,ze),n(Ve,Lt),se&&se.m(Ve,null),n(Re,Ht),n(Re,we),n(we,qe),n(we,At),n(we,We),n(we,St),ne&&ne.m(we,null),n(e,It),ot(Ke,e,null),a[34](e),Xe=!0},p(L,Y){if(Y[0]&26214400){Je=He(L[20]);let $;for($=0;$<Je.length;$+=1){const Ye=ul(L,Je,$);ce[$]?ce[$].p(Ye,Y):(ce[$]=dl(Ye),ce[$].c(),ce[$].m(s,i))}for(;$<ce.length;$+=1)ce[$].d(1);ce.length=Je.length}L[19]?fe?fe.p(L,Y):(fe=hl(L),fe.c(),fe.m(C,g)):fe&&(fe.d(1),fe=null),(!Xe||Y[0]&32768)&&he(P,L[15]),(!Xe||Y[0]&65536)&&he(J,L[16]),ut!==(ut=Kt(L))&&(Pe.d(1),Pe=ut(L),Pe&&(Pe.c(),Pe.m(b,null))),(!Xe||Y[0]&131072)&&he(Te,L[17]),dt!==(dt=Xt(L))&&(Ne.d(1),Ne=dt(L),Ne&&(Ne.c(),Ne.m(U,null))),L[22]!==null?ue?ue.p(L,Y):(ue=ml(L),ue.c(),ue.m(V,null)):ue&&(ue.d(1),ue=null),L[6]?se&&($t(),Fe(se,1,1,()=>{se=null}),xt()):se?(se.p(L,Y),Y[0]&64&&ye(se,1)):(se=vl(L),se.c(),ye(se,1),se.m(Ve,null)),L[6]?ne&&($t(),Fe(ne,1,1,()=>{ne=null}),xt()):ne?(ne.p(L,Y),Y[0]&64&&ye(ne,1)):(ne=_l(L),ne.c(),ye(ne,1),ne.m(we,null))},i(L){Xe||(ye(t.$$.fragment,L),ye(pe.$$.fragment,L),ye(se),ye(ne),ye(Ke.$$.fragment,L),Xe=!0)},o(L){Fe(t.$$.fragment,L),Fe(pe.$$.fragment,L),Fe(se),Fe(ne),Fe(Ke.$$.fragment,L),Xe=!1},d(L){L&&u(e),rt(t),ct(ce,L),fe&&fe.d(),Pe.d(),Ne.d(),ue&&ue.d(),a[29](null),a[30](null),a[31](null),a[32](null),rt(pe),se&&se.d(),ne&&ne.d(),rt(Ke),a[34](null)}}}function sa(a,e,t){let{data:l}=e,s=l.LADToName,i,o,d,h,k,D,_,C,g=!0;async function p(){o=await Et(Nl()),console.log("aggregationPerBenefit",o),t(1,d=await Et(Fl())),await Et(Ml()),o=[...o].sort((E,te)=>te.total-E.total),t(1,d=[...d].sort((E,te)=>te.total_value-E.total_value)),console.log("aggregationPerCapitaPerBenefit",d),h=yl(d,E=>E.value_per_capita),console.log("aggregationPerCapita",h),t(2,k=Math.max(...d.map(E=>E.total_value))),t(3,D=Math.min(...d.map(E=>E.total_value))),t(4,_=Math.min(...d.map(E=>E.value_per_capita))),t(5,C=Math.max(...d.map(E=>E.value_per_capita))),t(6,g=!1)}let P=[],H="All",V="total",b=0,v=0;async function F(){const E=Ol({region:H,sortBy:V}),te=await Et(E);t(7,P=te),t(10,b=Math.max(...te.map(Q=>Q.total_value))),t(11,v=Math.max(...te.map(Q=>Q.value_per_capita)))}function M(E){t(8,H=E.detail.region),t(9,V=E.detail.sortBy),F()}let S,N=[],O=null,K,J,G,A,q="",R,ee=null,U=[],W,j=null,w=0,z=0,y;function ae(E){const te=S.filter(X=>X.type!=="empty").map(X=>X.type),Q=Array.from(new Set(te)),_e=o.reduce((X,ge)=>X+ge.total,0),Le=[{type:null,label:"Total Co-Benefits",icon:null,totalValue:_e.toFixed(2),perCapitaValue:h.toFixed(2),percentValue:"100%"},...Q.map(X=>{const Ce=Ut.find(Ie=>Ie.id===X)?.label??X;let me=Ot(X);const I=o.find(Ie=>Ie.co_benefit_type===X),re=d.find(Ie=>Ie.co_benefit_type===X),Ae=I?.total??0,pe=re?.value_per_capita??0,lt=Ae.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Se=pe.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),at=_e>0?(Ae/_e*100).toFixed(2):0;return console.log("percentage",X,Ae,_e,at),{type:X,label:Ce,icon:me,totalValue:lt,perCapitaValue:Se,percentValue:at}})];setInterval(()=>{t(24,z=w),t(23,w=(w+1)%Le.length);const{type:X,label:ge,icon:Ce,totalValue:me,perCapitaValue:I,percentValue:re}=Le[w];t(22,j=X),t(15,G=ge),t(16,A=me),t(17,q=I),t(18,R=re),t(19,ee=Ce),be(E,X)},5e3);const le=Le[0];t(22,j=le.type),t(15,G=le.label),t(16,A=le.totalValue),t(17,q=le.perCapitaValue),t(18,R=le.percentValue),be(E,le.type),console.log("update display",U)}function be(E,te){if(!O)return;t(12,O.innerHTML="",O);const Q=20,_e=15,Le=Math.floor(E/Q),le=_e*Le,X=o.reduce((I,re)=>I+re.total,0),ge=[];for(const I of o){const re=Math.round(Math.abs(I.total)/X*le),Ae=I.total<0;for(let pe=0;pe<re;pe++)ge.push({type:I.co_benefit_type,negative:Ae})}for(;ge.length<le;)ge.push({type:"empty"});ge.sort((I,re)=>I.type==="empty"?1:re.type==="empty"?-1:I.negative&&!re.negative?1:!I.negative&&re.negative?-1:0),S=ge.map((I,re)=>({x:re%_e,y:Math.floor(re/_e),...I})),N=Array.from(new Set(S.map(I=>I.type).filter(I=>I!=="empty"))),t(20,U=Hl(N));const Ce=te??null,me=wt({width:Q*_e,height:Q*Le,margin:0,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:Ut.map(I=>I.id),range:Al,unknown:"#eee",legend:!1},marks:[el(S.filter(I=>!I.negative),{x:I=>I.x*Q,y:I=>I.y*Q,fill:"type",fillOpacity:I=>Ce&&I.type!==Ce?.15:1}),el(S.filter(I=>I.negative),{x:I=>I.x*Q,y:I=>I.y*Q,stroke:"type",strokeOpacity:I=>Ce&&I.type!==Ce?.15:1,strokeWidth:1,fill:"none"})]});K&&(t(13,K.style.width=`${Q*_e}px`,K),t(13,K.style.height=`${E}px`,K)),t(12,O.innerHTML="",O),O.append(me)}function Te(E){window.open(`${de}/location?location=${E}`,"_blank")}Dl(()=>{Tl(i),p().then(()=>{F();const E=W.getBoundingClientRect().height;be(E),ae(E),Ll(i)})}),El(()=>{clearInterval(y)});function ke(E){st[E?"unshift":"push"](()=>{J=E,t(14,J)})}function Oe(E){st[E?"unshift":"push"](()=>{K=E,t(13,K)})}function Ue(E){st[E?"unshift":"push"](()=>{O=E,t(12,O)})}function Ee(E){st[E?"unshift":"push"](()=>{W=E,t(21,W)})}const ve=E=>Te(E.detail);function Ge(E){st[E?"unshift":"push"](()=>{i=E,t(0,i)})}return a.$$set=E=>{"data"in E&&t(28,l=E.data)},a.$$.update=()=>{a.$$.dirty[0]&268435456},[i,d,k,D,_,C,g,P,H,V,b,v,O,K,J,G,A,q,R,ee,U,W,j,w,z,s,M,Te,l,ke,Oe,Ue,Ee,ve,Ge]}class pa extends yt{constructor(e){super(),Bt(this,e,sa,aa,ft,{data:28},null,[-1,-1])}}export{pa as component};
