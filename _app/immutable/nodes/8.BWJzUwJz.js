import{s as is,d as ls,n as pr,r as cs,o as us,e as it}from"../chunks/scheduler.tir__IPy.js";import{S as fs,i as ds,e as y,s as L,b as X,c as b,d as V,m as H,h as D,f as G,g as A,n as g,j as se,k as c,p as hs,q as Ke,o as vr}from"../chunks/index.bU9Y8Vjw.js";import{e as Xe}from"../chunks/each.-gASlQSi.js";import{n as ps}from"../chunks/transform.Cz5Y6iUM.js";import{a8 as vs,av as Bn,aw as ms,ax as gs,C as tn,a9 as Rr,ay as en,b as ae,az as qn,M as Te,aA as ys,aB as bs,aC as _s,c as Be,a as Ie,d as we,aD as Cs,p as Ge,e as jn,aE as ws,aF as mr,aG as gr,aH as Sr,aI as xs,ak as Nr,Y as xe,ah as sn,m as Fr,ai as ks,aj as Nn,aJ as Ms,g as Or,h as nn,aK as Es,aL as Ls,K as Ds,$ as yr,aM as As,aN as zs,aO as Ur,aP as rn,aQ as qr,f as Ts,aR as Bs,r as jr,aS as Wr,x as Yr,aT as lt,aU as Is,aV as Vs,aW as Ps,aX as Zr,aY as Hs,aZ as Rs,w as Kr,a_ as Xr,a$ as Ss,b0 as Gr,k as ze,l as Ns,n as Fs,b1 as Os,i as rt,b2 as Us,b3 as qs,j as In,s as Rt,q as br,b4 as _r}from"../chunks/index.k7kIJoxZ.js";import{M as js,g as Ws}from"../chunks/map.enz91-zQ.js";import{b as Fn,S as On,a as Cr,M as st,T as Vn,V as Ys,A as ye,c as Zs,C as Ks,d as Qe}from"../chunks/globals.CkVBXOP0.js";import{t as Xs,A as Gs,f as Qr,m as Qs,c as wr,s as Js,g as $s,e as St,h as ta,a as Je,d as Pn,b as xr}from"../chunks/bar.CJQCvPcf.js";const ea=na(ra);function na(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:a,width:s,height:i}=e;if(!((s=Math.floor(s))>=0))throw new RangeError("invalid width");if(!((i=Math.floor(i!==void 0?i:a.length/s))>=0))throw new RangeError("invalid height");if(!s||!i||!n&&!r)return e;const u=n&&t(n),f=r&&t(r),l=a.slice();return u&&f?(be(u,l,a,s,i),be(u,a,l,s,i),be(u,l,a,s,i),_e(f,a,l,s,i),_e(f,l,a,s,i),_e(f,a,l,s,i)):u?(be(u,a,l,s,i),be(u,l,a,s,i),be(u,a,l,s,i)):f&&(_e(f,a,l,s,i),_e(f,l,a,s,i),_e(f,a,l,s,i)),e}}function be(t,e,n,r,a){for(let s=0,i=r*a;s<i;)t(e,n,s,s+=r,1)}function _e(t,e,n,r,a){for(let s=0,i=r*a;s<r;++s)t(e,n,s,s+i,r)}function ra(t){const e=Math.floor(t);if(e===t)return sa(t);const n=t-e,r=2*t+1;return(a,s,i,u,f)=>{if(!((u-=f)>=i))return;let l=e*s[i];const o=f*e,v=o+f;for(let p=i,d=i+o;p<d;p+=f)l+=s[Math.min(u,p)];for(let p=i,d=u;p<=d;p+=f)l+=s[Math.min(u,p+o)],a[p]=(l+n*(s[Math.max(i,p-v)]+s[Math.min(u,p+v)]))/r,l-=s[Math.max(i,p-o)]}}function sa(t){const e=2*t+1;return(n,r,a,s,i)=>{if(!((s-=i)>=a))return;let u=t*r[a];const f=i*t;for(let l=a,o=a+f;l<o;l+=i)u+=r[Math.min(s,l)];for(let l=a,o=s;l<=o;l+=i)u+=r[Math.min(s,l+f)],n[l]=u/e,u-=r[Math.max(a,l-f)]}}function aa(t,e,n){let r;for(;;){const a=vs(t,e,n);if(a===r||a===0||!isFinite(a))return[t,e];a>0?(t=Math.floor(t/a)*a,e=Math.ceil(e/a)*a):a<0&&(t=Math.ceil(t*a)/a,e=Math.floor(e*a)/a),r=a}}function Jr(t,e=Bn){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=Bn);const a=(u,f)=>e(n[u],n[f]);let s,i;return t=Uint32Array.from(n,(u,f)=>f),t.sort(e===Bn?(u,f)=>ms(n[u],n[f]):gs(a)),t.forEach((u,f)=>{const l=a(u,s===void 0?u:s);l>=0?((s===void 0||l>0)&&(s=u,i=f),r[u]=i):r[u]=NaN}),r}var oa=Array.prototype,$r=oa.slice;function ia(t,e){return t-e}function la(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}const Nt=t=>()=>t;function ca(t,e){for(var n=-1,r=e.length,a;++n<r;)if(a=ua(t,e[n]))return a;return 0}function ua(t,e){for(var n=e[0],r=e[1],a=-1,s=0,i=t.length,u=i-1;s<i;u=s++){var f=t[s],l=f[0],o=f[1],v=t[u],p=v[0],d=v[1];if(fa(f,v,e))return 0;o>r!=d>r&&n<(p-l)*(r-o)/(d-o)+l&&(a=-a)}return a}function fa(t,e,n){var r;return da(t,e,n)&&ha(t[r=+(t[0]===e[0])],n[r],e[r])}function da(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function ha(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function pa(){}var wt=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function kr(){var t=1,e=1,n=Xs,r=f;function a(l){var o=n(l);if(Array.isArray(o))o=o.slice().sort(ia);else{const v=tn(l,va);for(o=Rr(...aa(v[0],v[1],o),o);o[o.length-1]>=v[1];)o.pop();for(;o[1]<v[0];)o.shift()}return o.map(v=>s(l,v))}function s(l,o){const v=o==null?NaN:+o;if(isNaN(v))throw new Error(`invalid value: ${o}`);var p=[],d=[];return i(l,v,function(w){r(w,l,v),la(w)>0?p.push([w]):d.push(w)}),d.forEach(function(w){for(var M=0,k=p.length,_;M<k;++M)if(ca((_=p[M])[0],w)!==-1){_.push(w);return}}),{type:"MultiPolygon",value:o,coordinates:p}}function i(l,o,v){var p=new Array,d=new Array,w,M,k,_,h,x;for(w=M=-1,_=re(l[0],o),wt[_<<1].forEach(z);++w<t-1;)k=_,_=re(l[w+1],o),wt[k|_<<1].forEach(z);for(wt[_<<0].forEach(z);++M<e-1;){for(w=-1,_=re(l[M*t+t],o),h=re(l[M*t],o),wt[_<<1|h<<2].forEach(z);++w<t-1;)k=_,_=re(l[M*t+t+w+1],o),x=h,h=re(l[M*t+w+1],o),wt[k|_<<1|h<<2|x<<3].forEach(z);wt[_|h<<3].forEach(z)}for(w=-1,h=l[M*t]>=o,wt[h<<2].forEach(z);++w<t-1;)x=h,h=re(l[M*t+w+1],o),wt[h<<2|x<<3].forEach(z);wt[h<<3].forEach(z);function z(I){var C=[I[0][0]+w,I[0][1]+M],T=[I[1][0]+w,I[1][1]+M],U=u(C),O=u(T),E,R;(E=d[U])?(R=p[O])?(delete d[E.end],delete p[R.start],E===R?(E.ring.push(T),v(E.ring)):p[E.start]=d[R.end]={start:E.start,end:R.end,ring:E.ring.concat(R.ring)}):(delete d[E.end],E.ring.push(T),d[E.end=O]=E):(E=p[O])?(R=d[U])?(delete p[E.start],delete d[R.end],E===R?(E.ring.push(T),v(E.ring)):p[R.start]=d[E.end]={start:R.start,end:E.end,ring:R.ring.concat(E.ring)}):(delete p[E.start],E.ring.unshift(C),p[E.start=U]=E):p[U]=d[O]={start:U,end:O,ring:[C,T]}}}function u(l){return l[0]*2+l[1]*(t+1)*4}function f(l,o,v){l.forEach(function(p){var d=p[0],w=p[1],M=d|0,k=w|0,_=Hn(o[k*t+M]);d>0&&d<t&&M===d&&(p[0]=Mr(d,Hn(o[k*t+M-1]),_,v)),w>0&&w<e&&k===w&&(p[1]=Mr(w,Hn(o[(k-1)*t+M]),_,v))})}return a.contour=s,a.size=function(l){if(!arguments.length)return[t,e];var o=Math.floor(l[0]),v=Math.floor(l[1]);if(!(o>=0&&v>=0))throw new Error("invalid size");return t=o,e=v,a},a.thresholds=function(l){return arguments.length?(n=typeof l=="function"?l:Array.isArray(l)?Nt($r.call(l)):Nt(l),a):n},a.smooth=function(l){return arguments.length?(r=l?f:pa,a):r===f},a}function va(t){return isFinite(t)?t:NaN}function re(t,e){return t==null?!1:+t>=e}function Hn(t){return t==null||isNaN(t=+t)?-1/0:t}function Mr(t,e,n,r){const a=r-e,s=n-e,i=isFinite(a)||isFinite(s)?a/s:Math.sign(a)/Math.sign(s);return isNaN(i)?t:t+i-.5}function ma(t){return t[0]}function ga(t){return t[1]}function ya(){return 1}function ba(){var t=ma,e=ga,n=ya,r=960,a=500,s=20,i=2,u=s*3,f=r+u*2>>i,l=a+u*2>>i,o=Nt(20);function v(h){var x=new Float32Array(f*l),z=Math.pow(2,-i),I=-1;for(const P of h){var C=(t(P,++I,h)+u)*z,T=(e(P,I,h)+u)*z,U=+n(P,I,h);if(U&&C>=0&&C<f&&T>=0&&T<l){var O=Math.floor(C),E=Math.floor(T),R=C-O-.5,S=T-E-.5;x[O+E*f]+=(1-R)*(1-S)*U,x[O+1+E*f]+=R*(1-S)*U,x[O+1+(E+1)*f]+=R*S*U,x[O+(E+1)*f]+=(1-R)*S*U}}return ea({data:x,width:f,height:l},s*z),x}function p(h){var x=v(h),z=o(x),I=Math.pow(2,2*i);return Array.isArray(z)||(z=Rr(Number.MIN_VALUE,en(x)/I,z)),kr().size([f,l]).thresholds(z.map(C=>C*I))(x).map((C,T)=>(C.value=+z[T],d(C)))}p.contours=function(h){var x=v(h),z=kr().size([f,l]),I=Math.pow(2,2*i),C=T=>{T=+T;var U=d(z.contour(x,T*I));return U.value=T,U};return Object.defineProperty(C,"max",{get:()=>en(x)/I}),C};function d(h){return h.coordinates.forEach(w),h}function w(h){h.forEach(M)}function M(h){h.forEach(k)}function k(h){h[0]=h[0]*Math.pow(2,i)-u,h[1]=h[1]*Math.pow(2,i)-u}function _(){return u=s*3,f=r+u*2>>i,l=a+u*2>>i,p}return p.x=function(h){return arguments.length?(t=typeof h=="function"?h:Nt(+h),p):t},p.y=function(h){return arguments.length?(e=typeof h=="function"?h:Nt(+h),p):e},p.weight=function(h){return arguments.length?(n=typeof h=="function"?h:Nt(+h),p):n},p.size=function(h){if(!arguments.length)return[r,a];var x=+h[0],z=+h[1];if(!(x>=0&&z>=0))throw new Error("invalid size");return r=x,a=z,_()},p.cellSize=function(h){if(!arguments.length)return 1<<i;if(!((h=+h)>=1))throw new Error("invalid cell size");return i=Math.floor(Math.log(h)/Math.LN2),_()},p.thresholds=function(h){return arguments.length?(o=typeof h=="function"?h:Array.isArray(h)?Nt($r.call(h)):Nt(h),p):o},p.bandwidth=function(h){if(!arguments.length)return Math.sqrt(s*(s+1));if(!((h=+h)>=0))throw new Error("invalid bandwidth");return s=(Math.sqrt(4*h*h+1)-1)/2,_()},p}const _a={ariaLabel:"cell"};class Ca extends Gs{constructor(e,{x:n,y:r,...a}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},a,_a)}_transform(e,n){e.call(ae,n,{},0,0)}}function $e(t,{x:e,y:n,...r}={}){return[e,n]=qn(e,n),new Ca(t,{...r,x:e,y:n})}const wa={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function xa(t){return t.sort===void 0&&t.reverse===void 0?ws({channel:"-r"},t):t}class ka extends Te{constructor(e,n={}){const{x:r,y:a,r:s,rotate:i,symbol:u=mr,frameAnchor:f}=n,[l,o]=gr(i,0),[v,p]=ys(u),[d,w]=gr(s,v==null?3:4.5);super(e,{x:{value:r,scale:"x",optional:!0},y:{value:a,scale:"y",optional:!0},r:{value:d,scale:"r",filter:bs,optional:!0},rotate:{value:l,optional:!0},symbol:{value:v,scale:"auto",optional:!0}},xa(n),wa),this.r=w,this.rotate=o,this.symbol=p,this.frameAnchor=_s(f);const{channels:M}=this,{symbol:k}=M;if(k){const{fill:_,stroke:h}=M;k.hint={fill:_?_.value===k.value?"color":"currentColor":this.fill??"currentColor",stroke:h?h.value===k.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,r,a,s){const{x:i,y:u}=n,{x:f,y:l,r:o,rotate:v,symbol:p}=r,{r:d,rotate:w,symbol:M}=this,[k,_]=Sr(this,a),h=M===mr,x=o?void 0:d*d*Math.PI;return xs(d)&&(e=[]),Be("svg:g",s).call(Ie,this,a,s).call(ae,this,{x:f&&i,y:l&&u}).call(z=>z.selectAll().data(e).enter().append(h?"circle":"path").call(we,this).call(h?I=>{I.attr("cx",f?C=>f[C]:k).attr("cy",l?C=>l[C]:_).attr("r",o?C=>o[C]:d)}:I=>{I.attr("transform",Cs`translate(${f?C=>f[C]:k},${l?C=>l[C]:_})${v?C=>` rotate(${v[C]})`:w?` rotate(${w})`:""}`).attr("d",o&&p?C=>{const T=Ge();return p[C].draw(T,o[C]*o[C]*Math.PI),T}:o?C=>{const T=Ge();return M.draw(T,o[C]*o[C]*Math.PI),T}:p?C=>{const T=Ge();return p[C].draw(T,x),T}:(()=>{const C=Ge();return M.draw(C,x),C})())}).call(jn,this,r)).node()}}function ts(t,{x:e,y:n,...r}={}){return r.frameAnchor===void 0&&([e,n]=qn(e,n)),new ka(t,{...r,x:e,y:n})}const Ma={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Ea extends Te{constructor(e,n={}){const{x:r,y:a,z:s,curve:i,tension:u}=n;super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y"},z:{value:sn(n),optional:!0}},n,Ma),this.z=s,this.curve=Qs(i,u),Fr(this,n)}filter(e){return e}project(e,n,r){this.curve!==wr&&super.project(e,n,r)}render(e,n,r,a,s){const{x:i,y:u}=r,{curve:f}=this;return Be("svg:g",s).call(Ie,this,a,s).call(ae,this,n).call(l=>l.selectAll().data(ks(e,[i,u],this,r)).enter().append("path").call(we,this).call(Nn,this,r).call(Ms,this,r,s).attr("d",f===wr&&s.projection?La(s.projection,i,u):Js().curve(f).defined(o=>o>=0).x(o=>i[o]).y(o=>u[o]))).node()}}function La(t,e,n){const r=Or(t);return e=nn(e),n=nn(n),a=>{let s=[];const i=[s];for(const u of a)u===-1?(s=[],i.push(s)):s.push([e[u],n[u]]);return r({type:"MultiLineString",coordinates:i})}}function Da(t,{x:e=Nr,y:n=xe,...r}={}){return new Ea(t,Qr({...r,x:e,y:n}))}function Aa(t,e={}){let{y:n,y1:r,y2:a}=e;n===void 0&&r===void 0&&a===void 0&&(e={...e,y:n=xe});const s={};return n!=null&&(s.y=t),r!=null&&(s.y1=t),a!=null&&(s.y2=t),es(s,e)}function es(t={},e={}){const n=sn(e),r=Object.entries(t).map(([a,s])=>{const i=Es(a,e);if(i==null)throw new Error(`missing channel: ${a}`);const[u,f]=Ls(i);return{key:a,input:i,output:u,setOutput:f,map:za(s)}});return{...Ds(e,(a,s)=>{const i=yr(a,n),u=r.map(({input:l})=>yr(a,l)),f=r.map(({setOutput:l})=>l(new Array(a.length)));for(const l of s)for(const o of i?As(l,v=>i[v]).values():[l])r.forEach(({map:v},p)=>v.mapIndex(o,u[p],f[p]));return{data:a,facets:s}}),...Object.fromEntries(r.map(({key:a,output:s})=>[a,s]))}}function za(t){if(t==null)throw new Error("missing map");if(typeof t.mapIndex=="function")return t;if(typeof t.map=="function"&&zs(t))return Ta(t);if(typeof t=="function")return Rn(Ur(t));switch(`${t}`.toLowerCase()){case"cumsum":return Ia;case"rank":return Rn((e,n)=>Jr(e,r=>n[r]));case"quantile":return Rn((e,n)=>Ba(e,r=>n[r]))}throw new Error(`invalid map: ${t}`)}function Ta(t){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:t.map.bind(t)}}function Ba(t,e){const n=$s(t,e)-1;return Jr(t,e).map(r=>r/n)}function Rn(t){return{mapIndex(e,n,r){const a=t(e,n);if(a.length!==e.length)throw new Error("map function returned a mismatched length");for(let s=0,i=e.length;s<i;++s)r[e[s]]=a[s]}}}const Ia={mapIndex(t,e,n){let r=0;for(const a of t)n[a]=r+=e[a]}},Va={ariaLabel:"tick",fill:null,stroke:"currentColor"};class ns extends Te{constructor(e,n,r){super(e,n,r,Va),Fr(this,r)}render(e,n,r,a,s){return Be("svg:g",s).call(Ie,this,a,s).call(this._transform,this,n).call(i=>i.selectAll().data(e).enter().append("line").call(we,this).attr("x1",this._x1(n,r,a)).attr("x2",this._x2(n,r,a)).attr("y1",this._y1(n,r,a)).attr("y2",this._y2(n,r,a)).call(jn,this,r).call(Ts,this,r,s)).node()}}class Pa extends ns{constructor(e,n={}){const{x:r,y:a,inset:s=0,insetTop:i=s,insetBottom:u=s}=n;super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y",type:"band",optional:!0}},n),this.insetTop=rn(i),this.insetBottom=rn(u)}_transform(e,n,{x:r}){e.call(ae,n,{x:r},qr,0)}_x1(e,{x:n}){return r=>n[r]}_x2(e,{x:n}){return r=>n[r]}_y1({y:e},{y:n},{marginTop:r}){const{insetTop:a}=this;return n&&e?s=>n[s]+a:r+a}_y2({y:e},{y:n},{height:r,marginBottom:a}){const{insetBottom:s}=this;return n&&e?i=>n[i]+e.bandwidth()-s:r-a-s}}class Ha extends ns{constructor(e,n={}){const{x:r,y:a,inset:s=0,insetRight:i=s,insetLeft:u=s}=n;super(e,{y:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n),this.insetRight=rn(i),this.insetLeft=rn(u)}_transform(e,n,{y:r}){e.call(ae,n,{y:r},0,qr)}_x1({x:e},{x:n},{marginLeft:r}){const{insetLeft:a}=this;return n&&e?s=>n[s]+a:r+a}_x2({x:e},{x:n},{width:r,marginRight:a}){const{insetRight:s}=this;return n&&e?i=>n[i]+e.bandwidth()-s:r-a-s}_y1(e,{y:n}){return r=>n[r]}_y2(e,{y:n}){return r=>n[r]}}function Sn(t,{x:e=xe,...n}={}){return new Pa(t,{...n,x:e})}function Un(t,{y:e=xe,...n}={}){return new Ha(t,{...n,y:e})}function Ra(t,{y:e=xe,x:n=null,r,fill:a="#ccc",fillOpacity:s,stroke:i="currentColor",strokeOpacity:u,strokeWidth:f=2,sort:l,...o}={}){const v=n!=null?lt:Is;return Bs(jr(t,v({y1:rs,y2:ss},{x:n,y:e,stroke:i,strokeOpacity:u,...o})),St(t,v({y1:"p25",y2:"p75"},{x:n,y:e,fill:a,fillOpacity:s,...o})),Un(t,v({y:"p50"},{x:n,y:e,stroke:i,strokeOpacity:u,strokeWidth:f,sort:l,...o})),ts(t,es({y:Sa},{x:n,y:e,z:n,r,stroke:i,strokeOpacity:u,...o})))}function Sa(t){const e=rs(t),n=ss(t);return t.map(r=>r<e||r>n?r:NaN)}function rs(t){const e=as(t)*2.5-os(t)*1.5;return Wr(t,n=>n>=e?n:NaN)}function ss(t){const e=os(t)*2.5-as(t)*1.5;return en(t,n=>n<=e?n:NaN)}function as(t){return Yr(t,.25)}function os(t){return Yr(t,.75)}const Na={ariaLabel:"density",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Fa extends Te{constructor(e,{x:n,y:r,z:a,weight:s,fill:i,stroke:u,...f}={}){const l=Er(i)&&(i="currentColor",!0),o=Er(u)&&(u="currentColor",!0);super(e,{x:{value:n,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},z:{value:sn({z:a,fill:i,stroke:u}),optional:!0},weight:{value:s,optional:!0}},qa({...f,fill:i,stroke:u},l,o),Na),l&&(this.fill=void 0),o&&(this.stroke=void 0),this.z=a}filter(e){return e}render(e,n,r,a,s){const{contours:i}=r,u=Or();return Be("svg:g",s).call(Ie,this,a,s).call(ae,this,{}).call(f=>f.selectAll().data(e).enter().append("path").call(we,this).call(jn,this,r).attr("d",l=>u(i[l]))).node()}}function Oa(t,{x:e,y:n,...r}={}){return[e,n]=qn(e,n),new Fa(t,{...r,x:e,y:n})}const Ua=new Set(["x","y","z","weight"]);function qa(t,e,n){let{bandwidth:a,thresholds:s}=t;return a=a===void 0?20:+a,s=s===void 0?20:typeof s?.[Symbol.iterator]=="function"?nn(s):+s,Vs(t,function(i,u,f,l,o,v){const p=f.weight?nn(f.weight.value):null,d=f.z?.value,{z:w}=this,[M,k]=Sr(this,o),{width:_,height:h}=o,{x,y:z}=Ps(f,l,v),I=Object.fromEntries(Object.entries(f).filter(([P])=>!Ua.has(P)).map(([P,Z])=>[P,{...Z,value:[]}])),C=e&&[],T=n&&[],U=ba().x(x?P=>x[P]:M).y(z?P=>z[P]:k).weight(p?P=>p[P]:1).size([_,h]).bandwidth(a),O=[];for(const P of u){const Z=[];O.push(Z);for(const j of d?Zr(P,d,w):[P]){const tt=U.contours(j);Z.push([j,tt])}}let E=s;if(!(E instanceof Hs)){let P=0;for(const Z of O)for(const[,j]of Z){const tt=j.max;tt>P&&(P=tt)}E=Float64Array.from({length:s-1},(Z,j)=>P*100*(j+1)/s)}const R=[],S=[];for(const P of O){const Z=[];R.push(Z);for(const[j,tt]of P)for(const ct of E){Z.push(S.length),S.push(tt(ct/100)),C&&C.push(ct),T&&T.push(ct);for(const Y in I)I[Y].value.push(f[Y].value[j[0]])}}return C&&C.push(0),T&&T.push(0),{data:i,facets:R,channels:{...I,...C&&{fill:{value:C,scale:"color"}},...T&&{stroke:{value:T,scale:"color"}},contours:{value:S}}}})}function Er(t){return/^density$/i.test(t)}function ja(t,e,n){var r=1e-8,a=e-1,s=n-1,i=0,u,f,l,o,v,p,d,w,M,k,_;if(t<=0)return 0;if(t>=1)return 1;for(e>=1&&n>=1?(l=t<.5?t:1-t,o=Math.sqrt(-2*Math.log(l)),d=(2.30753+o*.27061)/(1+o*(.99229+o*.04481))-o,t<.5&&(d=-d),w=(d*d-3)/6,M=2/(1/(2*e-1)+1/(2*n-1)),k=d*Math.sqrt(w+M)/M-(1/(2*n-1)-1/(2*e-1))*(w+5/6-2/(3*M)),d=e/(e+n*Math.exp(2*k))):(u=Math.log(e/(e+n)),f=Math.log(n/(e+n)),o=Math.exp(e*u)/e,v=Math.exp(n*f)/n,k=o+v,t<o/k?d=Math.pow(e*k*t,1/e):d=1-Math.pow(n*k*(1-t),1/n)),_=-Ce(e)-Ce(n)+Ce(e+n);i<10;i++){if(d===0||d===1)return d;if(p=Wa(d,e,n)-t,o=Math.exp(a*Math.log(d)+s*Math.log(1-d)+_),v=p/o,d-=o=v/(1-.5*Math.min(1,v*(a/d-s/(1-d)))),d<=0&&(d=.5*(d+o)),d>=1&&(d=.5*(d+o+1)),Math.abs(o)<r*d&&i>0)break}return d}function Wa(t,e,n){var r=t===0||t===1?0:Math.exp(Ce(e+n)-Ce(e)-Ce(n)+e*Math.log(t)+n*Math.log(1-t));return t<0||t>1?!1:t<(e+1)/(e+n+2)?r*Lr(t,e,n)/e:1-r*Lr(1-t,n,e)/n}function Lr(t,e,n){var r=1e-30,a=1,s=e+n,i=e+1,u=e-1,f=1,l=1-s*t/i,o,v,p,d;for(Math.abs(l)<r&&(l=r),l=1/l,d=l;a<=100&&(o=2*a,v=a*(n-a)*t/((u+o)*(e+o)),l=1+v*l,Math.abs(l)<r&&(l=r),f=1+v/f,Math.abs(f)<r&&(f=r),l=1/l,d*=l*f,v=-(e+a)*(s+a)*t/((e+o)*(i+o)),l=1+v*l,Math.abs(l)<r&&(l=r),f=1+v/f,Math.abs(f)<r&&(f=r),l=1/l,p=l*f,d*=p,!(Math.abs(p-1)<3e-7));a++);return d}function Ce(t){var e=0,n=[76.18009172947146,-86.5053203294167,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,a,s,i;for(i=(s=a=t)+5.5,i-=(a+.5)*Math.log(i);e<6;e++)r+=n[e]/++s;return Math.log(2.506628274631*r/a)-i}function Ya(t,e){var n=ja(2*Math.min(t,1-t),.5*e,.5);return n=Math.sqrt(e*(1-n)/n),t>.5?n:-n}const Za={ariaLabel:"linear-regression",fill:"currentColor",fillOpacity:.1,stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Ka extends Te{constructor(e,n={}){const{x:r,y:a,z:s,ci:i=.95,precision:u=4}=n;if(super(e,{x:{value:r,scale:"x"},y:{value:a,scale:"y"},z:{value:sn(n),optional:!0}},n,Za),this.z=s,this.ci=+i,this.precision=+u,!(0<=this.ci&&this.ci<1))throw new Error(`invalid ci; not in [0, 1): ${i}`);if(!(this.precision>0))throw new Error(`invalid precision: ${u}`)}render(e,n,r,a,s){const{x:i,y:u,z:f}=r,{ci:l}=this;return Be("svg:g",s).call(Ie,this,a,s).call(ae,this,n).call(o=>o.selectAll().data(f?Zr(e,f,this.z):[e]).enter().call(v=>v.append("path").attr("fill","none").call(we,this).call(Nn,this,{...r,fill:null,fillOpacity:null}).attr("d",p=>this._renderLine(p,i,u)).call(l&&!Ss(this.fill)?p=>p.select(Xa).attr("stroke","none").call(we,this).call(Nn,this,{...r,stroke:null,strokeOpacity:null,strokeWidth:null}).attr("d",d=>this._renderBand(d,i,u)):()=>{}))).node()}}function Xa(){return this.parentNode.insertBefore(this.ownerDocument.createElementNS(ps.svg,"path"),this)}class Ga extends Ka{constructor(e,n){super(e,n)}_renderBand(e,n,r){const{ci:a,precision:s}=this,[i,u]=tn(e,o=>n[o]),f=Dr(e,n,r),l=Ja(e,n,r,(1-a)/2,f);return ta().x(o=>o).y0(o=>l(o,-1)).y1(o=>l(o,1))(Kr(i,u-s/2,s).concat(u))}_renderLine(e,n,r){const[a,s]=tn(e,u=>n[u]),i=Dr(e,n,r);return`M${a},${i(a)}L${s},${i(s)}`}}function Qa(t,{x:e=Nr,y:n=xe,stroke:r,fill:a=Rs(r)?"currentColor":r,...s}={}){return new Ga(t,Qr({...s,x:e,y:n,fill:a,stroke:r}))}function Dr(t,e,n){let r=0,a=0,s=0,i=0;for(const o of t){const v=e[o],p=n[o];r+=v,a+=p,s+=v*p,i+=v*v}const u=t.length,f=(u*s-r*a)/(u*i-r*r),l=(a-f*r)/u;return o=>f*o+l}function Ja(t,e,n,r,a){const s=Xr(t,o=>e[o])/t.length;let i=0,u=0;for(const o of t)i+=(e[o]-s)**2,u+=(n[o]-a(e[o]))**2;const f=Math.sqrt(u/(t.length-2)),l=Ya(r,t.length-2);return(o,v)=>{const p=a(o),d=f*Math.sqrt(1/t.length+(o-s)**2/i);return p+v*l*d}}function Ar(t,e){return arguments.length===1&&({basis:t,...e}=t),Aa($a(t),e)}function $a(t){if(t===void 0)return zr;if(typeof t=="function")return an(Ur(t));if(/^p\d{2}$/i.test(t))return ke(Os(t));switch(`${t}`.toLowerCase()){case"deviation":return no;case"first":return zr;case"last":return eo;case"max":return ro;case"mean":return so;case"median":return ao;case"min":return oo;case"sum":return io;case"extent":return to}throw new Error(`invalid basis: ${t}`)}function an(t){return{mapIndex(e,n,r){const a=+t(e,n);for(const s of e)r[s]=n[s]===null?NaN:n[s]/a}}}function ke(t){return an((e,n)=>t(e,r=>n[r]))}const to={mapIndex(t,e,n){const[r,a]=tn(t,i=>e[i]),s=a-r;for(const i of t)n[i]=e[i]===null?NaN:(e[i]-r)/s}},zr=an((t,e)=>{for(let n=0;n<t.length;++n){const r=e[t[n]];if(Gr(r))return r}}),eo=an((t,e)=>{for(let n=t.length-1;n>=0;--n){const r=e[t[n]];if(Gr(r))return r}}),no={mapIndex(t,e,n){const r=ze(t,s=>e[s]),a=Ns(t,s=>e[s]);for(const s of t)n[s]=e[s]===null?NaN:a?(e[s]-r)/a:0}},ro=ke(en),so=ke(ze),ao=ke(Fs),oo=ke(Wr),io=ke(Xr),lo=""+new URL("../assets/Truncatedaxis.B0X-Oi6z.png",import.meta.url).href,co=""+new URL("../assets/(Can) contain overlapping visual marks.COyQpe2-.png",import.meta.url).href,uo=""+new URL("../assets/Mouse Over.CFjZId9Z.png",import.meta.url).href,fo=""+new URL("../assets/Rounding.B9aYSzLs.png",import.meta.url).href,Tr=""+new URL("../assets/Aggregated data.DKno-3YF.png",import.meta.url).href,ho=""+new URL("../assets/Zoom.98CF1xXK.png",import.meta.url).href,po=""+new URL("../assets/Data normalized.CL6tJ0W5.png",import.meta.url).href,vo=""+new URL("../assets/Contains Multiple Data Sources Full.DD8dTume.png",import.meta.url).href,Br=""+new URL("../assets/Contains modeled data.DkmqjOEl.png",import.meta.url).href,mo=""+new URL("../assets/Binning applied.B1wzFhkQ.png",import.meta.url).href;function Ir(t,e,n){const r=t.slice();return r[48]=e[n],r[49]=e,r[50]=n,r}function Vr(t,e,n){const r=t.slice();return r[51]=e[n],r[52]=e,r[53]=n,r}function Pr(t){let e,n,r,a,s,i,u,f,l,o,v,p=`<div class="badge-container"><img class="badge" src="${fo}"/></div>`,d=t[51],w;const M=()=>t[24](v,d),k=()=>t[24](null,d);return{c(){e=y("div"),n=y("h3"),r=X("Pathway: "),a=X(t[51]),s=L(),i=y("p"),u=X("Please refer to CCC website on definitions of "),f=X(t[51]),l=X("."),o=L(),v=y("div"),v.innerHTML=p,w=L(),this.h()},l(_){e=b(_,"DIV",{class:!0});var h=V(e);n=b(h,"H3",{class:!0});var x=V(n);r=G(x,"Pathway: "),a=G(x,t[51]),x.forEach(A),s=D(h),i=b(h,"P",{class:!0});var z=V(i);u=G(z,"Please refer to CCC website on definitions of "),f=G(z,t[51]),l=G(z,"."),z.forEach(A),o=D(h),v=b(h,"DIV",{class:!0,"data-svelte-h":!0}),H(v)!=="svelte-mop3d7"&&(v.innerHTML=p),w=D(h),h.forEach(A),this.h()},h(){g(n,"class","component-title"),g(i,"class","description"),g(v,"class","plot"),g(e,"class","component")},m(_,h){se(_,e,h),c(e,n),c(n,r),c(n,a),c(e,s),c(e,i),c(i,u),c(i,f),c(i,l),c(e,o),c(e,v),M(),c(e,w)},p(_,h){t=_,d!==t[51]&&(k(),d=t[51],M())},d(_){_&&A(e),k()}}}function go(t){let e,n,r="Data Zones Distribution (vs. UK average)",a,s,i="Histogram shows the number of data zones distributed across different household social economic factors.",u,f,l=`<div class="badge-container"><img class="badge" src="${po}"/> <img class="badge" src="${Br}"/> <img class="badge" src="${mo}"/></div>`,o=t[48],v,p,d,w,M,k,_,h,x,z="Density plot refers to UK distribution while the scattered points refer to data zones in the local authority.",I,C,T="",U,O,E,R=`<div class="badge-container"><img class="badge" src="${co}"/> <img class="badge" src="${vo}"/> <img class="badge" src="${Br}"/></div>`;const S=()=>t[30](f,o),P=()=>t[30](null,o),Z=()=>t[31](C,o),j=()=>t[31](null,o),tt=()=>t[32](E,o),ct=()=>t[32](null,o);return{c(){e=y("div"),n=y("h3"),n.textContent=r,a=L(),s=y("p"),s.textContent=i,u=L(),f=y("div"),f.innerHTML=l,v=L(),p=y("div"),d=y("div"),w=y("h3"),M=X("Co-benefits Recieved by Data Zones across "),k=X(t[48]),_=X(" Values"),h=L(),x=y("p"),x.textContent=z,I=L(),C=y("div"),C.innerHTML=T,U=L(),O=y("div"),E=y("div"),E.innerHTML=R,this.h()},l(Y){e=b(Y,"DIV",{class:!0});var W=V(e);n=b(W,"H3",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-1d86f13"&&(n.textContent=r),a=D(W),s=b(W,"P",{class:!0,"data-svelte-h":!0}),H(s)!=="svelte-vl6og1"&&(s.textContent=i),u=D(W),f=b(W,"DIV",{class:!0,"data-svelte-h":!0}),H(f)!=="svelte-1obds0n"&&(f.innerHTML=l),W.forEach(A),v=D(Y),p=b(Y,"DIV",{class:!0});var dt=V(p);d=b(dt,"DIV",{});var $=V(d);w=b($,"H3",{class:!0});var gt=V(w);M=G(gt,"Co-benefits Recieved by Data Zones across "),k=G(gt,t[48]),_=G(gt," Values"),gt.forEach(A),h=D($),x=b($,"P",{class:!0,"data-svelte-h":!0}),H(x)!=="svelte-mjnso4"&&(x.textContent=z),I=D($),C=b($,"DIV",{class:!0,"data-svelte-h":!0}),H(C)!=="svelte-1kzougf"&&(C.innerHTML=T),$.forEach(A),U=D(dt),O=b(dt,"DIV",{});var kt=V(O);E=b(kt,"DIV",{class:!0,"data-svelte-h":!0}),H(E)!=="svelte-1piy8ha"&&(E.innerHTML=R),kt.forEach(A),dt.forEach(A),this.h()},h(){g(n,"class","component-title"),g(s,"class","description short"),g(f,"class","plot"),g(e,"class","component"),g(w,"class","component-title"),g(x,"class","description short"),g(C,"class","plot"),g(E,"class","plot"),g(p,"class","component")},m(Y,W){se(Y,e,W),c(e,n),c(e,a),c(e,s),c(e,u),c(e,f),S(),se(Y,v,W),se(Y,p,W),c(p,d),c(d,w),c(w,M),c(w,k),c(w,_),c(d,h),c(d,x),c(d,I),c(d,C),Z(),c(p,U),c(p,O),c(O,E),tt()},p(Y,W){t=Y,o!==t[48]&&(P(),o=t[48],S()),o!==t[48]&&(j(),o=t[48],Z()),o!==t[48]&&(ct(),o=t[48],tt())},d(Y){Y&&(A(e),A(v),A(p)),P(),j(),ct()}}}function yo(t){let e,n,r="",a=t[48];const s=()=>t[29](n,a),i=()=>t[29](null,a);return{c(){e=y("div"),n=y("div"),n.innerHTML=r,this.h()},l(u){e=b(u,"DIV",{class:!0});var f=V(e);n=b(f,"DIV",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-1shkadq"&&(n.innerHTML=r),f.forEach(A),this.h()},h(){g(n,"class","plot"),g(e,"class","component")},m(u,f){se(u,e,f),c(e,n),s()},p(u,f){t=u,a!==t[48]&&(i(),a=t[48],s())},d(u){u&&A(e),i()}}}function Hr(t){let e,n,r,a,s,i;function u(o,v){return o[11]?yo:go}let f=u(t),l=f(t);return{c(){e=y("div"),n=y("h2"),r=X(t[48]),a=L(),s=y("div"),l.c(),i=L(),this.h()},l(o){e=b(o,"DIV",{});var v=V(e);n=b(v,"H2",{});var p=V(n);r=G(p,t[48]),p.forEach(A),a=D(v),s=b(v,"DIV",{class:!0});var d=V(s);l.l(d),d.forEach(A),i=D(v),v.forEach(A),this.h()},h(){g(s,"class","row")},m(o,v){se(o,e,v),c(e,n),c(n,r),c(e,a),c(e,s),l.m(s,null),c(e,i)},p(o,v){f===(f=u(o))&&l?l.p(o,v):(l.d(1),l=f(o),l&&(l.c(),l.m(s,null)))},d(o){o&&A(e),l.d()}}}function bo(t){let e,n,r,a="Data Report",s,i,u=t[15][t[14]]+"",f,l,o,v="Explore how this local authority will benefit from achieving Net Zero and general factors of their households.",p,d,w,M='<p class="section-subtitle">Overview</p> <h2 class="section-title">How much co-benefit values would this area recieve?</h2> <p class="description">We calculate and model 11 types of co-benefits across five different pathyways suggested by Climate Change Committee in the Sixth Carbon Budget from 2025-2050 on the level of data zones across UK.</p>',k,_,h,x,z="Total Co-benefits Values Across Five Pathways (vs. UK Average)",I,C,T,U=t[15][t[14]]+"",O,E,R,S,P,Z,j,tt="Barchart",ct,Y,W,dt,$,gt="Boxplot",kt,Me,yt,Ee,bt,Ve="Distribution",Le,ht,Pe=`<div class="badge-container"><img class="badge" src="${uo}"/> <img class="badge" src="${Tr}"/></div>`,He,De,m,F,Ft="11 Types of Co-Benefits Values (vs. UK Average)",Ot,q,Ae,Re=t[15][t[14]]+"",at,ot,oe,pt,on=`<div class="badge-container"><img class="badge" src="${Tr}"/></div>`,Se,ut,Ut,Wn=t[15][t[14]]+"",ln,cn,un,qt,Yn="Scroll for zooming in and out.",fn,_t,Zn=`<div class="badge-container"><img class="badge" src="${ho}"/></div>`,dn,Mt,jt,Kn='<p class="section-subtitle">Breakdown</p> <h2 class="section-title">How would the co-benefit results vary if we take different pathways?</h2> <p class="description">We break down the modeled co-benefit values in different pathways towards achieving Net Zero. All Results are compared with the average value across all local authorities in UK.</p>',hn,Ct,vt,Wt,Xn="Five Pathways and their 11 Co-benefits",pn,Yt,Gn="Scroll for zooming in and out.",vn,ie,mn,gn,ft,Zt,Qn='<p class="section-subtitle">Temporal Trends</p> <h2 class="section-title">How co-benefits change over time?</h2> <p class="description">Detailed breakdown of temporal trends for total co-benefits, types of co-benefits, and five pathways.</p>',yn,Et,Kt,Jn="Total Co-benefits Distribution from 2025-2050 (vs. UK Average)",bn,le,Lt,$n="",_n,Dt,Xt,tr="11 Types of Co-benefits Distribution Following Balance Pathway from 2025-2050",Cn,ce,ue,At,er="",wn,zt,Gt,nr="Total Co-benefits Distribution Across Five Scenarios from 2025-2050",xn,fe,Tt,rr=`<div class="badge-container"><img class="badge" src="${lo}"/></div>`,kn,Bt,et,Qt,sr="Households",Mn,Jt,ar="Social Economic Factors of Households",En,$t,or="We describe the distribution of household economic factors aggregated on the data zone level and the different level of co-benefits recieved by those data zones.",Ln,te,Dn,ee,ir="Aggregate Plots",An,It,zn,lr,de=Xe(Fn),Q=[];for(let N=0;N<de.length;N+=1)Q[N]=Pr(Vr(t,de,N));let he=Xe(On),J=[];for(let N=0;N<he.length;N+=1)J[N]=Hr(Ir(t,he,N));return{c(){e=y("div"),n=y("div"),r=y("p"),r.textContent=a,s=L(),i=y("h1"),f=X(u),l=L(),o=y("p"),o.textContent=v,p=L(),d=y("div"),w=y("div"),w.innerHTML=M,k=L(),_=y("div"),h=y("div"),x=y("h3"),x.textContent=z,I=L(),C=y("p"),T=X("Aggregated values from 2025-2050 in "),O=X(U),E=X(" verus average value of benefits recieved across all local authorities in UK."),R=L(),S=y("div"),P=y("input"),Z=L(),j=y("label"),j.textContent=tt,ct=y("br"),Y=L(),W=y("input"),dt=L(),$=y("label"),$.textContent=gt,kt=y("br"),Me=L(),yt=y("input"),Ee=L(),bt=y("label"),bt.textContent=Ve,Le=L(),ht=y("div"),ht.innerHTML=Pe,De=L(),m=y("div"),F=y("h3"),F.textContent=Ft,Ot=L(),q=y("p"),Ae=X("Co-benefits values in "),at=X(Re),ot=X(" verus average value across all local authorities in UK."),oe=L(),pt=y("div"),pt.innerHTML=on,Se=L(),ut=y("div"),Ut=y("h3"),ln=X(Wn),cn=X(" on UK Map"),un=L(),qt=y("p"),qt.textContent=Yn,fn=L(),_t=y("div"),_t.innerHTML=Zn,dn=L(),Mt=y("div"),jt=y("div"),jt.innerHTML=Kn,hn=L(),Ct=y("div"),vt=y("div"),Wt=y("h3"),Wt.textContent=Xn,pn=L(),Yt=y("p"),Yt.textContent=Gn,vn=L(),ie=y("div"),mn=L();for(let N=0;N<Q.length;N+=1)Q[N].c();gn=L(),ft=y("div"),Zt=y("div"),Zt.innerHTML=Qn,yn=L(),Et=y("div"),Kt=y("h3"),Kt.textContent=Jn,bn=L(),le=y("div"),Lt=y("div"),Lt.innerHTML=$n,_n=L(),Dt=y("div"),Xt=y("h3"),Xt.textContent=tr,Cn=L(),ce=y("div"),ue=y("div"),At=y("div"),At.innerHTML=er,wn=L(),zt=y("div"),Gt=y("h3"),Gt.textContent=nr,xn=L(),fe=y("div"),Tt=y("div"),Tt.innerHTML=rr,kn=L(),Bt=y("div"),et=y("div"),Qt=y("p"),Qt.textContent=sr,Mn=L(),Jt=y("h2"),Jt.textContent=ar,En=L(),$t=y("p"),$t.textContent=or,Ln=L(),te=y("input"),Dn=L(),ee=y("label"),ee.textContent=ir,An=L(),It=y("div");for(let N=0;N<J.length;N+=1)J[N].c();this.h()},l(N){e=b(N,"DIV",{class:!0});var K=V(e);n=b(K,"DIV",{class:!0});var B=V(n);r=b(B,"P",{class:!0,"data-svelte-h":!0}),H(r)!=="svelte-1gxb8h1"&&(r.textContent=a),s=D(B),i=b(B,"H1",{class:!0});var Vt=V(i);f=G(Vt,u),Vt.forEach(A),l=D(B),o=b(B,"P",{class:!0,"data-svelte-h":!0}),H(o)!=="svelte-5qj0r2"&&(o.textContent=v),B.forEach(A),p=D(K),d=b(K,"DIV",{class:!0});var Ne=V(d);w=b(Ne,"DIV",{class:!0,"data-svelte-h":!0}),H(w)!=="svelte-42ok6n"&&(w.innerHTML=M),k=D(Ne),_=b(Ne,"DIV",{id:!0,class:!0});var pe=V(_);h=b(pe,"DIV",{class:!0});var Pt=V(h);x=b(Pt,"H3",{class:!0,"data-svelte-h":!0}),H(x)!=="svelte-ov02fv"&&(x.textContent=z),I=D(Pt),C=b(Pt,"P",{class:!0});var Fe=V(C);T=G(Fe,"Aggregated values from 2025-2050 in "),O=G(Fe,U),E=G(Fe," verus average value of benefits recieved across all local authorities in UK."),Fe.forEach(A),R=D(Pt),S=b(Pt,"DIV",{class:!0});var nt=V(S);P=b(nt,"INPUT",{type:!0,name:!0}),Z=D(nt),j=b(nt,"LABEL",{for:!0,"data-svelte-h":!0}),H(j)!=="svelte-1hwbt9c"&&(j.textContent=tt),ct=b(nt,"BR",{}),Y=D(nt),W=b(nt,"INPUT",{type:!0,name:!0}),dt=D(nt),$=b(nt,"LABEL",{for:!0,"data-svelte-h":!0}),H($)!=="svelte-1bcp6t5"&&($.textContent=gt),kt=b(nt,"BR",{}),Me=D(nt),yt=b(nt,"INPUT",{type:!0,name:!0}),Ee=D(nt),bt=b(nt,"LABEL",{for:!0,"data-svelte-h":!0}),H(bt)!=="svelte-27dm33"&&(bt.textContent=Ve),nt.forEach(A),Le=D(Pt),ht=b(Pt,"DIV",{class:!0,"data-svelte-h":!0}),H(ht)!=="svelte-188r0xz"&&(ht.innerHTML=Pe),Pt.forEach(A),De=D(pe),m=b(pe,"DIV",{class:!0});var ve=V(m);F=b(ve,"H3",{class:!0,"data-svelte-h":!0}),H(F)!=="svelte-1o9zf4n"&&(F.textContent=Ft),Ot=D(ve),q=b(ve,"P",{class:!0});var Oe=V(q);Ae=G(Oe,"Co-benefits values in "),at=G(Oe,Re),ot=G(Oe," verus average value across all local authorities in UK."),Oe.forEach(A),oe=D(ve),pt=b(ve,"DIV",{class:!0,"data-svelte-h":!0}),H(pt)!=="svelte-1rwx3ei"&&(pt.innerHTML=on),ve.forEach(A),Se=D(pe),ut=b(pe,"DIV",{class:!0});var me=V(ut);Ut=b(me,"H3",{class:!0});var Tn=V(Ut);ln=G(Tn,Wn),cn=G(Tn," on UK Map"),Tn.forEach(A),un=D(me),qt=b(me,"P",{class:!0,"data-svelte-h":!0}),H(qt)!=="svelte-1ask2se"&&(qt.textContent=Yn),fn=D(me),_t=b(me,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),H(_t)!=="svelte-uun6i9"&&(_t.innerHTML=Zn),me.forEach(A),pe.forEach(A),Ne.forEach(A),dn=D(K),Mt=b(K,"DIV",{class:!0});var Ue=V(Mt);jt=b(Ue,"DIV",{class:!0,"data-svelte-h":!0}),H(jt)!=="svelte-kw1tcg"&&(jt.innerHTML=Kn),hn=D(Ue),Ct=b(Ue,"DIV",{class:!0});var qe=V(Ct);vt=b(qe,"DIV",{class:!0});var ge=V(vt);Wt=b(ge,"H3",{class:!0,"data-svelte-h":!0}),H(Wt)!=="svelte-dq9uga"&&(Wt.textContent=Xn),pn=D(ge),Yt=b(ge,"P",{class:!0,"data-svelte-h":!0}),H(Yt)!=="svelte-1ask2se"&&(Yt.textContent=Gn),vn=D(ge),ie=b(ge,"DIV",{class:!0}),V(ie).forEach(A),ge.forEach(A),mn=D(qe);for(let ne=0;ne<Q.length;ne+=1)Q[ne].l(qe);qe.forEach(A),Ue.forEach(A),gn=D(K),ft=b(K,"DIV",{class:!0});var Ht=V(ft);Zt=b(Ht,"DIV",{class:!0,"data-svelte-h":!0}),H(Zt)!=="svelte-1ttf9zc"&&(Zt.innerHTML=Qn),yn=D(Ht),Et=b(Ht,"DIV",{class:!0});var je=V(Et);Kt=b(je,"H3",{class:!0,"data-svelte-h":!0}),H(Kt)!=="svelte-td9req"&&(Kt.textContent=Jn),bn=D(je),le=b(je,"DIV",{class:!0});var cr=V(le);Lt=b(cr,"DIV",{class:!0,"data-svelte-h":!0}),H(Lt)!=="svelte-1qyf5p7"&&(Lt.innerHTML=$n),cr.forEach(A),je.forEach(A),_n=D(Ht),Dt=b(Ht,"DIV",{class:!0});var We=V(Dt);Xt=b(We,"H3",{class:!0,"data-svelte-h":!0}),H(Xt)!=="svelte-i61rsm"&&(Xt.textContent=tr),Cn=D(We),ce=b(We,"DIV",{class:!0});var ur=V(ce);ue=b(ur,"DIV",{class:!0});var fr=V(ue);At=b(fr,"DIV",{class:!0,"data-svelte-h":!0}),H(At)!=="svelte-mdtmv3"&&(At.innerHTML=er),fr.forEach(A),ur.forEach(A),We.forEach(A),wn=D(Ht),zt=b(Ht,"DIV",{class:!0});var Ye=V(zt);Gt=b(Ye,"H3",{class:!0,"data-svelte-h":!0}),H(Gt)!=="svelte-z821kd"&&(Gt.textContent=nr),xn=D(Ye),fe=b(Ye,"DIV",{class:!0});var dr=V(fe);Tt=b(dr,"DIV",{class:!0,"data-svelte-h":!0}),H(Tt)!=="svelte-1cmh3ws"&&(Tt.innerHTML=rr),dr.forEach(A),Ye.forEach(A),Ht.forEach(A),kn=D(K),Bt=b(K,"DIV",{class:!0});var Ze=V(Bt);et=b(Ze,"DIV",{class:!0});var mt=V(et);Qt=b(mt,"P",{class:!0,"data-svelte-h":!0}),H(Qt)!=="svelte-ceroz1"&&(Qt.textContent=sr),Mn=D(mt),Jt=b(mt,"H2",{class:!0,"data-svelte-h":!0}),H(Jt)!=="svelte-so6kne"&&(Jt.textContent=ar),En=D(mt),$t=b(mt,"P",{class:!0,"data-svelte-h":!0}),H($t)!=="svelte-ep3r6m"&&($t.textContent=or),Ln=D(mt),te=b(mt,"INPUT",{type:!0}),Dn=D(mt),ee=b(mt,"LABEL",{for:!0,"data-svelte-h":!0}),H(ee)!=="svelte-1kwkdzm"&&(ee.textContent=ir),mt.forEach(A),An=D(Ze),It=b(Ze,"DIV",{id:!0,class:!0});var hr=V(It);for(let ne=0;ne<J.length;ne+=1)J[ne].l(hr);hr.forEach(A),Ze.forEach(A),K.forEach(A),this.h()},h(){g(r,"class","page-subtitle"),g(i,"class","page-title"),g(o,"class","description"),g(n,"class","section header"),g(w,"class","section-header"),g(x,"class","component-title"),g(C,"class","description"),g(P,"type","radio"),g(P,"name","visType"),P.value="barchart",P.checked=!0,g(j,"for","html"),g(W,"type","radio"),g(W,"name","visType"),W.value="boxplot",g($,"for","css"),g(yt,"type","radio"),g(yt,"name","visType"),yt.value="distribution",g(bt,"for","javascript"),g(S,"class","radio-set"),g(ht,"class","plot"),g(h,"class","component column"),ls(()=>t[20].call(h)),g(F,"class","component-title"),g(q,"class","description"),g(pt,"class","plot"),g(m,"class","component column"),g(Ut,"class","component-title"),g(qt,"class","description"),g(_t,"id","map"),g(_t,"class","svelte-wd9p4b"),g(ut,"class","component column"),g(_,"id","vis-block"),g(_,"class","svelte-wd9p4b"),g(d,"class","section"),g(jt,"class","section-header"),g(Wt,"class","component-title"),g(Yt,"class","description"),g(ie,"class","plot"),g(vt,"class","component"),g(Ct,"class","row"),g(Mt,"class","section"),g(Zt,"class","section-header"),g(Kt,"class","component-title"),g(Lt,"class","plot"),g(le,"class","row"),g(Et,"class","component singlevis"),g(Xt,"class","component-title"),g(At,"class","plot"),g(ue,"class","row"),g(ce,"class","row"),g(Dt,"class","component singlevis"),g(Gt,"class","component-title"),g(Tt,"class","plot"),g(fe,"class","row"),g(zt,"class","component singlevis"),g(ft,"class","section"),g(Qt,"class","section-subtitle"),g(Jt,"class","section-title"),g($t,"class","description"),g(te,"type","checkbox"),g(ee,"for","checkbox"),g(et,"class","section-header"),g(It,"id","multiple-comp"),g(It,"class","svelte-wd9p4b"),g(Bt,"class","section"),g(e,"class","page-container")},m(N,K){se(N,e,K),c(e,n),c(n,r),c(n,s),c(n,i),c(i,f),c(n,l),c(n,o),c(e,p),c(e,d),c(d,w),c(d,k),c(d,_),c(_,h),c(h,x),c(h,I),c(h,C),c(C,T),c(C,O),c(C,E),c(h,R),c(h,S),c(S,P),c(S,Z),c(S,j),c(S,ct),c(S,Y),c(S,W),c(S,dt),c(S,$),c(S,kt),c(S,Me),c(S,yt),c(S,Ee),c(S,bt),c(h,Le),c(h,ht),t[19](ht),He=hs(h,t[20].bind(h)),c(_,De),c(_,m),c(m,F),c(m,Ot),c(m,q),c(q,Ae),c(q,at),c(q,ot),c(m,oe),c(m,pt),t[21](pt),c(_,Se),c(_,ut),c(ut,Ut),c(Ut,ln),c(Ut,cn),c(ut,un),c(ut,qt),c(ut,fn),c(ut,_t),t[22](_t),c(e,dn),c(e,Mt),c(Mt,jt),c(Mt,hn),c(Mt,Ct),c(Ct,vt),c(vt,Wt),c(vt,pn),c(vt,Yt),c(vt,vn),c(vt,ie),t[23](ie),c(Ct,mn);for(let B=0;B<Q.length;B+=1)Q[B]&&Q[B].m(Ct,null);c(e,gn),c(e,ft),c(ft,Zt),c(ft,yn),c(ft,Et),c(Et,Kt),c(Et,bn),c(Et,le),c(le,Lt),t[25](Lt),c(ft,_n),c(ft,Dt),c(Dt,Xt),c(Dt,Cn),c(Dt,ce),c(ce,ue),c(ue,At),t[26](At),c(ft,wn),c(ft,zt),c(zt,Gt),c(zt,xn),c(zt,fe),c(fe,Tt),t[27](Tt),c(e,kn),c(e,Bt),c(Bt,et),c(et,Qt),c(et,Mn),c(et,Jt),c(et,En),c(et,$t),c(et,Ln),c(et,te),te.checked=t[11],c(et,Dn),c(et,ee),c(Bt,An),c(Bt,It);for(let B=0;B<J.length;B+=1)J[B]&&J[B].m(It,null);t[33](e),zn||(lr=[Ke(P,"change",t[16]),Ke(W,"change",t[16]),Ke(yt,"change",t[16]),Ke(te,"change",t[28])],zn=!0)},p(N,K){if(K[0]&512){de=Xe(Fn);let B;for(B=0;B<de.length;B+=1){const Vt=Vr(N,de,B);Q[B]?Q[B].p(Vt,K):(Q[B]=Pr(Vt),Q[B].c(),Q[B].m(Ct,null))}for(;B<Q.length;B+=1)Q[B].d(1);Q.length=de.length}if(K[0]&2048&&(te.checked=N[11]),K[0]&2496){he=Xe(On);let B;for(B=0;B<he.length;B+=1){const Vt=Ir(N,he,B);J[B]?J[B].p(Vt,K):(J[B]=Hr(Vt),J[B].c(),J[B].m(It,null))}for(;B<J.length;B+=1)J[B].d(1);J.length=he.length}},i:pr,o:pr,d(N){N&&A(e),t[19](null),He(),t[21](null),t[22](null),t[23](null),vr(Q,N),t[25](null),t[26](null),t[27](null),vr(J,N),t[33](null),zn=!1,cs(lr)}}}function xt(t){const e=t.querySelector("figure");e&&e.remove();const n=t.querySelector("svg");n&&n.remove()}function _o(t,e,n){let r,a,s,i,u,f,l,o={},v={},p={},d={},w="barchart",M=!1,k=300,{data:_}=e;const h=_.LAD,x=_.oneLADData,z=_.oneLADAllCBs,I=_.totalCBAllZones;_.totalCBAllZones;const C=_.allCBAllLAD,T=_.totalCBAllLAD,U=_.allCBAllLADSUM;console.log(9876,T);const O=_.LADToName;let E,R;us(()=>{E=new js(h,"LAD",R,"val",!0),E.initMap()});function S(){w=="boxplot"?a?.append(rt({height:k/1.4,...st,x:{type:"band"},style:{fontSize:"18px"},marks:[Ra(x,{y:"total",x:"scenario",tip:!0}),Un(I,lt({y:"median"},{y:"total",x:"scenario",stroke:"blue",strokeWidth:2})),Un(I,lt({y:"mean"},{y:"total",x:"scenario",stroke:"red",strokeWidth:2}))]})):w=="barchart"?a?.append(rt({height:k/1.4,...st,x:{type:"band"},style:{fontSize:"18px"},marks:[St(T,lt({y:"mean"},{y:"val",x:"scenario",fill:"lightblue",opacity:.7,dx:20})),St(x,lt({y:"sum"},{y:"total",x:"scenario",tip:!0}))]})):w=="distribution"&&a?.append(rt({height:k/1.4,...st,y:{label:"Datazones Frequency"},style:{fontSize:"18px"},facet:{data:I,y:"scenario"},marks:[Je(x,Pn({y:"count"},{x:"total",tip:!0})),jr(I,In({x:"median"},{x:"total",y1:0,y2:1500,fy:"scenario",stroke:"blue",strokeWidth:3}))]}))}function P(){s?.append(rt({height:k,MARGINS:st,x:{type:"band"},marks:[St(U,lt({y:"mean"},{y:"val",x:"co_benefit_type",dx:Qe,fill:ye,tip:!0})),St(z,lt({y:"sum"},{y:"total",x:"co_benefit_type",tip:!0}))]}))}function Z(){On.forEach(m=>{let F;M?(Cr.includes(m)?F=rt({height:k/3,width:500*2,...st,style:{fontSize:"18px"},color:{legend:!0,scheme:"greys"},x:{domain:Kr(0,6),ticks:new Set(x.map(q=>q[m]))},marks:[$e(x,lt({fill:"count"},{x:m,stroke:"black"})),$e([Math.floor(ze(I.map(q=>q[m])))],{x:q=>q,stroke:"red",fill:null,strokeWidth:2})]}):F=rt({height:k/3,width:500*2,...st,style:{fontSize:"18px"},color:{legend:!0},marks:[Sn(x,{x:m,tip:!0}),Sn([ze(x.map(q=>q[m]))],{stroke:"blue",strokeWidth:2}),Sn([ze(I.map(q=>q[m]))],{stroke:"red",strokeWidth:2})]}),o[m]?.append(F)):(Cr.includes(m)?F=rt({height:k/2,width:500,...st,marginLeft:100,x:{grid:!0,label:m,tickFormat:q=>Math.floor(q)},style:{fontSize:"18px"},color:{legend:!0},marks:[St(I,Ar(lt({y:"count"},{x:m,dx:20,fill:ye}))),St(x,Ar(lt({y:"count"},{x:m})))]}):F=rt({height:k/2,...st,style:{fontSize:"18px"},marks:[Je(x,Pn({y:"proportion"},{x:m,tip:!0,fill:ye,stroke:ye,fillOpacity:.2,strokeWidth:3})),Je(I,Pn({y:"proportion"},{x:m,tip:!0,fill:"black",stroke:"black",fillOpacity:.2,strokeWidth:3}))]}),v[m]?.append(void 0),o[m]?.append(F));let Ot=rt({height:k/2,...st,style:{fontSize:"18px"},color:{range:["rgb(227, 248, 255)","lightblue"]},marks:[Oa(Ws(I,3e4),{x:m,y:"total",fill:"density",thresholds:10}),ts(x,{x:m,y:"total",fill:"black",r:2}),Qa(x,{x:m,y:"total"}),Us(),qs({anchor:"bottom"})]});p[m]?.append(Ot)})}function j(){i?.append(rt({...st,marginLeft:100,height:k,width:300,grid:!0,color:{type:"linear",scheme:"greys",legend:!0},marks:[$e(C,_r({fill:"mean"},{x:"scenario",y:"co_benefit_type",fill:"val",stroke:"black",dx:Qe/2,dy:-Qe/2,inset:.5})),$e(z,_r({fill:"mean"},{x:"scenario",y:"co_benefit_type",fill:"total",stroke:"black",inset:.5}))]}))}function tt(){for(let m of Fn){let F=rt({height:k,width:410,...st,marginRight:0,marginLeft:100,marks:[xr(C,In({x:"mean"},{x:"val",y:"co_benefit_type",dy:-Qe/2,fill:ye,tip:!0})),xr(z,In({x:"mean"},{x:"total",y:"co_benefit_type",tip:!0}))]});d[m]?.append(F)}}function ct(){let m=x.flatMap(at=>Vn.map(ot=>({time:ot,value:at[ot],scenario:at.scenario,zone:"local"}))),F=I.flatMap(at=>Vn.map(ot=>({time:ot,value:at[ot],scenario:at.scenario,zone:"UK"}))),Ft=m.concat(F);console.log(Ft[20]);let Ot=rt({height:k,width:800,...st,paddingLeft:200,marginRight:0,x:{tickSize:0,label:null,ticks:[]},color:{range:[Ys,ye]},marks:[St(Ft,lt({y:"mean"},{x:"zone",y:"value",fx:"time",tip:!0,fill:"zone"}))]});u?.append(Ot),Rt(u).select("g[aria-label='bar']").selectAll("g").each(function(at,ot){const oe=Rt(this).selectAll("rect").nodes()[0],pt=Rt(oe).attr("transform")||"";Rt(oe).attr("transform",`${pt} translate(-20, 0)`),Rt(this).selectAll("rect").nodes()[0].getAttribute("height"),Rt(this).selectAll("rect").nodes()[1].getAttribute("height"),Rt(this).selectAll("rect").each(function(Se,ut){ut==0&&Rt(this).raise()})});let q=rt({height:k,width:800,...st,paddingLeft:200,marginRight:0,color:{legend:!0},marks:[Da(Ft,lt({y:"mean"},{x:"time",y:"value",tip:!0,stroke:"scenario"}))]});f?.append(q);let Ae=z.flatMap(at=>Vn.map(ot=>({time:ot,value:at[ot],cobenefit:at.co_benefit_type}))),Re=rt({height:k,width:1e3,...st,paddingLeft:200,marginRight:0,insetLeft:10,insetRight:10,insetBottom:30,style:{fontSize:"10px"},y:{tickFormat:".2f",label:"Value (£)"},x:{label:"Year"},color:{legend:!0,range:Zs,domain:Ks},marks:[Je(Ae,lt({y:"mean"},{x:"time",y:"value",tip:!0,fill:"cobenefit"})),br([0],{strokeWidth:8,stroke:"white",opacity:1,strokeLinecap:"round"}),br([0],{strokeWidth:2,stroke:"#333333",opacity:1,strokeLinecap:"round"})]});l?.append(Re)}function Y(m){n(18,w=m.currentTarget.value)}function W(m){it[m?"unshift":"push"](()=>{a=m,n(0,a)})}function dt(){k=this.clientHeight,n(12,k)}function $(m){it[m?"unshift":"push"](()=>{s=m,n(1,s)})}function gt(m){it[m?"unshift":"push"](()=>{R=m,n(13,R)})}function kt(m){it[m?"unshift":"push"](()=>{i=m,n(2,i)})}function Me(m,F){it[m?"unshift":"push"](()=>{d[F]=m,n(9,d)})}function yt(m){it[m?"unshift":"push"](()=>{u=m,n(3,u)})}function Ee(m){it[m?"unshift":"push"](()=>{l=m,n(5,l)})}function bt(m){it[m?"unshift":"push"](()=>{f=m,n(4,f)})}function Ve(){M=this.checked,n(11,M)}function Le(m,F){it[m?"unshift":"push"](()=>{o[F]=m,n(6,o)})}function ht(m,F){it[m?"unshift":"push"](()=>{o[F]=m,n(6,o)})}function Pe(m,F){it[m?"unshift":"push"](()=>{v[F]=m,n(7,v)})}function He(m,F){it[m?"unshift":"push"](()=>{p[F]=m,n(8,p)})}function De(m){it[m?"unshift":"push"](()=>{r=m,n(10,r)})}return t.$$set=m=>{"data"in m&&n(17,_=m.data)},t.$$.update=()=>{t.$$.dirty[0]&262203&&(a&&(console.log("REM"),xt(a)),s&&xt(s),u&&xt(u),f&&xt(f),l&&xt(l),S(),P(),ct()),t.$$.dirty[0]&448&&(Object.values(o).forEach(m=>{m&&xt(m)}),Object.values(v).forEach(m=>{m&&xt(m)}),Object.values(p).forEach(m=>{m&&xt(m)}),Z()),t.$$.dirty[0]&516&&(i?.firstChild?.remove(),Object.values(d).forEach(m=>{m&&xt(m)}),j(),tt())},[a,s,i,u,f,l,o,v,p,d,r,M,k,R,h,O,Y,_,w,W,dt,$,gt,kt,Me,yt,Ee,bt,Ve,Le,ht,Pe,He,De]}class Ao extends fs{constructor(e){super(),ds(this,e,_o,bo,is,{data:17},null,[-1,-1])}}export{Ao as component};
