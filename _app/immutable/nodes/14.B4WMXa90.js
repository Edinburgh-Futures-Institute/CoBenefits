import{s as Bs,a as m,e as r,t as S,g as b,c as i,b as p,p as x,f as u,d as k,q as n,C as Oe,B as Yt,i as F,h as e,y as Os,w as Hs,r as ts,G as Fs,j as He,H as Us,E as zs,A as he}from"../chunks/scheduler.DxTP-Qzi.js";import{S as Rs,i as Ws,c as es,b as ls,m as as,t as ss,a as ns,d as rs}from"../chunks/index.CDFQmUj4.js";import{N as qs,e as is}from"../chunks/NavigationBar.qltnzwK0.js";import"../chunks/transform.BNP73y-7.js";import{aw as ua,ax as Ks,ay as Gs,az as Ys,aA as js,aB as Js,a1 as Xs,af as os,aC as Zs,aD as Qs,aE as $s,r as ks,aF as cs,d as tn,aG as en,M as ln,R as an,c as sn,b as nn,e as rn,h as on,S as cn,aH as fn,J as As,aI as un,G as dn,Y as Is,N as Ls,aJ as vn,F as hn,I as Pe,O as dl,aK as fs,L as pn,aL as mn,P as us,av as ds,W as bn,K as vs}from"../chunks/index.BLoJmirk.js";import{b as gn}from"../chunks/paths.B1YLSoDf.js";import{f as _n}from"../chunks/module.jBGXnV9S.js";import{M as yn}from"../chunks/mapUK.S9ZAMuue.js";import{k as Ae,C as hs,D as En,b as Be,l as ps,c as ms,g as wn,T as Cn,S as Dn,d as da,e as Sn,h as kn,M as An,a as In}from"../chunks/globals.-zm7cJ0w.js";import{g as Se,u as Ln,v as xn,r as Tn,s as Vn,w as Nn,t as Mn}from"../chunks/duckdb.BH9FqnGd.js";import{t as va,p as Pn}from"../chunks/percentage.Cu08Svdw.js";import{p as ha}from"../chunks/per_capita.COcMrZFY.js";import{F as Bn}from"../chunks/Footer.D9fwXX_-.js";import{c as On,b as Hn}from"../chunks/bin.vDT_EE8z.js";import{a as xs}from"../chunks/bar.CuW7nKQD.js";import{d as ma}from"../chunks/dot.pNaywhZp.js";function Ts(s,t=ua){if(typeof s[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let l=Array.from(s);const a=new Float64Array(l.length);t.length!==2&&(l=l.map(t),t=ua);const o=(y,E)=>t(l[y],l[E]);let f,c;return s=Uint32Array.from(l,(y,E)=>E),s.sort(t===ua?(y,E)=>Ks(l[y],l[E]):Gs(o)),s.forEach((y,E)=>{const w=o(y,f===void 0?y:f);w>=0?((f===void 0||w>0)&&(f=y,c=E),a[y]=c):a[y]=NaN}),a}function Fn(s={},t={}){const l=Ys(t),a=Object.entries(s).map(([o,f])=>{const c=js(o,t);if(c==null)throw new Error(`missing channel: ${o}`);const[y,E]=Js(c);return{key:o,input:c,output:y,setOutput:E,map:Un(f)}});return{...Xs(t,(o,f)=>{const c=os(o,l),y=a.map(({input:w})=>os(o,w)),E=a.map(({setOutput:w})=>w(new Array(o.length)));for(const w of f)for(const g of c?Zs(w,A=>c[A]).values():[w])a.forEach(({map:A},C)=>A.mapIndex(g,y[C],E[C]));return{data:o,facets:f}}),...Object.fromEntries(a.map(({key:o,output:f})=>[o,f]))}}function Un(s){if(s==null)throw new Error("missing map");if(typeof s.mapIndex=="function")return s;if(typeof s.map=="function"&&Qs(s))return zn(s);if(typeof s=="function")return pa($s(s));switch(`${s}`.toLowerCase()){case"cumsum":return Wn;case"rank":return pa((t,l)=>Ts(t,a=>l[a]));case"quantile":return pa((t,l)=>Rn(t,a=>l[a]))}throw new Error(`invalid map: ${s}`)}function zn(s){return console.warn("deprecated map interface; implement mapIndex instead."),{mapIndex:s.map.bind(s)}}function Rn(s,t){const l=On(s,t)-1;return Ts(s,t).map(a=>a/l)}function pa(s){return{mapIndex(t,l,a){const o=s(t,l);if(o.length!==t.length)throw new Error("map function returned a mismatched length");for(let f=0,c=t.length;f<c;++f)a[t[f]]=o[f]}}}const Wn={mapIndex(s,t,l){let a=0;for(const o of s)l[o]=a+=t[o]}},qn={ariaLabel:"tick",fill:null,stroke:"currentColor"};class Kn extends ln{constructor(t,l,a){super(t,l,a,qn),an(this,a)}render(t,l,a,o,f){return sn("svg:g",f).call(nn,this,o,f).call(this._transform,this,l).call(c=>c.selectAll().data(t).enter().append("line").call(rn,this).attr("x1",this._x1(l,a,o)).attr("x2",this._x2(l,a,o)).attr("y1",this._y1(l,a,o)).attr("y2",this._y2(l,a,o)).call(on,this,a).call(cn,this,a,f)).node()}}class Gn extends Kn{constructor(t,l={}){const{x:a,y:o,inset:f=0,insetRight:c=f,insetLeft:y=f}=l;super(t,{y:{value:o,scale:"y"},x:{value:a,scale:"x",type:"band",optional:!0}},l),this.insetRight=cs(c),this.insetLeft=cs(y)}_transform(t,l,{y:a}){t.call(tn,l,{y:a},0,en)}_x1({x:t},{x:l},{marginLeft:a}){const{insetLeft:o}=this;return l&&t?f=>l[f]+o:a+o}_x2({x:t},{x:l},{width:a,marginRight:o}){const{insetRight:f}=this;return l&&t?c=>l[c]+t.bandwidth()-f:a-o-f}_y1(t,{y:l}){return a=>l[a]}_y2(t,{y:l}){return a=>l[a]}}function Yn(s,{y:t=ks,...l}={}){return new Gn(s,{...l,y:t})}function jn(s,{y:t=ks,x:l=null,r:a,fill:o="#ccc",fillOpacity:f,stroke:c="currentColor",strokeOpacity:y,strokeWidth:E=2,sort:w,...g}={}){const A=l!=null?Ls:vn;return fn(As(s,A({y1:Vs,y2:Ns},{x:l,y:t,stroke:c,strokeOpacity:y,...g})),xs(s,A({y1:"p25",y2:"p75"},{x:l,y:t,fill:o,fillOpacity:f,...g})),Yn(s,A({y:"p50"},{x:l,y:t,stroke:c,strokeOpacity:y,strokeWidth:E,sort:w,...g})),ma(s,Fn({y:Jn},{x:l,y:t,z:l,r:a,stroke:c,strokeOpacity:y,...g})))}function Jn(s){const t=Vs(s),l=Ns(s);return s.map(a=>a<t||a>l?a:NaN)}function Vs(s){const t=Ms(s)*2.5-Ps(s)*1.5;return un(s,l=>l>=t?l:NaN)}function Ns(s){const t=Ps(s)*2.5-Ms(s)*1.5;return dn(s,l=>l<=t?l:NaN)}function Ms(s){return Is(s,.25)}function Ps(s){return Is(s,.75)}function bs(s,t,l){const a=s.slice();return a[47]=t[l],a[48]=t,a[49]=l,a}function gs(s){let t,l,a=s[4].toLocaleString()+"",o;return{c(){t=r("span"),l=S("£"),o=S(a),this.h()},l(f){t=i(f,"SPAN",{class:!0});var c=p(t);l=k(c,"£"),o=k(c,a),c.forEach(u),this.h()},h(){n(t,"class","waffle-big svelte-b9v0tr")},m(f,c){F(f,t,c),e(t,l),e(t,o)},p(f,c){c[0]&16&&a!==(a=f[4].toLocaleString()+"")&&He(o,a)},d(f){f&&u(t)}}}function Xn(s){let t,l="National costs";return{c(){t=r("div"),t.textContent=l,this.h()},l(a){t=i(a,"DIV",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-o12owz"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function Zn(s){let t,l="National benefits";return{c(){t=r("div"),t.textContent=l,this.h()},l(a){t=i(a,"DIV",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-10ytukz"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function _s(s){let t,l,a=s[6].toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",o;return{c(){t=r("span"),l=S("£"),o=S(a),this.h()},l(f){t=i(f,"SPAN",{class:!0});var c=p(t);l=k(c,"£"),o=k(c,a),c.forEach(u),this.h()},h(){n(t,"class","waffle-big svelte-b9v0tr")},m(f,c){F(f,t,c),e(t,l),e(t,o)},p(f,c){c[0]&64&&a!==(a=f[6].toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&He(o,a)},d(f){f&&u(t)}}}function Qn(s){let t,l="Per capita costs";return{c(){t=r("div"),t.textContent=l,this.h()},l(a){t=i(a,"DIV",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-6pmcl0"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function $n(s){let t,l="Per capita benefits";return{c(){t=r("div"),t.textContent=l,this.h()},l(a){t=i(a,"DIV",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-g1rvwk"&&(t.textContent=l),this.h()},h(){n(t,"class","waffle-caption svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function ys(s){let t,l,a=(s[4]/s[5]*100).toFixed(2)+"",o,f,c,y="%";return{c(){t=r("div"),l=r("span"),o=S(a),f=m(),c=r("span"),c.textContent=y,this.h()},l(E){t=i(E,"DIV",{class:!0});var w=p(t);l=i(w,"SPAN",{class:!0});var g=p(l);o=k(g,a),g.forEach(u),f=b(w),c=i(w,"SPAN",{class:!0,"data-svelte-h":!0}),x(c)!=="svelte-jxggz7"&&(c.textContent=y),w.forEach(u),this.h()},h(){n(l,"class","waffle-big svelte-b9v0tr"),n(c,"class","small svelte-b9v0tr"),n(t,"class","waffle-value svelte-b9v0tr")},m(E,w){F(E,t,w),e(t,l),e(l,o),e(t,f),e(t,c)},p(E,w){w[0]&48&&a!==(a=(E[4]/E[5]*100).toFixed(2)+"")&&He(o,a)},d(E){E&&u(t)}}}function Es(s){let t,l,a,o,f,c,y,E,w,g=Ss(s[10])+"",A,C=s[4]&&ws(s);return{c(){t=r("div"),l=r("div"),a=r("img"),f=m(),c=r("span"),y=S(s[15]),E=m(),C&&C.c(),w=S(`
                    >> `),A=S(g),this.h()},l(P){t=i(P,"DIV",{class:!0});var N=p(t);l=i(N,"DIV",{class:!0});var M=p(l);a=i(M,"IMG",{src:!0,alt:!0,class:!0}),f=b(M),c=i(M,"SPAN",{class:!0});var V=p(c);y=k(V,s[15]),E=b(V),C&&C.l(V),w=k(V,`
                    >> `),A=k(V,g),V.forEach(u),M.forEach(u),N.forEach(u),this.h()},h(){Oe(a.src,o=s[17])||n(a,"src",o),n(a,"alt","Icon"),n(a,"class","mini-heading-icon"),n(c,"class","mini-header-text"),n(l,"class","mini-header-content"),n(t,"class","mini-header")},m(P,N){F(P,t,N),e(t,l),e(l,a),e(l,f),e(l,c),e(c,y),e(c,E),C&&C.m(c,null),e(c,w),e(c,A)},p(P,N){P[4]?C?C.p(P,N):(C=ws(P),C.c(),C.m(c,w)):C&&(C.d(1),C=null),N[0]&1024&&g!==(g=Ss(P[10])+"")&&He(A,g)},d(P){P&&u(t),C&&C.d()}}}function ws(s){let t,l,a,o;return{c(){t=r("span"),l=S("(UK total: £"),a=S(s[4]),o=S(" billion)"),this.h()},l(f){t=i(f,"SPAN",{class:!0});var c=p(t);l=k(c,"(UK total: £"),a=k(c,s[4]),o=k(c," billion)"),c.forEach(u),this.h()},h(){n(t,"class","mini-header-value")},m(f,c){F(f,t,c),e(t,l),e(t,a),e(t,o)},p(f,c){c[0]&16&&He(a,f[4])},d(f){f&&u(t)}}}function tr(s){let t,l=`Each bar shows the predicted total costs in billion pounds for each
                            five-year periods for all of UK.`;return{c(){t=r("p"),t.textContent=l,this.h()},l(a){t=i(a,"P",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-1v08yjw"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function er(s){let t,l=`Each bar shows the predicted total benefits in billion pounds for each
                            five-year periods for all of UK.`;return{c(){t=r("p"),t.textContent=l,this.h()},l(a){t=i(a,"P",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-3v1xr6"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function lr(s){let t,l=`The x-axis represents the value of costs, while the y-axis shows the
                            number of data zones falling within each benefit range.`;return{c(){t=r("p"),t.textContent=l,this.h()},l(a){t=i(a,"P",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-92e6ig"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function ar(s){let t,l=`The x-axis represents the predicted value of benefits, measured in
                            billion pounds, while the y-axis shows the number of data zones falling within each benefit
                            range.`;return{c(){t=r("p"),t.textContent=l,this.h()},l(a){t=i(a,"P",{class:!0,"data-svelte-h":!0}),x(t)!=="svelte-flkfm5"&&(t.textContent=l),this.h()},h(){n(t,"class","description svelte-b9v0tr")},m(a,o){F(a,t,o)},d(a){a&&u(t)}}}function Cs(s){let t,l,a=s[7].legend().outerHTML+"";return{c(){t=r("div"),l=new Us(!1),this.h()},l(o){t=i(o,"DIV",{id:!0});var f=p(t);l=zs(f,!1),f.forEach(u),this.h()},h(){l.a=null,n(t,"id","legend")},m(o,f){F(o,t,f),l.m(a,t)},p(o,f){f[0]&128&&a!==(a=o[7].legend().outerHTML+"")&&l.p(a)},d(o){o&&u(t)}}}function Ds(s){let t,l,a=s[47].label+"",o,f,c,y=s[47].def+"",E,w,g,A=s[47],C;const P=()=>s[28](g,A),N=()=>s[28](null,A);return{c(){t=r("div"),l=r("h3"),o=S(a),f=m(),c=r("p"),E=S(y),w=m(),g=r("div"),C=m(),this.h()},l(M){t=i(M,"DIV",{class:!0});var V=p(t);l=i(V,"H3",{class:!0});var rt=p(l);o=k(rt,a),rt.forEach(u),f=b(V),c=i(V,"P",{class:!0});var ot=p(c);E=k(ot,y),ot.forEach(u),w=b(V),g=i(V,"DIV",{class:!0}),p(g).forEach(u),C=b(V),V.forEach(u),this.h()},h(){n(l,"class","component-chart-title svelte-b9v0tr"),n(c,"class","component-chart-caption svelte-b9v0tr"),n(g,"class","plot"),n(t,"class","plot-container svelte-b9v0tr")},m(M,V){F(M,t,V),e(t,l),e(l,o),e(t,f),e(t,c),e(c,E),e(t,w),e(t,g),P(),e(t,C)},p(M,V){s=M,A!==s[47]&&(N(),A=s[47],P())},d(M){M&&u(t),N()}}}function sr(s){let t,l,a,o,f,c,y,E="Co-Benefit Report",w,g,A,C,P,N,M,V,rt,ot,At,pe,ct,me,jt,U,It,lt,at,dt,G,Jt,Ie,z,st,bt,Fe="billion",Le,xe,ft,vt,gt,Ue,Te,_t,Ve,Ne,h,v,I,R,W,it,_,q="Contribution to national benefits",Xt,ut,D="Share of total benefits",tt,Lt,be,ge,vl,ze,xt,Tt,Zt,ba='<p class="section-subtitle">Overview</p>',hl,yt,T,Vt,pl,Qt,ga=s[15].toLowerCase()+"",ml,bl,gl,Re,$t,_a=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${va}" alt="icon"/> <span class="tooltip-text">This chart uses total values. i.e. shows the total benefit/cost for all of the UK.</span></div>`,_l,_e,yl,El,wl,Et,Cl,te,ya=s[15].toLowerCase()+"",Dl,Sl,ee,Ea=`data zones
                                <span class="tooltip-txt">Data zones are standard statitical geographies in UK that  comprise between 400 and 1200 households.</span>`,kl,We,le,wa=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${va}" alt="icon"/> <span class="tooltip-text">This chart uses total values. i.e. shows the total benefit/cost for all of the UK.</span></div>`,Al,Nt,Ca="",Il,Ll,xl,Q,Mt,Tl,ae,Da=s[15].toLowerCase()+"",Vl,Nl,Ml,se,Sa=`Each local authority is coloured by the predicted per capita benefits/cost,
                        showing regional variation in how benefits/cost are distributed. Scroll for zooming in and
                        out.`,Pl,ne,ka=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${ha}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,Bl,qe,wt,Aa="",Ol,Pt,re,Ia='<p class="section-subtitle">Socio-economic factors</p>',Hl,ht,nt,Bt,Fl,ie,La=s[15]?.toLowerCase()+"",Ul,zl,Rl,oe,xa=`Each chart shows how benefits or costs are distributed across UK local
                        authorities in correlation with a specific household social-economic factor.`,Wl,$,ce,Ta=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${ha}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,ql,fe,Va="Legend:",Kl,Gl,Yl,ye,Na="The scatter points are coloured by nation. Click the buttons below to filter.",jl,H,Jl,Xl,Ot,Zl,Ql,Ht,$l,ta,Ft,ea,la,Ut,aa,sa,na,ra,zt,Ma="Reset",ia,Rt,Pa=`<p style="margin: 0 0 0.5rem 0;"><strong>Discrete scales:</strong> The first set of
                            socio-economic factors are using categorical values where the x-axis is non-linear.</p> <p style="margin: 0 0 0.5rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots
                            represent modelled associations and should not be interpreted as direct causal
                            relationships.</p> <p style="margin: 0 0 0.5rem 0;"><strong>Aggregated data:</strong> Each socio-economic factor
                            for a given local authority is aggregated from the data zones within its boundary.</p>`,oa,ue,Wt,Ke,de,qt,ca,Ba;t=new qs({});let Y=s[4]&&gs(s);function Oa(d,L){return d[4]>0?Zn:Xn}let Ge=Oa(s),Ct=Ge(s),j=s[4]&&_s(s);function Ha(d,L){return d[4]>0?$n:Qn}let Ye=Ha(s),Dt=Ye(s),J=s[4]&&ys(s),X=s[9]&&Es(s);function Fa(d,L){return d[4]>0?er:tr}let je=Fa(s),St=je(s);function Ua(d,L){return d[4]>0?ar:lr}let Je=Ua(s),kt=Je(s),Z=s[7]&&Cs(s),Ee=is(ms),K=[];for(let d=0;d<Ee.length;d+=1)K[d]=Ds(bs(s,Ee,d));return de=new Bn({}),{c(){es(t.$$.fragment),l=m(),a=r("div"),o=r("div"),f=r("div"),c=r("div"),y=r("p"),y.textContent=E,w=m(),g=r("div"),A=r("h1"),C=r("img"),N=m(),M=r("div"),V=m(),rt=S(s[15]),ot=m(),At=r("div"),pe=m(),ct=r("p"),me=S(s[16]),jt=m(),U=r("div"),It=r("div"),lt=r("div"),at=r("div"),dt=r("div"),G=r("img"),Ie=m(),z=r("div"),Y&&Y.c(),st=m(),bt=r("span"),bt.textContent=Fe,Le=m(),Ct.c(),xe=m(),ft=r("div"),vt=r("div"),gt=r("img"),Te=m(),_t=r("div"),j&&j.c(),Ve=m(),Dt.c(),Ne=m(),h=r("div"),v=r("div"),I=r("img"),W=m(),J&&J.c(),it=m(),_=r("div"),_.textContent=q,Xt=m(),ut=r("h3"),ut.textContent=D,tt=m(),Lt=r("div"),be=m(),ge=r("div"),vl=m(),X&&X.c(),ze=m(),xt=r("div"),Tt=r("div"),Zt=r("div"),Zt.innerHTML=ba,hl=m(),yt=r("div"),T=r("div"),Vt=r("h3"),pl=S("Total "),Qt=r("span"),ml=S(ga),bl=S(" over time 2025-2050"),gl=m(),St.c(),Re=m(),$t=r("div"),$t.innerHTML=_a,_l=m(),_e=r("div"),yl=m(),El=r("br"),wl=m(),Et=r("h3"),Cl=S("Distribution of "),te=r("span"),Dl=S(ya),Sl=S(` across UK
                        

                        `),ee=r("span"),ee.innerHTML=Ea,kl=m(),kt.c(),We=m(),le=r("div"),le.innerHTML=wa,Al=m(),Nt=r("div"),Nt.innerHTML=Ca,Il=m(),Ll=r("br"),xl=m(),Q=r("div"),Mt=r("h3"),Tl=S("Per Capita "),ae=r("span"),Vl=S(Da),Nl=S(" by UK local authorities"),Ml=m(),se=r("p"),se.textContent=Sa,Pl=m(),ne=r("div"),ne.innerHTML=ka,Bl=m(),Z&&Z.c(),qe=m(),wt=r("div"),wt.innerHTML=Aa,Ol=m(),Pt=r("div"),re=r("div"),re.innerHTML=Ia,Hl=m(),ht=r("div"),nt=r("div"),Bt=r("h3"),Fl=S("How "),ie=r("span"),Ul=S(La),zl=S(` vary by household social-economic
                        factors`),Rl=m(),oe=r("p"),oe.textContent=xa,Wl=m(),$=r("div"),ce=r("div"),ce.innerHTML=Ta,ql=m(),fe=r("strong"),fe.textContent=Va,Kl=m(),Gl=r("br"),Yl=m(),ye=r("span"),ye.textContent=Na,jl=m(),H=r("div"),Jl=r("br"),Xl=m(),Ot=r("button"),Zl=S("Scotland"),Ql=m(),Ht=r("button"),$l=S("Northern Ireland"),ta=m(),Ft=r("button"),ea=S("England"),la=m(),Ut=r("button"),aa=S("Wales"),sa=m(),na=r("br"),ra=m(),zt=r("button"),zt.textContent=Ma,ia=m(),Rt=r("div"),Rt.innerHTML=Pa,oa=m(),ue=r("div"),Wt=r("div");for(let d=0;d<K.length;d+=1)K[d].c();Ke=m(),es(de.$$.fragment),this.h()},l(d){ls(t.$$.fragment,d),l=b(d),a=i(d,"DIV",{class:!0});var L=p(a);o=i(L,"DIV",{class:!0});var B=p(o);f=i(B,"DIV",{class:!0});var ve=p(f);c=i(ve,"DIV",{class:!0});var Xe=p(c);y=i(Xe,"P",{class:!0,"data-svelte-h":!0}),x(y)!=="svelte-1flv0v9"&&(y.textContent=E),w=b(Xe),g=i(Xe,"DIV",{class:!0});var we=p(g);A=i(we,"H1",{class:!0});var Ce=p(A);C=i(Ce,"IMG",{src:!0,alt:!0,class:!0}),N=b(Ce),M=i(Ce,"DIV",{style:!0}),p(M).forEach(u),V=b(Ce),rt=k(Ce,s[15]),Ce.forEach(u),ot=b(we),At=i(we,"DIV",{style:!0}),p(At).forEach(u),pe=b(we),ct=i(we,"P",{class:!0});var za=p(ct);me=k(za,s[16]),za.forEach(u),we.forEach(u),Xe.forEach(u),jt=b(ve),U=i(ve,"DIV",{class:!0});var Kt=p(U);It=i(Kt,"DIV",{class:!0});var Ra=p(It);lt=i(Ra,"DIV",{class:!0});var De=p(lt);at=i(De,"DIV",{class:!0});var Ze=p(at);dt=i(Ze,"DIV",{class:!0});var Qe=p(dt);G=i(Qe,"IMG",{class:!0,src:!0,alt:!0}),Ie=b(Qe),z=i(Qe,"DIV",{class:!0});var $e=p(z);Y&&Y.l($e),st=b($e),bt=i($e,"SPAN",{class:!0,"data-svelte-h":!0}),x(bt)!=="svelte-tlhydp"&&(bt.textContent=Fe),$e.forEach(u),Qe.forEach(u),Le=b(Ze),Ct.l(Ze),Ze.forEach(u),xe=b(De),ft=i(De,"DIV",{class:!0});var tl=p(ft);vt=i(tl,"DIV",{class:!0});var el=p(vt);gt=i(el,"IMG",{class:!0,src:!0,alt:!0}),Te=b(el),_t=i(el,"DIV",{class:!0});var Wa=p(_t);j&&j.l(Wa),Wa.forEach(u),el.forEach(u),Ve=b(tl),Dt.l(tl),tl.forEach(u),Ne=b(De),h=i(De,"DIV",{class:!0});var ll=p(h);v=i(ll,"DIV",{class:!0});var al=p(v);I=i(al,"IMG",{class:!0,src:!0,alt:!0}),W=b(al),J&&J.l(al),al.forEach(u),it=b(ll),_=i(ll,"DIV",{class:!0,"data-svelte-h":!0}),x(_)!=="svelte-1v3rfza"&&(_.textContent=q),ll.forEach(u),De.forEach(u),Ra.forEach(u),Xt=b(Kt),ut=i(Kt,"H3",{class:!0,"data-svelte-h":!0}),x(ut)!=="svelte-1vkchgj"&&(ut.textContent=D),tt=b(Kt),Lt=i(Kt,"DIV",{class:!0}),p(Lt).forEach(u),be=b(Kt),ge=i(Kt,"DIV",{class:!0}),p(ge).forEach(u),Kt.forEach(u),ve.forEach(u),B.forEach(u),vl=b(L),X&&X.l(L),ze=b(L),xt=i(L,"DIV",{class:!0});var sl=p(xt);Tt=i(sl,"DIV",{id:!0});var nl=p(Tt);Zt=i(nl,"DIV",{class:!0,"data-svelte-h":!0}),x(Zt)!=="svelte-ll1i43"&&(Zt.innerHTML=ba),hl=b(nl),yt=i(nl,"DIV",{id:!0,class:!0});var rl=p(yt);T=i(rl,"DIV",{class:!0});var O=p(T);Vt=i(O,"H3",{class:!0});var il=p(Vt);pl=k(il,"Total "),Qt=i(il,"SPAN",{style:!0});var qa=p(Qt);ml=k(qa,ga),qa.forEach(u),bl=k(il," over time 2025-2050"),il.forEach(u),gl=b(O),St.l(O),Re=b(O),$t=i(O,"DIV",{class:!0,"data-svelte-h":!0}),x($t)!=="svelte-1yzemw8"&&($t.innerHTML=_a),_l=b(O),_e=i(O,"DIV",{class:!0}),p(_e).forEach(u),yl=b(O),El=i(O,"BR",{}),wl=b(O),Et=i(O,"H3",{class:!0});var Me=p(Et);Cl=k(Me,"Distribution of "),te=i(Me,"SPAN",{style:!0});var Ka=p(te);Dl=k(Ka,ya),Ka.forEach(u),Sl=k(Me,` across UK
                        

                        `),ee=i(Me,"SPAN",{class:!0,"data-svelte-h":!0}),x(ee)!=="svelte-7glovi"&&(ee.innerHTML=Ea),Me.forEach(u),kl=b(O),kt.l(O),We=b(O),le=i(O,"DIV",{class:!0,"data-svelte-h":!0}),x(le)!=="svelte-1yzemw8"&&(le.innerHTML=wa),Al=b(O),Nt=i(O,"DIV",{class:!0,"data-svelte-h":!0}),x(Nt)!=="svelte-17463th"&&(Nt.innerHTML=Ca),Il=b(O),Ll=i(O,"BR",{}),O.forEach(u),xl=b(rl),Q=i(rl,"DIV",{class:!0});var pt=p(Q);Mt=i(pt,"H3",{class:!0});var ol=p(Mt);Tl=k(ol,"Per Capita "),ae=i(ol,"SPAN",{style:!0});var Ga=p(ae);Vl=k(Ga,Da),Ga.forEach(u),Nl=k(ol," by UK local authorities"),ol.forEach(u),Ml=b(pt),se=i(pt,"P",{class:!0,"data-svelte-h":!0}),x(se)!=="svelte-32j67s"&&(se.textContent=Sa),Pl=b(pt),ne=i(pt,"DIV",{class:!0,"data-svelte-h":!0}),x(ne)!=="svelte-1pbiq4x"&&(ne.innerHTML=ka),Bl=b(pt),Z&&Z.l(pt),qe=b(pt),wt=i(pt,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),x(wt)!=="svelte-1bex1ev"&&(wt.innerHTML=Aa),pt.forEach(u),rl.forEach(u),nl.forEach(u),Ol=b(sl),Pt=i(sl,"DIV",{id:!0});var cl=p(Pt);re=i(cl,"DIV",{class:!0,"data-svelte-h":!0}),x(re)!=="svelte-1l51yw7"&&(re.innerHTML=Ia),Hl=b(cl),ht=i(cl,"DIV",{id:!0,class:!0,style:!0});var fl=p(ht);nt=i(fl,"DIV",{id:!0,class:!0});var Gt=p(nt);Bt=i(Gt,"H3",{class:!0});var ul=p(Bt);Fl=k(ul,"How "),ie=i(ul,"SPAN",{style:!0});var Ya=p(ie);Ul=k(Ya,La),Ya.forEach(u),zl=k(ul,` vary by household social-economic
                        factors`),ul.forEach(u),Rl=b(Gt),oe=i(Gt,"P",{class:!0,"data-svelte-h":!0}),x(oe)!=="svelte-r5sqj1"&&(oe.textContent=xa),Wl=b(Gt),$=i(Gt,"DIV",{id:!0,class:!0});var mt=p($);ce=i(mt,"DIV",{class:!0,"data-svelte-h":!0}),x(ce)!=="svelte-131efpe"&&(ce.innerHTML=Ta),ql=b(mt),fe=i(mt,"STRONG",{style:!0,"data-svelte-h":!0}),x(fe)!=="svelte-1s0qlts"&&(fe.textContent=Va),Kl=b(mt),Gl=i(mt,"BR",{}),Yl=b(mt),ye=i(mt,"SPAN",{"data-svelte-h":!0}),x(ye)!=="svelte-av8zq9"&&(ye.textContent=Na),jl=b(mt),H=i(mt,"DIV",{class:!0});var et=p(H);Jl=i(et,"BR",{}),Xl=b(et),Ot=i(et,"BUTTON",{class:!0,"data-nation":!0,style:!0});var ja=p(Ot);Zl=k(ja,"Scotland"),ja.forEach(u),Ql=b(et),Ht=i(et,"BUTTON",{class:!0,"data-nation":!0,style:!0});var Ja=p(Ht);$l=k(Ja,"Northern Ireland"),Ja.forEach(u),ta=b(et),Ft=i(et,"BUTTON",{class:!0,"data-nation":!0,style:!0});var Xa=p(Ft);ea=k(Xa,"England"),Xa.forEach(u),la=b(et),Ut=i(et,"BUTTON",{class:!0,"data-nation":!0,style:!0});var Za=p(Ut);aa=k(Za,"Wales"),Za.forEach(u),sa=b(et),na=i(et,"BR",{}),ra=b(et),zt=i(et,"BUTTON",{class:!0,"data-svelte-h":!0}),x(zt)!=="svelte-2t5u5r"&&(zt.textContent=Ma),et.forEach(u),mt.forEach(u),ia=b(Gt),Rt=i(Gt,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),x(Rt)!=="svelte-p1d3q2"&&(Rt.innerHTML=Pa),Gt.forEach(u),oa=b(fl),ue=i(fl,"DIV",{id:!0,class:!0});var Qa=p(ue);Wt=i(Qa,"DIV",{id:!0,class:!0});var $a=p(Wt);for(let fa=0;fa<K.length;fa+=1)K[fa].l($a);$a.forEach(u),Qa.forEach(u),fl.forEach(u),cl.forEach(u),sl.forEach(u),L.forEach(u),Ke=b(d),ls(de.$$.fragment,d),this.h()},h(){n(y,"class","page-subtitle svelte-b9v0tr"),Oe(C.src,P=s[17])||n(C,"src",P),n(C,"alt","Icon"),n(C,"class","heading-icon svelte-b9v0tr"),Yt(M,"margin-top","10px"),n(A,"class","page-title svelte-b9v0tr"),Yt(At,"margin-top","14px"),n(ct,"class","definition svelte-b9v0tr"),n(g,"class","title-container"),n(c,"class","header-text svelte-b9v0tr"),n(G,"class","aggregation-icon-small svelte-b9v0tr"),Oe(G.src,Jt=va)||n(G,"src",Jt),n(G,"alt","icon"),n(bt,"class","small svelte-b9v0tr"),n(z,"class","waffle-value svelte-b9v0tr"),n(dt,"class","waffle-value-container svelte-b9v0tr"),n(at,"class","waffle-stat svelte-b9v0tr"),n(gt,"class","aggregation-icon-small svelte-b9v0tr"),Oe(gt.src,Ue=ha)||n(gt,"src",Ue),n(gt,"alt","icon"),n(_t,"class","waffle-value svelte-b9v0tr"),n(vt,"class","waffle-value-container svelte-b9v0tr"),n(ft,"class","waffle-stat svelte-b9v0tr"),n(I,"class","aggregation-icon-small svelte-b9v0tr"),Oe(I.src,R=Pn)||n(I,"src",R),n(I,"alt","icon"),n(v,"class","waffle-value-container svelte-b9v0tr"),n(_,"class","waffle-caption svelte-b9v0tr"),n(h,"class","waffle-stat svelte-b9v0tr"),n(lt,"class","waffle-stats svelte-b9v0tr"),n(It,"class","waffle-label svelte-b9v0tr"),n(ut,"class","component-title"),n(Lt,"class","waffle-el"),n(ge,"class","waffle-bg svelte-b9v0tr"),n(U,"class","header-waffle-wrapper svelte-b9v0tr"),n(f,"class","header-content svelte-b9v0tr"),n(o,"class","section header svelte-b9v0tr"),n(Zt,"class","section-header"),n(Qt,"style",s[13]),n(Vt,"class","component-title"),n($t,"class","aggregation-icon-container"),n(_e,"class","plot-bar svelte-b9v0tr"),n(te,"style",s[13]),n(ee,"class","tooltip-term"),n(Et,"class","component-title"),n(le,"class","aggregation-icon-container"),n(Nt,"class","plot-bar svelte-b9v0tr"),n(T,"class","component singlevis"),n(ae,"style",s[13]),n(Mt,"class","component-title"),n(se,"class","description svelte-b9v0tr"),n(ne,"class","aggregation-icon-container2 svelte-b9v0tr"),n(wt,"id","map"),n(wt,"class","svelte-b9v0tr"),n(Q,"class","component column"),n(yt,"id","vis-block"),n(yt,"class","svelte-b9v0tr"),n(Tt,"id","overview"),n(re,"class","section-header"),n(ie,"style",s[13]),n(Bt,"class","component-title"),n(oe,"class","explanation"),n(ce,"class","aggregation-icon-container2 svelte-b9v0tr"),Yt(fe,"margin-bottom","0.8rem"),n(Ot,"class","nation-button svelte-b9v0tr"),n(Ot,"data-nation","S"),Yt(Ot,"background-color",Ae(s[14])[0]),n(Ht,"class","nation-button svelte-b9v0tr"),n(Ht,"data-nation","N"),Yt(Ht,"background-color",Ae(s[14])[1]),n(Ft,"class","nation-button svelte-b9v0tr"),n(Ft,"data-nation","E"),Yt(Ft,"background-color",Ae(s[14])[2]),n(Ut,"class","nation-button svelte-b9v0tr"),n(Ut,"data-nation","W"),Yt(Ut,"background-color",Ae(s[14])[3]),n(zt,"class","reset-button svelte-b9v0tr"),n(H,"class","legend-buttons svelte-b9v0tr"),n($,"id","se-legend"),n($,"class","legend-box svelte-b9v0tr"),n(Rt,"id","se-disclaimer"),n(Rt,"class","disclaimer-box svelte-b9v0tr"),n(nt,"id","se-title"),n(nt,"class","svelte-b9v0tr"),n(Wt,"id","multiple-plots"),n(Wt,"class","svelte-b9v0tr"),n(ue,"id","multiple-comp"),n(ue,"class","svelte-b9v0tr"),n(ht,"id","se-block"),n(ht,"class","component svelte-b9v0tr"),Yt(ht,"margin-left","1rem"),n(Pt,"id","compare"),n(xt,"class","section"),n(a,"class","page-container")},m(d,L){as(t,d,L),F(d,l,L),F(d,a,L),e(a,o),e(o,f),e(f,c),e(c,y),e(c,w),e(c,g),e(g,A),e(A,C),e(A,N),e(A,M),e(A,V),e(A,rt),e(g,ot),e(g,At),e(g,pe),e(g,ct),e(ct,me),e(f,jt),e(f,U),e(U,It),e(It,lt),e(lt,at),e(at,dt),e(dt,G),e(dt,Ie),e(dt,z),Y&&Y.m(z,null),e(z,st),e(z,bt),e(at,Le),Ct.m(at,null),e(lt,xe),e(lt,ft),e(ft,vt),e(vt,gt),e(vt,Te),e(vt,_t),j&&j.m(_t,null),e(ft,Ve),Dt.m(ft,null),e(lt,Ne),e(lt,h),e(h,v),e(v,I),e(v,W),J&&J.m(v,null),e(h,it),e(h,_),e(U,Xt),e(U,ut),e(U,tt),e(U,Lt),s[23](Lt),e(U,be),e(U,ge),s[24](ge),e(a,vl),X&&X.m(a,null),e(a,ze),e(a,xt),e(xt,Tt),e(Tt,Zt),e(Tt,hl),e(Tt,yt),e(yt,T),e(T,Vt),e(Vt,pl),e(Vt,Qt),e(Qt,ml),e(Vt,bl),e(T,gl),St.m(T,null),e(T,Re),e(T,$t),e(T,_l),e(T,_e),s[25](_e),e(T,yl),e(T,El),e(T,wl),e(T,Et),e(Et,Cl),e(Et,te),e(te,Dl),e(Et,Sl),e(Et,ee),e(T,kl),kt.m(T,null),e(T,We),e(T,le),e(T,Al),e(T,Nt),s[26](Nt),e(T,Il),e(T,Ll),e(yt,xl),e(yt,Q),e(Q,Mt),e(Mt,Tl),e(Mt,ae),e(ae,Vl),e(Mt,Nl),e(Q,Ml),e(Q,se),e(Q,Pl),e(Q,ne),e(Q,Bl),Z&&Z.m(Q,null),e(Q,qe),e(Q,wt),s[27](wt),e(xt,Ol),e(xt,Pt),e(Pt,re),e(Pt,Hl),e(Pt,ht),e(ht,nt),e(nt,Bt),e(Bt,Fl),e(Bt,ie),e(ie,Ul),e(Bt,zl),e(nt,Rl),e(nt,oe),e(nt,Wl),e(nt,$),e($,ce),e($,ql),e($,fe),e($,Kl),e($,Gl),e($,Yl),e($,ye),e($,jl),e($,H),e(H,Jl),e(H,Xl),e(H,Ot),e(Ot,Zl),e(H,Ql),e(H,Ht),e(Ht,$l),e(H,ta),e(H,Ft),e(Ft,ea),e(H,la),e(H,Ut),e(Ut,aa),e(H,sa),e(H,na),e(H,ra),e(H,zt),e(nt,ia),e(nt,Rt),e(ht,oa),e(ht,ue),e(ue,Wt);for(let B=0;B<K.length;B+=1)K[B]&&K[B].m(Wt,null);s[29](a),F(d,Ke,L),as(de,d,L),qt=!0,ca||(Ba=Os(zt,"click",s[18]),ca=!0)},p(d,L){if(d[4]?Y?Y.p(d,L):(Y=gs(d),Y.c(),Y.m(z,st)):Y&&(Y.d(1),Y=null),Ge!==(Ge=Oa(d))&&(Ct.d(1),Ct=Ge(d),Ct&&(Ct.c(),Ct.m(at,null))),d[4]?j?j.p(d,L):(j=_s(d),j.c(),j.m(_t,null)):j&&(j.d(1),j=null),Ye!==(Ye=Ha(d))&&(Dt.d(1),Dt=Ye(d),Dt&&(Dt.c(),Dt.m(ft,null))),d[4]?J?J.p(d,L):(J=ys(d),J.c(),J.m(v,null)):J&&(J.d(1),J=null),d[9]?X?X.p(d,L):(X=Es(d),X.c(),X.m(a,ze)):X&&(X.d(1),X=null),(!qt||L[0]&8192)&&n(Qt,"style",d[13]),je!==(je=Fa(d))&&(St.d(1),St=je(d),St&&(St.c(),St.m(T,Re))),(!qt||L[0]&8192)&&n(te,"style",d[13]),Je!==(Je=Ua(d))&&(kt.d(1),kt=Je(d),kt&&(kt.c(),kt.m(T,We))),(!qt||L[0]&8192)&&n(ae,"style",d[13]),d[7]?Z?Z.p(d,L):(Z=Cs(d),Z.c(),Z.m(Q,qe)):Z&&(Z.d(1),Z=null),(!qt||L[0]&8192)&&n(ie,"style",d[13]),L[0]&2){Ee=is(ms);let B;for(B=0;B<Ee.length;B+=1){const ve=bs(d,Ee,B);K[B]?K[B].p(ve,L):(K[B]=Ds(ve),K[B].c(),K[B].m(Wt,null))}for(;B<K.length;B+=1)K[B].d(1);K.length=Ee.length}},i(d){qt||(ss(t.$$.fragment,d),ss(de.$$.fragment,d),qt=!0)},o(d){ns(t.$$.fragment,d),ns(de.$$.fragment,d),qt=!1},d(d){d&&(u(l),u(a),u(Ke)),rs(t,d),Y&&Y.d(),Ct.d(),j&&j.d(),Dt.d(),J&&J.d(),s[23](null),s[24](null),X&&X.d(),St.d(),s[25](null),kt.d(),s[26](null),Z&&Z.d(),s[27](null),Hs(K,d),s[29](null),rs(de,d),ca=!1,Ba()}}}let ke=400;function Ss(s){return{overview:"Overview",compare:"Compare by socio-economic factor"}[s]||""}function nr(s,t,l){let a,o,f,c,y,E={},{data:w}=t;const g=w.coBenefit,A=hs.find(h=>h.id===g)?.label??g,C=En.find(h=>h.id===g)?.def??g;let P,N,M,V,rt,ot,At,pe,ct=!1,me,jt,U;Ie().then(()=>{let h=JSON.parse(JSON.stringify(Be(g)));h.shift(),h=h.reverse(),l(7,jt=new yn(N,"LAD",U,"total",!0,"LAD",!1,h)),jt.initMap()});let It=wn(g),lt=!1,at="";const dt=["overview","compare"];let G=null;function Jt(){const h=window.scrollY;l(9,lt=h>250);for(const v of dt){const I=document.getElementById(v);if(!I)continue;const R=I.getBoundingClientRect();if(R.top<=150&&R.bottom>=150){at!==v&&_n.capture("section entered (coben)",{section_name:v}),l(10,at=v);break}}}ts(()=>(window.addEventListener("scroll",Jt),Jt(),()=>window.removeEventListener("scroll",Jt))),Fs(()=>{window.removeEventListener("scroll",Jt)});async function Ie(){P=await Se(Ln(g)),M=await Se(xn(g)),rt=await Se(Tn()),rt=rt.sort((v,I)=>I.total-v.total),ot=await Se(Vn()),ot=ot.sort((v,I)=>I.total_value-v.total_value);const h=ot.find(v=>v.co_benefit_type===g);l(6,me=h?h.value_per_capita:null),N=await Se(Nn(g)),console.log("data",N),At=await Se(Mn()),l(5,pe=At[0].total_value),ps.forEach(v=>{M[v]=+M[v]}),l(4,V=hn(P,v=>v.total/1e3).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),l(20,ct=!0)}let z,st;function bt(h,v){if(!z)return;const I=20,R=15,W=Math.floor(200/I),it=R*W,_=rt.reduce((D,tt)=>D+tt.total,0),q=[];for(const D of rt){const tt=Math.round(Math.abs(D.total)/_*it),Lt=D.total<0;for(let be=0;be<tt;be++)q.push({type:D.co_benefit_type,negative:Lt})}for(;q.length<it;)q.push({type:"empty"});q.sort((D,tt)=>D.type==="empty"?1:tt.type==="empty"?-1:D.negative&&!tt.negative?1:!D.negative&&tt.negative?-1:0);const Xt=q.map((D,tt)=>({x:tt%R,y:Math.floor(tt/R),...D})),ut=Pe({width:I*R,height:I*W,margin:0,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:hs.map(D=>D.id),range:kn,unknown:"#eee",legend:!1},marks:[ds(Xt.filter(D=>!D.negative),{x:D=>D.x*I,y:D=>D.y*I,fill:"type",fillOpacity:D=>v&&D.type!==v?.15:1}),ds(Xt.filter(D=>D.negative),{x:D=>D.x*I,y:D=>D.y*I,stroke:"type",strokeOpacity:D=>v&&D.type!==v?.15:1,strokeWidth:1,fill:"none"})]});st&&(l(12,st.style.width=`${I*R}px`,st),l(12,st.style.height=`${h-100}px`,st)),l(11,z.innerHTML="",z),z.append(ut)}function Fe(){c?.append(Pe({height:ke/1.5,...An,marginLeft:90,marginTop:40,marginRight:40,y:{label:"Number of Datazones",grid:!0},x:{label:"Total co-benefit value (£, billion)",labelArrow:"none",labelAnchor:"center"},style:{fontSize:"15px"},marks:[bn(N,Hn({y:"count"},{x:h=>h.total*1e3,fill:Be(g)[0],tip:!0,fillOpacity:.5,stroke:Be(g)[0],strokeWidth:2})),vs({anchor:"left",label:"Number of datazones",labelArrow:"none",labelAnchor:"center"}),dl([0],{stroke:"#333",strokeWidth:.75})]}))}function Le(){let h=P.flatMap(v=>Cn.map(I=>({time:I,value:v[I],total:v.total,scenario:v.scenario})));y?.append(Pe({height:ke/1.5,marginLeft:80,marginRight:40,marginBottom:60,marginTop:40,style:{fontSize:"15px"},x:{type:"band",tickFormat:v=>v.replace(/^Y/,"").replace("_","-"),label:"Year Intervals"},y:{grid:!0,label:"Total (£, billion)"},marks:[xs(h,Ls({y:"sum"},{x:"time",y:v=>v.value/1e3,fill:Be(g)[0],tip:{format:{y:v=>`${v.toFixed(2)}`,x:!1}},fillOpacity:.8,insetLeft:15,insetRight:15})),vs({anchor:"left",grid:!0,label:"Total co-benefit value (£, billion)",labelArrow:"none",labelAnchor:"center"}),dl([0],{stroke:"#333",strokeWidth:.75})]}))}function xe(){const h=v=>v.LAD.startsWith("S")?"S":v.LAD.startsWith("N")?"N":v.LAD.startsWith("E")?"E":"W";ps.forEach((v,I)=>{let R;if(Dn.includes(v)){const W=In[v],it=W?Object.keys(W).map(Number):N.filter(_=>_.SEFMAME==v).map(_=>_.SE);R=Pe({style:{fontSize:"14px",textAnchor:"middle",fill:"#333"},height:ke/1.4,width:ke*1.2,marginLeft:70,marginBottom:v==="Typology"?80:60,marginRight:20,marginTop:30,x:{domain:it,label:da(v),tickFormat:_=>W?.[_]??_,tickRotate:v==="Typology"?-20:0},y:{label:"£, thousand",labelArrow:"none"},color:{legend:!0},marks:[jn(N.filter(_=>_.SEFMAME==v),{x:"SE",y:_=>_.total*1e3,r:1.8,fillOpacity:.7,fill:Sn(g)}),dl([0],{stroke:"#333",strokeWidth:.75})]})}else{let W=N.filter(_=>_.SEFMAME===v&&(G===null||h(_)==G)),it=W.reduce(function(_,q){return _.SE<q.SE?_:q});R=Pe({style:{fontSize:"14px",textAnchor:"middle",fill:"#333"},height:ke/1.4,width:ke*1.2,marginLeft:70,marginBottom:60,marginRight:20,marginTop:30,x:{label:da(v),labelArrow:!1,labelAnchor:"center"},y:{label:"£, thousand",labelArrow:!1},color:{legend:!0},marks:[I==6?fs(["Each dot represents a Local Authority District (LAD)."],{x:["Under_35","Over_65","Unemployment"].includes(v)?it.SE*100:it.SE,y:it.total*1e3,textPadding:6,opacity:.5,lineWidth:12}):[],ma(W,{x:_=>["Under_35","Over_65","Unemployment"].includes(v)?_.SE*100:_.SE,y:_=>_.total*1e3,fill:_=>{const q=["S","N","E","W"].indexOf(h(_));return Ae(g)[q]},r:2,fillOpacity:.1,channels:{LAD:"LAD"}}),ma(W,{x:_=>["Under_35","Over_65","Unemployment"].includes(v)?_.SE*100:_.SE,y:_=>_.total*1e3,fill:_=>{const q=["S","N","E","W"].indexOf(h(_));return Ae(g)[q]},r:3.5,fillOpacity:1}),pn({label:da(v),labelArrow:!1,labelAnchor:"center"}),dl([0],{stroke:"#333",strokeWidth:.75}),As([0],{stroke:"#333",strokeWidth:.75}),fs(W,mn({x:_=>["Under_35","Over_65","Unemployment"].includes(v)?_.SE*100:_.SE,y:_=>_.total*1e3,title:_=>[`LAD: ${_.LAD}`,"Click to navigate to page."].join(`
`)}))]}),console.log(us(R).select('g[aria-label="dot"]').selectAll("circle")),us(R).selectAll('g[aria-label="dot"]').selectAll("circle").style("cursor","pointer").on("click",(_,q,Xt)=>{let ut=W[q].LAD;window.open(`${gn}/location?location=${ut}`,"_blank").focus()})}E[v]?.append(R)})}function ft(){l(21,G=null)}ts(()=>{document.querySelectorAll(".nation-button").forEach(h=>{h.addEventListener("click",()=>{const v=h.getAttribute("data-nation");G===v?(l(21,G=null),h.classList.remove("active")):(l(21,G=v),document.querySelectorAll(".nation-button").forEach(I=>I.classList.remove("active")),h.classList.add("active"))})})});function vt(h){he[h?"unshift":"push"](()=>{z=h,l(11,z)})}function gt(h){he[h?"unshift":"push"](()=>{st=h,l(12,st)})}function Ue(h){he[h?"unshift":"push"](()=>{y=h,l(0,y)})}function Te(h){he[h?"unshift":"push"](()=>{c=h,l(3,c)})}function _t(h){he[h?"unshift":"push"](()=>{U=h,l(8,U)})}function Ve(h,v){he[h?"unshift":"push"](()=>{E[v.id]=h,l(1,E)})}function Ne(h){he[h?"unshift":"push"](()=>{f=h,l(2,f)})}return s.$$set=h=>{"data"in h&&l(19,w=h.data)},s.$$.update=()=>{s.$$.dirty[0]&1048577&&ct&&(y?.firstChild?.remove(),Fe(),Le(),bt(300,g)),s.$$.dirty[0]&3145730&&ct&&G!==void 0&&(Object.values(E).forEach(h=>{h.firstChild?.remove()}),xe()),s.$$.dirty[0]&4194304&&l(13,o=`color: ${a}; font-weight: bold; font-size: 22px;`)},l(22,a=Be(g)[0]),[y,E,f,c,V,pe,me,jt,U,lt,at,z,st,o,g,A,C,It,ft,w,ct,G,a,vt,gt,Ue,Te,_t,Ve,Ne]}class wr extends Rs{constructor(t){super(),Ws(this,t,nr,sr,Bs,{data:19},null,[-1,-1])}}export{wr as component};
