import{s as xl,a as k,e as f,t as D,g as E,c as d,b as m,p as te,d as L,f as o,q as u,B as be,i as V,h as i,y as Hl,j as Ae,w as pl,r as Ul,G as Gl,n as He,H as Wl,E as zl,C as jl,A as Le}from"../chunks/scheduler.DxTP-Qzi.js";import{S as ql,i as Yl,c as vl,b as _l,m as ml,t as gl,a as bl,d as yl}from"../chunks/index.CDFQmUj4.js";import{N as Jl,e as St}from"../chunks/NavigationBar.YjIgI8Y7.js";import"../chunks/transform.BNP73y-7.js";import{aM as Kl,ao as Jt,ap as Xl,t as kl,at as Ql,H as El,aN as Dl,aO as Zl,aP as $l,G as Ll,I as We,W as ea,J as ot,L as ct,N as ta,O as wt,K as Vt}from"../chunks/index.BLoJmirk.js";import{f as Kt}from"../chunks/module.BDHLYmQ2.js";import{b as la}from"../chunks/paths.DUL3tRBr.js";import{M as aa}from"../chunks/mapUK.DH85_Ksa.js";import{l as sa,m as ia,n as ra,o as na,p as oa,q as ca,a as Al,e as ft,g as ua,S as Fe,s as It,t as Xt,d as fa}from"../chunks/globals.1IBIOW7t.js";import{g as ut,i as da,h as ha,x as pa,y as va,s as _a}from"../chunks/duckdb.-XNuYltr.js";import{p as Ct}from"../chunks/per_capita.COcMrZFY.js";import{F as ma}from"../chunks/Footer.D48Tbyji.js";import{n as ga}from"../chunks/nice.DHxIpIBp.js";import{t as ba,b as ya}from"../chunks/bin.vDT_EE8z.js";import{a as ka}from"../chunks/bar.CuW7nKQD.js";import{d as Tt}from"../chunks/dot.pNaywhZp.js";var Ea=Array.prototype,Da=Ea.slice;function Qt(l){return()=>l}function Sl(){var l=Kl,t=Jt,e=ba;function a(r){Array.isArray(r)||(r=Array.from(r));var s,c=r.length,v,p,_=new Array(c);for(s=0;s<c;++s)_[s]=l(r[s],s,r);var A=t(_),y=A[0],b=A[1],w=e(_,y,b);if(!Array.isArray(w)){const g=b,I=+w;if(t===Jt&&([y,b]=ga(y,b,I)),w=Xl(y,b,I),w[0]<=y&&(p=kl(y,b,I)),w[w.length-1]>=b)if(g>=b&&t===Jt){const M=kl(y,b,I);isFinite(M)&&(M>0?b=(Math.floor(b/M)+1)*M:M<0&&(b=(Math.ceil(b*-M)+1)/-M))}else w.pop()}for(var H=w.length,P=0,R=H;w[P]<=y;)++P;for(;w[R-1]>b;)--R;(P||R<H)&&(w=w.slice(P,R),H=R-P);var N=new Array(H+1),F;for(s=0;s<=H;++s)F=N[s]=[],F.x0=s>0?w[s-1]:y,F.x1=s<H?w[s]:b;if(isFinite(p)){if(p>0)for(s=0;s<c;++s)(v=_[s])!=null&&y<=v&&v<=b&&N[Math.min(H,Math.floor((v-y)/p))].push(r[s]);else if(p<0){for(s=0;s<c;++s)if((v=_[s])!=null&&y<=v&&v<=b){const g=Math.floor((y-v)*p);N[Math.min(H,g+(w[g]<=v))].push(r[s])}}}else for(s=0;s<c;++s)(v=_[s])!=null&&y<=v&&v<=b&&N[Ql(w,v,0,H)].push(r[s]);return N}return a.value=function(r){return arguments.length?(l=typeof r=="function"?r:Qt(r),a):l},a.domain=function(r){return arguments.length?(t=typeof r=="function"?r:Qt([r[0],r[1]]),a):t},a.thresholds=function(r){return arguments.length?(e=typeof r=="function"?r:Qt(Array.isArray(r)?Da.call(r):r),a):e},a}const La=""+new URL("../assets/negative.BhphYhmj.png",import.meta.url).href;function wl(l,t,e){const a=l.slice();return a[68]=t[e],a[69]=t,a[70]=e,a}function Vl(l,t,e){const a=l.slice();return a[68]=t[e],a}function Aa(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(e,a){V(e,t,a),l[38](t)},p:He,d(e){e&&o(t),l[38](null)}}}function Sa(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(e,a){V(e,t,a),l[37](t)},p:He,d(e){e&&o(t),l[37](null)}}}function wa(l){let t,e,a=Se(l[12],l[24])+"",r,s,c,v;return{c(){t=D("Max value: "),e=f("strong"),r=D(a),s=D("("),c=D(l[14]),v=D(")")},l(p){t=L(p,"Max value: "),e=d(p,"STRONG",{});var _=m(e);r=L(_,a),_.forEach(o),s=L(p,"("),c=L(p,l[14]),v=L(p,")")},m(p,_){V(p,t,_),V(p,e,_),i(e,r),V(p,s,_),V(p,c,_),V(p,v,_)},p(p,_){_[0]&4096&&a!==(a=Se(p[12],p[24])+"")&&Ae(r,a),_[0]&16384&&Ae(c,p[14])},d(p){p&&(o(t),o(e),o(s),o(c),o(v))}}}function Va(l){let t;return{c(){t=D("-")},l(e){t=L(e,"-")},m(e,a){V(e,t,a)},p:He,d(e){e&&o(t)}}}function Ia(l){let t,e,a=Se(l[10],l[24])+"",r;return{c(){t=D("Average value: "),e=f("strong"),r=D(a),this.h()},l(s){t=L(s,"Average value: "),e=d(s,"STRONG",{style:!0});var c=m(e);r=L(c,a),c.forEach(o),this.h()},h(){be(e,"color","#BD210E")},m(s,c){V(s,t,c),V(s,e,c),i(e,r)},p(s,c){c[0]&1024&&a!==(a=Se(s[10],s[24])+"")&&Ae(r,a)},d(s){s&&(o(t),o(e))}}}function Ta(l){let t,e,a=Se(l[11],l[24])+"",r;return{c(){t=D("Most common category: "),e=f("strong"),r=D(a),this.h()},l(s){t=L(s,"Most common category: "),e=d(s,"STRONG",{style:!0});var c=m(e);r=L(c,a),c.forEach(o),this.h()},h(){be(e,"color","#BD210E")},m(s,c){V(s,t,c),V(s,e,c),i(e,r)},p(s,c){c[0]&2048&&a!==(a=Se(s[11],s[24])+"")&&Ae(r,a)},d(s){s&&(o(t),o(e))}}}function Ca(l){let t,e,a=Se(l[13],l[24])+"",r,s,c,v;return{c(){t=D("Min value: "),e=f("strong"),r=D(a),s=D("("),c=D(l[15]),v=D(")")},l(p){t=L(p,"Min value: "),e=d(p,"STRONG",{});var _=m(e);r=L(_,a),_.forEach(o),s=L(p,"("),c=L(p,l[15]),v=L(p,")")},m(p,_){V(p,t,_),V(p,e,_),i(e,r),V(p,s,_),V(p,c,_),V(p,v,_)},p(p,_){_[0]&8192&&a!==(a=Se(p[13],p[24])+"")&&Ae(r,a),_[0]&32768&&Ae(c,p[15])},d(p){p&&(o(t),o(e),o(s),o(c),o(v))}}}function Ma(l){let t;return{c(){t=D("-")},l(e){t=L(e,"-")},m(e,a){V(e,t,a)},p:He,d(e){e&&o(t)}}}function Il(l){let t,e,a,r,s;return{c(){t=f("div"),e=f("div"),a=f("span"),r=D(l[21]),s=D(" >>"),this.h()},l(c){t=d(c,"DIV",{class:!0});var v=m(t);e=d(v,"DIV",{class:!0});var p=m(e);a=d(p,"SPAN",{class:!0});var _=m(a);r=L(_,l[21]),s=L(_," >>"),_.forEach(o),p.forEach(o),v.forEach(o),this.h()},h(){u(a,"class","mini-header-text"),u(e,"class","mini-header-content"),u(t,"class","mini-header")},m(c,v){V(c,t,v),i(t,e),i(e,a),i(a,r),i(a,s)},p:He,d(c){c&&o(t)}}}function Fa(l){let t;return{c(){t=D("LSOA.")},l(e){t=L(e,"LSOA.")},m(e,a){V(e,t,a)},d(e){e&&o(t)}}}function Ha(l){let t;return{c(){t=D("LAD.")},l(e){t=L(e,"LAD.")},m(e,a){V(e,t,a)},d(e){e&&o(t)}}}function Pa(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(e,a){V(e,t,a),l[40](t)},p:He,d(e){e&&o(t),l[40](null)}}}function Na(l){let t;return{c(){t=f("div"),this.h()},l(e){t=d(e,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(e,a){V(e,t,a),l[39](t)},p:He,d(e){e&&o(t),l[39](null)}}}function Tl(l){let t,e,a=l[16].legend(l[25]).outerHTML+"";return{c(){t=f("div"),e=new Wl(!1),this.h()},l(r){t=d(r,"DIV",{id:!0});var s=m(t);e=zl(s,!1),s.forEach(o),this.h()},h(){e.a=null,u(t,"id","legend")},m(r,s){V(r,t,s),e.m(a,t)},p(r,s){s[0]&65536&&a!==(a=r[16].legend(r[25]).outerHTML+"")&&e.p(a)},d(r){r&&o(t)}}}function Cl(l){let t,e,a,r,s=l[68].def+"",c,v,p,_,A,y,b,w="here",H,P,R=l[68].id.toLowerCase()+"",N,F,g;return{c(){t=f("div"),e=f("div"),a=f("div"),r=k(),c=D(s),v=k(),p=f("br"),_=k(),A=f("div"),y=D("Click "),b=f("a"),b.textContent=w,H=D(` for the \r
                                `),P=f("span"),N=D(R),F=k(),g=D("report page."),this.h()},l(I){t=d(I,"DIV",{class:!0});var M=m(t);e=d(M,"DIV",{class:!0});var B=m(e);a=d(B,"DIV",{style:!0}),m(a).forEach(o),r=E(B),c=L(B,s),v=E(B),p=d(B,"BR",{}),_=E(B),A=d(B,"DIV",{class:!0});var q=m(A);y=L(q,"Click "),b=d(q,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0,"data-svelte-h":!0}),te(b)!=="svelte-gjrxnt"&&(b.textContent=w),H=L(q,` for the \r
                                `),P=d(q,"SPAN",{style:!0});var U=m(P);N=L(U,R),F=E(U),U.forEach(o),g=L(q,"report page."),q.forEach(o),B.forEach(o),M.forEach(o),this.h()},h(){be(a,"height","0.8em"),u(b,"class","link"),u(b,"href",la+"/cobenefit?cobenefit="+l[68].id),u(b,"target","_blank"),u(b,"rel","noopener noreferrer"),be(b,"color",ft(l[68].id)),be(P,"color",ft(l[68].id)),u(A,"class","link-box svelte-10c07ly"),u(e,"class","legend-description svelte-10c07ly"),u(t,"class","legend-description-box svelte-10c07ly")},m(I,M){V(I,t,M),i(t,e),i(e,a),i(e,r),i(e,c),i(e,v),i(e,p),i(e,_),i(e,A),i(A,y),i(A,b),i(A,H),i(A,P),i(P,N),i(P,F),i(A,g)},d(I){I&&o(t)}}}function Ml(l){let t,e,a,r,s,c=l[68].label+"",v,p,_,A,y=l[19].has(l[68].id)?"▲":"▼",b,w,H=l[19].has(l[68].id),P,R,N;function F(){return l[42](l[68])}let g=H&&Cl(l);return{c(){t=f("div"),e=f("div"),a=f("span"),r=k(),s=f("span"),v=D(c),_=k(),A=f("span"),b=D(y),w=k(),g&&g.c(),P=k(),this.h()},l(I){t=d(I,"DIV",{class:!0});var M=m(t);e=d(M,"DIV",{class:!0,style:!0});var B=m(e);a=d(B,"SPAN",{class:!0,style:!0}),m(a).forEach(o),r=E(B),s=d(B,"SPAN",{class:!0});var q=m(s);v=L(q,c),q.forEach(o),_=E(B),A=d(B,"SPAN",{class:!0});var U=m(A);b=L(U,y),U.forEach(o),B.forEach(o),w=E(M),g&&g.l(M),P=E(M),M.forEach(o),this.h()},h(){u(a,"class","legend-color svelte-10c07ly"),be(a,"background-color",ft(l[68].id)),u(s,"class",p="legend-text "+(l[19].has(l[68].id)?"expanded":"")+" svelte-10c07ly"),u(A,"class","toggle-icon svelte-10c07ly"),u(e,"class","legend-header svelte-10c07ly"),be(e,"cursor","pointer"),u(t,"class","legend-item svelte-10c07ly")},m(I,M){V(I,t,M),i(t,e),i(e,a),i(e,r),i(e,s),i(s,v),i(e,_),i(e,A),i(A,b),i(t,w),g&&g.m(t,null),i(t,P),R||(N=Hl(e,"click",F),R=!0)},p(I,M){l=I,M[0]&524288&&p!==(p="legend-text "+(l[19].has(l[68].id)?"expanded":"")+" svelte-10c07ly")&&u(s,"class",p),M[0]&524288&&y!==(y=l[19].has(l[68].id)?"▲":"▼")&&Ae(b,y),M[0]&524288&&(H=l[19].has(l[68].id)),H?g||(g=Cl(l),g.c(),g.m(t,P)):g&&(g.d(1),g=null)},d(I){I&&o(t),g&&g.d(),R=!1,N()}}}function Oa(l){let t,e=`<img class="sm-icon svelte-10c07ly" src="${Ct}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each area.</span>`;return{c(){t=f("div"),t.innerHTML=e,this.h()},l(a){t=d(a,"DIV",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-1lqh0bd"&&(t.innerHTML=e),this.h()},h(){u(t,"class","tooltip-wrapper")},m(a,r){V(a,t,r)},d(a){a&&o(t)}}}function Ba(l){let t,e=`<img class="sm-icon svelte-10c07ly" src="${Ct}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. show the cost/benefit per person in each area.</span>`,a,r,s=`<img class="sm-icon svelte-10c07ly" src="${La}" alt="icon"/> <span class="tooltip-text-neg svelte-10c07ly">This chart includes negative values.</span>`;return{c(){t=f("div"),t.innerHTML=e,a=k(),r=f("div"),r.innerHTML=s,this.h()},l(c){t=d(c,"DIV",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-1tqucbd"&&(t.innerHTML=e),a=E(c),r=d(c,"DIV",{class:!0,"data-svelte-h":!0}),te(r)!=="svelte-10ijo5a"&&(r.innerHTML=s),this.h()},h(){u(t,"class","tooltip-wrapper"),u(r,"class","tooltip-wrapper")},m(c,v){V(c,t,v),V(c,a,v),V(c,r,v)},d(c){c&&(o(t),o(a),o(r))}}}function Ra(l){let t,e=l[68];const a=()=>l[44](t,e),r=()=>l[44](null,e);return{c(){t=f("div"),this.h()},l(s){t=d(s,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(s,c){V(s,t,c),a()},p(s,c){l=s,e!==l[68]&&(r(),e=l[68],a())},d(s){s&&o(t),r()}}}function xa(l){let t,e=l[68];const a=()=>l[43](t,e),r=()=>l[43](null,e);return{c(){t=f("div"),this.h()},l(s){t=d(s,"DIV",{class:!0}),m(t).forEach(o),this.h()},h(){u(t,"class","plot svelte-10c07ly")},m(s,c){V(s,t,c),a()},p(s,c){l=s,e!==l[68]&&(r(),e=l[68],a())},d(s){s&&o(t),r()}}}function Fl(l){let t,e,a,r,s,c,v=l[68].label+"",p,_,A,y;function b(F,g){return F[68].id=="Hassle costs"||F[68].id=="Road repairs"||F[68].id=="Road safety"||F[68].id=="Congestion"||F[68].id=="Excess heat"?Ba:Oa}let H=b(l)(l);function P(F,g){return Fe.includes(F[20])?xa:Ra}let N=P(l)(l);return{c(){t=f("div"),e=f("div"),a=f("img"),s=k(),c=f("h3"),p=D(v),_=k(),H.c(),A=k(),N.c(),y=k(),this.h()},l(F){t=d(F,"DIV",{class:!0});var g=m(t);e=d(g,"DIV",{class:!0});var I=m(e);a=d(I,"IMG",{class:!0,src:!0,alt:!0}),s=E(I),c=d(I,"H3",{class:!0});var M=m(c);p=L(M,v),M.forEach(o),_=E(I),H.l(I),I.forEach(o),A=E(g),N.l(g),y=E(g),g.forEach(o),this.h()},h(){u(a,"class","sm-cb-icon svelte-10c07ly"),jl(a.src,r=ua(l[68].id))||u(a,"src",r),u(a,"alt",l[68].label+" icon"),u(c,"class","chart-component-title"),u(e,"class","component-chart-title-container svelte-10c07ly"),u(t,"class","plot-container svelte-10c07ly")},m(F,g){V(F,t,g),i(t,e),i(e,a),i(e,s),i(e,c),i(c,p),i(e,_),H.m(e,null),i(t,A),N.m(t,null),i(t,y)},p(F,g){N.p(F,g)},d(F){F&&o(t),H.d(),N.d()}}}function Ua(l){let t,e,a,r,s,c,v,p="Socio-Economic Factor Report",_,A,y,b,w,H,P,R,N,F,g,I,M,B,q,U,Pe,Z,ie=l[3]?"Switch to LAD level data":"Switch to LSOA level data",de,we,x,X,ne,he,dt='<p class="section-subtitle svelte-10c07ly">Overview</p>',ze,G,Y,le,Ne,Oe,je,$,qe,re,oe,ht=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Ct}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each area.</span></div>`,Ye,Je,W,pe,Ke,Xe,Qe,ve,pt="Scroll for zooming in and out.",Ze,_e,vt=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${Ct}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each area.</span></div>`,$e,Be,me,n,T,O,et='<p class="section-subtitle svelte-10c07ly">By Co-benefits</p>',_t,ce,Q,ye,Mt,Zt=l[21].toLowerCase()+"",Ft,Ht,Pt,Ve,$t="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",Nt,Ot,Bt,ee,Re,el="Co-benefits:",Rt,xt,tt,Ut,Gt,ke,tl='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',Wt,Ie,Ee,mt,Te,lt,zt,ll;t=new Jl({});function Pl(h,C){return Fe.includes(h[20])?Sa:Aa}let at=Pl(l)(l);function Nl(h,C){return Fe.includes(h[20])?Va:wa}let st=Nl(l)(l);function Ol(h,C){return Fe.includes(h[20])?Ta:Ia}let it=Ol(l)(l);function Bl(h,C){return Fe.includes(h[20])?Ma:Ca}let rt=Bl(l)(l),J=l[18]&&Il(l);function al(h,C){return h[4]==h[2]?Ha:Fa}let gt=al(l),ge=gt(l);function Rl(h,C){return Fe.includes(h[20])?Na:Pa}let nt=Rl(l)(l),K=l[16]&&Tl(l),xe=St(It),z=[];for(let h=0;h<xe.length;h+=1)z[h]=Ml(Vl(l,xe,h));let Ue=St(It),j=[];for(let h=0;h<Ue.length;h+=1)j[h]=Fl(wl(l,Ue,h));return Te=new ma({}),{c(){vl(t.$$.fragment),e=k(),a=f("div"),r=f("div"),s=f("div"),c=f("div"),v=f("p"),v.textContent=p,_=k(),A=f("div"),y=f("h1"),b=D(l[23]),w=k(),H=f("p"),P=D(l[22]),R=k(),N=f("div"),at.c(),F=k(),g=f("div"),I=f("p"),st.c(),M=k(),B=f("p"),it.c(),q=k(),U=f("p"),rt.c(),Pe=k(),Z=f("button"),de=D(ie),we=k(),J&&J.c(),x=k(),X=f("div"),ne=f("div"),he=f("div"),he.innerHTML=dt,ze=k(),G=f("div"),Y=f("div"),le=f("h3"),Ne=D(l[21]),Oe=D(" against per capita co-benefit values (£, thousand)"),je=k(),$=f("p"),qe=D(`Each point in the chart below represents a UK \r
                        `),ge.c(),re=k(),oe=f("div"),oe.innerHTML=ht,Ye=k(),nt.c(),Je=k(),W=f("div"),pe=f("h3"),Ke=D(l[21]),Xe=D(" at LSOA level"),Qe=k(),ve=f("p"),ve.textContent=pt,Ze=k(),_e=f("div"),_e.innerHTML=vt,$e=k(),K&&K.c(),Be=k(),me=f("div"),n=k(),T=f("div"),O=f("div"),O.innerHTML=et,_t=k(),ce=f("div"),Q=f("div"),ye=f("h3"),Mt=D(`Plotting \r
                    \r
                    `),Ft=D(Zt),Ht=D(`\r
                \r
                against the gain/loss (£, thousand) per capita for each co-benefit`),Pt=k(),Ve=f("p"),Ve.textContent=$t,Nt=k(),Ot=f("br"),Bt=k(),ee=f("div"),Re=f("strong"),Re.textContent=el,Rt=f("br"),xt=D(`Expand for detailed explanation\r
                    `),tt=f("div"),Ut=k();for(let h=0;h<z.length;h+=1)z[h].c();Gt=k(),ke=f("div"),ke.innerHTML=tl,Wt=k(),Ie=f("div"),Ee=f("div");for(let h=0;h<j.length;h+=1)j[h].c();mt=k(),vl(Te.$$.fragment),this.h()},l(h){_l(t.$$.fragment,h),e=E(h),a=d(h,"DIV",{class:!0});var C=m(a);r=d(C,"DIV",{class:!0});var S=m(r);s=d(S,"DIV",{class:!0});var ae=m(s);c=d(ae,"DIV",{class:!0});var bt=m(c);v=d(bt,"P",{class:!0,"data-svelte-h":!0}),te(v)!=="svelte-16ymxs7"&&(v.textContent=p),_=E(bt),A=d(bt,"DIV",{class:!0});var yt=m(A);y=d(yt,"H1",{class:!0});var sl=m(y);b=L(sl,l[23]),sl.forEach(o),w=E(yt),H=d(yt,"P",{class:!0});var il=m(H);P=L(il,l[22]),il.forEach(o),yt.forEach(o),bt.forEach(o),R=E(ae),N=d(ae,"DIV",{class:!0});var rl=m(N);at.l(rl),rl.forEach(o),F=E(ae),g=d(ae,"DIV",{class:!0});var Ge=m(g);I=d(Ge,"P",{class:!0});var nl=m(I);st.l(nl),nl.forEach(o),M=E(Ge),B=d(Ge,"P",{class:!0});var ol=m(B);it.l(ol),ol.forEach(o),q=E(Ge),U=d(Ge,"P",{class:!0});var cl=m(U);rt.l(cl),cl.forEach(o),Ge.forEach(o),ae.forEach(o),S.forEach(o),Pe=E(C),Z=d(C,"BUTTON",{});var ul=m(Z);de=L(ul,ie),ul.forEach(o),we=E(C),J&&J.l(C),x=E(C),X=d(C,"DIV",{class:!0});var fl=m(X);ne=d(fl,"DIV",{id:!0});var kt=m(ne);he=d(kt,"DIV",{class:!0,"data-svelte-h":!0}),te(he)!=="svelte-ll1i43"&&(he.innerHTML=dt),ze=E(kt),G=d(kt,"DIV",{id:!0,class:!0});var Et=m(G);Y=d(Et,"DIV",{class:!0});var De=m(Y);le=d(De,"H3",{class:!0});var jt=m(le);Ne=L(jt,l[21]),Oe=L(jt," against per capita co-benefit values (£, thousand)"),jt.forEach(o),je=E(De),$=d(De,"P",{class:!0});var qt=m($);qe=L(qt,`Each point in the chart below represents a UK \r
                        `),ge.l(qt),qt.forEach(o),re=E(De),oe=d(De,"DIV",{class:!0,"data-svelte-h":!0}),te(oe)!=="svelte-tg5ofw"&&(oe.innerHTML=ht),Ye=E(De),nt.l(De),De.forEach(o),Je=E(Et),W=d(Et,"DIV",{class:!0});var ue=m(W);pe=d(ue,"H3",{class:!0});var Yt=m(pe);Ke=L(Yt,l[21]),Xe=L(Yt," at LSOA level"),Yt.forEach(o),Qe=E(ue),ve=d(ue,"P",{class:!0,"data-svelte-h":!0}),te(ve)!=="svelte-1ask2se"&&(ve.textContent=pt),Ze=E(ue),_e=d(ue,"DIV",{class:!0,"data-svelte-h":!0}),te(_e)!=="svelte-7b2hds"&&(_e.innerHTML=vt),$e=E(ue),K&&K.l(ue),Be=E(ue),me=d(ue,"DIV",{id:!0,class:!0}),m(me).forEach(o),ue.forEach(o),Et.forEach(o),kt.forEach(o),fl.forEach(o),n=E(C),T=d(C,"DIV",{id:!0});var Dt=m(T);O=d(Dt,"DIV",{class:!0,"data-svelte-h":!0}),te(O)!=="svelte-1av3fse"&&(O.innerHTML=et),_t=E(Dt),ce=d(Dt,"DIV",{id:!0,class:!0,style:!0});var Lt=m(ce);Q=d(Lt,"DIV",{id:!0,class:!0});var fe=m(Q);ye=d(fe,"H3",{class:!0});var At=m(ye);Mt=L(At,`Plotting \r
                    \r
                    `),Ft=L(At,Zt),Ht=L(At,`\r
                \r
                against the gain/loss (£, thousand) per capita for each co-benefit`),At.forEach(o),Pt=E(fe),Ve=d(fe,"P",{class:!0,"data-svelte-h":!0}),te(Ve)!=="svelte-1h97e3k"&&(Ve.textContent=$t),Nt=E(fe),Ot=d(fe,"BR",{}),Bt=E(fe),ee=d(fe,"DIV",{id:!0,class:!0});var Ce=m(ee);Re=d(Ce,"STRONG",{"data-svelte-h":!0}),te(Re)!=="svelte-1qu96kx"&&(Re.textContent=el),Rt=d(Ce,"BR",{}),xt=L(Ce,`Expand for detailed explanation\r
                    `),tt=d(Ce,"DIV",{style:!0}),m(tt).forEach(o),Ut=E(Ce);for(let Me=0;Me<z.length;Me+=1)z[Me].l(Ce);Ce.forEach(o),Gt=E(fe),ke=d(fe,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),te(ke)!=="svelte-11g4vkg"&&(ke.innerHTML=tl),fe.forEach(o),Wt=E(Lt),Ie=d(Lt,"DIV",{id:!0,class:!0});var dl=m(Ie);Ee=d(dl,"DIV",{id:!0,class:!0});var hl=m(Ee);for(let Me=0;Me<j.length;Me+=1)j[Me].l(hl);hl.forEach(o),dl.forEach(o),Lt.forEach(o),Dt.forEach(o),C.forEach(o),mt=E(h),_l(Te.$$.fragment,h),this.h()},h(){u(v,"class","page-subtitle svelte-10c07ly"),u(y,"class","page-title svelte-10c07ly"),u(H,"class","definition"),u(A,"class","title-container"),u(c,"class","header-text svelte-10c07ly"),u(N,"class","header-vis svelte-10c07ly"),u(I,"class","definition-stat svelte-10c07ly"),u(B,"class","definition-stat svelte-10c07ly"),u(U,"class","definition-stat svelte-10c07ly"),u(g,"class","header-stats svelte-10c07ly"),u(s,"class","header-content svelte-10c07ly"),u(r,"class","section header svelte-10c07ly"),u(he,"class","section-header"),u(le,"class","component-title"),u($,"class","description"),u(oe,"class","aggregation-icon-container2 svelte-10c07ly"),u(Y,"class","component column"),u(pe,"class","component-title"),u(ve,"class","description"),u(_e,"class","aggregation-icon-container2 svelte-10c07ly"),u(me,"id","map"),u(me,"class","svelte-10c07ly"),u(W,"class","component column"),u(G,"id","vis-block"),u(G,"class","svelte-10c07ly"),u(ne,"id","overview"),u(X,"class","section"),u(O,"class","section-header"),u(ye,"class","component-title"),u(Ve,"class","explanation"),be(tt,"height","0.8em"),u(ee,"id","main-legend"),u(ee,"class","legend-box svelte-10c07ly"),u(ke,"id","se-disclaimer"),u(ke,"class","disclaimer-box svelte-10c07ly"),u(Q,"id","se-title"),u(Q,"class","svelte-10c07ly"),u(Ee,"id","multiple-plots"),u(Ee,"class","svelte-10c07ly"),u(Ie,"id","multiple-comp"),u(Ie,"class","svelte-10c07ly"),u(ce,"id","se-block"),u(ce,"class","component svelte-10c07ly"),be(ce,"margin-left","1rem"),u(T,"id","compare"),u(a,"class","page-container")},m(h,C){ml(t,h,C),V(h,e,C),V(h,a,C),i(a,r),i(r,s),i(s,c),i(c,v),i(c,_),i(c,A),i(A,y),i(y,b),i(A,w),i(A,H),i(H,P),i(s,R),i(s,N),at.m(N,null),i(s,F),i(s,g),i(g,I),st.m(I,null),i(g,M),i(g,B),it.m(B,null),i(g,q),i(g,U),rt.m(U,null),i(a,Pe),i(a,Z),i(Z,de),i(a,we),J&&J.m(a,null),i(a,x),i(a,X),i(X,ne),i(ne,he),i(ne,ze),i(ne,G),i(G,Y),i(Y,le),i(le,Ne),i(le,Oe),i(Y,je),i(Y,$),i($,qe),ge.m($,null),i(Y,re),i(Y,oe),i(Y,Ye),nt.m(Y,null),i(G,Je),i(G,W),i(W,pe),i(pe,Ke),i(pe,Xe),i(W,Qe),i(W,ve),i(W,Ze),i(W,_e),i(W,$e),K&&K.m(W,null),i(W,Be),i(W,me),l[41](me),i(a,n),i(a,T),i(T,O),i(T,_t),i(T,ce),i(ce,Q),i(Q,ye),i(ye,Mt),i(ye,Ft),i(ye,Ht),i(Q,Pt),i(Q,Ve),i(Q,Nt),i(Q,Ot),i(Q,Bt),i(Q,ee),i(ee,Re),i(ee,Rt),i(ee,xt),i(ee,tt),i(ee,Ut);for(let S=0;S<z.length;S+=1)z[S]&&z[S].m(ee,null);i(Q,Gt),i(Q,ke),i(ce,Wt),i(ce,Ie),i(Ie,Ee);for(let S=0;S<j.length;S+=1)j[S]&&j[S].m(Ee,null);l[45](a),V(h,mt,C),ml(Te,h,C),lt=!0,zt||(ll=Hl(Z,"click",l[27]),zt=!0)},p(h,C){if(at.p(h,C),st.p(h,C),it.p(h,C),rt.p(h,C),(!lt||C[0]&8)&&ie!==(ie=h[3]?"Switch to LAD level data":"Switch to LSOA level data")&&Ae(de,ie),h[18]?J?J.p(h,C):(J=Il(h),J.c(),J.m(a,x)):J&&(J.d(1),J=null),gt!==(gt=al(h))&&(ge.d(1),ge=gt(h),ge&&(ge.c(),ge.m($,null))),nt.p(h,C),h[16]?K?K.p(h,C):(K=Tl(h),K.c(),K.m(W,Be)):K&&(K.d(1),K=null),C[0]&67633152){xe=St(It);let S;for(S=0;S<xe.length;S+=1){const ae=Vl(h,xe,S);z[S]?z[S].p(ae,C):(z[S]=Ml(ae),z[S].c(),z[S].m(ee,null))}for(;S<z.length;S+=1)z[S].d(1);z.length=xe.length}if(C[0]&1048579){Ue=St(It);let S;for(S=0;S<Ue.length;S+=1){const ae=wl(h,Ue,S);j[S]?j[S].p(ae,C):(j[S]=Fl(ae),j[S].c(),j[S].m(Ee,null))}for(;S<j.length;S+=1)j[S].d(1);j.length=Ue.length}},i(h){lt||(gl(t.$$.fragment,h),gl(Te.$$.fragment,h),lt=!0)},o(h){bl(t.$$.fragment,h),bl(Te.$$.fragment,h),lt=!1},d(h){h&&(o(e),o(a),o(mt)),yl(t,h),at.d(),st.d(),it.d(),rt.d(),J&&J.d(),ge.d(),nt.d(),K&&K.d(),l[41](null),pl(z,h),pl(j,h),l[45](null),yl(Te,h),zt=!1,ll()}}}let se=400;function Se(l,t){return t==="£"?`${t}${l}`:`${l} ${t}`}function Ga(l,t,e){let a,r,s,c,v,p,_,A={},y={},b,w,H,P,R=!1,N,F=!1,g,I,M,B,q,U,Pe,Z,ie,de,{data:we}=t;const x=we.SEF;console.log("SEF ",x);const X=sa.find(n=>n.id===x)?.id??x,ne=ia.find(n=>n.id===x)?.label??x,he=ra.find(n=>n.id===x)?.def??x,dt=na.find(n=>n.id===x)?.description??x,ze=oa.find(n=>n.id===x)?.short_units??x,G=ca.find(n=>n.id===x)?.units??x;let Y,le,Ne=!1,Oe="";const je=["overview","compare"];function $(){const n=window.scrollY;e(18,Ne=n>250);for(const T of je){const O=document.getElementById(T);if(!O)continue;const et=O.getBoundingClientRect();if(et.top<=150&&et.bottom>=150){Oe!==T&&Kt.capture("section entered (sef)",{section_name:T}),Oe=T;break}}}Ul(()=>(window.addEventListener("scroll",$),$(),()=>window.removeEventListener("scroll",$))),Gl(()=>{window.removeEventListener("scroll",$)});async function qe(){e(29,b=await ut(da(x))),console.log("totals",b),e(2,P=await ut(ha(x))),console.log("LAD data 1 ",P),e(30,w=await ut(pa(x))),console.log("by cobens",w),e(31,N=await ut(va(x))),console.log("LADsef",N),H=await ut(_a()),console.log("per_capita_data",H),Xt.forEach(n=>{e(30,w[n]=+w[n],w)}),e(32,F=!0)}qe().then(()=>{e(16,Y=new aa(b,"LSOA",le,"val",!1,"Lookup_Value",!1)),Y.initMap()});let re=new Set;function oe(n){re.has(n)?re.delete(n):re.add(n),e(19,re=new Set(re))}function ht(){e(3,R=!R)}function Ye(){const n=El(b,T=>T.val)??0;Ll(Sl().thresholds(20).value(T=>T.val)(b),T=>T.length),e(6,c.innerHTML="",c),c?.append(We({height:se/1.9,width:se*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${G}`},y:{label:a===P?"No. of LADs":"No. of LSOAs",labelArrow:!1,domain:a===P?[0,100]:[0,1e4]},style:{fontSize:"16px"},marks:[ea(a,ya({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),ot([n],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:n,label:"Average"}},tip:{format:{average:T=>`${T.toFixed(2)}`,x:!1}}}),ct({label:`${G}`,labelArrow:!1,labelAnchor:"center"})]}))}function Je(){Dl(a,O=>O.val),Ll(Sl().thresholds(20).value(O=>O.val)(a),O=>O.length);const n=Al[X],T=n?Object.keys(n).map(Number):a.filter(O=>O.SEFMAME==X).map(O=>O.SE);e(8,p.innerHTML="",p),p?.append(We({height:se/1.9,width:se*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:X==="Typology"?80:50,x:{domain:T,label:fa(X),tickFormat:O=>n?.[O]??O,tickRotate:X==="Typology"?-10:0},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[ka(a,ta({y:"count"},{x:"val",fill:"black",opacity:.5,tooltip:!0}))]}))}function W(){e(7,v.innerHTML="",v),v?.append(We({height:se*1.5,width:se*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[wt([0],{stroke:"#333",strokeWidth:1.25}),ot([0],{stroke:"#333",strokeWidth:.75}),Tt(a,{x:"val",y:n=>n.total_per_capita*1e3,fill:n=>n.total_per_capita<0?"#BD210E":"#242424",r:a===P?4:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${G}`},value:{value:n=>n.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),Vt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),ct({label:`${G}`,labelArrow:!1,labelAnchor:"center"})]}))}function pe(){e(9,_.innerHTML="",_),_?.append(We({height:se*1.5,width:se*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[wt([0],{stroke:"#333",strokeWidth:1.25}),ot([0],{stroke:"#333",strokeWidth:.75}),Tt(a,{x:"val",y:n=>n.total_per_capita*1e3,fill:n=>n.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${G}`},value:{value:n=>n.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),Vt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),ct({label:`${G}`,labelArrow:!1,labelAnchor:"center"})]}))}function Ke(){Xt.forEach(n=>{let T;T=We({height:se,width:se,marginLeft:n==="Excess heat"?80:60,marginTop:40,marginRight:10,marginBottom:50,x:{label:null},y:{label:null},style:{fontSize:"14px"},marks:[wt([0],{stroke:"#333",strokeWidth:1.25}),ot([0],{stroke:"#333",strokeWidth:.75}),Tt(r.filter(O=>O.co_benefit_type==n),{x:"val",y:"total",fill:ft(n),fillOpacity:.5,r:r===N?3.5:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),Vt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"top"}),ct({label:`${G}`,labelArrow:!1,labelAnchor:"center"})]}),A[n]?.append(T)})}function Xe(){Xt.forEach(n=>{let T;T=We({height:se,width:se,marginLeft:60,marginTop:40,marginRight:10,marginBottom:50,x:{label:null},y:{label:null},style:{fontSize:"14px"},marks:[wt([0],{stroke:"#333",strokeWidth:1.25}),ot([0],{stroke:"#333",strokeWidth:.75}),Tt(r.filter(O=>O.co_benefit_type==n),{x:"val",y:"total",fill:ft(n),fillOpacity:.5,r:r===N?3.5:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),Vt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"top"}),ct({label:`${G}`,labelArrow:!1,labelAnchor:"center"})]}),y[n]?.append(T)})}function Qe(n){Le[n?"unshift":"push"](()=>{p=n,e(8,p)})}function ve(n){Le[n?"unshift":"push"](()=>{c=n,e(6,c)})}function pt(n){Le[n?"unshift":"push"](()=>{_=n,e(9,_)})}function Ze(n){Le[n?"unshift":"push"](()=>{v=n,e(7,v)})}function _e(n){Le[n?"unshift":"push"](()=>{le=n,e(17,le)})}const vt=n=>{const T=re.has(n.id);oe(n.id),T?Kt.capture("cobenefit closed",{cobenefit:n.label}):Kt.capture("cobenefit opened",{cobenefit:n.label})};function $e(n,T){Le[n?"unshift":"push"](()=>{y[T.id]=n,e(1,y)})}function Be(n,T){Le[n?"unshift":"push"](()=>{A[T.id]=n,e(0,A)})}function me(n){Le[n?"unshift":"push"](()=>{s=n,e(5,s)})}return l.$$set=n=>{"data"in n&&e(28,we=n.data)},l.$$.update=()=>{l.$$.dirty[0]&536870924&&e(4,a=R?b:P),l.$$.dirty[0]&1073741832|l.$$.dirty[1]&1&&(r=R?w:N),l.$$.dirty[0]&16&&e(10,g=a?(El(a,n=>n.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&16&&e(35,ie=a?Dl(a,n=>n.val):null),l.$$.dirty[1]&48&&e(11,I=ie!=null&&de?de[ie]??ie:"N/A"),l.$$.dirty[0]&16&&e(33,U=a?Zl(a,n=>n.val):-1),l.$$.dirty[0]&16|l.$$.dirty[1]&4&&e(14,q=U!==-1&&a?a[U].Lookup_Value?.trim():"N/A"),l.$$.dirty[0]&16|l.$$.dirty[1]&4&&e(12,M=U!==-1&&a?(a[U].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&16&&e(34,Z=a?$l(a,n=>n.val):-1),l.$$.dirty[0]&16|l.$$.dirty[1]&8&&e(15,Pe=Z!==-1&&a?a[Z].Lookup_Value:"N/A"),l.$$.dirty[0]&16|l.$$.dirty[1]&8&&e(13,B=Z!==-1&&a?(a[Z].val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"),l.$$.dirty[0]&19|l.$$.dirty[1]&2&&(Object.values(A).forEach(n=>{n.firstChild?.remove()}),Object.values(y).forEach(n=>{n.firstChild?.remove()}),F&&a&&(Fe.includes(X)?(Je(),Xe(),pe()):(W(),Ke(),Ye())))},e(36,de=Al[X]),[A,y,P,R,a,s,c,v,p,_,g,I,M,B,q,Pe,Y,le,Ne,re,X,ne,he,dt,ze,G,oe,ht,we,b,w,N,F,U,Z,ie,de,Qe,ve,pt,Ze,_e,vt,$e,Be,me]}class us extends ql{constructor(t){super(),Yl(this,t,Ga,Ua,xl,{data:28},null,[-1,-1,-1])}}export{us as component};
