import{s as Fl,a as A,e as u,t as I,g as V,c as d,b as _,p as re,d as L,f as o,q as f,v as ie,i as C,h as r,x as ol,y as Pl,z as xl,n as Fe,H as Bl,A as Hl,w as Rl,j as Te,B as Ae,r as Ut}from"../chunks/scheduler.Uo5vrMzy.js";import{S as Nl,i as Ol,c as cl,b as fl,m as ul,t as dl,a as vl,d as hl}from"../chunks/index.CfagcI6h.js";import{N as jl,e as kt}from"../chunks/NavigationBar.ZzpDvrQx.js";import"../chunks/transform.BNP73y-7.js";import{aw as zl,ap as Ot,aq as Wl,t as pl,au as Gl,X as _l,ax as ml,ay as Ul,az as Yl,aA as gl,G as Oe,P as ql,K as je,J as st,R as Jl,H as Et,Q as yt}from"../chunks/index.gHFfw6XA.js";import{f as jt}from"../chunks/module.jBGXnV9S.js";import{b as Xl}from"../chunks/paths.CSYCLLON.js";import{M as Kl}from"../chunks/mapUK.WWNZhF0Q.js";import{l as Ql,m as Zl,n as $l,o as ea,p as ta,q as la,i as rt,d as We,s as Dt,t as zt,h as bl,e as aa}from"../chunks/globals.CVxY9wYy.js";import{g as Wt,o as sa,r as ra,f as ia}from"../chunks/duckdb.B_FyVpvC.js";import{p as At}from"../chunks/per_capita.COcMrZFY.js";import{F as na}from"../chunks/Footer.DeJ0MYI5.js";import{n as oa}from"../chunks/nice.ZYjiKfzK.js";import{t as ca,b as fa}from"../chunks/bin.4FhIxFiV.js";import{d as ze}from"../chunks/dot.CFFCJmC7.js";import{b as ua}from"../chunks/bar.DO1Cp6Am.js";var da=Array.prototype,va=da.slice;function Gt(l){return()=>l}function kl(){var l=zl,e=Ot,t=ca;function s(i){Array.isArray(i)||(i=Array.from(i));var a,c=i.length,p,v,m=new Array(c);for(a=0;a<c;++a)m[a]=l(i[a],a,i);var g=e(m),k=g[0],b=g[1],T=t(m,k,b);if(!Array.isArray(T)){const D=b,x=+T;if(e===Ot&&([k,b]=oa(k,b,x)),T=Wl(k,b,x),T[0]<=k&&(v=pl(k,b,x)),T[T.length-1]>=b)if(D>=b&&e===Ot){const M=pl(k,b,x);isFinite(M)&&(M>0?b=(Math.floor(b/M)+1)*M:M<0&&(b=(Math.ceil(b*-M)+1)/-M))}else T.pop()}for(var w=T.length,E=0,F=w;T[E]<=k;)++E;for(;T[F-1]>b;)--F;(E||F<w)&&(T=T.slice(E,F),w=F-E);var B=new Array(w+1),j;for(a=0;a<=w;++a)j=B[a]=[],j.x0=a>0?T[a-1]:k,j.x1=a<w?T[a]:b;if(isFinite(v)){if(v>0)for(a=0;a<c;++a)(p=m[a])!=null&&k<=p&&p<=b&&B[Math.min(w,Math.floor((p-k)/v))].push(i[a]);else if(v<0){for(a=0;a<c;++a)if((p=m[a])!=null&&k<=p&&p<=b){const D=Math.floor((k-p)*v);B[Math.min(w,D+(T[D]<=p))].push(i[a])}}}else for(a=0;a<c;++a)(p=m[a])!=null&&k<=p&&p<=b&&B[Gl(T,p,0,w)].push(i[a]);return B}return s.value=function(i){return arguments.length?(l=typeof i=="function"?i:Gt(i),s):l},s.domain=function(i){return arguments.length?(e=typeof i=="function"?i:Gt([i[0],i[1]]),s):e},s.thresholds=function(i){return arguments.length?(t=typeof i=="function"?i:Gt(Array.isArray(i)?va.call(i):i),s):t},s}const ha=""+new URL("../assets/negative.BhphYhmj.png",import.meta.url).href;function El(l,e,t){const s=l.slice();return s[55]=e[t],s[56]=e,s[57]=t,s}function yl(l,e,t){const s=l.slice();return s[55]=e[t],s}function pa(l){let e;return{c(){e=u("div"),this.h()},l(t){e=d(t,"DIV",{class:!0}),_(e).forEach(o),this.h()},h(){f(e,"class","plot svelte-1v4er05")},m(t,s){C(t,e,s),l[27](e)},p:Fe,d(t){t&&o(e),l[27](null)}}}function _a(l){let e;return{c(){e=u("div"),this.h()},l(t){e=d(t,"DIV",{class:!0}),_(e).forEach(o),this.h()},h(){f(e,"class","plot svelte-1v4er05")},m(t,s){C(t,e,s),l[26](e)},p:Fe,d(t){t&&o(e),l[26](null)}}}function ma(l){let e,t,s=Ve(l[9],l[21])+"",i,a,c,p;return{c(){e=I("Max value: "),t=u("strong"),i=I(s),a=I("("),c=I(l[11]),p=I(")")},l(v){e=L(v,"Max value: "),t=d(v,"STRONG",{});var m=_(t);i=L(m,s),m.forEach(o),a=L(v,"("),c=L(v,l[11]),p=L(v,")")},m(v,m){C(v,e,m),C(v,t,m),r(t,i),C(v,a,m),C(v,c,m),C(v,p,m)},p(v,m){m[0]&512&&s!==(s=Ve(v[9],v[21])+"")&&Te(i,s),m[0]&2048&&Te(c,v[11])},d(v){v&&(o(e),o(t),o(a),o(c),o(p))}}}function ga(l){let e;return{c(){e=I("-")},l(t){e=L(t,"-")},m(t,s){C(t,e,s)},p:Fe,d(t){t&&o(e)}}}function ba(l){let e,t,s=Ve(l[7],l[21])+"",i;return{c(){e=I("Average value: "),t=u("strong"),i=I(s),this.h()},l(a){e=L(a,"Average value: "),t=d(a,"STRONG",{style:!0});var c=_(t);i=L(c,s),c.forEach(o),this.h()},h(){ie(t,"color","#BD210E")},m(a,c){C(a,e,c),C(a,t,c),r(t,i)},p(a,c){c[0]&128&&s!==(s=Ve(a[7],a[21])+"")&&Te(i,s)},d(a){a&&(o(e),o(t))}}}function ka(l){let e,t,s=Ve(l[8],l[21])+"",i;return{c(){e=I("Most common category: "),t=u("strong"),i=I(s),this.h()},l(a){e=L(a,"Most common category: "),t=d(a,"STRONG",{style:!0});var c=_(t);i=L(c,s),c.forEach(o),this.h()},h(){ie(t,"color","#BD210E")},m(a,c){C(a,e,c),C(a,t,c),r(t,i)},p(a,c){c[0]&256&&s!==(s=Ve(a[8],a[21])+"")&&Te(i,s)},d(a){a&&(o(e),o(t))}}}function Ea(l){let e,t,s=Ve(l[10],l[21])+"",i,a,c,p;return{c(){e=I("Min value: "),t=u("strong"),i=I(s),a=I("("),c=I(l[12]),p=I(")")},l(v){e=L(v,"Min value: "),t=d(v,"STRONG",{});var m=_(t);i=L(m,s),m.forEach(o),a=L(v,"("),c=L(v,l[12]),p=L(v,")")},m(v,m){C(v,e,m),C(v,t,m),r(t,i),C(v,a,m),C(v,c,m),C(v,p,m)},p(v,m){m[0]&1024&&s!==(s=Ve(v[10],v[21])+"")&&Te(i,s),m[0]&4096&&Te(c,v[12])},d(v){v&&(o(e),o(t),o(a),o(c),o(p))}}}function ya(l){let e;return{c(){e=I("-")},l(t){e=L(t,"-")},m(t,s){C(t,e,s)},p:Fe,d(t){t&&o(e)}}}function Dl(l){let e,t,s,i,a;return{c(){e=u("div"),t=u("div"),s=u("span"),i=I(l[18]),a=I(" >>"),this.h()},l(c){e=d(c,"DIV",{class:!0});var p=_(e);t=d(p,"DIV",{class:!0});var v=_(t);s=d(v,"SPAN",{class:!0});var m=_(s);i=L(m,l[18]),a=L(m," >>"),m.forEach(o),v.forEach(o),p.forEach(o),this.h()},h(){f(s,"class","mini-header-text"),f(t,"class","mini-header-content"),f(e,"class","mini-header")},m(c,p){C(c,e,p),r(e,t),r(t,s),r(s,i),r(s,a)},p:Fe,d(c){c&&o(e)}}}function Da(l){let e;return{c(){e=u("div"),this.h()},l(t){e=d(t,"DIV",{class:!0}),_(e).forEach(o),this.h()},h(){f(e,"class","plot svelte-1v4er05")},m(t,s){C(t,e,s),l[29](e)},p:Fe,d(t){t&&o(e),l[29](null)}}}function Aa(l){let e;return{c(){e=u("div"),this.h()},l(t){e=d(t,"DIV",{class:!0}),_(e).forEach(o),this.h()},h(){f(e,"class","plot svelte-1v4er05")},m(t,s){C(t,e,s),l[28](e)},p:Fe,d(t){t&&o(e),l[28](null)}}}function Al(l){let e,t,s=l[13].legend(l[22]).outerHTML+"";return{c(){e=u("div"),t=new Bl(!1),this.h()},l(i){e=d(i,"DIV",{id:!0});var a=_(e);t=Hl(a,!1),a.forEach(o),this.h()},h(){t.a=null,f(e,"id","legend")},m(i,a){C(i,e,a),t.m(s,e)},p(i,a){a[0]&8192&&s!==(s=i[13].legend(i[22]).outerHTML+"")&&t.p(s)},d(i){i&&o(e)}}}function Vl(l){let e,t,s,i,a=l[55].def+"",c,p,v,m,g,k,b,T="here",w,E,F=l[55].id.toLowerCase()+"",B,j,D;return{c(){e=u("div"),t=u("div"),s=u("div"),i=A(),c=I(a),p=A(),v=u("br"),m=A(),g=u("div"),k=I("Click "),b=u("a"),b.textContent=T,w=I(` for the 
                                `),E=u("span"),B=I(F),j=A(),D=I("report page."),this.h()},l(x){e=d(x,"DIV",{class:!0});var M=_(e);t=d(M,"DIV",{class:!0});var R=_(t);s=d(R,"DIV",{style:!0}),_(s).forEach(o),i=V(R),c=L(R,a),p=V(R),v=d(R,"BR",{}),m=V(R),g=d(R,"DIV",{class:!0});var J=_(g);k=L(J,"Click "),b=d(J,"A",{class:!0,href:!0,target:!0,rel:!0,style:!0,"data-svelte-h":!0}),re(b)!=="svelte-gjrxnt"&&(b.textContent=T),w=L(J,` for the 
                                `),E=d(J,"SPAN",{style:!0});var W=_(E);B=L(W,F),j=V(W),W.forEach(o),D=L(J,"report page."),J.forEach(o),R.forEach(o),M.forEach(o),this.h()},h(){ie(s,"height","0.8em"),f(b,"class","link"),f(b,"href",Xl+"/cobenefit?cobenefit="+l[55].id),f(b,"target","_blank"),f(b,"rel","noopener noreferrer"),ie(b,"color",rt(l[55].id)),ie(E,"color",rt(l[55].id)),f(g,"class","link-box svelte-1v4er05"),f(t,"class","legend-description svelte-1v4er05"),f(e,"class","legend-description-box svelte-1v4er05")},m(x,M){C(x,e,M),r(e,t),r(t,s),r(t,i),r(t,c),r(t,p),r(t,v),r(t,m),r(t,g),r(g,k),r(g,b),r(g,w),r(g,E),r(E,B),r(E,j),r(g,D)},d(x){x&&o(e)}}}function Sl(l){let e,t,s,i,a,c=l[55].label+"",p,v,m,g,k=l[16].has(l[55].id)?"▲":"▼",b,T,w=l[16].has(l[55].id),E,F,B;function j(){return l[31](l[55])}let D=w&&Vl(l);return{c(){e=u("div"),t=u("div"),s=u("span"),i=A(),a=u("span"),p=I(c),m=A(),g=u("span"),b=I(k),T=A(),D&&D.c(),E=A(),this.h()},l(x){e=d(x,"DIV",{class:!0});var M=_(e);t=d(M,"DIV",{class:!0,style:!0});var R=_(t);s=d(R,"SPAN",{class:!0,style:!0}),_(s).forEach(o),i=V(R),a=d(R,"SPAN",{class:!0});var J=_(a);p=L(J,c),J.forEach(o),m=V(R),g=d(R,"SPAN",{class:!0});var W=_(g);b=L(W,k),W.forEach(o),R.forEach(o),T=V(M),D&&D.l(M),E=V(M),M.forEach(o),this.h()},h(){f(s,"class","legend-color svelte-1v4er05"),ie(s,"background-color",rt(l[55].id)),f(a,"class",v="legend-text "+(l[16].has(l[55].id)?"expanded":"")+" svelte-1v4er05"),f(g,"class","toggle-icon svelte-1v4er05"),f(t,"class","legend-header svelte-1v4er05"),ie(t,"cursor","pointer"),f(e,"class","legend-item svelte-1v4er05")},m(x,M){C(x,e,M),r(e,t),r(t,s),r(t,i),r(t,a),r(a,p),r(t,m),r(t,g),r(g,b),r(e,T),D&&D.m(e,null),r(e,E),F||(B=Rl(t,"click",j),F=!0)},p(x,M){l=x,M[0]&65536&&v!==(v="legend-text "+(l[16].has(l[55].id)?"expanded":"")+" svelte-1v4er05")&&f(a,"class",v),M[0]&65536&&k!==(k=l[16].has(l[55].id)?"▲":"▼")&&Te(b,k),M[0]&65536&&(w=l[16].has(l[55].id)),w?D||(D=Vl(l),D.c(),D.m(e,E)):D&&(D.d(1),D=null)},d(x){x&&o(e),D&&D.d(),F=!1,B()}}}function Va(l){let e,t;return{c(){e=u("img"),this.h()},l(s){e=d(s,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){f(e,"class","sm-icon svelte-1v4er05"),Ut(e.src,t=At)||f(e,"src",t),f(e,"alt","icon")},m(s,i){C(s,e,i)},d(s){s&&o(e)}}}function Sa(l){let e,t,s,i,a;return{c(){e=u("img"),s=A(),i=u("img"),this.h()},l(c){e=d(c,"IMG",{class:!0,src:!0,alt:!0}),s=V(c),i=d(c,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){f(e,"class","sm-icon svelte-1v4er05"),Ut(e.src,t=At)||f(e,"src",t),f(e,"alt","icon"),f(i,"class","sm-icon svelte-1v4er05"),Ut(i.src,a=ha)||f(i,"src",a),f(i,"alt","icon")},m(c,p){C(c,e,p),C(c,s,p),C(c,i,p)},d(c){c&&(o(e),o(s),o(i))}}}function Ia(l){let e,t=l[55];const s=()=>l[33](e,t),i=()=>l[33](null,t);return{c(){e=u("div"),this.h()},l(a){e=d(a,"DIV",{class:!0}),_(e).forEach(o),this.h()},h(){f(e,"class","plot svelte-1v4er05")},m(a,c){C(a,e,c),s()},p(a,c){l=a,t!==l[55]&&(i(),t=l[55],s())},d(a){a&&o(e),i()}}}function La(l){let e,t=l[55];const s=()=>l[32](e,t),i=()=>l[32](null,t);return{c(){e=u("div"),this.h()},l(a){e=d(a,"DIV",{class:!0}),_(e).forEach(o),this.h()},h(){f(e,"class","plot svelte-1v4er05")},m(a,c){C(a,e,c),s()},p(a,c){l=a,t!==l[55]&&(i(),t=l[55],s())},d(a){a&&o(e),i()}}}function Il(l){let e,t,s,i=l[55].label+"",a,c,p,v;function m(E,F){return E[55].id=="Hassle costs"||E[55].id=="Road repairs"||E[55].id=="Road safety"||E[55].id=="Congestion"||E[55].id=="Excess heat"?Sa:Va}let k=m(l)(l);function b(E,F){return We.includes(E[17])?La:Ia}let w=b(l)(l);return{c(){e=u("div"),t=u("div"),s=u("h3"),a=I(i),c=A(),k.c(),p=A(),w.c(),v=A(),this.h()},l(E){e=d(E,"DIV",{class:!0});var F=_(e);t=d(F,"DIV",{class:!0});var B=_(t);s=d(B,"H3",{class:!0});var j=_(s);a=L(j,i),j.forEach(o),c=V(B),k.l(B),B.forEach(o),p=V(F),w.l(F),v=V(F),F.forEach(o),this.h()},h(){f(s,"class","component-chart-title svelte-1v4er05"),f(t,"class","component-chart-title-container svelte-1v4er05"),f(e,"class","plot-container svelte-1v4er05")},m(E,F){C(E,e,F),r(e,t),r(t,s),r(s,a),r(t,c),k.m(t,null),r(e,p),w.m(e,null),r(e,v)},p(E,F){w.p(E,F)},d(E){E&&o(e),k.d(),w.d()}}}function wa(l){let e,t,s,i,a,c,p,v="SEF Report",m,g,k,b,T,w,E,F,B,j,D,x,M,R,J,W,z,te,me,ne,ue,it='<p class="section-subtitle svelte-1v4er05">Overview</p>',Z,$,G,oe,Pe,Ge,ge,de,nt="Each point in the chart below represents a UK data zone (LSOA).",Ue,ve,ot=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${At}" alt="icon"/> <span class="tooltip-text">This chart uses per capita values. i.e. shows the cost/benefit per person in each AREA.</span></div>`,Ye,qe,N,he,Je,Xe,pe,ct="Scroll for zooming in and out.",Ke,_e,ft=`<div class="tooltip-wrapper"><img class="aggregation-icon" src="${At}" alt="icon"/> <span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>`,Qe,xe,n,H,y,Q,O='<p class="section-subtitle svelte-1v4er05">By Co-benefits</p>',Vt,ce,U,be,St,ke,Yt=l[18].toLowerCase()+"",It,Lt,wt,Se,qt="Each plot shows the distribution of benefits or costs for each of the 11 co-benefits.",Ct,Mt,Tt,Ie,Jt='<div class="tooltip-wrapper"><span class="tooltip-text">These charts use per capita values. i.e. show the cost/benefit per person in each LAD.</span></div>',Ft,ee,Be,Xt="Co-benefits:",Pt,xt,Ze,Bt,Ht,Ee,Kt='<p style="margin: 0 0 1rem 0;"><strong>Correlation ≠ Causation:</strong> The scatter plots represent modelled associations and should not be interpreted as direct causal relationships.</p> <p style="margin: 0 0 1rem 0;"><strong>Varying y-axis scales:</strong> The scatter plots have different scales on the y-axis due to the nature of each co-benefit.</p>',Rt,Le,ye,ut,we,dt;e=new jl({});function Ll(h,P){return We.includes(h[17])?_a:pa}let $e=Ll(l)(l);function wl(h,P){return We.includes(h[17])?ga:ma}let et=wl(l)(l);function Cl(h,P){return We.includes(h[17])?ka:ba}let tt=Cl(l)(l);function Ml(h,P){return We.includes(h[17])?ya:Ea}let lt=Ml(l)(l),X=l[15]&&Dl(l);function Tl(h,P){return We.includes(h[17])?Aa:Da}let at=Tl(l)(l),K=l[13]&&Al(l),He=kt(Dt),Y=[];for(let h=0;h<He.length;h+=1)Y[h]=Sl(yl(l,He,h));let Re=kt(Dt),q=[];for(let h=0;h<Re.length;h+=1)q[h]=Il(El(l,Re,h));return we=new na({}),{c(){cl(e.$$.fragment),t=A(),s=u("div"),i=u("div"),a=u("div"),c=u("div"),p=u("p"),p.textContent=v,m=A(),g=u("div"),k=u("h1"),b=I(l[20]),T=A(),w=u("p"),E=I(l[19]),F=A(),B=u("div"),$e.c(),j=A(),D=u("div"),x=u("p"),et.c(),M=A(),R=u("p"),tt.c(),J=A(),W=u("p"),lt.c(),z=A(),X&&X.c(),te=A(),me=u("div"),ne=u("div"),ue=u("div"),ue.innerHTML=it,Z=A(),$=u("div"),G=u("div"),oe=u("h3"),Pe=I(l[18]),Ge=I(" against per capita co-benefit values (£, thousand)"),ge=A(),de=u("p"),de.textContent=nt,Ue=A(),ve=u("div"),ve.innerHTML=ot,Ye=A(),at.c(),qe=A(),N=u("div"),he=u("h3"),Je=I(l[18]),Xe=A(),pe=u("p"),pe.textContent=ct,Ke=A(),_e=u("div"),_e.innerHTML=ft,Qe=A(),K&&K.c(),xe=A(),n=u("div"),H=A(),y=u("div"),Q=u("div"),Q.innerHTML=O,Vt=A(),ce=u("div"),U=u("div"),be=u("h3"),St=I("Plotting "),ke=u("span"),It=I(Yt),Lt=I(" against the gain/loss (£, thousand) per capita for each co-benefit"),wt=A(),Se=u("p"),Se.textContent=qt,Ct=A(),Mt=u("br"),Tt=A(),Ie=u("div"),Ie.innerHTML=Jt,Ft=A(),ee=u("div"),Be=u("strong"),Be.textContent=Xt,Pt=u("br"),xt=I(`Expand for detailed explanation
                    `),Ze=u("div"),Bt=A();for(let h=0;h<Y.length;h+=1)Y[h].c();Ht=A(),Ee=u("div"),Ee.innerHTML=Kt,Rt=A(),Le=u("div"),ye=u("div");for(let h=0;h<q.length;h+=1)q[h].c();ut=A(),cl(we.$$.fragment),this.h()},l(h){fl(e.$$.fragment,h),t=V(h),s=d(h,"DIV",{class:!0});var P=_(s);i=d(P,"DIV",{class:!0});var S=_(i);a=d(S,"DIV",{class:!0});var le=_(a);c=d(le,"DIV",{class:!0});var vt=_(c);p=d(vt,"P",{class:!0,"data-svelte-h":!0}),re(p)!=="svelte-3h7aqf"&&(p.textContent=v),m=V(vt),g=d(vt,"DIV",{class:!0});var ht=_(g);k=d(ht,"H1",{class:!0});var Qt=_(k);b=L(Qt,l[20]),Qt.forEach(o),T=V(ht),w=d(ht,"P",{class:!0});var Zt=_(w);E=L(Zt,l[19]),Zt.forEach(o),ht.forEach(o),vt.forEach(o),F=V(le),B=d(le,"DIV",{class:!0});var $t=_(B);$e.l($t),$t.forEach(o),j=V(le),D=d(le,"DIV",{class:!0});var Ne=_(D);x=d(Ne,"P",{class:!0});var el=_(x);et.l(el),el.forEach(o),M=V(Ne),R=d(Ne,"P",{class:!0});var tl=_(R);tt.l(tl),tl.forEach(o),J=V(Ne),W=d(Ne,"P",{class:!0});var ll=_(W);lt.l(ll),ll.forEach(o),Ne.forEach(o),le.forEach(o),S.forEach(o),z=V(P),X&&X.l(P),te=V(P),me=d(P,"DIV",{class:!0});var al=_(me);ne=d(al,"DIV",{id:!0});var pt=_(ne);ue=d(pt,"DIV",{class:!0,"data-svelte-h":!0}),re(ue)!=="svelte-ll1i43"&&(ue.innerHTML=it),Z=V(pt),$=d(pt,"DIV",{id:!0,class:!0});var _t=_($);G=d(_t,"DIV",{class:!0});var De=_(G);oe=d(De,"H3",{class:!0});var Nt=_(oe);Pe=L(Nt,l[18]),Ge=L(Nt," against per capita co-benefit values (£, thousand)"),Nt.forEach(o),ge=V(De),de=d(De,"P",{class:!0,"data-svelte-h":!0}),re(de)!=="svelte-1ozkrs5"&&(de.textContent=nt),Ue=V(De),ve=d(De,"DIV",{class:!0,"data-svelte-h":!0}),re(ve)!=="svelte-xpsz06"&&(ve.innerHTML=ot),Ye=V(De),at.l(De),De.forEach(o),qe=V(_t),N=d(_t,"DIV",{class:!0});var fe=_(N);he=d(fe,"H3",{class:!0});var sl=_(he);Je=L(sl,l[18]),sl.forEach(o),Xe=V(fe),pe=d(fe,"P",{class:!0,"data-svelte-h":!0}),re(pe)!=="svelte-1ask2se"&&(pe.textContent=ct),Ke=V(fe),_e=d(fe,"DIV",{class:!0,"data-svelte-h":!0}),re(_e)!=="svelte-1dxsuae"&&(_e.innerHTML=ft),Qe=V(fe),K&&K.l(fe),xe=V(fe),n=d(fe,"DIV",{id:!0,class:!0}),_(n).forEach(o),fe.forEach(o),_t.forEach(o),pt.forEach(o),al.forEach(o),H=V(P),y=d(P,"DIV",{id:!0});var mt=_(y);Q=d(mt,"DIV",{class:!0,"data-svelte-h":!0}),re(Q)!=="svelte-1av3fse"&&(Q.innerHTML=O),Vt=V(mt),ce=d(mt,"DIV",{id:!0,class:!0,style:!0});var gt=_(ce);U=d(gt,"DIV",{id:!0,class:!0});var ae=_(U);be=d(ae,"H3",{class:!0});var bt=_(be);St=L(bt,"Plotting "),ke=d(bt,"SPAN",{style:!0});var rl=_(ke);It=L(rl,Yt),rl.forEach(o),Lt=L(bt," against the gain/loss (£, thousand) per capita for each co-benefit"),bt.forEach(o),wt=V(ae),Se=d(ae,"P",{class:!0,"data-svelte-h":!0}),re(Se)!=="svelte-1h97e3k"&&(Se.textContent=qt),Ct=V(ae),Mt=d(ae,"BR",{}),Tt=V(ae),Ie=d(ae,"DIV",{class:!0,"data-svelte-h":!0}),re(Ie)!=="svelte-nlkeox"&&(Ie.innerHTML=Jt),Ft=V(ae),ee=d(ae,"DIV",{id:!0,class:!0});var Ce=_(ee);Be=d(Ce,"STRONG",{"data-svelte-h":!0}),re(Be)!=="svelte-1qu96kx"&&(Be.textContent=Xt),Pt=d(Ce,"BR",{}),xt=L(Ce,`Expand for detailed explanation
                    `),Ze=d(Ce,"DIV",{style:!0}),_(Ze).forEach(o),Bt=V(Ce);for(let Me=0;Me<Y.length;Me+=1)Y[Me].l(Ce);Ce.forEach(o),Ht=V(ae),Ee=d(ae,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),re(Ee)!=="svelte-11g4vkg"&&(Ee.innerHTML=Kt),ae.forEach(o),Rt=V(gt),Le=d(gt,"DIV",{id:!0,class:!0});var il=_(Le);ye=d(il,"DIV",{id:!0,class:!0});var nl=_(ye);for(let Me=0;Me<q.length;Me+=1)q[Me].l(nl);nl.forEach(o),il.forEach(o),gt.forEach(o),mt.forEach(o),P.forEach(o),ut=V(h),fl(we.$$.fragment,h),this.h()},h(){f(p,"class","page-subtitle svelte-1v4er05"),f(k,"class","page-title svelte-1v4er05"),f(w,"class","definition"),f(g,"class","title-container"),f(c,"class","header-text svelte-1v4er05"),f(B,"class","header-vis svelte-1v4er05"),f(x,"class","definition-stat svelte-1v4er05"),f(R,"class","definition-stat svelte-1v4er05"),f(W,"class","definition-stat svelte-1v4er05"),f(D,"class","header-stats svelte-1v4er05"),f(a,"class","header-content svelte-1v4er05"),f(i,"class","section header svelte-1v4er05"),f(ue,"class","section-header"),f(oe,"class","component-title"),f(de,"class","description"),f(ve,"class","aggregation-icon-container"),f(G,"class","component column"),f(he,"class","component-title"),f(pe,"class","description"),f(_e,"class","aggregation-icon-container2 svelte-1v4er05"),f(n,"id","map"),f(n,"class","svelte-1v4er05"),f(N,"class","component column"),f($,"id","vis-block"),f($,"class","svelte-1v4er05"),f(ne,"id","overview"),f(me,"class","section"),f(Q,"class","section-header"),ie(ke,"background-color","#555"),ie(ke,"padding","0 1px"),ie(ke,"color","#f9f9f9"),f(be,"class","component-title"),f(Se,"class","explanation"),f(Ie,"class","aggregation-icon-container2 svelte-1v4er05"),ie(Ze,"height","0.8em"),f(ee,"id","main-legend"),f(ee,"class","legend-box svelte-1v4er05"),f(Ee,"id","se-disclaimer"),f(Ee,"class","disclaimer-box svelte-1v4er05"),f(U,"id","se-title"),f(U,"class","svelte-1v4er05"),f(ye,"id","multiple-plots"),f(ye,"class","svelte-1v4er05"),f(Le,"id","multiple-comp"),f(Le,"class","svelte-1v4er05"),f(ce,"id","se-block"),f(ce,"class","component svelte-1v4er05"),ie(ce,"margin-left","1rem"),f(y,"id","compare"),f(s,"class","page-container")},m(h,P){ul(e,h,P),C(h,t,P),C(h,s,P),r(s,i),r(i,a),r(a,c),r(c,p),r(c,m),r(c,g),r(g,k),r(k,b),r(g,T),r(g,w),r(w,E),r(a,F),r(a,B),$e.m(B,null),r(a,j),r(a,D),r(D,x),et.m(x,null),r(D,M),r(D,R),tt.m(R,null),r(D,J),r(D,W),lt.m(W,null),r(s,z),X&&X.m(s,null),r(s,te),r(s,me),r(me,ne),r(ne,ue),r(ne,Z),r(ne,$),r($,G),r(G,oe),r(oe,Pe),r(oe,Ge),r(G,ge),r(G,de),r(G,Ue),r(G,ve),r(G,Ye),at.m(G,null),r($,qe),r($,N),r(N,he),r(he,Je),r(N,Xe),r(N,pe),r(N,Ke),r(N,_e),r(N,Qe),K&&K.m(N,null),r(N,xe),r(N,n),l[30](n),r(s,H),r(s,y),r(y,Q),r(y,Vt),r(y,ce),r(ce,U),r(U,be),r(be,St),r(be,ke),r(ke,It),r(be,Lt),r(U,wt),r(U,Se),r(U,Ct),r(U,Mt),r(U,Tt),r(U,Ie),r(U,Ft),r(U,ee),r(ee,Be),r(ee,Pt),r(ee,xt),r(ee,Ze),r(ee,Bt);for(let S=0;S<Y.length;S+=1)Y[S]&&Y[S].m(ee,null);r(U,Ht),r(U,Ee),r(ce,Rt),r(ce,Le),r(Le,ye);for(let S=0;S<q.length;S+=1)q[S]&&q[S].m(ye,null);l[34](s),C(h,ut,P),ul(we,h,P),dt=!0},p(h,P){if($e.p(h,P),et.p(h,P),tt.p(h,P),lt.p(h,P),h[15]?X?X.p(h,P):(X=Dl(h),X.c(),X.m(s,te)):X&&(X.d(1),X=null),at.p(h,P),h[13]?K?K.p(h,P):(K=Al(h),K.c(),K.m(N,xe)):K&&(K.d(1),K=null),P[0]&8454144){He=kt(Dt);let S;for(S=0;S<He.length;S+=1){const le=yl(h,He,S);Y[S]?Y[S].p(le,P):(Y[S]=Sl(le),Y[S].c(),Y[S].m(ee,null))}for(;S<Y.length;S+=1)Y[S].d(1);Y.length=He.length}if(P[0]&131137){Re=kt(Dt);let S;for(S=0;S<Re.length;S+=1){const le=El(h,Re,S);q[S]?q[S].p(le,P):(q[S]=Il(le),q[S].c(),q[S].m(ye,null))}for(;S<q.length;S+=1)q[S].d(1);q.length=Re.length}},i(h){dt||(dl(e.$$.fragment,h),dl(we.$$.fragment,h),dt=!0)},o(h){vl(e.$$.fragment,h),vl(we.$$.fragment,h),dt=!1},d(h){h&&(o(t),o(s),o(ut)),hl(e,h),$e.d(),et.d(),tt.d(),lt.d(),X&&X.d(),at.d(),K&&K.d(),l[30](null),ol(Y,h),ol(q,h),l[34](null),hl(we,h)}}}let se=400;function Ve(l,e){return e==="£"?`${e}${l}`:`${l} ${e}`}function Ca(l,e,t){let s,i,a,c,p,v={},m={},g,k,b,T=!1,w,E,F,B,j,D,x,M,R,J,{data:W}=e;const z=W.SEF;console.log("SEF ",z);const te=Ql.find(n=>n.id===z)?.id??z,me=Zl.find(n=>n.id===z)?.label??z,ne=$l.find(n=>n.id===z)?.def??z,ue=ea.find(n=>n.id===z)?.description??z,it=ta.find(n=>n.id===z)?.short_units??z,Z=la.find(n=>n.id===z)?.units??z;let $,G,oe=!1,Pe="";const Ge=["overview","compare"];function ge(){const n=window.scrollY;t(15,oe=n>250);for(const H of Ge){const y=document.getElementById(H);if(!y)continue;const Q=y.getBoundingClientRect();if(Q.top<=150&&Q.bottom>=150){Pe!==H&&jt.capture("section entered (sef)",{section_name:H}),Pe=H;break}}}Pl(()=>(window.addEventListener("scroll",ge),ge(),()=>window.removeEventListener("scroll",ge))),xl(()=>{window.removeEventListener("scroll",ge)});async function de(){g=await Wt(sa(z)),console.log("totals",g),k=await Wt(ra(z)),console.log("by cobens",k),b=await Wt(ia()),console.log("per_capita_data",b),t(7,w=(_l(g,n=>n.val)??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),R=ml(g,n=>n.val),J=bl[te],t(8,E=J?.[R]??R??"N/A"),console.log("Average Value: ",w),D=Ul(g,n=>n.val),t(11,j=D!==-1?g[D].Lookup_Value:"N/A"),t(9,F=(g[D]?.val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),M=Yl(g,n=>n.val),t(12,x=M!==-1?g[M].Lookup_Value:"N/A"),t(10,B=(g[M]?.val??0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),zt.forEach(n=>{k[n]=+k[n]}),t(25,T=!0)}de().then(()=>{t(13,$=new Kl(g,"LSOA",G,"val",!1,"Lookup_Value",!1)),$.initMap()});function nt(){const n=_l(g,y=>y.val)??0,H=gl(kl().thresholds(20).value(y=>y.val)(g),y=>y.length);i?.append(Oe({height:se/1.9,width:se*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:50,x:{label:`${Z}`},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[ql(g,fa({y:"count"},{x:{value:"val",thresholds:20},fill:"black",fillOpacity:.5,stroke:"black",srokeWidth:5})),je([n],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:n,label:"Average"}},tip:{format:{average:y=>`${y.toFixed(2)}`,x:!1}}}),ze(g,{x:{value:n,thresholds:20},y:H+.1*H,r:5,fill:"#BD210E"}),st({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}))}function Ue(){const n=ml(g,O=>O.val)??0,H=gl(kl().thresholds(20).value(O=>O.val)(g),O=>O.length),y=bl[te],Q=y?Object.keys(y).map(Number):g.filter(O=>O.SEFMAME==te).map(O=>O.SE);c?.append(Oe({height:se/1.9,width:se*1.7,marginLeft:60,marginTop:30,marginRight:20,marginBottom:te==="Typology"?80:50,x:{domain:Q,label:aa(te),tickFormat:O=>y?.[O]??O,tickRotate:te==="Typology"?-10:0},y:{label:"No. of datazones",labelArrow:!1},style:{fontSize:"16px"},marks:[ua(g,Jl({y:"count"},{x:"val",fill:"black",opacity:.5})),je([n],{stroke:"#BD210E",strokeWidth:4,channels:{average:{value:n,label:"Average"}},tip:{format:{average:O=>`${O.toFixed(2)}`,x:!1}}}),ze(g,{x:{value:n,thresholds:20},y:H+.1*H,r:5,fill:"#BD210E"})]}))}function ve(){a?.append(Oe({height:se*1.5,width:se*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[Et([0],{stroke:"#333",strokeWidth:1.25}),je([0],{stroke:"#333",strokeWidth:.75}),ze(g,{x:"val",y:n=>n.total_per_capita*1e3,fill:n=>n.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${Z}`},value:{value:n=>n.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),yt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),st({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}))}function ot(){const H=g.map(y=>({...y,jittered_val:y.val+(Math.random()-.5)*.2}));p?.append(Oe({height:se*1.5,width:se*2,marginLeft:60,marginTop:60,marginRight:10,marginBottom:60,x:{grid:!1},y:{grid:!0},style:{fontSize:"16px"},marks:[Et([0],{stroke:"#333",strokeWidth:1.25}),je([0],{stroke:"#333",strokeWidth:.75}),ze(H,{x:"jittered_val",y:y=>y.total_per_capita*1e3,fill:y=>y.total_per_capita<0?"#BD210E":"#242424",r:.9,fillOpacity:.75,channels:{location:{value:"Lookup_Value",label:"Location"},sef:{value:"val",label:`${Z}`},value:{value:y=>y.total_per_capita*1e3,label:"Co-Benefit Value (£, thousand)"}},tip:{format:{location:!0,sef:!0,value:!0,x:!1,y:!1}}}),yt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),st({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}))}function Ye(){zt.forEach(n=>{let H;H=Oe({height:se,width:se,marginLeft:60,marginTop:10,marginRight:10,marginBottom:60,x:{label:null},y:{label:null},style:{fontSize:"12px"},marks:[Et([0],{stroke:"#333",strokeWidth:1.25}),je([0],{stroke:"#333",strokeWidth:.75}),ze(k.filter(y=>y.co_benefit_type==n),{x:"val",y:"total",fill:rt(n),fillOpacity:.5,r:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),yt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),st({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}),v[n]?.append(H)})}function qe(){const H=k.map(y=>({...y,jittered_val:y.val+(Math.random()-.5)*.2}));zt.forEach(y=>{let Q;Q=Oe({height:se,width:se,marginLeft:60,marginTop:10,marginRight:10,marginBottom:60,x:{label:null},y:{label:null},style:{fontSize:"12px"},marks:[Et([0],{stroke:"#333",strokeWidth:1.25}),je([0],{stroke:"#333",strokeWidth:.75}),ze(H.filter(O=>O.co_benefit_type==y),{x:"jittered_val",y:"total",fill:rt(y),fillOpacity:.5,r:.5,channels:{location:{value:"Lookup_Value",label:"Location"}},tip:{format:{location:!0,x:!1,y:!1}}}),yt({label:"Per capita co-benefit value (£, thousand)",labelArrow:!1,labelAnchor:"center"}),st({label:`${Z}`,labelArrow:!1,labelAnchor:"center"})]}),m[y]?.append(Q)})}let N=new Set;function he(n){N.has(n)?N.delete(n):N.add(n),t(16,N=new Set(N))}function Je(n){Ae[n?"unshift":"push"](()=>{c=n,t(4,c)})}function Xe(n){Ae[n?"unshift":"push"](()=>{i=n,t(2,i)})}function pe(n){Ae[n?"unshift":"push"](()=>{p=n,t(5,p)})}function ct(n){Ae[n?"unshift":"push"](()=>{a=n,t(3,a)})}function Ke(n){Ae[n?"unshift":"push"](()=>{G=n,t(14,G)})}const _e=n=>{const H=N.has(n.id);he(n.id),H?jt.capture("cobenefit closed",{cobenefit:n.label}):jt.capture("cobenefit opened",{cobenefit:n.label})};function ft(n,H){Ae[n?"unshift":"push"](()=>{m[H.id]=n,t(6,m)})}function Qe(n,H){Ae[n?"unshift":"push"](()=>{v[H.id]=n,t(0,v)})}function xe(n){Ae[n?"unshift":"push"](()=>{s=n,t(1,s)})}return l.$$set=n=>{"data"in n&&t(24,W=n.data)},l.$$.update=()=>{l.$$.dirty[0]&33554433&&(Object.values(v).forEach(n=>{n.firstChild?.remove()}),T&&(nt(),ot(),Ue(),ve(),Ye(),qe()))},[v,s,i,a,c,p,m,w,E,F,B,j,x,$,G,oe,N,te,me,ne,ue,it,Z,he,W,T,Je,Xe,pe,ct,Ke,_e,ft,Qe,xe]}class Za extends Nl{constructor(e){super(),Ol(this,e,Ca,wa,Fl,{data:24},null,[-1,-1])}}export{Za as component};
