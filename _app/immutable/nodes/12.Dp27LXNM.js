import{s as Tt,e as r,a as L,t as re,c,b as d,g as z,d as ce,f,q as i,i as J,h as o,K as ul,x as Ue,n as ut,y as gl,L as ea,v as yt,j as pe,p as G,w as Ae,A as kt,B as Pe,H as ta,G as Sl,D as la,T as aa,a0 as Il,a1 as sa,r as oa,F as na,z as Et}from"../chunks/scheduler.BVm0POKv.js";import{S as Wt,i as Yt,c as Lt,b as zt,m as wt,t as Me,a as Ye,e as Ml,d as Vt,g as Pl}from"../chunks/index.C_bTuQvQ.js";import{e as Ge,N as ia,s as ra}from"../chunks/NavigationBar.Dh5Yck7h.js";import{b as oe}from"../chunks/paths.DvZz0vVF.js";import"../chunks/entry.CGsKAz6C.js";import{q as xt,u as ca,r as hl,l as fa,ad as Nl,z as ua}from"../chunks/index.DrA8R0kw.js";import{g as ml,C as dl,e as ha,f as ma,r as da,j as ga,h as va}from"../chunks/globals.Bu6lVeFg.js";import{p as _a,t as pa}from"../chunks/percentage.Cu08Svdw.js";import{p as ba}from"../chunks/per_capita.COcMrZFY.js";import{g as jt,q as Ca,r as Da,s as Ea,p as La}from"../chunks/duckdb.Btv2MpRu.js";import"../chunks/transform.Db-NgJu-.js";import{F as za}from"../chunks/Footer.6yP5PmeE.js";import{c as fl}from"../chunks/dsv.XhNTmijJ.js";function Fl(a,e,t){const l=a.slice();return l[10]=e[t],l}function Ol(a){let e,t=Ge(a[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Rl(Fl(a,t,s));return{c(){e=r("ul");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=c(s,"UL",{class:!0});var n=d(e);for(let u=0;u<l.length;u+=1)l[u].l(n);n.forEach(f),this.h()},h(){i(e,"class","suggestions svelte-1kj8esc")},m(s,n){J(s,e,n);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(e,null)},p(s,n){if(n&12){t=Ge(s[2]);let u;for(u=0;u<t.length;u+=1){const h=Fl(s,t,u);l[u]?l[u].p(h,n):(l[u]=Rl(h),l[u].c(),l[u].m(e,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=t.length}},d(s){s&&f(e),yt(l,s)}}}function Rl(a){let e,t=a[10][1]+"",l,s,n;function u(){return a[8](a[10])}return{c(){e=r("li"),l=re(t),this.h()},l(h){e=c(h,"LI",{class:!0});var g=d(e);l=ce(g,t),g.forEach(f),this.h()},h(){i(e,"class","svelte-1kj8esc")},m(h,g){J(h,e,g),o(e,l),s||(n=Ue(e,"click",u),s=!0)},p(h,g){a=h,g&4&&t!==(t=a[10][1]+"")&&pe(l,t)},d(h){h&&f(e),s=!1,n()}}}function wa(a){let e,t,l,s,n,u,h,g,p,_,m=a[2].length&&Ol(a);return{c(){e=r("div"),t=r("div"),l=r("input"),s=L(),n=r("button"),u=re("See Report"),g=L(),m&&m.c(),this.h()},l(w){e=c(w,"DIV",{class:!0});var b=d(e);t=c(b,"DIV",{class:!0});var C=d(t);l=c(C,"INPUT",{type:!0,placeholder:!0,autocomplete:!0,class:!0}),s=z(C),n=c(C,"BUTTON",{type:!0,class:!0});var B=d(n);u=ce(B,"See Report"),B.forEach(f),C.forEach(f),g=z(b),m&&m.l(b),b.forEach(f),this.h()},h(){i(l,"type","text"),i(l,"placeholder","Type local authority name to search..."),i(l,"autocomplete","off"),i(l,"class","svelte-1kj8esc"),i(n,"type","button"),i(n,"class","search-btn svelte-1kj8esc"),n.disabled=h=!a[1],i(t,"class","input-group svelte-1kj8esc"),i(e,"class","autocomplete svelte-1kj8esc")},m(w,b){J(w,e,b),o(e,t),o(t,l),ul(l,a[0]),o(t,s),o(t,n),o(n,u),o(e,g),m&&m.m(e,null),p||(_=[Ue(l,"input",a[7]),Ue(n,"click",a[4])],p=!0)},p(w,[b]){b&1&&l.value!==w[0]&&ul(l,w[0]),b&2&&h!==(h=!w[1])&&(n.disabled=h),w[2].length?m?m.p(w,b):(m=Ol(w),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},i:ut,o:ut,d(w){w&&f(e),m&&m.d(),p=!1,gl(_)}}}function Va(a,e,t){let l,s;const n=ea();let{items:u}=e,h="",g=null;function p([b,C]){t(0,h=C),t(1,g=b),n("select",b),console.log(`Selected code: ${b}`,`Name: ${C}`)}function _(){g&&n("search",g)}function m(){h=this.value,t(0,h)}const w=b=>p(b);return a.$$set=b=>{"items"in b&&t(5,u=b.items)},a.$$.update=()=>{a.$$.dirty&32&&t(6,l=Object.entries(u)),a.$$.dirty&65&&t(2,s=h?l.filter(([b,C])=>C.toLowerCase().includes(h.toLowerCase())).slice(0,10):[])},[h,g,s,p,_,u,l,m,w]}class ya extends Wt{constructor(e){super(),Yt(this,e,Va,wa,Tt,{items:5})}}function ql(a,e,t){const l=a.slice();return l[11]=e[t],l}function Ul(a){let e,t=(a[6]==="total"?a[8](a[11].total_value,a[1],a[2],a[11].co_benefit_type,a[5]):a[8](a[11].value_per_capita,a[3],a[4],a[11].co_benefit_type,a[5]))+"",l;return{c(){e=new ta(!1),l=Sl(),this.h()},l(s){e=la(s,!1),l=Sl(),this.h()},h(){e.a=l},m(s,n){e.m(t,s,n),J(s,l,n)},p(s,n){n&127&&t!==(t=(s[6]==="total"?s[8](s[11].total_value,s[1],s[2],s[11].co_benefit_type,s[5]):s[8](s[11].value_per_capita,s[3],s[4],s[11].co_benefit_type,s[5]))+"")&&e.p(t)},d(s){s&&(f(l),e.d())}}}function ka(a){let e,t=a[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=r("span"),l=re(t)},l(s){e=c(s,"SPAN",{});var n=d(e);l=ce(n,t),n.forEach(f)},m(s,n){J(s,e,n),o(e,l)},p(s,n){n&1&&t!==(t=s[11].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&pe(l,t)},d(s){s&&f(e)}}}function Ta(a){let e,t=a[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=r("span"),l=re(t)},l(s){e=c(s,"SPAN",{});var n=d(e);l=ce(n,t),n.forEach(f)},m(s,n){J(s,e,n),o(e,l)},p(s,n){n&1&&t!==(t=s[11].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&pe(l,t)},d(s){s&&f(e)}}}function Gl(a){let e,t,l,s,n,u,h,g=a[7](a[11].co_benefit_type)+"",p,_,m,w,b,C=a[6],B,H,k,E=Ul(a);function v(M,S){return M[6]==="total"?Ta:ka}let P=v(a),N=P(a);return{c(){e=r("tr"),t=r("td"),l=r("div"),s=r("img"),u=L(),h=r("a"),p=re(g),m=L(),w=r("td"),b=r("div"),E.c(),B=L(),H=r("td"),N.c(),k=L(),this.h()},l(M){e=c(M,"TR",{});var S=d(e);t=c(S,"TD",{});var W=d(t);l=c(W,"DIV",{class:!0});var ne=d(l);s=c(ne,"IMG",{src:!0,alt:!0,class:!0}),u=z(ne),h=c(ne,"A",{href:!0,target:!0});var K=d(h);p=ce(K,g),K.forEach(f),ne.forEach(f),W.forEach(f),m=z(S),w=c(S,"TD",{});var U=d(w);b=c(U,"DIV",{class:!0});var V=d(b);E.l(V),V.forEach(f),U.forEach(f),B=z(S),H=c(S,"TD",{});var R=d(H);N.l(R),R.forEach(f),k=z(S),S.forEach(f),this.h()},h(){Pe(s.src,n=ml(a[11].co_benefit_type))||i(s,"src",n),i(s,"alt","Icon"),i(s,"class","in-table-icon"),i(h,"href",_=oe+"/cobenefit?cobenefit="+a[11].co_benefit_type),i(h,"target","_blank"),i(l,"class","coben-content"),i(b,"class","bar-cell")},m(M,S){J(M,e,S),o(e,t),o(t,l),o(l,s),o(l,u),o(l,h),o(h,p),o(e,m),o(e,w),o(w,b),E.m(b,null),o(e,B),o(e,H),N.m(H,null),o(e,k)},p(M,S){S&1&&!Pe(s.src,n=ml(M[11].co_benefit_type))&&i(s,"src",n),S&1&&g!==(g=M[7](M[11].co_benefit_type)+"")&&pe(p,g),S&1&&_!==(_=oe+"/cobenefit?cobenefit="+M[11].co_benefit_type)&&i(h,"href",_),S&64&&Tt(C,C=M[6])?(E.d(1),E=Ul(M),E.c(),E.m(b,null)):E.p(M,S),P===(P=v(M))&&N?N.p(M,S):(N.d(1),N=P(M),N&&(N.c(),N.m(H,null)))},d(M){M&&f(e),E.d(M),N.d()}}}function Aa(a){let e,t,l,s="Total",n,u,h="Per Capita",g,p,_,m,w,b="Name",C,B,H=a[6]==="total"?"Total":"Per Capita",k,E,v,P=a[6]==="total"?"£, billion":"£",N,M,S,W,ne,K=Ge(a[0]),U=[];for(let V=0;V<K.length;V+=1)U[V]=Gl(ql(a,K,V));return{c(){e=r("div"),t=r("div"),l=r("button"),l.textContent=s,n=L(),u=r("button"),u.textContent=h,g=L(),p=r("table"),_=r("thead"),m=r("tr"),w=r("th"),w.textContent=b,C=L(),B=r("th"),k=re(H),E=L(),v=r("th"),N=re(P),M=L(),S=r("tbody");for(let V=0;V<U.length;V+=1)U[V].c();this.h()},l(V){e=c(V,"DIV",{class:!0});var R=d(e);t=c(R,"DIV",{class:!0});var O=d(t);l=c(O,"BUTTON",{"data-svelte-h":!0}),G(l)!=="svelte-15mf98g"&&(l.textContent=s),n=z(O),u=c(O,"BUTTON",{"data-svelte-h":!0}),G(u)!=="svelte-1ts3a4f"&&(u.textContent=h),O.forEach(f),R.forEach(f),g=z(V),p=c(V,"TABLE",{class:!0});var $=d(p);_=c($,"THEAD",{});var F=d(_);m=c(F,"TR",{});var Y=d(m);w=c(Y,"TH",{"data-svelte-h":!0}),G(w)!=="svelte-13ju7y1"&&(w.textContent=b),C=z(Y),B=c(Y,"TH",{style:!0});var q=d(B);k=ce(q,H),q.forEach(f),E=z(Y),v=c(Y,"TH",{style:!0});var A=d(v);N=ce(A,P),A.forEach(f),Y.forEach(f),F.forEach(f),M=z($),S=c($,"TBODY",{});var j=d(S);for(let y=0;y<U.length;y+=1)U[y].l(j);j.forEach(f),$.forEach(f),this.h()},h(){Ae(l,"selected",a[6]==="total"),Ae(u,"selected",a[6]==="per_capita"),i(t,"class","button-group"),i(e,"class","controls"),kt(B,"width","180px"),kt(v,"width","80px"),i(p,"class","data-table")},m(V,R){J(V,e,R),o(e,t),o(t,l),o(t,n),o(t,u),J(V,g,R),J(V,p,R),o(p,_),o(_,m),o(m,w),o(m,C),o(m,B),o(B,k),o(m,E),o(m,v),o(v,N),o(p,M),o(p,S);for(let O=0;O<U.length;O+=1)U[O]&&U[O].m(S,null);W||(ne=[Ue(l,"click",a[9]),Ue(u,"click",a[10])],W=!0)},p(V,[R]){if(R&64&&Ae(l,"selected",V[6]==="total"),R&64&&Ae(u,"selected",V[6]==="per_capita"),R&64&&H!==(H=V[6]==="total"?"Total":"Per Capita")&&pe(k,H),R&64&&P!==(P=V[6]==="total"?"£, billion":"£")&&pe(N,P),R&511){K=Ge(V[0]);let O;for(O=0;O<K.length;O+=1){const $=ql(V,K,O);U[O]?U[O].p($,R):(U[O]=Gl($),U[O].c(),U[O].m(S,null))}for(;O<U.length;O+=1)U[O].d(1);U.length=K.length}},i:ut,o:ut,d(V){V&&(f(e),f(g),f(p)),yt(U,V),W=!1,gl(ne)}}}function Ha(a,e,t){let{aggregationPerCapitaPerBenefit:l}=e,{minCoBenefValue:s}=e,{maxCoBenefValue:n}=e,{minHHCoBenefValue:u}=e,{maxHHCoBenefValue:h}=e,{COBENEFS_SCALE:g}=e;function p(C){return dl.find(B=>B.id===C)?.label??C}let _="total";function m(C,B,H,k,E){const v=E(k);return xt({width:100,height:20,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,x:{domain:[B,H],axis:null},marks:[ca([0],{stroke:"#3C3C3C"}),hl([C],{x:N=>N,y:0,fill:v})]}).outerHTML}const w=()=>t(6,_="total"),b=()=>t(6,_="per_capita");return a.$$set=C=>{"aggregationPerCapitaPerBenefit"in C&&t(0,l=C.aggregationPerCapitaPerBenefit),"minCoBenefValue"in C&&t(1,s=C.minCoBenefValue),"maxCoBenefValue"in C&&t(2,n=C.maxCoBenefValue),"minHHCoBenefValue"in C&&t(3,u=C.minHHCoBenefValue),"maxHHCoBenefValue"in C&&t(4,h=C.maxHHCoBenefValue),"COBENEFS_SCALE"in C&&t(5,g=C.COBENEFS_SCALE)},[l,s,n,u,h,g,_,p,m,w,b]}class Ba extends Wt{constructor(e){super(),Yt(this,e,Ha,Aa,Tt,{aggregationPerCapitaPerBenefit:0,minCoBenefValue:1,maxCoBenefValue:2,minHHCoBenefValue:3,maxHHCoBenefValue:4,COBENEFS_SCALE:5})}}function jl(a,e,t){const l=a.slice();return l[16]=e[t],l}function xl(a,e,t){const l=a.slice();return l[19]=e[t],l}function Wl(a){let e,t=a[19].label+"",l;return{c(){e=r("option"),l=re(t),this.h()},l(s){e=c(s,"OPTION",{});var n=d(e);l=ce(n,t),n.forEach(f),this.h()},h(){e.__value=a[19].value,ul(e,e.__value)},m(s,n){J(s,e,n),o(e,l)},p:ut,d(s){s&&f(e)}}}function Sa(a){let e,t=a[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=r("span"),l=re(t)},l(s){e=c(s,"SPAN",{});var n=d(e);l=ce(n,t),n.forEach(f)},m(s,n){J(s,e,n),o(e,l)},p(s,n){n&2&&t!==(t=s[16].value_per_capita.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&pe(l,t)},d(s){s&&f(e)}}}function Ia(a){let e,t=a[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"",l;return{c(){e=r("span"),l=re(t)},l(s){e=c(s,"SPAN",{});var n=d(e);l=ce(n,t),n.forEach(f)},m(s,n){J(s,e,n),o(e,l)},p(s,n){n&2&&t!==(t=s[16].total_value.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+"")&&pe(l,t)},d(s){s&&f(e)}}}function Yl(a){let e,t,l,s=(a[5][a[16].LAD]??a[16].LAD)+"",n,u,h,g,p,_,m=(a[2]==="total"?a[9](a[16].total_value,a[3]):a[10](a[16].value_per_capita,a[4]))+"",w,b,C;function B(E,v){return E[2]==="total"?Ia:Sa}let H=B(a),k=H(a);return{c(){e=r("tr"),t=r("td"),l=r("a"),n=re(s),h=L(),g=r("td"),p=r("div"),_=new ta(!1),w=L(),b=r("td"),k.c(),C=L(),this.h()},l(E){e=c(E,"TR",{});var v=d(e);t=c(v,"TD",{});var P=d(t);l=c(P,"A",{href:!0,target:!0});var N=d(l);n=ce(N,s),N.forEach(f),P.forEach(f),h=z(v),g=c(v,"TD",{});var M=d(g);p=c(M,"DIV",{class:!0});var S=d(p);_=la(S,!1),S.forEach(f),M.forEach(f),w=z(v),b=c(v,"TD",{});var W=d(b);k.l(W),W.forEach(f),C=z(v),v.forEach(f),this.h()},h(){i(l,"href",u=oe+"/location?location="+a[16].LAD),i(l,"target","_blank"),_.a=null,i(p,"class","bar-cell")},m(E,v){J(E,e,v),o(e,t),o(t,l),o(l,n),o(e,h),o(e,g),o(g,p),_.m(m,p),o(e,w),o(e,b),k.m(b,null),o(e,C)},p(E,v){v&34&&s!==(s=(E[5][E[16].LAD]??E[16].LAD)+"")&&pe(n,s),v&2&&u!==(u=oe+"/location?location="+E[16].LAD)&&i(l,"href",u),v&30&&m!==(m=(E[2]==="total"?E[9](E[16].total_value,E[3]):E[10](E[16].value_per_capita,E[4]))+"")&&_.p(m),H===(H=B(E))&&k?k.p(E,v):(k.d(1),k=H(E),k&&(k.c(),k.m(b,null)))},d(E){E&&f(e),k.d()}}}function Ma(a){let e,t,l="Nation:",s,n,u,h,g,p="Total",_,m,w="Per Capita",b,C,B,H,k,E='Name <span style="font-weight:300; color: #545454">(Top 12 in display)</span>',v,P,N=a[2]==="total"?"Total":"Per Capita",M,S,W,ne=a[2]==="total"?"£, billion":"£",K,U,V,R,O,$=Ge(a[7]),F=[];for(let A=0;A<$.length;A+=1)F[A]=Wl(xl(a,$,A));let Y=Ge(a[1]),q=[];for(let A=0;A<Y.length;A+=1)q[A]=Yl(jl(a,Y,A));return{c(){e=r("div"),t=r("label"),t.textContent=l,s=L(),n=r("select");for(let A=0;A<F.length;A+=1)F[A].c();u=L(),h=r("div"),g=r("button"),g.textContent=p,_=L(),m=r("button"),m.textContent=w,b=L(),C=r("table"),B=r("thead"),H=r("tr"),k=r("th"),k.innerHTML=E,v=L(),P=r("th"),M=re(N),S=L(),W=r("th"),K=re(ne),U=L(),V=r("tbody");for(let A=0;A<q.length;A+=1)q[A].c();this.h()},l(A){e=c(A,"DIV",{class:!0});var j=d(e);t=c(j,"LABEL",{"data-svelte-h":!0}),G(t)!=="svelte-1ecnfnj"&&(t.textContent=l),s=z(j),n=c(j,"SELECT",{});var y=d(n);for(let Le=0;Le<F.length;Le+=1)F[Le].l(y);y.forEach(f),u=z(j),h=c(j,"DIV",{class:!0});var ee=d(h);g=c(ee,"BUTTON",{"data-svelte-h":!0}),G(g)!=="svelte-2dev6e"&&(g.textContent=p),_=z(ee),m=c(ee,"BUTTON",{"data-svelte-h":!0}),G(m)!=="svelte-1q4fgxf"&&(m.textContent=w),ee.forEach(f),j.forEach(f),b=z(A),C=c(A,"TABLE",{class:!0});var be=d(C);B=c(be,"THEAD",{});var Ne=d(B);H=c(Ne,"TR",{});var we=d(H);k=c(we,"TH",{"data-svelte-h":!0}),G(k)!=="svelte-1homman"&&(k.innerHTML=E),v=z(we),P=c(we,"TH",{style:!0});var Ze=d(P);M=ce(Ze,N),Ze.forEach(f),S=z(we),W=c(we,"TH",{style:!0});var Fe=d(W);K=ce(Fe,ne),Fe.forEach(f),we.forEach(f),Ne.forEach(f),U=z(be),V=c(be,"TBODY",{});var Ve=d(V);for(let Le=0;Le<q.length;Le+=1)q[Le].l(Ve);Ve.forEach(f),be.forEach(f),this.h()},h(){a[0]===void 0&&aa(()=>a[13].call(n)),Ae(g,"selected",a[2]==="total"),Ae(m,"selected",a[2]==="per_capita"),i(h,"class","button-group"),i(e,"class","controls"),kt(P,"width","120px"),kt(W,"width","80px"),i(C,"class","data-table")},m(A,j){J(A,e,j),o(e,t),o(e,s),o(e,n);for(let y=0;y<F.length;y+=1)F[y]&&F[y].m(n,null);Il(n,a[0],!0),o(e,u),o(e,h),o(h,g),o(h,_),o(h,m),J(A,b,j),J(A,C,j),o(C,B),o(B,H),o(H,k),o(H,v),o(H,P),o(P,M),o(H,S),o(H,W),o(W,K),o(C,U),o(C,V);for(let y=0;y<q.length;y+=1)q[y]&&q[y].m(V,null);R||(O=[Ue(n,"change",a[13]),Ue(n,"change",a[8]),Ue(g,"click",a[14]),Ue(m,"click",a[15])],R=!0)},p(A,[j]){if(j&128){$=Ge(A[7]);let y;for(y=0;y<$.length;y+=1){const ee=xl(A,$,y);F[y]?F[y].p(ee,j):(F[y]=Wl(ee),F[y].c(),F[y].m(n,null))}for(;y<F.length;y+=1)F[y].d(1);F.length=$.length}if(j&129&&Il(n,A[0]),j&4&&Ae(g,"selected",A[2]==="total"),j&4&&Ae(m,"selected",A[2]==="per_capita"),j&4&&N!==(N=A[2]==="total"?"Total":"Per Capita")&&pe(M,N),j&4&&ne!==(ne=A[2]==="total"?"£, billion":"£")&&pe(K,ne),j&1598){Y=Ge(A[1]);let y;for(y=0;y<Y.length;y+=1){const ee=jl(A,Y,y);q[y]?q[y].p(ee,j):(q[y]=Yl(ee),q[y].c(),q[y].m(V,null))}for(;y<q.length;y+=1)q[y].d(1);q.length=Y.length}},i:ut,o:ut,d(A){A&&(f(e),f(b),f(C)),yt(F,A),yt(q,A),R=!1,gl(O)}}}function Pa(a,e,t){const l=ea();let{ladData:s=[]}=e,{region:n}=e,{sortBy:u}=e,{maxLADValue:h}=e,{maxHHLADValue:g}=e,{LADToName:p={}}=e,{viewMode:_="total"}=e,{selectedRegion:m="All"}=e;const w=[{label:"All",value:"All"},{label:"England",value:"England"},{label:"Wales",value:"Wales"},{label:"Scotland",value:"Scotland"},{label:"Northern Ireland",value:"NI"}];function b(v){l("filterChange",{region:v.target.value,sortBy:u})}function C(v,P){return xt({width:80,height:20,margin:0,x:{domain:[0,P],axis:null},marks:[hl([v],{x:M=>M,y:0,fill:"#ccc"})]}).outerHTML}function B(v,P){return xt({width:80,height:20,margin:0,x:{domain:[0,P],axis:null},marks:[hl([v],{x:M=>M,y:0,fill:"#ccc"})]}).outerHTML}function H(){n=sa(this),t(0,n),t(7,w)}const k=()=>l("filterChange",{region:n,sortBy:"total"}),E=()=>l("filterChange",{region:n,sortBy:"per_capita"});return a.$$set=v=>{"ladData"in v&&t(1,s=v.ladData),"region"in v&&t(0,n=v.region),"sortBy"in v&&t(2,u=v.sortBy),"maxLADValue"in v&&t(3,h=v.maxLADValue),"maxHHLADValue"in v&&t(4,g=v.maxHHLADValue),"LADToName"in v&&t(5,p=v.LADToName),"viewMode"in v&&t(11,_=v.viewMode),"selectedRegion"in v&&t(12,m=v.selectedRegion)},[n,s,u,h,g,p,l,w,b,C,B,_,m,H,k,E]}class Na extends Wt{constructor(e){super(),Yt(this,e,Pa,Ma,Tt,{ladData:1,region:0,sortBy:2,maxLADValue:3,maxHHLADValue:4,LADToName:5,viewMode:11,selectedRegion:12})}}function Zl(a,e,t){const l=a.slice();return l[51]=e[t],l[53]=t,l}function Kl(a){let e,t,l,s,n,u,h;return{c(){e=r("div"),t=r("img"),n=L(),u=r("img"),this.h()},l(g){e=c(g,"DIV",{class:!0});var p=d(e);t=c(p,"IMG",{class:!0,src:!0,alt:!0}),n=z(p),u=c(p,"IMG",{class:!0,src:!0,alt:!0}),p.forEach(f),this.h()},h(){i(t,"class","slide-image"),Pe(t.src,l=a[51].image)||i(t,"src",l),i(t,"alt",s=a[51].label),i(u,"class","slide-map svelte-zfg2mo"),Pe(u.src,h=a[51].mapImage)||i(u,"src",h),i(u,"alt","Map overlay"),i(e,"class","hero-slide svelte-zfg2mo"),Ae(e,"active",a[53]===a[24]),Ae(e,"previous",a[53]===a[25])},m(g,p){J(g,e,p),o(e,t),o(e,n),o(e,u)},p(g,p){p[0]&2097152&&!Pe(t.src,l=g[51].image)&&i(t,"src",l),p[0]&2097152&&s!==(s=g[51].label)&&i(t,"alt",s),p[0]&2097152&&!Pe(u.src,h=g[51].mapImage)&&i(u,"src",h),p[0]&16777216&&Ae(e,"active",g[53]===g[24]),p[0]&33554432&&Ae(e,"previous",g[53]===g[25])},d(g){g&&f(e)}}}function Xl(a){let e,t,l;return{c(){e=r("div"),t=r("img"),this.h()},l(s){e=c(s,"DIV",{class:!0});var n=d(e);t=c(n,"IMG",{src:!0,alt:!0,class:!0}),n.forEach(f),this.h()},h(){Pe(t.src,l=a[20])||i(t,"src",l),i(t,"alt","Icon"),i(t,"class","svelte-zfg2mo"),i(e,"class","waffle-icon svelte-zfg2mo")},m(s,n){J(s,e,n),o(e,t)},p(s,n){n[0]&1048576&&!Pe(t.src,l=s[20])&&i(t,"src",l)},d(s){s&&f(e)}}}function Fa(a){let e,t="National costs";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-o12owz"&&(e.textContent=t),this.h()},h(){i(e,"class","waffle-caption svelte-zfg2mo")},m(l,s){J(l,e,s)},d(l){l&&f(e)}}}function Oa(a){let e,t="National benefits";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-10ytukz"&&(e.textContent=t),this.h()},h(){i(e,"class","waffle-caption svelte-zfg2mo")},m(l,s){J(l,e,s)},d(l){l&&f(e)}}}function Ra(a){let e,t="Per capita costs";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-6pmcl0"&&(e.textContent=t),this.h()},h(){i(e,"class","waffle-caption svelte-zfg2mo")},m(l,s){J(l,e,s)},d(l){l&&f(e)}}}function qa(a){let e,t="Per capita benefits";return{c(){e=r("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-g1rvwk"&&(e.textContent=t),this.h()},h(){i(e,"class","waffle-caption svelte-zfg2mo")},m(l,s){J(l,e,s)},d(l){l&&f(e)}}}function Jl(a){let e,t,l,s,n,u,h,g,p,_,m="%",w,b,C="Contribution";return{c(){e=r("div"),t=r("div"),l=r("img"),n=L(),u=r("div"),h=r("span"),g=re(a[19]),p=L(),_=r("span"),_.textContent=m,w=L(),b=r("div"),b.textContent=C,this.h()},l(B){e=c(B,"DIV",{class:!0});var H=d(e);t=c(H,"DIV",{class:!0});var k=d(t);l=c(k,"IMG",{class:!0,src:!0,alt:!0}),n=z(k),u=c(k,"DIV",{class:!0});var E=d(u);h=c(E,"SPAN",{class:!0});var v=d(h);g=ce(v,a[19]),v.forEach(f),p=z(E),_=c(E,"SPAN",{class:!0,"data-svelte-h":!0}),G(_)!=="svelte-jxggz7"&&(_.textContent=m),E.forEach(f),k.forEach(f),w=z(H),b=c(H,"DIV",{class:!0,"data-svelte-h":!0}),G(b)!=="svelte-1ahdmih"&&(b.textContent=C),H.forEach(f),this.h()},h(){i(l,"class","aggregation-icon-small svelte-zfg2mo"),Pe(l.src,s=_a)||i(l,"src",s),i(l,"alt","icon"),i(h,"class","waffle-big svelte-zfg2mo"),i(_,"class","small svelte-zfg2mo"),i(u,"class","waffle-value svelte-zfg2mo"),i(t,"class","waffle-value-container svelte-zfg2mo"),i(b,"class","waffle-caption svelte-zfg2mo"),i(e,"class","waffle-stat svelte-zfg2mo")},m(B,H){J(B,e,H),o(e,t),o(t,l),o(t,n),o(t,u),o(u,h),o(h,g),o(u,p),o(u,_),o(e,w),o(e,b)},p(B,H){H[0]&524288&&pe(g,B[19])},d(B){B&&f(e)}}}function Ql(a){let e,t;return e=new Na({props:{ladData:a[8],region:a[9],sortBy:a[10],maxLADValue:a[11],maxHHLADValue:a[12],LADToName:a[0]}}),e.$on("filterChange",a[27]),{c(){Lt(e.$$.fragment)},l(l){zt(e.$$.fragment,l)},m(l,s){wt(e,l,s),t=!0},p(l,s){const n={};s[0]&256&&(n.ladData=l[8]),s[0]&512&&(n.region=l[9]),s[0]&1024&&(n.sortBy=l[10]),s[0]&2048&&(n.maxLADValue=l[11]),s[0]&4096&&(n.maxHHLADValue=l[12]),s[0]&1&&(n.LADToName=l[0]),e.$set(n)},i(l){t||(Me(e.$$.fragment,l),t=!0)},o(l){Ye(e.$$.fragment,l),t=!1},d(l){Vt(e,l)}}}function $l(a){let e,t;return e=new Ba({props:{aggregationPerCapitaPerBenefit:a[2],minCoBenefValue:a[4],maxCoBenefValue:a[3],minHHCoBenefValue:a[5],maxHHCoBenefValue:a[6],COBENEFS_SCALE:ha}}),{c(){Lt(e.$$.fragment)},l(l){zt(e.$$.fragment,l)},m(l,s){wt(e,l,s),t=!0},p(l,s){const n={};s[0]&4&&(n.aggregationPerCapitaPerBenefit=l[2]),s[0]&16&&(n.minCoBenefValue=l[4]),s[0]&8&&(n.maxCoBenefValue=l[3]),s[0]&32&&(n.minHHCoBenefValue=l[5]),s[0]&64&&(n.maxHHCoBenefValue=l[6]),e.$set(n)},i(l){t||(Me(e.$$.fragment,l),t=!0)},o(l){Ye(e.$$.fragment,l),t=!1},d(l){Vt(e,l)}}}function Ua(a){let e,t,l,s,n,u,h,g=`<img src="${oe}/atlas-logos/logo-colored-waffle-png.png" alt="Logo" height="0px"/> <div class="hero-box svelte-zfg2mo"><h1 class="hero-title svelte-zfg2mo">The 
                      <span class="multicolor svelte-zfg2mo"><span style="--clr:#71C35D;" class="svelte-zfg2mo">C</span> <span style="--clr:#E11484;" class="svelte-zfg2mo">o</span> <span style="--clr:#00AED9;" class="svelte-zfg2mo">-</span> <span style="--clr:#EF402B;" class="svelte-zfg2mo">B</span> <span style="--clr:#007DBC;" class="svelte-zfg2mo">e</span> <span style="--clr:#8F1838;" class="svelte-zfg2mo">n</span> <span style="--clr:#C31F33;" class="svelte-zfg2mo">e</span> <span style="--clr:#CF8D2A;" class="svelte-zfg2mo">f</span> <span style="--clr:#F36D25;" class="svelte-zfg2mo">i</span> <span style="--clr:#48773E;" class="svelte-zfg2mo">t</span> <span style="--clr:#D3A029;" class="svelte-zfg2mo">s</span></span> <br/> of Reaching Net Zero in the UK</h1> <p>Catchy slogan.</p></div>`,p,_,m,w,b,C,B,H,k,E,v,P,N,M,S,W,ne,K,U,V,R="billion",O,$,F,Y,q,A,j,y,ee,be,Ne,we,Ze,Fe,Ve,Le,Oe,At="Co-benefits",pt,Ke,bt,D,Z,fe,te="Negative impacts",ze,le,Q=`<div class="columns svelte-zfg2mo"><div class="column svelte-zfg2mo"><h2>What are co-benefits?</h2> <p>Climate actions lower greenhouse gas (GHG) emissions but the gains for society reach further. The
                CO-BENS project models 11 additional benefits based on actions recommended by the Climate Change
                Committee (CCC) in its Seventh Carbon Budget (2025) across 45,000 communities and regions within the
                UK.</p></div> <div class="column svelte-zfg2mo"><h2>What is the Atlas?</h2> <p>The Atlas is a resource that reveals how, when, and for whom benefits emerge, uncovering connections across social, 
                economic, and environmental priorities to guide more informed and effective decisions.</p>
            To understand more about the analysis or if you would like bespoke co-benefit modelling please get
                    in
                    touch by emailing <a href="mailto:cobens@ed.ac.uk">cobens@ed.ac.uk</a></div> <div class="column svelte-zfg2mo"><h2>How to use the Atlas</h2> <p>View report pages on each of the 11 co-benefits, search for local areas or explore the interactive map.</p> <video controls="" width="100%"><source src="${oe}/media/media/atlas-demo-output.mp4" type="video/mp4"/>
                    Your browser does not support the video tag.</video></div></div>`,He,ie,X,Ce,Xe="Explore the Atlas",ye,Re,ke,De,je="Find My Place",Be,I,ue,Je,de,Ct=`<div class="explore-block svelte-zfg2mo"><h2>Read Stories and Analyses</h2> <div class="explore-stories svelte-zfg2mo"><div class="explore-page svelte-zfg2mo"><a href="/stories/story.pdf" target="_blank" rel="noopener noreferrer" class="svelte-zfg2mo"><img class="story-teaser-img svelte-zfg2mo" src="${oe}/stories/Derry_picture.png"/> <h3 class="hover-underline svelte-zfg2mo">Accelerating climate financing in Derry City and Strabane District Council</h3></a></div> <div class="explore-page svelte-zfg2mo"><br/> <br/> <br/> <h3 class="svelte-zfg2mo">More to come...</h3> <p class="svelte-zfg2mo">In the meantime, if you have your own ideas for collaboration on stories related to
                            co-benefits please get in touch using the
                            <a href="https://docs.google.com/forms/d/1w-8Lt9bESZ56PdklTIT38plec7dPgDbJtORkatoXFVY/viewform?edit_requested=true" class="svelte-zfg2mo">feedback
                                form.</a></p></div></div></div>`,Dt,Qe,ht,vl="Browse Report Pages",Zt,Ee,$e,_l=`<div class="explore-page svelte-zfg2mo"><img src="${oe}/pages-teasers/coben.png" alt="Open Co-Benefits Dropdown"/> <h3 class="svelte-zfg2mo">11 Co-Benefits Pages</h3> <p class="svelte-zfg2mo">A Co-benefit page shows the spatial and temporal distribution of a given co-benefit, and
                                its relationship with socio-economic factors.</p></div>`,Kt,et,pl=`<div class="explore-page svelte-zfg2mo"><img class="page-teaser-img svelte-zfg2mo" src="${oe}/pages-teasers/location.png"/> <h3 class="svelte-zfg2mo">382 Local Area Pages</h3> <p class="svelte-zfg2mo">A Local Area page shows the different co-benefits in this area, temporal distributions,
                                and their relationships with local socio-economic distributions.</p></div>`,Xt,tt,bl=`<div class="explore-page svelte-zfg2mo"><img class="page-teaser-img svelte-zfg2mo" src="${oe}/pages-teasers/sef.png"/> <h3 class="svelte-zfg2mo">17 Socio-Economic Factors Pages</h3> <p class="svelte-zfg2mo">A Socio-Economic Factor Page shows the spatial distribution of a given factor and it&#39;s
                                relationships with the different co-benefits.</p></div>`,Jt,lt,Cl=`<div class="explore-page svelte-zfg2mo"><img class="page-teaser-img svelte-zfg2mo" src="${oe}/pages-teasers/map.png"/> <h3 class="svelte-zfg2mo">Interactive Map</h3> <p class="svelte-zfg2mo">The interactive map enables exploring the spatial distributions of both the co-benefits
                                and the socio-economic factors at the datazones and local area levels.</p></div>`,Qt,at,Dl=`<div class="explore-page svelte-zfg2mo"><img class="page-teaser-img svelte-zfg2mo" src="${oe}/pages-teasers/nation.png"/> <h3 class="svelte-zfg2mo">Nation Pages</h3> <p class="svelte-zfg2mo">The nation pages shows the different co-benefits in this nation and temporal distributions.</p></div>`,$t,st,Se,ot,El="Explore by Local Authority",el,nt,Ll="Click to see local authority data report.",tl,ll,Ie,it,zl="Explore by Co-Benefit",al,rt,wl="Click to see each co-benefit data report.",sl,ol,ct,ft,nl,Vl;t=new ia({});let mt=Ge(a[21]),he=[];for(let T=0;T<mt.length;T+=1)he[T]=Kl(Zl(a,mt,T));let ge=a[20]&&Xl(a);function yl(T,x){return T[17]>0?Oa:Fa}let Ht=yl(a),xe=Ht(a);function kl(T,x){return T[18]>0?qa:Ra}let Bt=kl(a),We=Bt(a),ve=a[23]!==null&&Jl(a);ue=new ya({props:{items:a[0]}}),ue.$on("search",a[34]);let ae=!a[7]&&Ql(a),se=!a[7]&&$l(a);return ct=new za({}),{c(){e=r("div"),Lt(t.$$.fragment),l=L(),s=r("section");for(let T=0;T<he.length;T+=1)he[T].c();n=L(),u=r("div"),h=r("div"),h.innerHTML=g,p=L(),_=r("div"),m=r("div"),w=r("div"),ge&&ge.c(),b=L(),C=r("div"),B=re(a[16]),H=L(),k=r("div"),E=r("div"),v=r("div"),P=r("img"),M=L(),S=r("div"),W=r("span"),ne=re("£"),K=re(a[17]),U=L(),V=r("span"),V.textContent=R,O=L(),xe.c(),$=L(),F=r("div"),Y=r("div"),q=r("img"),j=L(),y=r("div"),ee=r("span"),be=re("£"),Ne=re(a[18]),we=L(),We.c(),Ze=L(),ve&&ve.c(),Fe=L(),Ve=r("div"),Le=L(),Oe=r("span"),Oe.textContent=At,pt=L(),Ke=r("div"),bt=L(),D=r("div"),Z=L(),fe=r("span"),fe.textContent=te,ze=L(),le=r("section"),le.innerHTML=Q,He=L(),ie=r("section"),X=r("div"),Ce=r("h1"),Ce.textContent=Xe,ye=L(),Re=r("div"),ke=r("div"),De=r("h1"),De.textContent=je,Be=L(),I=r("div"),Lt(ue.$$.fragment),Je=L(),de=r("div"),de.innerHTML=Ct,Dt=L(),Qe=r("div"),ht=r("h2"),ht.textContent=vl,Zt=L(),Ee=r("div"),$e=r("div"),$e.innerHTML=_l,Kt=L(),et=r("a"),et.innerHTML=pl,Xt=L(),tt=r("a"),tt.innerHTML=bl,Jt=L(),lt=r("a"),lt.innerHTML=Cl,Qt=L(),at=r("a"),at.innerHTML=Dl,$t=L(),st=r("section"),Se=r("div"),ot=r("h2"),ot.textContent=El,el=L(),nt=r("p"),nt.textContent=Ll,tl=L(),ae&&ae.c(),ll=L(),Ie=r("div"),it=r("h2"),it.textContent=zl,al=L(),rt=r("p"),rt.textContent=wl,sl=L(),se&&se.c(),ol=L(),Lt(ct.$$.fragment),this.h()},l(T){e=c(T,"DIV",{});var x=d(e);zt(t.$$.fragment,x),l=z(x),s=c(x,"SECTION",{class:!0});var Te=d(s);for(let cl=0;cl<he.length;cl+=1)he[cl].l(Te);n=z(Te),u=c(Te,"DIV",{class:!0});var me=d(u);h=c(me,"DIV",{class:!0,"data-svelte-h":!0}),G(h)!=="svelte-1mg3lg2"&&(h.innerHTML=g),p=z(me),_=c(me,"DIV",{class:!0});var _e=d(_);m=c(_e,"DIV",{class:!0});var St=d(m);w=c(St,"DIV",{class:!0});var It=d(w);ge&&ge.l(It),b=z(It),C=c(It,"DIV",{class:!0});var Tl=d(C);B=ce(Tl,a[16]),Tl.forEach(f),It.forEach(f),H=z(St),k=c(St,"DIV",{class:!0});var dt=d(k);E=c(dt,"DIV",{class:!0});var Mt=d(E);v=c(Mt,"DIV",{class:!0});var Pt=d(v);P=c(Pt,"IMG",{class:!0,src:!0,alt:!0}),M=z(Pt),S=c(Pt,"DIV",{class:!0});var Nt=d(S);W=c(Nt,"SPAN",{class:!0});var il=d(W);ne=ce(il,"£"),K=ce(il,a[17]),il.forEach(f),U=z(Nt),V=c(Nt,"SPAN",{class:!0,"data-svelte-h":!0}),G(V)!=="svelte-tlhydp"&&(V.textContent=R),Nt.forEach(f),Pt.forEach(f),O=z(Mt),xe.l(Mt),Mt.forEach(f),$=z(dt),F=c(dt,"DIV",{class:!0});var Ft=d(F);Y=c(Ft,"DIV",{class:!0});var Ot=d(Y);q=c(Ot,"IMG",{class:!0,src:!0,alt:!0}),j=z(Ot),y=c(Ot,"DIV",{class:!0});var Al=d(y);ee=c(Al,"SPAN",{class:!0});var rl=d(ee);be=ce(rl,"£"),Ne=ce(rl,a[18]),rl.forEach(f),Al.forEach(f),Ot.forEach(f),we=z(Ft),We.l(Ft),Ft.forEach(f),Ze=z(dt),ve&&ve.l(dt),dt.forEach(f),St.forEach(f),Fe=z(_e),Ve=c(_e,"DIV",{class:!0}),d(Ve).forEach(f),Le=z(_e),Oe=c(_e,"SPAN",{id:!0,class:!0,"data-svelte-h":!0}),G(Oe)!=="svelte-17e5mfb"&&(Oe.textContent=At),pt=z(_e),Ke=c(_e,"DIV",{class:!0}),d(Ke).forEach(f),bt=z(_e),D=c(_e,"DIV",{id:!0,class:!0}),d(D).forEach(f),Z=z(_e),fe=c(_e,"SPAN",{id:!0,class:!0,"data-svelte-h":!0}),G(fe)!=="svelte-t2ovnm"&&(fe.textContent=te),_e.forEach(f),me.forEach(f),Te.forEach(f),ze=z(x),le=c(x,"SECTION",{id:!0,"data-svelte-h":!0}),G(le)!=="svelte-1ywbbm5"&&(le.innerHTML=Q),He=z(x),ie=c(x,"SECTION",{id:!0,class:!0});var gt=d(ie);X=c(gt,"DIV",{class:!0});var Rt=d(X);Ce=c(Rt,"H1",{id:!0,class:!0,"data-svelte-h":!0}),G(Ce)!=="svelte-157b9z3"&&(Ce.textContent=Xe),ye=z(Rt),Re=c(Rt,"DIV",{class:!0});var Hl=d(Re);ke=c(Hl,"DIV",{class:!0});var qt=d(ke);De=c(qt,"H1",{class:!0,"data-svelte-h":!0}),G(De)!=="svelte-2t7dxi"&&(De.textContent=je),Be=z(qt),I=c(qt,"DIV",{class:!0});var Bl=d(I);zt(ue.$$.fragment,Bl),Bl.forEach(f),qt.forEach(f),Hl.forEach(f),Rt.forEach(f),Je=z(gt),de=c(gt,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),G(de)!=="svelte-6ot2l2"&&(de.innerHTML=Ct),Dt=z(gt),Qe=c(gt,"DIV",{class:!0});var Ut=d(Qe);ht=c(Ut,"H2",{"data-svelte-h":!0}),G(ht)!=="svelte-1ig97qq"&&(ht.textContent=vl),Zt=z(Ut),Ee=c(Ut,"DIV",{class:!0});var qe=d(Ee);$e=c(qe,"DIV",{style:!0,"data-svelte-h":!0}),G($e)!=="svelte-lq89xs"&&($e.innerHTML=_l),Kt=z(qe),et=c(qe,"A",{href:!0,class:!0,"data-svelte-h":!0}),G(et)!=="svelte-13xts9j"&&(et.innerHTML=pl),Xt=z(qe),tt=c(qe,"A",{href:!0,class:!0,"data-svelte-h":!0}),G(tt)!=="svelte-1j5qio4"&&(tt.innerHTML=bl),Jt=z(qe),lt=c(qe,"A",{href:!0,class:!0,"data-svelte-h":!0}),G(lt)!=="svelte-ss09fy"&&(lt.innerHTML=Cl),Qt=z(qe),at=c(qe,"A",{href:!0,class:!0,"data-svelte-h":!0}),G(at)!=="svelte-15eng4z"&&(at.innerHTML=Dl),qe.forEach(f),Ut.forEach(f),gt.forEach(f),$t=z(x),st=c(x,"SECTION",{class:!0});var Gt=d(st);Se=c(Gt,"DIV",{class:!0});var vt=d(Se);ot=c(vt,"H2",{class:!0,"data-svelte-h":!0}),G(ot)!=="svelte-pgup4c"&&(ot.textContent=El),el=z(vt),nt=c(vt,"P",{class:!0,"data-svelte-h":!0}),G(nt)!=="svelte-owmq24"&&(nt.textContent=Ll),tl=z(vt),ae&&ae.l(vt),vt.forEach(f),ll=z(Gt),Ie=c(Gt,"DIV",{class:!0});var _t=d(Ie);it=c(_t,"H2",{class:!0,"data-svelte-h":!0}),G(it)!=="svelte-9nk5va"&&(it.textContent=zl),al=z(_t),rt=c(_t,"P",{class:!0,"data-svelte-h":!0}),G(rt)!=="svelte-4140on"&&(rt.textContent=wl),sl=z(_t),se&&se.l(_t),_t.forEach(f),Gt.forEach(f),ol=z(x),zt(ct.$$.fragment,x),x.forEach(f),this.h()},h(){i(h,"class","hero-text svelte-zfg2mo"),i(C,"class","waffle-title svelte-zfg2mo"),i(w,"class","waffle-header svelte-zfg2mo"),i(P,"class","aggregation-icon-small svelte-zfg2mo"),Pe(P.src,N=pa)||i(P,"src",N),i(P,"alt","icon"),i(W,"class","waffle-big svelte-zfg2mo"),i(V,"class","small svelte-zfg2mo"),i(S,"class","waffle-value svelte-zfg2mo"),i(v,"class","waffle-value-container svelte-zfg2mo"),i(E,"class","waffle-stat svelte-zfg2mo"),i(q,"class","aggregation-icon-small svelte-zfg2mo"),Pe(q.src,A=ba)||i(q,"src",A),i(q,"alt","icon"),i(ee,"class","waffle-big svelte-zfg2mo"),i(y,"class","waffle-value svelte-zfg2mo"),i(Y,"class","waffle-value-container svelte-zfg2mo"),i(F,"class","waffle-stat svelte-zfg2mo"),i(k,"class","waffle-stats svelte-zfg2mo"),i(m,"class","waffle-label svelte-zfg2mo"),i(Ve,"class","waffle-bg svelte-zfg2mo"),i(Oe,"id","waffleTopLabel"),i(Oe,"class","waffle-text svelte-zfg2mo"),i(Ke,"class","waffle"),i(D,"id","waffleLabels"),i(D,"class","waffle-chart-labels svelte-zfg2mo"),i(fe,"id","waffleBottomLabel"),i(fe,"class","waffle-text svelte-zfg2mo"),i(_,"class","waffle-overlay svelte-zfg2mo"),i(u,"class","hero-content svelte-zfg2mo"),i(s,"class","hero-container svelte-zfg2mo"),i(le,"id","guide"),i(Ce,"id","explore-title"),i(Ce,"class","svelte-zfg2mo"),i(De,"class","search-label svelte-zfg2mo"),i(I,"class","search-container svelte-zfg2mo"),i(ke,"class","search-label-and-input svelte-zfg2mo"),i(Re,"class","explore-block search-section svelte-zfg2mo"),i(X,"class","explore-header svelte-zfg2mo"),i(de,"id","explore-section-main"),i(de,"class","svelte-zfg2mo"),kt($e,"cursor","pointer"),i(et,"href",oe+"/lad"),i(et,"class","svelte-zfg2mo"),i(tt,"href",oe+"/sefs"),i(tt,"class","svelte-zfg2mo"),i(lt,"href",oe+"/map"),i(lt,"class","svelte-zfg2mo"),i(at,"href",oe+"/lad"),i(at,"class","svelte-zfg2mo"),i(Ee,"class","explore-pages svelte-zfg2mo"),i(Qe,"class","explore-block svelte-zfg2mo"),i(ie,"id","explore-section"),i(ie,"class","svelte-zfg2mo"),i(ot,"class","svelte-zfg2mo"),i(nt,"class","svelte-zfg2mo"),i(Se,"class","side-box svelte-zfg2mo"),i(it,"class","svelte-zfg2mo"),i(rt,"class","svelte-zfg2mo"),i(Ie,"class","side-box svelte-zfg2mo"),i(st,"class","side-by-side-section svelte-zfg2mo")},m(T,x){J(T,e,x),wt(t,e,null),o(e,l),o(e,s);for(let Te=0;Te<he.length;Te+=1)he[Te]&&he[Te].m(s,null);o(s,n),o(s,u),o(u,h),o(u,p),o(u,_),o(_,m),o(m,w),ge&&ge.m(w,null),o(w,b),o(w,C),o(C,B),o(m,H),o(m,k),o(k,E),o(E,v),o(v,P),o(v,M),o(v,S),o(S,W),o(W,ne),o(W,K),o(S,U),o(S,V),o(E,O),xe.m(E,null),o(k,$),o(k,F),o(F,Y),o(Y,q),o(Y,j),o(Y,y),o(y,ee),o(ee,be),o(ee,Ne),o(F,we),We.m(F,null),o(k,Ze),ve&&ve.m(k,null),a[30](m),o(_,Fe),o(_,Ve),a[31](Ve),o(_,Le),o(_,Oe),o(_,pt),o(_,Ke),a[32](Ke),o(_,bt),o(_,D),o(_,Z),o(_,fe),a[33](s),o(e,ze),o(e,le),o(e,He),o(e,ie),o(ie,X),o(X,Ce),o(X,ye),o(X,Re),o(Re,ke),o(ke,De),o(ke,Be),o(ke,I),wt(ue,I,null),o(ie,Je),o(ie,de),o(ie,Dt),o(ie,Qe),o(Qe,ht),o(Qe,Zt),o(Qe,Ee),o(Ee,$e),o(Ee,Kt),o(Ee,et),o(Ee,Xt),o(Ee,tt),o(Ee,Jt),o(Ee,lt),o(Ee,Qt),o(Ee,at),o(e,$t),o(e,st),o(st,Se),o(Se,ot),o(Se,el),o(Se,nt),o(Se,tl),ae&&ae.m(Se,null),o(st,ll),o(st,Ie),o(Ie,it),o(Ie,al),o(Ie,rt),o(Ie,sl),se&&se.m(Ie,null),o(e,ol),wt(ct,e,null),a[35](e),ft=!0,nl||(Vl=Ue($e,"click",a[26]),nl=!0)},p(T,x){if(x[0]&52428800){mt=Ge(T[21]);let me;for(me=0;me<mt.length;me+=1){const _e=Zl(T,mt,me);he[me]?he[me].p(_e,x):(he[me]=Kl(_e),he[me].c(),he[me].m(s,n))}for(;me<he.length;me+=1)he[me].d(1);he.length=mt.length}T[20]?ge?ge.p(T,x):(ge=Xl(T),ge.c(),ge.m(w,b)):ge&&(ge.d(1),ge=null),(!ft||x[0]&65536)&&pe(B,T[16]),(!ft||x[0]&131072)&&pe(K,T[17]),Ht!==(Ht=yl(T))&&(xe.d(1),xe=Ht(T),xe&&(xe.c(),xe.m(E,null))),(!ft||x[0]&262144)&&pe(Ne,T[18]),Bt!==(Bt=kl(T))&&(We.d(1),We=Bt(T),We&&(We.c(),We.m(F,null))),T[23]!==null?ve?ve.p(T,x):(ve=Jl(T),ve.c(),ve.m(k,null)):ve&&(ve.d(1),ve=null);const Te={};x[0]&1&&(Te.items=T[0]),ue.$set(Te),T[7]?ae&&(Pl(),Ye(ae,1,1,()=>{ae=null}),Ml()):ae?(ae.p(T,x),x[0]&128&&Me(ae,1)):(ae=Ql(T),ae.c(),Me(ae,1),ae.m(Se,null)),T[7]?se&&(Pl(),Ye(se,1,1,()=>{se=null}),Ml()):se?(se.p(T,x),x[0]&128&&Me(se,1)):(se=$l(T),se.c(),Me(se,1),se.m(Ie,null))},i(T){ft||(Me(t.$$.fragment,T),Me(ue.$$.fragment,T),Me(ae),Me(se),Me(ct.$$.fragment,T),ft=!0)},o(T){Ye(t.$$.fragment,T),Ye(ue.$$.fragment,T),Ye(ae),Ye(se),Ye(ct.$$.fragment,T),ft=!1},d(T){T&&f(e),Vt(t),yt(he,T),ge&&ge.d(),xe.d(),We.d(),ve&&ve.d(),a[30](null),a[31](null),a[32](null),a[33](null),Vt(ue),ae&&ae.d(),se&&se.d(),Vt(ct),a[35](null),nl=!1,Vl()}}}function Ga(a,e,t){function l(){ra.set(!0)}const s=`${oe}/LAD/Eng_Wales_LSOA_LADs.csv`,n=`${oe}/LAD/NI_DZ_LAD.csv`,u=`${oe}/LAD/Scotland_DZ_LA.csv`;let h={},{data:g}=e,p,_,m,w,b,C,B,H,k=!0;async function E(){_=await jt(Ca()),t(2,m=await jt(Da())),await jt(Ea()),_=[..._].sort((D,Z)=>Z.total-D.total),t(2,m=[...m].sort((D,Z)=>Z.total_value-D.total_value)),w=fa(m,D=>D.value_per_capita),t(3,b=Math.max(...m.map(D=>D.total_value))),t(4,C=Math.min(...m.map(D=>D.total_value))),t(5,B=Math.min(...m.map(D=>D.value_per_capita))),t(6,H=Math.max(...m.map(D=>D.value_per_capita))),await fl(s).then(D=>{for(let Z of D)t(0,h[Z.LAD22CD]=Z.LAD22NM,h)}),await fl(n).then(D=>{for(let Z of D)t(0,h[Z.LGD2014_code]=Z.LGD2014_name,h)}),await fl(u).then(D=>{for(let Z of D)t(0,h[Z.LA_Code]=Z.LA_Name,h)}),t(7,k=!1)}let v=[],P="All",N="total",M=0,S=0;async function W(){const D=La({region:P,sortBy:N}),Z=await jt(D);t(8,v=Z),t(11,M=Math.max(...Z.map(fe=>fe.total_value))),t(12,S=Math.max(...Z.map(fe=>fe.value_per_capita)))}function ne(D){t(9,P=D.detail.region),t(10,N=D.detail.sortBy),W()}let K,U=[],V=null,R,O,$,F,Y="",q,A=null,j=[],y,ee=null,be=0,Ne=0,we;function Ze(D){const Z=K.filter(Q=>Q.type!=="empty").map(Q=>Q.type),fe=Array.from(new Set(Z)),te=_.reduce((Q,He)=>Q+He.total,0),ze=[{type:null,label:"Total Co-Benefits",icon:null,totalValue:te.toFixed(2),perCapitaValue:w.toFixed(2),percentValue:"100%"},...fe.map(Q=>{const ie=dl.find(Be=>Be.id===Q)?.label??Q;let X=ml(Q);const Ce=_.find(Be=>Be.co_benefit_type===Q),Xe=m.find(Be=>Be.co_benefit_type===Q),ye=Ce?.total??0,Re=Xe?.value_per_capita??0,ke=ye.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),De=Re.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),je=te>0?(ye/te*100).toFixed(2):0;return{type:Q,label:ie,icon:X,totalValue:ke,perCapitaValue:De,percentValue:je}})];setInterval(()=>{t(25,Ne=be),t(24,be=(be+1)%ze.length);const{type:Q,label:He,icon:ie,totalValue:X,perCapitaValue:Ce,percentValue:Xe}=ze[be];t(23,ee=Q),t(16,$=He),t(17,F=X),t(18,Y=Ce),t(19,q=Xe),t(20,A=ie),Fe(D,Q)},6e3);const le=ze[0];t(23,ee=le.type),t(16,$=le.label),t(17,F=le.totalValue),t(18,Y=le.perCapitaValue),t(19,q=le.percentValue),Fe(D,le.type)}function Fe(D,Z){if(!V)return;t(13,V.innerHTML="",V);const fe=1,te=12,ze=[],le=[];for(const I of _){const ue=Math.round(Math.abs(I.total)/fe),Je=Array.from({length:ue},()=>({type:I.co_benefit_type,negative:I.total<0}));I.total<0?le.push(...Je):ze.push(...Je)}const Q=Math.ceil(ze.length/te),He=Math.ceil(le.length/te),ie=Q+He,X=Math.floor(D/ie),Ce=ze.map((I,ue)=>({x:ue%te,y:Math.floor(ue/te),...I})),Xe=le.map((I,ue)=>({x:ue%te,y:Q+Math.floor(ue/te),...I}));K=[...Ce,...Xe];const ye=50,Re=Math.floor(Q*te/ye)*ye,ke=-Math.floor(He*te/ye)*ye,De=document.getElementById("waffleLabels");if(De){De.innerHTML="";for(let I=Re;I>=ke;I-=ye){const Je=(Q*te-I)/te,de=document.createElement("div");de.textContent=`${I>0?"+":""}${I}bn`,de.style.position="absolute",de.style.left="0";const Ct=Math.max(8,Math.floor(X*.6)),Dt=Je*X+X/2-Ct/2-15;de.style.top=`${Dt}px`,de.style.fontSize=`${Ct}px`,de.style.lineHeight="1",De.appendChild(de)}De.style.height=`${X*ie}px`}U=Array.from(new Set(K.map(I=>I.type).filter(I=>I!=="empty"))),t(21,j=ga(U));const je=Z??null,Be=xt({width:X*te*1.1,height:X*ie-30,margin:0,marginRight:35,x:{axis:null},y:{axis:null},color:{type:"ordinal",domain:dl.map(I=>I.id),range:va,unknown:"#eee",legend:!1},marks:[Nl(K.filter(I=>!I.negative),{x:I=>I.x*X,y:I=>I.y*X,fill:"type",fillOpacity:I=>je&&I.type!==je?.15:1}),ua([Q*X-10],{stroke:"grey",strokeWidth:1.2}),Nl(K.filter(I=>I.negative),{x:I=>I.x*X,y:I=>I.y*X,stroke:"type",strokeOpacity:I=>je&&I.type!==je?.15:1,strokeWidth:1,fill:"none"})]});R&&(t(14,R.style.width=`${X*te+30}px`,R),t(14,R.style.height=`${D}px`,R)),t(13,V.innerHTML="",V),V.append(Be)}function Ve(D){window.open(`${oe}/location?location=${D}`,"_blank")}oa(()=>{ma(p),E().then(()=>{W();const D=y.getBoundingClientRect().height,Z=document.getElementById("waffleTopLabel"),fe=document.getElementById("waffleBottomLabel"),te=Z?.offsetHeight??0,ze=fe?.offsetHeight??0,le=D-te-ze;Fe(le),Ze(D),da(p)})}),na(()=>{clearInterval(we)});function Le(D){Et[D?"unshift":"push"](()=>{O=D,t(15,O)})}function Oe(D){Et[D?"unshift":"push"](()=>{R=D,t(14,R)})}function At(D){Et[D?"unshift":"push"](()=>{V=D,t(13,V)})}function pt(D){Et[D?"unshift":"push"](()=>{y=D,t(22,y)})}const Ke=D=>Ve(D.detail);function bt(D){Et[D?"unshift":"push"](()=>{p=D,t(1,p)})}return a.$$set=D=>{"data"in D&&t(29,g=D.data)},a.$$.update=()=>{a.$$.dirty[0]&536870912},[h,p,m,b,C,B,H,k,v,P,N,M,S,V,R,O,$,F,Y,q,A,j,y,ee,be,Ne,l,ne,Ve,g,Le,Oe,At,pt,Ke,bt]}class as extends Wt{constructor(e){super(),Yt(this,e,Ga,Ua,Tt,{data:29},null,[-1,-1])}}export{as as component};
